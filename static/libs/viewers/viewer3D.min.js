/*!
 * LMV v7.15.2
 * 
 * Copyright 2020 Autodesk, Inc.
 * All rights reserved.
 * 
 * This computer source code and related instructions and comments are the
 * unpublished confidential and proprietary information of Autodesk, Inc.
 * and are protected under Federal copyright and state trade secret law.
 * They may not be disclosed to, copied or used by any third party without
 * the prior written consent of Autodesk, Inc.
 * 
 * Autodesk Forge Viewer Usage Limitations:
 * 
 * The Autodesk Forge viewer can only be used to view files generated by
 * Autodesk Forge services. The Autodesk Forge Viewer JavaScript must be
 * delivered from an Autodesk hosted URL.
 */
var LMV = function (e) {
  var t = {};

  function n(i) {
    if (t[i]) return t[i].exports;
    var r = t[i] = {
      i: i,
      l: !1,
      exports: {}
    };
    return e[i].call(r.exports, r, r.exports, n), r.l = !0, r.exports
  }
  return n.m = e, n.c = t, n.d = function (e, t, i) {
    n.o(e, t) || Object.defineProperty(e, t, {
      enumerable: !0,
      get: i
    })
  }, n.r = function (e) {
    "undefined" != typeof Symbol && Symbol.toStringTag && Object.defineProperty(e, Symbol.toStringTag, {
      value: "Module"
    }), Object.defineProperty(e, "__esModule", {
      value: !0
    })
  }, n.t = function (e, t) {
    if (1 & t && (e = n(e)), 8 & t) return e;
    if (4 & t && "object" == typeof e && e && e.__esModule) return e;
    var i = Object.create(null);
    if (n.r(i), Object.defineProperty(i, "default", {
        enumerable: !0,
        value: e
      }), 2 & t && "string" != typeof e)
      for (var r in e) n.d(i, r, function (t) {
        return e[t]
      }.bind(null, r));
    return i
  }, n.n = function (e) {
    var t = e && e.__esModule ? function () {
      return e.default
    } : function () {
      return e
    };
    return n.d(t, "a", t), t
  }, n.o = function (e, t) {
    return Object.prototype.hasOwnProperty.call(e, t)
  }, n.p = "", n(n.s = 407)
}([function (e, t, n) {
  (function (e) {
    function t(e) {
      return (t = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (e) {
        return typeof e
      } : function (e) {
        return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
      })(e)
    }
    var n, i, r, o, a, s, l, c, u, h, d, f, p, m, g, v, y, b, _, x, w, E, A, S, M, T, C, P, L, D, I, R, O, k, N, F, U, V, B, z, G, H, W, j, q, X = {
      REVISION: "71"
    };
    "object" === t(e) && (e.exports = X), void 0 === Math.sign && (Math.sign = function (e) {
        return e < 0 ? -1 : e > 0 ? 1 : +e
      }), X.log = function () {
        console.log.apply(console, arguments)
      }, X.warn = function () {
        console.warn.apply(console, arguments)
      }, X.error = function () {
        console.error.apply(console, arguments)
      }, X.MOUSE = {
        LEFT: 0,
        MIDDLE: 1,
        RIGHT: 2
      }, X.CullFaceNone = 0, X.CullFaceBack = 1, X.CullFaceFront = 2, X.CullFaceFrontBack = 3, X.FrontFaceDirectionCW = 0, X.FrontFaceDirectionCCW = 1, X.BasicShadowMap = 0, X.PCFShadowMap = 1, X.PCFSoftShadowMap = 2, X.FrontSide = 0, X.BackSide = 1, X.DoubleSide = 2, X.NoShading = 0, X.FlatShading = 1, X.SmoothShading = 2, X.NoColors = 0, X.FaceColors = 1, X.VertexColors = 2, X.NoBlending = 0, X.NormalBlending = 1, X.AdditiveBlending = 2, X.SubtractiveBlending = 3, X.MultiplyBlending = 4, X.CustomBlending = 5, X.AddEquation = 100, X.SubtractEquation = 101, X.ReverseSubtractEquation = 102, X.MinEquation = 103, X.MaxEquation = 104, X.ZeroFactor = 200, X.OneFactor = 201, X.SrcColorFactor = 202, X.OneMinusSrcColorFactor = 203, X.SrcAlphaFactor = 204, X.OneMinusSrcAlphaFactor = 205, X.DstAlphaFactor = 206, X.OneMinusDstAlphaFactor = 207, X.DstColorFactor = 208, X.OneMinusDstColorFactor = 209, X.SrcAlphaSaturateFactor = 210, X.MultiplyOperation = 0, X.MixOperation = 1, X.AddOperation = 2, X.UVMapping = 300, X.CubeReflectionMapping = 301, X.CubeRefractionMapping = 302, X.EquirectangularReflectionMapping = 303, X.EquirectangularRefractionMapping = 304, X.SphericalReflectionMapping = 305, X.RepeatWrapping = 1e3, X.ClampToEdgeWrapping = 1001, X.MirroredRepeatWrapping = 1002, X.NearestFilter = 1003, X.NearestMipMapNearestFilter = 1004, X.NearestMipMapLinearFilter = 1005, X.LinearFilter = 1006, X.LinearMipMapNearestFilter = 1007, X.LinearMipMapLinearFilter = 1008, X.UnsignedByteType = 1009, X.ByteType = 1010, X.ShortType = 1011, X.UnsignedShortType = 1012, X.IntType = 1013, X.UnsignedIntType = 1014, X.FloatType = 1015, X.HalfFloatType = 1025, X.UnsignedShort4444Type = 1016, X.UnsignedShort5551Type = 1017, X.UnsignedShort565Type = 1018, X.AlphaFormat = 1019, X.RGBFormat = 1020, X.RGBAFormat = 1021, X.LuminanceFormat = 1022, X.LuminanceAlphaFormat = 1023, X.RGBEFormat = X.RGBAFormat, X.RGB_S3TC_DXT1_Format = 2001, X.RGBA_S3TC_DXT1_Format = 2002, X.RGBA_S3TC_DXT3_Format = 2003, X.RGBA_S3TC_DXT5_Format = 2004, X.RGB_PVRTC_4BPPV1_Format = 2100, X.RGB_PVRTC_2BPPV1_Format = 2101, X.RGBA_PVRTC_4BPPV1_Format = 2102, X.RGBA_PVRTC_2BPPV1_Format = 2103, X.Projector = function () {
        X.error("THREE.Projector has been moved to /examples/js/renderers/Projector.js."), this.projectVector = function (e, t) {
          X.warn("THREE.Projector: .projectVector() is now vector.project()."), e.project(t)
        }, this.unprojectVector = function (e, t) {
          X.warn("THREE.Projector: .unprojectVector() is now vector.unproject()."), e.unproject(t)
        }, this.pickingRay = function (e, t) {
          X.error("THREE.Projector: .pickingRay() is now raycaster.setFromCamera().")
        }
      }, X.CanvasRenderer = function () {
        X.error("THREE.CanvasRenderer has been moved to /examples/js/renderers/CanvasRenderer.js"), this.domElement = document.createElement("canvas"), this.clear = function () {}, this.render = function () {}, this.setClearColor = function () {}, this.setSize = function () {}
      }, X.Color = function (e) {
        return 3 === arguments.length ? this.setRGB(arguments[0], arguments[1], arguments[2]) : this.set(e)
      }, X.Color.prototype = {
        constructor: X.Color,
        r: 1,
        g: 1,
        b: 1,
        set: function (e) {
          return e instanceof X.Color ? this.copy(e) : "number" == typeof e ? this.setHex(e) : "string" == typeof e && this.setStyle(e), this
        },
        setHex: function (e) {
          return e = Math.floor(e), this.r = (e >> 16 & 255) / 255, this.g = (e >> 8 & 255) / 255, this.b = (255 & e) / 255, this
        },
        setRGB: function (e, t, n) {
          return this.r = e, this.g = t, this.b = n, this
        },
        setHSL: function (e, t, n) {
          if (0 === t) this.r = this.g = this.b = n;
          else {
            var i = function (e, t, n) {
                return n < 0 && (n += 1), n > 1 && (n -= 1), n < 1 / 6 ? e + 6 * (t - e) * n : n < .5 ? t : n < 2 / 3 ? e + 6 * (t - e) * (2 / 3 - n) : e
              },
              r = n <= .5 ? n * (1 + t) : n + t - n * t,
              o = 2 * n - r;
            this.r = i(o, r, e + 1 / 3), this.g = i(o, r, e), this.b = i(o, r, e - 1 / 3)
          }
          return this
        },
        setStyle: function (e) {
          if (/^rgb\((\d+), ?(\d+), ?(\d+)\)$/i.test(e)) {
            var t = /^rgb\((\d+), ?(\d+), ?(\d+)\)$/i.exec(e);
            return this.r = Math.min(255, parseInt(t[1], 10)) / 255, this.g = Math.min(255, parseInt(t[2], 10)) / 255, this.b = Math.min(255, parseInt(t[3], 10)) / 255, this
          }
          if (/^rgb\((\d+)\%, ?(\d+)\%, ?(\d+)\%\)$/i.test(e)) {
            t = /^rgb\((\d+)\%, ?(\d+)\%, ?(\d+)\%\)$/i.exec(e);
            return this.r = Math.min(100, parseInt(t[1], 10)) / 100, this.g = Math.min(100, parseInt(t[2], 10)) / 100, this.b = Math.min(100, parseInt(t[3], 10)) / 100, this
          }
          if (/^\#([0-9a-f]{6})$/i.test(e)) {
            t = /^\#([0-9a-f]{6})$/i.exec(e);
            return this.setHex(parseInt(t[1], 16)), this
          }
          if (/^\#([0-9a-f])([0-9a-f])([0-9a-f])$/i.test(e)) {
            t = /^\#([0-9a-f])([0-9a-f])([0-9a-f])$/i.exec(e);
            return this.setHex(parseInt(t[1] + t[1] + t[2] + t[2] + t[3] + t[3], 16)), this
          }
          if (/^(\w+)$/i.test(e)) return this.setHex(X.ColorKeywords[e]), this
        },
        copy: function (e) {
          return this.r = e.r, this.g = e.g, this.b = e.b, this
        },
        copyGammaToLinear: function (e, t) {
          return void 0 === t && (t = 2), this.r = Math.pow(e.r, t), this.g = Math.pow(e.g, t), this.b = Math.pow(e.b, t), this
        },
        copyLinearToGamma: function (e, t) {
          void 0 === t && (t = 2);
          var n = t > 0 ? 1 / t : 1;
          return this.r = Math.pow(e.r, n), this.g = Math.pow(e.g, n), this.b = Math.pow(e.b, n), this
        },
        convertGammaToLinear: function () {
          var e = this.r,
            t = this.g,
            n = this.b;
          return this.r = e * e, this.g = t * t, this.b = n * n, this
        },
        convertLinearToGamma: function () {
          return this.r = Math.sqrt(this.r), this.g = Math.sqrt(this.g), this.b = Math.sqrt(this.b), this
        },
        getHex: function () {
          return 255 * this.r << 16 ^ 255 * this.g << 8 ^ 255 * this.b << 0
        },
        getHexString: function () {
          return ("000000" + this.getHex().toString(16)).slice(-6)
        },
        getHSL: function (e) {
          var t, n, i = e || {
              h: 0,
              s: 0,
              l: 0
            },
            r = this.r,
            o = this.g,
            a = this.b,
            s = Math.max(r, o, a),
            l = Math.min(r, o, a),
            c = (l + s) / 2;
          if (l === s) t = 0, n = 0;
          else {
            var u = s - l;
            switch (n = c <= .5 ? u / (s + l) : u / (2 - s - l), s) {
              case r:
                t = (o - a) / u + (o < a ? 6 : 0);
                break;
              case o:
                t = (a - r) / u + 2;
                break;
              case a:
                t = (r - o) / u + 4
            }
            t /= 6
          }
          return i.h = t, i.s = n, i.l = c, i
        },
        getStyle: function () {
          return "rgb(" + (255 * this.r | 0) + "," + (255 * this.g | 0) + "," + (255 * this.b | 0) + ")"
        },
        offsetHSL: function (e, t, n) {
          var i = this.getHSL();
          return i.h += e, i.s += t, i.l += n, this.setHSL(i.h, i.s, i.l), this
        },
        add: function (e) {
          return this.r += e.r, this.g += e.g, this.b += e.b, this
        },
        addColors: function (e, t) {
          return this.r = e.r + t.r, this.g = e.g + t.g, this.b = e.b + t.b, this
        },
        addScalar: function (e) {
          return this.r += e, this.g += e, this.b += e, this
        },
        multiply: function (e) {
          return this.r *= e.r, this.g *= e.g, this.b *= e.b, this
        },
        multiplyScalar: function (e) {
          return this.r *= e, this.g *= e, this.b *= e, this
        },
        lerp: function (e, t) {
          return this.r += (e.r - this.r) * t, this.g += (e.g - this.g) * t, this.b += (e.b - this.b) * t, this
        },
        equals: function (e) {
          return e.r === this.r && e.g === this.g && e.b === this.b
        },
        fromArray: function (e) {
          return this.r = e[0], this.g = e[1], this.b = e[2], this
        },
        toArray: function (e, t) {
          return void 0 === e && (e = []), void 0 === t && (t = 0), e[t] = this.r, e[t + 1] = this.g, e[t + 2] = this.b, e
        },
        clone: function () {
          return (new X.Color).setRGB(this.r, this.g, this.b)
        }
      }, X.ColorKeywords = {
        aliceblue: 15792383,
        antiquewhite: 16444375,
        aqua: 65535,
        aquamarine: 8388564,
        azure: 15794175,
        beige: 16119260,
        bisque: 16770244,
        black: 0,
        blanchedalmond: 16772045,
        blue: 255,
        blueviolet: 9055202,
        brown: 10824234,
        burlywood: 14596231,
        cadetblue: 6266528,
        chartreuse: 8388352,
        chocolate: 13789470,
        coral: 16744272,
        cornflowerblue: 6591981,
        cornsilk: 16775388,
        crimson: 14423100,
        cyan: 65535,
        darkblue: 139,
        darkcyan: 35723,
        darkgoldenrod: 12092939,
        darkgray: 11119017,
        darkgreen: 25600,
        darkgrey: 11119017,
        darkkhaki: 12433259,
        darkmagenta: 9109643,
        darkolivegreen: 5597999,
        darkorange: 16747520,
        darkorchid: 10040012,
        darkred: 9109504,
        darksalmon: 15308410,
        darkseagreen: 9419919,
        darkslateblue: 4734347,
        darkslategray: 3100495,
        darkslategrey: 3100495,
        darkturquoise: 52945,
        darkviolet: 9699539,
        deeppink: 16716947,
        deepskyblue: 49151,
        dimgray: 6908265,
        dimgrey: 6908265,
        dodgerblue: 2003199,
        firebrick: 11674146,
        floralwhite: 16775920,
        forestgreen: 2263842,
        fuchsia: 16711935,
        gainsboro: 14474460,
        ghostwhite: 16316671,
        gold: 16766720,
        goldenrod: 14329120,
        gray: 8421504,
        green: 32768,
        greenyellow: 11403055,
        grey: 8421504,
        honeydew: 15794160,
        hotpink: 16738740,
        indianred: 13458524,
        indigo: 4915330,
        ivory: 16777200,
        khaki: 15787660,
        lavender: 15132410,
        lavenderblush: 16773365,
        lawngreen: 8190976,
        lemonchiffon: 16775885,
        lightblue: 11393254,
        lightcoral: 15761536,
        lightcyan: 14745599,
        lightgoldenrodyellow: 16448210,
        lightgray: 13882323,
        lightgreen: 9498256,
        lightgrey: 13882323,
        lightpink: 16758465,
        lightsalmon: 16752762,
        lightseagreen: 2142890,
        lightskyblue: 8900346,
        lightslategray: 7833753,
        lightslategrey: 7833753,
        lightsteelblue: 11584734,
        lightyellow: 16777184,
        lime: 65280,
        limegreen: 3329330,
        linen: 16445670,
        magenta: 16711935,
        maroon: 8388608,
        mediumaquamarine: 6737322,
        mediumblue: 205,
        mediumorchid: 12211667,
        mediumpurple: 9662683,
        mediumseagreen: 3978097,
        mediumslateblue: 8087790,
        mediumspringgreen: 64154,
        mediumturquoise: 4772300,
        mediumvioletred: 13047173,
        midnightblue: 1644912,
        mintcream: 16121850,
        mistyrose: 16770273,
        moccasin: 16770229,
        navajowhite: 16768685,
        navy: 128,
        oldlace: 16643558,
        olive: 8421376,
        olivedrab: 7048739,
        orange: 16753920,
        orangered: 16729344,
        orchid: 14315734,
        palegoldenrod: 15657130,
        palegreen: 10025880,
        paleturquoise: 11529966,
        palevioletred: 14381203,
        papayawhip: 16773077,
        peachpuff: 16767673,
        peru: 13468991,
        pink: 16761035,
        plum: 14524637,
        powderblue: 11591910,
        purple: 8388736,
        red: 16711680,
        rosybrown: 12357519,
        royalblue: 4286945,
        saddlebrown: 9127187,
        salmon: 16416882,
        sandybrown: 16032864,
        seagreen: 3050327,
        seashell: 16774638,
        sienna: 10506797,
        silver: 12632256,
        skyblue: 8900331,
        slateblue: 6970061,
        slategray: 7372944,
        slategrey: 7372944,
        snow: 16775930,
        springgreen: 65407,
        steelblue: 4620980,
        tan: 13808780,
        teal: 32896,
        thistle: 14204888,
        tomato: 16737095,
        turquoise: 4251856,
        violet: 15631086,
        wheat: 16113331,
        white: 16777215,
        whitesmoke: 16119285,
        yellow: 16776960,
        yellowgreen: 10145074
      }, X.Quaternion = function (e, t, n, i) {
        this._x = e || 0, this._y = t || 0, this._z = n || 0, this._w = void 0 !== i ? i : 1
      }, X.Quaternion.prototype = {
        constructor: X.Quaternion,
        _x: 0,
        _y: 0,
        _z: 0,
        _w: 0,
        get x() {
          return this._x
        },
        set x(e) {
          this._x = e, this.onChangeCallback()
        },
        get y() {
          return this._y
        },
        set y(e) {
          this._y = e, this.onChangeCallback()
        },
        get z() {
          return this._z
        },
        set z(e) {
          this._z = e, this.onChangeCallback()
        },
        get w() {
          return this._w
        },
        set w(e) {
          this._w = e, this.onChangeCallback()
        },
        set: function (e, t, n, i) {
          return this._x = e, this._y = t, this._z = n, this._w = i, this.onChangeCallback(), this
        },
        copy: function (e) {
          return this._x = e.x, this._y = e.y, this._z = e.z, this._w = e.w, this.onChangeCallback(), this
        },
        setFromEuler: function (e, t) {
          if (e instanceof X.Euler == !1) throw new Error("THREE.Quaternion: .setFromEuler() now expects a Euler rotation rather than a Vector3 and order.");
          var n = Math.cos(e._x / 2),
            i = Math.cos(e._y / 2),
            r = Math.cos(e._z / 2),
            o = Math.sin(e._x / 2),
            a = Math.sin(e._y / 2),
            s = Math.sin(e._z / 2);
          return "XYZ" === e.order ? (this._x = o * i * r + n * a * s, this._y = n * a * r - o * i * s, this._z = n * i * s + o * a * r, this._w = n * i * r - o * a * s) : "YXZ" === e.order ? (this._x = o * i * r + n * a * s, this._y = n * a * r - o * i * s, this._z = n * i * s - o * a * r, this._w = n * i * r + o * a * s) : "ZXY" === e.order ? (this._x = o * i * r - n * a * s, this._y = n * a * r + o * i * s, this._z = n * i * s + o * a * r, this._w = n * i * r - o * a * s) : "ZYX" === e.order ? (this._x = o * i * r - n * a * s, this._y = n * a * r + o * i * s, this._z = n * i * s - o * a * r, this._w = n * i * r + o * a * s) : "YZX" === e.order ? (this._x = o * i * r + n * a * s, this._y = n * a * r + o * i * s, this._z = n * i * s - o * a * r, this._w = n * i * r - o * a * s) : "XZY" === e.order && (this._x = o * i * r - n * a * s, this._y = n * a * r - o * i * s, this._z = n * i * s + o * a * r, this._w = n * i * r + o * a * s), !1 !== t && this.onChangeCallback(), this
        },
        setFromAxisAngle: function (e, t) {
          var n = t / 2,
            i = Math.sin(n);
          return this._x = e.x * i, this._y = e.y * i, this._z = e.z * i, this._w = Math.cos(n), this.onChangeCallback(), this
        },
        setFromRotationMatrix: function (e) {
          var t, n = e.elements,
            i = n[0],
            r = n[4],
            o = n[8],
            a = n[1],
            s = n[5],
            l = n[9],
            c = n[2],
            u = n[6],
            h = n[10],
            d = i + s + h;
          return d > 0 ? (t = .5 / Math.sqrt(d + 1), this._w = .25 / t, this._x = (u - l) * t, this._y = (o - c) * t, this._z = (a - r) * t) : i > s && i > h ? (t = 2 * Math.sqrt(1 + i - s - h), this._w = (u - l) / t, this._x = .25 * t, this._y = (r + a) / t, this._z = (o + c) / t) : s > h ? (t = 2 * Math.sqrt(1 + s - i - h), this._w = (o - c) / t, this._x = (r + a) / t, this._y = .25 * t, this._z = (l + u) / t) : (t = 2 * Math.sqrt(1 + h - i - s), this._w = (a - r) / t, this._x = (o + c) / t, this._y = (l + u) / t, this._z = .25 * t), this.onChangeCallback(), this
        },
        setFromUnitVectors: function (e, t) {
          return void 0 === n && (n = new X.Vector3), (i = e.dot(t) + 1) < 1e-6 ? (i = 0, Math.abs(e.x) > Math.abs(e.z) ? n.set(-e.y, e.x, 0) : n.set(0, -e.z, e.y)) : n.crossVectors(e, t), this._x = n.x, this._y = n.y, this._z = n.z, this._w = i, this.normalize(), this
        },
        inverse: function () {
          return this.conjugate().normalize(), this
        },
        conjugate: function () {
          return this._x *= -1, this._y *= -1, this._z *= -1, this.onChangeCallback(), this
        },
        dot: function (e) {
          return this._x * e._x + this._y * e._y + this._z * e._z + this._w * e._w
        },
        lengthSq: function () {
          return this._x * this._x + this._y * this._y + this._z * this._z + this._w * this._w
        },
        length: function () {
          return Math.sqrt(this._x * this._x + this._y * this._y + this._z * this._z + this._w * this._w)
        },
        normalize: function () {
          var e = this.length();
          return 0 === e ? (this._x = 0, this._y = 0, this._z = 0, this._w = 1) : (e = 1 / e, this._x = this._x * e, this._y = this._y * e, this._z = this._z * e, this._w = this._w * e), this.onChangeCallback(), this
        },
        multiply: function (e, t) {
          return void 0 !== t ? (X.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."), this.multiplyQuaternions(e, t)) : this.multiplyQuaternions(this, e)
        },
        multiplyQuaternions: function (e, t) {
          var n = e._x,
            i = e._y,
            r = e._z,
            o = e._w,
            a = t._x,
            s = t._y,
            l = t._z,
            c = t._w;
          return this._x = n * c + o * a + i * l - r * s, this._y = i * c + o * s + r * a - n * l, this._z = r * c + o * l + n * s - i * a, this._w = o * c - n * a - i * s - r * l, this.onChangeCallback(), this
        },
        multiplyVector3: function (e) {
          return X.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."), e.applyQuaternion(this)
        },
        slerp: function (e, t) {
          if (0 === t) return this;
          if (1 === t) return this.copy(e);
          var n = this._x,
            i = this._y,
            r = this._z,
            o = this._w,
            a = o * e._w + n * e._x + i * e._y + r * e._z;
          if (a < 0 ? (this._w = -e._w, this._x = -e._x, this._y = -e._y, this._z = -e._z, a = -a) : this.copy(e), a >= 1) return this._w = o, this._x = n, this._y = i, this._z = r, this;
          var s = Math.acos(a),
            l = Math.sqrt(1 - a * a);
          if (Math.abs(l) < .001) return this._w = .5 * (o + this._w), this._x = .5 * (n + this._x), this._y = .5 * (i + this._y), this._z = .5 * (r + this._z), this;
          var c = Math.sin((1 - t) * s) / l,
            u = Math.sin(t * s) / l;
          return this._w = o * c + this._w * u, this._x = n * c + this._x * u, this._y = i * c + this._y * u, this._z = r * c + this._z * u, this.onChangeCallback(), this
        },
        equals: function (e) {
          return e._x === this._x && e._y === this._y && e._z === this._z && e._w === this._w
        },
        fromArray: function (e, t) {
          return void 0 === t && (t = 0), this._x = e[t], this._y = e[t + 1], this._z = e[t + 2], this._w = e[t + 3], this.onChangeCallback(), this
        },
        toArray: function (e, t) {
          return void 0 === e && (e = []), void 0 === t && (t = 0), e[t] = this._x, e[t + 1] = this._y, e[t + 2] = this._z, e[t + 3] = this._w, e
        },
        onChange: function (e) {
          return this.onChangeCallback = e, this
        },
        onChangeCallback: function () {},
        clone: function () {
          return new X.Quaternion(this._x, this._y, this._z, this._w)
        }
      }, X.Quaternion.slerp = function (e, t, n, i) {
        return n.copy(e).slerp(t, i)
      }, X.Vector2 = function (e, t) {
        this.x = e || 0, this.y = t || 0
      }, X.Vector2.prototype = {
        constructor: X.Vector2,
        set: function (e, t) {
          return this.x = e, this.y = t, this
        },
        setX: function (e) {
          return this.x = e, this
        },
        setY: function (e) {
          return this.y = e, this
        },
        setComponent: function (e, t) {
          switch (e) {
            case 0:
              this.x = t;
              break;
            case 1:
              this.y = t;
              break;
            default:
              throw new Error("index is out of range: " + e)
          }
        },
        getComponent: function (e) {
          switch (e) {
            case 0:
              return this.x;
            case 1:
              return this.y;
            default:
              throw new Error("index is out of range: " + e)
          }
        },
        copy: function (e) {
          return this.x = e.x, this.y = e.y, this
        },
        add: function (e, t) {
          return void 0 !== t ? (X.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."), this.addVectors(e, t)) : (this.x += e.x, this.y += e.y, this)
        },
        addScalar: function (e) {
          return this.x += e, this.y += e, this
        },
        addVectors: function (e, t) {
          return this.x = e.x + t.x, this.y = e.y + t.y, this
        },
        sub: function (e, t) {
          return void 0 !== t ? (X.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."), this.subVectors(e, t)) : (this.x -= e.x, this.y -= e.y, this)
        },
        subScalar: function (e) {
          return this.x -= e, this.y -= e, this
        },
        subVectors: function (e, t) {
          return this.x = e.x - t.x, this.y = e.y - t.y, this
        },
        multiply: function (e) {
          return this.x *= e.x, this.y *= e.y, this
        },
        multiplyScalar: function (e) {
          return this.x *= e, this.y *= e, this
        },
        divide: function (e) {
          return this.x /= e.x, this.y /= e.y, this
        },
        divideScalar: function (e) {
          if (0 !== e) {
            var t = 1 / e;
            this.x *= t, this.y *= t
          } else this.x = 0, this.y = 0;
          return this
        },
        min: function (e) {
          return this.x > e.x && (this.x = e.x), this.y > e.y && (this.y = e.y), this
        },
        max: function (e) {
          return this.x < e.x && (this.x = e.x), this.y < e.y && (this.y = e.y), this
        },
        clamp: function (e, t) {
          return this.x < e.x ? this.x = e.x : this.x > t.x && (this.x = t.x), this.y < e.y ? this.y = e.y : this.y > t.y && (this.y = t.y), this
        },
        clampScalar: function (e, t) {
          return void 0 === r && (r = new X.Vector2, o = new X.Vector2), r.set(e, e), o.set(t, t), this.clamp(r, o)
        },
        floor: function () {
          return this.x = Math.floor(this.x), this.y = Math.floor(this.y), this
        },
        ceil: function () {
          return this.x = Math.ceil(this.x), this.y = Math.ceil(this.y), this
        },
        round: function () {
          return this.x = Math.round(this.x), this.y = Math.round(this.y), this
        },
        roundToZero: function () {
          return this.x = this.x < 0 ? Math.ceil(this.x) : Math.floor(this.x), this.y = this.y < 0 ? Math.ceil(this.y) : Math.floor(this.y), this
        },
        negate: function () {
          return this.x = -this.x, this.y = -this.y, this
        },
        dot: function (e) {
          return this.x * e.x + this.y * e.y
        },
        lengthSq: function () {
          return this.x * this.x + this.y * this.y
        },
        length: function () {
          return Math.sqrt(this.x * this.x + this.y * this.y)
        },
        normalize: function () {
          return this.divideScalar(this.length())
        },
        distanceTo: function (e) {
          return Math.sqrt(this.distanceToSquared(e))
        },
        distanceToSquared: function (e) {
          var t = this.x - e.x,
            n = this.y - e.y;
          return t * t + n * n
        },
        setLength: function (e) {
          var t = this.length();
          return 0 !== t && e !== t && this.multiplyScalar(e / t), this
        },
        lerp: function (e, t) {
          return this.x += (e.x - this.x) * t, this.y += (e.y - this.y) * t, this
        },
        lerpVectors: function (e, t, n) {
          return this.subVectors(t, e).multiplyScalar(n).add(e), this
        },
        equals: function (e) {
          return e.x === this.x && e.y === this.y
        },
        fromArray: function (e, t) {
          return void 0 === t && (t = 0), this.x = e[t], this.y = e[t + 1], this
        },
        toArray: function (e, t) {
          return void 0 === e && (e = []), void 0 === t && (t = 0), e[t] = this.x, e[t + 1] = this.y, e
        },
        fromAttribute: function (e, t, n) {
          return void 0 === n && (n = 0), t = t * e.itemSize + n, this.x = e.array[t], this.y = e.array[t + 1], this
        },
        clone: function () {
          return new X.Vector2(this.x, this.y)
        }
      }, X.Vector3 = function (e, t, n) {
        this.x = e || 0, this.y = t || 0, this.z = n || 0
      }, X.Vector3.prototype = {
        constructor: X.Vector3,
        set: function (e, t, n) {
          return this.x = e, this.y = t, this.z = n, this
        },
        setX: function (e) {
          return this.x = e, this
        },
        setY: function (e) {
          return this.y = e, this
        },
        setZ: function (e) {
          return this.z = e, this
        },
        setComponent: function (e, t) {
          switch (e) {
            case 0:
              this.x = t;
              break;
            case 1:
              this.y = t;
              break;
            case 2:
              this.z = t;
              break;
            default:
              throw new Error("index is out of range: " + e)
          }
        },
        getComponent: function (e) {
          switch (e) {
            case 0:
              return this.x;
            case 1:
              return this.y;
            case 2:
              return this.z;
            default:
              throw new Error("index is out of range: " + e)
          }
        },
        copy: function (e) {
          return this.x = e.x, this.y = e.y, this.z = e.z, this
        },
        add: function (e, t) {
          return void 0 !== t ? (X.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."), this.addVectors(e, t)) : (this.x += e.x, this.y += e.y, this.z += e.z, this)
        },
        addScalar: function (e) {
          return this.x += e, this.y += e, this.z += e, this
        },
        addVectors: function (e, t) {
          return this.x = e.x + t.x, this.y = e.y + t.y, this.z = e.z + t.z, this
        },
        sub: function (e, t) {
          return void 0 !== t ? (X.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."), this.subVectors(e, t)) : (this.x -= e.x, this.y -= e.y, this.z -= e.z, this)
        },
        subScalar: function (e) {
          return this.x -= e, this.y -= e, this.z -= e, this
        },
        subVectors: function (e, t) {
          return this.x = e.x - t.x, this.y = e.y - t.y, this.z = e.z - t.z, this
        },
        multiply: function (e, t) {
          return void 0 !== t ? (X.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."), this.multiplyVectors(e, t)) : (this.x *= e.x, this.y *= e.y, this.z *= e.z, this)
        },
        multiplyScalar: function (e) {
          return this.x *= e, this.y *= e, this.z *= e, this
        },
        multiplyVectors: function (e, t) {
          return this.x = e.x * t.x, this.y = e.y * t.y, this.z = e.z * t.z, this
        },
        applyEuler: function (e) {
          return e instanceof X.Euler == 0 && X.error("THREE.Vector3: .applyEuler() now expects a Euler rotation rather than a Vector3 and order."), void 0 === s && (s = new X.Quaternion), this.applyQuaternion(s.setFromEuler(e)), this
        },
        applyAxisAngle: function () {
          var e;
          return function (t, n) {
            return void 0 === e && (e = new X.Quaternion), this.applyQuaternion(e.setFromAxisAngle(t, n)), this
          }
        }(),
        applyMatrix3: function (e) {
          var t = this.x,
            n = this.y,
            i = this.z,
            r = e.elements;
          return this.x = r[0] * t + r[3] * n + r[6] * i, this.y = r[1] * t + r[4] * n + r[7] * i, this.z = r[2] * t + r[5] * n + r[8] * i, this
        },
        applyMatrix4: function (e) {
          var t = this.x,
            n = this.y,
            i = this.z,
            r = e.elements;
          return this.x = r[0] * t + r[4] * n + r[8] * i + r[12], this.y = r[1] * t + r[5] * n + r[9] * i + r[13], this.z = r[2] * t + r[6] * n + r[10] * i + r[14], this
        },
        applyProjection: function (e) {
          var t = this.x,
            n = this.y,
            i = this.z,
            r = e.elements,
            o = 1 / (r[3] * t + r[7] * n + r[11] * i + r[15]);
          return this.x = (r[0] * t + r[4] * n + r[8] * i + r[12]) * o, this.y = (r[1] * t + r[5] * n + r[9] * i + r[13]) * o, this.z = (r[2] * t + r[6] * n + r[10] * i + r[14]) * o, this
        },
        applyQuaternion: function (e) {
          var t = this.x,
            n = this.y,
            i = this.z,
            r = e.x,
            o = e.y,
            a = e.z,
            s = e.w,
            l = s * t + o * i - a * n,
            c = s * n + a * t - r * i,
            u = s * i + r * n - o * t,
            h = -r * t - o * n - a * i;
          return this.x = l * s + h * -r + c * -a - u * -o, this.y = c * s + h * -o + u * -r - l * -a, this.z = u * s + h * -a + l * -o - c * -r, this
        },
        project: function (e) {
          return void 0 === a && (a = new X.Matrix4), a.multiplyMatrices(e.projectionMatrix, a.getInverse(e.matrixWorld)), this.applyProjection(a)
        },
        unproject: function () {
          var e;
          return function (t) {
            return void 0 === e && (e = new X.Matrix4), e.multiplyMatrices(t.matrixWorld, e.getInverse(t.projectionMatrix)), this.applyProjection(e)
          }
        }(),
        transformDirection: function (e) {
          var t = this.x,
            n = this.y,
            i = this.z,
            r = e.elements;
          return this.x = r[0] * t + r[4] * n + r[8] * i, this.y = r[1] * t + r[5] * n + r[9] * i, this.z = r[2] * t + r[6] * n + r[10] * i, this.normalize(), this
        },
        divide: function (e) {
          return this.x /= e.x, this.y /= e.y, this.z /= e.z, this
        },
        divideScalar: function (e) {
          if (0 !== e) {
            var t = 1 / e;
            this.x *= t, this.y *= t, this.z *= t
          } else this.x = 0, this.y = 0, this.z = 0;
          return this
        },
        min: function (e) {
          return this.x > e.x && (this.x = e.x), this.y > e.y && (this.y = e.y), this.z > e.z && (this.z = e.z), this
        },
        max: function (e) {
          return this.x < e.x && (this.x = e.x), this.y < e.y && (this.y = e.y), this.z < e.z && (this.z = e.z), this
        },
        clamp: function (e, t) {
          return this.x < e.x ? this.x = e.x : this.x > t.x && (this.x = t.x), this.y < e.y ? this.y = e.y : this.y > t.y && (this.y = t.y), this.z < e.z ? this.z = e.z : this.z > t.z && (this.z = t.z), this
        },
        clampScalar: function () {
          var e, t;
          return function (n, i) {
            return void 0 === e && (e = new X.Vector3, t = new X.Vector3), e.set(n, n, n), t.set(i, i, i), this.clamp(e, t)
          }
        }(),
        floor: function () {
          return this.x = Math.floor(this.x), this.y = Math.floor(this.y), this.z = Math.floor(this.z), this
        },
        ceil: function () {
          return this.x = Math.ceil(this.x), this.y = Math.ceil(this.y), this.z = Math.ceil(this.z), this
        },
        round: function () {
          return this.x = Math.round(this.x), this.y = Math.round(this.y), this.z = Math.round(this.z), this
        },
        roundToZero: function () {
          return this.x = this.x < 0 ? Math.ceil(this.x) : Math.floor(this.x), this.y = this.y < 0 ? Math.ceil(this.y) : Math.floor(this.y), this.z = this.z < 0 ? Math.ceil(this.z) : Math.floor(this.z), this
        },
        negate: function () {
          return this.x = -this.x, this.y = -this.y, this.z = -this.z, this
        },
        dot: function (e) {
          return this.x * e.x + this.y * e.y + this.z * e.z
        },
        lengthSq: function () {
          return this.x * this.x + this.y * this.y + this.z * this.z
        },
        length: function () {
          return Math.sqrt(this.x * this.x + this.y * this.y + this.z * this.z)
        },
        lengthManhattan: function () {
          return Math.abs(this.x) + Math.abs(this.y) + Math.abs(this.z)
        },
        normalize: function () {
          return this.divideScalar(this.length())
        },
        setLength: function (e) {
          var t = this.length();
          return 0 !== t && e !== t && this.multiplyScalar(e / t), this
        },
        lerp: function (e, t) {
          return this.x += (e.x - this.x) * t, this.y += (e.y - this.y) * t, this.z += (e.z - this.z) * t, this
        },
        lerpVectors: function (e, t, n) {
          return this.subVectors(t, e).multiplyScalar(n).add(e), this
        },
        cross: function (e, t) {
          if (void 0 !== t) return X.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."), this.crossVectors(e, t);
          var n = this.x,
            i = this.y,
            r = this.z;
          return this.x = i * e.z - r * e.y, this.y = r * e.x - n * e.z, this.z = n * e.y - i * e.x, this
        },
        crossVectors: function (e, t) {
          var n = e.x,
            i = e.y,
            r = e.z,
            o = t.x,
            a = t.y,
            s = t.z;
          return this.x = i * s - r * a, this.y = r * o - n * s, this.z = n * a - i * o, this
        },
        projectOnVector: function () {
          var e, t;
          return function (n) {
            return void 0 === e && (e = new X.Vector3), e.copy(n).normalize(), t = this.dot(e), this.copy(e).multiplyScalar(t)
          }
        }(),
        projectOnPlane: function () {
          var e;
          return function (t) {
            return void 0 === e && (e = new X.Vector3), e.copy(this).projectOnVector(t), this.sub(e)
          }
        }(),
        reflect: function () {
          var e;
          return function (t) {
            return void 0 === e && (e = new X.Vector3), this.sub(e.copy(t).multiplyScalar(2 * this.dot(t)))
          }
        }(),
        angleTo: function (e) {
          var t = this.dot(e) / (this.length() * e.length());
          return Math.acos(X.Math.clamp(t, -1, 1))
        },
        distanceTo: function (e) {
          return Math.sqrt(this.distanceToSquared(e))
        },
        distanceToSquared: function (e) {
          var t = this.x - e.x,
            n = this.y - e.y,
            i = this.z - e.z;
          return t * t + n * n + i * i
        },
        setEulerFromRotationMatrix: function (e, t) {
          X.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")
        },
        setEulerFromQuaternion: function (e, t) {
          X.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")
        },
        getPositionFromMatrix: function (e) {
          return X.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."), this.setFromMatrixPosition(e)
        },
        getScaleFromMatrix: function (e) {
          return X.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."), this.setFromMatrixScale(e)
        },
        getColumnFromMatrix: function (e, t) {
          return X.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."), this.setFromMatrixColumn(e, t)
        },
        setFromMatrixPosition: function (e) {
          return this.x = e.elements[12], this.y = e.elements[13], this.z = e.elements[14], this
        },
        setFromMatrixScale: function (e) {
          var t = this.set(e.elements[0], e.elements[1], e.elements[2]).length(),
            n = this.set(e.elements[4], e.elements[5], e.elements[6]).length(),
            i = this.set(e.elements[8], e.elements[9], e.elements[10]).length();
          return this.x = t, this.y = n, this.z = i, this
        },
        setFromMatrixColumn: function (e, t) {
          var n = 4 * e,
            i = t.elements;
          return this.x = i[n], this.y = i[n + 1], this.z = i[n + 2], this
        },
        equals: function (e) {
          return e.x === this.x && e.y === this.y && e.z === this.z
        },
        fromArray: function (e, t) {
          return void 0 === t && (t = 0), this.x = e[t], this.y = e[t + 1], this.z = e[t + 2], this
        },
        toArray: function (e, t) {
          return void 0 === e && (e = []), void 0 === t && (t = 0), e[t] = this.x, e[t + 1] = this.y, e[t + 2] = this.z, e
        },
        fromAttribute: function (e, t, n) {
          return void 0 === n && (n = 0), t = t * e.itemSize + n, this.x = e.array[t], this.y = e.array[t + 1], this.z = e.array[t + 2], this
        },
        clone: function () {
          return new X.Vector3(this.x, this.y, this.z)
        }
      }, X.Vector4 = function (e, t, n, i) {
        this.x = e || 0, this.y = t || 0, this.z = n || 0, this.w = void 0 !== i ? i : 1
      }, X.Vector4.prototype = {
        constructor: X.Vector4,
        set: function (e, t, n, i) {
          return this.x = e, this.y = t, this.z = n, this.w = i, this
        },
        setX: function (e) {
          return this.x = e, this
        },
        setY: function (e) {
          return this.y = e, this
        },
        setZ: function (e) {
          return this.z = e, this
        },
        setW: function (e) {
          return this.w = e, this
        },
        setComponent: function (e, t) {
          switch (e) {
            case 0:
              this.x = t;
              break;
            case 1:
              this.y = t;
              break;
            case 2:
              this.z = t;
              break;
            case 3:
              this.w = t;
              break;
            default:
              throw new Error("index is out of range: " + e)
          }
        },
        getComponent: function (e) {
          switch (e) {
            case 0:
              return this.x;
            case 1:
              return this.y;
            case 2:
              return this.z;
            case 3:
              return this.w;
            default:
              throw new Error("index is out of range: " + e)
          }
        },
        copy: function (e) {
          return this.x = e.x, this.y = e.y, this.z = e.z, this.w = void 0 !== e.w ? e.w : 1, this
        },
        add: function (e, t) {
          return void 0 !== t ? (X.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."), this.addVectors(e, t)) : (this.x += e.x, this.y += e.y, this.z += e.z, this.w += e.w, this)
        },
        addScalar: function (e) {
          return this.x += e, this.y += e, this.z += e, this.w += e, this
        },
        addVectors: function (e, t) {
          return this.x = e.x + t.x, this.y = e.y + t.y, this.z = e.z + t.z, this.w = e.w + t.w, this
        },
        sub: function (e, t) {
          return void 0 !== t ? (X.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."), this.subVectors(e, t)) : (this.x -= e.x, this.y -= e.y, this.z -= e.z, this.w -= e.w, this)
        },
        subScalar: function (e) {
          return this.x -= e, this.y -= e, this.z -= e, this.w -= e, this
        },
        subVectors: function (e, t) {
          return this.x = e.x - t.x, this.y = e.y - t.y, this.z = e.z - t.z, this.w = e.w - t.w, this
        },
        multiplyScalar: function (e) {
          return this.x *= e, this.y *= e, this.z *= e, this.w *= e, this
        },
        applyMatrix4: function (e) {
          var t = this.x,
            n = this.y,
            i = this.z,
            r = this.w,
            o = e.elements;
          return this.x = o[0] * t + o[4] * n + o[8] * i + o[12] * r, this.y = o[1] * t + o[5] * n + o[9] * i + o[13] * r, this.z = o[2] * t + o[6] * n + o[10] * i + o[14] * r, this.w = o[3] * t + o[7] * n + o[11] * i + o[15] * r, this
        },
        divideScalar: function (e) {
          if (0 !== e) {
            var t = 1 / e;
            this.x *= t, this.y *= t, this.z *= t, this.w *= t
          } else this.x = 0, this.y = 0, this.z = 0, this.w = 1;
          return this
        },
        setAxisAngleFromQuaternion: function (e) {
          this.w = 2 * Math.acos(e.w);
          var t = Math.sqrt(1 - e.w * e.w);
          return t < 1e-4 ? (this.x = 1, this.y = 0, this.z = 0) : (this.x = e.x / t, this.y = e.y / t, this.z = e.z / t), this
        },
        setAxisAngleFromRotationMatrix: function (e) {
          var t, n, i, r, o = e.elements,
            a = o[0],
            s = o[4],
            l = o[8],
            c = o[1],
            u = o[5],
            h = o[9],
            d = o[2],
            f = o[6],
            p = o[10];
          if (Math.abs(s - c) < .01 && Math.abs(l - d) < .01 && Math.abs(h - f) < .01) {
            if (Math.abs(s + c) < .1 && Math.abs(l + d) < .1 && Math.abs(h + f) < .1 && Math.abs(a + u + p - 3) < .1) return this.set(1, 0, 0, 0), this;
            t = Math.PI;
            var m = (a + 1) / 2,
              g = (u + 1) / 2,
              v = (p + 1) / 2,
              y = (s + c) / 4,
              b = (l + d) / 4,
              _ = (h + f) / 4;
            return m > g && m > v ? m < .01 ? (n = 0, i = .707106781, r = .707106781) : (i = y / (n = Math.sqrt(m)), r = b / n) : g > v ? g < .01 ? (n = .707106781, i = 0, r = .707106781) : (n = y / (i = Math.sqrt(g)), r = _ / i) : v < .01 ? (n = .707106781, i = .707106781, r = 0) : (n = b / (r = Math.sqrt(v)), i = _ / r), this.set(n, i, r, t), this
          }
          var x = Math.sqrt((f - h) * (f - h) + (l - d) * (l - d) + (c - s) * (c - s));
          return Math.abs(x) < .001 && (x = 1), this.x = (f - h) / x, this.y = (l - d) / x, this.z = (c - s) / x, this.w = Math.acos((a + u + p - 1) / 2), this
        },
        min: function (e) {
          return this.x > e.x && (this.x = e.x), this.y > e.y && (this.y = e.y), this.z > e.z && (this.z = e.z), this.w > e.w && (this.w = e.w), this
        },
        max: function (e) {
          return this.x < e.x && (this.x = e.x), this.y < e.y && (this.y = e.y), this.z < e.z && (this.z = e.z), this.w < e.w && (this.w = e.w), this
        },
        clamp: function (e, t) {
          return this.x < e.x ? this.x = e.x : this.x > t.x && (this.x = t.x), this.y < e.y ? this.y = e.y : this.y > t.y && (this.y = t.y), this.z < e.z ? this.z = e.z : this.z > t.z && (this.z = t.z), this.w < e.w ? this.w = e.w : this.w > t.w && (this.w = t.w), this
        },
        clampScalar: function () {
          var e, t;
          return function (n, i) {
            return void 0 === e && (e = new X.Vector4, t = new X.Vector4), e.set(n, n, n, n), t.set(i, i, i, i), this.clamp(e, t)
          }
        }(),
        floor: function () {
          return this.x = Math.floor(this.x), this.y = Math.floor(this.y), this.z = Math.floor(this.z), this.w = Math.floor(this.w), this
        },
        ceil: function () {
          return this.x = Math.ceil(this.x), this.y = Math.ceil(this.y), this.z = Math.ceil(this.z), this.w = Math.ceil(this.w), this
        },
        round: function () {
          return this.x = Math.round(this.x), this.y = Math.round(this.y), this.z = Math.round(this.z), this.w = Math.round(this.w), this
        },
        roundToZero: function () {
          return this.x = this.x < 0 ? Math.ceil(this.x) : Math.floor(this.x), this.y = this.y < 0 ? Math.ceil(this.y) : Math.floor(this.y), this.z = this.z < 0 ? Math.ceil(this.z) : Math.floor(this.z), this.w = this.w < 0 ? Math.ceil(this.w) : Math.floor(this.w), this
        },
        negate: function () {
          return this.x = -this.x, this.y = -this.y, this.z = -this.z, this.w = -this.w, this
        },
        dot: function (e) {
          return this.x * e.x + this.y * e.y + this.z * e.z + this.w * e.w
        },
        lengthSq: function () {
          return this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w
        },
        length: function () {
          return Math.sqrt(this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w)
        },
        lengthManhattan: function () {
          return Math.abs(this.x) + Math.abs(this.y) + Math.abs(this.z) + Math.abs(this.w)
        },
        normalize: function () {
          return this.divideScalar(this.length())
        },
        setLength: function (e) {
          var t = this.length();
          return 0 !== t && e !== t && this.multiplyScalar(e / t), this
        },
        lerp: function (e, t) {
          return this.x += (e.x - this.x) * t, this.y += (e.y - this.y) * t, this.z += (e.z - this.z) * t, this.w += (e.w - this.w) * t, this
        },
        lerpVectors: function (e, t, n) {
          return this.subVectors(t, e).multiplyScalar(n).add(e), this
        },
        equals: function (e) {
          return e.x === this.x && e.y === this.y && e.z === this.z && e.w === this.w
        },
        fromArray: function (e, t) {
          return void 0 === t && (t = 0), this.x = e[t], this.y = e[t + 1], this.z = e[t + 2], this.w = e[t + 3], this
        },
        toArray: function (e, t) {
          return void 0 === e && (e = []), void 0 === t && (t = 0), e[t] = this.x, e[t + 1] = this.y, e[t + 2] = this.z, e[t + 3] = this.w, e
        },
        fromAttribute: function (e, t, n) {
          return void 0 === n && (n = 0), t = t * e.itemSize + n, this.x = e.array[t], this.y = e.array[t + 1], this.z = e.array[t + 2], this.w = e.array[t + 3], this
        },
        clone: function () {
          return new X.Vector4(this.x, this.y, this.z, this.w)
        }
      }, X.Euler = function (e, t, n, i) {
        this._x = e || 0, this._y = t || 0, this._z = n || 0, this._order = i || X.Euler.DefaultOrder
      }, X.Euler.RotationOrders = ["XYZ", "YZX", "ZXY", "XZY", "YXZ", "ZYX"], X.Euler.DefaultOrder = "XYZ", X.Euler.prototype = {
        constructor: X.Euler,
        _x: 0,
        _y: 0,
        _z: 0,
        _order: X.Euler.DefaultOrder,
        get x() {
          return this._x
        },
        set x(e) {
          this._x = e, this.onChangeCallback()
        },
        get y() {
          return this._y
        },
        set y(e) {
          this._y = e, this.onChangeCallback()
        },
        get z() {
          return this._z
        },
        set z(e) {
          this._z = e, this.onChangeCallback()
        },
        get order() {
          return this._order
        },
        set order(e) {
          this._order = e, this.onChangeCallback()
        },
        set: function (e, t, n, i) {
          return this._x = e, this._y = t, this._z = n, this._order = i || this._order, this.onChangeCallback(), this
        },
        copy: function (e) {
          return this._x = e._x, this._y = e._y, this._z = e._z, this._order = e._order, this.onChangeCallback(), this
        },
        setFromRotationMatrix: function (e, t, n) {
          var i = X.Math.clamp,
            r = e.elements,
            o = r[0],
            a = r[4],
            s = r[8],
            l = r[1],
            c = r[5],
            u = r[9],
            h = r[2],
            d = r[6],
            f = r[10];
          return "XYZ" === (t = t || this._order) ? (this._y = Math.asin(i(s, -1, 1)), Math.abs(s) < .99999 ? (this._x = Math.atan2(-u, f), this._z = Math.atan2(-a, o)) : (this._x = Math.atan2(d, c), this._z = 0)) : "YXZ" === t ? (this._x = Math.asin(-i(u, -1, 1)), Math.abs(u) < .99999 ? (this._y = Math.atan2(s, f), this._z = Math.atan2(l, c)) : (this._y = Math.atan2(-h, o), this._z = 0)) : "ZXY" === t ? (this._x = Math.asin(i(d, -1, 1)), Math.abs(d) < .99999 ? (this._y = Math.atan2(-h, f), this._z = Math.atan2(-a, c)) : (this._y = 0, this._z = Math.atan2(l, o))) : "ZYX" === t ? (this._y = Math.asin(-i(h, -1, 1)), Math.abs(h) < .99999 ? (this._x = Math.atan2(d, f), this._z = Math.atan2(l, o)) : (this._x = 0, this._z = Math.atan2(-a, c))) : "YZX" === t ? (this._z = Math.asin(i(l, -1, 1)), Math.abs(l) < .99999 ? (this._x = Math.atan2(-u, c), this._y = Math.atan2(-h, o)) : (this._x = 0, this._y = Math.atan2(s, f))) : "XZY" === t ? (this._z = Math.asin(-i(a, -1, 1)), Math.abs(a) < .99999 ? (this._x = Math.atan2(d, c), this._y = Math.atan2(s, o)) : (this._x = Math.atan2(-u, f), this._y = 0)) : X.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: " + t), this._order = t, !1 !== n && this.onChangeCallback(), this
        },
        setFromQuaternion: function () {
          var e;
          return function (t, n, i) {
            return void 0 === e && (e = new X.Matrix4), e.makeRotationFromQuaternion(t), this.setFromRotationMatrix(e, n, i), this
          }
        }(),
        setFromVector3: function (e, t) {
          return this.set(e.x, e.y, e.z, t || this._order)
        },
        reorder: (l = new X.Quaternion, function (e) {
          l.setFromEuler(this), this.setFromQuaternion(l, e)
        }),
        equals: function (e) {
          return e._x === this._x && e._y === this._y && e._z === this._z && e._order === this._order
        },
        fromArray: function (e) {
          return this._x = e[0], this._y = e[1], this._z = e[2], void 0 !== e[3] && (this._order = e[3]), this.onChangeCallback(), this
        },
        toArray: function (e, t) {
          return void 0 === e && (e = []), void 0 === t && (t = 0), e[t] = this._x, e[t + 1] = this._y, e[t + 2] = this._z, e[t + 3] = this._order, e
        },
        toVector3: function (e) {
          return e ? e.set(this._x, this._y, this._z) : new X.Vector3(this._x, this._y, this._z)
        },
        onChange: function (e) {
          return this.onChangeCallback = e, this
        },
        onChangeCallback: function () {},
        clone: function () {
          return new X.Euler(this._x, this._y, this._z, this._order)
        }
      }, X.Line3 = function (e, t) {
        this.start = void 0 !== e ? e : new X.Vector3, this.end = void 0 !== t ? t : new X.Vector3
      }, X.Line3.prototype = {
        constructor: X.Line3,
        set: function (e, t) {
          return this.start.copy(e), this.end.copy(t), this
        },
        copy: function (e) {
          return this.start.copy(e.start), this.end.copy(e.end), this
        },
        center: function (e) {
          return (e || new X.Vector3).addVectors(this.start, this.end).multiplyScalar(.5)
        },
        delta: function (e) {
          return (e || new X.Vector3).subVectors(this.end, this.start)
        },
        distanceSq: function () {
          return this.start.distanceToSquared(this.end)
        },
        distance: function () {
          return this.start.distanceTo(this.end)
        },
        at: function (e, t) {
          var n = t || new X.Vector3;
          return this.delta(n).multiplyScalar(e).add(this.start)
        },
        closestPointToPointParameter: (c = new X.Vector3, u = new X.Vector3, function (e, t) {
          c.subVectors(e, this.start), u.subVectors(this.end, this.start);
          var n = u.dot(u),
            i = u.dot(c) / n;
          return t && (i = X.Math.clamp(i, 0, 1)), i
        }),
        closestPointToPoint: function (e, t, n) {
          var i = this.closestPointToPointParameter(e, t),
            r = n || new X.Vector3;
          return this.delta(r).multiplyScalar(i).add(this.start)
        },
        applyMatrix4: function (e) {
          return this.start.applyMatrix4(e), this.end.applyMatrix4(e), this
        },
        equals: function (e) {
          return e.start.equals(this.start) && e.end.equals(this.end)
        },
        clone: function () {
          return (new X.Line3).copy(this)
        }
      }, X.Box2 = function (e, t) {
        this.min = void 0 !== e ? e : new X.Vector2(1 / 0, 1 / 0), this.max = void 0 !== t ? t : new X.Vector2(-1 / 0, -1 / 0)
      }, X.Box2.prototype = {
        constructor: X.Box2,
        set: function (e, t) {
          return this.min.copy(e), this.max.copy(t), this
        },
        setFromPoints: function (e) {
          this.makeEmpty();
          for (var t = 0, n = e.length; t < n; t++) this.expandByPoint(e[t]);
          return this
        },
        setFromCenterAndSize: function () {
          var e = new X.Vector2;
          return function (t, n) {
            var i = e.copy(n).multiplyScalar(.5);
            return this.min.copy(t).sub(i), this.max.copy(t).add(i), this
          }
        }(),
        copy: function (e) {
          return this.min.copy(e.min), this.max.copy(e.max), this
        },
        makeEmpty: function () {
          return this.min.x = this.min.y = 1 / 0, this.max.x = this.max.y = -1 / 0, this
        },
        empty: function () {
          return this.max.x < this.min.x || this.max.y < this.min.y
        },
        center: function (e) {
          return (e || new X.Vector2).addVectors(this.min, this.max).multiplyScalar(.5)
        },
        size: function (e) {
          return (e || new X.Vector2).subVectors(this.max, this.min)
        },
        expandByPoint: function (e) {
          return this.min.min(e), this.max.max(e), this
        },
        expandByVector: function (e) {
          return this.min.sub(e), this.max.add(e), this
        },
        expandByScalar: function (e) {
          return this.min.addScalar(-e), this.max.addScalar(e), this
        },
        containsPoint: function (e) {
          return !(e.x < this.min.x || e.x > this.max.x || e.y < this.min.y || e.y > this.max.y)
        },
        containsBox: function (e) {
          return this.min.x <= e.min.x && e.max.x <= this.max.x && this.min.y <= e.min.y && e.max.y <= this.max.y
        },
        getParameter: function (e, t) {
          return (t || new X.Vector2).set((e.x - this.min.x) / (this.max.x - this.min.x), (e.y - this.min.y) / (this.max.y - this.min.y))
        },
        isIntersectionBox: function (e) {
          return !(e.max.x < this.min.x || e.min.x > this.max.x || e.max.y < this.min.y || e.min.y > this.max.y)
        },
        clampPoint: function (e, t) {
          return (t || new X.Vector2).copy(e).clamp(this.min, this.max)
        },
        distanceToPoint: function () {
          var e = new X.Vector2;
          return function (t) {
            return e.copy(t).clamp(this.min, this.max).sub(t).length()
          }
        }(),
        intersect: function (e) {
          return this.min.max(e.min), this.max.min(e.max), this
        },
        union: function (e) {
          return this.min.min(e.min), this.max.max(e.max), this
        },
        translate: function (e) {
          return this.min.add(e), this.max.add(e), this
        },
        equals: function (e) {
          return e.min.equals(this.min) && e.max.equals(this.max)
        },
        clone: function () {
          return (new X.Box2).copy(this)
        }
      }, X.Box3 = function (e, t) {
        this.min = void 0 !== e ? e : new X.Vector3(1 / 0, 1 / 0, 1 / 0), this.max = void 0 !== t ? t : new X.Vector3(-1 / 0, -1 / 0, -1 / 0)
      }, X.Box3.prototype = {
        constructor: X.Box3,
        set: function (e, t) {
          return this.min.copy(e), this.max.copy(t), this
        },
        setFromPoints: function (e) {
          this.makeEmpty();
          for (var t = 0, n = e.length; t < n; t++) this.expandByPoint(e[t]);
          return this
        },
        setFromCenterAndSize: function () {
          var e = new X.Vector3;
          return function (t, n) {
            var i = e.copy(n).multiplyScalar(.5);
            return this.min.copy(t).sub(i), this.max.copy(t).add(i), this
          }
        }(),
        setFromObject: function () {
          var e = new X.Vector3;
          return function (t) {
            var n = this;
            return t.updateMatrixWorld(!0), this.makeEmpty(), t.traverse((function (t) {
              var i = t.geometry;
              if (void 0 !== i)
                if (i instanceof X.Geometry)
                  for (var r = i.vertices, o = 0, a = r.length; o < a; o++) e.copy(r[o]), e.applyMatrix4(t.matrixWorld), n.expandByPoint(e);
                else if (i instanceof X.BufferGeometry && void 0 !== i.attributes.position) {
                var s = i.attributes.position.array;
                for (o = 0, a = s.length; o < a; o += 3) e.set(s[o], s[o + 1], s[o + 2]), e.applyMatrix4(t.matrixWorld), n.expandByPoint(e)
              }
            })), this
          }
        }(),
        copy: function (e) {
          return this.min.copy(e.min), this.max.copy(e.max), this
        },
        makeEmpty: function () {
          return this.min.x = this.min.y = this.min.z = 1 / 0, this.max.x = this.max.y = this.max.z = -1 / 0, this
        },
        empty: function () {
          return this.max.x < this.min.x || this.max.y < this.min.y || this.max.z < this.min.z
        },
        center: function (e) {
          return (e || new X.Vector3).addVectors(this.min, this.max).multiplyScalar(.5)
        },
        size: function (e) {
          return (e || new X.Vector3).subVectors(this.max, this.min)
        },
        expandByPoint: function (e) {
          return this.min.min(e), this.max.max(e), this
        },
        expandByVector: function (e) {
          return this.min.sub(e), this.max.add(e), this
        },
        expandByScalar: function (e) {
          return this.min.addScalar(-e), this.max.addScalar(e), this
        },
        containsPoint: function (e) {
          return !(e.x < this.min.x || e.x > this.max.x || e.y < this.min.y || e.y > this.max.y || e.z < this.min.z || e.z > this.max.z)
        },
        containsBox: function (e) {
          return this.min.x <= e.min.x && e.max.x <= this.max.x && this.min.y <= e.min.y && e.max.y <= this.max.y && this.min.z <= e.min.z && e.max.z <= this.max.z
        },
        getParameter: function (e, t) {
          return (t || new X.Vector3).set((e.x - this.min.x) / (this.max.x - this.min.x), (e.y - this.min.y) / (this.max.y - this.min.y), (e.z - this.min.z) / (this.max.z - this.min.z))
        },
        isIntersectionBox: function (e) {
          return !(e.max.x < this.min.x || e.min.x > this.max.x || e.max.y < this.min.y || e.min.y > this.max.y || e.max.z < this.min.z || e.min.z > this.max.z)
        },
        clampPoint: function (e, t) {
          return (t || new X.Vector3).copy(e).clamp(this.min, this.max)
        },
        distanceToPoint: function () {
          var e = new X.Vector3;
          return function (t) {
            return e.copy(t).clamp(this.min, this.max).sub(t).length()
          }
        }(),
        getBoundingSphere: function () {
          var e = new X.Vector3;
          return function (t) {
            var n = t || new X.Sphere;
            return n.center = this.center(), n.radius = .5 * this.size(e).length(), n
          }
        }(),
        intersect: function (e) {
          return this.min.max(e.min), this.max.min(e.max), this
        },
        union: function (e) {
          return this.min.min(e.min), this.max.max(e.max), this
        },
        applyMatrix4: (h = [new X.Vector3, new X.Vector3, new X.Vector3, new X.Vector3, new X.Vector3, new X.Vector3, new X.Vector3, new X.Vector3], function (e) {
          return h[0].set(this.min.x, this.min.y, this.min.z).applyMatrix4(e), h[1].set(this.min.x, this.min.y, this.max.z).applyMatrix4(e), h[2].set(this.min.x, this.max.y, this.min.z).applyMatrix4(e), h[3].set(this.min.x, this.max.y, this.max.z).applyMatrix4(e), h[4].set(this.max.x, this.min.y, this.min.z).applyMatrix4(e), h[5].set(this.max.x, this.min.y, this.max.z).applyMatrix4(e), h[6].set(this.max.x, this.max.y, this.min.z).applyMatrix4(e), h[7].set(this.max.x, this.max.y, this.max.z).applyMatrix4(e), this.makeEmpty(), this.setFromPoints(h), this
        }),
        translate: function (e) {
          return this.min.add(e), this.max.add(e), this
        },
        equals: function (e) {
          return e.min.equals(this.min) && e.max.equals(this.max)
        },
        clone: function () {
          return (new X.Box3).copy(this)
        }
      }, X.Matrix3 = function () {
        this.elements = new Float32Array([1, 0, 0, 0, 1, 0, 0, 0, 1]), arguments.length > 0 && X.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")
      }, X.Matrix3.prototype = {
        constructor: X.Matrix3,
        set: function (e, t, n, i, r, o, a, s, l) {
          var c = this.elements;
          return c[0] = e, c[3] = t, c[6] = n, c[1] = i, c[4] = r, c[7] = o, c[2] = a, c[5] = s, c[8] = l, this
        },
        identity: function () {
          return this.set(1, 0, 0, 0, 1, 0, 0, 0, 1), this
        },
        copy: function (e) {
          var t = e.elements;
          return this.set(t[0], t[3], t[6], t[1], t[4], t[7], t[2], t[5], t[8]), this
        },
        multiplyVector3: function (e) {
          return X.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."), e.applyMatrix3(this)
        },
        multiplyVector3Array: function (e) {
          return X.warn("THREE.Matrix3: .multiplyVector3Array() has been renamed. Use matrix.applyToVector3Array( array ) instead."), this.applyToVector3Array(e)
        },
        applyToVector3Array: function () {
          var e = new X.Vector3;
          return function (t, n, i) {
            void 0 === n && (n = 0), void 0 === i && (i = t.length);
            for (var r = 0, o = n; r < i; r += 3, o += 3) e.x = t[o], e.y = t[o + 1], e.z = t[o + 2], e.applyMatrix3(this), t[o] = e.x, t[o + 1] = e.y, t[o + 2] = e.z;
            return t
          }
        }(),
        multiplyScalar: function (e) {
          var t = this.elements;
          return t[0] *= e, t[3] *= e, t[6] *= e, t[1] *= e, t[4] *= e, t[7] *= e, t[2] *= e, t[5] *= e, t[8] *= e, this
        },
        determinant: function () {
          var e = this.elements,
            t = e[0],
            n = e[1],
            i = e[2],
            r = e[3],
            o = e[4],
            a = e[5],
            s = e[6],
            l = e[7],
            c = e[8];
          return t * o * c - t * a * l - n * r * c + n * a * s + i * r * l - i * o * s
        },
        getInverse: function (e, t) {
          var n = e.elements,
            i = this.elements;
          i[0] = n[10] * n[5] - n[6] * n[9], i[1] = -n[10] * n[1] + n[2] * n[9], i[2] = n[6] * n[1] - n[2] * n[5], i[3] = -n[10] * n[4] + n[6] * n[8], i[4] = n[10] * n[0] - n[2] * n[8], i[5] = -n[6] * n[0] + n[2] * n[4], i[6] = n[9] * n[4] - n[5] * n[8], i[7] = -n[9] * n[0] + n[1] * n[8], i[8] = n[5] * n[0] - n[1] * n[4];
          var r = n[0] * i[0] + n[1] * i[3] + n[2] * i[6];
          if (0 === r) {
            var o = "Matrix3.getInverse(): can't invert matrix, determinant is 0";
            if (t) throw new Error(o);
            return X.warn(o), this.identity(), this
          }
          return this.multiplyScalar(1 / r), this
        },
        transpose: function () {
          var e, t = this.elements;
          return e = t[1], t[1] = t[3], t[3] = e, e = t[2], t[2] = t[6], t[6] = e, e = t[5], t[5] = t[7], t[7] = e, this
        },
        flattenToArrayOffset: function (e, t) {
          var n = this.elements;
          return e[t] = n[0], e[t + 1] = n[1], e[t + 2] = n[2], e[t + 3] = n[3], e[t + 4] = n[4], e[t + 5] = n[5], e[t + 6] = n[6], e[t + 7] = n[7], e[t + 8] = n[8], e
        },
        getNormalMatrix: function (e) {
          return this.getInverse(e).transpose(), this
        },
        transposeIntoArray: function (e) {
          var t = this.elements;
          return e[0] = t[0], e[1] = t[3], e[2] = t[6], e[3] = t[1], e[4] = t[4], e[5] = t[7], e[6] = t[2], e[7] = t[5], e[8] = t[8], this
        },
        fromArray: function (e) {
          return this.elements.set(e), this
        },
        toArray: function () {
          var e = this.elements;
          return [e[0], e[1], e[2], e[3], e[4], e[5], e[6], e[7], e[8]]
        },
        clone: function () {
          return (new X.Matrix3).fromArray(this.elements)
        }
      }, X.Matrix4 = function () {
        this.elements = new Float32Array([1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1]), arguments.length > 0 && X.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")
      }, X.Matrix4.prototype = {
        constructor: X.Matrix4,
        set: function (e, t, n, i, r, o, a, s, l, c, u, h, d, f, p, m) {
          var g = this.elements;
          return g[0] = e, g[4] = t, g[8] = n, g[12] = i, g[1] = r, g[5] = o, g[9] = a, g[13] = s, g[2] = l, g[6] = c, g[10] = u, g[14] = h, g[3] = d, g[7] = f, g[11] = p, g[15] = m, this
        },
        identity: function () {
          return this.set(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1), this
        },
        copy: function (e) {
          return this.elements.set(e.elements), this
        },
        extractPosition: function (e) {
          return X.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."), this.copyPosition(e)
        },
        copyPosition: function (e) {
          var t = this.elements,
            n = e.elements;
          return t[12] = n[12], t[13] = n[13], t[14] = n[14], this
        },
        extractBasis: function (e, t, n) {
          var i = this.elements;
          return e.set(i[0], i[1], i[2]), t.set(i[4], i[5], i[6]), n.set(i[8], i[9], i[10]), this
        },
        makeBasis: function (e, t, n) {
          return this.set(e.x, t.x, n.x, 0, e.y, t.y, n.y, 0, e.z, t.z, n.z, 0, 0, 0, 0, 1), this
        },
        extractRotation: function () {
          var e = new X.Vector3;
          return function (t) {
            var n = this.elements,
              i = t.elements,
              r = 1 / e.set(i[0], i[1], i[2]).length(),
              o = 1 / e.set(i[4], i[5], i[6]).length(),
              a = 1 / e.set(i[8], i[9], i[10]).length();
            return n[0] = i[0] * r, n[1] = i[1] * r, n[2] = i[2] * r, n[4] = i[4] * o, n[5] = i[5] * o, n[6] = i[6] * o, n[8] = i[8] * a, n[9] = i[9] * a, n[10] = i[10] * a, this
          }
        }(),
        makeRotationFromEuler: function (e) {
          e instanceof X.Euler == !1 && X.error("THREE.Matrix: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");
          var t = this.elements,
            n = e.x,
            i = e.y,
            r = e.z,
            o = Math.cos(n),
            a = Math.sin(n),
            s = Math.cos(i),
            l = Math.sin(i),
            c = Math.cos(r),
            u = Math.sin(r);
          if ("XYZ" === e.order) {
            var h = o * c,
              d = o * u,
              f = a * c,
              p = a * u;
            t[0] = s * c, t[4] = -s * u, t[8] = l, t[1] = d + f * l, t[5] = h - p * l, t[9] = -a * s, t[2] = p - h * l, t[6] = f + d * l, t[10] = o * s
          } else if ("YXZ" === e.order) {
            var m = s * c,
              g = s * u,
              v = l * c,
              y = l * u;
            t[0] = m + y * a, t[4] = v * a - g, t[8] = o * l, t[1] = o * u, t[5] = o * c, t[9] = -a, t[2] = g * a - v, t[6] = y + m * a, t[10] = o * s
          } else if ("ZXY" === e.order) {
            m = s * c, g = s * u, v = l * c, y = l * u;
            t[0] = m - y * a, t[4] = -o * u, t[8] = v + g * a, t[1] = g + v * a, t[5] = o * c, t[9] = y - m * a, t[2] = -o * l, t[6] = a, t[10] = o * s
          } else if ("ZYX" === e.order) {
            h = o * c, d = o * u, f = a * c, p = a * u;
            t[0] = s * c, t[4] = f * l - d, t[8] = h * l + p, t[1] = s * u, t[5] = p * l + h, t[9] = d * l - f, t[2] = -l, t[6] = a * s, t[10] = o * s
          } else if ("YZX" === e.order) {
            var b = o * s,
              _ = o * l,
              x = a * s,
              w = a * l;
            t[0] = s * c, t[4] = w - b * u, t[8] = x * u + _, t[1] = u, t[5] = o * c, t[9] = -a * c, t[2] = -l * c, t[6] = _ * u + x, t[10] = b - w * u
          } else if ("XZY" === e.order) {
            b = o * s, _ = o * l, x = a * s, w = a * l;
            t[0] = s * c, t[4] = -u, t[8] = l * c, t[1] = b * u + w, t[5] = o * c, t[9] = _ * u - x, t[2] = x * u - _, t[6] = a * c, t[10] = w * u + b
          }
          return t[3] = 0, t[7] = 0, t[11] = 0, t[12] = 0, t[13] = 0, t[14] = 0, t[15] = 1, this
        },
        setRotationFromQuaternion: function (e) {
          return X.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."), this.makeRotationFromQuaternion(e)
        },
        makeRotationFromQuaternion: function (e) {
          var t = this.elements,
            n = e.x,
            i = e.y,
            r = e.z,
            o = e.w,
            a = n + n,
            s = i + i,
            l = r + r,
            c = n * a,
            u = n * s,
            h = n * l,
            d = i * s,
            f = i * l,
            p = r * l,
            m = o * a,
            g = o * s,
            v = o * l;
          return t[0] = 1 - (d + p), t[4] = u - v, t[8] = h + g, t[1] = u + v, t[5] = 1 - (c + p), t[9] = f - m, t[2] = h - g, t[6] = f + m, t[10] = 1 - (c + d), t[3] = 0, t[7] = 0, t[11] = 0, t[12] = 0, t[13] = 0, t[14] = 0, t[15] = 1, this
        },
        lookAt: function () {
          var e = new X.Vector3,
            t = new X.Vector3,
            n = new X.Vector3;
          return function (i, r, o) {
            var a = this.elements;
            return n.subVectors(i, r).normalize(), 0 === n.length() && (n.z = 1), e.crossVectors(o, n).normalize(), 0 === e.length() && (n.x += 1e-4, e.crossVectors(o, n).normalize()), t.crossVectors(n, e), a[0] = e.x, a[4] = t.x, a[8] = n.x, a[1] = e.y, a[5] = t.y, a[9] = n.y, a[2] = e.z, a[6] = t.z, a[10] = n.z, this
          }
        }(),
        multiply: function (e, t) {
          return void 0 !== t ? (X.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."), this.multiplyMatrices(e, t)) : this.multiplyMatrices(this, e)
        },
        multiplyMatrices: function (e, t) {
          var n = e.elements,
            i = t.elements,
            r = this.elements,
            o = n[0],
            a = n[4],
            s = n[8],
            l = n[12],
            c = n[1],
            u = n[5],
            h = n[9],
            d = n[13],
            f = n[2],
            p = n[6],
            m = n[10],
            g = n[14],
            v = n[3],
            y = n[7],
            b = n[11],
            _ = n[15],
            x = i[0],
            w = i[4],
            E = i[8],
            A = i[12],
            S = i[1],
            M = i[5],
            T = i[9],
            C = i[13],
            P = i[2],
            L = i[6],
            D = i[10],
            I = i[14],
            R = i[3],
            O = i[7],
            k = i[11],
            N = i[15];
          return r[0] = o * x + a * S + s * P + l * R, r[4] = o * w + a * M + s * L + l * O, r[8] = o * E + a * T + s * D + l * k, r[12] = o * A + a * C + s * I + l * N, r[1] = c * x + u * S + h * P + d * R, r[5] = c * w + u * M + h * L + d * O, r[9] = c * E + u * T + h * D + d * k, r[13] = c * A + u * C + h * I + d * N, r[2] = f * x + p * S + m * P + g * R, r[6] = f * w + p * M + m * L + g * O, r[10] = f * E + p * T + m * D + g * k, r[14] = f * A + p * C + m * I + g * N, r[3] = v * x + y * S + b * P + _ * R, r[7] = v * w + y * M + b * L + _ * O, r[11] = v * E + y * T + b * D + _ * k, r[15] = v * A + y * C + b * I + _ * N, this
        },
        multiplyToArray: function (e, t, n) {
          var i = this.elements;
          return this.multiplyMatrices(e, t), n[0] = i[0], n[1] = i[1], n[2] = i[2], n[3] = i[3], n[4] = i[4], n[5] = i[5], n[6] = i[6], n[7] = i[7], n[8] = i[8], n[9] = i[9], n[10] = i[10], n[11] = i[11], n[12] = i[12], n[13] = i[13], n[14] = i[14], n[15] = i[15], this
        },
        multiplyScalar: function (e) {
          var t = this.elements;
          return t[0] *= e, t[4] *= e, t[8] *= e, t[12] *= e, t[1] *= e, t[5] *= e, t[9] *= e, t[13] *= e, t[2] *= e, t[6] *= e, t[10] *= e, t[14] *= e, t[3] *= e, t[7] *= e, t[11] *= e, t[15] *= e, this
        },
        multiplyVector3: function (e) {
          return X.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) or vector.applyProjection( matrix ) instead."), e.applyProjection(this)
        },
        multiplyVector4: function (e) {
          return X.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."), e.applyMatrix4(this)
        },
        multiplyVector3Array: function (e) {
          return X.warn("THREE.Matrix4: .multiplyVector3Array() has been renamed. Use matrix.applyToVector3Array( array ) instead."), this.applyToVector3Array(e)
        },
        applyToVector3Array: function () {
          var e = new X.Vector3;
          return function (t, n, i) {
            void 0 === n && (n = 0), void 0 === i && (i = t.length);
            for (var r = 0, o = n; r < i; r += 3, o += 3) e.x = t[o], e.y = t[o + 1], e.z = t[o + 2], e.applyMatrix4(this), t[o] = e.x, t[o + 1] = e.y, t[o + 2] = e.z;
            return t
          }
        }(),
        rotateAxis: function (e) {
          X.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."), e.transformDirection(this)
        },
        crossVector: function (e) {
          return X.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."), e.applyMatrix4(this)
        },
        determinant: function () {
          var e = this.elements,
            t = e[0],
            n = e[4],
            i = e[8],
            r = e[12],
            o = e[1],
            a = e[5],
            s = e[9],
            l = e[13],
            c = e[2],
            u = e[6],
            h = e[10],
            d = e[14];
          return e[3] * (+r * s * u - i * l * u - r * a * h + n * l * h + i * a * d - n * s * d) + e[7] * (+t * s * d - t * l * h + r * o * h - i * o * d + i * l * c - r * s * c) + e[11] * (+t * l * u - t * a * d - r * o * u + n * o * d + r * a * c - n * l * c) + e[15] * (-i * a * c - t * s * u + t * a * h + i * o * u - n * o * h + n * s * c)
        },
        transpose: function () {
          var e, t = this.elements;
          return e = t[1], t[1] = t[4], t[4] = e, e = t[2], t[2] = t[8], t[8] = e, e = t[6], t[6] = t[9], t[9] = e, e = t[3], t[3] = t[12], t[12] = e, e = t[7], t[7] = t[13], t[13] = e, e = t[11], t[11] = t[14], t[14] = e, this
        },
        flattenToArrayOffset: function (e, t) {
          var n = this.elements;
          return e[t] = n[0], e[t + 1] = n[1], e[t + 2] = n[2], e[t + 3] = n[3], e[t + 4] = n[4], e[t + 5] = n[5], e[t + 6] = n[6], e[t + 7] = n[7], e[t + 8] = n[8], e[t + 9] = n[9], e[t + 10] = n[10], e[t + 11] = n[11], e[t + 12] = n[12], e[t + 13] = n[13], e[t + 14] = n[14], e[t + 15] = n[15], e
        },
        getPosition: function () {
          var e = new X.Vector3;
          return function () {
            X.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead.");
            var t = this.elements;
            return e.set(t[12], t[13], t[14])
          }
        }(),
        setPosition: function (e) {
          var t = this.elements;
          return t[12] = e.x, t[13] = e.y, t[14] = e.z, this
        },
        getInverse: function (e, t) {
          var n = this.elements,
            i = e.elements,
            r = i[0],
            o = i[4],
            a = i[8],
            s = i[12],
            l = i[1],
            c = i[5],
            u = i[9],
            h = i[13],
            d = i[2],
            f = i[6],
            p = i[10],
            m = i[14],
            g = i[3],
            v = i[7],
            y = i[11],
            b = i[15];
          n[0] = u * m * v - h * p * v + h * f * y - c * m * y - u * f * b + c * p * b, n[4] = s * p * v - a * m * v - s * f * y + o * m * y + a * f * b - o * p * b, n[8] = a * h * v - s * u * v + s * c * y - o * h * y - a * c * b + o * u * b, n[12] = s * u * f - a * h * f - s * c * p + o * h * p + a * c * m - o * u * m, n[1] = h * p * g - u * m * g - h * d * y + l * m * y + u * d * b - l * p * b, n[5] = a * m * g - s * p * g + s * d * y - r * m * y - a * d * b + r * p * b, n[9] = s * u * g - a * h * g - s * l * y + r * h * y + a * l * b - r * u * b, n[13] = a * h * d - s * u * d + s * l * p - r * h * p - a * l * m + r * u * m, n[2] = c * m * g - h * f * g + h * d * v - l * m * v - c * d * b + l * f * b, n[6] = s * f * g - o * m * g - s * d * v + r * m * v + o * d * b - r * f * b, n[10] = o * h * g - s * c * g + s * l * v - r * h * v - o * l * b + r * c * b, n[14] = s * c * d - o * h * d - s * l * f + r * h * f + o * l * m - r * c * m, n[3] = u * f * g - c * p * g - u * d * v + l * p * v + c * d * y - l * f * y, n[7] = o * p * g - a * f * g + a * d * v - r * p * v - o * d * y + r * f * y, n[11] = a * c * g - o * u * g - a * l * v + r * u * v + o * l * y - r * c * y, n[15] = o * u * d - a * c * d + a * l * f - r * u * f - o * l * p + r * c * p;
          var _ = r * n[0] + l * n[4] + d * n[8] + g * n[12];
          if (0 == _) {
            var x = "THREE.Matrix4.getInverse(): can't invert matrix, determinant is 0";
            if (t) throw new Error(x);
            return X.warn(x), this.identity(), this
          }
          return this.multiplyScalar(1 / _), this
        },
        translate: function (e) {
          X.error("THREE.Matrix4: .translate() has been removed.")
        },
        rotateX: function (e) {
          X.error("THREE.Matrix4: .rotateX() has been removed.")
        },
        rotateY: function (e) {
          X.error("THREE.Matrix4: .rotateY() has been removed.")
        },
        rotateZ: function (e) {
          X.error("THREE.Matrix4: .rotateZ() has been removed.")
        },
        rotateByAxis: function (e, t) {
          X.error("THREE.Matrix4: .rotateByAxis() has been removed.")
        },
        scale: function (e) {
          var t = this.elements,
            n = e.x,
            i = e.y,
            r = e.z;
          return t[0] *= n, t[4] *= i, t[8] *= r, t[1] *= n, t[5] *= i, t[9] *= r, t[2] *= n, t[6] *= i, t[10] *= r, t[3] *= n, t[7] *= i, t[11] *= r, this
        },
        getMaxScaleOnAxis: function () {
          var e = this.elements,
            t = e[0] * e[0] + e[1] * e[1] + e[2] * e[2],
            n = e[4] * e[4] + e[5] * e[5] + e[6] * e[6],
            i = e[8] * e[8] + e[9] * e[9] + e[10] * e[10];
          return Math.sqrt(Math.max(t, Math.max(n, i)))
        },
        makeTranslation: function (e, t, n) {
          return this.set(1, 0, 0, e, 0, 1, 0, t, 0, 0, 1, n, 0, 0, 0, 1), this
        },
        makeRotationX: function (e) {
          var t = Math.cos(e),
            n = Math.sin(e);
          return this.set(1, 0, 0, 0, 0, t, -n, 0, 0, n, t, 0, 0, 0, 0, 1), this
        },
        makeRotationY: function (e) {
          var t = Math.cos(e),
            n = Math.sin(e);
          return this.set(t, 0, n, 0, 0, 1, 0, 0, -n, 0, t, 0, 0, 0, 0, 1), this
        },
        makeRotationZ: function (e) {
          var t = Math.cos(e),
            n = Math.sin(e);
          return this.set(t, -n, 0, 0, n, t, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1), this
        },
        makeRotationAxis: function (e, t) {
          var n = Math.cos(t),
            i = Math.sin(t),
            r = 1 - n,
            o = e.x,
            a = e.y,
            s = e.z,
            l = r * o,
            c = r * a;
          return this.set(l * o + n, l * a - i * s, l * s + i * a, 0, l * a + i * s, c * a + n, c * s - i * o, 0, l * s - i * a, c * s + i * o, r * s * s + n, 0, 0, 0, 0, 1), this
        },
        makeScale: function (e, t, n) {
          return this.set(e, 0, 0, 0, 0, t, 0, 0, 0, 0, n, 0, 0, 0, 0, 1), this
        },
        compose: function (e, t, n) {
          return this.makeRotationFromQuaternion(t), this.scale(n), this.setPosition(e), this
        },
        decompose: function () {
          var e = new X.Vector3,
            t = new X.Matrix4;
          return function (n, i, r) {
            var o = this.elements,
              a = e.set(o[0], o[1], o[2]).length(),
              s = e.set(o[4], o[5], o[6]).length(),
              l = e.set(o[8], o[9], o[10]).length();
            this.determinant() < 0 && (a = -a), n.x = o[12], n.y = o[13], n.z = o[14], t.elements.set(this.elements);
            var c = 1 / a,
              u = 1 / s,
              h = 1 / l;
            return t.elements[0] *= c, t.elements[1] *= c, t.elements[2] *= c, t.elements[4] *= u, t.elements[5] *= u, t.elements[6] *= u, t.elements[8] *= h, t.elements[9] *= h, t.elements[10] *= h, i.setFromRotationMatrix(t), r.x = a, r.y = s, r.z = l, this
          }
        }(),
        makeFrustum: function (e, t, n, i, r, o) {
          var a = this.elements,
            s = 2 * r / (t - e),
            l = 2 * r / (i - n),
            c = (t + e) / (t - e),
            u = (i + n) / (i - n),
            h = -(o + r) / (o - r),
            d = -2 * o * r / (o - r);
          return a[0] = s, a[4] = 0, a[8] = c, a[12] = 0, a[1] = 0, a[5] = l, a[9] = u, a[13] = 0, a[2] = 0, a[6] = 0, a[10] = h, a[14] = d, a[3] = 0, a[7] = 0, a[11] = -1, a[15] = 0, this
        },
        makePerspective: function (e, t, n, i) {
          var r = n * Math.tan(X.Math.degToRad(.5 * e)),
            o = -r,
            a = o * t,
            s = r * t;
          return this.makeFrustum(a, s, o, r, n, i)
        },
        makeOrthographic: function (e, t, n, i, r, o) {
          var a = this.elements,
            s = t - e,
            l = n - i,
            c = o - r,
            u = (t + e) / s,
            h = (n + i) / l,
            d = (o + r) / c;
          return a[0] = 2 / s, a[4] = 0, a[8] = 0, a[12] = -u, a[1] = 0, a[5] = 2 / l, a[9] = 0, a[13] = -h, a[2] = 0, a[6] = 0, a[10] = -2 / c, a[14] = -d, a[3] = 0, a[7] = 0, a[11] = 0, a[15] = 1, this
        },
        fromArray: function (e) {
          return this.elements.set(e), this
        },
        toArray: function () {
          var e = this.elements;
          return [e[0], e[1], e[2], e[3], e[4], e[5], e[6], e[7], e[8], e[9], e[10], e[11], e[12], e[13], e[14], e[15]]
        },
        clone: function () {
          return (new X.Matrix4).fromArray(this.elements)
        }
      }, X.Ray = function (e, t) {
        this.origin = void 0 !== e ? e : new X.Vector3, this.direction = void 0 !== t ? t : new X.Vector3
      }, X.Ray.prototype = {
        constructor: X.Ray,
        set: function (e, t) {
          return this.origin.copy(e), this.direction.copy(t), this
        },
        copy: function (e) {
          return this.origin.copy(e.origin), this.direction.copy(e.direction), this
        },
        at: function (e, t) {
          return (t || new X.Vector3).copy(this.direction).multiplyScalar(e).add(this.origin)
        },
        recast: function () {
          var e = new X.Vector3;
          return function (t) {
            return this.origin.copy(this.at(t, e)), this
          }
        }(),
        closestPointToPoint: function (e, t) {
          var n = t || new X.Vector3;
          n.subVectors(e, this.origin);
          var i = n.dot(this.direction);
          return i < 0 ? n.copy(this.origin) : n.copy(this.direction).multiplyScalar(i).add(this.origin)
        },
        distanceToPoint: function () {
          var e = new X.Vector3;
          return function (t) {
            var n = e.subVectors(t, this.origin).dot(this.direction);
            return n < 0 ? this.origin.distanceTo(t) : (e.copy(this.direction).multiplyScalar(n).add(this.origin), e.distanceTo(t))
          }
        }(),
        distanceSqToSegment: (f = new X.Vector3, p = new X.Vector3, m = new X.Vector3, function (e, t, n, i) {
          f.copy(e).add(t).multiplyScalar(.5), p.copy(t).sub(e).normalize(), m.copy(this.origin).sub(f);
          var r, o, a, s, l = .5 * e.distanceTo(t),
            c = -this.direction.dot(p),
            u = m.dot(this.direction),
            h = -m.dot(p),
            d = m.lengthSq(),
            g = Math.abs(1 - c * c);
          if (g > 0)
            if (o = c * u - h, s = l * g, (r = c * h - u) >= 0)
              if (o >= -s)
                if (o <= s) {
                  var v = 1 / g;
                  a = (r *= v) * (r + c * (o *= v) + 2 * u) + o * (c * r + o + 2 * h) + d
                } else o = l, a = -(r = Math.max(0, -(c * o + u))) * r + o * (o + 2 * h) + d;
          else o = -l, a = -(r = Math.max(0, -(c * o + u))) * r + o * (o + 2 * h) + d;
          else o <= -s ? a = -(r = Math.max(0, -(-c * l + u))) * r + (o = r > 0 ? -l : Math.min(Math.max(-l, -h), l)) * (o + 2 * h) + d : o <= s ? (r = 0, a = (o = Math.min(Math.max(-l, -h), l)) * (o + 2 * h) + d) : a = -(r = Math.max(0, -(c * l + u))) * r + (o = r > 0 ? l : Math.min(Math.max(-l, -h), l)) * (o + 2 * h) + d;
          else o = c > 0 ? -l : l, a = -(r = Math.max(0, -(c * o + u))) * r + o * (o + 2 * h) + d;
          return n && n.copy(this.direction).multiplyScalar(r).add(this.origin), i && i.copy(p).multiplyScalar(o).add(f), a
        }),
        isIntersectionSphere: function (e) {
          return this.distanceToPoint(e.center) <= e.radius
        },
        intersectSphere: function () {
          var e = new X.Vector3;
          return function (t, n) {
            e.subVectors(t.center, this.origin);
            var i = e.dot(this.direction),
              r = e.dot(e) - i * i,
              o = t.radius * t.radius;
            if (r > o) return null;
            var a = Math.sqrt(o - r),
              s = i - a,
              l = i + a;
            return s < 0 && l < 0 ? null : s < 0 ? this.at(l, n) : this.at(s, n)
          }
        }(),
        isIntersectionPlane: function (e) {
          var t = e.distanceToPoint(this.origin);
          return 0 === t || e.normal.dot(this.direction) * t < 0
        },
        distanceToPlane: function (e) {
          var t = e.normal.dot(this.direction);
          if (0 == t) return 0 == e.distanceToPoint(this.origin) ? 0 : null;
          var n = -(this.origin.dot(e.normal) + e.constant) / t;
          return n >= 0 ? n : null
        },
        intersectPlane: function (e, t) {
          var n = this.distanceToPlane(e);
          return null === n ? null : this.at(n, t)
        },
        isIntersectionBox: (d = new X.Vector3, function (e) {
          return null !== this.intersectBox(e, d)
        }),
        intersectBox: function (e, t) {
          var n, i, r, o, a, s, l = 1 / this.direction.x,
            c = 1 / this.direction.y,
            u = 1 / this.direction.z,
            h = this.origin;
          return l >= 0 ? (n = (e.min.x - h.x) * l, i = (e.max.x - h.x) * l) : (n = (e.max.x - h.x) * l, i = (e.min.x - h.x) * l), c >= 0 ? (r = (e.min.y - h.y) * c, o = (e.max.y - h.y) * c) : (r = (e.max.y - h.y) * c, o = (e.min.y - h.y) * c), n > o || r > i ? null : ((r > n || n != n) && (n = r), (o < i || i != i) && (i = o), u >= 0 ? (a = (e.min.z - h.z) * u, s = (e.max.z - h.z) * u) : (a = (e.max.z - h.z) * u, s = (e.min.z - h.z) * u), n > s || a > i ? null : ((a > n || n != n) && (n = a), (s < i || i != i) && (i = s), i < 0 ? null : this.at(n >= 0 ? n : i, t)))
        },
        intersectTriangle: function () {
          var e = new X.Vector3,
            t = new X.Vector3,
            n = new X.Vector3,
            i = new X.Vector3;
          return function (r, o, a, s, l) {
            t.subVectors(o, r), n.subVectors(a, r), i.crossVectors(t, n);
            var c, u = this.direction.dot(i);
            if (u > 0) {
              if (s) return null;
              c = 1
            } else {
              if (!(u < 0)) return null;
              c = -1, u = -u
            }
            e.subVectors(this.origin, r);
            var h = c * this.direction.dot(n.crossVectors(e, n));
            if (h < 0) return null;
            var d = c * this.direction.dot(t.cross(e));
            if (d < 0) return null;
            if (h + d > u) return null;
            var f = -c * e.dot(i);
            return f < 0 ? null : this.at(f / u, l)
          }
        }(),
        applyMatrix4: function (e) {
          return this.direction.add(this.origin).applyMatrix4(e), this.origin.applyMatrix4(e), this.direction.sub(this.origin), this.direction.normalize(), this
        },
        equals: function (e) {
          return e.origin.equals(this.origin) && e.direction.equals(this.direction)
        },
        clone: function () {
          return (new X.Ray).copy(this)
        }
      }, X.Sphere = function (e, t) {
        this.center = void 0 !== e ? e : new X.Vector3, this.radius = void 0 !== t ? t : 0
      }, X.Sphere.prototype = {
        constructor: X.Sphere,
        set: function (e, t) {
          return this.center.copy(e), this.radius = t, this
        },
        setFromPoints: (g = new X.Box3, function (e, t) {
          var n = this.center;
          void 0 !== t ? n.copy(t) : g.setFromPoints(e).center(n);
          for (var i = 0, r = 0, o = e.length; r < o; r++) i = Math.max(i, n.distanceToSquared(e[r]));
          return this.radius = Math.sqrt(i), this
        }),
        copy: function (e) {
          return this.center.copy(e.center), this.radius = e.radius, this
        },
        empty: function () {
          return this.radius <= 0
        },
        containsPoint: function (e) {
          return e.distanceToSquared(this.center) <= this.radius * this.radius
        },
        distanceToPoint: function (e) {
          return e.distanceTo(this.center) - this.radius
        },
        intersectsSphere: function (e) {
          var t = this.radius + e.radius;
          return e.center.distanceToSquared(this.center) <= t * t
        },
        clampPoint: function (e, t) {
          var n = this.center.distanceToSquared(e),
            i = t || new X.Vector3;
          return i.copy(e), n > this.radius * this.radius && (i.sub(this.center).normalize(), i.multiplyScalar(this.radius).add(this.center)), i
        },
        getBoundingBox: function (e) {
          var t = e || new X.Box3;
          return t.set(this.center, this.center), t.expandByScalar(this.radius), t
        },
        applyMatrix4: function (e) {
          return this.center.applyMatrix4(e), this.radius = this.radius * e.getMaxScaleOnAxis(), this
        },
        translate: function (e) {
          return this.center.add(e), this
        },
        equals: function (e) {
          return e.center.equals(this.center) && e.radius === this.radius
        },
        clone: function () {
          return (new X.Sphere).copy(this)
        }
      }, X.Frustum = function (e, t, n, i, r, o) {
        this.planes = [void 0 !== e ? e : new X.Plane, void 0 !== t ? t : new X.Plane, void 0 !== n ? n : new X.Plane, void 0 !== i ? i : new X.Plane, void 0 !== r ? r : new X.Plane, void 0 !== o ? o : new X.Plane]
      }, X.Frustum.prototype = {
        constructor: X.Frustum,
        set: function (e, t, n, i, r, o) {
          var a = this.planes;
          return a[0].copy(e), a[1].copy(t), a[2].copy(n), a[3].copy(i), a[4].copy(r), a[5].copy(o), this
        },
        copy: function (e) {
          for (var t = this.planes, n = 0; n < 6; n++) t[n].copy(e.planes[n]);
          return this
        },
        setFromMatrix: function (e) {
          var t = this.planes,
            n = e.elements,
            i = n[0],
            r = n[1],
            o = n[2],
            a = n[3],
            s = n[4],
            l = n[5],
            c = n[6],
            u = n[7],
            h = n[8],
            d = n[9],
            f = n[10],
            p = n[11],
            m = n[12],
            g = n[13],
            v = n[14],
            y = n[15];
          return t[0].setComponents(a - i, u - s, p - h, y - m).normalize(), t[1].setComponents(a + i, u + s, p + h, y + m).normalize(), t[2].setComponents(a + r, u + l, p + d, y + g).normalize(), t[3].setComponents(a - r, u - l, p - d, y - g).normalize(), t[4].setComponents(a - o, u - c, p - f, y - v).normalize(), t[5].setComponents(a + o, u + c, p + f, y + v).normalize(), this
        },
        intersectsObject: (b = new X.Sphere, function (e) {
          var t = e.geometry;
          return null === t.boundingSphere && t.computeBoundingSphere(), b.copy(t.boundingSphere), b.applyMatrix4(e.matrixWorld), this.intersectsSphere(b)
        }),
        intersectsSphere: function (e) {
          for (var t = this.planes, n = e.center, i = -e.radius, r = 0; r < 6; r++) {
            if (t[r].distanceToPoint(n) < i) return !1
          }
          return !0
        },
        intersectsBox: (v = new X.Vector3, y = new X.Vector3, function (e) {
          for (var t = this.planes, n = 0; n < 6; n++) {
            var i = t[n];
            v.x = i.normal.x > 0 ? e.min.x : e.max.x, y.x = i.normal.x > 0 ? e.max.x : e.min.x, v.y = i.normal.y > 0 ? e.min.y : e.max.y, y.y = i.normal.y > 0 ? e.max.y : e.min.y, v.z = i.normal.z > 0 ? e.min.z : e.max.z, y.z = i.normal.z > 0 ? e.max.z : e.min.z;
            var r = i.distanceToPoint(v),
              o = i.distanceToPoint(y);
            if (r < 0 && o < 0) return !1
          }
          return !0
        }),
        containsPoint: function (e) {
          for (var t = this.planes, n = 0; n < 6; n++)
            if (t[n].distanceToPoint(e) < 0) return !1;
          return !0
        },
        clone: function () {
          return (new X.Frustum).copy(this)
        }
      }, X.Plane = function (e, t) {
        this.normal = void 0 !== e ? e : new X.Vector3(1, 0, 0), this.constant = void 0 !== t ? t : 0
      }, X.Plane.prototype = {
        constructor: X.Plane,
        set: function (e, t) {
          return this.normal.copy(e), this.constant = t, this
        },
        setComponents: function (e, t, n, i) {
          return this.normal.set(e, t, n), this.constant = i, this
        },
        setFromNormalAndCoplanarPoint: function (e, t) {
          return this.normal.copy(e), this.constant = -t.dot(this.normal), this
        },
        setFromCoplanarPoints: function () {
          var e = new X.Vector3,
            t = new X.Vector3;
          return function (n, i, r) {
            var o = e.subVectors(r, i).cross(t.subVectors(n, i)).normalize();
            return this.setFromNormalAndCoplanarPoint(o, n), this
          }
        }(),
        copy: function (e) {
          return this.normal.copy(e.normal), this.constant = e.constant, this
        },
        normalize: function () {
          var e = 1 / this.normal.length();
          return this.normal.multiplyScalar(e), this.constant *= e, this
        },
        negate: function () {
          return this.constant *= -1, this.normal.negate(), this
        },
        distanceToPoint: function (e) {
          return this.normal.dot(e) + this.constant
        },
        distanceToSphere: function (e) {
          return this.distanceToPoint(e.center) - e.radius
        },
        projectPoint: function (e, t) {
          return this.orthoPoint(e, t).sub(e).negate()
        },
        orthoPoint: function (e, t) {
          var n = this.distanceToPoint(e);
          return (t || new X.Vector3).copy(this.normal).multiplyScalar(n)
        },
        isIntersectionLine: function (e) {
          var t = this.distanceToPoint(e.start),
            n = this.distanceToPoint(e.end);
          return t < 0 && n > 0 || n < 0 && t > 0
        },
        intersectLine: function () {
          var e = new X.Vector3;
          return function (t, n) {
            var i = n || new X.Vector3,
              r = t.delta(e),
              o = this.normal.dot(r);
            if (0 == o) return 0 == this.distanceToPoint(t.start) ? i.copy(t.start) : void 0;
            var a = -(t.start.dot(this.normal) + this.constant) / o;
            return a < 0 || a > 1 ? void 0 : i.copy(r).multiplyScalar(a).add(t.start)
          }
        }(),
        coplanarPoint: function (e) {
          return (e || new X.Vector3).copy(this.normal).multiplyScalar(-this.constant)
        },
        applyMatrix4: function () {
          var e = new X.Vector3,
            t = new X.Vector3,
            n = new X.Matrix3;
          return function (i, r) {
            var o = r || n.getNormalMatrix(i),
              a = e.copy(this.normal).applyMatrix3(o);
            a.normalize();
            var s = this.coplanarPoint(t);
            return s.applyMatrix4(i), this.setFromNormalAndCoplanarPoint(a, s), this
          }
        }(),
        translate: function (e) {
          return this.constant = this.constant - e.dot(this.normal), this
        },
        equals: function (e) {
          return e.normal.equals(this.normal) && e.constant == this.constant
        },
        clone: function () {
          return (new X.Plane).copy(this)
        }
      }, X.Math = {
        generateUUID: function () {
          var e, t = "0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),
            n = new Array(36),
            i = 0;
          return function () {
            for (var r = 0; r < 36; r++) 8 == r || 13 == r || 18 == r || 23 == r ? n[r] = "-" : 14 == r ? n[r] = "4" : (i <= 2 && (i = 33554432 + 16777216 * Math.random() | 0), e = 15 & i, i >>= 4, n[r] = t[19 == r ? 3 & e | 8 : e]);
            return n.join("")
          }
        }(),
        clamp: function (e, t, n) {
          return e < t ? t : e > n ? n : e
        },
        clampBottom: function (e, t) {
          return e < t ? t : e
        },
        mapLinear: function (e, t, n, i, r) {
          return i + (e - t) * (r - i) / (n - t)
        },
        smoothstep: function (e, t, n) {
          return e <= t ? 0 : e >= n ? 1 : (e = (e - t) / (n - t)) * e * (3 - 2 * e)
        },
        smootherstep: function (e, t, n) {
          return e <= t ? 0 : e >= n ? 1 : (e = (e - t) / (n - t)) * e * e * (e * (6 * e - 15) + 10)
        },
        random16: function () {
          return (65280 * Math.random() + 255 * Math.random()) / 65535
        },
        randInt: function (e, t) {
          return Math.floor(this.randFloat(e, t))
        },
        randFloat: function (e, t) {
          return e + Math.random() * (t - e)
        },
        randFloatSpread: function (e) {
          return e * (.5 - Math.random())
        },
        degToRad: (x = Math.PI / 180, function (e) {
          return e * x
        }),
        radToDeg: (_ = 180 / Math.PI, function (e) {
          return e * _
        }),
        isPowerOfTwo: function (e) {
          return 0 == (e & e - 1) && 0 !== e
        },
        nextPowerOfTwo: function (e) {
          return e--, e |= e >> 1, e |= e >> 2, e |= e >> 4, e |= e >> 8, e |= e >> 16, ++e
        }
      }, X.Spline = function (e) {
        this.points = e;
        var t, n, i, r, o, a, s, l, c, u = [],
          h = {
            x: 0,
            y: 0,
            z: 0
          };

        function d(e, t, n, i, r, o, a) {
          var s = .5 * (n - e),
            l = .5 * (i - t);
          return (2 * (t - n) + s + l) * a + (-3 * (t - n) - 2 * s - l) * o + s * r + t
        }
        this.initFromArray = function (e) {
          this.points = [];
          for (var t = 0; t < e.length; t++) this.points[t] = {
            x: e[t][0],
            y: e[t][1],
            z: e[t][2]
          }
        }, this.getPoint = function (e) {
          return t = (this.points.length - 1) * e, n = Math.floor(t), i = t - n, u[0] = 0 === n ? n : n - 1, u[1] = n, u[2] = n > this.points.length - 2 ? this.points.length - 1 : n + 1, u[3] = n > this.points.length - 3 ? this.points.length - 1 : n + 2, a = this.points[u[0]], s = this.points[u[1]], l = this.points[u[2]], c = this.points[u[3]], o = i * (r = i * i), h.x = d(a.x, s.x, l.x, c.x, i, r, o), h.y = d(a.y, s.y, l.y, c.y, i, r, o), h.z = d(a.z, s.z, l.z, c.z, i, r, o), h
        }, this.getControlPointsArray = function () {
          var e, t, n = this.points.length,
            i = [];
          for (e = 0; e < n; e++) t = this.points[e], i[e] = [t.x, t.y, t.z];
          return i
        }, this.getLength = function (e) {
          var t, n, i, r, o = 0,
            a = 0,
            s = 0,
            l = new X.Vector3,
            c = new X.Vector3,
            u = [],
            h = 0;
          for (u[0] = 0, e || (e = 100), i = this.points.length * e, l.copy(this.points[0]), t = 1; t < i; t++) n = t / i, r = this.getPoint(n), c.copy(r), h += c.distanceTo(l), l.copy(r), o = (this.points.length - 1) * n, (a = Math.floor(o)) != s && (u[a] = h, s = a);
          return u[u.length] = h, {
            chunks: u,
            total: h
          }
        }, this.reparametrizeByArcLength = function (e) {
          var t, n, i, r, o, a, s, l, c = [],
            u = new X.Vector3,
            h = this.getLength();
          for (c.push(u.copy(this.points[0]).clone()), t = 1; t < this.points.length; t++) {
            for (a = h.chunks[t] - h.chunks[t - 1], s = Math.ceil(e * a / h.total), r = (t - 1) / (this.points.length - 1), o = t / (this.points.length - 1), n = 1; n < s - 1; n++) i = r + n * (1 / s) * (o - r), l = this.getPoint(i), c.push(u.copy(l).clone());
            c.push(u.copy(this.points[t]).clone())
          }
          this.points = c
        }
      }, X.Triangle = function (e, t, n) {
        this.a = void 0 !== e ? e : new X.Vector3, this.b = void 0 !== t ? t : new X.Vector3, this.c = void 0 !== n ? n : new X.Vector3
      }, X.Triangle.normal = (w = new X.Vector3, function (e, t, n, i) {
        var r = i || new X.Vector3;
        r.subVectors(n, t), w.subVectors(e, t), r.cross(w);
        var o = r.lengthSq();
        return o > 0 ? r.multiplyScalar(1 / Math.sqrt(o)) : r.set(0, 0, 0)
      }), X.Triangle.barycoordFromPoint = function () {
        var e = new X.Vector3,
          t = new X.Vector3,
          n = new X.Vector3;
        return function (i, r, o, a, s) {
          e.subVectors(a, r), t.subVectors(o, r), n.subVectors(i, r);
          var l = e.dot(e),
            c = e.dot(t),
            u = e.dot(n),
            h = t.dot(t),
            d = t.dot(n),
            f = l * h - c * c,
            p = s || new X.Vector3;
          if (0 == f) return p.set(-2, -1, -1);
          var m = 1 / f,
            g = (h * u - c * d) * m,
            v = (l * d - c * u) * m;
          return p.set(1 - g - v, v, g)
        }
      }(), X.Triangle.containsPoint = function () {
        var e = new X.Vector3;
        return function (t, n, i, r) {
          var o = X.Triangle.barycoordFromPoint(t, n, i, r, e);
          return o.x >= 0 && o.y >= 0 && o.x + o.y <= 1
        }
      }(), X.Triangle.prototype = {
        constructor: X.Triangle,
        set: function (e, t, n) {
          return this.a.copy(e), this.b.copy(t), this.c.copy(n), this
        },
        setFromPointsAndIndices: function (e, t, n, i) {
          return this.a.copy(e[t]), this.b.copy(e[n]), this.c.copy(e[i]), this
        },
        copy: function (e) {
          return this.a.copy(e.a), this.b.copy(e.b), this.c.copy(e.c), this
        },
        area: function () {
          var e = new X.Vector3,
            t = new X.Vector3;
          return function () {
            return e.subVectors(this.c, this.b), t.subVectors(this.a, this.b), .5 * e.cross(t).length()
          }
        }(),
        midpoint: function (e) {
          return (e || new X.Vector3).addVectors(this.a, this.b).add(this.c).multiplyScalar(1 / 3)
        },
        normal: function (e) {
          return X.Triangle.normal(this.a, this.b, this.c, e)
        },
        plane: function (e) {
          return (e || new X.Plane).setFromCoplanarPoints(this.a, this.b, this.c)
        },
        barycoordFromPoint: function (e, t) {
          return X.Triangle.barycoordFromPoint(e, this.a, this.b, this.c, t)
        },
        containsPoint: function (e) {
          return X.Triangle.containsPoint(e, this.a, this.b, this.c)
        },
        equals: function (e) {
          return e.a.equals(this.a) && e.b.equals(this.b) && e.c.equals(this.c)
        },
        clone: function () {
          return (new X.Triangle).copy(this)
        }
      }, X.Clock = function (e) {
        this.autoStart = void 0 === e || e, this.startTime = 0, this.oldTime = 0, this.elapsedTime = 0, this.running = !1
      }, X.Clock.prototype = {
        constructor: X.Clock,
        start: function () {
          this.startTime = void 0 !== self.performance && void 0 !== self.performance.now ? self.performance.now() : Date.now(), this.oldTime = this.startTime, this.running = !0
        },
        stop: function () {
          this.getElapsedTime(), this.running = !1
        },
        getElapsedTime: function () {
          return this.getDelta(), this.elapsedTime
        },
        getDelta: function () {
          var e = 0;
          if (this.autoStart && !this.running && this.start(), this.running) {
            var t = void 0 !== self.performance && void 0 !== self.performance.now ? self.performance.now() : Date.now();
            e = .001 * (t - this.oldTime), this.oldTime = t, this.elapsedTime += e
          }
          return e
        }
      }, X.EventDispatcher = function () {}, X.EventDispatcher.prototype = {
        constructor: X.EventDispatcher,
        apply: function (e) {
          e.addEventListener = X.EventDispatcher.prototype.addEventListener, e.hasEventListener = X.EventDispatcher.prototype.hasEventListener, e.removeEventListener = X.EventDispatcher.prototype.removeEventListener, e.dispatchEvent = X.EventDispatcher.prototype.dispatchEvent
        },
        addEventListener: function (e, t) {
          void 0 === this._listeners && (this._listeners = {});
          var n = this._listeners;
          void 0 === n[e] && (n[e] = []), -1 === n[e].indexOf(t) && n[e].push(t)
        },
        hasEventListener: function (e, t) {
          if (void 0 === this._listeners) return !1;
          var n = this._listeners;
          return void 0 !== n[e] && -1 !== n[e].indexOf(t)
        },
        removeEventListener: function (e, t) {
          if (void 0 !== this._listeners) {
            var n = this._listeners[e];
            if (void 0 !== n) {
              var i = n.indexOf(t); - 1 !== i && n.splice(i, 1)
            }
          }
        },
        dispatchEvent: function (e) {
          if (void 0 !== this._listeners) {
            var t = this._listeners[e.type];
            if (void 0 !== t) {
              e.target = this;
              for (var n = [], i = t.length, r = 0; r < i; r++) n[r] = t[r];
              for (r = 0; r < i; r++) n[r].call(this, e)
            }
          }
        }
      },
      function (e) {
        e.Raycaster = function (t, n, i, r) {
          this.ray = new e.Ray(t, n), this.near = i || 0, this.far = r || 1 / 0, this.params = {
            Sprite: {},
            Mesh: {},
            PointCloud: {
              threshold: 1
            },
            LOD: {},
            Line: {}
          }
        };
        var t = function (e, t) {
            return e.distance - t.distance
          },
          n = function (e, t, i, r) {
            if (e.raycast(t, i), !0 === r)
              for (var o = e.children, a = 0, s = o.length; a < s; a++) n(o[a], t, i, !0)
          };
        e.Raycaster.prototype = {
          constructor: e.Raycaster,
          precision: 1e-4,
          linePrecision: 1,
          set: function (e, t) {
            this.ray.set(e, t)
          },
          setFromCamera: function (t, n) {
            n instanceof e.PerspectiveCamera ? (this.ray.origin.copy(n.position), this.ray.direction.set(t.x, t.y, .5).unproject(n).sub(n.position).normalize()) : n instanceof e.OrthographicCamera ? (this.ray.origin.set(t.x, t.y, -1).unproject(n), this.ray.direction.set(0, 0, -1).transformDirection(n.matrixWorld)) : e.error("THREE.Raycaster: Unsupported camera type.")
          },
          intersectObject: function (e, i) {
            var r = [];
            return n(e, this, r, i), r.sort(t), r
          },
          intersectObjects: function (i, r) {
            var o = [];
            if (i instanceof Array == !1) return e.warn("THREE.Raycaster.intersectObjects: objects is not an Array."), o;
            for (var a = 0, s = i.length; a < s; a++) n(i[a], this, o, r);
            return o.sort(t), o
          }
        }
      }(X), X.Object3D = function () {
        Object.defineProperty(this, "id", {
          value: X.Object3DIdCount++
        }), this.uuid = X.Math.generateUUID(), this.name = "", this.type = "Object3D", this.parent = void 0, this.children = [], this.up = X.Object3D.DefaultUp.clone();
        var e = new X.Vector3,
          t = new X.Euler,
          n = new X.Quaternion,
          i = new X.Vector3(1, 1, 1);
        t.onChange((function () {
          n.setFromEuler(t, !1)
        })), n.onChange((function () {
          t.setFromQuaternion(n, void 0, !1)
        })), Object.defineProperties(this, {
          position: {
            enumerable: !0,
            value: e
          },
          rotation: {
            enumerable: !0,
            value: t
          },
          quaternion: {
            enumerable: !0,
            value: n
          },
          scale: {
            enumerable: !0,
            value: i
          }
        }), this.rotationAutoUpdate = !0, this.matrix = new X.Matrix4, this.matrixWorld = new X.Matrix4, this.matrixAutoUpdate = !0, this.matrixWorldNeedsUpdate = !1, this.visible = !0, this.castShadow = !1, this.receiveShadow = !1, this.frustumCulled = !0, this.renderOrder = 0, this.userData = {}
      }, X.Object3D.DefaultUp = new X.Vector3(0, 1, 0), X.Object3D.prototype = {
        constructor: X.Object3D,
        get eulerOrder() {
          return X.warn("THREE.Object3D: .eulerOrder has been moved to .rotation.order."), this.rotation.order
        },
        set eulerOrder(e) {
          X.warn("THREE.Object3D: .eulerOrder has been moved to .rotation.order."), this.rotation.order = e
        },
        get useQuaternion() {
          X.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")
        },
        set useQuaternion(e) {
          X.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")
        },
        applyMatrix: function (e) {
          this.matrix.multiplyMatrices(e, this.matrix), this.matrix.decompose(this.position, this.quaternion, this.scale)
        },
        setRotationFromAxisAngle: function (e, t) {
          this.quaternion.setFromAxisAngle(e, t)
        },
        setRotationFromEuler: function (e) {
          this.quaternion.setFromEuler(e, !0)
        },
        setRotationFromMatrix: function (e) {
          this.quaternion.setFromRotationMatrix(e)
        },
        setRotationFromQuaternion: function (e) {
          this.quaternion.copy(e)
        },
        rotateOnAxis: (M = new X.Quaternion, function (e, t) {
          return M.setFromAxisAngle(e, t), this.quaternion.multiply(M), this
        }),
        rotateX: function () {
          var e = new X.Vector3(1, 0, 0);
          return function (t) {
            return this.rotateOnAxis(e, t)
          }
        }(),
        rotateY: function () {
          var e = new X.Vector3(0, 1, 0);
          return function (t) {
            return this.rotateOnAxis(e, t)
          }
        }(),
        rotateZ: function () {
          var e = new X.Vector3(0, 0, 1);
          return function (t) {
            return this.rotateOnAxis(e, t)
          }
        }(),
        translateOnAxis: function () {
          var e = new X.Vector3;
          return function (t, n) {
            return e.copy(t).applyQuaternion(this.quaternion), this.position.add(e.multiplyScalar(n)), this
          }
        }(),
        translate: function (e, t) {
          return X.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."), this.translateOnAxis(t, e)
        },
        translateX: function () {
          var e = new X.Vector3(1, 0, 0);
          return function (t) {
            return this.translateOnAxis(e, t)
          }
        }(),
        translateY: function () {
          var e = new X.Vector3(0, 1, 0);
          return function (t) {
            return this.translateOnAxis(e, t)
          }
        }(),
        translateZ: function () {
          var e = new X.Vector3(0, 0, 1);
          return function (t) {
            return this.translateOnAxis(e, t)
          }
        }(),
        localToWorld: function (e) {
          return e.applyMatrix4(this.matrixWorld)
        },
        worldToLocal: (S = new X.Matrix4, function (e) {
          return e.applyMatrix4(S.getInverse(this.matrixWorld))
        }),
        lookAt: function () {
          var e = new X.Matrix4;
          return function (t) {
            e.lookAt(t, this.position, this.up), this.quaternion.setFromRotationMatrix(e)
          }
        }(),
        add: function (e) {
          if (arguments.length > 1) {
            for (var t = 0; t < arguments.length; t++) this.add(arguments[t]);
            return this
          }
          return e === this ? (X.error("THREE.Object3D.add: object can't be added as a child of itself.", e), this) : (e instanceof X.Object3D ? (void 0 !== e.parent && e.parent.remove(e), e.parent = this, e.dispatchEvent({
            type: "added"
          }), this.children.push(e)) : X.error("THREE.Object3D.add: object not an instance of THREE.Object3D.", e), this)
        },
        remove: function (e) {
          if (arguments.length > 1)
            for (var t = 0; t < arguments.length; t++) this.remove(arguments[t]);
          var n = this.children.indexOf(e); - 1 !== n && (e.parent = void 0, e.dispatchEvent({
            type: "removed"
          }), this.children.splice(n, 1))
        },
        getChildByName: function (e) {
          return X.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."), this.getObjectByName(e)
        },
        getObjectById: function (e) {
          return this.getObjectByProperty("id", e)
        },
        getObjectByName: function (e) {
          return this.getObjectByProperty("name", e)
        },
        getObjectByProperty: function (e, t) {
          if (this[e] === t) return this;
          for (var n = 0, i = this.children.length; n < i; n++) {
            var r = this.children[n].getObjectByProperty(e, t);
            if (void 0 !== r) return r
          }
        },
        getWorldPosition: function (e) {
          var t = e || new X.Vector3;
          return this.updateMatrixWorld(!0), t.setFromMatrixPosition(this.matrixWorld)
        },
        getWorldQuaternion: (E = new X.Vector3, A = new X.Vector3, function (e) {
          var t = e || new X.Quaternion;
          return this.updateMatrixWorld(!0), this.matrixWorld.decompose(E, t, A), t
        }),
        getWorldRotation: function () {
          var e = new X.Quaternion;
          return function (t) {
            var n = t || new X.Euler;
            return this.getWorldQuaternion(e), n.setFromQuaternion(e, this.rotation.order, !1)
          }
        }(),
        getWorldScale: function () {
          var e = new X.Vector3,
            t = new X.Quaternion;
          return function (n) {
            var i = n || new X.Vector3;
            return this.updateMatrixWorld(!0), this.matrixWorld.decompose(e, t, i), i
          }
        }(),
        getWorldDirection: function () {
          var e = new X.Quaternion;
          return function (t) {
            var n = t || new X.Vector3;
            return this.getWorldQuaternion(e), n.set(0, 0, 1).applyQuaternion(e)
          }
        }(),
        raycast: function () {},
        traverse: function (e) {
          e(this);
          for (var t = 0, n = this.children.length; t < n; t++) this.children[t].traverse(e)
        },
        traverseVisible: function (e) {
          if (!1 !== this.visible) {
            e(this);
            for (var t = 0, n = this.children.length; t < n; t++) this.children[t].traverseVisible(e)
          }
        },
        traverseAncestors: function (e) {
          this.parent && (e(this.parent), this.parent.traverseAncestors(e))
        },
        updateMatrix: function () {
          this.matrix.compose(this.position, this.quaternion, this.scale), this.matrixWorldNeedsUpdate = !0
        },
        updateMatrixWorld: function (e) {
          !0 === this.matrixAutoUpdate && this.updateMatrix(), !0 !== this.matrixWorldNeedsUpdate && !0 !== e || (void 0 === this.parent ? this.matrixWorld.copy(this.matrix) : this.matrixWorld.multiplyMatrices(this.parent.matrixWorld, this.matrix), this.matrixWorldNeedsUpdate = !1, e = !0);
          for (var t = 0, n = this.children.length; t < n; t++) this.children[t].updateMatrixWorld(e)
        },
        toJSON: function () {
          var e = {
              metadata: {
                version: 4.3,
                type: "Object",
                generator: "ObjectExporter"
              }
            },
            t = {},
            n = {},
            i = function (t) {
              if (void 0 === e.materials && (e.materials = []), void 0 === n[t.uuid]) {
                var i = t.toJSON();
                delete i.metadata, n[t.uuid] = i, e.materials.push(i)
              }
              return t.uuid
            };
          return e.object = function n(r) {
            var o = {};
            if (o.uuid = r.uuid, o.type = r.type, "" !== r.name && (o.name = r.name), "{}" !== JSON.stringify(r.userData) && (o.userData = r.userData), !0 !== r.visible && (o.visible = r.visible), r instanceof X.PerspectiveCamera ? (o.fov = r.fov, o.aspect = r.aspect, o.near = r.near, o.far = r.far) : r instanceof X.OrthographicCamera ? (o.left = r.left, o.right = r.right, o.top = r.top, o.bottom = r.bottom, o.near = r.near, o.far = r.far) : r instanceof X.AmbientLight ? o.color = r.color.getHex() : r instanceof X.DirectionalLight ? (o.color = r.color.getHex(), o.intensity = r.intensity) : r instanceof X.PointLight ? (o.color = r.color.getHex(), o.intensity = r.intensity, o.distance = r.distance, o.decay = r.decay) : r instanceof X.SpotLight ? (o.color = r.color.getHex(), o.intensity = r.intensity, o.distance = r.distance, o.angle = r.angle, o.exponent = r.exponent, o.decay = r.decay) : r instanceof X.HemisphereLight ? (o.color = r.color.getHex(), o.groundColor = r.groundColor.getHex()) : r instanceof X.Mesh || r instanceof X.Line || r instanceof X.PointCloud ? (o.geometry = function (n) {
                if (void 0 === e.geometries && (e.geometries = []), void 0 === t[n.uuid]) {
                  var i = n.toJSON();
                  delete i.metadata, t[n.uuid] = i, e.geometries.push(i)
                }
                return n.uuid
              }(r.geometry), o.material = i(r.material), r instanceof X.Line && (o.mode = r.mode)) : r instanceof X.Sprite && (o.material = i(r.material)), o.matrix = r.matrix.toArray(), r.children.length > 0) {
              o.children = [];
              for (var a = 0; a < r.children.length; a++) o.children.push(n(r.children[a]))
            }
            return o
          }(this), e
        },
        clone: function (e, t) {
          if (void 0 === e && (e = new X.Object3D), void 0 === t && (t = !0), e.name = this.name, e.up.copy(this.up), e.position.copy(this.position), e.quaternion.copy(this.quaternion), e.scale.copy(this.scale), e.rotationAutoUpdate = this.rotationAutoUpdate, e.matrix.copy(this.matrix), e.matrixWorld.copy(this.matrixWorld), e.matrixAutoUpdate = this.matrixAutoUpdate, e.matrixWorldNeedsUpdate = this.matrixWorldNeedsUpdate, e.visible = this.visible, e.castShadow = this.castShadow, e.receiveShadow = this.receiveShadow, e.frustumCulled = this.frustumCulled, e.userData = JSON.parse(JSON.stringify(this.userData)), !0 === t)
            for (var n = 0; n < this.children.length; n++) {
              var i = this.children[n];
              e.add(i.clone())
            }
          return e
        }
      }, X.EventDispatcher.prototype.apply(X.Object3D.prototype), X.Object3DIdCount = 0, X.Face3 = function (e, t, n, i, r, o) {
        this.a = e, this.b = t, this.c = n, this.normal = i instanceof X.Vector3 ? i : new X.Vector3, this.vertexNormals = i instanceof Array ? i : [], this.color = r instanceof X.Color ? r : new X.Color, this.vertexColors = r instanceof Array ? r : [], this.vertexTangents = [], this.materialIndex = void 0 !== o ? o : 0
      }, X.Face3.prototype = {
        constructor: X.Face3,
        clone: function () {
          var e = new X.Face3(this.a, this.b, this.c);
          e.normal.copy(this.normal), e.color.copy(this.color), e.materialIndex = this.materialIndex;
          for (var t = 0, n = this.vertexNormals.length; t < n; t++) e.vertexNormals[t] = this.vertexNormals[t].clone();
          for (t = 0, n = this.vertexColors.length; t < n; t++) e.vertexColors[t] = this.vertexColors[t].clone();
          for (t = 0, n = this.vertexTangents.length; t < n; t++) e.vertexTangents[t] = this.vertexTangents[t].clone();
          return e
        }
      }, X.Face4 = function (e, t, n, i, r, o, a) {
        return X.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead."), new X.Face3(e, t, n, r, o, a)
      }, X.BufferAttribute = function (e, t) {
        this.array = e, this.itemSize = t, this.needsUpdate = !1
      }, X.BufferAttribute.prototype = {
        constructor: X.BufferAttribute,
        get length() {
          return this.array.length
        },
        copyAt: function (e, t, n) {
          e *= this.itemSize, n *= t.itemSize;
          for (var i = 0, r = this.itemSize; i < r; i++) this.array[e + i] = t.array[n + i];
          return this
        },
        set: function (e, t) {
          return void 0 === t && (t = 0), this.array.set(e, t), this
        },
        setX: function (e, t) {
          return this.array[e * this.itemSize] = t, this
        },
        setY: function (e, t) {
          return this.array[e * this.itemSize + 1] = t, this
        },
        setZ: function (e, t) {
          return this.array[e * this.itemSize + 2] = t, this
        },
        setXY: function (e, t, n) {
          return e *= this.itemSize, this.array[e] = t, this.array[e + 1] = n, this
        },
        setXYZ: function (e, t, n, i) {
          return e *= this.itemSize, this.array[e] = t, this.array[e + 1] = n, this.array[e + 2] = i, this
        },
        setXYZW: function (e, t, n, i, r) {
          return e *= this.itemSize, this.array[e] = t, this.array[e + 1] = n, this.array[e + 2] = i, this.array[e + 3] = r, this
        },
        clone: function () {
          return new X.BufferAttribute(new this.array.constructor(this.array), this.itemSize)
        }
      }, X.Int8Attribute = function (e, t) {
        return X.warn("THREE.Int8Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead."), new X.BufferAttribute(e, t)
      }, X.Uint8Attribute = function (e, t) {
        return X.warn("THREE.Uint8Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead."), new X.BufferAttribute(e, t)
      }, X.Uint8ClampedAttribute = function (e, t) {
        return X.warn("THREE.Uint8ClampedAttribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead."), new X.BufferAttribute(e, t)
      }, X.Int16Attribute = function (e, t) {
        return X.warn("THREE.Int16Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead."), new X.BufferAttribute(e, t)
      }, X.Uint16Attribute = function (e, t) {
        return X.warn("THREE.Uint16Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead."), new X.BufferAttribute(e, t)
      }, X.Int32Attribute = function (e, t) {
        return X.warn("THREE.Int32Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead."), new X.BufferAttribute(e, t)
      }, X.Uint32Attribute = function (e, t) {
        return X.warn("THREE.Uint32Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead."), new X.BufferAttribute(e, t)
      }, X.Float32Attribute = function (e, t) {
        return X.warn("THREE.Float32Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead."), new X.BufferAttribute(e, t)
      }, X.Float64Attribute = function (e, t) {
        return X.warn("THREE.Float64Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead."), new X.BufferAttribute(e, t)
      }, X.DynamicBufferAttribute = function (e, t) {
        X.BufferAttribute.call(this, e, t), this.updateRange = {
          offset: 0,
          count: -1
        }
      }, X.DynamicBufferAttribute.prototype = Object.create(X.BufferAttribute.prototype), X.DynamicBufferAttribute.prototype.constructor = X.DynamicBufferAttribute, X.DynamicBufferAttribute.prototype.clone = function () {
        return new X.DynamicBufferAttribute(new this.array.constructor(this.array), this.itemSize)
      }, X.BufferGeometry = function () {
        Object.defineProperty(this, "id", {
          value: X.GeometryIdCount++
        }), this.uuid = X.Math.generateUUID(), this.name = "", this.type = "BufferGeometry", this.attributes = {}, this.attributesKeys = [], this.drawcalls = [], this.offsets = this.drawcalls, this.boundingBox = null, this.boundingSphere = null
      }, X.BufferGeometry.prototype = {
        constructor: X.BufferGeometry,
        addAttribute: function (e, t) {
          if (t instanceof X.BufferAttribute == !1) return X.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."), void(this.attributes[e] = {
            array: arguments[1],
            itemSize: arguments[2]
          });
          this.attributes[e] = t, this.attributesKeys = Object.keys(this.attributes)
        },
        getAttribute: function (e) {
          return this.attributes[e]
        },
        addDrawCall: function (e, t, n) {
          this.drawcalls.push({
            start: e,
            count: t,
            index: void 0 !== n ? n : 0
          })
        },
        applyMatrix: function (e) {
          var t = this.attributes.position;
          void 0 !== t && (e.applyToVector3Array(t.array), t.needsUpdate = !0);
          var n = this.attributes.normal;
          void 0 !== n && ((new X.Matrix3).getNormalMatrix(e).applyToVector3Array(n.array), n.needsUpdate = !0);
          null !== this.boundingBox && this.computeBoundingBox(), null !== this.boundingSphere && this.computeBoundingSphere()
        },
        center: function () {
          this.computeBoundingBox();
          var e = this.boundingBox.center().negate();
          return this.applyMatrix((new X.Matrix4).setPosition(e)), e
        },
        fromGeometry: function (e, t) {
          t = t || {
            vertexColors: X.NoColors
          };
          var n = e.vertices,
            i = e.faces,
            r = e.faceVertexUvs,
            o = t.vertexColors,
            a = r[0].length > 0,
            s = 3 == i[0].vertexNormals.length,
            l = new Float32Array(3 * i.length * 3);
          this.addAttribute("position", new X.BufferAttribute(l, 3));
          var c = new Float32Array(3 * i.length * 3);
          if (this.addAttribute("normal", new X.BufferAttribute(c, 3)), o !== X.NoColors) {
            var u = new Float32Array(3 * i.length * 3);
            this.addAttribute("color", new X.BufferAttribute(u, 3))
          }
          if (!0 === a) {
            var h = new Float32Array(3 * i.length * 2);
            this.addAttribute("uv", new X.BufferAttribute(h, 2))
          }
          for (var d = 0, f = 0, p = 0; d < i.length; d++, f += 6, p += 9) {
            var m = i[d],
              g = n[m.a],
              v = n[m.b],
              y = n[m.c];
            if (l[p] = g.x, l[p + 1] = g.y, l[p + 2] = g.z, l[p + 3] = v.x, l[p + 4] = v.y, l[p + 5] = v.z, l[p + 6] = y.x, l[p + 7] = y.y, l[p + 8] = y.z, !0 === s) {
              var b = m.vertexNormals[0],
                _ = m.vertexNormals[1],
                x = m.vertexNormals[2];
              c[p] = b.x, c[p + 1] = b.y, c[p + 2] = b.z, c[p + 3] = _.x, c[p + 4] = _.y, c[p + 5] = _.z, c[p + 6] = x.x, c[p + 7] = x.y, c[p + 8] = x.z
            } else {
              var w = m.normal;
              c[p] = w.x, c[p + 1] = w.y, c[p + 2] = w.z, c[p + 3] = w.x, c[p + 4] = w.y, c[p + 5] = w.z, c[p + 6] = w.x, c[p + 7] = w.y, c[p + 8] = w.z
            }
            if (o === X.FaceColors) {
              var E = m.color;
              u[p] = E.r, u[p + 1] = E.g, u[p + 2] = E.b, u[p + 3] = E.r, u[p + 4] = E.g, u[p + 5] = E.b, u[p + 6] = E.r, u[p + 7] = E.g, u[p + 8] = E.b
            } else if (o === X.VertexColors) {
              var A = m.vertexColors[0],
                S = m.vertexColors[1],
                M = m.vertexColors[2];
              u[p] = A.r, u[p + 1] = A.g, u[p + 2] = A.b, u[p + 3] = S.r, u[p + 4] = S.g, u[p + 5] = S.b, u[p + 6] = M.r, u[p + 7] = M.g, u[p + 8] = M.b
            }
            if (!0 === a) {
              var T = r[0][d][0],
                C = r[0][d][1],
                P = r[0][d][2];
              h[f] = T.x, h[f + 1] = T.y, h[f + 2] = C.x, h[f + 3] = C.y, h[f + 4] = P.x, h[f + 5] = P.y
            }
          }
          return this.computeBoundingSphere(), this
        },
        computeBoundingBox: function () {
          var e = new X.Vector3;
          return function () {
            null === this.boundingBox && (this.boundingBox = new X.Box3);
            var t = this.attributes.position.array;
            if (t) {
              var n = this.boundingBox;
              n.makeEmpty();
              for (var i = 0, r = t.length; i < r; i += 3) e.set(t[i], t[i + 1], t[i + 2]), n.expandByPoint(e)
            }
            void 0 !== t && 0 !== t.length || (this.boundingBox.min.set(0, 0, 0), this.boundingBox.max.set(0, 0, 0)), (isNaN(this.boundingBox.min.x) || isNaN(this.boundingBox.min.y) || isNaN(this.boundingBox.min.z)) && X.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.')
          }
        }(),
        computeBoundingSphere: function () {
          var e = new X.Box3,
            t = new X.Vector3;
          return function () {
            null === this.boundingSphere && (this.boundingSphere = new X.Sphere);
            var n = this.attributes.position.array;
            if (n) {
              e.makeEmpty();
              for (var i = this.boundingSphere.center, r = 0, o = n.length; r < o; r += 3) t.set(n[r], n[r + 1], n[r + 2]), e.expandByPoint(t);
              e.center(i);
              var a = 0;
              for (r = 0, o = n.length; r < o; r += 3) t.set(n[r], n[r + 1], n[r + 2]), a = Math.max(a, i.distanceToSquared(t));
              this.boundingSphere.radius = Math.sqrt(a), isNaN(this.boundingSphere.radius) && X.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.')
            }
          }
        }(),
        computeFaceNormals: function () {},
        computeVertexNormals: function () {
          var e = this.attributes;
          if (e.position) {
            var t = e.position.array;
            if (void 0 === e.normal) this.addAttribute("normal", new X.BufferAttribute(new Float32Array(t.length), 3));
            else
              for (var n = 0, i = (s = e.normal.array).length; n < i; n++) s[n] = 0;
            var r, o, a, s = e.normal.array,
              l = new X.Vector3,
              c = new X.Vector3,
              u = new X.Vector3,
              h = new X.Vector3,
              d = new X.Vector3;
            if (e.index)
              for (var f = e.index.array, p = this.offsets.length > 0 ? this.offsets : [{
                  start: 0,
                  count: f.length,
                  index: 0
                }], m = 0, g = p.length; m < g; ++m) {
                var v = p[m].start,
                  y = p[m].count,
                  b = p[m].index;
                for (n = v, i = v + y; n < i; n += 3) r = 3 * (b + f[n]), o = 3 * (b + f[n + 1]), a = 3 * (b + f[n + 2]), l.fromArray(t, r), c.fromArray(t, o), u.fromArray(t, a), h.subVectors(u, c), d.subVectors(l, c), h.cross(d), s[r] += h.x, s[r + 1] += h.y, s[r + 2] += h.z, s[o] += h.x, s[o + 1] += h.y, s[o + 2] += h.z, s[a] += h.x, s[a + 1] += h.y, s[a + 2] += h.z
              } else
                for (n = 0, i = t.length; n < i; n += 9) l.fromArray(t, n), c.fromArray(t, n + 3), u.fromArray(t, n + 6), h.subVectors(u, c), d.subVectors(l, c), h.cross(d), s[n] = h.x, s[n + 1] = h.y, s[n + 2] = h.z, s[n + 3] = h.x, s[n + 4] = h.y, s[n + 5] = h.z, s[n + 6] = h.x, s[n + 7] = h.y, s[n + 8] = h.z;
            this.normalizeNormals(), e.normal.needsUpdate = !0
          }
        },
        computeTangents: function () {
          if (void 0 !== this.attributes.index && void 0 !== this.attributes.position && void 0 !== this.attributes.normal && void 0 !== this.attributes.uv) {
            var e = this.attributes.index.array,
              t = this.attributes.position.array,
              n = this.attributes.normal.array,
              i = this.attributes.uv.array,
              r = t.length / 3;
            void 0 === this.attributes.tangent && this.addAttribute("tangent", new X.BufferAttribute(new Float32Array(4 * r), 4));
            for (var o = this.attributes.tangent.array, a = [], s = [], l = 0; l < r; l++) a[l] = new X.Vector3, s[l] = new X.Vector3;
            var c, u, h, d, f, p, m, g, v, y, b, _, x, w, E, A, S, M, T = new X.Vector3,
              C = new X.Vector3,
              P = new X.Vector3,
              L = new X.Vector2,
              D = new X.Vector2,
              I = new X.Vector2,
              R = new X.Vector3,
              O = new X.Vector3;
            0 === this.drawcalls.length && this.addDrawCall(0, e.length, 0);
            var k, N, F, U = this.drawcalls;
            for (w = 0, E = U.length; w < E; ++w) {
              var V = U[w].start,
                B = U[w].count,
                z = U[w].index;
              for (_ = V, x = V + B; _ < x; _ += 3) A = z + e[_], S = z + e[_ + 1], M = z + e[_ + 2], k = A, N = S, F = M, T.fromArray(t, 3 * k), C.fromArray(t, 3 * N), P.fromArray(t, 3 * F), L.fromArray(i, 2 * k), D.fromArray(i, 2 * N), I.fromArray(i, 2 * F), c = C.x - T.x, u = P.x - T.x, h = C.y - T.y, d = P.y - T.y, f = C.z - T.z, p = P.z - T.z, m = D.x - L.x, g = I.x - L.x, v = D.y - L.y, y = I.y - L.y, b = 1 / (m * y - g * v), R.set((y * c - v * u) * b, (y * h - v * d) * b, (y * f - v * p) * b), O.set((m * u - g * c) * b, (m * d - g * h) * b, (m * p - g * f) * b), a[k].add(R), a[N].add(R), a[F].add(R), s[k].add(O), s[N].add(O), s[F].add(O)
            }
            var G, H, W, j = new X.Vector3,
              q = new X.Vector3,
              Y = new X.Vector3,
              K = new X.Vector3;
            for (w = 0, E = U.length; w < E; ++w) {
              V = U[w].start, B = U[w].count, z = U[w].index;
              for (_ = V, x = V + B; _ < x; _ += 3) A = z + e[_], S = z + e[_ + 1], M = z + e[_ + 2], Q(A), Q(S), Q(M)
            }
          } else X.warn("THREE.BufferGeometry: Missing required attributes (index, position, normal or uv) in BufferGeometry.computeTangents()");

          function Q(e) {
            Y.fromArray(n, 3 * e), K.copy(Y), H = a[e], j.copy(H), j.sub(Y.multiplyScalar(Y.dot(H))).normalize(), q.crossVectors(K, H), W = q.dot(s[e]), G = W < 0 ? -1 : 1, o[4 * e] = j.x, o[4 * e + 1] = j.y, o[4 * e + 2] = j.z, o[4 * e + 3] = G
          }
        },
        computeOffsets: function (e) {
          void 0 === e && (e = 65535);
          for (var t = this.attributes.index.array, n = this.attributes.position.array, i = t.length / 3, r = new Uint16Array(t.length), o = 0, a = 0, s = [{
              start: 0,
              count: 0,
              index: 0
            }], l = s[0], c = 0, u = new Int32Array(6), h = new Int32Array(n.length), d = new Int32Array(n.length), f = 0; f < n.length; f++) h[f] = -1, d[f] = -1;
          for (var p = 0; p < i; p++) {
            c = 0;
            for (var m = 0; m < 3; m++) {
              -1 == h[b = t[3 * p + m]] ? (u[2 * m] = b, u[2 * m + 1] = -1, c++) : h[b] < l.index ? (u[2 * m] = b, u[2 * m + 1] = -1) : (u[2 * m] = b, u[2 * m + 1] = h[b])
            }
            if (a + c > l.index + e) {
              var g = {
                start: o,
                count: 0,
                index: a
              };
              s.push(g), l = g;
              for (var v = 0; v < 6; v += 2) {
                (y = u[v + 1]) > -1 && y < l.index && (u[v + 1] = -1)
              }
            }
            for (v = 0; v < 6; v += 2) {
              var y, b = u[v]; - 1 === (y = u[v + 1]) && (y = a++), h[b] = y, d[y] = b, r[o++] = y - l.index, l.count++
            }
          }
          return this.reorderBuffers(r, d, a), this.offsets = s, this.drawcalls = s, s
        },
        merge: function (e, t) {
          if (e instanceof X.BufferGeometry != !1) {
            void 0 === t && (t = 0);
            var n = this.attributes;
            for (var i in n)
              if (void 0 !== e.attributes[i])
                for (var r = n[i].array, o = e.attributes[i], a = o.array, s = 0, l = o.itemSize * t; s < a.length; s++, l++) r[l] = a[s];
            return this
          }
          X.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.", e)
        },
        normalizeNormals: function () {
          for (var e, t, n, i, r = this.attributes.normal.array, o = 0, a = r.length; o < a; o += 3) e = r[o], t = r[o + 1], n = r[o + 2], i = 1 / Math.sqrt(e * e + t * t + n * n), r[o] *= i, r[o + 1] *= i, r[o + 2] *= i
        },
        reorderBuffers: function (e, t, n) {
          var i = {};
          for (var r in this.attributes)
            if ("index" != r) {
              var o = this.attributes[r].array;
              i[r] = new o.constructor(this.attributes[r].itemSize * n)
            } for (var a = 0; a < n; a++) {
            var s = t[a];
            for (var r in this.attributes)
              if ("index" != r)
                for (var l = this.attributes[r].array, c = this.attributes[r].itemSize, u = i[r], h = 0; h < c; h++) u[a * c + h] = l[s * c + h]
          }
          for (var r in this.attributes.index.array = e, this.attributes) "index" != r && (this.attributes[r].array = i[r], this.attributes[r].numItems = this.attributes[r].itemSize * n)
        },
        toJSON: function () {
          var e = {
              metadata: {
                version: 4,
                type: "BufferGeometry",
                generator: "BufferGeometryExporter"
              },
              uuid: this.uuid,
              type: this.type,
              data: {
                attributes: {}
              }
            },
            t = this.attributes,
            n = this.offsets,
            i = this.boundingSphere;
          for (var r in t) {
            var o = t[r],
              a = Array.prototype.slice.call(o.array);
            e.data.attributes[r] = {
              itemSize: o.itemSize,
              type: o.array.constructor.name,
              array: a
            }
          }
          return n.length > 0 && (e.data.offsets = JSON.parse(JSON.stringify(n))), null !== i && (e.data.boundingSphere = {
            center: i.center.toArray(),
            radius: i.radius
          }), e
        },
        clone: function () {
          var e = new X.BufferGeometry;
          for (var t in this.attributes) {
            var n = this.attributes[t];
            e.addAttribute(t, n.clone())
          }
          for (var i = 0, r = this.offsets.length; i < r; i++) {
            var o = this.offsets[i];
            e.offsets.push({
              start: o.start,
              index: o.index,
              count: o.count
            })
          }
          return e
        },
        dispose: function () {
          this.dispatchEvent({
            type: "dispose"
          })
        }
      }, X.EventDispatcher.prototype.apply(X.BufferGeometry.prototype), X.Geometry = function () {
        Object.defineProperty(this, "id", {
          value: X.GeometryIdCount++
        }), this.uuid = X.Math.generateUUID(), this.name = "", this.type = "Geometry", this.vertices = [], this.colors = [], this.faces = [], this.faceVertexUvs = [
          []
        ], this.morphTargets = [], this.morphColors = [], this.morphNormals = [], this.skinWeights = [], this.skinIndices = [], this.lineDistances = [], this.boundingBox = null, this.boundingSphere = null, this.hasTangents = !1, this.dynamic = !0, this.verticesNeedUpdate = !1, this.elementsNeedUpdate = !1, this.uvsNeedUpdate = !1, this.normalsNeedUpdate = !1, this.tangentsNeedUpdate = !1, this.colorsNeedUpdate = !1, this.lineDistancesNeedUpdate = !1, this.groupsNeedUpdate = !1
      }, X.Geometry.prototype = {
        constructor: X.Geometry,
        applyMatrix: function (e) {
          for (var t = (new X.Matrix3).getNormalMatrix(e), n = 0, i = this.vertices.length; n < i; n++) {
            this.vertices[n].applyMatrix4(e)
          }
          for (n = 0, i = this.faces.length; n < i; n++) {
            var r = this.faces[n];
            r.normal.applyMatrix3(t).normalize();
            for (var o = 0, a = r.vertexNormals.length; o < a; o++) r.vertexNormals[o].applyMatrix3(t).normalize()
          }
          null !== this.boundingBox && this.computeBoundingBox(), null !== this.boundingSphere && this.computeBoundingSphere(), this.verticesNeedUpdate = !0, this.normalsNeedUpdate = !0
        },
        fromBufferGeometry: function (e) {
          for (var t = this, n = e.attributes, i = n.position.array, r = void 0 !== n.index ? n.index.array : void 0, o = void 0 !== n.normal ? n.normal.array : void 0, a = void 0 !== n.color ? n.color.array : void 0, s = void 0 !== n.uv ? n.uv.array : void 0, l = [], c = [], u = 0, h = 0; u < i.length; u += 3, h += 2) t.vertices.push(new X.Vector3(i[u], i[u + 1], i[u + 2])), void 0 !== o && l.push(new X.Vector3(o[u], o[u + 1], o[u + 2])), void 0 !== a && t.colors.push(new X.Color(a[u], a[u + 1], a[u + 2])), void 0 !== s && c.push(new X.Vector2(s[h], s[h + 1]));
          var d = function (e, n, i) {
            var r = void 0 !== o ? [l[e].clone(), l[n].clone(), l[i].clone()] : [],
              u = void 0 !== a ? [t.colors[e].clone(), t.colors[n].clone(), t.colors[i].clone()] : [];
            t.faces.push(new X.Face3(e, n, i, r, u)), void 0 !== s && t.faceVertexUvs[0].push([c[e].clone(), c[n].clone(), c[i].clone()])
          };
          if (void 0 !== r) {
            var f = e.drawcalls;
            if (f.length > 0)
              for (u = 0; u < f.length; u++)
                for (var p = f[u], m = p.start, g = p.count, v = p.index, y = (h = m, m + g); h < y; h += 3) d(v + r[h], v + r[h + 1], v + r[h + 2]);
            else
              for (u = 0; u < r.length; u += 3) d(r[u], r[u + 1], r[u + 2])
          } else
            for (u = 0; u < i.length / 3; u += 3) d(u, u + 1, u + 2);
          return this.computeFaceNormals(), null !== e.boundingBox && (this.boundingBox = e.boundingBox.clone()), null !== e.boundingSphere && (this.boundingSphere = e.boundingSphere.clone()), this
        },
        center: function () {
          this.computeBoundingBox();
          var e = this.boundingBox.center().negate();
          return this.applyMatrix((new X.Matrix4).setPosition(e)), e
        },
        computeFaceNormals: function () {
          for (var e = new X.Vector3, t = new X.Vector3, n = 0, i = this.faces.length; n < i; n++) {
            var r = this.faces[n],
              o = this.vertices[r.a],
              a = this.vertices[r.b],
              s = this.vertices[r.c];
            e.subVectors(s, a), t.subVectors(o, a), e.cross(t), e.normalize(), r.normal.copy(e)
          }
        },
        computeVertexNormals: function (e) {
          var t, n, i, r, o, a;
          for (a = new Array(this.vertices.length), t = 0, n = this.vertices.length; t < n; t++) a[t] = new X.Vector3;
          if (e) {
            var s, l, c, u = new X.Vector3,
              h = new X.Vector3;
            for (i = 0, r = this.faces.length; i < r; i++) o = this.faces[i], s = this.vertices[o.a], l = this.vertices[o.b], c = this.vertices[o.c], u.subVectors(c, l), h.subVectors(s, l), u.cross(h), a[o.a].add(u), a[o.b].add(u), a[o.c].add(u)
          } else
            for (i = 0, r = this.faces.length; i < r; i++) a[(o = this.faces[i]).a].add(o.normal), a[o.b].add(o.normal), a[o.c].add(o.normal);
          for (t = 0, n = this.vertices.length; t < n; t++) a[t].normalize();
          for (i = 0, r = this.faces.length; i < r; i++)(o = this.faces[i]).vertexNormals[0] = a[o.a].clone(), o.vertexNormals[1] = a[o.b].clone(), o.vertexNormals[2] = a[o.c].clone()
        },
        computeMorphNormals: function () {
          var e, t, n, i, r;
          for (n = 0, i = this.faces.length; n < i; n++)
            for ((r = this.faces[n]).__originalFaceNormal ? r.__originalFaceNormal.copy(r.normal) : r.__originalFaceNormal = r.normal.clone(), r.__originalVertexNormals || (r.__originalVertexNormals = []), e = 0, t = r.vertexNormals.length; e < t; e++) r.__originalVertexNormals[e] ? r.__originalVertexNormals[e].copy(r.vertexNormals[e]) : r.__originalVertexNormals[e] = r.vertexNormals[e].clone();
          var o = new X.Geometry;
          for (o.faces = this.faces, e = 0, t = this.morphTargets.length; e < t; e++) {
            if (!this.morphNormals[e]) {
              this.morphNormals[e] = {}, this.morphNormals[e].faceNormals = [], this.morphNormals[e].vertexNormals = [];
              var a = this.morphNormals[e].faceNormals,
                s = this.morphNormals[e].vertexNormals;
              for (n = 0, i = this.faces.length; n < i; n++) l = new X.Vector3, c = {
                a: new X.Vector3,
                b: new X.Vector3,
                c: new X.Vector3
              }, a.push(l), s.push(c)
            }
            var l, c, u = this.morphNormals[e];
            for (o.vertices = this.morphTargets[e].vertices, o.computeFaceNormals(), o.computeVertexNormals(), n = 0, i = this.faces.length; n < i; n++) r = this.faces[n], l = u.faceNormals[n], c = u.vertexNormals[n], l.copy(r.normal), c.a.copy(r.vertexNormals[0]), c.b.copy(r.vertexNormals[1]), c.c.copy(r.vertexNormals[2])
          }
          for (n = 0, i = this.faces.length; n < i; n++)(r = this.faces[n]).normal = r.__originalFaceNormal, r.vertexNormals = r.__originalVertexNormals
        },
        computeTangents: function () {
          var e, t, n, i, r, o, a, s, l, c, u, h, d, f, p, m, g, v, y, b, _, x, w, E, A, S, M, T, C, P, L, D, I, R, O = [],
            k = [],
            N = new X.Vector3,
            F = new X.Vector3,
            U = new X.Vector3,
            V = new X.Vector3,
            B = new X.Vector3;
          for (n = 0, i = this.vertices.length; n < i; n++) O[n] = new X.Vector3, k[n] = new X.Vector3;
          for (e = 0, t = this.faces.length; e < t; e++) a = this.faces[e], s = this.faceVertexUvs[0][e], T = this, C = a.a, P = a.b, L = a.c, D = 0, I = 1, R = 2, l = T.vertices[C], c = T.vertices[P], u = T.vertices[L], h = s[D], d = s[I], f = s[R], p = c.x - l.x, m = u.x - l.x, g = c.y - l.y, v = u.y - l.y, y = c.z - l.z, b = u.z - l.z, _ = d.x - h.x, x = f.x - h.x, w = d.y - h.y, E = f.y - h.y, A = 1 / (_ * E - x * w), N.set((E * p - w * m) * A, (E * g - w * v) * A, (E * y - w * b) * A), F.set((_ * m - x * p) * A, (_ * v - x * g) * A, (_ * b - x * y) * A), O[C].add(N), O[P].add(N), O[L].add(N), k[C].add(F), k[P].add(F), k[L].add(F);
          var z = ["a", "b", "c", "d"];
          for (e = 0, t = this.faces.length; e < t; e++)
            for (a = this.faces[e], r = 0; r < Math.min(a.vertexNormals.length, 3); r++) B.copy(a.vertexNormals[r]), o = a[z[r]], S = O[o], U.copy(S), U.sub(B.multiplyScalar(B.dot(S))).normalize(), V.crossVectors(a.vertexNormals[r], S), M = V.dot(k[o]) < 0 ? -1 : 1, a.vertexTangents[r] = new X.Vector4(U.x, U.y, U.z, M);
          this.hasTangents = !0
        },
        computeLineDistances: function () {
          for (var e = 0, t = this.vertices, n = 0, i = t.length; n < i; n++) n > 0 && (e += t[n].distanceTo(t[n - 1])), this.lineDistances[n] = e
        },
        computeBoundingBox: function () {
          null === this.boundingBox && (this.boundingBox = new X.Box3), this.boundingBox.setFromPoints(this.vertices)
        },
        computeBoundingSphere: function () {
          null === this.boundingSphere && (this.boundingSphere = new X.Sphere), this.boundingSphere.setFromPoints(this.vertices)
        },
        merge: function (e, t, n) {
          if (e instanceof X.Geometry != !1) {
            var i, r = this.vertices.length,
              o = this.vertices,
              a = e.vertices,
              s = this.faces,
              l = e.faces,
              c = this.faceVertexUvs[0],
              u = e.faceVertexUvs[0];
            void 0 === n && (n = 0), void 0 !== t && (i = (new X.Matrix3).getNormalMatrix(t));
            for (var h = 0, d = a.length; h < d; h++) {
              var f = a[h].clone();
              void 0 !== t && f.applyMatrix4(t), o.push(f)
            }
            for (h = 0, d = l.length; h < d; h++) {
              var p, m, g, v = l[h],
                y = v.vertexNormals,
                b = v.vertexColors;
              (p = new X.Face3(v.a + r, v.b + r, v.c + r)).normal.copy(v.normal), void 0 !== i && p.normal.applyMatrix3(i).normalize();
              for (var _ = 0, x = y.length; _ < x; _++) m = y[_].clone(), void 0 !== i && m.applyMatrix3(i).normalize(), p.vertexNormals.push(m);
              p.color.copy(v.color);
              for (_ = 0, x = b.length; _ < x; _++) g = b[_], p.vertexColors.push(g.clone());
              p.materialIndex = v.materialIndex + n, s.push(p)
            }
            for (h = 0, d = u.length; h < d; h++) {
              var w = u[h],
                E = [];
              if (void 0 !== w) {
                for (_ = 0, x = w.length; _ < x; _++) E.push(w[_].clone());
                c.push(E)
              }
            }
          } else X.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.", e)
        },
        mergeMesh: function (e) {
          e instanceof X.Mesh != !1 ? (e.matrixAutoUpdate && e.updateMatrix(), this.merge(e.geometry, e.matrix)) : X.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.", e)
        },
        mergeVertices: function () {
          var e, t, n, i, r, o, a, s, l = {},
            c = [],
            u = [],
            h = Math.pow(10, 4);
          for (n = 0, i = this.vertices.length; n < i; n++) e = this.vertices[n], void 0 === l[t = Math.round(e.x * h) + "_" + Math.round(e.y * h) + "_" + Math.round(e.z * h)] ? (l[t] = n, c.push(this.vertices[n]), u[n] = c.length - 1) : u[n] = u[l[t]];
          var d = [];
          for (n = 0, i = this.faces.length; n < i; n++) {
            (r = this.faces[n]).a = u[r.a], r.b = u[r.b], r.c = u[r.c], o = [r.a, r.b, r.c];
            for (var f = 0; f < 3; f++)
              if (o[f] == o[(f + 1) % 3]) {
                f,
                d.push(n);
                break
              }
          }
          for (n = d.length - 1; n >= 0; n--) {
            var p = d[n];
            for (this.faces.splice(p, 1), a = 0, s = this.faceVertexUvs.length; a < s; a++) this.faceVertexUvs[a].splice(p, 1)
          }
          var m = this.vertices.length - c.length;
          return this.vertices = c, m
        },
        toJSON: function () {
          var e = {
            metadata: {
              version: 4,
              type: "BufferGeometry",
              generator: "BufferGeometryExporter"
            },
            uuid: this.uuid,
            type: this.type
          };
          if ("" !== this.name && (e.name = this.name), void 0 !== this.parameters) {
            var t = this.parameters;
            for (var n in t) void 0 !== t[n] && (e[n] = t[n]);
            return e
          }
          for (var i = [], r = 0; r < this.vertices.length; r++) {
            var o = this.vertices[r];
            i.push(o.x, o.y, o.z)
          }
          var a = [],
            s = [],
            l = {},
            c = [],
            u = {},
            h = [],
            d = {};
          for (r = 0; r < this.faces.length; r++) {
            var f = this.faces[r],
              p = void 0 !== this.faceVertexUvs[0][r],
              m = f.normal.length() > 0,
              g = f.vertexNormals.length > 0,
              v = 1 !== f.color.r || 1 !== f.color.g || 1 !== f.color.b,
              y = f.vertexColors.length > 0,
              b = 0;
            if (b = E(b, 0, 0), b = E(b, 1, !1), b = E(b, 2, !1), b = E(b, 3, p), b = E(b, 4, m), b = E(b, 5, g), b = E(b, 6, v), b = E(b, 7, y), a.push(b), a.push(f.a, f.b, f.c), p) {
              var _ = this.faceVertexUvs[0][r];
              a.push(M(_[0]), M(_[1]), M(_[2]))
            }
            if (m && a.push(A(f.normal)), g) {
              var x = f.vertexNormals;
              a.push(A(x[0]), A(x[1]), A(x[2]))
            }
            if (v && a.push(S(f.color)), y) {
              var w = f.vertexColors;
              a.push(S(w[0]), S(w[1]), S(w[2]))
            }
          }

          function E(e, t, n) {
            return n ? e | 1 << t : e & ~(1 << t)
          }

          function A(e) {
            var t = e.x.toString() + e.y.toString() + e.z.toString();
            return void 0 !== l[t] || (l[t] = s.length / 3, s.push(e.x, e.y, e.z)), l[t]
          }

          function S(e) {
            var t = e.r.toString() + e.g.toString() + e.b.toString();
            return void 0 !== u[t] || (u[t] = c.length, c.push(e.getHex())), u[t]
          }

          function M(e) {
            var t = e.x.toString() + e.y.toString();
            return void 0 !== d[t] || (d[t] = h.length / 2, h.push(e.x, e.y)), d[t]
          }
          return e.data = {}, e.data.vertices = i, e.data.normals = s, c.length > 0 && (e.data.colors = c), h.length > 0 && (e.data.uvs = [h]), e.data.faces = a, e
        },
        clone: function () {
          for (var e = new X.Geometry, t = this.vertices, n = 0, i = t.length; n < i; n++) e.vertices.push(t[n].clone());
          var r = this.faces;
          for (n = 0, i = r.length; n < i; n++) e.faces.push(r[n].clone());
          for (n = 0, i = this.faceVertexUvs.length; n < i; n++) {
            var o = this.faceVertexUvs[n];
            void 0 === e.faceVertexUvs[n] && (e.faceVertexUvs[n] = []);
            for (var a = 0, s = o.length; a < s; a++) {
              for (var l = o[a], c = [], u = 0, h = l.length; u < h; u++) {
                var d = l[u];
                c.push(d.clone())
              }
              e.faceVertexUvs[n].push(c)
            }
          }
          return e
        },
        dispose: function () {
          this.dispatchEvent({
            type: "dispose"
          })
        }
      }, X.EventDispatcher.prototype.apply(X.Geometry.prototype), X.GeometryIdCount = 0, X.Camera = function () {
        X.Object3D.call(this), this.type = "Camera", this.matrixWorldInverse = new X.Matrix4, this.projectionMatrix = new X.Matrix4
      }, X.Camera.prototype = Object.create(X.Object3D.prototype), X.Camera.prototype.constructor = X.Camera, X.Camera.prototype.getWorldDirection = function () {
        var e = new X.Quaternion;
        return function (t) {
          var n = t || new X.Vector3;
          return this.getWorldQuaternion(e), n.set(0, 0, -1).applyQuaternion(e)
        }
      }(), X.Camera.prototype.lookAt = function () {
        var e = new X.Matrix4;
        return function (t) {
          e.lookAt(this.position, t, this.up), this.quaternion.setFromRotationMatrix(e)
        }
      }(), X.Camera.prototype.clone = function (e) {
        return void 0 === e && (e = new X.Camera), X.Object3D.prototype.clone.call(this, e), e.matrixWorldInverse.copy(this.matrixWorldInverse), e.projectionMatrix.copy(this.projectionMatrix), e
      }, X.CubeCamera = function (e, t, n) {
        X.Object3D.call(this), this.type = "CubeCamera";
        var i = new X.PerspectiveCamera(90, 1, e, t);
        i.up.set(0, -1, 0), i.lookAt(new X.Vector3(1, 0, 0)), this.add(i);
        var r = new X.PerspectiveCamera(90, 1, e, t);
        r.up.set(0, -1, 0), r.lookAt(new X.Vector3(-1, 0, 0)), this.add(r);
        var o = new X.PerspectiveCamera(90, 1, e, t);
        o.up.set(0, 0, 1), o.lookAt(new X.Vector3(0, 1, 0)), this.add(o);
        var a = new X.PerspectiveCamera(90, 1, e, t);
        a.up.set(0, 0, -1), a.lookAt(new X.Vector3(0, -1, 0)), this.add(a);
        var s = new X.PerspectiveCamera(90, 1, e, t);
        s.up.set(0, -1, 0), s.lookAt(new X.Vector3(0, 0, 1)), this.add(s);
        var l = new X.PerspectiveCamera(90, 1, e, t);
        l.up.set(0, -1, 0), l.lookAt(new X.Vector3(0, 0, -1)), this.add(l), this.renderTarget = new X.WebGLRenderTargetCube(n, n, {
          format: X.RGBFormat,
          magFilter: X.LinearFilter,
          minFilter: X.LinearFilter
        }), this.updateCubeMap = function (e, t) {
          var n = this.renderTarget,
            c = n.generateMipmaps;
          n.generateMipmaps = !1, n.activeCubeFace = 0, e.render(t, i, n), n.activeCubeFace = 1, e.render(t, r, n), n.activeCubeFace = 2, e.render(t, o, n), n.activeCubeFace = 3, e.render(t, a, n), n.activeCubeFace = 4, e.render(t, s, n), n.generateMipmaps = c, n.activeCubeFace = 5, e.render(t, l, n)
        }
      }, X.CubeCamera.prototype = Object.create(X.Object3D.prototype), X.CubeCamera.prototype.constructor = X.CubeCamera, X.OrthographicCamera = function (e, t, n, i, r, o) {
        X.Camera.call(this), this.type = "OrthographicCamera", this.zoom = 1, this.left = e, this.right = t, this.top = n, this.bottom = i, this.near = void 0 !== r ? r : .1, this.far = void 0 !== o ? o : 2e3, this.updateProjectionMatrix()
      }, X.OrthographicCamera.prototype = Object.create(X.Camera.prototype), X.OrthographicCamera.prototype.constructor = X.OrthographicCamera, X.OrthographicCamera.prototype.updateProjectionMatrix = function () {
        var e = (this.right - this.left) / (2 * this.zoom),
          t = (this.top - this.bottom) / (2 * this.zoom),
          n = (this.right + this.left) / 2,
          i = (this.top + this.bottom) / 2;
        this.projectionMatrix.makeOrthographic(n - e, n + e, i + t, i - t, this.near, this.far)
      }, X.OrthographicCamera.prototype.clone = function () {
        var e = new X.OrthographicCamera;
        return X.Camera.prototype.clone.call(this, e), e.zoom = this.zoom, e.left = this.left, e.right = this.right, e.top = this.top, e.bottom = this.bottom, e.near = this.near, e.far = this.far, e.projectionMatrix.copy(this.projectionMatrix), e
      }, X.PerspectiveCamera = function (e, t, n, i) {
        X.Camera.call(this), this.type = "PerspectiveCamera", this.zoom = 1, this.fov = void 0 !== e ? e : 50, this.aspect = void 0 !== t ? t : 1, this.near = void 0 !== n ? n : .1, this.far = void 0 !== i ? i : 2e3, this.updateProjectionMatrix()
      }, X.PerspectiveCamera.prototype = Object.create(X.Camera.prototype), X.PerspectiveCamera.prototype.constructor = X.PerspectiveCamera, X.PerspectiveCamera.prototype.setLens = function (e, t) {
        void 0 === t && (t = 24), this.fov = 2 * X.Math.radToDeg(Math.atan(t / (2 * e))), this.updateProjectionMatrix()
      }, X.PerspectiveCamera.prototype.setViewOffset = function (e, t, n, i, r, o) {
        this.fullWidth = e, this.fullHeight = t, this.x = n, this.y = i, this.width = r, this.height = o, this.updateProjectionMatrix()
      }, X.PerspectiveCamera.prototype.updateProjectionMatrix = function () {
        var e = X.Math.radToDeg(2 * Math.atan(Math.tan(.5 * X.Math.degToRad(this.fov)) / this.zoom));
        if (this.fullWidth) {
          var t = this.fullWidth / this.fullHeight,
            n = Math.tan(X.Math.degToRad(.5 * e)) * this.near,
            i = -n,
            r = t * i,
            o = t * n,
            a = Math.abs(o - r),
            s = Math.abs(n - i);
          this.projectionMatrix.makeFrustum(r + this.x * a / this.fullWidth, r + (this.x + this.width) * a / this.fullWidth, n - (this.y + this.height) * s / this.fullHeight, n - this.y * s / this.fullHeight, this.near, this.far)
        } else this.projectionMatrix.makePerspective(e, this.aspect, this.near, this.far)
      }, X.PerspectiveCamera.prototype.clone = function () {
        var e = new X.PerspectiveCamera;
        return X.Camera.prototype.clone.call(this, e), e.zoom = this.zoom, e.fov = this.fov, e.aspect = this.aspect, e.near = this.near, e.far = this.far, e.projectionMatrix.copy(this.projectionMatrix), e
      }, X.Light = function (e) {
        X.Object3D.call(this), this.type = "Light", this.color = new X.Color(e)
      }, X.Light.prototype = Object.create(X.Object3D.prototype), X.Light.prototype.constructor = X.Light, X.Light.prototype.clone = function (e) {
        return void 0 === e && (e = new X.Light), X.Object3D.prototype.clone.call(this, e), e.color.copy(this.color), e
      }, X.AmbientLight = function (e) {
        X.Light.call(this, e), this.type = "AmbientLight"
      }, X.AmbientLight.prototype = Object.create(X.Light.prototype), X.AmbientLight.prototype.constructor = X.AmbientLight, X.AmbientLight.prototype.clone = function () {
        var e = new X.AmbientLight;
        return X.Light.prototype.clone.call(this, e), e
      }, X.AreaLight = function (e, t) {
        X.Light.call(this, e), this.type = "AreaLight", this.normal = new X.Vector3(0, -1, 0), this.right = new X.Vector3(1, 0, 0), this.intensity = void 0 !== t ? t : 1, this.width = 1, this.height = 1, this.constantAttenuation = 1.5, this.linearAttenuation = .5, this.quadraticAttenuation = .1
      }, X.AreaLight.prototype = Object.create(X.Light.prototype), X.AreaLight.prototype.constructor = X.AreaLight, X.DirectionalLight = function (e, t) {
        X.Light.call(this, e), this.type = "DirectionalLight", this.position.set(0, 1, 0), this.target = new X.Object3D, this.intensity = void 0 !== t ? t : 1, this.castShadow = !1, this.onlyShadow = !1, this.shadowCameraNear = 50, this.shadowCameraFar = 5e3, this.shadowCameraLeft = -500, this.shadowCameraRight = 500, this.shadowCameraTop = 500, this.shadowCameraBottom = -500, this.shadowCameraVisible = !1, this.shadowBias = 0, this.shadowDarkness = .5, this.shadowMapWidth = 512, this.shadowMapHeight = 512, this.shadowCascade = !1, this.shadowCascadeOffset = new X.Vector3(0, 0, -1e3), this.shadowCascadeCount = 2, this.shadowCascadeBias = [0, 0, 0], this.shadowCascadeWidth = [512, 512, 512], this.shadowCascadeHeight = [512, 512, 512], this.shadowCascadeNearZ = [-1, .99, .998], this.shadowCascadeFarZ = [.99, .998, 1], this.shadowCascadeArray = [], this.shadowMap = null, this.shadowMapSize = null, this.shadowCamera = null, this.shadowMatrix = null
      }, X.DirectionalLight.prototype = Object.create(X.Light.prototype), X.DirectionalLight.prototype.constructor = X.DirectionalLight, X.DirectionalLight.prototype.clone = function () {
        var e = new X.DirectionalLight;
        return X.Light.prototype.clone.call(this, e), e.target = this.target.clone(), e.intensity = this.intensity, e.castShadow = this.castShadow, e.onlyShadow = this.onlyShadow, e.shadowCameraNear = this.shadowCameraNear, e.shadowCameraFar = this.shadowCameraFar, e.shadowCameraLeft = this.shadowCameraLeft, e.shadowCameraRight = this.shadowCameraRight, e.shadowCameraTop = this.shadowCameraTop, e.shadowCameraBottom = this.shadowCameraBottom, e.shadowCameraVisible = this.shadowCameraVisible, e.shadowBias = this.shadowBias, e.shadowDarkness = this.shadowDarkness, e.shadowMapWidth = this.shadowMapWidth, e.shadowMapHeight = this.shadowMapHeight, e.shadowCascade = this.shadowCascade, e.shadowCascadeOffset.copy(this.shadowCascadeOffset), e.shadowCascadeCount = this.shadowCascadeCount, e.shadowCascadeBias = this.shadowCascadeBias.slice(0), e.shadowCascadeWidth = this.shadowCascadeWidth.slice(0), e.shadowCascadeHeight = this.shadowCascadeHeight.slice(0), e.shadowCascadeNearZ = this.shadowCascadeNearZ.slice(0), e.shadowCascadeFarZ = this.shadowCascadeFarZ.slice(0), e
      }, X.HemisphereLight = function (e, t, n) {
        X.Light.call(this, e), this.type = "HemisphereLight", this.position.set(0, 100, 0), this.groundColor = new X.Color(t), this.intensity = void 0 !== n ? n : 1
      }, X.HemisphereLight.prototype = Object.create(X.Light.prototype), X.HemisphereLight.prototype.constructor = X.HemisphereLight, X.HemisphereLight.prototype.clone = function () {
        var e = new X.HemisphereLight;
        return X.Light.prototype.clone.call(this, e), e.groundColor.copy(this.groundColor), e.intensity = this.intensity, e
      }, X.PointLight = function (e, t, n, i) {
        X.Light.call(this, e), this.type = "PointLight", this.intensity = void 0 !== t ? t : 1, this.distance = void 0 !== n ? n : 0, this.decay = void 0 !== i ? i : 1
      }, X.PointLight.prototype = Object.create(X.Light.prototype), X.PointLight.prototype.constructor = X.PointLight, X.PointLight.prototype.clone = function () {
        var e = new X.PointLight;
        return X.Light.prototype.clone.call(this, e), e.intensity = this.intensity, e.distance = this.distance, e.decay = this.decay, e
      }, X.SpotLight = function (e, t, n, i, r, o) {
        X.Light.call(this, e), this.type = "SpotLight", this.position.set(0, 1, 0), this.target = new X.Object3D, this.intensity = void 0 !== t ? t : 1, this.distance = void 0 !== n ? n : 0, this.angle = void 0 !== i ? i : Math.PI / 3, this.exponent = void 0 !== r ? r : 10, this.decay = void 0 !== o ? o : 1, this.castShadow = !1, this.onlyShadow = !1, this.shadowCameraNear = 50, this.shadowCameraFar = 5e3, this.shadowCameraFov = 50, this.shadowCameraVisible = !1, this.shadowBias = 0, this.shadowDarkness = .5, this.shadowMapWidth = 512, this.shadowMapHeight = 512, this.shadowMap = null, this.shadowMapSize = null, this.shadowCamera = null, this.shadowMatrix = null
      }, X.SpotLight.prototype = Object.create(X.Light.prototype), X.SpotLight.prototype.constructor = X.SpotLight, X.SpotLight.prototype.clone = function () {
        var e = new X.SpotLight;
        return X.Light.prototype.clone.call(this, e), e.target = this.target.clone(), e.intensity = this.intensity, e.distance = this.distance, e.angle = this.angle, e.exponent = this.exponent, e.decay = this.decay, e.castShadow = this.castShadow, e.onlyShadow = this.onlyShadow, e.shadowCameraNear = this.shadowCameraNear, e.shadowCameraFar = this.shadowCameraFar, e.shadowCameraFov = this.shadowCameraFov, e.shadowCameraVisible = this.shadowCameraVisible, e.shadowBias = this.shadowBias, e.shadowDarkness = this.shadowDarkness, e.shadowMapWidth = this.shadowMapWidth, e.shadowMapHeight = this.shadowMapHeight, e
      }, X.Cache = {
        files: {},
        add: function (e, t) {
          this.files[e] = t
        },
        get: function (e) {
          return this.files[e]
        },
        remove: function (e) {
          delete this.files[e]
        },
        clear: function () {
          this.files = {}
        }
      }, X.Loader = function (e) {
        this.showStatus = e, this.statusDomElement = e ? X.Loader.prototype.addStatusElement() : null, this.imageLoader = new X.ImageLoader, this.onLoadStart = function () {}, this.onLoadProgress = function () {}, this.onLoadComplete = function () {}
      }, X.Loader.prototype = {
        constructor: X.Loader,
        crossOrigin: void 0,
        addStatusElement: function () {
          var e = document.createElement("div");
          return e.style.position = "absolute", e.style.right = "0px", e.style.top = "0px", e.style.fontSize = "0.8em", e.style.textAlign = "left", e.style.background = "rgba(0,0,0,0.25)", e.style.color = "#fff", e.style.width = "120px", e.style.padding = "0.5em 0.5em 0.5em 0.5em", e.style.zIndex = 1e3, e.innerHTML = "Loading ...", e
        },
        updateProgress: function (e) {
          var t = "Loaded ";
          e.total ? t += (100 * e.loaded / e.total).toFixed(0) + "%" : t += (e.loaded / 1024).toFixed(2) + " KB", this.statusDomElement.innerHTML = t
        },
        extractUrlBase: function (e) {
          var t = e.split("/");
          return 1 === t.length ? "./" : (t.pop(), t.join("/") + "/")
        },
        initMaterials: function (e, t) {
          for (var n = [], i = 0; i < e.length; ++i) n[i] = this.createMaterial(e[i], t);
          return n
        },
        needsTangents: function (e) {
          for (var t = 0, n = e.length; t < n; t++) {
            if (e[t] instanceof X.ShaderMaterial) return !0
          }
          return !1
        },
        createMaterial: function (e, t) {
          var n = this;

          function i(e) {
            var t = Math.log(e) / Math.LN2;
            return Math.pow(2, Math.round(t))
          }

          function r(e, r, o, a, s, l, c) {
            var u, h = t + o,
              d = X.Loader.Handlers.get(h);
            if (null !== d ? u = d.load(h) : (u = new X.Texture, (d = n.imageLoader).crossOrigin = n.crossOrigin, d.load(h, (function (e) {
                if (!1 === X.Math.isPowerOfTwo(e.width) || !1 === X.Math.isPowerOfTwo(e.height)) {
                  var t = i(e.width),
                    n = i(e.height),
                    r = document.createElement("canvas");
                  r.width = t, r.height = n, r.getContext("2d").drawImage(e, 0, 0, t, n), u.image = r
                } else u.image = e;
                u.needsUpdate = !0
              }))), u.sourceFile = o, a && (u.repeat.set(a[0], a[1]), 1 !== a[0] && (u.wrapS = X.RepeatWrapping), 1 !== a[1] && (u.wrapT = X.RepeatWrapping)), s && u.offset.set(s[0], s[1]), l) {
              var f = {
                repeat: X.RepeatWrapping,
                mirror: X.MirroredRepeatWrapping
              };
              void 0 !== f[l[0]] && (u.wrapS = f[l[0]]), void 0 !== f[l[1]] && (u.wrapT = f[l[1]])
            }
            c && (u.anisotropy = c), e[r] = u
          }

          function o(e) {
            return (255 * e[0] << 16) + (255 * e[1] << 8) + 255 * e[2]
          }
          var a = "MeshLambertMaterial",
            s = {
              color: 15658734,
              opacity: 1,
              map: null,
              lightMap: null,
              normalMap: null,
              bumpMap: null,
              wireframe: !1
            };
          if (e.shading) {
            var l = e.shading.toLowerCase();
            "phong" === l ? a = "MeshPhongMaterial" : "basic" === l && (a = "MeshBasicMaterial")
          }
          void 0 !== e.blending && void 0 !== X[e.blending] && (s.blending = X[e.blending]), void 0 !== e.transparent && (s.transparent = e.transparent), void 0 !== e.opacity && e.opacity < 1 && (s.transparent = !0), void 0 !== e.depthTest && (s.depthTest = e.depthTest), void 0 !== e.depthWrite && (s.depthWrite = e.depthWrite), void 0 !== e.visible && (s.visible = e.visible), void 0 !== e.flipSided && (s.side = X.BackSide), void 0 !== e.doubleSided && (s.side = X.DoubleSide), void 0 !== e.wireframe && (s.wireframe = e.wireframe), void 0 !== e.vertexColors && ("face" === e.vertexColors ? s.vertexColors = X.FaceColors : e.vertexColors && (s.vertexColors = X.VertexColors)), e.colorDiffuse ? s.color = o(e.colorDiffuse) : e.DbgColor && (s.color = e.DbgColor), e.colorSpecular && (s.specular = o(e.colorSpecular)), e.colorEmissive && (s.emissive = o(e.colorEmissive)), void 0 !== e.transparency && (console.warn("THREE.Loader: transparency has been renamed to opacity"), e.opacity = e.transparency), void 0 !== e.opacity && (s.opacity = e.opacity), e.specularCoef && (s.shininess = e.specularCoef), e.mapDiffuse && t && r(s, "map", e.mapDiffuse, e.mapDiffuseRepeat, e.mapDiffuseOffset, e.mapDiffuseWrap, e.mapDiffuseAnisotropy), e.mapLight && t && r(s, "lightMap", e.mapLight, e.mapLightRepeat, e.mapLightOffset, e.mapLightWrap, e.mapLightAnisotropy), e.mapBump && t && r(s, "bumpMap", e.mapBump, e.mapBumpRepeat, e.mapBumpOffset, e.mapBumpWrap, e.mapBumpAnisotropy), e.mapNormal && t && r(s, "normalMap", e.mapNormal, e.mapNormalRepeat, e.mapNormalOffset, e.mapNormalWrap, e.mapNormalAnisotropy), e.mapSpecular && t && r(s, "specularMap", e.mapSpecular, e.mapSpecularRepeat, e.mapSpecularOffset, e.mapSpecularWrap, e.mapSpecularAnisotropy), e.mapAlpha && t && r(s, "alphaMap", e.mapAlpha, e.mapAlphaRepeat, e.mapAlphaOffset, e.mapAlphaWrap, e.mapAlphaAnisotropy), e.mapBumpScale && (s.bumpScale = e.mapBumpScale), e.mapNormalFactor && (s.normalScale = new X.Vector2(e.mapNormalFactor, e.mapNormalFactor));
          var c = new X[a](s);
          return void 0 !== e.DbgName && (c.name = e.DbgName), c
        }
      }, X.Loader.Handlers = {
        handlers: [],
        add: function (e, t) {
          this.handlers.push(e, t)
        },
        get: function (e) {
          for (var t = 0, n = this.handlers.length; t < n; t += 2) {
            var i = this.handlers[t],
              r = this.handlers[t + 1];
            if (i.test(e)) return r
          }
          return null
        }
      }, X.XHRLoader = function (e) {
        this.manager = void 0 !== e ? e : X.DefaultLoadingManager
      }, X.XHRLoader.prototype = {
        constructor: X.XHRLoader,
        load: function (e, t, n, i) {
          var r = this,
            o = X.Cache.get(e);
          if (void 0 === o) {
            var a = new XMLHttpRequest;
            a.open("GET", e, !0), a.addEventListener("load", (function (n) {
              X.Cache.add(e, this.response), t && t(this.response), r.manager.itemEnd(e)
            }), !1), void 0 !== n && a.addEventListener("progress", (function (e) {
              n(e)
            }), !1), void 0 !== i && a.addEventListener("error", (function (e) {
              i(e)
            }), !1), void 0 !== this.crossOrigin && (a.crossOrigin = this.crossOrigin), void 0 !== this.responseType && (a.responseType = this.responseType), a.send(null), r.manager.itemStart(e)
          } else t && t(o)
        },
        setResponseType: function (e) {
          this.responseType = e
        },
        setCrossOrigin: function (e) {
          this.crossOrigin = e
        }
      }, X.ImageLoader = function (e) {
        this.manager = void 0 !== e ? e : X.DefaultLoadingManager
      }, X.ImageLoader.prototype = {
        constructor: X.ImageLoader,
        load: function (e, t, n, i) {
          var r = this,
            o = X.Cache.get(e);
          if (void 0 === o) {
            var a = document.createElement("img");
            return a.addEventListener("load", (function (n) {
              X.Cache.add(e, this), t && t(this), r.manager.itemEnd(e)
            }), !1), void 0 !== n && a.addEventListener("progress", (function (e) {
              n(e)
            }), !1), void 0 !== i && a.addEventListener("error", (function (e) {
              i(e)
            }), !1), void 0 !== this.crossOrigin && (a.crossOrigin = this.crossOrigin), a.src = e, r.manager.itemStart(e), a
          }
          t(o)
        },
        setCrossOrigin: function (e) {
          this.crossOrigin = e
        }
      }, X.JSONLoader = function (e) {
        X.Loader.call(this, e), this.withCredentials = !1
      }, X.JSONLoader.prototype = Object.create(X.Loader.prototype), X.JSONLoader.prototype.constructor = X.JSONLoader, X.JSONLoader.prototype.load = function (e, t, n) {
        n = n && "string" == typeof n ? n : this.extractUrlBase(e), this.onLoadStart(), this.loadAjaxJSON(this, e, t, n)
      }, X.JSONLoader.prototype.loadAjaxJSON = function (e, t, n, i, r) {
        var o = new XMLHttpRequest,
          a = 0;
        o.onreadystatechange = function () {
          if (o.readyState === o.DONE)
            if (200 === o.status || 0 === o.status) {
              if (o.responseText) {
                var s = JSON.parse(o.responseText),
                  l = s.metadata;
                if (void 0 !== l) {
                  if ("object" === l.type) return void X.error("THREE.JSONLoader: " + t + " should be loaded with THREE.ObjectLoader instead.");
                  if ("scene" === l.type) return void X.error("THREE.JSONLoader: " + t + " seems to be a Scene. Use THREE.SceneLoader instead.")
                }
                var c = e.parse(s, i);
                n(c.geometry, c.materials)
              } else X.error("THREE.JSONLoader: " + t + " seems to be unreachable or the file is empty.");
              e.onLoadComplete()
            } else X.error("THREE.JSONLoader: Couldn't load " + t + " (" + o.status + ")");
          else o.readyState === o.LOADING ? r && (0 === a && (a = o.getResponseHeader("Content-Length")), r({
            total: a,
            loaded: o.responseText.length
          })) : o.readyState === o.HEADERS_RECEIVED && void 0 !== r && (a = o.getResponseHeader("Content-Length"))
        }, o.open("GET", t, !0), o.withCredentials = this.withCredentials, o.send(null)
      }, X.JSONLoader.prototype.parse = function (e, t) {
        var n = new X.Geometry,
          i = void 0 !== e.scale ? 1 / e.scale : 1;
        if (function (t) {
            function i(e, t) {
              return e & 1 << t
            }
            var r, o, a, s, l, c, u, h, d, f, p, m, g, v, y, b, _, x, w, E, A, S, M, T, C, P, L, D = e.faces,
              I = e.vertices,
              R = e.normals,
              O = e.colors,
              k = 0;
            if (void 0 !== e.uvs) {
              for (r = 0; r < e.uvs.length; r++) e.uvs[r].length && k++;
              for (r = 0; r < k; r++) n.faceVertexUvs[r] = []
            }
            s = 0, l = I.length;
            for (; s < l;)(x = new X.Vector3).x = I[s++] * t, x.y = I[s++] * t, x.z = I[s++] * t, n.vertices.push(x);
            s = 0, l = D.length;
            for (; s < l;)
              if (f = D[s++], p = i(f, 0), m = i(f, 1), g = i(f, 3), v = i(f, 4), y = i(f, 5), b = i(f, 6), _ = i(f, 7), p) {
                if ((E = new X.Face3).a = D[s], E.b = D[s + 1], E.c = D[s + 3], (A = new X.Face3).a = D[s + 1], A.b = D[s + 2], A.c = D[s + 3], s += 4, m && (d = D[s++], E.materialIndex = d, A.materialIndex = d), a = n.faces.length, g)
                  for (r = 0; r < k; r++)
                    for (T = e.uvs[r], n.faceVertexUvs[r][a] = [], n.faceVertexUvs[r][a + 1] = [], o = 0; o < 4; o++) h = D[s++], P = T[2 * h], L = T[2 * h + 1], C = new X.Vector2(P, L), 2 !== o && n.faceVertexUvs[r][a].push(C), 0 !== o && n.faceVertexUvs[r][a + 1].push(C);
                if (v && (u = 3 * D[s++], E.normal.set(R[u++], R[u++], R[u]), A.normal.copy(E.normal)), y)
                  for (r = 0; r < 4; r++) u = 3 * D[s++], M = new X.Vector3(R[u++], R[u++], R[u]), 2 !== r && E.vertexNormals.push(M), 0 !== r && A.vertexNormals.push(M);
                if (b && (c = D[s++], S = O[c], E.color.setHex(S), A.color.setHex(S)), _)
                  for (r = 0; r < 4; r++) c = D[s++], S = O[c], 2 !== r && E.vertexColors.push(new X.Color(S)), 0 !== r && A.vertexColors.push(new X.Color(S));
                n.faces.push(E), n.faces.push(A)
              } else {
                if ((w = new X.Face3).a = D[s++], w.b = D[s++], w.c = D[s++], m && (d = D[s++], w.materialIndex = d), a = n.faces.length, g)
                  for (r = 0; r < k; r++)
                    for (T = e.uvs[r], n.faceVertexUvs[r][a] = [], o = 0; o < 3; o++) h = D[s++], P = T[2 * h], L = T[2 * h + 1], C = new X.Vector2(P, L), n.faceVertexUvs[r][a].push(C);
                if (v && (u = 3 * D[s++], w.normal.set(R[u++], R[u++], R[u])), y)
                  for (r = 0; r < 3; r++) u = 3 * D[s++], M = new X.Vector3(R[u++], R[u++], R[u]), w.vertexNormals.push(M);
                if (b && (c = D[s++], w.color.setHex(O[c])), _)
                  for (r = 0; r < 3; r++) c = D[s++], w.vertexColors.push(new X.Color(O[c]));
                n.faces.push(w)
              }
          }(i), function () {
            var t = void 0 !== e.influencesPerVertex ? e.influencesPerVertex : 2;
            if (e.skinWeights)
              for (var i = 0, r = e.skinWeights.length; i < r; i += t) {
                var o = e.skinWeights[i],
                  a = t > 1 ? e.skinWeights[i + 1] : 0,
                  s = t > 2 ? e.skinWeights[i + 2] : 0,
                  l = t > 3 ? e.skinWeights[i + 3] : 0;
                n.skinWeights.push(new X.Vector4(o, a, s, l))
              }
            if (e.skinIndices)
              for (i = 0, r = e.skinIndices.length; i < r; i += t) {
                var c = e.skinIndices[i],
                  u = t > 1 ? e.skinIndices[i + 1] : 0,
                  h = t > 2 ? e.skinIndices[i + 2] : 0,
                  d = t > 3 ? e.skinIndices[i + 3] : 0;
                n.skinIndices.push(new X.Vector4(c, u, h, d))
              }
            n.bones = e.bones, n.bones && n.bones.length > 0 && (n.skinWeights.length !== n.skinIndices.length || n.skinIndices.length !== n.vertices.length) && X.warn("THREE.JSONLoader: When skinning, number of vertices (" + n.vertices.length + "), skinIndices (" + n.skinIndices.length + "), and skinWeights (" + n.skinWeights.length + ") should match.");
            n.animation = e.animation, n.animations = e.animations
          }(), function (t) {
            var i, r, o, a, s, l, c, u, h, d, f;
            if (void 0 !== e.morphTargets)
              for (s = 0, l = e.morphTargets.length; s < l; s++)
                for (n.morphTargets[s] = {}, n.morphTargets[s].name = e.morphTargets[s].name, n.morphTargets[s].vertices = [], o = n.morphTargets[s].vertices, a = e.morphTargets[s].vertices, i = 0, r = a.length; i < r; i += 3) {
                  var p = new X.Vector3;
                  p.x = a[i] * t, p.y = a[i + 1] * t, p.z = a[i + 2] * t, o.push(p)
                }
            if (void 0 !== e.morphColors)
              for (s = 0, l = e.morphColors.length; s < l; s++)
                for (n.morphColors[s] = {}, n.morphColors[s].name = e.morphColors[s].name, n.morphColors[s].colors = [], h = n.morphColors[s].colors, d = e.morphColors[s].colors, c = 0, u = d.length; c < u; c += 3)(f = new X.Color(16755200)).setRGB(d[c], d[c + 1], d[c + 2]), h.push(f)
          }(i), n.computeFaceNormals(), n.computeBoundingSphere(), void 0 === e.materials || 0 === e.materials.length) return {
          geometry: n
        };
        var r = this.initMaterials(e.materials, t);
        return this.needsTangents(r) && n.computeTangents(), {
          geometry: n,
          materials: r
        }
      }, X.LoadingManager = function (e, t, n) {
        var i = this,
          r = 0,
          o = 0;
        this.onLoad = e, this.onProgress = t, this.onError = n, this.itemStart = function (e) {
          o++
        }, this.itemEnd = function (e) {
          r++, void 0 !== i.onProgress && i.onProgress(e, r, o), r === o && void 0 !== i.onLoad && i.onLoad()
        }
      }, X.DefaultLoadingManager = new X.LoadingManager, X.BufferGeometryLoader = function (e) {
        this.manager = void 0 !== e ? e : X.DefaultLoadingManager
      }, X.BufferGeometryLoader.prototype = {
        constructor: X.BufferGeometryLoader,
        load: function (e, t, n, i) {
          var r = this,
            o = new X.XHRLoader(r.manager);
          o.setCrossOrigin(this.crossOrigin), o.load(e, (function (e) {
            t(r.parse(JSON.parse(e)))
          }), n, i)
        },
        setCrossOrigin: function (e) {
          this.crossOrigin = e
        },
        parse: function (e) {
          var t = new X.BufferGeometry,
            n = e.data.attributes;
          for (var i in n) {
            var r = n[i],
              o = new self[r.type](r.array);
            t.addAttribute(i, new X.BufferAttribute(o, r.itemSize))
          }
          var a = e.data.offsets;
          void 0 !== a && (t.offsets = JSON.parse(JSON.stringify(a)));
          var s = e.data.boundingSphere;
          if (void 0 !== s) {
            var l = new X.Vector3;
            void 0 !== s.center && l.fromArray(s.center), t.boundingSphere = new X.Sphere(l, s.radius)
          }
          return t
        }
      }, X.MaterialLoader = function (e) {
        this.manager = void 0 !== e ? e : X.DefaultLoadingManager
      }, X.MaterialLoader.prototype = {
        constructor: X.MaterialLoader,
        load: function (e, t, n, i) {
          var r = this,
            o = new X.XHRLoader(r.manager);
          o.setCrossOrigin(this.crossOrigin), o.load(e, (function (e) {
            t(r.parse(JSON.parse(e)))
          }), n, i)
        },
        setCrossOrigin: function (e) {
          this.crossOrigin = e
        },
        parse: function (e) {
          var t = new X[e.type];
          if (void 0 !== e.color && t.color.setHex(e.color), void 0 !== e.emissive && t.emissive.setHex(e.emissive), void 0 !== e.specular && t.specular.setHex(e.specular), void 0 !== e.shininess && (t.shininess = e.shininess), void 0 !== e.uniforms && (t.uniforms = e.uniforms), void 0 !== e.vertexShader && (t.vertexShader = e.vertexShader), void 0 !== e.fragmentShader && (t.fragmentShader = e.fragmentShader), void 0 !== e.vertexColors && (t.vertexColors = e.vertexColors), void 0 !== e.shading && (t.shading = e.shading), void 0 !== e.blending && (t.blending = e.blending), void 0 !== e.side && (t.side = e.side), void 0 !== e.opacity && (t.opacity = e.opacity), void 0 !== e.transparent && (t.transparent = e.transparent), void 0 !== e.wireframe && (t.wireframe = e.wireframe), void 0 !== e.size && (t.size = e.size), void 0 !== e.sizeAttenuation && (t.sizeAttenuation = e.sizeAttenuation), void 0 !== e.materials)
            for (var n = 0, i = e.materials.length; n < i; n++) t.materials.push(this.parse(e.materials[n]));
          return t
        }
      }, X.ObjectLoader = function (e) {
        this.manager = void 0 !== e ? e : X.DefaultLoadingManager, this.texturePath = ""
      }, X.ObjectLoader.prototype = {
        constructor: X.ObjectLoader,
        load: function (e, t, n, i) {
          "" === this.texturePath && (this.texturePath = e.substring(0, e.lastIndexOf("/") + 1));
          var r = this,
            o = new X.XHRLoader(r.manager);
          o.setCrossOrigin(this.crossOrigin), o.load(e, (function (e) {
            r.parse(JSON.parse(e), t)
          }), n, i)
        },
        setTexturePath: function (e) {
          this.texturePath = e
        },
        setCrossOrigin: function (e) {
          this.crossOrigin = e
        },
        parse: function (e, t) {
          var n = this.parseGeometries(e.geometries),
            i = this.parseImages(e.images, (function () {
              void 0 !== t && t(a)
            })),
            r = this.parseTextures(e.textures, i),
            o = this.parseMaterials(e.materials, r),
            a = this.parseObject(e.object, n, o);
          return void 0 !== e.images && 0 !== e.images.length || void 0 !== t && t(a), a
        },
        parseGeometries: function (e) {
          var t = {};
          if (void 0 !== e)
            for (var n = new X.JSONLoader, i = new X.BufferGeometryLoader, r = 0, o = e.length; r < o; r++) {
              var a, s = e[r];
              switch (s.type) {
                case "PlaneGeometry":
                case "PlaneBufferGeometry":
                  a = new X[s.type](s.width, s.height, s.widthSegments, s.heightSegments);
                  break;
                case "BoxGeometry":
                case "CubeGeometry":
                  a = new X.BoxGeometry(s.width, s.height, s.depth, s.widthSegments, s.heightSegments, s.depthSegments);
                  break;
                case "CircleGeometry":
                  a = new X.CircleGeometry(s.radius, s.segments);
                  break;
                case "CylinderGeometry":
                  a = new X.CylinderGeometry(s.radiusTop, s.radiusBottom, s.height, s.radialSegments, s.heightSegments, s.openEnded);
                  break;
                case "SphereGeometry":
                  a = new X.SphereGeometry(s.radius, s.widthSegments, s.heightSegments, s.phiStart, s.phiLength, s.thetaStart, s.thetaLength);
                  break;
                case "IcosahedronGeometry":
                  a = new X.IcosahedronGeometry(s.radius, s.detail);
                  break;
                case "TorusGeometry":
                  a = new X.TorusGeometry(s.radius, s.tube, s.radialSegments, s.tubularSegments, s.arc);
                  break;
                case "TorusKnotGeometry":
                  a = new X.TorusKnotGeometry(s.radius, s.tube, s.radialSegments, s.tubularSegments, s.p, s.q, s.heightScale);
                  break;
                case "BufferGeometry":
                  a = i.parse(s);
                  break;
                case "Geometry":
                  a = n.parse(s.data).geometry
              }
              a.uuid = s.uuid, void 0 !== s.name && (a.name = s.name), t[s.uuid] = a
            }
          return t
        },
        parseMaterials: function (e, t) {
          var n = {};
          if (void 0 !== e)
            for (var i = function (e) {
                return void 0 === t[e] && X.warn("THREE.ObjectLoader: Undefined texture", e), t[e]
              }, r = new X.MaterialLoader, o = 0, a = e.length; o < a; o++) {
              var s = e[o],
                l = r.parse(s);
              l.uuid = s.uuid, void 0 !== s.name && (l.name = s.name), void 0 !== s.map && (l.map = i(s.map)), void 0 !== s.bumpMap && (l.bumpMap = i(s.bumpMap), s.bumpScale && (l.bumpScale = new X.Vector2(s.bumpScale, s.bumpScale))), void 0 !== s.alphaMap && (l.alphaMap = i(s.alphaMap)), void 0 !== s.envMap && (l.envMap = i(s.envMap)), void 0 !== s.normalMap && (l.normalMap = i(s.normalMap), s.normalScale && (l.normalScale = new X.Vector2(s.normalScale, s.normalScale))), void 0 !== s.lightMap && (l.lightMap = i(s.lightMap)), void 0 !== s.specularMap && (l.specularMap = i(s.specularMap)), n[s.uuid] = l
            }
          return n
        },
        parseImages: function (e, t) {
          var n = this,
            i = {};
          if (void 0 !== e && e.length > 0) {
            var r = new X.LoadingManager(t),
              o = new X.ImageLoader(r);
            o.setCrossOrigin(this.crossOrigin);
            for (var a = function (e) {
                return n.manager.itemStart(e), o.load(e, (function () {
                  n.manager.itemEnd(e)
                }))
              }, s = 0, l = e.length; s < l; s++) {
              var c = e[s],
                u = /^(\/\/)|([a-z]+:(\/\/)?)/i.test(c.url) ? c.url : n.texturePath + c.url;
              i[c.uuid] = a(u)
            }
          }
          return i
        },
        parseTextures: function (e, t) {
          var n = {};
          if (void 0 !== e)
            for (var i = 0, r = e.length; i < r; i++) {
              var o = e[i];
              void 0 === o.image && X.warn('THREE.ObjectLoader: No "image" speficied for', o.uuid), void 0 === t[o.image] && X.warn("THREE.ObjectLoader: Undefined image", o.image);
              var a = new X.Texture(t[o.image]);
              a.needsUpdate = !0, a.uuid = o.uuid, void 0 !== o.name && (a.name = o.name), void 0 !== o.repeat && (a.repeat = new X.Vector2(o.repeat[0], o.repeat[1])), void 0 !== o.minFilter && (a.minFilter = X[o.minFilter]), void 0 !== o.magFilter && (a.magFilter = X[o.magFilter]), void 0 !== o.anisotropy && (a.anisotropy = o.anisotropy), o.wrap instanceof Array && (a.wrapS = X[o.wrap[0]], a.wrapT = X[o.wrap[1]]), n[o.uuid] = a
            }
          return n
        },
        parseObject: function () {
          var e = new X.Matrix4;
          return function (t, n, i) {
            var r, o = function (e) {
                return void 0 === n[e] && X.warn("THREE.ObjectLoader: Undefined geometry", e), n[e]
              },
              a = function (e) {
                return void 0 === i[e] && X.warn("THREE.ObjectLoader: Undefined material", e), i[e]
              };
            switch (t.type) {
              case "Scene":
                r = new X.Scene;
                break;
              case "PerspectiveCamera":
                r = new X.PerspectiveCamera(t.fov, t.aspect, t.near, t.far);
                break;
              case "OrthographicCamera":
                r = new X.OrthographicCamera(t.left, t.right, t.top, t.bottom, t.near, t.far);
                break;
              case "AmbientLight":
                r = new X.AmbientLight(t.color);
                break;
              case "DirectionalLight":
                r = new X.DirectionalLight(t.color, t.intensity);
                break;
              case "PointLight":
                r = new X.PointLight(t.color, t.intensity, t.distance, t.decay);
                break;
              case "SpotLight":
                r = new X.SpotLight(t.color, t.intensity, t.distance, t.angle, t.exponent, t.decay);
                break;
              case "HemisphereLight":
                r = new X.HemisphereLight(t.color, t.groundColor, t.intensity);
                break;
              case "Mesh":
                r = new X.Mesh(o(t.geometry), a(t.material));
                break;
              case "Line":
                r = new X.Line(o(t.geometry), a(t.material), t.mode);
                break;
              case "PointCloud":
                r = new X.PointCloud(o(t.geometry), a(t.material));
                break;
              case "Sprite":
                r = new X.Sprite(a(t.material));
                break;
              case "Group":
                r = new X.Group;
                break;
              default:
                r = new X.Object3D
            }
            if (r.uuid = t.uuid, void 0 !== t.name && (r.name = t.name), void 0 !== t.matrix ? (e.fromArray(t.matrix), e.decompose(r.position, r.quaternion, r.scale)) : (void 0 !== t.position && r.position.fromArray(t.position), void 0 !== t.rotation && r.rotation.fromArray(t.rotation), void 0 !== t.scale && r.scale.fromArray(t.scale)), void 0 !== t.visible && (r.visible = t.visible), void 0 !== t.userData && (r.userData = t.userData), void 0 !== t.children)
              for (var s in t.children) r.add(this.parseObject(t.children[s], n, i));
            return r
          }
        }()
      }, X.TextureLoader = function (e) {
        this.manager = void 0 !== e ? e : X.DefaultLoadingManager
      }, X.TextureLoader.prototype = {
        constructor: X.TextureLoader,
        load: function (e, t, n, i) {
          var r = new X.ImageLoader(this.manager);
          r.setCrossOrigin(this.crossOrigin), r.load(e, (function (e) {
            var n = new X.Texture(e);
            n.needsUpdate = !0, void 0 !== t && t(n)
          }), n, i)
        },
        setCrossOrigin: function (e) {
          this.crossOrigin = e
        }
      }, X.DataTextureLoader = X.BinaryTextureLoader = function () {
        this._parser = null
      }, X.BinaryTextureLoader.prototype = {
        constructor: X.BinaryTextureLoader,
        load: function (e, t, n, i) {
          var r = this,
            o = new X.DataTexture,
            a = new X.XHRLoader;
          return a.setResponseType("arraybuffer"), a.load(e, (function (e) {
            var n = r._parser(e);
            n && (void 0 !== n.image ? o.image = n.image : void 0 !== n.data && (o.image.width = n.width, o.image.height = n.height, o.image.data = n.data), o.wrapS = void 0 !== n.wrapS ? n.wrapS : X.ClampToEdgeWrapping, o.wrapT = void 0 !== n.wrapT ? n.wrapT : X.ClampToEdgeWrapping, o.magFilter = void 0 !== n.magFilter ? n.magFilter : X.LinearFilter, o.minFilter = void 0 !== n.minFilter ? n.minFilter : X.LinearMipMapLinearFilter, o.anisotropy = void 0 !== n.anisotropy ? n.anisotropy : 1, void 0 !== n.format && (o.format = n.format), void 0 !== n.type && (o.type = n.type), void 0 !== n.mipmaps && (o.mipmaps = n.mipmaps), 1 === n.mipmapCount && (o.minFilter = X.LinearFilter), o.needsUpdate = !0, t && t(o, n))
          }), n, i), o
        }
      }, X.CompressedTextureLoader = function () {
        this._parser = null
      }, X.CompressedTextureLoader.prototype = {
        constructor: X.CompressedTextureLoader,
        load: function (e, t, n) {
          var i = this,
            r = [],
            o = new X.CompressedTexture;
          o.image = r;
          var a = new X.XHRLoader;
          if (a.setResponseType("arraybuffer"), e instanceof Array)
            for (var s = 0, l = function (n) {
                a.load(e[n], (function (e) {
                  var a = i._parser(e, !0);
                  r[n] = {
                    width: a.width,
                    height: a.height,
                    format: a.format,
                    mipmaps: a.mipmaps
                  }, 6 === (s += 1) && (1 == a.mipmapCount && (o.minFilter = X.LinearFilter), o.format = a.format, o.needsUpdate = !0, t && t(o))
                }))
              }, c = 0, u = e.length; c < u; ++c) l(c);
          else a.load(e, (function (e) {
            var n = i._parser(e, !0);
            if (n.isCubemap)
              for (var a = n.mipmaps.length / n.mipmapCount, s = 0; s < a; s++) {
                r[s] = {
                  mipmaps: []
                };
                for (var l = 0; l < n.mipmapCount; l++) r[s].mipmaps.push(n.mipmaps[s * n.mipmapCount + l]), r[s].format = n.format, r[s].width = n.width, r[s].height = n.height
              } else o.image.width = n.width, o.image.height = n.height, o.mipmaps = n.mipmaps;
            1 === n.mipmapCount && (o.minFilter = X.LinearFilter), o.format = n.format, o.needsUpdate = !0, t && t(o)
          }));
          return o
        }
      }, X.Material = function () {
        Object.defineProperty(this, "id", {
          value: X.MaterialIdCount++
        }), this.uuid = X.Math.generateUUID(), this.name = "", this.type = "Material", this.side = X.FrontSide, this.opacity = 1, this.transparent = !1, this.blending = X.NormalBlending, this.blendSrc = X.SrcAlphaFactor, this.blendDst = X.OneMinusSrcAlphaFactor, this.blendEquation = X.AddEquation, this.blendSrcAlpha = null, this.blendDstAlpha = null, this.blendEquationAlpha = null, this.depthTest = !0, this.depthWrite = !0, this.colorWrite = !0, this.polygonOffset = !1, this.polygonOffsetFactor = 0, this.polygonOffsetUnits = 0, this.alphaTest = 0, this.overdraw = 0, this.visible = !0, this._needsUpdate = !0
      }, X.Material.prototype = {
        constructor: X.Material,
        get needsUpdate() {
          return this._needsUpdate
        },
        set needsUpdate(e) {
          !0 === e && this.update(), this._needsUpdate = e
        },
        setValues: function (e) {
          if (void 0 !== e)
            for (var t in e) {
              var n = e[t];
              if (void 0 !== n) {
                if (t in this) {
                  var i = this[t];
                  i instanceof X.Color ? i.set(n) : i instanceof X.Vector3 && n instanceof X.Vector3 ? i.copy(n) : this[t] = "overdraw" == t ? Number(n) : n
                }
              } else X.warn("THREE.Material: '" + t + "' parameter is undefined.")
            }
        },
        toJSON: function () {
          var e = {
            metadata: {
              version: 4.2,
              type: "material",
              generator: "MaterialExporter"
            },
            uuid: this.uuid,
            type: this.type
          };
          return "" !== this.name && (e.name = this.name), this instanceof X.MeshBasicMaterial ? (e.color = this.color.getHex(), this.vertexColors !== X.NoColors && (e.vertexColors = this.vertexColors), this.blending !== X.NormalBlending && (e.blending = this.blending), this.side !== X.FrontSide && (e.side = this.side)) : this instanceof X.MeshLambertMaterial ? (e.color = this.color.getHex(), e.emissive = this.emissive.getHex(), this.vertexColors !== X.NoColors && (e.vertexColors = this.vertexColors), this.shading !== X.SmoothShading && (e.shading = this.shading), this.blending !== X.NormalBlending && (e.blending = this.blending), this.side !== X.FrontSide && (e.side = this.side)) : this instanceof X.MeshPhongMaterial ? (e.color = this.color.getHex(), e.emissive = this.emissive.getHex(), e.specular = this.specular.getHex(), e.shininess = this.shininess, this.vertexColors !== X.NoColors && (e.vertexColors = this.vertexColors), this.shading !== X.SmoothShading && (e.shading = this.shading), this.blending !== X.NormalBlending && (e.blending = this.blending), this.side !== X.FrontSide && (e.side = this.side)) : this instanceof X.MeshNormalMaterial || this instanceof X.MeshDepthMaterial ? (this.blending !== X.NormalBlending && (e.blending = this.blending), this.side !== X.FrontSide && (e.side = this.side)) : this instanceof X.PointCloudMaterial ? (e.size = this.size, e.sizeAttenuation = this.sizeAttenuation, e.color = this.color.getHex(), this.vertexColors !== X.NoColors && (e.vertexColors = this.vertexColors), this.blending !== X.NormalBlending && (e.blending = this.blending)) : this instanceof X.ShaderMaterial ? (e.uniforms = this.uniforms, e.vertexShader = this.vertexShader, e.fragmentShader = this.fragmentShader) : this instanceof X.SpriteMaterial && (e.color = this.color.getHex()), this.opacity < 1 && (e.opacity = this.opacity), !1 !== this.transparent && (e.transparent = this.transparent), !1 !== this.wireframe && (e.wireframe = this.wireframe), e
        },
        clone: function (e) {
          return void 0 === e && (e = new X.Material), e.name = this.name, e.side = this.side, e.opacity = this.opacity, e.transparent = this.transparent, e.blending = this.blending, e.blendSrc = this.blendSrc, e.blendDst = this.blendDst, e.blendEquation = this.blendEquation, e.blendSrcAlpha = this.blendSrcAlpha, e.blendDstAlpha = this.blendDstAlpha, e.blendEquationAlpha = this.blendEquationAlpha, e.depthTest = this.depthTest, e.depthWrite = this.depthWrite, e.polygonOffset = this.polygonOffset, e.polygonOffsetFactor = this.polygonOffsetFactor, e.polygonOffsetUnits = this.polygonOffsetUnits, e.alphaTest = this.alphaTest, e.overdraw = this.overdraw, e.visible = this.visible, e
        },
        update: function () {
          this.dispatchEvent({
            type: "update"
          })
        },
        dispose: function () {
          this.dispatchEvent({
            type: "dispose"
          })
        }
      }, X.EventDispatcher.prototype.apply(X.Material.prototype), X.MaterialIdCount = 0, X.LineBasicMaterial = function (e) {
        X.Material.call(this), this.type = "LineBasicMaterial", this.color = new X.Color(16777215), this.linewidth = 1, this.linecap = "round", this.linejoin = "round", this.vertexColors = X.NoColors, this.fog = !0, this.setValues(e)
      }, X.LineBasicMaterial.prototype = Object.create(X.Material.prototype), X.LineBasicMaterial.prototype.constructor = X.LineBasicMaterial, X.LineBasicMaterial.prototype.clone = function () {
        var e = new X.LineBasicMaterial;
        return X.Material.prototype.clone.call(this, e), e.color.copy(this.color), e.linewidth = this.linewidth, e.linecap = this.linecap, e.linejoin = this.linejoin, e.vertexColors = this.vertexColors, e.fog = this.fog, e
      }, X.LineDashedMaterial = function (e) {
        X.Material.call(this), this.type = "LineDashedMaterial", this.color = new X.Color(16777215), this.linewidth = 1, this.scale = 1, this.dashSize = 3, this.gapSize = 1, this.vertexColors = !1, this.fog = !0, this.setValues(e)
      }, X.LineDashedMaterial.prototype = Object.create(X.Material.prototype), X.LineDashedMaterial.prototype.constructor = X.LineDashedMaterial, X.LineDashedMaterial.prototype.clone = function () {
        var e = new X.LineDashedMaterial;
        return X.Material.prototype.clone.call(this, e), e.color.copy(this.color), e.linewidth = this.linewidth, e.scale = this.scale, e.dashSize = this.dashSize, e.gapSize = this.gapSize, e.vertexColors = this.vertexColors, e.fog = this.fog, e
      }, X.MeshBasicMaterial = function (e) {
        X.Material.call(this), this.type = "MeshBasicMaterial", this.color = new X.Color(16777215), this.map = null, this.lightMap = null, this.specularMap = null, this.alphaMap = null, this.envMap = null, this.combine = X.MultiplyOperation, this.reflectivity = 1, this.refractionRatio = .98, this.fog = !0, this.shading = X.SmoothShading, this.wireframe = !1, this.wireframeLinewidth = 1, this.wireframeLinecap = "round", this.wireframeLinejoin = "round", this.vertexColors = X.NoColors, this.skinning = !1, this.morphTargets = !1, this.setValues(e)
      }, X.MeshBasicMaterial.prototype = Object.create(X.Material.prototype), X.MeshBasicMaterial.prototype.constructor = X.MeshBasicMaterial, X.MeshBasicMaterial.prototype.clone = function () {
        var e = new X.MeshBasicMaterial;
        return X.Material.prototype.clone.call(this, e), e.color.copy(this.color), e.map = this.map, e.lightMap = this.lightMap, e.specularMap = this.specularMap, e.alphaMap = this.alphaMap, e.envMap = this.envMap, e.combine = this.combine, e.reflectivity = this.reflectivity, e.refractionRatio = this.refractionRatio, e.fog = this.fog, e.shading = this.shading, e.wireframe = this.wireframe, e.wireframeLinewidth = this.wireframeLinewidth, e.wireframeLinecap = this.wireframeLinecap, e.wireframeLinejoin = this.wireframeLinejoin, e.vertexColors = this.vertexColors, e.skinning = this.skinning, e.morphTargets = this.morphTargets, e
      }, X.MeshLambertMaterial = function (e) {
        X.Material.call(this), this.type = "MeshLambertMaterial", this.color = new X.Color(16777215), this.emissive = new X.Color(0), this.wrapAround = !1, this.wrapRGB = new X.Vector3(1, 1, 1), this.map = null, this.lightMap = null, this.specularMap = null, this.alphaMap = null, this.envMap = null, this.combine = X.MultiplyOperation, this.reflectivity = 1, this.refractionRatio = .98, this.fog = !0, this.shading = X.SmoothShading, this.wireframe = !1, this.wireframeLinewidth = 1, this.wireframeLinecap = "round", this.wireframeLinejoin = "round", this.vertexColors = X.NoColors, this.skinning = !1, this.morphTargets = !1, this.morphNormals = !1, this.setValues(e)
      }, X.MeshLambertMaterial.prototype = Object.create(X.Material.prototype), X.MeshLambertMaterial.prototype.constructor = X.MeshLambertMaterial, X.MeshLambertMaterial.prototype.clone = function () {
        var e = new X.MeshLambertMaterial;
        return X.Material.prototype.clone.call(this, e), e.color.copy(this.color), e.emissive.copy(this.emissive), e.wrapAround = this.wrapAround, e.wrapRGB.copy(this.wrapRGB), e.map = this.map, e.lightMap = this.lightMap, e.specularMap = this.specularMap, e.alphaMap = this.alphaMap, e.envMap = this.envMap, e.combine = this.combine, e.reflectivity = this.reflectivity, e.refractionRatio = this.refractionRatio, e.fog = this.fog, e.shading = this.shading, e.wireframe = this.wireframe, e.wireframeLinewidth = this.wireframeLinewidth, e.wireframeLinecap = this.wireframeLinecap, e.wireframeLinejoin = this.wireframeLinejoin, e.vertexColors = this.vertexColors, e.skinning = this.skinning, e.morphTargets = this.morphTargets, e.morphNormals = this.morphNormals, e
      }, X.MeshPhongMaterial = function (e) {
        X.Material.call(this), this.type = "MeshPhongMaterial", this.color = new X.Color(16777215), this.emissive = new X.Color(0), this.specular = new X.Color(1118481), this.shininess = 30, this.metal = !1, this.wrapAround = !1, this.wrapRGB = new X.Vector3(1, 1, 1), this.map = null, this.lightMap = null, this.bumpMap = null, this.bumpScale = 1, this.normalMap = null, this.normalScale = new X.Vector2(1, 1), this.specularMap = null, this.alphaMap = null, this.envMap = null, this.combine = X.MultiplyOperation, this.reflectivity = 1, this.refractionRatio = .98, this.fog = !0, this.shading = X.SmoothShading, this.wireframe = !1, this.wireframeLinewidth = 1, this.wireframeLinecap = "round", this.wireframeLinejoin = "round", this.vertexColors = X.NoColors, this.skinning = !1, this.morphTargets = !1, this.morphNormals = !1, this.setValues(e)
      }, X.MeshPhongMaterial.prototype = Object.create(X.Material.prototype), X.MeshPhongMaterial.prototype.constructor = X.MeshPhongMaterial, X.MeshPhongMaterial.prototype.clone = function () {
        var e = new X.MeshPhongMaterial;
        return X.Material.prototype.clone.call(this, e), e.color.copy(this.color), e.emissive.copy(this.emissive), e.specular.copy(this.specular), e.shininess = this.shininess, e.metal = this.metal, e.wrapAround = this.wrapAround, e.wrapRGB.copy(this.wrapRGB), e.map = this.map, e.lightMap = this.lightMap, e.bumpMap = this.bumpMap, e.bumpScale = this.bumpScale, e.normalMap = this.normalMap, e.normalScale.copy(this.normalScale), e.specularMap = this.specularMap, e.alphaMap = this.alphaMap, e.envMap = this.envMap, e.combine = this.combine, e.reflectivity = this.reflectivity, e.refractionRatio = this.refractionRatio, e.fog = this.fog, e.shading = this.shading, e.wireframe = this.wireframe, e.wireframeLinewidth = this.wireframeLinewidth, e.wireframeLinecap = this.wireframeLinecap, e.wireframeLinejoin = this.wireframeLinejoin, e.vertexColors = this.vertexColors, e.skinning = this.skinning, e.morphTargets = this.morphTargets, e.morphNormals = this.morphNormals, e
      }, X.MeshDepthMaterial = function (e) {
        X.Material.call(this), this.type = "MeshDepthMaterial", this.morphTargets = !1, this.wireframe = !1, this.wireframeLinewidth = 1, this.setValues(e)
      }, X.MeshDepthMaterial.prototype = Object.create(X.Material.prototype), X.MeshDepthMaterial.prototype.constructor = X.MeshDepthMaterial, X.MeshDepthMaterial.prototype.clone = function () {
        var e = new X.MeshDepthMaterial;
        return X.Material.prototype.clone.call(this, e), e.wireframe = this.wireframe, e.wireframeLinewidth = this.wireframeLinewidth, e
      }, X.MeshNormalMaterial = function (e) {
        X.Material.call(this, e), this.type = "MeshNormalMaterial", this.wireframe = !1, this.wireframeLinewidth = 1, this.morphTargets = !1, this.setValues(e)
      }, X.MeshNormalMaterial.prototype = Object.create(X.Material.prototype), X.MeshNormalMaterial.prototype.constructor = X.MeshNormalMaterial, X.MeshNormalMaterial.prototype.clone = function () {
        var e = new X.MeshNormalMaterial;
        return X.Material.prototype.clone.call(this, e), e.wireframe = this.wireframe, e.wireframeLinewidth = this.wireframeLinewidth, e
      }, X.MeshFaceMaterial = function (e) {
        this.uuid = X.Math.generateUUID(), this.type = "MeshFaceMaterial", this.materials = e instanceof Array ? e : []
      }, X.MeshFaceMaterial.prototype = {
        constructor: X.MeshFaceMaterial,
        toJSON: function () {
          for (var e = {
              metadata: {
                version: 4.2,
                type: "material",
                generator: "MaterialExporter"
              },
              uuid: this.uuid,
              type: this.type,
              materials: []
            }, t = 0, n = this.materials.length; t < n; t++) e.materials.push(this.materials[t].toJSON());
          return e
        },
        clone: function () {
          for (var e = new X.MeshFaceMaterial, t = 0; t < this.materials.length; t++) e.materials.push(this.materials[t].clone());
          return e
        }
      }, X.PointCloudMaterial = function (e) {
        X.Material.call(this), this.type = "PointCloudMaterial", this.color = new X.Color(16777215), this.map = null, this.size = 1, this.sizeAttenuation = !0, this.vertexColors = X.NoColors, this.fog = !0, this.setValues(e)
      }, X.PointCloudMaterial.prototype = Object.create(X.Material.prototype), X.PointCloudMaterial.prototype.constructor = X.PointCloudMaterial, X.PointCloudMaterial.prototype.clone = function () {
        var e = new X.PointCloudMaterial;
        return X.Material.prototype.clone.call(this, e), e.color.copy(this.color), e.map = this.map, e.size = this.size, e.sizeAttenuation = this.sizeAttenuation, e.vertexColors = this.vertexColors, e.fog = this.fog, e
      }, X.ParticleBasicMaterial = function (e) {
        return X.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointCloudMaterial."), new X.PointCloudMaterial(e)
      }, X.ParticleSystemMaterial = function (e) {
        return X.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointCloudMaterial."), new X.PointCloudMaterial(e)
      }, X.ShaderMaterial = function (e) {
        X.Material.call(this), this.type = "ShaderMaterial", this.defines = {}, this.uniforms = {}, this.attributes = null, this.vertexShader = "void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}", this.fragmentShader = "void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}", this.shading = X.SmoothShading, this.linewidth = 1, this.wireframe = !1, this.wireframeLinewidth = 1, this.fog = !1, this.lights = !1, this.vertexColors = X.NoColors, this.skinning = !1, this.morphTargets = !1, this.morphNormals = !1, this.defaultAttributeValues = {
          color: [1, 1, 1],
          uv: [0, 0],
          uv2: [0, 0]
        }, this.index0AttributeName = void 0, this.setValues(e)
      }, X.ShaderMaterial.prototype = Object.create(X.Material.prototype), X.ShaderMaterial.prototype.constructor = X.ShaderMaterial, X.ShaderMaterial.prototype.clone = function () {
        var e = new X.ShaderMaterial;
        return X.Material.prototype.clone.call(this, e), e.fragmentShader = this.fragmentShader, e.vertexShader = this.vertexShader, e.uniforms = X.UniformsUtils.clone(this.uniforms), e.attributes = this.attributes, e.defines = this.defines, e.shading = this.shading, e.wireframe = this.wireframe, e.wireframeLinewidth = this.wireframeLinewidth, e.fog = this.fog, e.lights = this.lights, e.vertexColors = this.vertexColors, e.skinning = this.skinning, e.morphTargets = this.morphTargets, e.morphNormals = this.morphNormals, e
      }, X.RawShaderMaterial = function (e) {
        X.ShaderMaterial.call(this, e), this.type = "RawShaderMaterial"
      }, X.RawShaderMaterial.prototype = Object.create(X.ShaderMaterial.prototype), X.RawShaderMaterial.prototype.constructor = X.RawShaderMaterial, X.RawShaderMaterial.prototype.clone = function () {
        var e = new X.RawShaderMaterial;
        return X.ShaderMaterial.prototype.clone.call(this, e), e
      }, X.SpriteMaterial = function (e) {
        X.Material.call(this), this.type = "SpriteMaterial", this.color = new X.Color(16777215), this.map = null, this.rotation = 0, this.fog = !1, this.setValues(e)
      }, X.SpriteMaterial.prototype = Object.create(X.Material.prototype), X.SpriteMaterial.prototype.constructor = X.SpriteMaterial, X.SpriteMaterial.prototype.clone = function () {
        var e = new X.SpriteMaterial;
        return X.Material.prototype.clone.call(this, e), e.color.copy(this.color), e.map = this.map, e.rotation = this.rotation, e.fog = this.fog, e
      }, X.Texture = function (e, t, n, i, r, o, a, s, l) {
        Object.defineProperty(this, "id", {
          value: X.TextureIdCount++
        }), this.uuid = X.Math.generateUUID(), this.name = "", this.sourceFile = "", this.image = void 0 !== e ? e : X.Texture.DEFAULT_IMAGE, this.mipmaps = [], this.mapping = void 0 !== t ? t : X.Texture.DEFAULT_MAPPING, this.wrapS = void 0 !== n ? n : X.ClampToEdgeWrapping, this.wrapT = void 0 !== i ? i : X.ClampToEdgeWrapping, this.magFilter = void 0 !== r ? r : X.LinearFilter, this.minFilter = void 0 !== o ? o : X.LinearMipMapLinearFilter, this.anisotropy = void 0 !== l ? l : 1, this.format = void 0 !== a ? a : X.RGBAFormat, this.type = void 0 !== s ? s : X.UnsignedByteType, this.offset = new X.Vector2(0, 0), this.repeat = new X.Vector2(1, 1), this.generateMipmaps = !0, this.premultiplyAlpha = !1, this.flipY = !0, this.unpackAlignment = 4, this._needsUpdate = !1, this.onUpdate = null
      }, X.Texture.DEFAULT_IMAGE = void 0, X.Texture.DEFAULT_MAPPING = X.UVMapping, X.Texture.prototype = {
        constructor: X.Texture,
        get needsUpdate() {
          return this._needsUpdate
        },
        set needsUpdate(e) {
          !0 === e && this.update(), this._needsUpdate = e
        },
        clone: function (e) {
          return void 0 === e && (e = new X.Texture), e.image = this.image, e.mipmaps = this.mipmaps.slice(0), e.mapping = this.mapping, e.wrapS = this.wrapS, e.wrapT = this.wrapT, e.magFilter = this.magFilter, e.minFilter = this.minFilter, e.anisotropy = this.anisotropy, e.format = this.format, e.type = this.type, e.offset.copy(this.offset), e.repeat.copy(this.repeat), e.generateMipmaps = this.generateMipmaps, e.premultiplyAlpha = this.premultiplyAlpha, e.flipY = this.flipY, e.unpackAlignment = this.unpackAlignment, e
        },
        update: function () {
          this.dispatchEvent({
            type: "update"
          })
        },
        dispose: function () {
          this.dispatchEvent({
            type: "dispose"
          })
        }
      }, X.EventDispatcher.prototype.apply(X.Texture.prototype), X.TextureIdCount = 0, X.CubeTexture = function (e, t, n, i, r, o, a, s, l) {
        t = void 0 !== t ? t : X.CubeReflectionMapping, X.Texture.call(this, e, t, n, i, r, o, a, s, l), this.images = e
      }, X.CubeTexture.prototype = Object.create(X.Texture.prototype), X.CubeTexture.prototype.constructor = X.CubeTexture, X.CubeTexture.clone = function (e) {
        return void 0 === e && (e = new X.CubeTexture), X.Texture.prototype.clone.call(this, e), e.images = this.images, e
      }, X.CompressedTexture = function (e, t, n, i, r, o, a, s, l, c, u) {
        X.Texture.call(this, null, o, a, s, l, c, i, r, u), this.image = {
          width: t,
          height: n
        }, this.mipmaps = e, this.flipY = !1, this.generateMipmaps = !1
      }, X.CompressedTexture.prototype = Object.create(X.Texture.prototype), X.CompressedTexture.prototype.constructor = X.CompressedTexture, X.CompressedTexture.prototype.clone = function () {
        var e = new X.CompressedTexture;
        return X.Texture.prototype.clone.call(this, e), e
      }, X.DataTexture = function (e, t, n, i, r, o, a, s, l, c, u) {
        X.Texture.call(this, null, o, a, s, l, c, i, r, u), this.image = {
          data: e,
          width: t,
          height: n
        }
      }, X.DataTexture.prototype = Object.create(X.Texture.prototype), X.DataTexture.prototype.constructor = X.DataTexture, X.DataTexture.prototype.clone = function () {
        var e = new X.DataTexture;
        return X.Texture.prototype.clone.call(this, e), e
      }, X.VideoTexture = function (e, t, n, i, r, o, a, s, l) {
        X.Texture.call(this, e, t, n, i, r, o, a, s, l), this.generateMipmaps = !1;
        var c = this;
        ! function t() {
          requestAnimationFrame(t), e.readyState === e.HAVE_ENOUGH_DATA && (c.needsUpdate = !0)
        }()
      }, X.VideoTexture.prototype = Object.create(X.Texture.prototype), X.VideoTexture.prototype.constructor = X.VideoTexture, X.Group = function () {
        X.Object3D.call(this), this.type = "Group"
      }, X.Group.prototype = Object.create(X.Object3D.prototype), X.Group.prototype.constructor = X.Group, X.PointCloud = function (e, t) {
        X.Object3D.call(this), this.type = "PointCloud", this.geometry = void 0 !== e ? e : new X.Geometry, this.material = void 0 !== t ? t : new X.PointCloudMaterial({
          color: 16777215 * Math.random()
        })
      }, X.PointCloud.prototype = Object.create(X.Object3D.prototype), X.PointCloud.prototype.constructor = X.PointCloud, X.PointCloud.prototype.raycast = (T = new X.Matrix4, C = new X.Ray, function (e, t) {
        var n = this,
          i = n.geometry,
          r = e.params.PointCloud.threshold;
        if (T.getInverse(this.matrixWorld), C.copy(e.ray).applyMatrix4(T), null === i.boundingBox || !1 !== C.isIntersectionBox(i.boundingBox)) {
          var o = r / ((this.scale.x + this.scale.y + this.scale.z) / 3),
            a = new X.Vector3,
            s = function (i, r) {
              var a = C.distanceToPoint(i);
              if (a < o) {
                var s = C.closestPointToPoint(i);
                s.applyMatrix4(n.matrixWorld);
                var l = e.ray.origin.distanceTo(s);
                t.push({
                  distance: l,
                  distanceToRay: a,
                  point: s.clone(),
                  index: r,
                  face: null,
                  object: n
                })
              }
            };
          if (i instanceof X.BufferGeometry) {
            var l = i.attributes,
              c = l.position.array;
            if (void 0 !== l.index) {
              var u = l.index.array,
                h = i.offsets;
              0 === h.length && (h = [{
                start: 0,
                count: u.length,
                index: 0
              }]);
              for (var d = 0, f = h.length; d < f; ++d)
                for (var p = h[d].start, m = h[d].count, g = h[d].index, v = p, y = p + m; v < y; v++) {
                  var b = g + u[v];
                  a.fromArray(c, 3 * b), s(a, b)
                }
            } else {
              var _ = c.length / 3;
              for (v = 0; v < _; v++) a.set(c[3 * v], c[3 * v + 1], c[3 * v + 2]), s(a, v)
            }
          } else {
            var x = this.geometry.vertices;
            for (v = 0; v < x.length; v++) s(x[v], v)
          }
        }
      }), X.PointCloud.prototype.clone = function (e) {
        return void 0 === e && (e = new X.PointCloud(this.geometry, this.material)), X.Object3D.prototype.clone.call(this, e), e
      }, X.ParticleSystem = function (e, t) {
        return X.warn("THREE.ParticleSystem has been renamed to THREE.PointCloud."), new X.PointCloud(e, t)
      }, X.Line = function (e, t, n) {
        X.Object3D.call(this), this.type = "Line", this.geometry = void 0 !== e ? e : new X.Geometry, this.material = void 0 !== t ? t : new X.LineBasicMaterial({
          color: 16777215 * Math.random()
        }), this.mode = void 0 !== n ? n : X.LineStrip
      }, X.LineStrip = 0, X.LinePieces = 1, X.Line.prototype = Object.create(X.Object3D.prototype), X.Line.prototype.constructor = X.Line, X.Line.prototype.raycast = function () {
        var e = new X.Matrix4,
          t = new X.Ray,
          n = new X.Sphere;
        return function (i, r) {
          var o = i.linePrecision,
            a = o * o,
            s = this.geometry;
          if (null === s.boundingSphere && s.computeBoundingSphere(), n.copy(s.boundingSphere), n.applyMatrix4(this.matrixWorld), !1 !== i.ray.isIntersectionSphere(n)) {
            e.getInverse(this.matrixWorld), t.copy(i.ray).applyMatrix4(e);
            var l = new X.Vector3,
              c = new X.Vector3,
              u = new X.Vector3,
              h = new X.Vector3,
              d = this.mode === X.LineStrip ? 1 : 2;
            if (s instanceof X.BufferGeometry) {
              var f = s.attributes;
              if (void 0 !== f.index) {
                var p = f.index.array,
                  m = f.position.array,
                  g = s.offsets;
                0 === g.length && (g = [{
                  start: 0,
                  count: p.length,
                  index: 0
                }]);
                for (var v = 0; v < g.length; v++)
                  for (var y = g[v].start, b = g[v].count, _ = g[v].index, x = y; x < y + b - 1; x += d) {
                    var w = _ + p[x],
                      E = _ + p[x + 1];
                    if (l.fromArray(m, 3 * w), c.fromArray(m, 3 * E), !(t.distanceSqToSegment(l, c, h, u) > a))(M = t.origin.distanceTo(h)) < i.near || M > i.far || r.push({
                      distance: M,
                      point: u.clone().applyMatrix4(this.matrixWorld),
                      index: x,
                      offsetIndex: v,
                      face: null,
                      faceIndex: null,
                      object: this
                    })
                  }
              } else
                for (m = f.position.array, x = 0; x < m.length / 3 - 1; x += d) {
                  if (l.fromArray(m, 3 * x), c.fromArray(m, 3 * x + 3), !(t.distanceSqToSegment(l, c, h, u) > a))(M = t.origin.distanceTo(h)) < i.near || M > i.far || r.push({
                    distance: M,
                    point: u.clone().applyMatrix4(this.matrixWorld),
                    index: x,
                    face: null,
                    faceIndex: null,
                    object: this
                  })
                }
            } else if (s instanceof X.Geometry) {
              var A = s.vertices,
                S = A.length;
              for (x = 0; x < S - 1; x += d) {
                var M;
                if (!(t.distanceSqToSegment(A[x], A[x + 1], h, u) > a))(M = t.origin.distanceTo(h)) < i.near || M > i.far || r.push({
                  distance: M,
                  point: u.clone().applyMatrix4(this.matrixWorld),
                  index: x,
                  face: null,
                  faceIndex: null,
                  object: this
                })
              }
            }
          }
        }
      }(), X.Line.prototype.clone = function (e) {
        return void 0 === e && (e = new X.Line(this.geometry, this.material, this.mode)), X.Object3D.prototype.clone.call(this, e), e
      }, X.Mesh = function (e, t) {
        X.Object3D.call(this), this.type = "Mesh", this.geometry = void 0 !== e ? e : new X.Geometry, this.material = void 0 !== t ? t : new X.MeshBasicMaterial({
          color: 16777215 * Math.random()
        }), this.updateMorphTargets()
      }, X.Mesh.prototype = Object.create(X.Object3D.prototype), X.Mesh.prototype.constructor = X.Mesh, X.Mesh.prototype.updateMorphTargets = function () {
        if (void 0 !== this.geometry.morphTargets && this.geometry.morphTargets.length > 0) {
          this.morphTargetBase = -1, this.morphTargetForcedOrder = [], this.morphTargetInfluences = [], this.morphTargetDictionary = {};
          for (var e = 0, t = this.geometry.morphTargets.length; e < t; e++) this.morphTargetInfluences.push(0), this.morphTargetDictionary[this.geometry.morphTargets[e].name] = e
        }
      }, X.Mesh.prototype.getMorphTargetIndexByName = function (e) {
        return void 0 !== this.morphTargetDictionary[e] ? this.morphTargetDictionary[e] : (X.warn("THREE.Mesh.getMorphTargetIndexByName: morph target " + e + " does not exist. Returning 0."), 0)
      }, X.Mesh.prototype.raycast = function () {
        var e = new X.Matrix4,
          t = new X.Ray,
          n = new X.Sphere,
          i = new X.Vector3,
          r = new X.Vector3,
          o = new X.Vector3;
        return function (a, s) {
          var l = this.geometry;
          if (null === l.boundingSphere && l.computeBoundingSphere(), n.copy(l.boundingSphere), n.applyMatrix4(this.matrixWorld), !1 !== a.ray.isIntersectionSphere(n) && (e.getInverse(this.matrixWorld), t.copy(a.ray).applyMatrix4(e), null === l.boundingBox || !1 !== t.isIntersectionBox(l.boundingBox)))
            if (l instanceof X.BufferGeometry) {
              if (void 0 === (D = this.material)) return;
              var c = l.attributes,
                u = a.precision;
              if (void 0 !== c.index) {
                var h = c.index.array,
                  d = c.position.array,
                  f = l.offsets;
                0 === f.length && (f = [{
                  start: 0,
                  count: h.length,
                  index: 0
                }]);
                for (var p = 0, m = f.length; p < m; ++p)
                  for (var g = f[p].start, v = f[p].count, y = f[p].index, b = g, _ = g + v; b < _; b += 3) {
                    if (E = y + h[b], A = y + h[b + 1], S = y + h[b + 2], i.fromArray(d, 3 * E), r.fromArray(d, 3 * A), o.fromArray(d, 3 * S), D.side === X.BackSide) var x = t.intersectTriangle(o, r, i, !0);
                    else x = t.intersectTriangle(i, r, o, D.side !== X.DoubleSide);
                    if (null !== x) x.applyMatrix4(this.matrixWorld), (V = a.ray.origin.distanceTo(x)) < u || V < a.near || V > a.far || s.push({
                      distance: V,
                      point: x,
                      face: new X.Face3(E, A, S, X.Triangle.normal(i, r, o)),
                      faceIndex: null,
                      object: this
                    })
                  }
              } else {
                b = 0;
                var w = 0;
                for (_ = (d = c.position.array).length; b < _; b += 3, w += 9) {
                  if (E = b, A = b + 1, S = b + 2, i.fromArray(d, w), r.fromArray(d, w + 3), o.fromArray(d, w + 6), D.side === X.BackSide) x = t.intersectTriangle(o, r, i, !0);
                  else x = t.intersectTriangle(i, r, o, D.side !== X.DoubleSide);
                  if (null !== x) x.applyMatrix4(this.matrixWorld), (V = a.ray.origin.distanceTo(x)) < u || V < a.near || V > a.far || s.push({
                    distance: V,
                    point: x,
                    face: new X.Face3(E, A, S, X.Triangle.normal(i, r, o)),
                    faceIndex: null,
                    object: this
                  })
                }
              }
            } else if (l instanceof X.Geometry)
            for (var E, A, S, M = this.material instanceof X.MeshFaceMaterial, T = !0 === M ? this.material.materials : null, C = (u = a.precision, l.vertices), P = 0, L = l.faces.length; P < L; P++) {
              var D, I = l.faces[P];
              if (void 0 !== (D = !0 === M ? T[I.materialIndex] : this.material)) {
                if (E = C[I.a], A = C[I.b], S = C[I.c], !0 === D.morphTargets) {
                  var R = l.morphTargets,
                    O = this.morphTargetInfluences;
                  i.set(0, 0, 0), r.set(0, 0, 0), o.set(0, 0, 0);
                  for (var k = 0, N = R.length; k < N; k++) {
                    var F = O[k];
                    if (0 !== F) {
                      var U = R[k].vertices;
                      i.x += (U[I.a].x - E.x) * F, i.y += (U[I.a].y - E.y) * F, i.z += (U[I.a].z - E.z) * F, r.x += (U[I.b].x - A.x) * F, r.y += (U[I.b].y - A.y) * F, r.z += (U[I.b].z - A.z) * F, o.x += (U[I.c].x - S.x) * F, o.y += (U[I.c].y - S.y) * F, o.z += (U[I.c].z - S.z) * F
                    }
                  }
                  i.add(E), r.add(A), o.add(S), E = i, A = r, S = o
                }
                if (D.side === X.BackSide) x = t.intersectTriangle(S, A, E, !0);
                else x = t.intersectTriangle(E, A, S, D.side !== X.DoubleSide);
                var V;
                if (null !== x) x.applyMatrix4(this.matrixWorld), (V = a.ray.origin.distanceTo(x)) < u || V < a.near || V > a.far || s.push({
                  distance: V,
                  point: x,
                  face: I,
                  faceIndex: P,
                  object: this
                })
              }
            }
        }
      }(), X.Mesh.prototype.clone = function (e, t) {
        return void 0 === e && (e = new X.Mesh(this.geometry, this.material)), X.Object3D.prototype.clone.call(this, e, t), e
      }, X.Bone = function (e) {
        X.Object3D.call(this), this.type = "Bone", this.skin = e
      }, X.Bone.prototype = Object.create(X.Object3D.prototype), X.Bone.prototype.constructor = X.Bone, X.Skeleton = function (e, t, n) {
        var i;
        (this.useVertexTexture = void 0 === n || n, this.identityMatrix = new X.Matrix4, e = e || [], this.bones = e.slice(0), this.useVertexTexture) ? (i = this.bones.length > 256 ? 64 : this.bones.length > 64 ? 32 : this.bones.length > 16 ? 16 : 8, this.boneTextureWidth = i, this.boneTextureHeight = i, this.boneMatrices = new Float32Array(this.boneTextureWidth * this.boneTextureHeight * 4), this.boneTexture = new X.DataTexture(this.boneMatrices, this.boneTextureWidth, this.boneTextureHeight, X.RGBAFormat, X.FloatType), this.boneTexture.minFilter = X.NearestFilter, this.boneTexture.magFilter = X.NearestFilter, this.boneTexture.generateMipmaps = !1, this.boneTexture.flipY = !1) : this.boneMatrices = new Float32Array(16 * this.bones.length);
        if (void 0 === t) this.calculateInverses();
        else if (this.bones.length === t.length) this.boneInverses = t.slice(0);
        else {
          X.warn("THREE.Skeleton bonInverses is the wrong length."), this.boneInverses = [];
          for (var r = 0, o = this.bones.length; r < o; r++) this.boneInverses.push(new X.Matrix4)
        }
      }, X.Skeleton.prototype.calculateInverses = function () {
        this.boneInverses = [];
        for (var e = 0, t = this.bones.length; e < t; e++) {
          var n = new X.Matrix4;
          this.bones[e] && n.getInverse(this.bones[e].matrixWorld), this.boneInverses.push(n)
        }
      }, X.Skeleton.prototype.pose = function () {
        for (var e, t = 0, n = this.bones.length; t < n; t++)(e = this.bones[t]) && e.matrixWorld.getInverse(this.boneInverses[t]);
        for (t = 0, n = this.bones.length; t < n; t++)(e = this.bones[t]) && (e.parent ? (e.matrix.getInverse(e.parent.matrixWorld), e.matrix.multiply(e.matrixWorld)) : e.matrix.copy(e.matrixWorld), e.matrix.decompose(e.position, e.quaternion, e.scale))
      }, X.Skeleton.prototype.update = (P = new X.Matrix4, function () {
        for (var e = 0, t = this.bones.length; e < t; e++) {
          var n = this.bones[e] ? this.bones[e].matrixWorld : this.identityMatrix;
          P.multiplyMatrices(n, this.boneInverses[e]), P.flattenToArrayOffset(this.boneMatrices, 16 * e)
        }
        this.useVertexTexture && (this.boneTexture.needsUpdate = !0)
      }), X.SkinnedMesh = function (e, t, n) {
        X.Mesh.call(this, e, t), this.type = "SkinnedMesh", this.bindMode = "attached", this.bindMatrix = new X.Matrix4, this.bindMatrixInverse = new X.Matrix4;
        var i = [];
        if (this.geometry && void 0 !== this.geometry.bones) {
          for (var r, o, a, s, l, c = 0, u = this.geometry.bones.length; c < u; ++c) a = (o = this.geometry.bones[c]).pos, s = o.rotq, l = o.scl, r = new X.Bone(this), i.push(r), r.name = o.name, r.position.set(a[0], a[1], a[2]), r.quaternion.set(s[0], s[1], s[2], s[3]), void 0 !== l ? r.scale.set(l[0], l[1], l[2]) : r.scale.set(1, 1, 1);
          for (c = 0, u = this.geometry.bones.length; c < u; ++c) - 1 !== (o = this.geometry.bones[c]).parent ? i[o.parent].add(i[c]) : this.add(i[c])
        }
        this.normalizeSkinWeights(), this.updateMatrixWorld(!0), this.bind(new X.Skeleton(i, void 0, n))
      }, X.SkinnedMesh.prototype = Object.create(X.Mesh.prototype), X.SkinnedMesh.prototype.constructor = X.SkinnedMesh, X.SkinnedMesh.prototype.bind = function (e, t) {
        this.skeleton = e, void 0 === t && (this.updateMatrixWorld(!0), t = this.matrixWorld), this.bindMatrix.copy(t), this.bindMatrixInverse.getInverse(t)
      }, X.SkinnedMesh.prototype.pose = function () {
        this.skeleton.pose()
      }, X.SkinnedMesh.prototype.normalizeSkinWeights = function () {
        if (this.geometry instanceof X.Geometry)
          for (var e = 0; e < this.geometry.skinIndices.length; e++) {
            var t = this.geometry.skinWeights[e],
              n = 1 / t.lengthManhattan();
            n !== 1 / 0 ? t.multiplyScalar(n) : t.set(1)
          }
      }, X.SkinnedMesh.prototype.updateMatrixWorld = function (e) {
        X.Mesh.prototype.updateMatrixWorld.call(this, !0), "attached" === this.bindMode ? this.bindMatrixInverse.getInverse(this.matrixWorld) : "detached" === this.bindMode ? this.bindMatrixInverse.getInverse(this.bindMatrix) : X.warn("THREE.SkinnedMesh unreckognized bindMode: " + this.bindMode)
      }, X.SkinnedMesh.prototype.clone = function (e) {
        return void 0 === e && (e = new X.SkinnedMesh(this.geometry, this.material, this.useVertexTexture)), X.Mesh.prototype.clone.call(this, e), e
      }, X.MorphAnimMesh = function (e, t) {
        X.Mesh.call(this, e, t), this.type = "MorphAnimMesh", this.duration = 1e3, this.mirroredLoop = !1, this.time = 0, this.lastKeyframe = 0, this.currentKeyframe = 0, this.direction = 1, this.directionBackwards = !1, this.setFrameRange(0, this.geometry.morphTargets.length - 1)
      }, X.MorphAnimMesh.prototype = Object.create(X.Mesh.prototype), X.MorphAnimMesh.prototype.constructor = X.MorphAnimMesh, X.MorphAnimMesh.prototype.setFrameRange = function (e, t) {
        this.startKeyframe = e, this.endKeyframe = t, this.length = this.endKeyframe - this.startKeyframe + 1
      }, X.MorphAnimMesh.prototype.setDirectionForward = function () {
        this.direction = 1, this.directionBackwards = !1
      }, X.MorphAnimMesh.prototype.setDirectionBackward = function () {
        this.direction = -1, this.directionBackwards = !0
      }, X.MorphAnimMesh.prototype.parseAnimations = function () {
        var e = this.geometry;
        e.animations || (e.animations = {});
        for (var t, n = e.animations, i = /([a-z]+)_?(\d+)/, r = 0, o = e.morphTargets.length; r < o; r++) {
          var a = e.morphTargets[r].name.match(i);
          if (a && a.length > 1) {
            var s = a[1];
            n[s] || (n[s] = {
              start: 1 / 0,
              end: -1 / 0
            });
            var l = n[s];
            r < l.start && (l.start = r), r > l.end && (l.end = r), t || (t = s)
          }
        }
        e.firstAnimation = t
      }, X.MorphAnimMesh.prototype.setAnimationLabel = function (e, t, n) {
        this.geometry.animations || (this.geometry.animations = {}), this.geometry.animations[e] = {
          start: t,
          end: n
        }
      }, X.MorphAnimMesh.prototype.playAnimation = function (e, t) {
        var n = this.geometry.animations[e];
        n ? (this.setFrameRange(n.start, n.end), this.duration = (n.end - n.start) / t * 1e3, this.time = 0) : X.warn("THREE.MorphAnimMesh: animation[" + e + "] undefined in .playAnimation()")
      }, X.MorphAnimMesh.prototype.updateAnimation = function (e) {
        var t = this.duration / this.length;
        this.time += this.direction * e, this.mirroredLoop ? (this.time > this.duration || this.time < 0) && (this.direction *= -1, this.time > this.duration && (this.time = this.duration, this.directionBackwards = !0), this.time < 0 && (this.time = 0, this.directionBackwards = !1)) : (this.time = this.time % this.duration, this.time < 0 && (this.time += this.duration));
        var n = this.startKeyframe + X.Math.clamp(Math.floor(this.time / t), 0, this.length - 1);
        n !== this.currentKeyframe && (this.morphTargetInfluences[this.lastKeyframe] = 0, this.morphTargetInfluences[this.currentKeyframe] = 1, this.morphTargetInfluences[n] = 0, this.lastKeyframe = this.currentKeyframe, this.currentKeyframe = n);
        var i = this.time % t / t;
        this.directionBackwards && (i = 1 - i), this.morphTargetInfluences[this.currentKeyframe] = i, this.morphTargetInfluences[this.lastKeyframe] = 1 - i
      }, X.MorphAnimMesh.prototype.interpolateTargets = function (e, t, n) {
        for (var i = this.morphTargetInfluences, r = 0, o = i.length; r < o; r++) i[r] = 0;
        e > -1 && (i[e] = 1 - n), t > -1 && (i[t] = n)
      }, X.MorphAnimMesh.prototype.clone = function (e) {
        return void 0 === e && (e = new X.MorphAnimMesh(this.geometry, this.material)), e.duration = this.duration, e.mirroredLoop = this.mirroredLoop, e.time = this.time, e.lastKeyframe = this.lastKeyframe, e.currentKeyframe = this.currentKeyframe, e.direction = this.direction, e.directionBackwards = this.directionBackwards, X.Mesh.prototype.clone.call(this, e), e
      }, X.LOD = function () {
        X.Object3D.call(this), this.objects = []
      }, X.LOD.prototype = Object.create(X.Object3D.prototype), X.LOD.prototype.constructor = X.LOD, X.LOD.prototype.addLevel = function (e, t) {
        void 0 === t && (t = 0), t = Math.abs(t);
        for (var n = 0; n < this.objects.length && !(t < this.objects[n].distance); n++);
        this.objects.splice(n, 0, {
          distance: t,
          object: e
        }), this.add(e)
      }, X.LOD.prototype.getObjectForDistance = function (e) {
        for (var t = 1, n = this.objects.length; t < n && !(e < this.objects[t].distance); t++);
        return this.objects[t - 1].object
      }, X.LOD.prototype.raycast = (L = new X.Vector3, function (e, t) {
        L.setFromMatrixPosition(this.matrixWorld);
        var n = e.ray.origin.distanceTo(L);
        this.getObjectForDistance(n).raycast(e, t)
      }), X.LOD.prototype.update = function () {
        var e = new X.Vector3,
          t = new X.Vector3;
        return function (n) {
          if (this.objects.length > 1) {
            e.setFromMatrixPosition(n.matrixWorld), t.setFromMatrixPosition(this.matrixWorld);
            var i = e.distanceTo(t);
            this.objects[0].object.visible = !0;
            for (var r = 1, o = this.objects.length; r < o && i >= this.objects[r].distance; r++) this.objects[r - 1].object.visible = !1, this.objects[r].object.visible = !0;
            for (; r < o; r++) this.objects[r].object.visible = !1
          }
        }
      }(), X.LOD.prototype.clone = function (e) {
        void 0 === e && (e = new X.LOD), X.Object3D.prototype.clone.call(this, e);
        for (var t = 0, n = this.objects.length; t < n; t++) {
          var i = this.objects[t].object.clone();
          i.visible = 0 === t, e.addLevel(i, this.objects[t].distance)
        }
        return e
      }, X.Sprite = (D = new Uint16Array([0, 1, 2, 0, 2, 3]), I = new Float32Array([-.5, -.5, 0, .5, -.5, 0, .5, .5, 0, -.5, .5, 0]), R = new Float32Array([0, 0, 1, 0, 1, 1, 0, 1]), (O = new X.BufferGeometry).addAttribute("index", new X.BufferAttribute(D, 1)), O.addAttribute("position", new X.BufferAttribute(I, 3)), O.addAttribute("uv", new X.BufferAttribute(R, 2)), function (e) {
        X.Object3D.call(this), this.type = "Sprite", this.geometry = O, this.material = void 0 !== e ? e : new X.SpriteMaterial
      }), X.Sprite.prototype = Object.create(X.Object3D.prototype), X.Sprite.prototype.constructor = X.Sprite, X.Sprite.prototype.raycast = function () {
        var e = new X.Vector3;
        return function (t, n) {
          e.setFromMatrixPosition(this.matrixWorld);
          var i = t.ray.distanceToPoint(e);
          i > this.scale.x || n.push({
            distance: i,
            point: this.position,
            face: null,
            object: this
          })
        }
      }(), X.Sprite.prototype.clone = function (e) {
        return void 0 === e && (e = new X.Sprite(this.material)), X.Object3D.prototype.clone.call(this, e), e
      }, X.Particle = X.Sprite, X.LensFlare = function (e, t, n, i, r) {
        X.Object3D.call(this), this.lensFlares = [], this.positionScreen = new X.Vector3, this.customUpdateCallback = void 0, void 0 !== e && this.add(e, t, n, i, r)
      }, X.LensFlare.prototype = Object.create(X.Object3D.prototype), X.LensFlare.prototype.constructor = X.LensFlare, X.LensFlare.prototype.add = function (e, t, n, i, r, o) {
        void 0 === t && (t = -1), void 0 === n && (n = 0), void 0 === o && (o = 1), void 0 === r && (r = new X.Color(16777215)), void 0 === i && (i = X.NormalBlending), n = Math.min(n, Math.max(0, n)), this.lensFlares.push({
          texture: e,
          size: t,
          distance: n,
          x: 0,
          y: 0,
          z: 0,
          scale: 1,
          rotation: 1,
          opacity: o,
          color: r,
          blending: i
        })
      }, X.LensFlare.prototype.updateLensFlares = function () {
        var e, t, n = this.lensFlares.length,
          i = 2 * -this.positionScreen.x,
          r = 2 * -this.positionScreen.y;
        for (e = 0; e < n; e++)(t = this.lensFlares[e]).x = this.positionScreen.x + i * t.distance, t.y = this.positionScreen.y + r * t.distance, t.wantedRotation = t.x * Math.PI * .25, t.rotation += .25 * (t.wantedRotation - t.rotation)
      }, X.Scene = function () {
        X.Object3D.call(this), this.type = "Scene", this.fog = null, this.overrideMaterial = null, this.autoUpdate = !0
      }, X.Scene.prototype = Object.create(X.Object3D.prototype), X.Scene.prototype.constructor = X.Scene, X.Scene.prototype.clone = function (e) {
        return void 0 === e && (e = new X.Scene), X.Object3D.prototype.clone.call(this, e), null !== this.fog && (e.fog = this.fog.clone()), null !== this.overrideMaterial && (e.overrideMaterial = this.overrideMaterial.clone()), e.autoUpdate = this.autoUpdate, e.matrixAutoUpdate = this.matrixAutoUpdate, e
      }, X.Fog = function (e, t, n) {
        this.name = "", this.color = new X.Color(e), this.near = void 0 !== t ? t : 1, this.far = void 0 !== n ? n : 1e3
      }, X.Fog.prototype.clone = function () {
        return new X.Fog(this.color.getHex(), this.near, this.far)
      }, X.FogExp2 = function (e, t) {
        this.name = "", this.color = new X.Color(e), this.density = void 0 !== t ? t : 25e-5
      }, X.FogExp2.prototype.clone = function () {
        return new X.FogExp2(this.color.getHex(), this.density)
      }, X.ShaderChunk = {}, X.ShaderChunk.common = "#define PI 3.14159\n#define PI2 6.28318\n#define RECIPROCAL_PI2 0.15915494\n#define LOG2 1.442695\n#define EPSILON 1e-6\n\nfloat square( in float a ) { return a*a; }\nvec2  square( in vec2 a )  { return vec2( a.x*a.x, a.y*a.y ); }\nvec3  square( in vec3 a )  { return vec3( a.x*a.x, a.y*a.y, a.z*a.z ); }\nvec4  square( in vec4 a )  { return vec4( a.x*a.x, a.y*a.y, a.z*a.z, a.w*a.w ); }\nfloat saturate( in float a ) { return clamp( a, 0.0, 1.0 ); }\nvec2  saturate( in vec2 a )  { return clamp( a, 0.0, 1.0 ); }\nvec3  saturate( in vec3 a )  { return clamp( a, 0.0, 1.0 ); }\nvec4  saturate( in vec4 a )  { return clamp( a, 0.0, 1.0 ); }\nfloat average( in float a ) { return a; }\nfloat average( in vec2 a )  { return ( a.x + a.y) * 0.5; }\nfloat average( in vec3 a )  { return ( a.x + a.y + a.z) / 3.0; }\nfloat average( in vec4 a )  { return ( a.x + a.y + a.z + a.w) * 0.25; }\nfloat whiteCompliment( in float a ) { return saturate( 1.0 - a ); }\nvec2  whiteCompliment( in vec2 a )  { return saturate( vec2(1.0) - a ); }\nvec3  whiteCompliment( in vec3 a )  { return saturate( vec3(1.0) - a ); }\nvec4  whiteCompliment( in vec4 a )  { return saturate( vec4(1.0) - a ); }\nvec3 transformDirection( in vec3 normal, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( normal, 0.0 ) ).xyz );\n}\n// http://en.wikibooks.org/wiki/GLSL_Programming/Applying_Matrix_Transformations\nvec3 inverseTransformDirection( in vec3 normal, in mat4 matrix ) {\n\treturn normalize( ( vec4( normal, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal) {\n\tfloat distance = dot( planeNormal, point-pointOnPlane );\n\treturn point - distance * planeNormal;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn pointOnLine + lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) );\n}\nfloat calcLightAttenuation( float lightDistance, float cutoffDistance, float decayExponent ) {\n\tif ( decayExponent > 0.0 ) {\n\t  return pow( saturate( 1.0 - lightDistance / cutoffDistance ), decayExponent );\n\t}\n\treturn 1.0;\n}\n\nvec3 inputToLinear( in vec3 a ) {\n#ifdef GAMMA_INPUT\n\treturn pow( a, vec3( float( GAMMA_FACTOR ) ) );\n#else\n\treturn a;\n#endif\n}\nvec3 linearToOutput( in vec3 a ) {\n#ifdef GAMMA_OUTPUT\n\treturn pow( a, vec3( 1.0 / float( GAMMA_FACTOR ) ) );\n#else\n\treturn a;\n#endif\n}\n", X.ShaderChunk.alphatest_fragment = "#ifdef ALPHATEST\n\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n\n#endif\n", X.ShaderChunk.lights_lambert_vertex = "vLightFront = vec3( 0.0 );\n\n#ifdef DOUBLE_SIDED\n\n\tvLightBack = vec3( 0.0 );\n\n#endif\n\ntransformedNormal = normalize( transformedNormal );\n\n#if MAX_DIR_LIGHTS > 0\n\nfor( int i = 0; i < MAX_DIR_LIGHTS; i ++ ) {\n\n\tvec3 dirVector = transformDirection( directionalLightDirection[ i ], viewMatrix );\n\n\tfloat dotProduct = dot( transformedNormal, dirVector );\n\tvec3 directionalLightWeighting = vec3( max( dotProduct, 0.0 ) );\n\n\t#ifdef DOUBLE_SIDED\n\n\t\tvec3 directionalLightWeightingBack = vec3( max( -dotProduct, 0.0 ) );\n\n\t\t#ifdef WRAP_AROUND\n\n\t\t\tvec3 directionalLightWeightingHalfBack = vec3( max( -0.5 * dotProduct + 0.5, 0.0 ) );\n\n\t\t#endif\n\n\t#endif\n\n\t#ifdef WRAP_AROUND\n\n\t\tvec3 directionalLightWeightingHalf = vec3( max( 0.5 * dotProduct + 0.5, 0.0 ) );\n\t\tdirectionalLightWeighting = mix( directionalLightWeighting, directionalLightWeightingHalf, wrapRGB );\n\n\t\t#ifdef DOUBLE_SIDED\n\n\t\t\tdirectionalLightWeightingBack = mix( directionalLightWeightingBack, directionalLightWeightingHalfBack, wrapRGB );\n\n\t\t#endif\n\n\t#endif\n\n\tvLightFront += directionalLightColor[ i ] * directionalLightWeighting;\n\n\t#ifdef DOUBLE_SIDED\n\n\t\tvLightBack += directionalLightColor[ i ] * directionalLightWeightingBack;\n\n\t#endif\n\n}\n\n#endif\n\n#if MAX_POINT_LIGHTS > 0\n\n\tfor( int i = 0; i < MAX_POINT_LIGHTS; i ++ ) {\n\n\t\tvec4 lPosition = viewMatrix * vec4( pointLightPosition[ i ], 1.0 );\n\t\tvec3 lVector = lPosition.xyz - mvPosition.xyz;\n\n\t\tfloat attenuation = calcLightAttenuation( length( lVector ), pointLightDistance[ i ], pointLightDecay[ i ] );\n\n\t\tlVector = normalize( lVector );\n\t\tfloat dotProduct = dot( transformedNormal, lVector );\n\n\t\tvec3 pointLightWeighting = vec3( max( dotProduct, 0.0 ) );\n\n\t\t#ifdef DOUBLE_SIDED\n\n\t\t\tvec3 pointLightWeightingBack = vec3( max( -dotProduct, 0.0 ) );\n\n\t\t\t#ifdef WRAP_AROUND\n\n\t\t\t\tvec3 pointLightWeightingHalfBack = vec3( max( -0.5 * dotProduct + 0.5, 0.0 ) );\n\n\t\t\t#endif\n\n\t\t#endif\n\n\t\t#ifdef WRAP_AROUND\n\n\t\t\tvec3 pointLightWeightingHalf = vec3( max( 0.5 * dotProduct + 0.5, 0.0 ) );\n\t\t\tpointLightWeighting = mix( pointLightWeighting, pointLightWeightingHalf, wrapRGB );\n\n\t\t\t#ifdef DOUBLE_SIDED\n\n\t\t\t\tpointLightWeightingBack = mix( pointLightWeightingBack, pointLightWeightingHalfBack, wrapRGB );\n\n\t\t\t#endif\n\n\t\t#endif\n\n\t\tvLightFront += pointLightColor[ i ] * pointLightWeighting * attenuation;\n\n\t\t#ifdef DOUBLE_SIDED\n\n\t\t\tvLightBack += pointLightColor[ i ] * pointLightWeightingBack * attenuation;\n\n\t\t#endif\n\n\t}\n\n#endif\n\n#if MAX_SPOT_LIGHTS > 0\n\n\tfor( int i = 0; i < MAX_SPOT_LIGHTS; i ++ ) {\n\n\t\tvec4 lPosition = viewMatrix * vec4( spotLightPosition[ i ], 1.0 );\n\t\tvec3 lVector = lPosition.xyz - mvPosition.xyz;\n\n\t\tfloat spotEffect = dot( spotLightDirection[ i ], normalize( spotLightPosition[ i ] - worldPosition.xyz ) );\n\n\t\tif ( spotEffect > spotLightAngleCos[ i ] ) {\n\n\t\t\tspotEffect = max( pow( max( spotEffect, 0.0 ), spotLightExponent[ i ] ), 0.0 );\n\n\t\t\tfloat attenuation = calcLightAttenuation( length( lVector ), spotLightDistance[ i ], spotLightDecay[ i ] );\n\n\t\t\tlVector = normalize( lVector );\n\n\t\t\tfloat dotProduct = dot( transformedNormal, lVector );\n\t\t\tvec3 spotLightWeighting = vec3( max( dotProduct, 0.0 ) );\n\n\t\t\t#ifdef DOUBLE_SIDED\n\n\t\t\t\tvec3 spotLightWeightingBack = vec3( max( -dotProduct, 0.0 ) );\n\n\t\t\t\t#ifdef WRAP_AROUND\n\n\t\t\t\t\tvec3 spotLightWeightingHalfBack = vec3( max( -0.5 * dotProduct + 0.5, 0.0 ) );\n\n\t\t\t\t#endif\n\n\t\t\t#endif\n\n\t\t\t#ifdef WRAP_AROUND\n\n\t\t\t\tvec3 spotLightWeightingHalf = vec3( max( 0.5 * dotProduct + 0.5, 0.0 ) );\n\t\t\t\tspotLightWeighting = mix( spotLightWeighting, spotLightWeightingHalf, wrapRGB );\n\n\t\t\t\t#ifdef DOUBLE_SIDED\n\n\t\t\t\t\tspotLightWeightingBack = mix( spotLightWeightingBack, spotLightWeightingHalfBack, wrapRGB );\n\n\t\t\t\t#endif\n\n\t\t\t#endif\n\n\t\t\tvLightFront += spotLightColor[ i ] * spotLightWeighting * attenuation * spotEffect;\n\n\t\t\t#ifdef DOUBLE_SIDED\n\n\t\t\t\tvLightBack += spotLightColor[ i ] * spotLightWeightingBack * attenuation * spotEffect;\n\n\t\t\t#endif\n\n\t\t}\n\n\t}\n\n#endif\n\n#if MAX_HEMI_LIGHTS > 0\n\n\tfor( int i = 0; i < MAX_HEMI_LIGHTS; i ++ ) {\n\n\t\tvec3 lVector = transformDirection( hemisphereLightDirection[ i ], viewMatrix );\n\n\t\tfloat dotProduct = dot( transformedNormal, lVector );\n\n\t\tfloat hemiDiffuseWeight = 0.5 * dotProduct + 0.5;\n\t\tfloat hemiDiffuseWeightBack = -0.5 * dotProduct + 0.5;\n\n\t\tvLightFront += mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeight );\n\n\t\t#ifdef DOUBLE_SIDED\n\n\t\t\tvLightBack += mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeightBack );\n\n\t\t#endif\n\n\t}\n\n#endif\n\nvLightFront += ambientLightColor;\n\n#ifdef DOUBLE_SIDED\n\n\tvLightBack += ambientLightColor;\n\n#endif\n", X.ShaderChunk.map_particle_pars_fragment = "#ifdef USE_MAP\n\n\tuniform vec4 offsetRepeat;\n\tuniform sampler2D map;\n\n#endif\n", X.ShaderChunk.default_vertex = "#ifdef USE_SKINNING\n\n\tvec4 mvPosition = modelViewMatrix * skinned;\n\n#elif defined( USE_MORPHTARGETS )\n\n\tvec4 mvPosition = modelViewMatrix * vec4( morphed, 1.0 );\n\n#else\n\n\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\n#endif\n\ngl_Position = projectionMatrix * mvPosition;\n", X.ShaderChunk.map_pars_fragment = "#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP )\n\n\tvarying vec2 vUv;\n\n#endif\n\n#ifdef USE_MAP\n\n\tuniform sampler2D map;\n\n#endif", X.ShaderChunk.skinnormal_vertex = "#ifdef USE_SKINNING\n\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\n\n\t#ifdef USE_MORPHNORMALS\n\n\tvec4 skinnedNormal = skinMatrix * vec4( morphedNormal, 0.0 );\n\n\t#else\n\n\tvec4 skinnedNormal = skinMatrix * vec4( normal, 0.0 );\n\n\t#endif\n\n#endif\n", X.ShaderChunk.logdepthbuf_pars_vertex = "#ifdef USE_LOGDEPTHBUF\n\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\n\t\tvarying float vFragDepth;\n\n\t#endif\n\n\tuniform float logDepthBufFC;\n\n#endif", X.ShaderChunk.lightmap_pars_vertex = "#ifdef USE_LIGHTMAP\n\n\tvarying vec2 vUv2;\n\n#endif", X.ShaderChunk.lights_phong_fragment = "#ifndef FLAT_SHADED\n\n\tvec3 normal = normalize( vNormal );\n\n\t#ifdef DOUBLE_SIDED\n\n\t\tnormal = normal * ( -1.0 + 2.0 * float( gl_FrontFacing ) );\n\n\t#endif\n\n#else\n\n\tvec3 fdx = dFdx( vViewPosition );\n\tvec3 fdy = dFdy( vViewPosition );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n\n#endif\n\nvec3 viewPosition = normalize( vViewPosition );\n\n#ifdef USE_NORMALMAP\n\n\tnormal = perturbNormal2Arb( -vViewPosition, normal );\n\n#elif defined( USE_BUMPMAP )\n\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n\n#endif\n\nvec3 totalDiffuseLight = vec3( 0.0 );\nvec3 totalSpecularLight = vec3( 0.0 );\n\n#if MAX_POINT_LIGHTS > 0\n\n\tfor ( int i = 0; i < MAX_POINT_LIGHTS; i ++ ) {\n\n\t\tvec4 lPosition = viewMatrix * vec4( pointLightPosition[ i ], 1.0 );\n\t\tvec3 lVector = lPosition.xyz + vViewPosition.xyz;\n\n\t\tfloat attenuation = calcLightAttenuation( length( lVector ), pointLightDistance[ i ], pointLightDecay[ i ] );\n\n\t\tlVector = normalize( lVector );\n\n\t\t// diffuse\n\n\t\tfloat dotProduct = dot( normal, lVector );\n\n\t\t#ifdef WRAP_AROUND\n\n\t\t\tfloat pointDiffuseWeightFull = max( dotProduct, 0.0 );\n\t\t\tfloat pointDiffuseWeightHalf = max( 0.5 * dotProduct + 0.5, 0.0 );\n\n\t\t\tvec3 pointDiffuseWeight = mix( vec3( pointDiffuseWeightFull ), vec3( pointDiffuseWeightHalf ), wrapRGB );\n\n\t\t#else\n\n\t\t\tfloat pointDiffuseWeight = max( dotProduct, 0.0 );\n\n\t\t#endif\n\n\t\ttotalDiffuseLight += pointLightColor[ i ] * pointDiffuseWeight * attenuation;\n\n\t\t\t\t// specular\n\n\t\tvec3 pointHalfVector = normalize( lVector + viewPosition );\n\t\tfloat pointDotNormalHalf = max( dot( normal, pointHalfVector ), 0.0 );\n\t\tfloat pointSpecularWeight = specularStrength * max( pow( pointDotNormalHalf, shininess ), 0.0 );\n\n\t\tfloat specularNormalization = ( shininess + 2.0 ) / 8.0;\n\n\t\tvec3 schlick = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( lVector, pointHalfVector ), 0.0 ), 5.0 );\n\t\ttotalSpecularLight += schlick * pointLightColor[ i ] * pointSpecularWeight * pointDiffuseWeight * attenuation * specularNormalization;\n\n\t}\n\n#endif\n\n#if MAX_SPOT_LIGHTS > 0\n\n\tfor ( int i = 0; i < MAX_SPOT_LIGHTS; i ++ ) {\n\n\t\tvec4 lPosition = viewMatrix * vec4( spotLightPosition[ i ], 1.0 );\n\t\tvec3 lVector = lPosition.xyz + vViewPosition.xyz;\n\n\t\tfloat attenuation = calcLightAttenuation( length( lVector ), spotLightDistance[ i ], spotLightDecay[ i ] );\n\n\t\tlVector = normalize( lVector );\n\n\t\tfloat spotEffect = dot( spotLightDirection[ i ], normalize( spotLightPosition[ i ] - vWorldPosition ) );\n\n\t\tif ( spotEffect > spotLightAngleCos[ i ] ) {\n\n\t\t\tspotEffect = max( pow( max( spotEffect, 0.0 ), spotLightExponent[ i ] ), 0.0 );\n\n\t\t\t// diffuse\n\n\t\t\tfloat dotProduct = dot( normal, lVector );\n\n\t\t\t#ifdef WRAP_AROUND\n\n\t\t\t\tfloat spotDiffuseWeightFull = max( dotProduct, 0.0 );\n\t\t\t\tfloat spotDiffuseWeightHalf = max( 0.5 * dotProduct + 0.5, 0.0 );\n\n\t\t\t\tvec3 spotDiffuseWeight = mix( vec3( spotDiffuseWeightFull ), vec3( spotDiffuseWeightHalf ), wrapRGB );\n\n\t\t\t#else\n\n\t\t\t\tfloat spotDiffuseWeight = max( dotProduct, 0.0 );\n\n\t\t\t#endif\n\n\t\t\ttotalDiffuseLight += spotLightColor[ i ] * spotDiffuseWeight * attenuation * spotEffect;\n\n\t\t\t// specular\n\n\t\t\tvec3 spotHalfVector = normalize( lVector + viewPosition );\n\t\t\tfloat spotDotNormalHalf = max( dot( normal, spotHalfVector ), 0.0 );\n\t\t\tfloat spotSpecularWeight = specularStrength * max( pow( spotDotNormalHalf, shininess ), 0.0 );\n\n\t\t\tfloat specularNormalization = ( shininess + 2.0 ) / 8.0;\n\n\t\t\tvec3 schlick = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( lVector, spotHalfVector ), 0.0 ), 5.0 );\n\t\t\ttotalSpecularLight += schlick * spotLightColor[ i ] * spotSpecularWeight * spotDiffuseWeight * attenuation * specularNormalization * spotEffect;\n\n\t\t}\n\n\t}\n\n#endif\n\n#if MAX_DIR_LIGHTS > 0\n\n\tfor( int i = 0; i < MAX_DIR_LIGHTS; i ++ ) {\n\n\t\tvec3 dirVector = transformDirection( directionalLightDirection[ i ], viewMatrix );\n\n\t\t// diffuse\n\n\t\tfloat dotProduct = dot( normal, dirVector );\n\n\t\t#ifdef WRAP_AROUND\n\n\t\t\tfloat dirDiffuseWeightFull = max( dotProduct, 0.0 );\n\t\t\tfloat dirDiffuseWeightHalf = max( 0.5 * dotProduct + 0.5, 0.0 );\n\n\t\t\tvec3 dirDiffuseWeight = mix( vec3( dirDiffuseWeightFull ), vec3( dirDiffuseWeightHalf ), wrapRGB );\n\n\t\t#else\n\n\t\t\tfloat dirDiffuseWeight = max( dotProduct, 0.0 );\n\n\t\t#endif\n\n\t\ttotalDiffuseLight += directionalLightColor[ i ] * dirDiffuseWeight;\n\n\t\t// specular\n\n\t\tvec3 dirHalfVector = normalize( dirVector + viewPosition );\n\t\tfloat dirDotNormalHalf = max( dot( normal, dirHalfVector ), 0.0 );\n\t\tfloat dirSpecularWeight = specularStrength * max( pow( dirDotNormalHalf, shininess ), 0.0 );\n\n\t\t/*\n\t\t// fresnel term from skin shader\n\t\tconst float F0 = 0.128;\n\n\t\tfloat base = 1.0 - dot( viewPosition, dirHalfVector );\n\t\tfloat exponential = pow( base, 5.0 );\n\n\t\tfloat fresnel = exponential + F0 * ( 1.0 - exponential );\n\t\t*/\n\n\t\t/*\n\t\t// fresnel term from fresnel shader\n\t\tconst float mFresnelBias = 0.08;\n\t\tconst float mFresnelScale = 0.3;\n\t\tconst float mFresnelPower = 5.0;\n\n\t\tfloat fresnel = mFresnelBias + mFresnelScale * pow( 1.0 + dot( normalize( -viewPosition ), normal ), mFresnelPower );\n\t\t*/\n\n\t\tfloat specularNormalization = ( shininess + 2.0 ) / 8.0;\n\n\t\t// \t\tdirSpecular += specular * directionalLightColor[ i ] * dirSpecularWeight * dirDiffuseWeight * specularNormalization * fresnel;\n\n\t\tvec3 schlick = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( dirVector, dirHalfVector ), 0.0 ), 5.0 );\n\t\ttotalSpecularLight += schlick * directionalLightColor[ i ] * dirSpecularWeight * dirDiffuseWeight * specularNormalization;\n\n\n\t}\n\n#endif\n\n#if MAX_HEMI_LIGHTS > 0\n\n\tfor( int i = 0; i < MAX_HEMI_LIGHTS; i ++ ) {\n\n\t\tvec3 lVector = transformDirection( hemisphereLightDirection[ i ], viewMatrix );\n\n\t\t// diffuse\n\n\t\tfloat dotProduct = dot( normal, lVector );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotProduct + 0.5;\n\n\t\tvec3 hemiColor = mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeight );\n\n\t\ttotalDiffuseLight += hemiColor;\n\n\t\t// specular (sky light)\n\n\t\tvec3 hemiHalfVectorSky = normalize( lVector + viewPosition );\n\t\tfloat hemiDotNormalHalfSky = 0.5 * dot( normal, hemiHalfVectorSky ) + 0.5;\n\t\tfloat hemiSpecularWeightSky = specularStrength * max( pow( max( hemiDotNormalHalfSky, 0.0 ), shininess ), 0.0 );\n\n\t\t// specular (ground light)\n\n\t\tvec3 lVectorGround = -lVector;\n\n\t\tvec3 hemiHalfVectorGround = normalize( lVectorGround + viewPosition );\n\t\tfloat hemiDotNormalHalfGround = 0.5 * dot( normal, hemiHalfVectorGround ) + 0.5;\n\t\tfloat hemiSpecularWeightGround = specularStrength * max( pow( max( hemiDotNormalHalfGround, 0.0 ), shininess ), 0.0 );\n\n\t\tfloat dotProductGround = dot( normal, lVectorGround );\n\n\t\tfloat specularNormalization = ( shininess + 2.0 ) / 8.0;\n\n\t\tvec3 schlickSky = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( lVector, hemiHalfVectorSky ), 0.0 ), 5.0 );\n\t\tvec3 schlickGround = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( lVectorGround, hemiHalfVectorGround ), 0.0 ), 5.0 );\n\t\ttotalSpecularLight += hemiColor * specularNormalization * ( schlickSky * hemiSpecularWeightSky * max( dotProduct, 0.0 ) + schlickGround * hemiSpecularWeightGround * max( dotProductGround, 0.0 ) );\n\n\t}\n\n#endif\n\n#ifdef METAL\n\n\toutgoingLight += diffuseColor.rgb * ( totalDiffuseLight + ambientLightColor ) * specular + totalSpecularLight + emissive;\n\n#else\n\n\toutgoingLight += diffuseColor.rgb * ( totalDiffuseLight + ambientLightColor ) + totalSpecularLight + emissive;\n\n#endif\n", X.ShaderChunk.fog_pars_fragment = "#ifdef USE_FOG\n\n\tuniform vec3 fogColor;\n\n\t#ifdef FOG_EXP2\n\n\t\tuniform float fogDensity;\n\n\t#else\n\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n\n#endif", X.ShaderChunk.morphnormal_vertex = "#ifdef USE_MORPHNORMALS\n\n\tvec3 morphedNormal = vec3( 0.0 );\n\n\tmorphedNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\n\tmorphedNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\n\tmorphedNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\n\tmorphedNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\n\n\tmorphedNormal += normal;\n\n#endif", X.ShaderChunk.envmap_pars_fragment = "#ifdef USE_ENVMAP\n\n\tuniform float reflectivity;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\tuniform float flipEnvMap;\n\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\n\t\tuniform float refractionRatio;\n\n\t#else\n\n\t\tvarying vec3 vReflect;\n\n\t#endif\n\n#endif\n", X.ShaderChunk.logdepthbuf_fragment = "#if defined(USE_LOGDEPTHBUF) && defined(USE_LOGDEPTHBUF_EXT)\n\n\tgl_FragDepthEXT = log2(vFragDepth) * logDepthBufFC * 0.5;\n\n#endif", X.ShaderChunk.normalmap_pars_fragment = "#ifdef USE_NORMALMAP\n\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n\n\t// Per-Pixel Tangent Space Normal Mapping\n\t// http://hacksoflife.blogspot.ch/2009/11/per-pixel-tangent-space-normal-mapping.html\n\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\n\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\n\t\tvec3 S = normalize( q0 * st1.t - q1 * st0.t );\n\t\tvec3 T = normalize( -q0 * st1.s + q1 * st0.s );\n\t\tvec3 N = normalize( surf_norm );\n\n\t\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\tmapN.xy = normalScale * mapN.xy;\n\t\tmat3 tsn = mat3( S, T, N );\n\t\treturn normalize( tsn * mapN );\n\n\t}\n\n#endif\n", X.ShaderChunk.lights_phong_pars_vertex = "#if MAX_SPOT_LIGHTS > 0 || defined( USE_BUMPMAP ) || defined( USE_ENVMAP )\n\n\tvarying vec3 vWorldPosition;\n\n#endif\n", X.ShaderChunk.lightmap_pars_fragment = "#ifdef USE_LIGHTMAP\n\n\tvarying vec2 vUv2;\n\tuniform sampler2D lightMap;\n\n#endif", X.ShaderChunk.shadowmap_vertex = "#ifdef USE_SHADOWMAP\n\n\tfor( int i = 0; i < MAX_SHADOWS; i ++ ) {\n\n\t\tvShadowCoord[ i ] = shadowMatrix[ i ] * worldPosition;\n\n\t}\n\n#endif", X.ShaderChunk.lights_phong_vertex = "#if MAX_SPOT_LIGHTS > 0 || defined( USE_BUMPMAP ) || defined( USE_ENVMAP )\n\n\tvWorldPosition = worldPosition.xyz;\n\n#endif", X.ShaderChunk.map_fragment = "#ifdef USE_MAP\n\n\tvec4 texelColor = texture2D( map, vUv );\n\n\ttexelColor.xyz = inputToLinear( texelColor.xyz );\n\n\tdiffuseColor *= texelColor;\n\n#endif", X.ShaderChunk.lightmap_vertex = "#ifdef USE_LIGHTMAP\n\n\tvUv2 = uv2;\n\n#endif", X.ShaderChunk.map_particle_fragment = "#ifdef USE_MAP\n\n\tdiffuseColor *= texture2D( map, vec2( gl_PointCoord.x, 1.0 - gl_PointCoord.y ) * offsetRepeat.zw + offsetRepeat.xy );\n\n#endif\n", X.ShaderChunk.color_pars_fragment = "#ifdef USE_COLOR\n\n\tvarying vec3 vColor;\n\n#endif\n", X.ShaderChunk.color_vertex = "#ifdef USE_COLOR\n\n\tvColor.xyz = inputToLinear( color.xyz );\n\n#endif", X.ShaderChunk.skinning_vertex = "#ifdef USE_SKINNING\n\n\t#ifdef USE_MORPHTARGETS\n\n\tvec4 skinVertex = bindMatrix * vec4( morphed, 1.0 );\n\n\t#else\n\n\tvec4 skinVertex = bindMatrix * vec4( position, 1.0 );\n\n\t#endif\n\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\tskinned  = bindMatrixInverse * skinned;\n\n#endif\n", X.ShaderChunk.envmap_pars_vertex = "#if defined( USE_ENVMAP ) && ! defined( USE_BUMPMAP ) && ! defined( USE_NORMALMAP ) && ! defined( PHONG )\n\n\tvarying vec3 vReflect;\n\n\tuniform float refractionRatio;\n\n#endif\n", X.ShaderChunk.linear_to_gamma_fragment = "\n\toutgoingLight = linearToOutput( outgoingLight );\n", X.ShaderChunk.color_pars_vertex = "#ifdef USE_COLOR\n\n\tvarying vec3 vColor;\n\n#endif", X.ShaderChunk.lights_lambert_pars_vertex = "uniform vec3 ambientLightColor;\n\n#if MAX_DIR_LIGHTS > 0\n\n\tuniform vec3 directionalLightColor[ MAX_DIR_LIGHTS ];\n\tuniform vec3 directionalLightDirection[ MAX_DIR_LIGHTS ];\n\n#endif\n\n#if MAX_HEMI_LIGHTS > 0\n\n\tuniform vec3 hemisphereLightSkyColor[ MAX_HEMI_LIGHTS ];\n\tuniform vec3 hemisphereLightGroundColor[ MAX_HEMI_LIGHTS ];\n\tuniform vec3 hemisphereLightDirection[ MAX_HEMI_LIGHTS ];\n\n#endif\n\n#if MAX_POINT_LIGHTS > 0\n\n\tuniform vec3 pointLightColor[ MAX_POINT_LIGHTS ];\n\tuniform vec3 pointLightPosition[ MAX_POINT_LIGHTS ];\n\tuniform float pointLightDistance[ MAX_POINT_LIGHTS ];\n\tuniform float pointLightDecay[ MAX_POINT_LIGHTS ];\n\n#endif\n\n#if MAX_SPOT_LIGHTS > 0\n\n\tuniform vec3 spotLightColor[ MAX_SPOT_LIGHTS ];\n\tuniform vec3 spotLightPosition[ MAX_SPOT_LIGHTS ];\n\tuniform vec3 spotLightDirection[ MAX_SPOT_LIGHTS ];\n\tuniform float spotLightDistance[ MAX_SPOT_LIGHTS ];\n\tuniform float spotLightAngleCos[ MAX_SPOT_LIGHTS ];\n\tuniform float spotLightExponent[ MAX_SPOT_LIGHTS ];\n\tuniform float spotLightDecay[ MAX_SPOT_LIGHTS ];\n\n#endif\n\n#ifdef WRAP_AROUND\n\n\tuniform vec3 wrapRGB;\n\n#endif\n", X.ShaderChunk.map_pars_vertex = "#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP )\n\n\tvarying vec2 vUv;\n\tuniform vec4 offsetRepeat;\n\n#endif\n", X.ShaderChunk.envmap_fragment = "#ifdef USE_ENVMAP\n\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\n\t\tvec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\n\n\t\t// Transforming Normal Vectors with the Inverse Transformation\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\n\t\t\tvec3 reflectVec = reflect( cameraToVertex, worldNormal );\n\n\t\t#else\n\n\t\t\tvec3 reflectVec = refract( cameraToVertex, worldNormal, refractionRatio );\n\n\t\t#endif\n\n\t#else\n\n\t\tvec3 reflectVec = vReflect;\n\n\t#endif\n\n\t#ifdef DOUBLE_SIDED\n\t\tfloat flipNormal = ( -1.0 + 2.0 * float( gl_FrontFacing ) );\n\t#else\n\t\tfloat flipNormal = 1.0;\n\t#endif\n\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, flipNormal * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\n\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\tvec2 sampleUV;\n\t\tsampleUV.y = saturate( flipNormal * reflectVec.y * 0.5 + 0.5 );\n\t\tsampleUV.x = atan( flipNormal * reflectVec.z, flipNormal * reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\tvec4 envColor = texture2D( envMap, sampleUV );\n\n\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\tvec3 reflectView = flipNormal * normalize((viewMatrix * vec4( reflectVec, 0.0 )).xyz + vec3(0.0,0.0,1.0));\n\t\tvec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\n\t#endif\n\n\tenvColor.xyz = inputToLinear( envColor.xyz );\n\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\n\t#endif\n\n#endif\n", X.ShaderChunk.specularmap_pars_fragment = "#ifdef USE_SPECULARMAP\n\n\tuniform sampler2D specularMap;\n\n#endif", X.ShaderChunk.logdepthbuf_vertex = "#ifdef USE_LOGDEPTHBUF\n\n\tgl_Position.z = log2(max( EPSILON, gl_Position.w + 1.0 )) * logDepthBufFC;\n\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\n#else\n\n\t\tgl_Position.z = (gl_Position.z - 1.0) * gl_Position.w;\n\n\t#endif\n\n#endif", X.ShaderChunk.morphtarget_pars_vertex = "#ifdef USE_MORPHTARGETS\n\n\t#ifndef USE_MORPHNORMALS\n\n\tuniform float morphTargetInfluences[ 8 ];\n\n\t#else\n\n\tuniform float morphTargetInfluences[ 4 ];\n\n\t#endif\n\n#endif", X.ShaderChunk.specularmap_fragment = "float specularStrength;\n\n#ifdef USE_SPECULARMAP\n\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n\n#else\n\n\tspecularStrength = 1.0;\n\n#endif", X.ShaderChunk.fog_fragment = "#ifdef USE_FOG\n\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\n\t\tfloat depth = gl_FragDepthEXT / gl_FragCoord.w;\n\n\t#else\n\n\t\tfloat depth = gl_FragCoord.z / gl_FragCoord.w;\n\n\t#endif\n\n\t#ifdef FOG_EXP2\n\n\t\tfloat fogFactor = exp2( - square( fogDensity ) * square( depth ) * LOG2 );\n\t\tfogFactor = whiteCompliment( fogFactor );\n\n\t#else\n\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, depth );\n\n\t#endif\n\t\n\toutgoingLight = mix( outgoingLight, fogColor, fogFactor );\n\n#endif", X.ShaderChunk.bumpmap_pars_fragment = "#ifdef USE_BUMPMAP\n\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\n\t// Derivative maps - bump mapping unparametrized surfaces by Morten Mikkelsen\n\t// http://mmikkelsen3d.blogspot.sk/2011/07/derivative-maps.html\n\n\t// Evaluate the derivative of the height w.r.t. screen-space using forward differencing (listing 2)\n\n\tvec2 dHdxy_fwd() {\n\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\n\t\treturn vec2( dBx, dBy );\n\n\t}\n\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\n\t\tvec3 vSigmaX = dFdx( surf_pos );\n\t\tvec3 vSigmaY = dFdy( surf_pos );\n\t\tvec3 vN = surf_norm;\t\t// normalized\n\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\n\t\tfloat fDet = dot( vSigmaX, R1 );\n\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\n\t}\n\n#endif\n", X.ShaderChunk.defaultnormal_vertex = "#ifdef USE_SKINNING\n\n\tvec3 objectNormal = skinnedNormal.xyz;\n\n#elif defined( USE_MORPHNORMALS )\n\n\tvec3 objectNormal = morphedNormal;\n\n#else\n\n\tvec3 objectNormal = normal;\n\n#endif\n\n#ifdef FLIP_SIDED\n\n\tobjectNormal = -objectNormal;\n\n#endif\n\nvec3 transformedNormal = normalMatrix * objectNormal;\n", X.ShaderChunk.lights_phong_pars_fragment = "uniform vec3 ambientLightColor;\n\n#if MAX_DIR_LIGHTS > 0\n\n\tuniform vec3 directionalLightColor[ MAX_DIR_LIGHTS ];\n\tuniform vec3 directionalLightDirection[ MAX_DIR_LIGHTS ];\n\n#endif\n\n#if MAX_HEMI_LIGHTS > 0\n\n\tuniform vec3 hemisphereLightSkyColor[ MAX_HEMI_LIGHTS ];\n\tuniform vec3 hemisphereLightGroundColor[ MAX_HEMI_LIGHTS ];\n\tuniform vec3 hemisphereLightDirection[ MAX_HEMI_LIGHTS ];\n\n#endif\n\n#if MAX_POINT_LIGHTS > 0\n\n\tuniform vec3 pointLightColor[ MAX_POINT_LIGHTS ];\n\n\tuniform vec3 pointLightPosition[ MAX_POINT_LIGHTS ];\n\tuniform float pointLightDistance[ MAX_POINT_LIGHTS ];\n\tuniform float pointLightDecay[ MAX_POINT_LIGHTS ];\n\n#endif\n\n#if MAX_SPOT_LIGHTS > 0\n\n\tuniform vec3 spotLightColor[ MAX_SPOT_LIGHTS ];\n\tuniform vec3 spotLightPosition[ MAX_SPOT_LIGHTS ];\n\tuniform vec3 spotLightDirection[ MAX_SPOT_LIGHTS ];\n\tuniform float spotLightAngleCos[ MAX_SPOT_LIGHTS ];\n\tuniform float spotLightExponent[ MAX_SPOT_LIGHTS ];\n\tuniform float spotLightDistance[ MAX_SPOT_LIGHTS ];\n\tuniform float spotLightDecay[ MAX_SPOT_LIGHTS ];\n\n#endif\n\n#if MAX_SPOT_LIGHTS > 0 || defined( USE_BUMPMAP ) || defined( USE_ENVMAP )\n\n\tvarying vec3 vWorldPosition;\n\n#endif\n\n#ifdef WRAP_AROUND\n\n\tuniform vec3 wrapRGB;\n\n#endif\n\nvarying vec3 vViewPosition;\n\n#ifndef FLAT_SHADED\n\n\tvarying vec3 vNormal;\n\n#endif\n", X.ShaderChunk.skinbase_vertex = "#ifdef USE_SKINNING\n\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n\n#endif", X.ShaderChunk.map_vertex = "#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP )\n\n\tvUv = uv * offsetRepeat.zw + offsetRepeat.xy;\n\n#endif", X.ShaderChunk.lightmap_fragment = "#ifdef USE_LIGHTMAP\n\n\toutgoingLight *= diffuseColor.xyz * texture2D( lightMap, vUv2 ).xyz;\n\n#endif", X.ShaderChunk.shadowmap_pars_vertex = "#ifdef USE_SHADOWMAP\n\n\tvarying vec4 vShadowCoord[ MAX_SHADOWS ];\n\tuniform mat4 shadowMatrix[ MAX_SHADOWS ];\n\n#endif", X.ShaderChunk.color_fragment = "#ifdef USE_COLOR\n\n\tdiffuseColor.rgb *= vColor;\n\n#endif", X.ShaderChunk.morphtarget_vertex = "#ifdef USE_MORPHTARGETS\n\n\tvec3 morphed = vec3( 0.0 );\n\tmorphed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\n\tmorphed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\n\tmorphed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\n\tmorphed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\n\n\t#ifndef USE_MORPHNORMALS\n\n\tmorphed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\n\tmorphed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\n\tmorphed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\n\tmorphed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\n\n\t#endif\n\n\tmorphed += position;\n\n#endif", X.ShaderChunk.envmap_vertex = "#if defined( USE_ENVMAP ) && ! defined( USE_BUMPMAP ) && ! defined( USE_NORMALMAP ) && ! defined( PHONG )\n\n\tvec3 worldNormal = transformDirection( objectNormal, modelMatrix );\n\n\tvec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\n\t#ifdef ENVMAP_MODE_REFLECTION\n\n\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\n\t#else\n\n\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\n\t#endif\n\n#endif\n", X.ShaderChunk.shadowmap_fragment = "#ifdef USE_SHADOWMAP\n\n\t#ifdef SHADOWMAP_DEBUG\n\n\t\tvec3 frustumColors[3];\n\t\tfrustumColors[0] = vec3( 1.0, 0.5, 0.0 );\n\t\tfrustumColors[1] = vec3( 0.0, 1.0, 0.8 );\n\t\tfrustumColors[2] = vec3( 0.0, 0.5, 1.0 );\n\n\t#endif\n\n\t#ifdef SHADOWMAP_CASCADE\n\n\t\tint inFrustumCount = 0;\n\n\t#endif\n\n\tfloat fDepth;\n\tvec3 shadowColor = vec3( 1.0 );\n\n\tfor( int i = 0; i < MAX_SHADOWS; i ++ ) {\n\n\t\tvec3 shadowCoord = vShadowCoord[ i ].xyz / vShadowCoord[ i ].w;\n\n\t\t\t\t// if ( something && something ) breaks ATI OpenGL shader compiler\n\t\t\t\t// if ( all( something, something ) ) using this instead\n\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\n\t\t\t\t// don't shadow pixels outside of light frustum\n\t\t\t\t// use just first frustum (for cascades)\n\t\t\t\t// don't shadow pixels behind far plane of light frustum\n\n\t\t#ifdef SHADOWMAP_CASCADE\n\n\t\t\tinFrustumCount += int( inFrustum );\n\t\t\tbvec3 frustumTestVec = bvec3( inFrustum, inFrustumCount == 1, shadowCoord.z <= 1.0 );\n\n\t\t#else\n\n\t\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\n\t\t#endif\n\n\t\tbool frustumTest = all( frustumTestVec );\n\n\t\tif ( frustumTest ) {\n\n\t\t\tshadowCoord.z += shadowBias[ i ];\n\n\t\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\n\t\t\t\t\t\t// Percentage-close filtering\n\t\t\t\t\t\t// (9 pixel kernel)\n\t\t\t\t\t\t// http://fabiensanglard.net/shadowmappingPCF/\n\n\t\t\t\tfloat shadow = 0.0;\n\n\t\t/*\n\t\t\t\t\t\t// nested loops breaks shader compiler / validator on some ATI cards when using OpenGL\n\t\t\t\t\t\t// must enroll loop manually\n\n\t\t\t\tfor ( float y = -1.25; y <= 1.25; y += 1.25 )\n\t\t\t\t\tfor ( float x = -1.25; x <= 1.25; x += 1.25 ) {\n\n\t\t\t\t\t\tvec4 rgbaDepth = texture2D( shadowMap[ i ], vec2( x * xPixelOffset, y * yPixelOffset ) + shadowCoord.xy );\n\n\t\t\t\t\t\t\t\t// doesn't seem to produce any noticeable visual difference compared to simple texture2D lookup\n\t\t\t\t\t\t\t\t//vec4 rgbaDepth = texture2DProj( shadowMap[ i ], vec4( vShadowCoord[ i ].w * ( vec2( x * xPixelOffset, y * yPixelOffset ) + shadowCoord.xy ), 0.05, vShadowCoord[ i ].w ) );\n\n\t\t\t\t\t\tfloat fDepth = unpackDepth( rgbaDepth );\n\n\t\t\t\t\t\tif ( fDepth < shadowCoord.z )\n\t\t\t\t\t\t\tshadow += 1.0;\n\n\t\t\t\t}\n\n\t\t\t\tshadow /= 9.0;\n\n\t\t*/\n\n\t\t\t\tconst float shadowDelta = 1.0 / 9.0;\n\n\t\t\t\tfloat xPixelOffset = 1.0 / shadowMapSize[ i ].x;\n\t\t\t\tfloat yPixelOffset = 1.0 / shadowMapSize[ i ].y;\n\n\t\t\t\tfloat dx0 = -1.25 * xPixelOffset;\n\t\t\t\tfloat dy0 = -1.25 * yPixelOffset;\n\t\t\t\tfloat dx1 = 1.25 * xPixelOffset;\n\t\t\t\tfloat dy1 = 1.25 * yPixelOffset;\n\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy0 ) ) );\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy0 ) ) );\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy0 ) ) );\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, 0.0 ) ) );\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy ) );\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, 0.0 ) ) );\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy1 ) ) );\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy1 ) ) );\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy1 ) ) );\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n\t\t\t\tshadowColor = shadowColor * vec3( ( 1.0 - shadowDarkness[ i ] * shadow ) );\n\n\t\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\n\t\t\t\t\t\t// Percentage-close filtering\n\t\t\t\t\t\t// (9 pixel kernel)\n\t\t\t\t\t\t// http://fabiensanglard.net/shadowmappingPCF/\n\n\t\t\t\tfloat shadow = 0.0;\n\n\t\t\t\tfloat xPixelOffset = 1.0 / shadowMapSize[ i ].x;\n\t\t\t\tfloat yPixelOffset = 1.0 / shadowMapSize[ i ].y;\n\n\t\t\t\tfloat dx0 = -1.0 * xPixelOffset;\n\t\t\t\tfloat dy0 = -1.0 * yPixelOffset;\n\t\t\t\tfloat dx1 = 1.0 * xPixelOffset;\n\t\t\t\tfloat dy1 = 1.0 * yPixelOffset;\n\n\t\t\t\tmat3 shadowKernel;\n\t\t\t\tmat3 depthKernel;\n\n\t\t\t\tdepthKernel[0][0] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy0 ) ) );\n\t\t\t\tdepthKernel[0][1] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, 0.0 ) ) );\n\t\t\t\tdepthKernel[0][2] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy1 ) ) );\n\t\t\t\tdepthKernel[1][0] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy0 ) ) );\n\t\t\t\tdepthKernel[1][1] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy ) );\n\t\t\t\tdepthKernel[1][2] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy1 ) ) );\n\t\t\t\tdepthKernel[2][0] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy0 ) ) );\n\t\t\t\tdepthKernel[2][1] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, 0.0 ) ) );\n\t\t\t\tdepthKernel[2][2] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy1 ) ) );\n\n\t\t\t\tvec3 shadowZ = vec3( shadowCoord.z );\n\t\t\t\tshadowKernel[0] = vec3(lessThan(depthKernel[0], shadowZ ));\n\t\t\t\tshadowKernel[0] *= vec3(0.25);\n\n\t\t\t\tshadowKernel[1] = vec3(lessThan(depthKernel[1], shadowZ ));\n\t\t\t\tshadowKernel[1] *= vec3(0.25);\n\n\t\t\t\tshadowKernel[2] = vec3(lessThan(depthKernel[2], shadowZ ));\n\t\t\t\tshadowKernel[2] *= vec3(0.25);\n\n\t\t\t\tvec2 fractionalCoord = 1.0 - fract( shadowCoord.xy * shadowMapSize[i].xy );\n\n\t\t\t\tshadowKernel[0] = mix( shadowKernel[1], shadowKernel[0], fractionalCoord.x );\n\t\t\t\tshadowKernel[1] = mix( shadowKernel[2], shadowKernel[1], fractionalCoord.x );\n\n\t\t\t\tvec4 shadowValues;\n\t\t\t\tshadowValues.x = mix( shadowKernel[0][1], shadowKernel[0][0], fractionalCoord.y );\n\t\t\t\tshadowValues.y = mix( shadowKernel[0][2], shadowKernel[0][1], fractionalCoord.y );\n\t\t\t\tshadowValues.z = mix( shadowKernel[1][1], shadowKernel[1][0], fractionalCoord.y );\n\t\t\t\tshadowValues.w = mix( shadowKernel[1][2], shadowKernel[1][1], fractionalCoord.y );\n\n\t\t\t\tshadow = dot( shadowValues, vec4( 1.0 ) );\n\n\t\t\t\tshadowColor = shadowColor * vec3( ( 1.0 - shadowDarkness[ i ] * shadow ) );\n\n\t\t\t#else\n\n\t\t\t\tvec4 rgbaDepth = texture2D( shadowMap[ i ], shadowCoord.xy );\n\t\t\t\tfloat fDepth = unpackDepth( rgbaDepth );\n\n\t\t\t\tif ( fDepth < shadowCoord.z )\n\n\t\t// spot with multiple shadows is darker\n\n\t\t\t\t\tshadowColor = shadowColor * vec3( 1.0 - shadowDarkness[ i ] );\n\n\t\t// spot with multiple shadows has the same color as single shadow spot\n\n\t\t// \t\t\t\t\tshadowColor = min( shadowColor, vec3( shadowDarkness[ i ] ) );\n\n\t\t\t#endif\n\n\t\t}\n\n\n\t\t#ifdef SHADOWMAP_DEBUG\n\n\t\t\t#ifdef SHADOWMAP_CASCADE\n\n\t\t\t\tif ( inFrustum && inFrustumCount == 1 ) outgoingLight *= frustumColors[ i ];\n\n\t\t\t#else\n\n\t\t\t\tif ( inFrustum ) outgoingLight *= frustumColors[ i ];\n\n\t\t\t#endif\n\n\t\t#endif\n\n\t}\n\n\t// NOTE: I am unsure if this is correct in linear space.  -bhouston, Dec 29, 2014\n\tshadowColor = inputToLinear( shadowColor );\n\n\toutgoingLight = outgoingLight * shadowColor;\n\n#endif\n", X.ShaderChunk.worldpos_vertex = "#if defined( USE_ENVMAP ) || defined( PHONG ) || defined( LAMBERT ) || defined ( USE_SHADOWMAP )\n\n\t#ifdef USE_SKINNING\n\n\t\tvec4 worldPosition = modelMatrix * skinned;\n\n\t#elif defined( USE_MORPHTARGETS )\n\n\t\tvec4 worldPosition = modelMatrix * vec4( morphed, 1.0 );\n\n\t#else\n\n\t\tvec4 worldPosition = modelMatrix * vec4( position, 1.0 );\n\n\t#endif\n\n#endif\n", X.ShaderChunk.shadowmap_pars_fragment = "#ifdef USE_SHADOWMAP\n\n\tuniform sampler2D shadowMap[ MAX_SHADOWS ];\n\tuniform vec2 shadowMapSize[ MAX_SHADOWS ];\n\n\tuniform float shadowDarkness[ MAX_SHADOWS ];\n\tuniform float shadowBias[ MAX_SHADOWS ];\n\n\tvarying vec4 vShadowCoord[ MAX_SHADOWS ];\n\n\tfloat unpackDepth( const in vec4 rgba_depth ) {\n\n\t\tconst vec4 bit_shift = vec4( 1.0 / ( 256.0 * 256.0 * 256.0 ), 1.0 / ( 256.0 * 256.0 ), 1.0 / 256.0, 1.0 );\n\t\tfloat depth = dot( rgba_depth, bit_shift );\n\t\treturn depth;\n\n\t}\n\n#endif", X.ShaderChunk.skinning_pars_vertex = "#ifdef USE_SKINNING\n\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\n\t#ifdef BONE_TEXTURE\n\n\t\tuniform sampler2D boneTexture;\n\t\tuniform int boneTextureWidth;\n\t\tuniform int boneTextureHeight;\n\n\t\tmat4 getBoneMatrix( const in float i ) {\n\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureWidth ) );\n\t\t\tfloat y = floor( j / float( boneTextureWidth ) );\n\n\t\t\tfloat dx = 1.0 / float( boneTextureWidth );\n\t\t\tfloat dy = 1.0 / float( boneTextureHeight );\n\n\t\t\ty = dy * ( y + 0.5 );\n\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\n\t\t\treturn bone;\n\n\t\t}\n\n\t#else\n\n\t\tuniform mat4 boneGlobalMatrices[ MAX_BONES ];\n\n\t\tmat4 getBoneMatrix( const in float i ) {\n\n\t\t\tmat4 bone = boneGlobalMatrices[ int(i) ];\n\t\t\treturn bone;\n\n\t\t}\n\n\t#endif\n\n#endif\n", X.ShaderChunk.logdepthbuf_pars_fragment = "#ifdef USE_LOGDEPTHBUF\n\n\tuniform float logDepthBufFC;\n\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\n\t\t#extension GL_EXT_frag_depth : enable\n\t\tvarying float vFragDepth;\n\n\t#endif\n\n#endif", X.ShaderChunk.alphamap_fragment = "#ifdef USE_ALPHAMAP\n\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n\n#endif\n", X.ShaderChunk.alphamap_pars_fragment = "#ifdef USE_ALPHAMAP\n\n\tuniform sampler2D alphaMap;\n\n#endif\n", X.UniformsUtils = {
        merge: function (e) {
          for (var t = {}, n = 0; n < e.length; n++) {
            var i = this.clone(e[n]);
            for (var r in i) t[r] = i[r]
          }
          return t
        },
        clone: function (e) {
          var t = {};
          for (var n in e)
            for (var i in t[n] = {}, e[n]) {
              var r = e[n][i];
              r instanceof X.Color || r instanceof X.Vector2 || r instanceof X.Vector3 || r instanceof X.Vector4 || r instanceof X.Matrix4 || r instanceof X.Texture ? t[n][i] = r.clone() : t[n][i] = r instanceof Array ? r.slice() : r
            }
          return t
        }
      }, X.UniformsLib = {
        common: {
          diffuse: {
            type: "c",
            value: new X.Color(15658734)
          },
          opacity: {
            type: "f",
            value: 1
          },
          map: {
            type: "t",
            value: null
          },
          offsetRepeat: {
            type: "v4",
            value: new X.Vector4(0, 0, 1, 1)
          },
          lightMap: {
            type: "t",
            value: null
          },
          specularMap: {
            type: "t",
            value: null
          },
          alphaMap: {
            type: "t",
            value: null
          },
          envMap: {
            type: "t",
            value: null
          },
          flipEnvMap: {
            type: "f",
            value: -1
          },
          reflectivity: {
            type: "f",
            value: 1
          },
          refractionRatio: {
            type: "f",
            value: .98
          },
          morphTargetInfluences: {
            type: "f",
            value: 0
          }
        },
        bump: {
          bumpMap: {
            type: "t",
            value: null
          },
          bumpScale: {
            type: "f",
            value: 1
          }
        },
        normalmap: {
          normalMap: {
            type: "t",
            value: null
          },
          normalScale: {
            type: "v2",
            value: new X.Vector2(1, 1)
          }
        },
        fog: {
          fogDensity: {
            type: "f",
            value: 25e-5
          },
          fogNear: {
            type: "f",
            value: 1
          },
          fogFar: {
            type: "f",
            value: 2e3
          },
          fogColor: {
            type: "c",
            value: new X.Color(16777215)
          }
        },
        lights: {
          ambientLightColor: {
            type: "fv",
            value: []
          },
          directionalLightDirection: {
            type: "fv",
            value: []
          },
          directionalLightColor: {
            type: "fv",
            value: []
          },
          hemisphereLightDirection: {
            type: "fv",
            value: []
          },
          hemisphereLightSkyColor: {
            type: "fv",
            value: []
          },
          hemisphereLightGroundColor: {
            type: "fv",
            value: []
          },
          pointLightColor: {
            type: "fv",
            value: []
          },
          pointLightPosition: {
            type: "fv",
            value: []
          },
          pointLightDistance: {
            type: "fv1",
            value: []
          },
          pointLightDecay: {
            type: "fv1",
            value: []
          },
          spotLightColor: {
            type: "fv",
            value: []
          },
          spotLightPosition: {
            type: "fv",
            value: []
          },
          spotLightDirection: {
            type: "fv",
            value: []
          },
          spotLightDistance: {
            type: "fv1",
            value: []
          },
          spotLightAngleCos: {
            type: "fv1",
            value: []
          },
          spotLightExponent: {
            type: "fv1",
            value: []
          },
          spotLightDecay: {
            type: "fv1",
            value: []
          }
        },
        particle: {
          psColor: {
            type: "c",
            value: new X.Color(15658734)
          },
          opacity: {
            type: "f",
            value: 1
          },
          size: {
            type: "f",
            value: 1
          },
          scale: {
            type: "f",
            value: 1
          },
          map: {
            type: "t",
            value: null
          },
          offsetRepeat: {
            type: "v4",
            value: new X.Vector4(0, 0, 1, 1)
          },
          fogDensity: {
            type: "f",
            value: 25e-5
          },
          fogNear: {
            type: "f",
            value: 1
          },
          fogFar: {
            type: "f",
            value: 2e3
          },
          fogColor: {
            type: "c",
            value: new X.Color(16777215)
          }
        },
        shadowmap: {
          shadowMap: {
            type: "tv",
            value: []
          },
          shadowMapSize: {
            type: "v2v",
            value: []
          },
          shadowBias: {
            type: "fv1",
            value: []
          },
          shadowDarkness: {
            type: "fv1",
            value: []
          },
          shadowMatrix: {
            type: "m4v",
            value: []
          }
        }
      }, X.ShaderLib = {
        basic: {
          uniforms: X.UniformsUtils.merge([X.UniformsLib.common, X.UniformsLib.fog, X.UniformsLib.shadowmap]),
          vertexShader: [X.ShaderChunk.common, X.ShaderChunk.map_pars_vertex, X.ShaderChunk.lightmap_pars_vertex, X.ShaderChunk.envmap_pars_vertex, X.ShaderChunk.color_pars_vertex, X.ShaderChunk.morphtarget_pars_vertex, X.ShaderChunk.skinning_pars_vertex, X.ShaderChunk.shadowmap_pars_vertex, X.ShaderChunk.logdepthbuf_pars_vertex, "void main() {", X.ShaderChunk.map_vertex, X.ShaderChunk.lightmap_vertex, X.ShaderChunk.color_vertex, X.ShaderChunk.skinbase_vertex, "\t#ifdef USE_ENVMAP", X.ShaderChunk.morphnormal_vertex, X.ShaderChunk.skinnormal_vertex, X.ShaderChunk.defaultnormal_vertex, "\t#endif", X.ShaderChunk.morphtarget_vertex, X.ShaderChunk.skinning_vertex, X.ShaderChunk.default_vertex, X.ShaderChunk.logdepthbuf_vertex, X.ShaderChunk.worldpos_vertex, X.ShaderChunk.envmap_vertex, X.ShaderChunk.shadowmap_vertex, "}"].join("\n"),
          fragmentShader: ["uniform vec3 diffuse;", "uniform float opacity;", X.ShaderChunk.common, X.ShaderChunk.color_pars_fragment, X.ShaderChunk.map_pars_fragment, X.ShaderChunk.alphamap_pars_fragment, X.ShaderChunk.lightmap_pars_fragment, X.ShaderChunk.envmap_pars_fragment, X.ShaderChunk.fog_pars_fragment, X.ShaderChunk.shadowmap_pars_fragment, X.ShaderChunk.specularmap_pars_fragment, X.ShaderChunk.logdepthbuf_pars_fragment, "void main() {", "\tvec3 outgoingLight = vec3( 0.0 );", "\tvec4 diffuseColor = vec4( diffuse, opacity );", X.ShaderChunk.logdepthbuf_fragment, X.ShaderChunk.map_fragment, X.ShaderChunk.color_fragment, X.ShaderChunk.alphamap_fragment, X.ShaderChunk.alphatest_fragment, X.ShaderChunk.specularmap_fragment, "\toutgoingLight = diffuseColor.rgb;", X.ShaderChunk.lightmap_fragment, X.ShaderChunk.envmap_fragment, X.ShaderChunk.shadowmap_fragment, X.ShaderChunk.linear_to_gamma_fragment, X.ShaderChunk.fog_fragment, "\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );", "}"].join("\n")
        },
        lambert: {
          uniforms: X.UniformsUtils.merge([X.UniformsLib.common, X.UniformsLib.fog, X.UniformsLib.lights, X.UniformsLib.shadowmap, {
            emissive: {
              type: "c",
              value: new X.Color(0)
            },
            wrapRGB: {
              type: "v3",
              value: new X.Vector3(1, 1, 1)
            }
          }]),
          vertexShader: ["#define LAMBERT", "varying vec3 vLightFront;", "#ifdef DOUBLE_SIDED", "\tvarying vec3 vLightBack;", "#endif", X.ShaderChunk.common, X.ShaderChunk.map_pars_vertex, X.ShaderChunk.lightmap_pars_vertex, X.ShaderChunk.envmap_pars_vertex, X.ShaderChunk.lights_lambert_pars_vertex, X.ShaderChunk.color_pars_vertex, X.ShaderChunk.morphtarget_pars_vertex, X.ShaderChunk.skinning_pars_vertex, X.ShaderChunk.shadowmap_pars_vertex, X.ShaderChunk.logdepthbuf_pars_vertex, "void main() {", X.ShaderChunk.map_vertex, X.ShaderChunk.lightmap_vertex, X.ShaderChunk.color_vertex, X.ShaderChunk.morphnormal_vertex, X.ShaderChunk.skinbase_vertex, X.ShaderChunk.skinnormal_vertex, X.ShaderChunk.defaultnormal_vertex, X.ShaderChunk.morphtarget_vertex, X.ShaderChunk.skinning_vertex, X.ShaderChunk.default_vertex, X.ShaderChunk.logdepthbuf_vertex, X.ShaderChunk.worldpos_vertex, X.ShaderChunk.envmap_vertex, X.ShaderChunk.lights_lambert_vertex, X.ShaderChunk.shadowmap_vertex, "}"].join("\n"),
          fragmentShader: ["uniform vec3 diffuse;", "uniform vec3 emissive;", "uniform float opacity;", "varying vec3 vLightFront;", "#ifdef DOUBLE_SIDED", "\tvarying vec3 vLightBack;", "#endif", X.ShaderChunk.common, X.ShaderChunk.color_pars_fragment, X.ShaderChunk.map_pars_fragment, X.ShaderChunk.alphamap_pars_fragment, X.ShaderChunk.lightmap_pars_fragment, X.ShaderChunk.envmap_pars_fragment, X.ShaderChunk.fog_pars_fragment, X.ShaderChunk.shadowmap_pars_fragment, X.ShaderChunk.specularmap_pars_fragment, X.ShaderChunk.logdepthbuf_pars_fragment, "void main() {", "\tvec3 outgoingLight = vec3( 0.0 );", "\tvec4 diffuseColor = vec4( diffuse, opacity );", X.ShaderChunk.logdepthbuf_fragment, X.ShaderChunk.map_fragment, X.ShaderChunk.color_fragment, X.ShaderChunk.alphamap_fragment, X.ShaderChunk.alphatest_fragment, X.ShaderChunk.specularmap_fragment, "\t#ifdef DOUBLE_SIDED", "\t\tif ( gl_FrontFacing )", "\t\t\toutgoingLight += diffuseColor.rgb * vLightFront + emissive;", "\t\telse", "\t\t\toutgoingLight += diffuseColor.rgb * vLightBack + emissive;", "\t#else", "\t\toutgoingLight += diffuseColor.rgb * vLightFront + emissive;", "\t#endif", X.ShaderChunk.lightmap_fragment, X.ShaderChunk.envmap_fragment, X.ShaderChunk.shadowmap_fragment, X.ShaderChunk.linear_to_gamma_fragment, X.ShaderChunk.fog_fragment, "\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );", "}"].join("\n")
        },
        phong: {
          uniforms: X.UniformsUtils.merge([X.UniformsLib.common, X.UniformsLib.bump, X.UniformsLib.normalmap, X.UniformsLib.fog, X.UniformsLib.lights, X.UniformsLib.shadowmap, {
            emissive: {
              type: "c",
              value: new X.Color(0)
            },
            specular: {
              type: "c",
              value: new X.Color(1118481)
            },
            shininess: {
              type: "f",
              value: 30
            },
            wrapRGB: {
              type: "v3",
              value: new X.Vector3(1, 1, 1)
            }
          }]),
          vertexShader: ["#define PHONG", "varying vec3 vViewPosition;", "#ifndef FLAT_SHADED", "\tvarying vec3 vNormal;", "#endif", X.ShaderChunk.common, X.ShaderChunk.map_pars_vertex, X.ShaderChunk.lightmap_pars_vertex, X.ShaderChunk.envmap_pars_vertex, X.ShaderChunk.lights_phong_pars_vertex, X.ShaderChunk.color_pars_vertex, X.ShaderChunk.morphtarget_pars_vertex, X.ShaderChunk.skinning_pars_vertex, X.ShaderChunk.shadowmap_pars_vertex, X.ShaderChunk.logdepthbuf_pars_vertex, "void main() {", X.ShaderChunk.map_vertex, X.ShaderChunk.lightmap_vertex, X.ShaderChunk.color_vertex, X.ShaderChunk.morphnormal_vertex, X.ShaderChunk.skinbase_vertex, X.ShaderChunk.skinnormal_vertex, X.ShaderChunk.defaultnormal_vertex, "#ifndef FLAT_SHADED", "\tvNormal = normalize( transformedNormal );", "#endif", X.ShaderChunk.morphtarget_vertex, X.ShaderChunk.skinning_vertex, X.ShaderChunk.default_vertex, X.ShaderChunk.logdepthbuf_vertex, "\tvViewPosition = -mvPosition.xyz;", X.ShaderChunk.worldpos_vertex, X.ShaderChunk.envmap_vertex, X.ShaderChunk.lights_phong_vertex, X.ShaderChunk.shadowmap_vertex, "}"].join("\n"),
          fragmentShader: ["#define PHONG", "uniform vec3 diffuse;", "uniform vec3 emissive;", "uniform vec3 specular;", "uniform float shininess;", "uniform float opacity;", X.ShaderChunk.common, X.ShaderChunk.color_pars_fragment, X.ShaderChunk.map_pars_fragment, X.ShaderChunk.alphamap_pars_fragment, X.ShaderChunk.lightmap_pars_fragment, X.ShaderChunk.envmap_pars_fragment, X.ShaderChunk.fog_pars_fragment, X.ShaderChunk.lights_phong_pars_fragment, X.ShaderChunk.shadowmap_pars_fragment, X.ShaderChunk.bumpmap_pars_fragment, X.ShaderChunk.normalmap_pars_fragment, X.ShaderChunk.specularmap_pars_fragment, X.ShaderChunk.logdepthbuf_pars_fragment, "void main() {", "\tvec3 outgoingLight = vec3( 0.0 );", "\tvec4 diffuseColor = vec4( diffuse, opacity );", X.ShaderChunk.logdepthbuf_fragment, X.ShaderChunk.map_fragment, X.ShaderChunk.color_fragment, X.ShaderChunk.alphamap_fragment, X.ShaderChunk.alphatest_fragment, X.ShaderChunk.specularmap_fragment, X.ShaderChunk.lights_phong_fragment, X.ShaderChunk.lightmap_fragment, X.ShaderChunk.envmap_fragment, X.ShaderChunk.shadowmap_fragment, X.ShaderChunk.linear_to_gamma_fragment, X.ShaderChunk.fog_fragment, "\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );", "}"].join("\n")
        },
        particle_basic: {
          uniforms: X.UniformsUtils.merge([X.UniformsLib.particle, X.UniformsLib.shadowmap]),
          vertexShader: ["uniform float size;", "uniform float scale;", X.ShaderChunk.common, X.ShaderChunk.color_pars_vertex, X.ShaderChunk.shadowmap_pars_vertex, X.ShaderChunk.logdepthbuf_pars_vertex, "void main() {", X.ShaderChunk.color_vertex, "\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );", "\t#ifdef USE_SIZEATTENUATION", "\t\tgl_PointSize = size * ( scale / length( mvPosition.xyz ) );", "\t#else", "\t\tgl_PointSize = size;", "\t#endif", "\tgl_Position = projectionMatrix * mvPosition;", X.ShaderChunk.logdepthbuf_vertex, X.ShaderChunk.worldpos_vertex, X.ShaderChunk.shadowmap_vertex, "}"].join("\n"),
          fragmentShader: ["uniform vec3 psColor;", "uniform float opacity;", X.ShaderChunk.common, X.ShaderChunk.color_pars_fragment, X.ShaderChunk.map_particle_pars_fragment, X.ShaderChunk.fog_pars_fragment, X.ShaderChunk.shadowmap_pars_fragment, X.ShaderChunk.logdepthbuf_pars_fragment, "void main() {", "\tvec3 outgoingLight = vec3( 0.0 );", "\tvec4 diffuseColor = vec4( psColor, opacity );", X.ShaderChunk.logdepthbuf_fragment, X.ShaderChunk.map_particle_fragment, X.ShaderChunk.color_fragment, X.ShaderChunk.alphatest_fragment, "\toutgoingLight = diffuseColor.rgb;", X.ShaderChunk.shadowmap_fragment, X.ShaderChunk.fog_fragment, "\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );", "}"].join("\n")
        },
        dashed: {
          uniforms: X.UniformsUtils.merge([X.UniformsLib.common, X.UniformsLib.fog, {
            scale: {
              type: "f",
              value: 1
            },
            dashSize: {
              type: "f",
              value: 1
            },
            totalSize: {
              type: "f",
              value: 2
            }
          }]),
          vertexShader: ["uniform float scale;", "attribute float lineDistance;", "varying float vLineDistance;", X.ShaderChunk.common, X.ShaderChunk.color_pars_vertex, X.ShaderChunk.logdepthbuf_pars_vertex, "void main() {", X.ShaderChunk.color_vertex, "\tvLineDistance = scale * lineDistance;", "\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );", "\tgl_Position = projectionMatrix * mvPosition;", X.ShaderChunk.logdepthbuf_vertex, "}"].join("\n"),
          fragmentShader: ["uniform vec3 diffuse;", "uniform float opacity;", "uniform float dashSize;", "uniform float totalSize;", "varying float vLineDistance;", X.ShaderChunk.common, X.ShaderChunk.color_pars_fragment, X.ShaderChunk.fog_pars_fragment, X.ShaderChunk.logdepthbuf_pars_fragment, "void main() {", "\tif ( mod( vLineDistance, totalSize ) > dashSize ) {", "\t\tdiscard;", "\t}", "\tvec3 outgoingLight = vec3( 0.0 );", "\tvec4 diffuseColor = vec4( diffuse, opacity );", X.ShaderChunk.logdepthbuf_fragment, X.ShaderChunk.color_fragment, "\toutgoingLight = diffuseColor.rgb;", X.ShaderChunk.fog_fragment, "\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );", "}"].join("\n")
        },
        depth: {
          uniforms: {
            mNear: {
              type: "f",
              value: 1
            },
            mFar: {
              type: "f",
              value: 2e3
            },
            opacity: {
              type: "f",
              value: 1
            }
          },
          vertexShader: [X.ShaderChunk.common, X.ShaderChunk.morphtarget_pars_vertex, X.ShaderChunk.logdepthbuf_pars_vertex, "void main() {", X.ShaderChunk.morphtarget_vertex, X.ShaderChunk.default_vertex, X.ShaderChunk.logdepthbuf_vertex, "}"].join("\n"),
          fragmentShader: ["uniform float mNear;", "uniform float mFar;", "uniform float opacity;", X.ShaderChunk.common, X.ShaderChunk.logdepthbuf_pars_fragment, "void main() {", X.ShaderChunk.logdepthbuf_fragment, "\t#ifdef USE_LOGDEPTHBUF_EXT", "\t\tfloat depth = gl_FragDepthEXT / gl_FragCoord.w;", "\t#else", "\t\tfloat depth = gl_FragCoord.z / gl_FragCoord.w;", "\t#endif", "\tfloat color = 1.0 - smoothstep( mNear, mFar, depth );", "\tgl_FragColor = vec4( vec3( color ), opacity );", "}"].join("\n")
        },
        normal: {
          uniforms: {
            opacity: {
              type: "f",
              value: 1
            }
          },
          vertexShader: ["varying vec3 vNormal;", X.ShaderChunk.common, X.ShaderChunk.morphtarget_pars_vertex, X.ShaderChunk.logdepthbuf_pars_vertex, "void main() {", "\tvNormal = normalize( normalMatrix * normal );", X.ShaderChunk.morphtarget_vertex, X.ShaderChunk.default_vertex, X.ShaderChunk.logdepthbuf_vertex, "}"].join("\n"),
          fragmentShader: ["uniform float opacity;", "varying vec3 vNormal;", X.ShaderChunk.common, X.ShaderChunk.logdepthbuf_pars_fragment, "void main() {", "\tgl_FragColor = vec4( 0.5 * normalize( vNormal ) + 0.5, opacity );", X.ShaderChunk.logdepthbuf_fragment, "}"].join("\n")
        },
        cube: {
          uniforms: {
            tCube: {
              type: "t",
              value: null
            },
            tFlip: {
              type: "f",
              value: -1
            }
          },
          vertexShader: ["varying vec3 vWorldPosition;", X.ShaderChunk.common, X.ShaderChunk.logdepthbuf_pars_vertex, "void main() {", "\tvWorldPosition = transformDirection( position, modelMatrix );", "\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );", X.ShaderChunk.logdepthbuf_vertex, "}"].join("\n"),
          fragmentShader: ["uniform samplerCube tCube;", "uniform float tFlip;", "varying vec3 vWorldPosition;", X.ShaderChunk.common, X.ShaderChunk.logdepthbuf_pars_fragment, "void main() {", "\tgl_FragColor = textureCube( tCube, vec3( tFlip * vWorldPosition.x, vWorldPosition.yz ) );", X.ShaderChunk.logdepthbuf_fragment, "}"].join("\n")
        },
        equirect: {
          uniforms: {
            tEquirect: {
              type: "t",
              value: null
            },
            tFlip: {
              type: "f",
              value: -1
            }
          },
          vertexShader: ["varying vec3 vWorldPosition;", X.ShaderChunk.common, X.ShaderChunk.logdepthbuf_pars_vertex, "void main() {", "\tvWorldPosition = transformDirection( position, modelMatrix );", "\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );", X.ShaderChunk.logdepthbuf_vertex, "}"].join("\n"),
          fragmentShader: ["uniform sampler2D tEquirect;", "uniform float tFlip;", "varying vec3 vWorldPosition;", X.ShaderChunk.common, X.ShaderChunk.logdepthbuf_pars_fragment, "void main() {", "vec3 direction = normalize( vWorldPosition );", "vec2 sampleUV;", "sampleUV.y = saturate( tFlip * direction.y * -0.5 + 0.5 );", "sampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;", "gl_FragColor = texture2D( tEquirect, sampleUV );", X.ShaderChunk.logdepthbuf_fragment, "}"].join("\n")
        },
        depthRGBA: {
          uniforms: {},
          vertexShader: [X.ShaderChunk.common, X.ShaderChunk.morphtarget_pars_vertex, X.ShaderChunk.skinning_pars_vertex, X.ShaderChunk.logdepthbuf_pars_vertex, "void main() {", X.ShaderChunk.skinbase_vertex, X.ShaderChunk.morphtarget_vertex, X.ShaderChunk.skinning_vertex, X.ShaderChunk.default_vertex, X.ShaderChunk.logdepthbuf_vertex, "}"].join("\n"),
          fragmentShader: [X.ShaderChunk.common, X.ShaderChunk.logdepthbuf_pars_fragment, "vec4 pack_depth( const in float depth ) {", "\tconst vec4 bit_shift = vec4( 256.0 * 256.0 * 256.0, 256.0 * 256.0, 256.0, 1.0 );", "\tconst vec4 bit_mask = vec4( 0.0, 1.0 / 256.0, 1.0 / 256.0, 1.0 / 256.0 );", "\tvec4 res = mod( depth * bit_shift * vec4( 255 ), vec4( 256 ) ) / vec4( 255 );", "\tres -= res.xxyz * bit_mask;", "\treturn res;", "}", "void main() {", X.ShaderChunk.logdepthbuf_fragment, "\t#ifdef USE_LOGDEPTHBUF_EXT", "\t\tgl_FragData[ 0 ] = pack_depth( gl_FragDepthEXT );", "\t#else", "\t\tgl_FragData[ 0 ] = pack_depth( gl_FragCoord.z );", "\t#endif", "}"].join("\n")
        }
      }, X.WebGLRenderer = function (e) {
        console.log("THREE.WebGLRenderer", X.REVISION);
        var t = void 0 !== (e = e || {}).canvas ? e.canvas : document.createElement("canvas"),
          n = void 0 !== e.context ? e.context : null,
          i = 1,
          r = void 0 !== e.precision ? e.precision : "highp",
          o = void 0 !== e.alpha && e.alpha,
          a = void 0 === e.depth || e.depth,
          s = void 0 === e.stencil || e.stencil,
          l = void 0 !== e.antialias && e.antialias,
          c = void 0 === e.premultipliedAlpha || e.premultipliedAlpha,
          u = void 0 !== e.preserveDrawingBuffer && e.preserveDrawingBuffer,
          h = void 0 !== e.logarithmicDepthBuffer && e.logarithmicDepthBuffer,
          d = new X.Color(0),
          f = 0,
          p = [],
          m = {},
          g = [],
          v = [],
          y = [],
          b = [],
          _ = [];
        this.domElement = t, this.context = null, this.autoClear = !0, this.autoClearColor = !0, this.autoClearDepth = !0, this.autoClearStencil = !0, this.sortObjects = !0, this.gammaFactor = 2, this.gammaInput = !1, this.gammaOutput = !1, this.shadowMapEnabled = !1, this.shadowMapType = X.PCFShadowMap, this.shadowMapCullFace = X.CullFaceFront, this.shadowMapDebug = !1, this.shadowMapCascade = !1, this.maxMorphTargets = 8, this.maxMorphNormals = 4, this.autoScaleCubemaps = !0, this.info = {
          memory: {
            programs: 0,
            geometries: 0,
            textures: 0
          },
          render: {
            calls: 0,
            vertices: 0,
            faces: 0,
            points: 0
          }
        };
        var x, w = this,
          E = [],
          A = null,
          S = null,
          M = -1,
          T = "",
          C = null,
          P = 0,
          L = 0,
          D = 0,
          I = t.width,
          R = t.height,
          O = 0,
          k = 0,
          N = new X.Frustum,
          F = new X.Matrix4,
          U = new X.Vector3,
          V = new X.Vector3,
          B = !0,
          z = {
            ambient: [0, 0, 0],
            directional: {
              length: 0,
              colors: [],
              positions: []
            },
            point: {
              length: 0,
              colors: [],
              positions: [],
              distances: [],
              decays: []
            },
            spot: {
              length: 0,
              colors: [],
              positions: [],
              distances: [],
              directions: [],
              anglesCos: [],
              exponents: [],
              decays: []
            },
            hemi: {
              length: 0,
              skyColors: [],
              groundColors: [],
              positions: []
            }
          };
        try {
          var G = {
            alpha: o,
            depth: a,
            stencil: s,
            antialias: l,
            premultipliedAlpha: c,
            preserveDrawingBuffer: u
          };
          if (null === (x = n || t.getContext("webgl", G) || t.getContext("experimental-webgl", G))) throw null !== t.getContext("webgl") ? "Error creating WebGL context with your selected attributes." : "Error creating WebGL context.";
          t.addEventListener("webglcontextlost", (function (e) {
            e.preventDefault(), Y(), q(), m = {}
          }), !1)
        } catch (e) {
          X.error("THREE.WebGLRenderer: " + e)
        }
        var H = new X.WebGLState(x, ot);
        void 0 === x.getShaderPrecisionFormat && (x.getShaderPrecisionFormat = function () {
          return {
            rangeMin: 1,
            rangeMax: 1,
            precision: 1
          }
        });
        var W = new X.WebGLExtensions(x);
        W.get("OES_texture_float"), W.get("OES_texture_float_linear"), W.get("OES_texture_half_float"), W.get("OES_texture_half_float_linear"), W.get("OES_standard_derivatives"), h && W.get("EXT_frag_depth");
        var j = function (e, t, n, i) {
            !0 === c && (e *= i, t *= i, n *= i), x.clearColor(e, t, n, i)
          },
          q = function () {
            x.clearColor(0, 0, 0, 1), x.clearDepth(1), x.clearStencil(0), x.enable(x.DEPTH_TEST), x.depthFunc(x.LEQUAL), x.frontFace(x.CCW), x.cullFace(x.BACK), x.enable(x.CULL_FACE), x.enable(x.BLEND), x.blendEquation(x.FUNC_ADD), x.blendFunc(x.SRC_ALPHA, x.ONE_MINUS_SRC_ALPHA), x.viewport(L, D, I, R), j(d.r, d.g, d.b, f)
          },
          Y = function () {
            A = null, C = null, T = "", M = -1, B = !0, H.reset()
          };
        q(), this.context = x, this.state = H;
        var K, Q = x.getParameter(x.MAX_TEXTURE_IMAGE_UNITS),
          Z = x.getParameter(x.MAX_VERTEX_TEXTURE_IMAGE_UNITS),
          J = x.getParameter(x.MAX_TEXTURE_SIZE),
          $ = x.getParameter(x.MAX_CUBE_MAP_TEXTURE_SIZE),
          ee = Z > 0,
          te = ee && W.get("OES_texture_float"),
          ne = x.getShaderPrecisionFormat(x.VERTEX_SHADER, x.HIGH_FLOAT),
          ie = x.getShaderPrecisionFormat(x.VERTEX_SHADER, x.MEDIUM_FLOAT),
          re = x.getShaderPrecisionFormat(x.FRAGMENT_SHADER, x.HIGH_FLOAT),
          oe = x.getShaderPrecisionFormat(x.FRAGMENT_SHADER, x.MEDIUM_FLOAT),
          ae = function () {
            if (void 0 !== K) return K;
            if (K = [], W.get("WEBGL_compressed_texture_pvrtc") || W.get("WEBGL_compressed_texture_s3tc"))
              for (var e = x.getParameter(x.COMPRESSED_TEXTURE_FORMATS), t = 0; t < e.length; t++) K.push(e[t]);
            return K
          },
          se = ne.precision > 0 && re.precision > 0,
          le = ie.precision > 0 && oe.precision > 0;
        "highp" !== r || se || (le ? (r = "mediump", X.warn("THREE.WebGLRenderer: highp not supported, using mediump.")) : (r = "lowp", X.warn("THREE.WebGLRenderer: highp and mediump not supported, using lowp."))), "mediump" !== r || le || (r = "lowp", X.warn("THREE.WebGLRenderer: mediump not supported, using lowp."));
        var ce, ue = new X.ShadowMapPlugin(this, p, m, g),
          he = new X.SpritePlugin(this, b),
          de = new X.LensFlarePlugin(this, _);

        function fe(e) {
          e.__webglVertexBuffer = x.createBuffer(), e.__webglNormalBuffer = x.createBuffer(), e.__webglTangentBuffer = x.createBuffer(), e.__webglColorBuffer = x.createBuffer(), e.__webglUVBuffer = x.createBuffer(), e.__webglUV2Buffer = x.createBuffer(), e.__webglSkinIndicesBuffer = x.createBuffer(), e.__webglSkinWeightsBuffer = x.createBuffer(), e.__webglFaceBuffer = x.createBuffer(), e.__webglLineBuffer = x.createBuffer();
          var t = e.numMorphTargets;
          if (t) {
            e.__webglMorphTargetsBuffers = [];
            for (var n = 0, i = t; n < i; n++) e.__webglMorphTargetsBuffers.push(x.createBuffer())
          }
          var r = e.numMorphNormals;
          if (r) {
            e.__webglMorphNormalsBuffers = [];
            for (n = 0, i = r; n < i; n++) e.__webglMorphNormalsBuffers.push(x.createBuffer())
          }
          w.info.memory.geometries++
        }
        this.getContext = function () {
          return x
        }, this.forceContextLoss = function () {
          W.get("WEBGL_lose_context").loseContext()
        }, this.supportsVertexTextures = function () {
          return ee
        }, this.supportsFloatTextures = function () {
          return W.get("OES_texture_float")
        }, this.supportsHalfFloatTextures = function () {
          return W.get("OES_texture_half_float")
        }, this.supportsStandardDerivatives = function () {
          return W.get("OES_standard_derivatives")
        }, this.supportsCompressedTextureS3TC = function () {
          return W.get("WEBGL_compressed_texture_s3tc")
        }, this.supportsCompressedTexturePVRTC = function () {
          return W.get("WEBGL_compressed_texture_pvrtc")
        }, this.supportsBlendMinMax = function () {
          return W.get("EXT_blend_minmax")
        }, this.getMaxAnisotropy = function () {
          if (void 0 !== ce) return ce;
          var e = W.get("EXT_texture_filter_anisotropic");
          return ce = null !== e ? x.getParameter(e.MAX_TEXTURE_MAX_ANISOTROPY_EXT) : 0
        }, this.getPrecision = function () {
          return r
        }, this.getPixelRatio = function () {
          return i
        }, this.setPixelRatio = function (e) {
          i = e
        }, this.setSize = function (e, n, r) {
          t.width = e * i, t.height = n * i, !1 !== r && (t.style.width = e + "px", t.style.height = n + "px"), this.setViewport(0, 0, e, n)
        }, this.setViewport = function (e, t, n, r) {
          L = e * i, D = t * i, I = n * i, R = r * i, x.viewport(L, D, I, R)
        }, this.setScissor = function (e, t, n, r) {
          x.scissor(e * i, t * i, n * i, r * i)
        }, this.enableScissorTest = function (e) {
          e ? x.enable(x.SCISSOR_TEST) : x.disable(x.SCISSOR_TEST)
        }, this.getClearColor = function () {
          return d
        }, this.setClearColor = function (e, t) {
          d.set(e), f = void 0 !== t ? t : 1, j(d.r, d.g, d.b, f)
        }, this.getClearAlpha = function () {
          return f
        }, this.setClearAlpha = function (e) {
          f = e, j(d.r, d.g, d.b, f)
        }, this.clear = function (e, t, n) {
          var i = 0;
          (void 0 === e || e) && (i |= x.COLOR_BUFFER_BIT), (void 0 === t || t) && (i |= x.DEPTH_BUFFER_BIT), (void 0 === n || n) && (i |= x.STENCIL_BUFFER_BIT), x.clear(i)
        }, this.clearColor = function () {
          x.clear(x.COLOR_BUFFER_BIT)
        }, this.clearDepth = function () {
          x.clear(x.DEPTH_BUFFER_BIT)
        }, this.clearStencil = function () {
          x.clear(x.STENCIL_BUFFER_BIT)
        }, this.clearTarget = function (e, t, n, i) {
          this.setRenderTarget(e), this.clear(t, n, i)
        }, this.resetGLState = Y;
        var pe = function e(t) {
            t.target.traverse((function (t) {
              t.removeEventListener("remove", e),
                function (e) {
                  e instanceof X.Mesh || e instanceof X.PointCloud || e instanceof X.Line ? delete m[e.id] : (e instanceof X.ImmediateRenderObject || e.immediateRenderCallback) && function (e, t) {
                    for (var n = e.length - 1; n >= 0; n--) e[n].object === t && e.splice(n, 1)
                  }(g, e);
                  delete e.__webglInit, delete e._modelViewMatrix, delete e._normalMatrix, delete e.__webglActive
                }(t)
            }))
          },
          me = function e(t) {
            var n = t.target;
            n.removeEventListener("dispose", e), _e(n)
          },
          ge = function e(t) {
            var n = t.target;
            n.removeEventListener("dispose", e), xe(n), w.info.memory.textures--
          },
          ve = function e(t) {
            var n = t.target;
            n.removeEventListener("dispose", e), we(n), w.info.memory.textures--
          },
          ye = function e(t) {
            var n = t.target;
            n.removeEventListener("dispose", e), Ee(n)
          },
          be = function (e) {
            for (var t = ["__webglVertexBuffer", "__webglNormalBuffer", "__webglTangentBuffer", "__webglColorBuffer", "__webglUVBuffer", "__webglUV2Buffer", "__webglSkinIndicesBuffer", "__webglSkinWeightsBuffer", "__webglFaceBuffer", "__webglLineBuffer", "__webglLineDistanceBuffer"], n = 0, i = t.length; n < i; n++) {
              void 0 !== e[r = t[n]] && (x.deleteBuffer(e[r]), delete e[r])
            }
            if (void 0 !== e.__webglCustomAttributesList) {
              for (var r in e.__webglCustomAttributesList) x.deleteBuffer(e.__webglCustomAttributesList[r].buffer);
              delete e.__webglCustomAttributesList
            }
            w.info.memory.geometries--
          },
          _e = function (e) {
            if (delete e.__webglInit, e instanceof X.BufferGeometry) {
              for (var t in e.attributes) {
                var n = e.attributes[t];
                void 0 !== n.buffer && (x.deleteBuffer(n.buffer), delete n.buffer)
              }
              w.info.memory.geometries--
            } else {
              var i = Ne[e.id];
              if (void 0 !== i) {
                for (var r = 0, o = i.length; r < o; r++) {
                  var a = i[r];
                  if (void 0 !== a.numMorphTargets) {
                    for (var s = 0, l = a.numMorphTargets; s < l; s++) x.deleteBuffer(a.__webglMorphTargetsBuffers[s]);
                    delete a.__webglMorphTargetsBuffers
                  }
                  if (void 0 !== a.numMorphNormals) {
                    for (s = 0, l = a.numMorphNormals; s < l; s++) x.deleteBuffer(a.__webglMorphNormalsBuffers[s]);
                    delete a.__webglMorphNormalsBuffers
                  }
                  be(a)
                }
                delete Ne[e.id]
              } else be(e)
            }
            T = ""
          },
          xe = function (e) {
            if (e.image && e.image.__webglTextureCube) x.deleteTexture(e.image.__webglTextureCube), delete e.image.__webglTextureCube;
            else {
              if (void 0 === e.__webglInit) return;
              x.deleteTexture(e.__webglTexture), delete e.__webglTexture, delete e.__webglInit
            }
          },
          we = function (e) {
            if (e && void 0 !== e.__webglTexture) {
              if (x.deleteTexture(e.__webglTexture), delete e.__webglTexture, e instanceof X.WebGLRenderTargetCube)
                for (var t = 0; t < 6; t++) x.deleteFramebuffer(e.__webglFramebuffer[t]), x.deleteRenderbuffer(e.__webglRenderbuffer[t]);
              else x.deleteFramebuffer(e.__webglFramebuffer), x.deleteRenderbuffer(e.__webglRenderbuffer);
              delete e.__webglFramebuffer, delete e.__webglRenderbuffer
            }
          },
          Ee = function (e) {
            var t = e.program.program;
            if (void 0 !== t) {
              var n, i, r;
              e.program = void 0;
              var o = !1;
              for (n = 0, i = E.length; n < i; n++)
                if ((r = E[n]).program === t) {
                  r.usedTimes--, 0 === r.usedTimes && (o = !0);
                  break
                } if (!0 === o) {
                var a = [];
                for (n = 0, i = E.length; n < i; n++)(r = E[n]).program !== t && a.push(r);
                E = a, x.deleteProgram(t), w.info.memory.programs--
              }
            }
          };

        function Ae(e) {
          var t = e.geometry,
            n = e.material,
            i = t.vertices.length;
          if (n.attributes)
            for (var r in void 0 === t.__webglCustomAttributesList && (t.__webglCustomAttributesList = []), n.attributes) {
              var o = n.attributes[r];
              if (!o.__webglInitialized || o.createUniqueBuffers) {
                o.__webglInitialized = !0;
                var a = 1;
                "v2" === o.type ? a = 2 : "v3" === o.type ? a = 3 : "v4" === o.type ? a = 4 : "c" === o.type && (a = 3), o.size = a, o.array = new Float32Array(i * a), o.buffer = x.createBuffer(), o.buffer.belongsToAttribute = r, o.needsUpdate = !0
              }
              t.__webglCustomAttributesList.push(o)
            }
        }

        function Se(e, t) {
          var n = t.geometry,
            i = e.faces3,
            r = 3 * i.length,
            o = 1 * i.length,
            a = 3 * i.length,
            s = Me(t, e);
          e.__vertexArray = new Float32Array(3 * r), e.__normalArray = new Float32Array(3 * r), e.__colorArray = new Float32Array(3 * r), e.__uvArray = new Float32Array(2 * r), n.faceVertexUvs.length > 1 && (e.__uv2Array = new Float32Array(2 * r)), n.hasTangents && (e.__tangentArray = new Float32Array(4 * r)), t.geometry.skinWeights.length && t.geometry.skinIndices.length && (e.__skinIndexArray = new Float32Array(4 * r), e.__skinWeightArray = new Float32Array(4 * r));
          var l = null !== W.get("OES_element_index_uint") && o > 21845 ? Uint32Array : Uint16Array;
          e.__typeArray = l, e.__faceArray = new l(3 * o), e.__lineArray = new l(2 * a);
          var c = e.numMorphTargets;
          if (c) {
            e.__morphTargetsArrays = [];
            for (var u = 0, h = c; u < h; u++) e.__morphTargetsArrays.push(new Float32Array(3 * r))
          }
          var d = e.numMorphNormals;
          if (d) {
            e.__morphNormalsArrays = [];
            for (u = 0, h = d; u < h; u++) e.__morphNormalsArrays.push(new Float32Array(3 * r))
          }
          if (e.__webglFaceCount = 3 * o, e.__webglLineCount = 2 * a, s.attributes)
            for (var f in void 0 === e.__webglCustomAttributesList && (e.__webglCustomAttributesList = []), s.attributes) {
              var p = s.attributes[f],
                m = {};
              for (var g in p) m[g] = p[g];
              if (!m.__webglInitialized || m.createUniqueBuffers) {
                m.__webglInitialized = !0;
                var v = 1;
                "v2" === m.type ? v = 2 : "v3" === m.type ? v = 3 : "v4" === m.type ? v = 4 : "c" === m.type && (v = 3), m.size = v, m.array = new Float32Array(r * v), m.buffer = x.createBuffer(), m.buffer.belongsToAttribute = f, p.needsUpdate = !0, m.__original = p
              }
              e.__webglCustomAttributesList.push(m)
            }
          e.__inittedArrays = !0
        }

        function Me(e, t) {
          return e.material instanceof X.MeshFaceMaterial ? e.material.materials[t.materialIndex] : e.material
        }

        function Te(e, t, n, i, r) {
          if (e.__inittedArrays) {
            var o, a, s, l, c, u, h, d, f, p, m, g, v, y, b, _, w, E, A, S, M, T, C, P, L, D, I, R, O, k, N, F, U, V, B, z, G, H, W, j, q, Y = function (e) {
                return e instanceof X.MeshPhongMaterial == !1 && e.shading === X.FlatShading
              }(r),
              K = 0,
              Q = 0,
              Z = 0,
              J = 0,
              $ = 0,
              ee = 0,
              te = 0,
              ne = 0,
              ie = 0,
              re = 0,
              oe = 0,
              ae = 0,
              se = e.__vertexArray,
              le = e.__uvArray,
              ce = e.__uv2Array,
              ue = e.__normalArray,
              he = e.__tangentArray,
              de = e.__colorArray,
              fe = e.__skinIndexArray,
              pe = e.__skinWeightArray,
              me = e.__morphTargetsArrays,
              ge = e.__morphNormalsArrays,
              ve = e.__webglCustomAttributesList,
              ye = e.__faceArray,
              be = e.__lineArray,
              _e = t.geometry,
              xe = _e.verticesNeedUpdate,
              we = _e.elementsNeedUpdate,
              Ee = _e.uvsNeedUpdate,
              Ae = _e.normalsNeedUpdate,
              Se = _e.tangentsNeedUpdate,
              Me = _e.colorsNeedUpdate,
              Te = _e.morphTargetsNeedUpdate,
              Ce = _e.vertices,
              Pe = e.faces3,
              Le = _e.faces,
              De = _e.faceVertexUvs[0],
              Ie = _e.faceVertexUvs[1],
              Re = _e.skinIndices,
              Oe = _e.skinWeights,
              ke = _e.morphTargets,
              Ne = _e.morphNormals;
            if (xe) {
              for (o = 0, a = Pe.length; o < a; o++) m = Ce[(s = Le[Pe[o]]).a], g = Ce[s.b], v = Ce[s.c], se[Q] = m.x, se[Q + 1] = m.y, se[Q + 2] = m.z, se[Q + 3] = g.x, se[Q + 4] = g.y, se[Q + 5] = g.z, se[Q + 6] = v.x, se[Q + 7] = v.y, se[Q + 8] = v.z, Q += 9;
              x.bindBuffer(x.ARRAY_BUFFER, e.__webglVertexBuffer), x.bufferData(x.ARRAY_BUFFER, se, n)
            }
            if (Te)
              for (V = 0, B = ke.length; V < B; V++) {
                for (oe = 0, o = 0, a = Pe.length; o < a; o++) s = Le[H = Pe[o]], m = ke[V].vertices[s.a], g = ke[V].vertices[s.b], v = ke[V].vertices[s.c], (z = me[V])[oe] = m.x, z[oe + 1] = m.y, z[oe + 2] = m.z, z[oe + 3] = g.x, z[oe + 4] = g.y, z[oe + 5] = g.z, z[oe + 6] = v.x, z[oe + 7] = v.y, z[oe + 8] = v.z, r.morphNormals && (Y ? (E = w = Ne[V].faceNormals[H], A = w) : (w = (W = Ne[V].vertexNormals[H]).a, E = W.b, A = W.c), (G = ge[V])[oe] = w.x, G[oe + 1] = w.y, G[oe + 2] = w.z, G[oe + 3] = E.x, G[oe + 4] = E.y, G[oe + 5] = E.z, G[oe + 6] = A.x, G[oe + 7] = A.y, G[oe + 8] = A.z), oe += 9;
                x.bindBuffer(x.ARRAY_BUFFER, e.__webglMorphTargetsBuffers[V]), x.bufferData(x.ARRAY_BUFFER, me[V], n), r.morphNormals && (x.bindBuffer(x.ARRAY_BUFFER, e.__webglMorphNormalsBuffers[V]), x.bufferData(x.ARRAY_BUFFER, ge[V], n))
              }
            if (Oe.length) {
              for (o = 0, a = Pe.length; o < a; o++) C = Oe[(s = Le[Pe[o]]).a], P = Oe[s.b], L = Oe[s.c], pe[re] = C.x, pe[re + 1] = C.y, pe[re + 2] = C.z, pe[re + 3] = C.w, pe[re + 4] = P.x, pe[re + 5] = P.y, pe[re + 6] = P.z, pe[re + 7] = P.w, pe[re + 8] = L.x, pe[re + 9] = L.y, pe[re + 10] = L.z, pe[re + 11] = L.w, D = Re[s.a], I = Re[s.b], R = Re[s.c], fe[re] = D.x, fe[re + 1] = D.y, fe[re + 2] = D.z, fe[re + 3] = D.w, fe[re + 4] = I.x, fe[re + 5] = I.y, fe[re + 6] = I.z, fe[re + 7] = I.w, fe[re + 8] = R.x, fe[re + 9] = R.y, fe[re + 10] = R.z, fe[re + 11] = R.w, re += 12;
              re > 0 && (x.bindBuffer(x.ARRAY_BUFFER, e.__webglSkinIndicesBuffer), x.bufferData(x.ARRAY_BUFFER, fe, n), x.bindBuffer(x.ARRAY_BUFFER, e.__webglSkinWeightsBuffer), x.bufferData(x.ARRAY_BUFFER, pe, n))
            }
            if (Me) {
              for (o = 0, a = Pe.length; o < a; o++) u = (s = Le[Pe[o]]).vertexColors, h = s.color, 3 === u.length && r.vertexColors === X.VertexColors ? (S = u[0], M = u[1], T = u[2]) : (S = h, M = h, T = h), de[ie] = S.r, de[ie + 1] = S.g, de[ie + 2] = S.b, de[ie + 3] = M.r, de[ie + 4] = M.g, de[ie + 5] = M.b, de[ie + 6] = T.r, de[ie + 7] = T.g, de[ie + 8] = T.b, ie += 9;
              ie > 0 && (x.bindBuffer(x.ARRAY_BUFFER, e.__webglColorBuffer), x.bufferData(x.ARRAY_BUFFER, de, n))
            }
            if (Se && _e.hasTangents) {
              for (o = 0, a = Pe.length; o < a; o++) y = (d = (s = Le[Pe[o]]).vertexTangents)[0], b = d[1], _ = d[2], he[te] = y.x, he[te + 1] = y.y, he[te + 2] = y.z, he[te + 3] = y.w, he[te + 4] = b.x, he[te + 5] = b.y, he[te + 6] = b.z, he[te + 7] = b.w, he[te + 8] = _.x, he[te + 9] = _.y, he[te + 10] = _.z, he[te + 11] = _.w, te += 12;
              x.bindBuffer(x.ARRAY_BUFFER, e.__webglTangentBuffer), x.bufferData(x.ARRAY_BUFFER, he, n)
            }
            if (Ae) {
              for (o = 0, a = Pe.length; o < a; o++)
                if (l = (s = Le[Pe[o]]).vertexNormals, c = s.normal, 3 === l.length && !1 === Y)
                  for (O = 0; O < 3; O++) N = l[O], ue[ee] = N.x, ue[ee + 1] = N.y, ue[ee + 2] = N.z, ee += 3;
                else
                  for (O = 0; O < 3; O++) ue[ee] = c.x, ue[ee + 1] = c.y, ue[ee + 2] = c.z, ee += 3;
              x.bindBuffer(x.ARRAY_BUFFER, e.__webglNormalBuffer), x.bufferData(x.ARRAY_BUFFER, ue, n)
            }
            if (Ee && De) {
              for (o = 0, a = Pe.length; o < a; o++)
                if (void 0 !== (f = De[Pe[o]]))
                  for (O = 0; O < 3; O++) F = f[O], le[Z] = F.x, le[Z + 1] = F.y, Z += 2;
              Z > 0 && (x.bindBuffer(x.ARRAY_BUFFER, e.__webglUVBuffer), x.bufferData(x.ARRAY_BUFFER, le, n))
            }
            if (Ee && Ie) {
              for (o = 0, a = Pe.length; o < a; o++)
                if (void 0 !== (p = Ie[Pe[o]]))
                  for (O = 0; O < 3; O++) U = p[O], ce[J] = U.x, ce[J + 1] = U.y, J += 2;
              J > 0 && (x.bindBuffer(x.ARRAY_BUFFER, e.__webglUV2Buffer), x.bufferData(x.ARRAY_BUFFER, ce, n))
            }
            if (we) {
              for (o = 0, a = Pe.length; o < a; o++) ye[$] = K, ye[$ + 1] = K + 1, ye[$ + 2] = K + 2, $ += 3, be[ne] = K, be[ne + 1] = K + 1, be[ne + 2] = K, be[ne + 3] = K + 2, be[ne + 4] = K + 1, be[ne + 5] = K + 2, ne += 6, K += 3;
              x.bindBuffer(x.ELEMENT_ARRAY_BUFFER, e.__webglFaceBuffer), x.bufferData(x.ELEMENT_ARRAY_BUFFER, ye, n), x.bindBuffer(x.ELEMENT_ARRAY_BUFFER, e.__webglLineBuffer), x.bufferData(x.ELEMENT_ARRAY_BUFFER, be, n)
            }
            if (ve)
              for (O = 0, k = ve.length; O < k; O++)
                if ((q = ve[O]).__original.needsUpdate) {
                  if (ae = 0, 1 === q.size) {
                    if (void 0 === q.boundTo || "vertices" === q.boundTo)
                      for (o = 0, a = Pe.length; o < a; o++) s = Le[Pe[o]], q.array[ae] = q.value[s.a], q.array[ae + 1] = q.value[s.b], q.array[ae + 2] = q.value[s.c], ae += 3;
                    else if ("faces" === q.boundTo)
                      for (o = 0, a = Pe.length; o < a; o++) j = q.value[Pe[o]], q.array[ae] = j, q.array[ae + 1] = j, q.array[ae + 2] = j, ae += 3
                  } else if (2 === q.size) {
                    if (void 0 === q.boundTo || "vertices" === q.boundTo)
                      for (o = 0, a = Pe.length; o < a; o++) s = Le[Pe[o]], m = q.value[s.a], g = q.value[s.b], v = q.value[s.c], q.array[ae] = m.x, q.array[ae + 1] = m.y, q.array[ae + 2] = g.x, q.array[ae + 3] = g.y, q.array[ae + 4] = v.x, q.array[ae + 5] = v.y, ae += 6;
                    else if ("faces" === q.boundTo)
                      for (o = 0, a = Pe.length; o < a; o++) m = j = q.value[Pe[o]], g = j, v = j, q.array[ae] = m.x, q.array[ae + 1] = m.y, q.array[ae + 2] = g.x, q.array[ae + 3] = g.y, q.array[ae + 4] = v.x, q.array[ae + 5] = v.y, ae += 6
                  } else if (3 === q.size) {
                    var Fe;
                    if (Fe = "c" === q.type ? ["r", "g", "b"] : ["x", "y", "z"], void 0 === q.boundTo || "vertices" === q.boundTo)
                      for (o = 0, a = Pe.length; o < a; o++) s = Le[Pe[o]], m = q.value[s.a], g = q.value[s.b], v = q.value[s.c], q.array[ae] = m[Fe[0]], q.array[ae + 1] = m[Fe[1]], q.array[ae + 2] = m[Fe[2]], q.array[ae + 3] = g[Fe[0]], q.array[ae + 4] = g[Fe[1]], q.array[ae + 5] = g[Fe[2]], q.array[ae + 6] = v[Fe[0]], q.array[ae + 7] = v[Fe[1]], q.array[ae + 8] = v[Fe[2]], ae += 9;
                    else if ("faces" === q.boundTo)
                      for (o = 0, a = Pe.length; o < a; o++) m = j = q.value[Pe[o]], g = j, v = j, q.array[ae] = m[Fe[0]], q.array[ae + 1] = m[Fe[1]], q.array[ae + 2] = m[Fe[2]], q.array[ae + 3] = g[Fe[0]], q.array[ae + 4] = g[Fe[1]], q.array[ae + 5] = g[Fe[2]], q.array[ae + 6] = v[Fe[0]], q.array[ae + 7] = v[Fe[1]], q.array[ae + 8] = v[Fe[2]], ae += 9;
                    else if ("faceVertices" === q.boundTo)
                      for (o = 0, a = Pe.length; o < a; o++) m = (j = q.value[Pe[o]])[0], g = j[1], v = j[2], q.array[ae] = m[Fe[0]], q.array[ae + 1] = m[Fe[1]], q.array[ae + 2] = m[Fe[2]], q.array[ae + 3] = g[Fe[0]], q.array[ae + 4] = g[Fe[1]], q.array[ae + 5] = g[Fe[2]], q.array[ae + 6] = v[Fe[0]], q.array[ae + 7] = v[Fe[1]], q.array[ae + 8] = v[Fe[2]], ae += 9
                  } else if (4 === q.size)
                    if (void 0 === q.boundTo || "vertices" === q.boundTo)
                      for (o = 0, a = Pe.length; o < a; o++) s = Le[Pe[o]], m = q.value[s.a], g = q.value[s.b], v = q.value[s.c], q.array[ae] = m.x, q.array[ae + 1] = m.y, q.array[ae + 2] = m.z, q.array[ae + 3] = m.w, q.array[ae + 4] = g.x, q.array[ae + 5] = g.y, q.array[ae + 6] = g.z, q.array[ae + 7] = g.w, q.array[ae + 8] = v.x, q.array[ae + 9] = v.y, q.array[ae + 10] = v.z, q.array[ae + 11] = v.w, ae += 12;
                    else if ("faces" === q.boundTo)
                    for (o = 0, a = Pe.length; o < a; o++) m = j = q.value[Pe[o]], g = j, v = j, q.array[ae] = m.x, q.array[ae + 1] = m.y, q.array[ae + 2] = m.z, q.array[ae + 3] = m.w, q.array[ae + 4] = g.x, q.array[ae + 5] = g.y, q.array[ae + 6] = g.z, q.array[ae + 7] = g.w, q.array[ae + 8] = v.x, q.array[ae + 9] = v.y, q.array[ae + 10] = v.z, q.array[ae + 11] = v.w, ae += 12;
                  else if ("faceVertices" === q.boundTo)
                    for (o = 0, a = Pe.length; o < a; o++) m = (j = q.value[Pe[o]])[0], g = j[1], v = j[2], q.array[ae] = m.x, q.array[ae + 1] = m.y, q.array[ae + 2] = m.z, q.array[ae + 3] = m.w, q.array[ae + 4] = g.x, q.array[ae + 5] = g.y, q.array[ae + 6] = g.z, q.array[ae + 7] = g.w, q.array[ae + 8] = v.x, q.array[ae + 9] = v.y, q.array[ae + 10] = v.z, q.array[ae + 11] = v.w, ae += 12;
                  x.bindBuffer(x.ARRAY_BUFFER, q.buffer), x.bufferData(x.ARRAY_BUFFER, q.array, n)
                } i && (delete e.__inittedArrays, delete e.__colorArray, delete e.__normalArray, delete e.__tangentArray, delete e.__uvArray, delete e.__uv2Array, delete e.__faceArray, delete e.__vertexArray, delete e.__lineArray, delete e.__skinIndexArray, delete e.__skinWeightArray)
          }
        }

        function Ce(e, t, n, i) {
          for (var r = n.attributes, o = t.attributes, a = t.attributesKeys, s = 0, l = a.length; s < l; s++) {
            var c = a[s],
              u = o[c];
            if (u >= 0) {
              var h = r[c];
              if (void 0 !== h) {
                var d = h.itemSize;
                x.bindBuffer(x.ARRAY_BUFFER, h.buffer), H.enableAttribute(u), x.vertexAttribPointer(u, d, x.FLOAT, !1, 0, i * d * 4)
              } else void 0 !== e.defaultAttributeValues && (2 === e.defaultAttributeValues[c].length ? x.vertexAttrib2fv(u, e.defaultAttributeValues[c]) : 3 === e.defaultAttributeValues[c].length && x.vertexAttrib3fv(u, e.defaultAttributeValues[c]))
            }
          }
          H.disableUnusedAttributes()
        }

        function Pe(e, t) {
          return e.object.renderOrder !== t.object.renderOrder ? e.object.renderOrder - t.object.renderOrder : e.material.id !== t.material.id ? e.material.id - t.material.id : e.z !== t.z ? e.z - t.z : e.id - t.id
        }

        function Le(e, t) {
          return e.object.renderOrder !== t.object.renderOrder ? e.object.renderOrder - t.object.renderOrder : e.z !== t.z ? t.z - e.z : e.id - t.id
        }

        function De(e, t) {
          return t[0] - e[0]
        }

        function Ie(e, t, n, i, r) {
          for (var o, a = 0, s = e.length; a < s; a++) {
            var l = e[a],
              c = l.object,
              u = l.buffer;
            if (Qe(c, t), r) o = r;
            else {
              if (!(o = l.material)) continue;
              je(o)
            }
            w.setMaterialFaces(o), u instanceof X.BufferGeometry ? w.renderBufferDirect(t, n, i, o, u, c) : w.renderBuffer(t, n, i, o, u, c)
          }
        }

        function Re(e, t, n, i, r, o) {
          for (var a, s = 0, l = e.length; s < l; s++) {
            var c = e[s],
              u = c.object;
            if (u.visible) {
              if (o) a = o;
              else {
                if (!(a = c[t])) continue;
                je(a)
              }
              w.renderImmediateObject(n, i, r, a, u)
            }
          }
        }

        function Oe(e) {
          var t = e.object.material;
          t.transparent ? (e.transparent = t, e.opaque = null) : (e.opaque = t, e.transparent = null)
        }

        function ke(e) {
          var t = e.object,
            n = e.buffer,
            i = t.geometry,
            r = t.material;
          if (r instanceof X.MeshFaceMaterial) {
            var o = i instanceof X.BufferGeometry ? 0 : n.materialIndex;
            r = r.materials[o], e.material = r, r.transparent ? y.push(e) : v.push(e)
          } else r && (e.material = r, r.transparent ? y.push(e) : v.push(e))
        }
        this.renderBufferImmediate = function (e, t, n) {
          if (H.initAttributes(), e.hasPositions && !e.__webglVertexBuffer && (e.__webglVertexBuffer = x.createBuffer()), e.hasNormals && !e.__webglNormalBuffer && (e.__webglNormalBuffer = x.createBuffer()), e.hasUvs && !e.__webglUvBuffer && (e.__webglUvBuffer = x.createBuffer()), e.hasColors && !e.__webglColorBuffer && (e.__webglColorBuffer = x.createBuffer()), e.hasPositions && (x.bindBuffer(x.ARRAY_BUFFER, e.__webglVertexBuffer), x.bufferData(x.ARRAY_BUFFER, e.positionArray, x.DYNAMIC_DRAW), H.enableAttribute(t.attributes.position), x.vertexAttribPointer(t.attributes.position, 3, x.FLOAT, !1, 0, 0)), e.hasNormals) {
            if (x.bindBuffer(x.ARRAY_BUFFER, e.__webglNormalBuffer), n instanceof X.MeshPhongMaterial == !1 && n.shading === X.FlatShading) {
              var i, r, o, a, s, l, c, u, h, d, f, p = 3 * e.count;
              for (f = 0; f < p; f += 9) a = (d = e.normalArray)[f], l = d[f + 1], u = d[f + 2], s = d[f + 3], c = d[f + 4], h = d[f + 5], i = (a + s + d[f + 6]) / 3, r = (l + c + d[f + 7]) / 3, o = (u + h + d[f + 8]) / 3, d[f] = i, d[f + 1] = r, d[f + 2] = o, d[f + 3] = i, d[f + 4] = r, d[f + 5] = o, d[f + 6] = i, d[f + 7] = r, d[f + 8] = o
            }
            x.bufferData(x.ARRAY_BUFFER, e.normalArray, x.DYNAMIC_DRAW), H.enableAttribute(t.attributes.normal), x.vertexAttribPointer(t.attributes.normal, 3, x.FLOAT, !1, 0, 0)
          }
          e.hasUvs && n.map && (x.bindBuffer(x.ARRAY_BUFFER, e.__webglUvBuffer), x.bufferData(x.ARRAY_BUFFER, e.uvArray, x.DYNAMIC_DRAW), H.enableAttribute(t.attributes.uv), x.vertexAttribPointer(t.attributes.uv, 2, x.FLOAT, !1, 0, 0)), e.hasColors && n.vertexColors !== X.NoColors && (x.bindBuffer(x.ARRAY_BUFFER, e.__webglColorBuffer), x.bufferData(x.ARRAY_BUFFER, e.colorArray, x.DYNAMIC_DRAW), H.enableAttribute(t.attributes.color), x.vertexAttribPointer(t.attributes.color, 3, x.FLOAT, !1, 0, 0)), H.disableUnusedAttributes(), x.drawArrays(x.TRIANGLES, 0, e.count), e.count = 0
        }, this.renderBufferDirect = function (e, t, n, r, o, a) {
          if (!1 !== r.visible) {
            Be(a);
            var s = qe(e, t, n, r, a),
              l = !1,
              c = r.wireframe ? 1 : 0,
              u = "direct_" + o.id + "_" + s.id + "_" + c;
            if (u !== T && (T = u, l = !0), l && H.initAttributes(), a instanceof X.Mesh) {
              var h = !0 === r.wireframe ? x.LINES : x.TRIANGLES;
              if (g = o.attributes.index) {
                if (g.array instanceof Uint32Array && W.get("OES_element_index_uint") ? (v = x.UNSIGNED_INT, y = 4) : (v = x.UNSIGNED_SHORT, y = 2), 0 === (b = o.offsets).length) l && (Ce(r, s, o, 0), x.bindBuffer(x.ELEMENT_ARRAY_BUFFER, g.buffer)), x.drawElements(h, g.array.length, v, 0), w.info.render.calls++, w.info.render.vertices += g.array.length, w.info.render.faces += g.array.length / 3;
                else {
                  l = !0;
                  for (var d = 0, f = b.length; d < f; d++) {
                    var p = b[d].index;
                    l && (Ce(r, s, o, p), x.bindBuffer(x.ELEMENT_ARRAY_BUFFER, g.buffer)), x.drawElements(h, b[d].count, v, b[d].start * y), w.info.render.calls++, w.info.render.vertices += b[d].count, w.info.render.faces += b[d].count / 3
                  }
                }
              } else {
                l && Ce(r, s, o, 0);
                var m = o.attributes.position;
                x.drawArrays(h, 0, m.array.length / m.itemSize), w.info.render.calls++, w.info.render.vertices += m.array.length / m.itemSize, w.info.render.faces += m.array.length / (3 * m.itemSize)
              }
            } else if (a instanceof X.PointCloud) {
              h = x.POINTS;
              if (g = o.attributes.index) {
                if (g.array instanceof Uint32Array && W.get("OES_element_index_uint") ? (v = x.UNSIGNED_INT, y = 4) : (v = x.UNSIGNED_SHORT, y = 2), 0 === (b = o.offsets).length) l && (Ce(r, s, o, 0), x.bindBuffer(x.ELEMENT_ARRAY_BUFFER, g.buffer)), x.drawElements(h, g.array.length, v, 0), w.info.render.calls++, w.info.render.points += g.array.length;
                else {
                  b.length > 1 && (l = !0);
                  for (d = 0, f = b.length; d < f; d++) {
                    p = b[d].index;
                    l && (Ce(r, s, o, p), x.bindBuffer(x.ELEMENT_ARRAY_BUFFER, g.buffer)), x.drawElements(h, b[d].count, v, b[d].start * y), w.info.render.calls++, w.info.render.points += b[d].count
                  }
                }
              } else {
                l && Ce(r, s, o, 0);
                m = o.attributes.position;
                if (0 === (b = o.offsets).length) x.drawArrays(h, 0, m.array.length / 3), w.info.render.calls++, w.info.render.points += m.array.length / 3;
                else
                  for (d = 0, f = b.length; d < f; d++) x.drawArrays(h, b[d].index, b[d].count), w.info.render.calls++, w.info.render.points += b[d].count
              }
            } else if (a instanceof X.Line) {
              var g;
              h = a.mode === X.LineStrip ? x.LINE_STRIP : x.LINES;
              if (H.setLineWidth(r.linewidth * i), g = o.attributes.index) {
                var v, y;
                if (g.array instanceof Uint32Array ? (v = x.UNSIGNED_INT, y = 4) : (v = x.UNSIGNED_SHORT, y = 2), 0 === (b = o.offsets).length) l && (Ce(r, s, o, 0), x.bindBuffer(x.ELEMENT_ARRAY_BUFFER, g.buffer)), x.drawElements(h, g.array.length, v, 0), w.info.render.calls++, w.info.render.vertices += g.array.length;
                else {
                  b.length > 1 && (l = !0);
                  for (d = 0, f = b.length; d < f; d++) {
                    p = b[d].index;
                    l && (Ce(r, s, o, p), x.bindBuffer(x.ELEMENT_ARRAY_BUFFER, g.buffer)), x.drawElements(h, b[d].count, v, b[d].start * y), w.info.render.calls++, w.info.render.vertices += b[d].count
                  }
                }
              } else {
                l && Ce(r, s, o, 0);
                var b;
                m = o.attributes.position;
                if (0 === (b = o.offsets).length) x.drawArrays(h, 0, m.array.length / 3), w.info.render.calls++, w.info.render.vertices += m.array.length / 3;
                else
                  for (d = 0, f = b.length; d < f; d++) x.drawArrays(h, b[d].index, b[d].count), w.info.render.calls++, w.info.render.vertices += b[d].count
              }
            }
          }
        }, this.renderBuffer = function (e, t, n, r, o, a) {
          if (!1 !== r.visible) {
            Be(a);
            var s = qe(e, t, n, r, a),
              l = s.attributes,
              c = !1,
              u = r.wireframe ? 1 : 0,
              h = o.id + "_" + s.id + "_" + u;
            if (h !== T && (T = h, c = !0), c && H.initAttributes(), !r.morphTargets && l.position >= 0 ? c && (x.bindBuffer(x.ARRAY_BUFFER, o.__webglVertexBuffer), H.enableAttribute(l.position), x.vertexAttribPointer(l.position, 3, x.FLOAT, !1, 0, 0)) : a.morphTargetBase && function (e, t, n) {
                var i = e.program.attributes; - 1 !== n.morphTargetBase && i.position >= 0 ? (x.bindBuffer(x.ARRAY_BUFFER, t.__webglMorphTargetsBuffers[n.morphTargetBase]), H.enableAttribute(i.position), x.vertexAttribPointer(i.position, 3, x.FLOAT, !1, 0, 0)) : i.position >= 0 && (x.bindBuffer(x.ARRAY_BUFFER, t.__webglVertexBuffer), H.enableAttribute(i.position), x.vertexAttribPointer(i.position, 3, x.FLOAT, !1, 0, 0));
                if (n.morphTargetForcedOrder.length)
                  for (var r = 0, o = n.morphTargetForcedOrder, a = n.morphTargetInfluences; r < e.numSupportedMorphTargets && r < o.length;)(s = i["morphTarget" + r]) >= 0 && (x.bindBuffer(x.ARRAY_BUFFER, t.__webglMorphTargetsBuffers[o[r]]), H.enableAttribute(s), x.vertexAttribPointer(s, 3, x.FLOAT, !1, 0, 0)), (s = i["morphNormal" + r]) >= 0 && e.morphNormals && (x.bindBuffer(x.ARRAY_BUFFER, t.__webglMorphNormalsBuffers[o[r]]), H.enableAttribute(s), x.vertexAttribPointer(s, 3, x.FLOAT, !1, 0, 0)), n.__webglMorphTargetInfluences[r] = a[o[r]], r++;
                else {
                  var s, l = [],
                    c = (a = n.morphTargetInfluences, n.geometry.morphTargets);
                  a.length > c.length && (console.warn("THREE.WebGLRenderer: Influences array is bigger than morphTargets array."), a.length = c.length);
                  for (var u = 0, h = a.length; u < h; u++) {
                    var d = a[u];
                    l.push([d, u])
                  }
                  l.length > e.numSupportedMorphTargets ? (l.sort(De), l.length = e.numSupportedMorphTargets) : l.length > e.numSupportedMorphNormals ? l.sort(De) : 0 === l.length && l.push([0, 0]);
                  r = 0;
                  for (var f = e.numSupportedMorphTargets; r < f; r++)
                    if (l[r]) {
                      var p = l[r][1];
                      (s = i["morphTarget" + r]) >= 0 && (x.bindBuffer(x.ARRAY_BUFFER, t.__webglMorphTargetsBuffers[p]), H.enableAttribute(s), x.vertexAttribPointer(s, 3, x.FLOAT, !1, 0, 0)), (s = i["morphNormal" + r]) >= 0 && e.morphNormals && (x.bindBuffer(x.ARRAY_BUFFER, t.__webglMorphNormalsBuffers[p]), H.enableAttribute(s), x.vertexAttribPointer(s, 3, x.FLOAT, !1, 0, 0)), n.__webglMorphTargetInfluences[r] = a[p]
                    } else n.__webglMorphTargetInfluences[r] = 0
                }
                null !== e.program.uniforms.morphTargetInfluences && x.uniform1fv(e.program.uniforms.morphTargetInfluences, n.__webglMorphTargetInfluences)
              }(r, o, a), c) {
              if (o.__webglCustomAttributesList)
                for (var d = 0, f = o.__webglCustomAttributesList.length; d < f; d++) {
                  var p = o.__webglCustomAttributesList[d];
                  l[p.buffer.belongsToAttribute] >= 0 && (x.bindBuffer(x.ARRAY_BUFFER, p.buffer), H.enableAttribute(l[p.buffer.belongsToAttribute]), x.vertexAttribPointer(l[p.buffer.belongsToAttribute], p.size, x.FLOAT, !1, 0, 0))
                }
              l.color >= 0 && (a.geometry.colors.length > 0 || a.geometry.faces.length > 0 ? (x.bindBuffer(x.ARRAY_BUFFER, o.__webglColorBuffer), H.enableAttribute(l.color), x.vertexAttribPointer(l.color, 3, x.FLOAT, !1, 0, 0)) : void 0 !== r.defaultAttributeValues && x.vertexAttrib3fv(l.color, r.defaultAttributeValues.color)), l.normal >= 0 && (x.bindBuffer(x.ARRAY_BUFFER, o.__webglNormalBuffer), H.enableAttribute(l.normal), x.vertexAttribPointer(l.normal, 3, x.FLOAT, !1, 0, 0)), l.tangent >= 0 && (x.bindBuffer(x.ARRAY_BUFFER, o.__webglTangentBuffer), H.enableAttribute(l.tangent), x.vertexAttribPointer(l.tangent, 4, x.FLOAT, !1, 0, 0)), l.uv >= 0 && (a.geometry.faceVertexUvs[0] ? (x.bindBuffer(x.ARRAY_BUFFER, o.__webglUVBuffer), H.enableAttribute(l.uv), x.vertexAttribPointer(l.uv, 2, x.FLOAT, !1, 0, 0)) : void 0 !== r.defaultAttributeValues && x.vertexAttrib2fv(l.uv, r.defaultAttributeValues.uv)), l.uv2 >= 0 && (a.geometry.faceVertexUvs[1] ? (x.bindBuffer(x.ARRAY_BUFFER, o.__webglUV2Buffer), H.enableAttribute(l.uv2), x.vertexAttribPointer(l.uv2, 2, x.FLOAT, !1, 0, 0)) : void 0 !== r.defaultAttributeValues && x.vertexAttrib2fv(l.uv2, r.defaultAttributeValues.uv2)), r.skinning && l.skinIndex >= 0 && l.skinWeight >= 0 && (x.bindBuffer(x.ARRAY_BUFFER, o.__webglSkinIndicesBuffer), H.enableAttribute(l.skinIndex), x.vertexAttribPointer(l.skinIndex, 4, x.FLOAT, !1, 0, 0), x.bindBuffer(x.ARRAY_BUFFER, o.__webglSkinWeightsBuffer), H.enableAttribute(l.skinWeight), x.vertexAttribPointer(l.skinWeight, 4, x.FLOAT, !1, 0, 0)), l.lineDistance >= 0 && (x.bindBuffer(x.ARRAY_BUFFER, o.__webglLineDistanceBuffer), H.enableAttribute(l.lineDistance), x.vertexAttribPointer(l.lineDistance, 1, x.FLOAT, !1, 0, 0))
            }
            if (H.disableUnusedAttributes(), a instanceof X.Mesh) {
              var m = o.__typeArray === Uint32Array ? x.UNSIGNED_INT : x.UNSIGNED_SHORT;
              r.wireframe ? (H.setLineWidth(r.wireframeLinewidth * i), c && x.bindBuffer(x.ELEMENT_ARRAY_BUFFER, o.__webglLineBuffer), x.drawElements(x.LINES, o.__webglLineCount, m, 0)) : (c && x.bindBuffer(x.ELEMENT_ARRAY_BUFFER, o.__webglFaceBuffer), x.drawElements(x.TRIANGLES, o.__webglFaceCount, m, 0)), w.info.render.calls++, w.info.render.vertices += o.__webglFaceCount, w.info.render.faces += o.__webglFaceCount / 3
            } else if (a instanceof X.Line) {
              var g = a.mode === X.LineStrip ? x.LINE_STRIP : x.LINES;
              H.setLineWidth(r.linewidth * i), x.drawArrays(g, 0, o.__webglLineCount), w.info.render.calls++
            } else a instanceof X.PointCloud && (x.drawArrays(x.POINTS, 0, o.__webglParticleCount), w.info.render.calls++, w.info.render.points += o.__webglParticleCount)
          }
        }, this.render = function (e, t, n, i) {
          if (t instanceof X.Camera != !1) {
            var r = e.fog;
            T = "", M = -1, C = null, B = !0, !0 === e.autoUpdate && e.updateMatrixWorld(), void 0 === t.parent && t.updateMatrixWorld(), e.traverse((function (e) {
                e instanceof X.SkinnedMesh && e.skeleton.update()
              })), t.matrixWorldInverse.getInverse(t.matrixWorld), F.multiplyMatrices(t.projectionMatrix, t.matrixWorldInverse), N.setFromMatrix(F), p.length = 0, v.length = 0, y.length = 0, b.length = 0, _.length = 0,
              function e(t) {
                if (!1 === t.visible) return;
                if (t instanceof X.Scene || t instanceof X.Group);
                else if (function (e) {
                    void 0 === e.__webglInit && (e.__webglInit = !0, e._modelViewMatrix = new X.Matrix4, e._normalMatrix = new X.Matrix3, e.addEventListener("removed", pe));
                    var t = e.geometry;
                    void 0 === t || void 0 === t.__webglInit && (t.__webglInit = !0, t.addEventListener("dispose", me), t instanceof X.BufferGeometry ? w.info.memory.geometries++ : e instanceof X.Mesh ? Ue(e, t) : e instanceof X.Line ? void 0 === t.__webglVertexBuffer && (! function (e) {
                      e.__webglVertexBuffer = x.createBuffer(), e.__webglColorBuffer = x.createBuffer(), e.__webglLineDistanceBuffer = x.createBuffer(), w.info.memory.geometries++
                    }(t), function (e, t) {
                      var n = e.vertices.length;
                      e.__vertexArray = new Float32Array(3 * n), e.__colorArray = new Float32Array(3 * n), e.__lineDistanceArray = new Float32Array(1 * n), e.__webglLineCount = n, Ae(t)
                    }(t, e), t.verticesNeedUpdate = !0, t.colorsNeedUpdate = !0, t.lineDistancesNeedUpdate = !0) : e instanceof X.PointCloud && void 0 === t.__webglVertexBuffer && (! function (e) {
                      e.__webglVertexBuffer = x.createBuffer(), e.__webglColorBuffer = x.createBuffer(), w.info.memory.geometries++
                    }(t), function (e, t) {
                      var n = e.vertices.length;
                      e.__vertexArray = new Float32Array(3 * n), e.__colorArray = new Float32Array(3 * n), e.__webglParticleCount = n, Ae(t)
                    }(t, e), t.verticesNeedUpdate = !0, t.colorsNeedUpdate = !0));
                    if (void 0 === e.__webglActive)
                      if (e.__webglActive = !0, e instanceof X.Mesh) {
                        if (t instanceof X.BufferGeometry) Ve(m, t, e);
                        else if (t instanceof X.Geometry)
                          for (var n = Ne[t.id], i = 0, r = n.length; i < r; i++) Ve(m, n[i], e)
                      } else e instanceof X.Line || e instanceof X.PointCloud ? Ve(m, t, e) : (e instanceof X.ImmediateRenderObject || e.immediateRenderCallback) && function (e, t) {
                        e.push({
                          id: null,
                          object: t,
                          opaque: null,
                          transparent: null,
                          z: 0
                        })
                      }(g, e)
                  }(t), t instanceof X.Light) p.push(t);
                else if (t instanceof X.Sprite) b.push(t);
                else if (t instanceof X.LensFlare) _.push(t);
                else {
                  var n = m[t.id];
                  if (n && (!1 === t.frustumCulled || !0 === N.intersectsObject(t)))
                    for (var i = 0, r = n.length; i < r; i++) {
                      var o = n[i];
                      ke(o), o.render = !0, !0 === w.sortObjects && (U.setFromMatrixPosition(t.matrixWorld), U.applyProjection(F), o.z = U.z)
                    }
                }
                for (i = 0, r = t.children.length; i < r; i++) e(t.children[i])
              }(e), !0 === w.sortObjects && (v.sort(Pe), y.sort(Le)), ue.render(e, t), w.info.render.calls = 0, w.info.render.vertices = 0, w.info.render.faces = 0, w.info.render.points = 0, this.setRenderTarget(n), (this.autoClear || i) && this.clear(this.autoClearColor, this.autoClearDepth, this.autoClearStencil);
            for (var o = 0, a = g.length; o < a; o++) {
              var s = g[o],
                l = s.object;
              l.visible && (Qe(l, t), Oe(s))
            }
            if (e.overrideMaterial) {
              var c = e.overrideMaterial;
              je(c), Ie(v, t, p, r, c), Ie(y, t, p, r, c), Re(g, "", t, p, r, c)
            } else H.setBlending(X.NoBlending), Ie(v, t, p, r, null), Re(g, "opaque", t, p, r, null), Ie(y, t, p, r, null), Re(g, "transparent", t, p, r, null);
            he.render(e, t), de.render(e, t, O, k), n && n.generateMipmaps && n.minFilter !== X.NearestFilter && n.minFilter !== X.LinearFilter && function (e) {
              e instanceof X.WebGLRenderTargetCube ? (x.bindTexture(x.TEXTURE_CUBE_MAP, e.__webglTexture), x.generateMipmap(x.TEXTURE_CUBE_MAP), x.bindTexture(x.TEXTURE_CUBE_MAP, null)) : (x.bindTexture(x.TEXTURE_2D, e.__webglTexture), x.generateMipmap(x.TEXTURE_2D), x.bindTexture(x.TEXTURE_2D, null))
            }(n), H.setDepthTest(!0), H.setDepthWrite(!0), H.setColorWrite(!0)
          } else X.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")
        }, this.renderImmediateObject = function (e, t, n, i, r) {
          var o = qe(e, t, n, i, r);
          T = "", w.setMaterialFaces(i), r.immediateRenderCallback ? r.immediateRenderCallback(o, x, N) : r.render((function (e) {
            w.renderBufferImmediate(e, o, i)
          }))
        };
        var Ne = {},
          Fe = 0;

        function Ue(e, t) {
          var n = e.material,
            i = !1;
          void 0 !== Ne[t.id] && !0 !== t.groupsNeedUpdate || (delete m[e.id], Ne[t.id] = function (e, t) {
            for (var n, i, r = W.get("OES_element_index_uint") ? 4294967296 : 65535, o = {}, a = e.morphTargets.length, s = e.morphNormals.length, l = {}, c = [], u = 0, h = e.faces.length; u < h; u++) {
              var d = e.faces[u],
                f = t ? d.materialIndex : 0;
              f in o || (o[f] = {
                hash: f,
                counter: 0
              }), (n = o[f].hash + "_" + o[f].counter) in l || (i = {
                id: Fe++,
                faces3: [],
                materialIndex: f,
                vertices: 0,
                numMorphTargets: a,
                numMorphNormals: s
              }, l[n] = i, c.push(i)), l[n].vertices + 3 > r && (o[f].counter += 1, (n = o[f].hash + "_" + o[f].counter) in l || (i = {
                id: Fe++,
                faces3: [],
                materialIndex: f,
                vertices: 0,
                numMorphTargets: a,
                numMorphNormals: s
              }, l[n] = i, c.push(i))), l[n].faces3.push(u), l[n].vertices += 3
            }
            return c
          }(t, n instanceof X.MeshFaceMaterial), t.groupsNeedUpdate = !1);
          for (var r = Ne[t.id], o = 0, a = r.length; o < a; o++) {
            var s = r[o];
            void 0 === s.__webglVertexBuffer ? (fe(s), Se(s, e), t.verticesNeedUpdate = !0, t.morphTargetsNeedUpdate = !0, t.elementsNeedUpdate = !0, t.uvsNeedUpdate = !0, t.normalsNeedUpdate = !0, t.tangentsNeedUpdate = !0, t.colorsNeedUpdate = !0, i = !0) : i = !1, (i || void 0 === e.__webglActive) && Ve(m, s, e)
          }
          e.__webglActive = !0
        }

        function Ve(e, t, n) {
          var i = n.id;
          e[i] = e[i] || [], e[i].push({
            id: i,
            buffer: t,
            object: n,
            material: null,
            z: 0
          })
        }

        function Be(e) {
          var t = e.geometry;
          if (t instanceof X.BufferGeometry)
            for (var n = t.attributes, i = t.attributesKeys, r = 0, o = i.length; r < o; r++) {
              var a = i[r],
                s = n[a],
                l = "index" === a ? x.ELEMENT_ARRAY_BUFFER : x.ARRAY_BUFFER;
              void 0 === s.buffer ? (s.buffer = x.createBuffer(), x.bindBuffer(l, s.buffer), x.bufferData(l, s.array, s instanceof X.DynamicBufferAttribute ? x.DYNAMIC_DRAW : x.STATIC_DRAW), s.needsUpdate = !1) : !0 === s.needsUpdate && (x.bindBuffer(l, s.buffer), void 0 === s.updateRange || -1 === s.updateRange.count ? x.bufferSubData(l, 0, s.array) : 0 === s.updateRange.count ? console.error("THREE.WebGLRenderer.updateObject: using updateRange for THREE.DynamicBufferAttribute and marked as needsUpdate but count is 0, ensure you are using set methods or updating manually.") : (x.bufferSubData(l, s.updateRange.offset * s.array.BYTES_PER_ELEMENT, s.array.subarray(s.updateRange.offset, s.updateRange.offset + s.updateRange.count)), s.updateRange.count = 0), s.needsUpdate = !1)
            } else if (e instanceof X.Mesh) {
              !0 === t.groupsNeedUpdate && Ue(e, t);
              for (var c = Ne[t.id], u = (r = 0, c.length); r < u; r++) {
                var h = c[r],
                  d = (f = Me(e, h)).attributes && ze(f);
                (t.verticesNeedUpdate || t.morphTargetsNeedUpdate || t.elementsNeedUpdate || t.uvsNeedUpdate || t.normalsNeedUpdate || t.colorsNeedUpdate || t.tangentsNeedUpdate || d) && Te(h, e, x.DYNAMIC_DRAW, !t.dynamic, f)
              }
              t.verticesNeedUpdate = !1, t.morphTargetsNeedUpdate = !1, t.elementsNeedUpdate = !1, t.uvsNeedUpdate = !1, t.normalsNeedUpdate = !1, t.colorsNeedUpdate = !1, t.tangentsNeedUpdate = !1, f.attributes && Ge(f)
            } else if (e instanceof X.Line) {
            d = (f = Me(e, t)).attributes && ze(f);
            (t.verticesNeedUpdate || t.colorsNeedUpdate || t.lineDistancesNeedUpdate || d) && function (e, t) {
              var n, i, r, o, a, s, l, c, u, h, d, f, p = e.vertices,
                m = e.colors,
                g = e.lineDistances,
                v = p.length,
                y = m.length,
                b = g.length,
                _ = e.__vertexArray,
                w = e.__colorArray,
                E = e.__lineDistanceArray,
                A = e.verticesNeedUpdate,
                S = e.colorsNeedUpdate,
                M = e.lineDistancesNeedUpdate,
                T = e.__webglCustomAttributesList;
              if (A) {
                for (n = 0; n < v; n++) o = p[n], _[a = 3 * n] = o.x, _[a + 1] = o.y, _[a + 2] = o.z;
                x.bindBuffer(x.ARRAY_BUFFER, e.__webglVertexBuffer), x.bufferData(x.ARRAY_BUFFER, _, t)
              }
              if (S) {
                for (i = 0; i < y; i++) s = m[i], w[a = 3 * i] = s.r, w[a + 1] = s.g, w[a + 2] = s.b;
                x.bindBuffer(x.ARRAY_BUFFER, e.__webglColorBuffer), x.bufferData(x.ARRAY_BUFFER, w, t)
              }
              if (M) {
                for (r = 0; r < b; r++) E[r] = g[r];
                x.bindBuffer(x.ARRAY_BUFFER, e.__webglLineDistanceBuffer), x.bufferData(x.ARRAY_BUFFER, E, t)
              }
              if (T)
                for (l = 0, c = T.length; l < c; l++)
                  if ((f = T[l]).needsUpdate && (void 0 === f.boundTo || "vertices" === f.boundTo)) {
                    if (a = 0, h = f.value.length, 1 === f.size)
                      for (u = 0; u < h; u++) f.array[u] = f.value[u];
                    else if (2 === f.size)
                      for (u = 0; u < h; u++) d = f.value[u], f.array[a] = d.x, f.array[a + 1] = d.y, a += 2;
                    else if (3 === f.size)
                      if ("c" === f.type)
                        for (u = 0; u < h; u++) d = f.value[u], f.array[a] = d.r, f.array[a + 1] = d.g, f.array[a + 2] = d.b, a += 3;
                      else
                        for (u = 0; u < h; u++) d = f.value[u], f.array[a] = d.x, f.array[a + 1] = d.y, f.array[a + 2] = d.z, a += 3;
                    else if (4 === f.size)
                      for (u = 0; u < h; u++) d = f.value[u], f.array[a] = d.x, f.array[a + 1] = d.y, f.array[a + 2] = d.z, f.array[a + 3] = d.w, a += 4;
                    x.bindBuffer(x.ARRAY_BUFFER, f.buffer), x.bufferData(x.ARRAY_BUFFER, f.array, t), f.needsUpdate = !1
                  }
            }(t, x.DYNAMIC_DRAW), t.verticesNeedUpdate = !1, t.colorsNeedUpdate = !1, t.lineDistancesNeedUpdate = !1, f.attributes && Ge(f)
          } else if (e instanceof X.PointCloud) {
            var f;
            d = (f = Me(e, t)).attributes && ze(f);
            (t.verticesNeedUpdate || t.colorsNeedUpdate || d) && function (e, t, n) {
              var i, r, o, a, s, l, c, u, h, d, f, p = e.vertices,
                m = p.length,
                g = e.colors,
                v = g.length,
                y = e.__vertexArray,
                b = e.__colorArray,
                _ = e.verticesNeedUpdate,
                w = e.colorsNeedUpdate,
                E = e.__webglCustomAttributesList;
              if (_) {
                for (i = 0; i < m; i++) o = p[i], y[a = 3 * i] = o.x, y[a + 1] = o.y, y[a + 2] = o.z;
                x.bindBuffer(x.ARRAY_BUFFER, e.__webglVertexBuffer), x.bufferData(x.ARRAY_BUFFER, y, t)
              }
              if (w) {
                for (r = 0; r < v; r++) s = g[r], b[a = 3 * r] = s.r, b[a + 1] = s.g, b[a + 2] = s.b;
                x.bindBuffer(x.ARRAY_BUFFER, e.__webglColorBuffer), x.bufferData(x.ARRAY_BUFFER, b, t)
              }
              if (E)
                for (l = 0, c = E.length; l < c; l++) {
                  if ((f = E[l]).needsUpdate && (void 0 === f.boundTo || "vertices" === f.boundTo))
                    if (h = f.value.length, a = 0, 1 === f.size)
                      for (u = 0; u < h; u++) f.array[u] = f.value[u];
                    else if (2 === f.size)
                    for (u = 0; u < h; u++) d = f.value[u], f.array[a] = d.x, f.array[a + 1] = d.y, a += 2;
                  else if (3 === f.size)
                    if ("c" === f.type)
                      for (u = 0; u < h; u++) d = f.value[u], f.array[a] = d.r, f.array[a + 1] = d.g, f.array[a + 2] = d.b, a += 3;
                    else
                      for (u = 0; u < h; u++) d = f.value[u], f.array[a] = d.x, f.array[a + 1] = d.y, f.array[a + 2] = d.z, a += 3;
                  else if (4 === f.size)
                    for (u = 0; u < h; u++) d = f.value[u], f.array[a] = d.x, f.array[a + 1] = d.y, f.array[a + 2] = d.z, f.array[a + 3] = d.w, a += 4;
                  x.bindBuffer(x.ARRAY_BUFFER, f.buffer), x.bufferData(x.ARRAY_BUFFER, f.array, t), f.needsUpdate = !1
                }
            }(t, x.DYNAMIC_DRAW), t.verticesNeedUpdate = !1, t.colorsNeedUpdate = !1, f.attributes && Ge(f)
          }
        }

        function ze(e) {
          for (var t in e.attributes)
            if (e.attributes[t].needsUpdate) return !0;
          return !1
        }

        function Ge(e) {
          for (var t in e.attributes) e.attributes[t].needsUpdate = !1
        }
        var He = {
          MeshDepthMaterial: "depth",
          MeshNormalMaterial: "normal",
          MeshBasicMaterial: "basic",
          MeshLambertMaterial: "lambert",
          MeshPhongMaterial: "phong",
          LineBasicMaterial: "basic",
          LineDashedMaterial: "dashed",
          PointCloudMaterial: "particle_basic"
        };

        function We(e, t, n, i) {
          e.addEventListener("dispose", ye);
          var o = He[e.type];
          if (o) {
            var a = X.ShaderLib[o];
            e.__webglShader = {
              uniforms: X.UniformsUtils.clone(a.uniforms),
              vertexShader: a.vertexShader,
              fragmentShader: a.fragmentShader
            }
          } else e.__webglShader = {
            uniforms: e.uniforms,
            vertexShader: e.vertexShader,
            fragmentShader: e.fragmentShader
          };
          var s = function (e) {
              for (var t = 0, n = 0, i = 0, r = 0, o = 0, a = e.length; o < a; o++) {
                var s = e[o];
                s.onlyShadow || !1 === s.visible || (s instanceof X.DirectionalLight && t++, s instanceof X.PointLight && n++, s instanceof X.SpotLight && i++, s instanceof X.HemisphereLight && r++)
              }
              return {
                directional: t,
                point: n,
                spot: i,
                hemi: r
              }
            }(t),
            l = function (e) {
              for (var t = 0, n = 0, i = e.length; n < i; n++) {
                var r = e[n];
                r.castShadow && (r instanceof X.SpotLight && t++, r instanceof X.DirectionalLight && !r.shadowCascade && t++)
              }
              return t
            }(t),
            c = function (e) {
              if (te && e && e.skeleton && e.skeleton.useVertexTexture) return 1024;
              var t = x.getParameter(x.MAX_VERTEX_UNIFORM_VECTORS),
                n = Math.floor((t - 20) / 4);
              return void 0 !== e && e instanceof X.SkinnedMesh && (n = Math.min(e.skeleton.bones.length, n)) < e.skeleton.bones.length && X.warn("WebGLRenderer: too many bones - " + e.skeleton.bones.length + ", this GPU supports just " + n + " (try OpenGL instead of ANGLE)"), n
            }(i),
            u = {
              precision: r,
              supportsVertexTextures: ee,
              map: !!e.map,
              envMap: !!e.envMap,
              envMapMode: e.envMap && e.envMap.mapping,
              lightMap: !!e.lightMap,
              bumpMap: !!e.bumpMap,
              normalMap: !!e.normalMap,
              specularMap: !!e.specularMap,
              alphaMap: !!e.alphaMap,
              combine: e.combine,
              vertexColors: e.vertexColors,
              fog: n,
              useFog: e.fog,
              fogExp: n instanceof X.FogExp2,
              flatShading: e.shading === X.FlatShading,
              sizeAttenuation: e.sizeAttenuation,
              logarithmicDepthBuffer: h,
              skinning: e.skinning,
              maxBones: c,
              useVertexTexture: te && i && i.skeleton && i.skeleton.useVertexTexture,
              morphTargets: e.morphTargets,
              morphNormals: e.morphNormals,
              maxMorphTargets: w.maxMorphTargets,
              maxMorphNormals: w.maxMorphNormals,
              maxDirLights: s.directional,
              maxPointLights: s.point,
              maxSpotLights: s.spot,
              maxHemiLights: s.hemi,
              maxShadows: l,
              shadowMapEnabled: w.shadowMapEnabled && i.receiveShadow && l > 0,
              shadowMapType: w.shadowMapType,
              shadowMapDebug: w.shadowMapDebug,
              shadowMapCascade: w.shadowMapCascade,
              alphaTest: e.alphaTest,
              metal: e.metal,
              wrapAround: e.wrapAround,
              doubleSided: e.side === X.DoubleSide,
              flipSided: e.side === X.BackSide
            },
            d = [];
          if (o ? d.push(o) : (d.push(e.fragmentShader), d.push(e.vertexShader)), void 0 !== e.defines)
            for (var f in e.defines) d.push(f), d.push(e.defines[f]);
          for (var f in u) d.push(f), d.push(u[f]);
          for (var p, m = d.join(), g = 0, v = E.length; g < v; g++) {
            var y = E[g];
            if (y.code === m) {
              (p = y).usedTimes++;
              break
            }
          }
          void 0 === p && (p = new X.WebGLProgram(w, m, e, u), E.push(p), w.info.memory.programs = E.length), e.program = p;
          var b = p.attributes;
          if (e.morphTargets) {
            e.numSupportedMorphTargets = 0;
            for (var _ = "morphTarget", A = 0; A < w.maxMorphTargets; A++) b[_ + A] >= 0 && e.numSupportedMorphTargets++
          }
          if (e.morphNormals) {
            e.numSupportedMorphNormals = 0;
            _ = "morphNormal";
            for (A = 0; A < w.maxMorphNormals; A++) b[_ + A] >= 0 && e.numSupportedMorphNormals++
          }
          for (var S in e.uniformsList = [], e.__webglShader.uniforms) {
            var M = e.program.uniforms[S];
            M && e.uniformsList.push([e.__webglShader.uniforms[S], M])
          }
        }

        function je(e) {
          !0 === e.transparent ? H.setBlending(e.blending, e.blendEquation, e.blendSrc, e.blendDst, e.blendEquationAlpha, e.blendSrcAlpha, e.blendDstAlpha) : H.setBlending(X.NoBlending), H.setDepthTest(e.depthTest), H.setDepthWrite(e.depthWrite), H.setColorWrite(e.colorWrite), H.setPolygonOffset(e.polygonOffset, e.polygonOffsetFactor, e.polygonOffsetUnits)
        }

        function qe(e, n, i, r, o) {
          P = 0, r.needsUpdate && (r.program && Ee(r), We(r, n, i, o), r.needsUpdate = !1), r.morphTargets && (o.__webglMorphTargetInfluences || (o.__webglMorphTargetInfluences = new Float32Array(w.maxMorphTargets)));
          var a = !1,
            s = !1,
            l = !1,
            c = r.program,
            u = c.uniforms,
            d = r.__webglShader.uniforms;
          if (c.id !== A && (x.useProgram(c.program), A = c.id, a = !0, s = !0, l = !0), r.id !== M && (-1 === M && (l = !0), M = r.id, s = !0), (a || e !== C) && (x.uniformMatrix4fv(u.projectionMatrix, !1, e.projectionMatrix.elements), h && x.uniform1f(u.logDepthBufFC, 2 / (Math.log(e.far + 1) / Math.LN2)), e !== C && (C = e), (r instanceof X.ShaderMaterial || r instanceof X.MeshPhongMaterial || r.envMap) && null !== u.cameraPosition && (U.setFromMatrixPosition(e.matrixWorld), x.uniform3f(u.cameraPosition, U.x, U.y, U.z)), (r instanceof X.MeshPhongMaterial || r instanceof X.MeshLambertMaterial || r instanceof X.MeshBasicMaterial || r instanceof X.ShaderMaterial || r.skinning) && null !== u.viewMatrix && x.uniformMatrix4fv(u.viewMatrix, !1, e.matrixWorldInverse.elements)), r.skinning)
            if (o.bindMatrix && null !== u.bindMatrix && x.uniformMatrix4fv(u.bindMatrix, !1, o.bindMatrix.elements), o.bindMatrixInverse && null !== u.bindMatrixInverse && x.uniformMatrix4fv(u.bindMatrixInverse, !1, o.bindMatrixInverse.elements), te && o.skeleton && o.skeleton.useVertexTexture) {
              if (null !== u.boneTexture) {
                var f = Ke();
                x.uniform1i(u.boneTexture, f), w.setTexture(o.skeleton.boneTexture, f)
              }
              null !== u.boneTextureWidth && x.uniform1i(u.boneTextureWidth, o.skeleton.boneTextureWidth), null !== u.boneTextureHeight && x.uniform1i(u.boneTextureHeight, o.skeleton.boneTextureHeight)
            } else o.skeleton && o.skeleton.boneMatrices && null !== u.boneGlobalMatrices && x.uniformMatrix4fv(u.boneGlobalMatrices, !1, o.skeleton.boneMatrices);
          return s && (i && r.fog && function (e, t) {
              e.fogColor.value = t.color, t instanceof X.Fog ? (e.fogNear.value = t.near, e.fogFar.value = t.far) : t instanceof X.FogExp2 && (e.fogDensity.value = t.density)
            }(d, i), (r instanceof X.MeshPhongMaterial || r instanceof X.MeshLambertMaterial || r.lights) && (B && (l = !0, function (e) {
              var t, n, i, r, o, a, s, l, c = 0,
                u = 0,
                h = 0,
                d = z,
                f = d.directional.colors,
                p = d.directional.positions,
                m = d.point.colors,
                g = d.point.positions,
                v = d.point.distances,
                y = d.point.decays,
                b = d.spot.colors,
                _ = d.spot.positions,
                x = d.spot.distances,
                w = d.spot.directions,
                E = d.spot.anglesCos,
                A = d.spot.exponents,
                S = d.spot.decays,
                M = d.hemi.skyColors,
                T = d.hemi.groundColors,
                C = d.hemi.positions,
                P = 0,
                L = 0,
                D = 0,
                I = 0,
                R = 0,
                O = 0,
                k = 0,
                N = 0,
                F = 0,
                B = 0,
                G = 0,
                H = 0;
              for (t = 0, n = e.length; t < n; t++)
                if (!(i = e[t]).onlyShadow)
                  if (r = i.color, s = i.intensity, l = i.distance, i instanceof X.AmbientLight) {
                    if (!i.visible) continue;
                    c += r.r, u += r.g, h += r.b
                  } else if (i instanceof X.DirectionalLight) {
                if (R += 1, !i.visible) continue;
                V.setFromMatrixPosition(i.matrixWorld), U.setFromMatrixPosition(i.target.matrixWorld), V.sub(U), V.normalize(), p[F = 3 * P] = V.x, p[F + 1] = V.y, p[F + 2] = V.z, Ze(f, F, r, s), P += 1
              } else if (i instanceof X.PointLight) {
                if (O += 1, !i.visible) continue;
                Ze(m, B = 3 * L, r, s), U.setFromMatrixPosition(i.matrixWorld), g[B] = U.x, g[B + 1] = U.y, g[B + 2] = U.z, v[L] = l, y[L] = 0 === i.distance ? 0 : i.decay, L += 1
              } else if (i instanceof X.SpotLight) {
                if (k += 1, !i.visible) continue;
                Ze(b, G = 3 * D, r, s), V.setFromMatrixPosition(i.matrixWorld), _[G] = V.x, _[G + 1] = V.y, _[G + 2] = V.z, x[D] = l, U.setFromMatrixPosition(i.target.matrixWorld), V.sub(U), V.normalize(), w[G] = V.x, w[G + 1] = V.y, w[G + 2] = V.z, E[D] = Math.cos(i.angle), A[D] = i.exponent, S[D] = 0 === i.distance ? 0 : i.decay, D += 1
              } else if (i instanceof X.HemisphereLight) {
                if (N += 1, !i.visible) continue;
                V.setFromMatrixPosition(i.matrixWorld), V.normalize(), C[H = 3 * I] = V.x, C[H + 1] = V.y, C[H + 2] = V.z, o = i.color, a = i.groundColor, Ze(M, H, o, s), Ze(T, H, a, s), I += 1
              }
              for (t = 3 * P, n = Math.max(f.length, 3 * R); t < n; t++) f[t] = 0;
              for (t = 3 * L, n = Math.max(m.length, 3 * O); t < n; t++) m[t] = 0;
              for (t = 3 * D, n = Math.max(b.length, 3 * k); t < n; t++) b[t] = 0;
              for (t = 3 * I, n = Math.max(M.length, 3 * N); t < n; t++) M[t] = 0;
              for (t = 3 * I, n = Math.max(T.length, 3 * N); t < n; t++) T[t] = 0;
              d.directional.length = P, d.point.length = L, d.spot.length = D, d.hemi.length = I, d.ambient[0] = c, d.ambient[1] = u, d.ambient[2] = h
            }(n), B = !1), l ? (! function (e, t) {
              e.ambientLightColor.value = t.ambient, e.directionalLightColor.value = t.directional.colors, e.directionalLightDirection.value = t.directional.positions, e.pointLightColor.value = t.point.colors, e.pointLightPosition.value = t.point.positions, e.pointLightDistance.value = t.point.distances, e.pointLightDecay.value = t.point.decays, e.spotLightColor.value = t.spot.colors, e.spotLightPosition.value = t.spot.positions, e.spotLightDistance.value = t.spot.distances, e.spotLightDirection.value = t.spot.directions, e.spotLightAngleCos.value = t.spot.anglesCos, e.spotLightExponent.value = t.spot.exponents, e.spotLightDecay.value = t.spot.decays, e.hemisphereLightSkyColor.value = t.hemi.skyColors, e.hemisphereLightGroundColor.value = t.hemi.groundColors, e.hemisphereLightDirection.value = t.hemi.positions
            }(d, z), Ye(d, !0)) : Ye(d, !1)), (r instanceof X.MeshBasicMaterial || r instanceof X.MeshLambertMaterial || r instanceof X.MeshPhongMaterial) && function (e, t) {
              e.opacity.value = t.opacity, e.diffuse.value = t.color, e.map.value = t.map, e.lightMap.value = t.lightMap, e.specularMap.value = t.specularMap, e.alphaMap.value = t.alphaMap, t.bumpMap && (e.bumpMap.value = t.bumpMap, e.bumpScale.value = t.bumpScale);
              t.normalMap && (e.normalMap.value = t.normalMap, e.normalScale.value.copy(t.normalScale));
              var n;
              t.map ? n = t.map : t.specularMap ? n = t.specularMap : t.normalMap ? n = t.normalMap : t.bumpMap ? n = t.bumpMap : t.alphaMap && (n = t.alphaMap);
              if (void 0 !== n) {
                var i = n.offset,
                  r = n.repeat;
                e.offsetRepeat.value.set(i.x, i.y, r.x, r.y)
              }
              e.envMap.value = t.envMap, e.flipEnvMap.value = t.envMap instanceof X.WebGLRenderTargetCube ? 1 : -1, e.reflectivity.value = t.reflectivity, e.refractionRatio.value = t.refractionRatio
            }(d, r), r instanceof X.LineBasicMaterial ? Xe(d, r) : r instanceof X.LineDashedMaterial ? (Xe(d, r), function (e, t) {
              e.dashSize.value = t.dashSize, e.totalSize.value = t.dashSize + t.gapSize, e.scale.value = t.scale
            }(d, r)) : r instanceof X.PointCloudMaterial ? function (e, n) {
              if (e.psColor.value = n.color, e.opacity.value = n.opacity, e.size.value = n.size, e.scale.value = t.height / 2, e.map.value = n.map, null !== n.map) {
                var i = n.map.offset,
                  r = n.map.repeat;
                e.offsetRepeat.value.set(i.x, i.y, r.x, r.y)
              }
            }(d, r) : r instanceof X.MeshPhongMaterial ? function (e, t) {
              e.shininess.value = t.shininess, e.emissive.value = t.emissive, e.specular.value = t.specular, t.wrapAround && e.wrapRGB.value.copy(t.wrapRGB)
            }(d, r) : r instanceof X.MeshLambertMaterial ? function (e, t) {
              e.emissive.value = t.emissive, t.wrapAround && e.wrapRGB.value.copy(t.wrapRGB)
            }(d, r) : r instanceof X.MeshDepthMaterial ? (d.mNear.value = e.near, d.mFar.value = e.far, d.opacity.value = r.opacity) : r instanceof X.MeshNormalMaterial && (d.opacity.value = r.opacity), o.receiveShadow && !r._shadowPass && function (e, t) {
              if (e.shadowMatrix)
                for (var n = 0, i = 0, r = t.length; i < r; i++) {
                  var o = t[i];
                  o.castShadow && ((o instanceof X.SpotLight || o instanceof X.DirectionalLight && !o.shadowCascade) && (e.shadowMap.value[n] = o.shadowMap, e.shadowMapSize.value[n] = o.shadowMapSize, e.shadowMatrix.value[n] = o.shadowMatrix, e.shadowDarkness.value[n] = o.shadowDarkness, e.shadowBias.value[n] = o.shadowBias, n++))
                }
            }(d, n), function (e) {
              for (var t, n, i, r = 0, o = e.length; r < o; r++) {
                var a = e[r][0];
                if (!1 !== a.needsUpdate) {
                  var s = a.type,
                    l = a.value,
                    c = e[r][1];
                  switch (s) {
                    case "1i":
                      x.uniform1i(c, l);
                      break;
                    case "1f":
                      x.uniform1f(c, l);
                      break;
                    case "2f":
                      x.uniform2f(c, l[0], l[1]);
                      break;
                    case "3f":
                      x.uniform3f(c, l[0], l[1], l[2]);
                      break;
                    case "4f":
                      x.uniform4f(c, l[0], l[1], l[2], l[3]);
                      break;
                    case "1iv":
                      x.uniform1iv(c, l);
                      break;
                    case "3iv":
                      x.uniform3iv(c, l);
                      break;
                    case "1fv":
                      x.uniform1fv(c, l);
                      break;
                    case "2fv":
                      x.uniform2fv(c, l);
                      break;
                    case "3fv":
                      x.uniform3fv(c, l);
                      break;
                    case "4fv":
                      x.uniform4fv(c, l);
                      break;
                    case "Matrix3fv":
                      x.uniformMatrix3fv(c, !1, l);
                      break;
                    case "Matrix4fv":
                      x.uniformMatrix4fv(c, !1, l);
                      break;
                    case "i":
                      x.uniform1i(c, l);
                      break;
                    case "f":
                      x.uniform1f(c, l);
                      break;
                    case "v2":
                      x.uniform2f(c, l.x, l.y);
                      break;
                    case "v3":
                      x.uniform3f(c, l.x, l.y, l.z);
                      break;
                    case "v4":
                      x.uniform4f(c, l.x, l.y, l.z, l.w);
                      break;
                    case "c":
                      x.uniform3f(c, l.r, l.g, l.b);
                      break;
                    case "iv1":
                      x.uniform1iv(c, l);
                      break;
                    case "iv":
                      x.uniform3iv(c, l);
                      break;
                    case "fv1":
                      x.uniform1fv(c, l);
                      break;
                    case "fv":
                      x.uniform3fv(c, l);
                      break;
                    case "v2v":
                      void 0 === a._array && (a._array = new Float32Array(2 * l.length));
                      for (var u = 0, h = l.length; u < h; u++) i = 2 * u, a._array[i] = l[u].x, a._array[i + 1] = l[u].y;
                      x.uniform2fv(c, a._array);
                      break;
                    case "v3v":
                      void 0 === a._array && (a._array = new Float32Array(3 * l.length));
                      for (u = 0, h = l.length; u < h; u++) i = 3 * u, a._array[i] = l[u].x, a._array[i + 1] = l[u].y, a._array[i + 2] = l[u].z;
                      x.uniform3fv(c, a._array);
                      break;
                    case "v4v":
                      void 0 === a._array && (a._array = new Float32Array(4 * l.length));
                      for (u = 0, h = l.length; u < h; u++) i = 4 * u, a._array[i] = l[u].x, a._array[i + 1] = l[u].y, a._array[i + 2] = l[u].z, a._array[i + 3] = l[u].w;
                      x.uniform4fv(c, a._array);
                      break;
                    case "m3":
                      x.uniformMatrix3fv(c, !1, l.elements);
                      break;
                    case "m3v":
                      void 0 === a._array && (a._array = new Float32Array(9 * l.length));
                      for (u = 0, h = l.length; u < h; u++) l[u].flattenToArrayOffset(a._array, 9 * u);
                      x.uniformMatrix3fv(c, !1, a._array);
                      break;
                    case "m4":
                      x.uniformMatrix4fv(c, !1, l.elements);
                      break;
                    case "m4v":
                      void 0 === a._array && (a._array = new Float32Array(16 * l.length));
                      for (u = 0, h = l.length; u < h; u++) l[u].flattenToArrayOffset(a._array, 16 * u);
                      x.uniformMatrix4fv(c, !1, a._array);
                      break;
                    case "t":
                      if (t = l, n = Ke(), x.uniform1i(c, n), !t) continue;
                      t instanceof X.CubeTexture || t.image instanceof Array && 6 === t.image.length ? et(t, n) : t instanceof X.WebGLRenderTargetCube ? tt(t, n) : w.setTexture(t, n);
                      break;
                    case "tv":
                      void 0 === a._array && (a._array = []);
                      for (u = 0, h = a.value.length; u < h; u++) a._array[u] = Ke();
                      x.uniform1iv(c, a._array);
                      for (u = 0, h = a.value.length; u < h; u++) t = a.value[u], n = a._array[u], t && w.setTexture(t, n);
                      break;
                    default:
                      X.warn("THREE.WebGLRenderer: Unknown uniform type: " + s)
                  }
                }
              }
            }(r.uniformsList)),
            function (e, t) {
              x.uniformMatrix4fv(e.modelViewMatrix, !1, t._modelViewMatrix.elements), e.normalMatrix && x.uniformMatrix3fv(e.normalMatrix, !1, t._normalMatrix.elements)
            }(u, o), null !== u.modelMatrix && x.uniformMatrix4fv(u.modelMatrix, !1, o.matrixWorld.elements), c
        }

        function Xe(e, t) {
          e.diffuse.value = t.color, e.opacity.value = t.opacity
        }

        function Ye(e, t) {
          e.ambientLightColor.needsUpdate = t, e.directionalLightColor.needsUpdate = t, e.directionalLightDirection.needsUpdate = t, e.pointLightColor.needsUpdate = t, e.pointLightPosition.needsUpdate = t, e.pointLightDistance.needsUpdate = t, e.pointLightDecay.needsUpdate = t, e.spotLightColor.needsUpdate = t, e.spotLightPosition.needsUpdate = t, e.spotLightDistance.needsUpdate = t, e.spotLightDirection.needsUpdate = t, e.spotLightAngleCos.needsUpdate = t, e.spotLightExponent.needsUpdate = t, e.spotLightDecay.needsUpdate = t, e.hemisphereLightSkyColor.needsUpdate = t, e.hemisphereLightGroundColor.needsUpdate = t, e.hemisphereLightDirection.needsUpdate = t
        }

        function Ke() {
          var e = P;
          return e >= Q && X.warn("WebGLRenderer: trying to use " + e + " texture units while this GPU supports only " + Q), P += 1, e
        }

        function Qe(e, t) {
          e._modelViewMatrix.multiplyMatrices(t.matrixWorldInverse, e.matrixWorld), e._normalMatrix.getNormalMatrix(e._modelViewMatrix)
        }

        function Ze(e, t, n, i) {
          e[t] = n.r * i, e[t + 1] = n.g * i, e[t + 2] = n.b * i
        }

        function Je(e, t, n) {
          var i;
          n ? (x.texParameteri(e, x.TEXTURE_WRAP_S, ot(t.wrapS)), x.texParameteri(e, x.TEXTURE_WRAP_T, ot(t.wrapT)), x.texParameteri(e, x.TEXTURE_MAG_FILTER, ot(t.magFilter)), x.texParameteri(e, x.TEXTURE_MIN_FILTER, ot(t.minFilter))) : (x.texParameteri(e, x.TEXTURE_WRAP_S, x.CLAMP_TO_EDGE), x.texParameteri(e, x.TEXTURE_WRAP_T, x.CLAMP_TO_EDGE), t.wrapS === X.ClampToEdgeWrapping && t.wrapT === X.ClampToEdgeWrapping || X.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping. ( " + t.sourceFile + " )"), x.texParameteri(e, x.TEXTURE_MAG_FILTER, rt(t.magFilter)), x.texParameteri(e, x.TEXTURE_MIN_FILTER, rt(t.minFilter)), t.minFilter !== X.NearestFilter && t.minFilter !== X.LinearFilter && X.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter. ( " + t.sourceFile + " )")), (i = W.get("EXT_texture_filter_anisotropic")) && t.type !== X.FloatType && t.type !== X.HalfFloatType && (t.anisotropy > 1 || t.__currentAnisotropy) && (x.texParameterf(e, i.TEXTURE_MAX_ANISOTROPY_EXT, Math.min(t.anisotropy, w.getMaxAnisotropy())), t.__currentAnisotropy = t.anisotropy)
        }

        function $e(e, t) {
          if (e.width > t || e.height > t) {
            var n = t / Math.max(e.width, e.height),
              i = document.createElement("canvas");
            return i.width = Math.floor(e.width * n), i.height = Math.floor(e.height * n), i.getContext("2d").drawImage(e, 0, 0, e.width, e.height, 0, 0, i.width, i.height), X.warn("THREE.WebGLRenderer: image is too big (" + e.width + "x" + e.height + "). Resized to " + i.width + "x" + i.height, e), i
          }
          return e
        }

        function et(e, t) {
          if (6 === e.image.length)
            if (e.needsUpdate) {
              e.image.__webglTextureCube || (e.addEventListener("dispose", ge), e.image.__webglTextureCube = x.createTexture(), w.info.memory.textures++), x.activeTexture(x.TEXTURE0 + t), x.bindTexture(x.TEXTURE_CUBE_MAP, e.image.__webglTextureCube), x.pixelStorei(x.UNPACK_FLIP_Y_WEBGL, e.flipY);
              for (var n = e instanceof X.CompressedTexture, i = e.image[0] instanceof X.DataTexture, r = [], o = 0; o < 6; o++) !w.autoScaleCubemaps || n || i ? r[o] = i ? e.image[o].image : e.image[o] : r[o] = $e(e.image[o], $);
              var a = r[0],
                s = X.Math.isPowerOfTwo(a.width) && X.Math.isPowerOfTwo(a.height),
                l = ot(e.format),
                c = ot(e.type);
              Je(x.TEXTURE_CUBE_MAP, e, s);
              for (o = 0; o < 6; o++)
                if (n)
                  for (var u, h = r[o].mipmaps, d = 0, f = h.length; d < f; d++) u = h[d], e.format !== X.RGBAFormat && e.format !== X.RGBFormat ? ae().indexOf(l) > -1 ? x.compressedTexImage2D(x.TEXTURE_CUBE_MAP_POSITIVE_X + o, d, l, u.width, u.height, 0, u.data) : X.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setCubeTexture()") : x.texImage2D(x.TEXTURE_CUBE_MAP_POSITIVE_X + o, d, l, u.width, u.height, 0, l, c, u.data);
                else i ? x.texImage2D(x.TEXTURE_CUBE_MAP_POSITIVE_X + o, 0, l, r[o].width, r[o].height, 0, l, c, r[o].data) : x.texImage2D(x.TEXTURE_CUBE_MAP_POSITIVE_X + o, 0, l, l, c, r[o]);
              e.generateMipmaps && s && x.generateMipmap(x.TEXTURE_CUBE_MAP), e.needsUpdate = !1, e.onUpdate && e.onUpdate()
            } else x.activeTexture(x.TEXTURE0 + t), x.bindTexture(x.TEXTURE_CUBE_MAP, e.image.__webglTextureCube)
        }

        function tt(e, t) {
          x.activeTexture(x.TEXTURE0 + t), x.bindTexture(x.TEXTURE_CUBE_MAP, e.__webglTexture)
        }

        function nt(e, t, n) {
          x.bindFramebuffer(x.FRAMEBUFFER, e), x.framebufferTexture2D(x.FRAMEBUFFER, x.COLOR_ATTACHMENT0, n, t.__webglTexture, 0)
        }

        function it(e, t) {
          x.bindRenderbuffer(x.RENDERBUFFER, e), t.depthBuffer && !t.stencilBuffer ? (x.renderbufferStorage(x.RENDERBUFFER, x.DEPTH_COMPONENT16, t.width, t.height), x.framebufferRenderbuffer(x.FRAMEBUFFER, x.DEPTH_ATTACHMENT, x.RENDERBUFFER, e)) : t.depthBuffer && t.stencilBuffer ? (x.renderbufferStorage(x.RENDERBUFFER, x.DEPTH_STENCIL, t.width, t.height), x.framebufferRenderbuffer(x.FRAMEBUFFER, x.DEPTH_STENCIL_ATTACHMENT, x.RENDERBUFFER, e)) : x.renderbufferStorage(x.RENDERBUFFER, x.RGBA4, t.width, t.height)
        }

        function rt(e) {
          return e === X.NearestFilter || e === X.NearestMipMapNearestFilter || e === X.NearestMipMapLinearFilter ? x.NEAREST : x.LINEAR
        }

        function ot(e) {
          var t;
          if (e === X.RepeatWrapping) return x.REPEAT;
          if (e === X.ClampToEdgeWrapping) return x.CLAMP_TO_EDGE;
          if (e === X.MirroredRepeatWrapping) return x.MIRRORED_REPEAT;
          if (e === X.NearestFilter) return x.NEAREST;
          if (e === X.NearestMipMapNearestFilter) return x.NEAREST_MIPMAP_NEAREST;
          if (e === X.NearestMipMapLinearFilter) return x.NEAREST_MIPMAP_LINEAR;
          if (e === X.LinearFilter) return x.LINEAR;
          if (e === X.LinearMipMapNearestFilter) return x.LINEAR_MIPMAP_NEAREST;
          if (e === X.LinearMipMapLinearFilter) return x.LINEAR_MIPMAP_LINEAR;
          if (e === X.UnsignedByteType) return x.UNSIGNED_BYTE;
          if (e === X.UnsignedShort4444Type) return x.UNSIGNED_SHORT_4_4_4_4;
          if (e === X.UnsignedShort5551Type) return x.UNSIGNED_SHORT_5_5_5_1;
          if (e === X.UnsignedShort565Type) return x.UNSIGNED_SHORT_5_6_5;
          if (e === X.ByteType) return x.BYTE;
          if (e === X.ShortType) return x.SHORT;
          if (e === X.UnsignedShortType) return x.UNSIGNED_SHORT;
          if (e === X.IntType) return x.INT;
          if (e === X.UnsignedIntType) return x.UNSIGNED_INT;
          if (e === X.FloatType) return x.FLOAT;
          if (null !== (t = W.get("OES_texture_half_float")) && e === X.HalfFloatType) return t.HALF_FLOAT_OES;
          if (e === X.AlphaFormat) return x.ALPHA;
          if (e === X.RGBFormat) return x.RGB;
          if (e === X.RGBAFormat) return x.RGBA;
          if (e === X.LuminanceFormat) return x.LUMINANCE;
          if (e === X.LuminanceAlphaFormat) return x.LUMINANCE_ALPHA;
          if (e === X.AddEquation) return x.FUNC_ADD;
          if (e === X.SubtractEquation) return x.FUNC_SUBTRACT;
          if (e === X.ReverseSubtractEquation) return x.FUNC_REVERSE_SUBTRACT;
          if (e === X.ZeroFactor) return x.ZERO;
          if (e === X.OneFactor) return x.ONE;
          if (e === X.SrcColorFactor) return x.SRC_COLOR;
          if (e === X.OneMinusSrcColorFactor) return x.ONE_MINUS_SRC_COLOR;
          if (e === X.SrcAlphaFactor) return x.SRC_ALPHA;
          if (e === X.OneMinusSrcAlphaFactor) return x.ONE_MINUS_SRC_ALPHA;
          if (e === X.DstAlphaFactor) return x.DST_ALPHA;
          if (e === X.OneMinusDstAlphaFactor) return x.ONE_MINUS_DST_ALPHA;
          if (e === X.DstColorFactor) return x.DST_COLOR;
          if (e === X.OneMinusDstColorFactor) return x.ONE_MINUS_DST_COLOR;
          if (e === X.SrcAlphaSaturateFactor) return x.SRC_ALPHA_SATURATE;
          if (null !== (t = W.get("WEBGL_compressed_texture_s3tc"))) {
            if (e === X.RGB_S3TC_DXT1_Format) return t.COMPRESSED_RGB_S3TC_DXT1_EXT;
            if (e === X.RGBA_S3TC_DXT1_Format) return t.COMPRESSED_RGBA_S3TC_DXT1_EXT;
            if (e === X.RGBA_S3TC_DXT3_Format) return t.COMPRESSED_RGBA_S3TC_DXT3_EXT;
            if (e === X.RGBA_S3TC_DXT5_Format) return t.COMPRESSED_RGBA_S3TC_DXT5_EXT
          }
          if (null !== (t = W.get("WEBGL_compressed_texture_pvrtc"))) {
            if (e === X.RGB_PVRTC_4BPPV1_Format) return t.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;
            if (e === X.RGB_PVRTC_2BPPV1_Format) return t.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;
            if (e === X.RGBA_PVRTC_4BPPV1_Format) return t.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;
            if (e === X.RGBA_PVRTC_2BPPV1_Format) return t.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG
          }
          if (null !== (t = W.get("EXT_blend_minmax"))) {
            if (e === X.MinEquation) return t.MIN_EXT;
            if (e === X.MaxEquation) return t.MAX_EXT
          }
          return 0
        }
        this.setFaceCulling = function (e, t) {
          e === X.CullFaceNone ? x.disable(x.CULL_FACE) : (t === X.FrontFaceDirectionCW ? x.frontFace(x.CW) : x.frontFace(x.CCW), e === X.CullFaceBack ? x.cullFace(x.BACK) : e === X.CullFaceFront ? x.cullFace(x.FRONT) : x.cullFace(x.FRONT_AND_BACK), x.enable(x.CULL_FACE))
        }, this.setMaterialFaces = function (e) {
          H.setDoubleSided(e.side === X.DoubleSide), H.setFlipSided(e.side === X.BackSide)
        }, this.uploadTexture = function (e) {
          void 0 === e.__webglInit && (e.__webglInit = !0, e.addEventListener("dispose", ge), e.__webglTexture = x.createTexture(), w.info.memory.textures++), x.bindTexture(x.TEXTURE_2D, e.__webglTexture), x.pixelStorei(x.UNPACK_FLIP_Y_WEBGL, e.flipY), x.pixelStorei(x.UNPACK_PREMULTIPLY_ALPHA_WEBGL, e.premultiplyAlpha), x.pixelStorei(x.UNPACK_ALIGNMENT, e.unpackAlignment), e.image = $e(e.image, J);
          var t = e.image,
            n = X.Math.isPowerOfTwo(t.width) && X.Math.isPowerOfTwo(t.height),
            i = ot(e.format),
            r = ot(e.type);
          Je(x.TEXTURE_2D, e, n);
          var o, a = e.mipmaps;
          if (e instanceof X.DataTexture)
            if (a.length > 0 && n) {
              for (var s = 0, l = a.length; s < l; s++) o = a[s], x.texImage2D(x.TEXTURE_2D, s, i, o.width, o.height, 0, i, r, o.data);
              e.generateMipmaps = !1
            } else x.texImage2D(x.TEXTURE_2D, 0, i, t.width, t.height, 0, i, r, t.data);
          else if (e instanceof X.CompressedTexture)
            for (s = 0, l = a.length; s < l; s++) o = a[s], e.format !== X.RGBAFormat && e.format !== X.RGBFormat ? ae().indexOf(i) > -1 ? x.compressedTexImage2D(x.TEXTURE_2D, s, i, o.width, o.height, 0, o.data) : X.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()") : x.texImage2D(x.TEXTURE_2D, s, i, o.width, o.height, 0, i, r, o.data);
          else if (a.length > 0 && n) {
            for (s = 0, l = a.length; s < l; s++) o = a[s], x.texImage2D(x.TEXTURE_2D, s, i, i, r, o);
            e.generateMipmaps = !1
          } else x.texImage2D(x.TEXTURE_2D, 0, i, i, r, e.image);
          e.generateMipmaps && n && x.generateMipmap(x.TEXTURE_2D), e.needsUpdate = !1, e.onUpdate && e.onUpdate()
        }, this.setTexture = function (e, t) {
          x.activeTexture(x.TEXTURE0 + t), e.needsUpdate ? w.uploadTexture(e) : x.bindTexture(x.TEXTURE_2D, e.__webglTexture)
        }, this.setRenderTarget = function (e) {
          var t, n, i, r, o, a = e instanceof X.WebGLRenderTargetCube;
          if (e && void 0 === e.__webglFramebuffer) {
            void 0 === e.depthBuffer && (e.depthBuffer = !0), void 0 === e.stencilBuffer && (e.stencilBuffer = !0), e.addEventListener("dispose", ve), e.__webglTexture = x.createTexture(), w.info.memory.textures++;
            var s = X.Math.isPowerOfTwo(e.width) && X.Math.isPowerOfTwo(e.height),
              l = ot(e.format),
              c = ot(e.type);
            if (a) {
              e.__webglFramebuffer = [], e.__webglRenderbuffer = [], x.bindTexture(x.TEXTURE_CUBE_MAP, e.__webglTexture), Je(x.TEXTURE_CUBE_MAP, e, s);
              for (var u = 0; u < 6; u++) e.__webglFramebuffer[u] = x.createFramebuffer(), e.__webglRenderbuffer[u] = x.createRenderbuffer(), x.texImage2D(x.TEXTURE_CUBE_MAP_POSITIVE_X + u, 0, l, e.width, e.height, 0, l, c, null), nt(e.__webglFramebuffer[u], e, x.TEXTURE_CUBE_MAP_POSITIVE_X + u), it(e.__webglRenderbuffer[u], e);
              s && x.generateMipmap(x.TEXTURE_CUBE_MAP)
            } else e.__webglFramebuffer = x.createFramebuffer(), e.shareDepthFrom ? e.__webglRenderbuffer = e.shareDepthFrom.__webglRenderbuffer : e.__webglRenderbuffer = x.createRenderbuffer(), x.bindTexture(x.TEXTURE_2D, e.__webglTexture), Je(x.TEXTURE_2D, e, s), x.texImage2D(x.TEXTURE_2D, 0, l, e.width, e.height, 0, l, c, null), nt(e.__webglFramebuffer, e, x.TEXTURE_2D), e.shareDepthFrom ? e.depthBuffer && !e.stencilBuffer ? x.framebufferRenderbuffer(x.FRAMEBUFFER, x.DEPTH_ATTACHMENT, x.RENDERBUFFER, e.__webglRenderbuffer) : e.depthBuffer && e.stencilBuffer && x.framebufferRenderbuffer(x.FRAMEBUFFER, x.DEPTH_STENCIL_ATTACHMENT, x.RENDERBUFFER, e.__webglRenderbuffer) : it(e.__webglRenderbuffer, e), s && x.generateMipmap(x.TEXTURE_2D);
            a ? x.bindTexture(x.TEXTURE_CUBE_MAP, null) : x.bindTexture(x.TEXTURE_2D, null), x.bindRenderbuffer(x.RENDERBUFFER, null), x.bindFramebuffer(x.FRAMEBUFFER, null)
          }
          e ? (t = a ? e.__webglFramebuffer[e.activeCubeFace] : e.__webglFramebuffer, n = e.width, i = e.height, r = 0, o = 0) : (t = null, n = I, i = R, r = L, o = D), t !== S && (x.bindFramebuffer(x.FRAMEBUFFER, t), x.viewport(r, o, n, i), S = t), O = n, k = i
        }, this.readRenderTargetPixels = function (e, t, n, i, r, o) {
          if (e instanceof X.WebGLRenderTarget) {
            if (e.__webglFramebuffer) {
              if (e.format !== X.RGBAFormat) return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA format. readPixels can read only RGBA format.");
              var a = !1;
              e.__webglFramebuffer !== S && (x.bindFramebuffer(x.FRAMEBUFFER, e.__webglFramebuffer), a = !0), x.checkFramebufferStatus(x.FRAMEBUFFER) === x.FRAMEBUFFER_COMPLETE ? x.readPixels(t, n, i, r, x.RGBA, x.UNSIGNED_BYTE, o) : console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete."), a && x.bindFramebuffer(x.FRAMEBUFFER, S)
            }
          } else console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.")
        }, this.initMaterial = function () {
          X.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")
        }, this.addPrePlugin = function () {
          X.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")
        }, this.addPostPlugin = function () {
          X.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")
        }, this.updateShadowMap = function () {
          X.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")
        }
      }, X.WebGLRenderTarget = function (e, t, n) {
        this.width = e, this.height = t, n = n || {}, this.wrapS = void 0 !== n.wrapS ? n.wrapS : X.ClampToEdgeWrapping, this.wrapT = void 0 !== n.wrapT ? n.wrapT : X.ClampToEdgeWrapping, this.magFilter = void 0 !== n.magFilter ? n.magFilter : X.LinearFilter, this.minFilter = void 0 !== n.minFilter ? n.minFilter : X.LinearMipMapLinearFilter, this.anisotropy = void 0 !== n.anisotropy ? n.anisotropy : 1, this.offset = new X.Vector2(0, 0), this.repeat = new X.Vector2(1, 1), this.format = void 0 !== n.format ? n.format : X.RGBAFormat, this.type = void 0 !== n.type ? n.type : X.UnsignedByteType, this.depthBuffer = void 0 === n.depthBuffer || n.depthBuffer, this.stencilBuffer = void 0 === n.stencilBuffer || n.stencilBuffer, this.generateMipmaps = !0, this.shareDepthFrom = void 0 !== n.shareDepthFrom ? n.shareDepthFrom : null
      }, X.WebGLRenderTarget.prototype = {
        constructor: X.WebGLRenderTarget,
        setSize: function (e, t) {
          this.width = e, this.height = t
        },
        clone: function () {
          var e = new X.WebGLRenderTarget(this.width, this.height);
          return e.wrapS = this.wrapS, e.wrapT = this.wrapT, e.magFilter = this.magFilter, e.minFilter = this.minFilter, e.anisotropy = this.anisotropy, e.offset.copy(this.offset), e.repeat.copy(this.repeat), e.format = this.format, e.type = this.type, e.depthBuffer = this.depthBuffer, e.stencilBuffer = this.stencilBuffer, e.generateMipmaps = this.generateMipmaps, e.shareDepthFrom = this.shareDepthFrom, e
        },
        dispose: function () {
          this.dispatchEvent({
            type: "dispose"
          })
        }
      }, X.EventDispatcher.prototype.apply(X.WebGLRenderTarget.prototype), X.WebGLRenderTargetCube = function (e, t, n) {
        X.WebGLRenderTarget.call(this, e, t, n), this.activeCubeFace = 0
      }, X.WebGLRenderTargetCube.prototype = Object.create(X.WebGLRenderTarget.prototype), X.WebGLRenderTargetCube.prototype.constructor = X.WebGLRenderTargetCube, X.WebGLExtensions = function (e) {
        var t = {};
        this.get = function (n) {
          if (void 0 !== t[n]) return t[n];
          var i;
          switch (n) {
            case "EXT_texture_filter_anisotropic":
              i = e.getExtension("EXT_texture_filter_anisotropic") || e.getExtension("MOZ_EXT_texture_filter_anisotropic") || e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");
              break;
            case "WEBGL_compressed_texture_s3tc":
              i = e.getExtension("WEBGL_compressed_texture_s3tc") || e.getExtension("MOZ_WEBGL_compressed_texture_s3tc") || e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");
              break;
            case "WEBGL_compressed_texture_pvrtc":
              i = e.getExtension("WEBGL_compressed_texture_pvrtc") || e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");
              break;
            default:
              i = e.getExtension(n)
          }
          return null === i && X.warn("THREE.WebGLRenderer: " + n + " extension not supported."), t[n] = i, i
        }
      }, X.WebGLProgram = (k = 0, function (e, t, n, i) {
        var r = e,
          o = r.context,
          a = n.defines,
          s = n.__webglShader.uniforms,
          l = n.attributes,
          c = n.__webglShader.vertexShader,
          u = n.__webglShader.fragmentShader,
          h = n.index0AttributeName;
        void 0 === h && !0 === i.morphTargets && (h = "position");
        var d = "SHADOWMAP_TYPE_BASIC";
        i.shadowMapType === X.PCFShadowMap ? d = "SHADOWMAP_TYPE_PCF" : i.shadowMapType === X.PCFSoftShadowMap && (d = "SHADOWMAP_TYPE_PCF_SOFT");
        var f = "ENVMAP_TYPE_CUBE",
          p = "ENVMAP_MODE_REFLECTION",
          m = "ENVMAP_BLENDING_MULTIPLY";
        if (i.envMap) {
          switch (n.envMap.mapping) {
            case X.CubeReflectionMapping:
            case X.CubeRefractionMapping:
              f = "ENVMAP_TYPE_CUBE";
              break;
            case X.EquirectangularReflectionMapping:
            case X.EquirectangularRefractionMapping:
              f = "ENVMAP_TYPE_EQUIREC";
              break;
            case X.SphericalReflectionMapping:
              f = "ENVMAP_TYPE_SPHERE"
          }
          switch (n.envMap.mapping) {
            case X.CubeRefractionMapping:
            case X.EquirectangularRefractionMapping:
              p = "ENVMAP_MODE_REFRACTION"
          }
          switch (n.combine) {
            case X.MultiplyOperation:
              m = "ENVMAP_BLENDING_MULTIPLY";
              break;
            case X.MixOperation:
              m = "ENVMAP_BLENDING_MIX";
              break;
            case X.AddOperation:
              m = "ENVMAP_BLENDING_ADD"
          }
        }
        var g, v, y = e.gammaFactor > 0 ? e.gammaFactor : 1,
          b = function (e) {
            var t, n, i = [];
            for (var r in e) !1 !== (t = e[r]) && (n = "#define " + r + " " + t, i.push(n));
            return i.join("\n")
          }(a),
          _ = o.createProgram();
        n instanceof X.RawShaderMaterial ? (g = "", v = "") : (g = ["precision " + i.precision + " float;", "precision " + i.precision + " int;", b, i.supportsVertexTextures ? "#define VERTEX_TEXTURES" : "", r.gammaInput ? "#define GAMMA_INPUT" : "", r.gammaOutput ? "#define GAMMA_OUTPUT" : "", "#define GAMMA_FACTOR " + y, "#define MAX_DIR_LIGHTS " + i.maxDirLights, "#define MAX_POINT_LIGHTS " + i.maxPointLights, "#define MAX_SPOT_LIGHTS " + i.maxSpotLights, "#define MAX_HEMI_LIGHTS " + i.maxHemiLights, "#define MAX_SHADOWS " + i.maxShadows, "#define MAX_BONES " + i.maxBones, i.map ? "#define USE_MAP" : "", i.envMap ? "#define USE_ENVMAP" : "", i.envMap ? "#define " + p : "", i.lightMap ? "#define USE_LIGHTMAP" : "", i.bumpMap ? "#define USE_BUMPMAP" : "", i.normalMap ? "#define USE_NORMALMAP" : "", i.specularMap ? "#define USE_SPECULARMAP" : "", i.alphaMap ? "#define USE_ALPHAMAP" : "", i.vertexColors ? "#define USE_COLOR" : "", i.flatShading ? "#define FLAT_SHADED" : "", i.skinning ? "#define USE_SKINNING" : "", i.useVertexTexture ? "#define BONE_TEXTURE" : "", i.morphTargets ? "#define USE_MORPHTARGETS" : "", i.morphNormals ? "#define USE_MORPHNORMALS" : "", i.wrapAround ? "#define WRAP_AROUND" : "", i.doubleSided ? "#define DOUBLE_SIDED" : "", i.flipSided ? "#define FLIP_SIDED" : "", i.shadowMapEnabled ? "#define USE_SHADOWMAP" : "", i.shadowMapEnabled ? "#define " + d : "", i.shadowMapDebug ? "#define SHADOWMAP_DEBUG" : "", i.shadowMapCascade ? "#define SHADOWMAP_CASCADE" : "", i.sizeAttenuation ? "#define USE_SIZEATTENUATION" : "", i.logarithmicDepthBuffer ? "#define USE_LOGDEPTHBUF" : "", "uniform mat4 modelMatrix;", "uniform mat4 modelViewMatrix;", "uniform mat4 projectionMatrix;", "uniform mat4 viewMatrix;", "uniform mat3 normalMatrix;", "uniform vec3 cameraPosition;", "attribute vec3 position;", "attribute vec3 normal;", "attribute vec2 uv;", "attribute vec2 uv2;", "#ifdef USE_COLOR", "\tattribute vec3 color;", "#endif", "#ifdef USE_MORPHTARGETS", "\tattribute vec3 morphTarget0;", "\tattribute vec3 morphTarget1;", "\tattribute vec3 morphTarget2;", "\tattribute vec3 morphTarget3;", "\t#ifdef USE_MORPHNORMALS", "\t\tattribute vec3 morphNormal0;", "\t\tattribute vec3 morphNormal1;", "\t\tattribute vec3 morphNormal2;", "\t\tattribute vec3 morphNormal3;", "\t#else", "\t\tattribute vec3 morphTarget4;", "\t\tattribute vec3 morphTarget5;", "\t\tattribute vec3 morphTarget6;", "\t\tattribute vec3 morphTarget7;", "\t#endif", "#endif", "#ifdef USE_SKINNING", "\tattribute vec4 skinIndex;", "\tattribute vec4 skinWeight;", "#endif", ""].join("\n"), v = ["precision " + i.precision + " float;", "precision " + i.precision + " int;", i.bumpMap || i.normalMap || i.flatShading ? "#extension GL_OES_standard_derivatives : enable" : "", b, "#define MAX_DIR_LIGHTS " + i.maxDirLights, "#define MAX_POINT_LIGHTS " + i.maxPointLights, "#define MAX_SPOT_LIGHTS " + i.maxSpotLights, "#define MAX_HEMI_LIGHTS " + i.maxHemiLights, "#define MAX_SHADOWS " + i.maxShadows, i.alphaTest ? "#define ALPHATEST " + i.alphaTest : "", r.gammaInput ? "#define GAMMA_INPUT" : "", r.gammaOutput ? "#define GAMMA_OUTPUT" : "", "#define GAMMA_FACTOR " + y, i.useFog && i.fog ? "#define USE_FOG" : "", i.useFog && i.fogExp ? "#define FOG_EXP2" : "", i.map ? "#define USE_MAP" : "", i.envMap ? "#define USE_ENVMAP" : "", i.envMap ? "#define " + f : "", i.envMap ? "#define " + p : "", i.envMap ? "#define " + m : "", i.lightMap ? "#define USE_LIGHTMAP" : "", i.bumpMap ? "#define USE_BUMPMAP" : "", i.normalMap ? "#define USE_NORMALMAP" : "", i.specularMap ? "#define USE_SPECULARMAP" : "", i.alphaMap ? "#define USE_ALPHAMAP" : "", i.vertexColors ? "#define USE_COLOR" : "", i.flatShading ? "#define FLAT_SHADED" : "", i.metal ? "#define METAL" : "", i.wrapAround ? "#define WRAP_AROUND" : "", i.doubleSided ? "#define DOUBLE_SIDED" : "", i.flipSided ? "#define FLIP_SIDED" : "", i.shadowMapEnabled ? "#define USE_SHADOWMAP" : "", i.shadowMapEnabled ? "#define " + d : "", i.shadowMapDebug ? "#define SHADOWMAP_DEBUG" : "", i.shadowMapCascade ? "#define SHADOWMAP_CASCADE" : "", i.logarithmicDepthBuffer ? "#define USE_LOGDEPTHBUF" : "", "uniform mat4 viewMatrix;", "uniform vec3 cameraPosition;", ""].join("\n"));
        var x = new X.WebGLShader(o, o.VERTEX_SHADER, g + c),
          w = new X.WebGLShader(o, o.FRAGMENT_SHADER, v + u);
        o.attachShader(_, x), o.attachShader(_, w), void 0 !== h && o.bindAttribLocation(_, 0, h), o.linkProgram(_);
        var E = o.getProgramInfoLog(_);
        !1 === o.getProgramParameter(_, o.LINK_STATUS) && X.error("THREE.WebGLProgram: shader error: " + o.getError(), "gl.VALIDATE_STATUS", o.getProgramParameter(_, o.VALIDATE_STATUS), "gl.getPRogramInfoLog", E), "" !== E && X.warn("THREE.WebGLProgram: gl.getProgramInfoLog()" + E), o.deleteShader(x), o.deleteShader(w);
        var A = ["viewMatrix", "modelViewMatrix", "projectionMatrix", "normalMatrix", "modelMatrix", "cameraPosition", "morphTargetInfluences", "bindMatrix", "bindMatrixInverse"];
        for (var S in i.useVertexTexture ? (A.push("boneTexture"), A.push("boneTextureWidth"), A.push("boneTextureHeight")) : A.push("boneGlobalMatrices"), i.logarithmicDepthBuffer && A.push("logDepthBufFC"), s) A.push(S);
        this.uniforms = function (e, t, n) {
          for (var i = {}, r = 0, o = n.length; r < o; r++) {
            var a = n[r];
            i[a] = e.getUniformLocation(t, a)
          }
          return i
        }(o, _, A), A = ["position", "normal", "uv", "uv2", "tangent", "color", "skinIndex", "skinWeight", "lineDistance"];
        for (var M = 0; M < i.maxMorphTargets; M++) A.push("morphTarget" + M);
        for (M = 0; M < i.maxMorphNormals; M++) A.push("morphNormal" + M);
        for (var T in l) A.push(T);
        return this.attributes = function (e, t, n) {
          for (var i = {}, r = 0, o = n.length; r < o; r++) {
            var a = n[r];
            i[a] = e.getAttribLocation(t, a)
          }
          return i
        }(o, _, A), this.attributesKeys = Object.keys(this.attributes), this.id = k++, this.code = t, this.usedTimes = 1, this.program = _, this.vertexShader = x, this.fragmentShader = w, this
      }), X.WebGLShader = function (e, t, n) {
        var i = e.createShader(t);
        return e.shaderSource(i, n), e.compileShader(i), !1 === e.getShaderParameter(i, e.COMPILE_STATUS) && X.error("THREE.WebGLShader: Shader couldn't compile."), "" !== e.getShaderInfoLog(i) && X.warn("THREE.WebGLShader: gl.getShaderInfoLog()", e.getShaderInfoLog(i), function (e) {
          for (var t = e.split("\n"), n = 0; n < t.length; n++) t[n] = n + 1 + ": " + t[n];
          return t.join("\n")
        }(n)), i
      }, X.WebGLState = function (e, t) {
        var n = new Uint8Array(16),
          i = new Uint8Array(16),
          r = null,
          o = null,
          a = null,
          s = null,
          l = null,
          c = null,
          u = null,
          h = null,
          d = null,
          f = null,
          p = null,
          m = null,
          g = null,
          v = null,
          y = null,
          b = null;
        this.initAttributes = function () {
          for (var e = 0, t = n.length; e < t; e++) n[e] = 0
        }, this.enableAttribute = function (t) {
          n[t] = 1, 0 === i[t] && (e.enableVertexAttribArray(t), i[t] = 1)
        }, this.disableUnusedAttributes = function () {
          for (var t = 0, r = i.length; t < r; t++) i[t] !== n[t] && (e.disableVertexAttribArray(t), i[t] = 0)
        }, this.setBlending = function (n, i, h, d, f, p, m) {
          n !== r && (n === X.NoBlending ? e.disable(e.BLEND) : n === X.AdditiveBlending ? (e.enable(e.BLEND), e.blendEquation(e.FUNC_ADD), e.blendFunc(e.SRC_ALPHA, e.ONE)) : n === X.SubtractiveBlending ? (e.enable(e.BLEND), e.blendEquation(e.FUNC_ADD), e.blendFunc(e.ZERO, e.ONE_MINUS_SRC_COLOR)) : n === X.MultiplyBlending ? (e.enable(e.BLEND), e.blendEquation(e.FUNC_ADD), e.blendFunc(e.ZERO, e.SRC_COLOR)) : n === X.CustomBlending ? e.enable(e.BLEND) : (e.enable(e.BLEND), e.blendEquationSeparate(e.FUNC_ADD, e.FUNC_ADD), e.blendFuncSeparate(e.SRC_ALPHA, e.ONE_MINUS_SRC_ALPHA, e.ONE, e.ONE_MINUS_SRC_ALPHA)), r = n), n === X.CustomBlending ? (f = f || i, p = p || h, m = m || d, i === o && f === l || (e.blendEquationSeparate(t(i), t(f)), o = i, l = f), h === a && d === s && p === c && m === u || (e.blendFuncSeparate(t(h), t(d), t(p), t(m)), a = h, s = d, c = p, u = m)) : (o = null, a = null, s = null, l = null, c = null, u = null)
        }, this.setDepthTest = function (t) {
          h !== t && (t ? e.enable(e.DEPTH_TEST) : e.disable(e.DEPTH_TEST), h = t)
        }, this.setDepthWrite = function (t) {
          d !== t && (e.depthMask(t), d = t)
        }, this.setColorWrite = function (t) {
          f !== t && (e.colorMask(t, t, t, t), f = t)
        }, this.setDoubleSided = function (t) {
          p !== t && (t ? e.disable(e.CULL_FACE) : e.enable(e.CULL_FACE), p = t)
        }, this.setFlipSided = function (t) {
          m !== t && (t ? e.frontFace(e.CW) : e.frontFace(e.CCW), m = t)
        }, this.setLineWidth = function (t) {
          t !== g && (e.lineWidth(t), g = t)
        }, this.setPolygonOffset = function (t, n, i) {
          v !== t && (t ? e.enable(e.POLYGON_OFFSET_FILL) : e.disable(e.POLYGON_OFFSET_FILL), v = t), !t || y === n && b === i || (e.polygonOffset(n, i), y = n, b = i)
        }, this.reset = function () {
          for (var e = 0; e < i.length; e++) i[e] = 0;
          r = null, h = null, d = null, f = null, p = null, m = null
        }
      }, X.LensFlarePlugin = function (e, t) {
        var n, i, r, o, a, s, l, c, u = e.context,
          h = function () {
            var t, h = new Float32Array([-1, -1, 0, 0, 1, -1, 1, 0, 1, 1, 1, 1, -1, 1, 0, 1]),
              d = new Uint16Array([0, 1, 2, 0, 2, 3]);
            n = u.createBuffer(), i = u.createBuffer(), u.bindBuffer(u.ARRAY_BUFFER, n), u.bufferData(u.ARRAY_BUFFER, h, u.STATIC_DRAW), u.bindBuffer(u.ELEMENT_ARRAY_BUFFER, i), u.bufferData(u.ELEMENT_ARRAY_BUFFER, d, u.STATIC_DRAW), l = u.createTexture(), c = u.createTexture(), u.bindTexture(u.TEXTURE_2D, l), u.texImage2D(u.TEXTURE_2D, 0, u.RGB, 16, 16, 0, u.RGB, u.UNSIGNED_BYTE, null), u.texParameteri(u.TEXTURE_2D, u.TEXTURE_WRAP_S, u.CLAMP_TO_EDGE), u.texParameteri(u.TEXTURE_2D, u.TEXTURE_WRAP_T, u.CLAMP_TO_EDGE), u.texParameteri(u.TEXTURE_2D, u.TEXTURE_MAG_FILTER, u.NEAREST), u.texParameteri(u.TEXTURE_2D, u.TEXTURE_MIN_FILTER, u.NEAREST), u.bindTexture(u.TEXTURE_2D, c), u.texImage2D(u.TEXTURE_2D, 0, u.RGBA, 16, 16, 0, u.RGBA, u.UNSIGNED_BYTE, null), u.texParameteri(u.TEXTURE_2D, u.TEXTURE_WRAP_S, u.CLAMP_TO_EDGE), u.texParameteri(u.TEXTURE_2D, u.TEXTURE_WRAP_T, u.CLAMP_TO_EDGE), u.texParameteri(u.TEXTURE_2D, u.TEXTURE_MAG_FILTER, u.NEAREST), u.texParameteri(u.TEXTURE_2D, u.TEXTURE_MIN_FILTER, u.NEAREST), t = (s = u.getParameter(u.MAX_VERTEX_TEXTURE_IMAGE_UNITS) > 0) ? {
              vertexShader: ["uniform lowp int renderType;", "uniform vec3 screenPosition;", "uniform vec2 scale;", "uniform float rotation;", "uniform sampler2D occlusionMap;", "attribute vec2 position;", "attribute vec2 uv;", "varying vec2 vUV;", "varying float vVisibility;", "void main() {", "vUV = uv;", "vec2 pos = position;", "if( renderType == 2 ) {", "vec4 visibility = texture2D( occlusionMap, vec2( 0.1, 0.1 ) );", "visibility += texture2D( occlusionMap, vec2( 0.5, 0.1 ) );", "visibility += texture2D( occlusionMap, vec2( 0.9, 0.1 ) );", "visibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) );", "visibility += texture2D( occlusionMap, vec2( 0.9, 0.9 ) );", "visibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) );", "visibility += texture2D( occlusionMap, vec2( 0.1, 0.9 ) );", "visibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) );", "visibility += texture2D( occlusionMap, vec2( 0.5, 0.5 ) );", "vVisibility =        visibility.r / 9.0;", "vVisibility *= 1.0 - visibility.g / 9.0;", "vVisibility *=       visibility.b / 9.0;", "vVisibility *= 1.0 - visibility.a / 9.0;", "pos.x = cos( rotation ) * position.x - sin( rotation ) * position.y;", "pos.y = sin( rotation ) * position.x + cos( rotation ) * position.y;", "}", "gl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );", "}"].join("\n"),
              fragmentShader: ["uniform lowp int renderType;", "uniform sampler2D map;", "uniform float opacity;", "uniform vec3 color;", "varying vec2 vUV;", "varying float vVisibility;", "void main() {", "if( renderType == 0 ) {", "gl_FragColor = vec4( 1.0, 0.0, 1.0, 0.0 );", "} else if( renderType == 1 ) {", "gl_FragColor = texture2D( map, vUV );", "} else {", "vec4 texture = texture2D( map, vUV );", "texture.a *= opacity * vVisibility;", "gl_FragColor = texture;", "gl_FragColor.rgb *= color;", "}", "}"].join("\n")
            } : {
              vertexShader: ["uniform lowp int renderType;", "uniform vec3 screenPosition;", "uniform vec2 scale;", "uniform float rotation;", "attribute vec2 position;", "attribute vec2 uv;", "varying vec2 vUV;", "void main() {", "vUV = uv;", "vec2 pos = position;", "if( renderType == 2 ) {", "pos.x = cos( rotation ) * position.x - sin( rotation ) * position.y;", "pos.y = sin( rotation ) * position.x + cos( rotation ) * position.y;", "}", "gl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );", "}"].join("\n"),
              fragmentShader: ["precision mediump float;", "uniform lowp int renderType;", "uniform sampler2D map;", "uniform sampler2D occlusionMap;", "uniform float opacity;", "uniform vec3 color;", "varying vec2 vUV;", "void main() {", "if( renderType == 0 ) {", "gl_FragColor = vec4( texture2D( map, vUV ).rgb, 0.0 );", "} else if( renderType == 1 ) {", "gl_FragColor = texture2D( map, vUV );", "} else {", "float visibility = texture2D( occlusionMap, vec2( 0.5, 0.1 ) ).a;", "visibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) ).a;", "visibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) ).a;", "visibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) ).a;", "visibility = ( 1.0 - visibility / 4.0 );", "vec4 texture = texture2D( map, vUV );", "texture.a *= opacity * visibility;", "gl_FragColor = texture;", "gl_FragColor.rgb *= color;", "}", "}"].join("\n")
            }, r = function (t) {
              var n = u.createProgram(),
                i = u.createShader(u.FRAGMENT_SHADER),
                r = u.createShader(u.VERTEX_SHADER),
                o = "precision " + e.getPrecision() + " float;\n";
              return u.shaderSource(i, o + t.fragmentShader), u.shaderSource(r, o + t.vertexShader), u.compileShader(i), u.compileShader(r), u.attachShader(n, i), u.attachShader(n, r), u.linkProgram(n), n
            }(t), o = {
              vertex: u.getAttribLocation(r, "position"),
              uv: u.getAttribLocation(r, "uv")
            }, a = {
              renderType: u.getUniformLocation(r, "renderType"),
              map: u.getUniformLocation(r, "map"),
              occlusionMap: u.getUniformLocation(r, "occlusionMap"),
              opacity: u.getUniformLocation(r, "opacity"),
              color: u.getUniformLocation(r, "color"),
              scale: u.getUniformLocation(r, "scale"),
              rotation: u.getUniformLocation(r, "rotation"),
              screenPosition: u.getUniformLocation(r, "screenPosition")
            }
          };
        this.render = function (d, f, p, m) {
          if (0 !== t.length) {
            var g = new X.Vector3,
              v = m / p,
              y = .5 * p,
              b = .5 * m,
              _ = 16 / m,
              x = new X.Vector2(_ * v, _),
              w = new X.Vector3(1, 1, 0),
              E = new X.Vector2(1, 1);
            void 0 === r && h(), u.useProgram(r), u.enableVertexAttribArray(o.vertex), u.enableVertexAttribArray(o.uv), u.uniform1i(a.occlusionMap, 0), u.uniform1i(a.map, 1), u.bindBuffer(u.ARRAY_BUFFER, n), u.vertexAttribPointer(o.vertex, 2, u.FLOAT, !1, 16, 0), u.vertexAttribPointer(o.uv, 2, u.FLOAT, !1, 16, 8), u.bindBuffer(u.ELEMENT_ARRAY_BUFFER, i), u.disable(u.CULL_FACE), u.depthMask(!1);
            for (var A = 0, S = t.length; A < S; A++) {
              _ = 16 / m, x.set(_ * v, _);
              var M = t[A];
              if (g.set(M.matrixWorld.elements[12], M.matrixWorld.elements[13], M.matrixWorld.elements[14]), g.applyMatrix4(f.matrixWorldInverse), g.applyProjection(f.projectionMatrix), w.copy(g), E.x = w.x * y + y, E.y = w.y * b + b, s || E.x > 0 && E.x < p && E.y > 0 && E.y < m) {
                u.activeTexture(u.TEXTURE1), u.bindTexture(u.TEXTURE_2D, l), u.copyTexImage2D(u.TEXTURE_2D, 0, u.RGB, E.x - 8, E.y - 8, 16, 16, 0), u.uniform1i(a.renderType, 0), u.uniform2f(a.scale, x.x, x.y), u.uniform3f(a.screenPosition, w.x, w.y, w.z), u.disable(u.BLEND), u.enable(u.DEPTH_TEST), u.drawElements(u.TRIANGLES, 6, u.UNSIGNED_SHORT, 0), u.activeTexture(u.TEXTURE0), u.bindTexture(u.TEXTURE_2D, c), u.copyTexImage2D(u.TEXTURE_2D, 0, u.RGBA, E.x - 8, E.y - 8, 16, 16, 0), u.uniform1i(a.renderType, 1), u.disable(u.DEPTH_TEST), u.activeTexture(u.TEXTURE1), u.bindTexture(u.TEXTURE_2D, l), u.drawElements(u.TRIANGLES, 6, u.UNSIGNED_SHORT, 0), M.positionScreen.copy(w), M.customUpdateCallback ? M.customUpdateCallback(M) : M.updateLensFlares(), u.uniform1i(a.renderType, 2), u.enable(u.BLEND);
                for (var T = 0, C = M.lensFlares.length; T < C; T++) {
                  var P = M.lensFlares[T];
                  P.opacity > .001 && P.scale > .001 && (w.x = P.x, w.y = P.y, w.z = P.z, _ = P.size * P.scale / m, x.x = _ * v, x.y = _, u.uniform3f(a.screenPosition, w.x, w.y, w.z), u.uniform2f(a.scale, x.x, x.y), u.uniform1f(a.rotation, P.rotation), u.uniform1f(a.opacity, P.opacity), u.uniform3f(a.color, P.color.r, P.color.g, P.color.b), e.state.setBlending(P.blending, P.blendEquation, P.blendSrc, P.blendDst), e.setTexture(P.texture, 1), u.drawElements(u.TRIANGLES, 6, u.UNSIGNED_SHORT, 0))
                }
              }
            }
            u.enable(u.CULL_FACE), u.enable(u.DEPTH_TEST), u.depthMask(!0), e.resetGLState()
          }
        }
      }, X.ShadowMapPlugin = function (e, t, n, i) {
        var r, o, a, s, l = e.context,
          c = new X.Frustum,
          u = new X.Matrix4,
          h = new X.Vector3,
          d = new X.Vector3,
          f = new X.Vector3,
          p = [],
          m = X.ShaderLib.depthRGBA,
          g = X.UniformsUtils.clone(m.uniforms);

        function v(e, t, i) {
          if (t.visible) {
            var r = n[t.id];
            if (r && t.castShadow && (!1 === t.frustumCulled || !0 === c.intersectsObject(t)))
              for (var o = 0, a = r.length; o < a; o++) {
                var s = r[o];
                t._modelViewMatrix.multiplyMatrices(i.matrixWorldInverse, t.matrixWorld), p.push(s)
              }
            for (o = 0, a = t.children.length; o < a; o++) v(e, t.children[o], i)
          }
        }

        function y(e, t) {
          var n = new X.DirectionalLight;
          n.isVirtual = !0, n.onlyShadow = !0, n.castShadow = !0, n.shadowCameraNear = e.shadowCameraNear, n.shadowCameraFar = e.shadowCameraFar, n.shadowCameraLeft = e.shadowCameraLeft, n.shadowCameraRight = e.shadowCameraRight, n.shadowCameraBottom = e.shadowCameraBottom, n.shadowCameraTop = e.shadowCameraTop, n.shadowCameraVisible = e.shadowCameraVisible, n.shadowDarkness = e.shadowDarkness, n.shadowBias = e.shadowCascadeBias[t], n.shadowMapWidth = e.shadowCascadeWidth[t], n.shadowMapHeight = e.shadowCascadeHeight[t], n.pointsWorld = [], n.pointsFrustum = [];
          for (var i = n.pointsWorld, r = n.pointsFrustum, o = 0; o < 8; o++) i[o] = new X.Vector3, r[o] = new X.Vector3;
          var a = e.shadowCascadeNearZ[t],
            s = e.shadowCascadeFarZ[t];
          return r[0].set(-1, -1, a), r[1].set(1, -1, a), r[2].set(-1, 1, a), r[3].set(1, 1, a), r[4].set(-1, -1, s), r[5].set(1, -1, s), r[6].set(-1, 1, s), r[7].set(1, 1, s), n
        }

        function b(e, t) {
          var n = e.shadowCascadeArray[t];
          n.position.copy(e.position), n.target.position.copy(e.target.position), n.lookAt(n.target), n.shadowCameraVisible = e.shadowCameraVisible, n.shadowDarkness = e.shadowDarkness, n.shadowBias = e.shadowCascadeBias[t];
          var i = e.shadowCascadeNearZ[t],
            r = e.shadowCascadeFarZ[t],
            o = n.pointsFrustum;
          o[0].z = i, o[1].z = i, o[2].z = i, o[3].z = i, o[4].z = r, o[5].z = r, o[6].z = r, o[7].z = r
        }

        function _(e, t) {
          var n = t.shadowCamera,
            i = t.pointsFrustum,
            r = t.pointsWorld;
          h.set(1 / 0, 1 / 0, 1 / 0), d.set(-1 / 0, -1 / 0, -1 / 0);
          for (var o = 0; o < 8; o++) {
            var a = r[o];
            a.copy(i[o]), a.unproject(e), a.applyMatrix4(n.matrixWorldInverse), a.x < h.x && (h.x = a.x), a.x > d.x && (d.x = a.x), a.y < h.y && (h.y = a.y), a.y > d.y && (d.y = a.y), a.z < h.z && (h.z = a.z), a.z > d.z && (d.z = a.z)
          }
          n.left = h.x, n.right = d.x, n.top = d.y, n.bottom = h.y, n.updateProjectionMatrix()
        }

        function x(e) {
          return e.material instanceof X.MeshFaceMaterial ? e.material.materials[0] : e.material
        }
        r = new X.ShaderMaterial({
          uniforms: g,
          vertexShader: m.vertexShader,
          fragmentShader: m.fragmentShader
        }), o = new X.ShaderMaterial({
          uniforms: g,
          vertexShader: m.vertexShader,
          fragmentShader: m.fragmentShader,
          morphTargets: !0
        }), a = new X.ShaderMaterial({
          uniforms: g,
          vertexShader: m.vertexShader,
          fragmentShader: m.fragmentShader,
          skinning: !0
        }), s = new X.ShaderMaterial({
          uniforms: g,
          vertexShader: m.vertexShader,
          fragmentShader: m.fragmentShader,
          morphTargets: !0,
          skinning: !0
        }), r._shadowPass = !0, o._shadowPass = !0, a._shadowPass = !0, s._shadowPass = !0, this.render = function (n, h) {
          if (!1 !== e.shadowMapEnabled) {
            var d, m, g, w, E, A, S, M, T, C, P, L, D, I = [],
              R = 0;
            for (l.clearColor(1, 1, 1, 1), l.disable(l.BLEND), l.enable(l.CULL_FACE), l.frontFace(l.CCW), e.shadowMapCullFace === X.CullFaceFront ? l.cullFace(l.FRONT) : l.cullFace(l.BACK), e.state.setDepthTest(!0), d = 0, m = t.length; d < m; d++)
              if ((D = t[d]).castShadow)
                if (D instanceof X.DirectionalLight && D.shadowCascade)
                  for (E = 0; E < D.shadowCascadeCount; E++) {
                    var O;
                    if (D.shadowCascadeArray[E]) O = D.shadowCascadeArray[E];
                    else {
                      (O = y(D, E)).originalCamera = h;
                      var k = new X.Gyroscope;
                      k.position.copy(D.shadowCascadeOffset), k.add(O), k.add(O.target), h.add(k), D.shadowCascadeArray[E] = O
                    }
                    b(D, E), I[R] = O, R++
                  } else I[R] = D, R++;
            for (d = 0, m = I.length; d < m; d++) {
              if (!(D = I[d]).shadowMap) {
                var N = X.LinearFilter;
                e.shadowMapType === X.PCFSoftShadowMap && (N = X.NearestFilter);
                var F = {
                  minFilter: N,
                  magFilter: N,
                  format: X.RGBAFormat
                };
                D.shadowMap = new X.WebGLRenderTarget(D.shadowMapWidth, D.shadowMapHeight, F), D.shadowMapSize = new X.Vector2(D.shadowMapWidth, D.shadowMapHeight), D.shadowMatrix = new X.Matrix4
              }
              if (!D.shadowCamera) {
                if (D instanceof X.SpotLight) D.shadowCamera = new X.PerspectiveCamera(D.shadowCameraFov, D.shadowMapWidth / D.shadowMapHeight, D.shadowCameraNear, D.shadowCameraFar);
                else {
                  if (!(D instanceof X.DirectionalLight)) {
                    X.error("THREE.ShadowMapPlugin: Unsupported light type for shadow", D);
                    continue
                  }
                  D.shadowCamera = new X.OrthographicCamera(D.shadowCameraLeft, D.shadowCameraRight, D.shadowCameraTop, D.shadowCameraBottom, D.shadowCameraNear, D.shadowCameraFar)
                }
                n.add(D.shadowCamera), !0 === n.autoUpdate && n.updateMatrixWorld()
              }
              var U, V, B;
              for (D.shadowCameraVisible && !D.cameraHelper && (D.cameraHelper = new X.CameraHelper(D.shadowCamera), n.add(D.cameraHelper)), D.isVirtual && O.originalCamera == h && _(h, D), A = D.shadowMap, S = D.shadowMatrix, (M = D.shadowCamera).position.setFromMatrixPosition(D.matrixWorld), f.setFromMatrixPosition(D.target.matrixWorld), M.lookAt(f), M.updateMatrixWorld(), M.matrixWorldInverse.getInverse(M.matrixWorld), D.cameraHelper && (D.cameraHelper.visible = D.shadowCameraVisible), D.shadowCameraVisible && D.cameraHelper.update(), S.set(.5, 0, 0, .5, 0, .5, 0, .5, 0, 0, .5, .5, 0, 0, 0, 1), S.multiply(M.projectionMatrix), S.multiply(M.matrixWorldInverse), u.multiplyMatrices(M.projectionMatrix, M.matrixWorldInverse), c.setFromMatrix(u), e.setRenderTarget(A), e.clear(), p.length = 0, v(n, n, M), g = 0, w = p.length; g < w; g++) L = (P = p[g]).object, T = P.buffer, U = x(L), V = void 0 !== L.geometry.morphTargets && L.geometry.morphTargets.length > 0 && U.morphTargets, B = L instanceof X.SkinnedMesh && U.skinning, C = L.customDepthMaterial ? L.customDepthMaterial : B ? V ? s : a : V ? o : r, e.setMaterialFaces(U), T instanceof X.BufferGeometry ? e.renderBufferDirect(M, t, null, C, T, L) : e.renderBuffer(M, t, null, C, T, L);
              for (g = 0, w = i.length; g < w; g++)(L = (P = i[g]).object).visible && L.castShadow && (L._modelViewMatrix.multiplyMatrices(M.matrixWorldInverse, L.matrixWorld), e.renderImmediateObject(M, t, null, r, L))
            }
            var z = e.getClearColor(),
              G = e.getClearAlpha();
            l.clearColor(z.r, z.g, z.b, G), l.enable(l.BLEND), e.shadowMapCullFace === X.CullFaceFront && l.cullFace(l.BACK), e.resetGLState()
          }
        }
      }, X.SpritePlugin = function (e, t) {
        var n, i, r, o, a, s, l = e.context,
          c = new X.Vector3,
          u = new X.Quaternion,
          h = new X.Vector3,
          d = function () {
            var t = new Float32Array([-.5, -.5, 0, 0, .5, -.5, 1, 0, .5, .5, 1, 1, -.5, .5, 0, 1]),
              c = new Uint16Array([0, 1, 2, 0, 2, 3]);
            n = l.createBuffer(), i = l.createBuffer(), l.bindBuffer(l.ARRAY_BUFFER, n), l.bufferData(l.ARRAY_BUFFER, t, l.STATIC_DRAW), l.bindBuffer(l.ELEMENT_ARRAY_BUFFER, i), l.bufferData(l.ELEMENT_ARRAY_BUFFER, c, l.STATIC_DRAW), r = function () {
              var t = l.createProgram(),
                n = l.createShader(l.VERTEX_SHADER),
                i = l.createShader(l.FRAGMENT_SHADER);
              return l.shaderSource(n, ["precision " + e.getPrecision() + " float;", "uniform mat4 modelViewMatrix;", "uniform mat4 projectionMatrix;", "uniform float rotation;", "uniform vec2 scale;", "uniform vec2 uvOffset;", "uniform vec2 uvScale;", "attribute vec2 position;", "attribute vec2 uv;", "varying vec2 vUV;", "void main() {", "vUV = uvOffset + uv * uvScale;", "vec2 alignedPosition = position * scale;", "vec2 rotatedPosition;", "rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;", "rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;", "vec4 finalPosition;", "finalPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );", "finalPosition.xy += rotatedPosition;", "finalPosition = projectionMatrix * finalPosition;", "gl_Position = finalPosition;", "}"].join("\n")), l.shaderSource(i, ["precision " + e.getPrecision() + " float;", "uniform vec3 color;", "uniform sampler2D map;", "uniform float opacity;", "uniform int fogType;", "uniform vec3 fogColor;", "uniform float fogDensity;", "uniform float fogNear;", "uniform float fogFar;", "uniform float alphaTest;", "varying vec2 vUV;", "void main() {", "vec4 texture = texture2D( map, vUV );", "if ( texture.a < alphaTest ) discard;", "gl_FragColor = vec4( color * texture.xyz, texture.a * opacity );", "if ( fogType > 0 ) {", "float depth = gl_FragCoord.z / gl_FragCoord.w;", "float fogFactor = 0.0;", "if ( fogType == 1 ) {", "fogFactor = smoothstep( fogNear, fogFar, depth );", "} else {", "const float LOG2 = 1.442695;", "float fogFactor = exp2( - fogDensity * fogDensity * depth * depth * LOG2 );", "fogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );", "}", "gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );", "}", "}"].join("\n")), l.compileShader(n), l.compileShader(i), l.attachShader(t, n), l.attachShader(t, i), l.linkProgram(t), t
            }(), o = {
              position: l.getAttribLocation(r, "position"),
              uv: l.getAttribLocation(r, "uv")
            }, a = {
              uvOffset: l.getUniformLocation(r, "uvOffset"),
              uvScale: l.getUniformLocation(r, "uvScale"),
              rotation: l.getUniformLocation(r, "rotation"),
              scale: l.getUniformLocation(r, "scale"),
              color: l.getUniformLocation(r, "color"),
              map: l.getUniformLocation(r, "map"),
              opacity: l.getUniformLocation(r, "opacity"),
              modelViewMatrix: l.getUniformLocation(r, "modelViewMatrix"),
              projectionMatrix: l.getUniformLocation(r, "projectionMatrix"),
              fogType: l.getUniformLocation(r, "fogType"),
              fogDensity: l.getUniformLocation(r, "fogDensity"),
              fogNear: l.getUniformLocation(r, "fogNear"),
              fogFar: l.getUniformLocation(r, "fogFar"),
              fogColor: l.getUniformLocation(r, "fogColor"),
              alphaTest: l.getUniformLocation(r, "alphaTest")
            };
            var u = document.createElement("canvas");
            u.width = 8, u.height = 8;
            var h = u.getContext("2d");
            h.fillStyle = "white", h.fillRect(0, 0, 8, 8), (s = new X.Texture(u)).needsUpdate = !0
          };

        function f(e, t) {
          return e.z !== t.z ? t.z - e.z : t.id - e.id
        }
        this.render = function (p, m) {
          if (0 !== t.length) {
            void 0 === r && d(), l.useProgram(r), l.enableVertexAttribArray(o.position), l.enableVertexAttribArray(o.uv), l.disable(l.CULL_FACE), l.enable(l.BLEND), l.bindBuffer(l.ARRAY_BUFFER, n), l.vertexAttribPointer(o.position, 2, l.FLOAT, !1, 16, 0), l.vertexAttribPointer(o.uv, 2, l.FLOAT, !1, 16, 8), l.bindBuffer(l.ELEMENT_ARRAY_BUFFER, i), l.uniformMatrix4fv(a.projectionMatrix, !1, m.projectionMatrix.elements), l.activeTexture(l.TEXTURE0), l.uniform1i(a.map, 0);
            var g = 0,
              v = 0,
              y = p.fog;
            y ? (l.uniform3f(a.fogColor, y.color.r, y.color.g, y.color.b), y instanceof X.Fog ? (l.uniform1f(a.fogNear, y.near), l.uniform1f(a.fogFar, y.far), l.uniform1i(a.fogType, 1), g = 1, v = 1) : y instanceof X.FogExp2 && (l.uniform1f(a.fogDensity, y.density), l.uniform1i(a.fogType, 2), g = 2, v = 2)) : (l.uniform1i(a.fogType, 0), g = 0, v = 0);
            for (var b = 0, _ = t.length; b < _; b++) {
              (w = t[b])._modelViewMatrix.multiplyMatrices(m.matrixWorldInverse, w.matrixWorld), w.z = -w._modelViewMatrix.elements[14]
            }
            t.sort(f);
            var x = [];
            for (b = 0, _ = t.length; b < _; b++) {
              var w, E = (w = t[b]).material;
              l.uniform1f(a.alphaTest, E.alphaTest), l.uniformMatrix4fv(a.modelViewMatrix, !1, w._modelViewMatrix.elements), w.matrixWorld.decompose(c, u, h), x[0] = h.x, x[1] = h.y;
              var A = 0;
              p.fog && E.fog && (A = v), g !== A && (l.uniform1i(a.fogType, A), g = A), null !== E.map ? (l.uniform2f(a.uvOffset, E.map.offset.x, E.map.offset.y), l.uniform2f(a.uvScale, E.map.repeat.x, E.map.repeat.y)) : (l.uniform2f(a.uvOffset, 0, 0), l.uniform2f(a.uvScale, 1, 1)), l.uniform1f(a.opacity, E.opacity), l.uniform3f(a.color, E.color.r, E.color.g, E.color.b), l.uniform1f(a.rotation, E.rotation), l.uniform2fv(a.scale, x), e.state.setBlending(E.blending, E.blendEquation, E.blendSrc, E.blendDst), e.state.setDepthTest(E.depthTest), e.state.setDepthWrite(E.depthWrite), E.map && E.map.image && E.map.image.width ? e.setTexture(E.map, 0) : e.setTexture(s, 0), l.drawElements(l.TRIANGLES, 6, l.UNSIGNED_SHORT, 0)
            }
            l.enable(l.CULL_FACE), e.resetGLState()
          }
        }
      }, X.GeometryUtils = {
        merge: function (e, t, n) {
          var i;
          X.warn("THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead."), t instanceof X.Mesh && (t.matrixAutoUpdate && t.updateMatrix(), i = t.matrix, t = t.geometry), e.merge(t, i, n)
        },
        center: function (e) {
          return X.warn("THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead."), e.center()
        }
      }, X.ImageUtils = {
        crossOrigin: void 0,
        loadTexture: function (e, t, n, i) {
          var r = new X.ImageLoader;
          r.crossOrigin = this.crossOrigin;
          var o = new X.Texture(void 0, t);
          return r.load(e, (function (e) {
            o.image = e, o.needsUpdate = !0, n && n(o)
          }), void 0, (function (e) {
            i && i(e)
          })), o.sourceFile = e, o
        },
        loadTextureCube: function (e, t, n, i) {
          var r = new X.ImageLoader;
          r.crossOrigin = this.crossOrigin;
          var o = new X.CubeTexture([], t);
          o.flipY = !1;
          for (var a = 0, s = function (t) {
              r.load(e[t], (function (e) {
                o.images[t] = e, 6 === (a += 1) && (o.needsUpdate = !0, n && n(o))
              }), void 0, i)
            }, l = 0, c = e.length; l < c; ++l) s(l);
          return o
        },
        loadCompressedTexture: function () {
          X.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")
        },
        loadCompressedTextureCube: function () {
          X.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")
        },
        getNormalMap: function (e, t) {
          var n = function (e, t) {
              return [e[0] - t[0], e[1] - t[1], e[2] - t[2]]
            },
            i = function (e) {
              var t = Math.sqrt(e[0] * e[0] + e[1] * e[1] + e[2] * e[2]);
              return [e[0] / t, e[1] / t, e[2] / t]
            };
          t |= 1;
          var r = e.width,
            o = e.height,
            a = document.createElement("canvas");
          a.width = r, a.height = o;
          var s = a.getContext("2d");
          s.drawImage(e, 0, 0);
          for (var l, c, u = s.getImageData(0, 0, r, o).data, h = s.createImageData(r, o), d = h.data, f = 0; f < r; f++)
            for (var p = 0; p < o; p++) {
              var m = p - 1 < 0 ? 0 : p - 1,
                g = p + 1 > o - 1 ? o - 1 : p + 1,
                v = f - 1 < 0 ? 0 : f - 1,
                y = f + 1 > r - 1 ? r - 1 : f + 1,
                b = [],
                _ = [0, 0, u[4 * (p * r + f)] / 255 * t];
              b.push([-1, 0, u[4 * (p * r + v)] / 255 * t]), b.push([-1, -1, u[4 * (m * r + v)] / 255 * t]), b.push([0, -1, u[4 * (m * r + f)] / 255 * t]), b.push([1, -1, u[4 * (m * r + y)] / 255 * t]), b.push([1, 0, u[4 * (p * r + y)] / 255 * t]), b.push([1, 1, u[4 * (g * r + y)] / 255 * t]), b.push([0, 1, u[4 * (g * r + f)] / 255 * t]), b.push([-1, 1, u[4 * (g * r + v)] / 255 * t]);
              for (var x = [], w = b.length, E = 0; E < w; E++) {
                var A = b[E],
                  S = b[(E + 1) % w];
                A = n(A, _), S = n(S, _), x.push(i((c = S, [(l = A)[1] * c[2] - l[2] * c[1], l[2] * c[0] - l[0] * c[2], l[0] * c[1] - l[1] * c[0]])))
              }
              var M = [0, 0, 0];
              for (E = 0; E < x.length; E++) M[0] += x[E][0], M[1] += x[E][1], M[2] += x[E][2];
              M[0] /= x.length, M[1] /= x.length, M[2] /= x.length;
              var T = 4 * (p * r + f);
              d[T] = (M[0] + 1) / 2 * 255 | 0, d[T + 1] = (M[1] + 1) / 2 * 255 | 0, d[T + 2] = 255 * M[2] | 0, d[T + 3] = 255
            }
          return s.putImageData(h, 0, 0), a
        },
        generateDataTexture: function (e, t, n) {
          for (var i = e * t, r = new Uint8Array(3 * i), o = Math.floor(255 * n.r), a = Math.floor(255 * n.g), s = Math.floor(255 * n.b), l = 0; l < i; l++) r[3 * l] = o, r[3 * l + 1] = a, r[3 * l + 2] = s;
          var c = new X.DataTexture(r, e, t, X.RGBFormat);
          return c.needsUpdate = !0, c
        }
      }, X.SceneUtils = {
        createMultiMaterialObject: function (e, t) {
          for (var n = new X.Object3D, i = 0, r = t.length; i < r; i++) n.add(new X.Mesh(e, t[i]));
          return n
        },
        detach: function (e, t, n) {
          e.applyMatrix(t.matrixWorld), t.remove(e), n.add(e)
        },
        attach: function (e, t, n) {
          var i = new X.Matrix4;
          i.getInverse(n.matrixWorld), e.applyMatrix(i), t.remove(e), n.add(e)
        }
      }, X.FontUtils = {
        faces: {},
        face: "helvetiker",
        weight: "normal",
        style: "normal",
        size: 150,
        divisions: 10,
        getFace: function () {
          try {
            return this.faces[this.face][this.weight][this.style]
          } catch (e) {
            throw "The font " + this.face + " with " + this.weight + " weight and " + this.style + " style is missing."
          }
        },
        loadFace: function (e) {
          var t = e.familyName.toLowerCase();
          return this.faces[t] = this.faces[t] || {}, this.faces[t][e.cssFontWeight] = this.faces[t][e.cssFontWeight] || {}, this.faces[t][e.cssFontWeight][e.cssFontStyle] = e, this.faces[t][e.cssFontWeight][e.cssFontStyle] = e, e
        },
        drawText: function (e) {
          var t, n = this.getFace(),
            i = this.size / n.resolution,
            r = 0,
            o = String(e).split(""),
            a = o.length,
            s = [];
          for (t = 0; t < a; t++) {
            var l = new X.Path,
              c = this.extractGlyphPoints(o[t], n, i, r, l);
            r += c.offset, s.push(c.path)
          }
          return {
            paths: s,
            offset: r / 2
          }
        },
        extractGlyphPoints: function (e, t, n, i, r) {
          var o, a, s, l, c, u, h, d, f, p, m, g, v, y, b, _, x, w, E = [],
            A = t.glyphs[e] || t.glyphs["?"];
          if (A) {
            if (A.o)
              for (c = (l = A._cachedOutline || (A._cachedOutline = A.o.split(" "))).length, u = n, h = n, o = 0; o < c;) switch (l[o++]) {
                case "m":
                  d = l[o++] * u + i, f = l[o++] * h, r.moveTo(d, f);
                  break;
                case "l":
                  d = l[o++] * u + i, f = l[o++] * h, r.lineTo(d, f);
                  break;
                case "q":
                  if (p = l[o++] * u + i, m = l[o++] * h, y = l[o++] * u + i, b = l[o++] * h, r.quadraticCurveTo(y, b, p, m), w = E[E.length - 1])
                    for (g = w.x, v = w.y, a = 1, s = this.divisions; a <= s; a++) {
                      var S = a / s;
                      X.Shape.Utils.b2(S, g, y, p), X.Shape.Utils.b2(S, v, b, m)
                    }
                  break;
                case "b":
                  if (p = l[o++] * u + i, m = l[o++] * h, y = l[o++] * u + i, b = l[o++] * h, _ = l[o++] * u + i, x = l[o++] * h, r.bezierCurveTo(y, b, _, x, p, m), w = E[E.length - 1])
                    for (g = w.x, v = w.y, a = 1, s = this.divisions; a <= s; a++) {
                      S = a / s;
                      X.Shape.Utils.b3(S, g, y, _, p), X.Shape.Utils.b3(S, v, b, x, m)
                    }
              }
            return {
              offset: A.ha * n,
              path: r
            }
          }
        }
      }, X.FontUtils.generateShapes = function (e, t) {
        var n = void 0 !== (t = t || {}).size ? t.size : 100,
          i = void 0 !== t.curveSegments ? t.curveSegments : 4,
          r = void 0 !== t.font ? t.font : "helvetiker",
          o = void 0 !== t.weight ? t.weight : "normal",
          a = void 0 !== t.style ? t.style : "normal";
        X.FontUtils.size = n, X.FontUtils.divisions = i, X.FontUtils.face = r, X.FontUtils.weight = o, X.FontUtils.style = a;
        for (var s = X.FontUtils.drawText(e).paths, l = [], c = 0, u = s.length; c < u; c++) Array.prototype.push.apply(l, s[c].toShapes());
        return l
      }, N = X.FontUtils, F = function (e) {
        for (var t = e.length, n = 0, i = t - 1, r = 0; r < t; i = r++) n += e[i].x * e[r].y - e[r].x * e[i].y;
        return .5 * n
      }, U = function (e, t, n, i, r, o) {
        var a, s, l, c, u, h, d, f, p, m, g, v, y, b, _;
        if (s = e[o[t]].x, l = e[o[t]].y, c = e[o[n]].x, u = e[o[n]].y, h = e[o[i]].x, 1e-10 > (c - s) * ((d = e[o[i]].y) - l) - (u - l) * (h - s)) return !1;
        for (m = h - c, g = d - u, v = s - h, y = l - d, b = c - s, _ = u - l, a = 0; a < r; a++)
          if (f = e[o[a]].x, p = e[o[a]].y, !(f === s && p === l || f === c && p === u || f === h && p === d) && m * (p - u) - g * (f - c) >= -1e-10 && v * (p - d) - y * (f - h) >= -1e-10 && b * (p - l) - _ * (f - s) >= -1e-10) return !1;
        return !0
      }, N.Triangulate = function (e, t) {
        var n = e.length;
        if (n < 3) return null;
        var i, r, o, a = [],
          s = [],
          l = [];
        if (F(e) > 0)
          for (r = 0; r < n; r++) s[r] = r;
        else
          for (r = 0; r < n; r++) s[r] = n - 1 - r;
        var c = n,
          u = 2 * c;
        for (r = c - 1; c > 2;) {
          if (u-- <= 0) return X.warn("THREE.FontUtils: Warning, unable to triangulate polygon! in Triangulate.process()"), t ? l : a;
          if (c <= (i = r) && (i = 0), c <= (r = i + 1) && (r = 0), c <= (o = r + 1) && (o = 0), U(e, i, r, o, c, s)) {
            var h, d, f, p, m;
            for (h = s[i], d = s[r], f = s[o], a.push([e[h], e[d], e[f]]), l.push([s[i], s[r], s[o]]), p = r, m = r + 1; m < c; p++, m++) s[p] = s[m];
            u = 2 * --c
          }
        }
        return t ? l : a
      }, N.Triangulate.area = F, X.Audio = function (e) {
        X.Object3D.call(this), this.type = "Audio", this.context = e.context, this.source = this.context.createBufferSource(), this.source.onended = this.onEnded.bind(this), this.gain = this.context.createGain(), this.gain.connect(this.context.destination), this.panner = this.context.createPanner(), this.panner.connect(this.gain), this.autoplay = !1, this.startTime = 0, this.isPlaying = !1
      }, X.Audio.prototype = Object.create(X.Object3D.prototype), X.Audio.prototype.constructor = X.Audio, X.Audio.prototype.load = function (e) {
        var t = this,
          n = new XMLHttpRequest;
        return n.open("GET", e, !0), n.responseType = "arraybuffer", n.onload = function (e) {
          t.context.decodeAudioData(this.response, (function (e) {
            t.source.buffer = e, t.autoplay && t.play()
          }))
        }, n.send(), this
      }, X.Audio.prototype.play = function () {
        if (!0 !== this.isPlaying) {
          var e = this.context.createBufferSource();
          e.buffer = this.source.buffer, e.loop = this.source.loop, e.onended = this.source.onended, e.connect(this.panner), e.start(0, this.startTime), this.isPlaying = !0, this.source = e
        } else X.warn("THREE.Audio: Audio is already playing.")
      }, X.Audio.prototype.pause = function () {
        this.source.stop(), this.startTime = this.context.currentTime
      }, X.Audio.prototype.stop = function () {
        this.source.stop(), this.startTime = 0
      }, X.Audio.prototype.onEnded = function () {
        this.isPlaying = !1
      }, X.Audio.prototype.setLoop = function (e) {
        this.source.loop = e
      }, X.Audio.prototype.setRefDistance = function (e) {
        this.panner.refDistance = e
      }, X.Audio.prototype.setRolloffFactor = function (e) {
        this.panner.rolloffFactor = e
      }, X.Audio.prototype.setVolume = function (e) {
        this.gain.gain.value = e
      }, X.Audio.prototype.updateMatrixWorld = function () {
        var e = new X.Vector3;
        return function (t) {
          X.Object3D.prototype.updateMatrixWorld.call(this, t), e.setFromMatrixPosition(this.matrixWorld), this.panner.setPosition(e.x, e.y, e.z)
        }
      }(), X.AudioListener = function () {
        X.Object3D.call(this), this.type = "AudioListener", this.context = new(window.AudioContext || window.webkitAudioContext)
      }, X.AudioListener.prototype = Object.create(X.Object3D.prototype), X.AudioListener.prototype.constructor = X.AudioListener, X.AudioListener.prototype.updateMatrixWorld = function () {
        var e = new X.Vector3,
          t = new X.Quaternion,
          n = new X.Vector3,
          i = new X.Vector3,
          r = new X.Vector3,
          o = new X.Vector3;
        return function (a) {
          X.Object3D.prototype.updateMatrixWorld.call(this, a);
          var s = this.context.listener,
            l = this.up;
          this.matrixWorld.decompose(e, t, n), i.set(0, 0, -1).applyQuaternion(t), r.subVectors(e, o), s.setPosition(e.x, e.y, e.z), s.setOrientation(i.x, i.y, i.z, l.x, l.y, l.z), s.setVelocity(r.x, r.y, r.z), o.copy(e)
        }
      }(), X.Curve = function () {}, X.Curve.prototype.getPoint = function (e) {
        return X.warn("THREE.Curve: Warning, getPoint() not implemented!"), null
      }, X.Curve.prototype.getPointAt = function (e) {
        var t = this.getUtoTmapping(e);
        return this.getPoint(t)
      }, X.Curve.prototype.getPoints = function (e) {
        e || (e = 5);
        var t, n = [];
        for (t = 0; t <= e; t++) n.push(this.getPoint(t / e));
        return n
      }, X.Curve.prototype.getSpacedPoints = function (e) {
        e || (e = 5);
        var t, n = [];
        for (t = 0; t <= e; t++) n.push(this.getPointAt(t / e));
        return n
      }, X.Curve.prototype.getLength = function () {
        var e = this.getLengths();
        return e[e.length - 1]
      }, X.Curve.prototype.getLengths = function (e) {
        if (e || (e = this.__arcLengthDivisions ? this.__arcLengthDivisions : 200), this.cacheArcLengths && this.cacheArcLengths.length == e + 1 && !this.needsUpdate) return this.cacheArcLengths;
        this.needsUpdate = !1;
        var t, n, i = [],
          r = this.getPoint(0),
          o = 0;
        for (i.push(0), n = 1; n <= e; n++) o += (t = this.getPoint(n / e)).distanceTo(r), i.push(o), r = t;
        return this.cacheArcLengths = i, i
      }, X.Curve.prototype.updateArcLengths = function () {
        this.needsUpdate = !0, this.getLengths()
      }, X.Curve.prototype.getUtoTmapping = function (e, t) {
        var n, i = this.getLengths(),
          r = 0,
          o = i.length;
        n = t || e * i[o - 1];
        for (var a, s = 0, l = o - 1; s <= l;)
          if ((a = i[r = Math.floor(s + (l - s) / 2)] - n) < 0) s = r + 1;
          else {
            if (!(a > 0)) {
              l = r;
              break
            }
            l = r - 1
          } if (i[r = l] == n) return r / (o - 1);
        var c = i[r];
        return (r + (n - c) / (i[r + 1] - c)) / (o - 1)
      }, X.Curve.prototype.getTangent = function (e) {
        var t = e - 1e-4,
          n = e + 1e-4;
        t < 0 && (t = 0), n > 1 && (n = 1);
        var i = this.getPoint(t);
        return this.getPoint(n).clone().sub(i).normalize()
      }, X.Curve.prototype.getTangentAt = function (e) {
        var t = this.getUtoTmapping(e);
        return this.getTangent(t)
      }, X.Curve.Utils = {
        tangentQuadraticBezier: function (e, t, n, i) {
          return 2 * (1 - e) * (n - t) + 2 * e * (i - n)
        },
        tangentCubicBezier: function (e, t, n, i, r) {
          return -3 * t * (1 - e) * (1 - e) + 3 * n * (1 - e) * (1 - e) - 6 * e * n * (1 - e) + 6 * e * i * (1 - e) - 3 * e * e * i + 3 * e * e * r
        },
        tangentSpline: function (e, t, n, i, r) {
          return 6 * e * e - 6 * e + (3 * e * e - 4 * e + 1) + (-6 * e * e + 6 * e) + (3 * e * e - 2 * e)
        },
        interpolate: function (e, t, n, i, r) {
          var o = .5 * (n - e),
            a = .5 * (i - t),
            s = r * r;
          return (2 * t - 2 * n + o + a) * (r * s) + (-3 * t + 3 * n - 2 * o - a) * s + o * r + t
        }
      }, X.Curve.create = function (e, t) {
        return e.prototype = Object.create(X.Curve.prototype), e.prototype.constructor = e, e.prototype.getPoint = t, e
      }, X.CurvePath = function () {
        this.curves = [], this.bends = [], this.autoClose = !1
      }, X.CurvePath.prototype = Object.create(X.Curve.prototype), X.CurvePath.prototype.constructor = X.CurvePath, X.CurvePath.prototype.add = function (e) {
        this.curves.push(e)
      }, X.CurvePath.prototype.checkConnection = function () {}, X.CurvePath.prototype.closePath = function () {
        var e = this.curves[0].getPoint(0),
          t = this.curves[this.curves.length - 1].getPoint(1);
        e.equals(t) || this.curves.push(new X.LineCurve(t, e))
      }, X.CurvePath.prototype.getPoint = function (e) {
        for (var t, n = e * this.getLength(), i = this.getCurveLengths(), r = 0; r < i.length;) {
          if (i[r] >= n) {
            var o = 1 - (i[r] - n) / (t = this.curves[r]).getLength();
            return t.getPointAt(o)
          }
          r++
        }
        return null
      }, X.CurvePath.prototype.getLength = function () {
        var e = this.getCurveLengths();
        return e[e.length - 1]
      }, X.CurvePath.prototype.getCurveLengths = function () {
        if (this.cacheLengths && this.cacheLengths.length == this.curves.length) return this.cacheLengths;
        var e, t = [],
          n = 0,
          i = this.curves.length;
        for (e = 0; e < i; e++) n += this.curves[e].getLength(), t.push(n);
        return this.cacheLengths = t, t
      }, X.CurvePath.prototype.getBoundingBox = function () {
        var e, t, n, i, r, o, a, s, l, c, u = this.getPoints();
        e = t = Number.NEGATIVE_INFINITY, i = r = Number.POSITIVE_INFINITY;
        var h = u[0] instanceof X.Vector3;
        for (c = h ? new X.Vector3 : new X.Vector2, s = 0, l = u.length; s < l; s++)(a = u[s]).x > e ? e = a.x : a.x < i && (i = a.x), a.y > t ? t = a.y : a.y < r && (r = a.y), h && (a.z > n ? n = a.z : a.z < o && (o = a.z)), c.add(a);
        var d = {
          minX: i,
          minY: r,
          maxX: e,
          maxY: t
        };
        return h && (d.maxZ = n, d.minZ = o), d
      }, X.CurvePath.prototype.createPointsGeometry = function (e) {
        var t = this.getPoints(e, !0);
        return this.createGeometry(t)
      }, X.CurvePath.prototype.createSpacedPointsGeometry = function (e) {
        var t = this.getSpacedPoints(e, !0);
        return this.createGeometry(t)
      }, X.CurvePath.prototype.createGeometry = function (e) {
        for (var t = new X.Geometry, n = 0; n < e.length; n++) t.vertices.push(new X.Vector3(e[n].x, e[n].y, e[n].z || 0));
        return t
      }, X.CurvePath.prototype.addWrapPath = function (e) {
        this.bends.push(e)
      }, X.CurvePath.prototype.getTransformedPoints = function (e, t) {
        var n, i, r = this.getPoints(e);
        for (t || (t = this.bends), n = 0, i = t.length; n < i; n++) r = this.getWrapPoints(r, t[n]);
        return r
      }, X.CurvePath.prototype.getTransformedSpacedPoints = function (e, t) {
        var n, i, r = this.getSpacedPoints(e);
        for (t || (t = this.bends), n = 0, i = t.length; n < i; n++) r = this.getWrapPoints(r, t[n]);
        return r
      }, X.CurvePath.prototype.getWrapPoints = function (e, t) {
        var n, i, r, o, a, s, l = this.getBoundingBox();
        for (n = 0, i = e.length; n < i; n++) {
          o = (r = e[n]).x, a = r.y, s = o / l.maxX, s = t.getUtoTmapping(s, o);
          var c = t.getPoint(s),
            u = t.getTangent(s);
          u.set(-u.y, u.x).multiplyScalar(a), r.x = c.x + u.x, r.y = c.y + u.y
        }
        return e
      }, X.Gyroscope = function () {
        X.Object3D.call(this)
      }, X.Gyroscope.prototype = Object.create(X.Object3D.prototype), X.Gyroscope.prototype.constructor = X.Gyroscope, X.Gyroscope.prototype.updateMatrixWorld = (V = new X.Vector3, B = new X.Quaternion, z = new X.Vector3, G = new X.Vector3, H = new X.Quaternion, W = new X.Vector3, function (e) {
        this.matrixAutoUpdate && this.updateMatrix(), (this.matrixWorldNeedsUpdate || e) && (this.parent ? (this.matrixWorld.multiplyMatrices(this.parent.matrixWorld, this.matrix), this.matrixWorld.decompose(G, H, W), this.matrix.decompose(V, B, z), this.matrixWorld.compose(G, B, W)) : this.matrixWorld.copy(this.matrix), this.matrixWorldNeedsUpdate = !1, e = !0);
        for (var t = 0, n = this.children.length; t < n; t++) this.children[t].updateMatrixWorld(e)
      }), X.Path = function (e) {
        X.CurvePath.call(this), this.actions = [], e && this.fromPoints(e)
      }, X.Path.prototype = Object.create(X.CurvePath.prototype), X.Path.prototype.constructor = X.Path, X.PathActions = {
        MOVE_TO: "moveTo",
        LINE_TO: "lineTo",
        QUADRATIC_CURVE_TO: "quadraticCurveTo",
        BEZIER_CURVE_TO: "bezierCurveTo",
        CSPLINE_THRU: "splineThru",
        ARC: "arc",
        ELLIPSE: "ellipse"
      }, X.Path.prototype.fromPoints = function (e) {
        this.moveTo(e[0].x, e[0].y);
        for (var t = 1, n = e.length; t < n; t++) this.lineTo(e[t].x, e[t].y)
      }, X.Path.prototype.moveTo = function (e, t) {
        var n = Array.prototype.slice.call(arguments);
        this.actions.push({
          action: X.PathActions.MOVE_TO,
          args: n
        })
      }, X.Path.prototype.lineTo = function (e, t) {
        var n = Array.prototype.slice.call(arguments),
          i = this.actions[this.actions.length - 1].args,
          r = i[i.length - 2],
          o = i[i.length - 1],
          a = new X.LineCurve(new X.Vector2(r, o), new X.Vector2(e, t));
        this.curves.push(a), this.actions.push({
          action: X.PathActions.LINE_TO,
          args: n
        })
      }, X.Path.prototype.quadraticCurveTo = function (e, t, n, i) {
        var r = Array.prototype.slice.call(arguments),
          o = this.actions[this.actions.length - 1].args,
          a = o[o.length - 2],
          s = o[o.length - 1],
          l = new X.QuadraticBezierCurve(new X.Vector2(a, s), new X.Vector2(e, t), new X.Vector2(n, i));
        this.curves.push(l), this.actions.push({
          action: X.PathActions.QUADRATIC_CURVE_TO,
          args: r
        })
      }, X.Path.prototype.bezierCurveTo = function (e, t, n, i, r, o) {
        var a = Array.prototype.slice.call(arguments),
          s = this.actions[this.actions.length - 1].args,
          l = s[s.length - 2],
          c = s[s.length - 1],
          u = new X.CubicBezierCurve(new X.Vector2(l, c), new X.Vector2(e, t), new X.Vector2(n, i), new X.Vector2(r, o));
        this.curves.push(u), this.actions.push({
          action: X.PathActions.BEZIER_CURVE_TO,
          args: a
        })
      }, X.Path.prototype.splineThru = function (e) {
        var t = Array.prototype.slice.call(arguments),
          n = this.actions[this.actions.length - 1].args,
          i = n[n.length - 2],
          r = n[n.length - 1],
          o = [new X.Vector2(i, r)];
        Array.prototype.push.apply(o, e);
        var a = new X.SplineCurve(o);
        this.curves.push(a), this.actions.push({
          action: X.PathActions.CSPLINE_THRU,
          args: t
        })
      }, X.Path.prototype.arc = function (e, t, n, i, r, o) {
        var a = this.actions[this.actions.length - 1].args,
          s = a[a.length - 2],
          l = a[a.length - 1];
        this.absarc(e + s, t + l, n, i, r, o)
      }, X.Path.prototype.absarc = function (e, t, n, i, r, o) {
        this.absellipse(e, t, n, n, i, r, o)
      }, X.Path.prototype.ellipse = function (e, t, n, i, r, o, a) {
        var s = this.actions[this.actions.length - 1].args,
          l = s[s.length - 2],
          c = s[s.length - 1];
        this.absellipse(e + l, t + c, n, i, r, o, a)
      }, X.Path.prototype.absellipse = function (e, t, n, i, r, o, a) {
        var s = Array.prototype.slice.call(arguments),
          l = new X.EllipseCurve(e, t, n, i, r, o, a);
        this.curves.push(l);
        var c = l.getPoint(1);
        s.push(c.x), s.push(c.y), this.actions.push({
          action: X.PathActions.ELLIPSE,
          args: s
        })
      }, X.Path.prototype.getSpacedPoints = function (e, t) {
        e || (e = 40);
        for (var n = [], i = 0; i < e; i++) n.push(this.getPoint(i / e));
        return n
      }, X.Path.prototype.getPoints = function (e, t) {
        if (this.useSpacedPoints) return console.log("tata"), this.getSpacedPoints(e, t);
        e = e || 12;
        var n, i, r, o, a, s, l, c, u, h, d, f, p, m, g, v, y, b, _ = [];
        for (n = 0, i = this.actions.length; n < i; n++) switch (o = (r = this.actions[n]).action, a = r.args, o) {
          case X.PathActions.MOVE_TO:
          case X.PathActions.LINE_TO:
            _.push(new X.Vector2(a[0], a[1]));
            break;
          case X.PathActions.QUADRATIC_CURVE_TO:
            for (s = a[2], l = a[3], h = a[0], d = a[1], _.length > 0 ? (f = (m = _[_.length - 1]).x, p = m.y) : (f = (m = this.actions[n - 1].args)[m.length - 2], p = m[m.length - 1]), g = 1; g <= e; g++) v = g / e, y = X.Shape.Utils.b2(v, f, h, s), b = X.Shape.Utils.b2(v, p, d, l), _.push(new X.Vector2(y, b));
            break;
          case X.PathActions.BEZIER_CURVE_TO:
            for (s = a[4], l = a[5], h = a[0], d = a[1], c = a[2], u = a[3], _.length > 0 ? (f = (m = _[_.length - 1]).x, p = m.y) : (f = (m = this.actions[n - 1].args)[m.length - 2], p = m[m.length - 1]), g = 1; g <= e; g++) v = g / e, y = X.Shape.Utils.b3(v, f, h, c, s), b = X.Shape.Utils.b3(v, p, d, u, l), _.push(new X.Vector2(y, b));
            break;
          case X.PathActions.CSPLINE_THRU:
            m = this.actions[n - 1].args;
            var x = [new X.Vector2(m[m.length - 2], m[m.length - 1])],
              w = e * a[0].length;
            x = x.concat(a[0]);
            var E = new X.SplineCurve(x);
            for (g = 1; g <= w; g++) _.push(E.getPointAt(g / w));
            break;
          case X.PathActions.ARC:
            var A = a[0],
              S = a[1],
              M = a[2],
              T = a[3],
              C = a[4],
              P = !!a[5],
              L = C - T,
              D = 2 * e;
            for (g = 1; g <= D; g++) v = g / D, P || (v = 1 - v), I = T + v * L, y = A + M * Math.cos(I), b = S + M * Math.sin(I), _.push(new X.Vector2(y, b));
            break;
          case X.PathActions.ELLIPSE:
            A = a[0], S = a[1];
            var I, R = a[2],
              O = a[3];
            T = a[4], C = a[5], P = !!a[6], L = C - T, D = 2 * e;
            for (g = 1; g <= D; g++) v = g / D, P || (v = 1 - v), I = T + v * L, y = A + R * Math.cos(I), b = S + O * Math.sin(I), _.push(new X.Vector2(y, b))
        }
        var k = _[_.length - 1];
        return Math.abs(k.x - _[0].x) < 1e-10 && Math.abs(k.y - _[0].y) < 1e-10 && _.splice(_.length - 1, 1), t && _.push(_[0]), _
      }, X.Path.prototype.toShapes = function (e, t) {
        function n(e) {
          for (var t = [], n = 0, i = e.length; n < i; n++) {
            var r = e[n],
              o = new X.Shape;
            o.actions = r.actions, o.curves = r.curves, t.push(o)
          }
          return t
        }

        function i(e, t) {
          for (var n = t.length, i = !1, r = n - 1, o = 0; o < n; r = o++) {
            var a = t[r],
              s = t[o],
              l = s.x - a.x,
              c = s.y - a.y;
            if (Math.abs(c) > 1e-10) {
              if (c < 0 && (a = t[o], l = -l, s = t[r], c = -c), e.y < a.y || e.y > s.y) continue;
              if (e.y == a.y) {
                if (e.x == a.x) return !0
              } else {
                var u = c * (e.x - a.x) - l * (e.y - a.y);
                if (0 == u) return !0;
                if (u < 0) continue;
                i = !i
              }
            } else {
              if (e.y != a.y) continue;
              if (s.x <= e.x && e.x <= a.x || a.x <= e.x && e.x <= s.x) return !0
            }
          }
          return i
        }
        var r = function (e) {
          var t, n, i, r, o, a = [],
            s = new X.Path;
          for (t = 0, n = e.length; t < n; t++) o = (i = e[t]).args, (r = i.action) == X.PathActions.MOVE_TO && 0 != s.actions.length && (a.push(s), s = new X.Path), s[r].apply(s, o);
          return 0 != s.actions.length && a.push(s), a
        }(this.actions);
        if (0 == r.length) return [];
        if (!0 === t) return n(r);
        var o, a, s, l = [];
        if (1 == r.length) return a = r[0], (s = new X.Shape).actions = a.actions, s.curves = a.curves, l.push(s), l;
        var c = !X.Shape.Utils.isClockWise(r[0].getPoints());
        c = e ? !c : c;
        var u, h, d, f, p, m, g = [],
          v = [],
          y = [],
          b = 0;
        for (v[b] = void 0, y[b] = [], h = 0, d = r.length; h < d; h++) u = (a = r[h]).getPoints(), o = X.Shape.Utils.isClockWise(u), (o = e ? !o : o) ? (!c && v[b] && b++, v[b] = {
          s: new X.Shape,
          p: u
        }, v[b].s.actions = a.actions, v[b].s.curves = a.curves, c && b++, y[b] = []) : y[b].push({
          h: a,
          p: u[0]
        });
        if (!v[0]) return n(r);
        if (v.length > 1) {
          for (var _ = !1, x = [], w = 0, E = v.length; w < E; w++) g[w] = [];
          for (w = 0, E = v.length; w < E; w++)
            for (var A = y[w], S = 0; S < A.length; S++) {
              for (var M = A[S], T = !0, C = 0; C < v.length; C++) i(M.p, v[C].p) && (w != C && x.push({
                froms: w,
                tos: C,
                hole: S
              }), T ? (T = !1, g[C].push(M)) : _ = !0);
              T && g[w].push(M)
            }
          x.length > 0 && (_ || (y = g))
        }
        for (h = 0, d = v.length; h < d; h++)
          for (s = v[h].s, l.push(s), p = 0, m = (f = y[h]).length; p < m; p++) s.holes.push(f[p].h);
        return l
      }, X.Shape = function () {
        X.Path.apply(this, arguments), this.holes = []
      }, X.Shape.prototype = Object.create(X.Path.prototype), X.Shape.prototype.constructor = X.Shape, X.Shape.prototype.extrude = function (e) {
        return new X.ExtrudeGeometry(this, e)
      }, X.Shape.prototype.makeGeometry = function (e) {
        return new X.ShapeGeometry(this, e)
      }, X.Shape.prototype.getPointsHoles = function (e) {
        var t, n = this.holes.length,
          i = [];
        for (t = 0; t < n; t++) i[t] = this.holes[t].getTransformedPoints(e, this.bends);
        return i
      }, X.Shape.prototype.getSpacedPointsHoles = function (e) {
        var t, n = this.holes.length,
          i = [];
        for (t = 0; t < n; t++) i[t] = this.holes[t].getTransformedSpacedPoints(e, this.bends);
        return i
      }, X.Shape.prototype.extractAllPoints = function (e) {
        return {
          shape: this.getTransformedPoints(e),
          holes: this.getPointsHoles(e)
        }
      }, X.Shape.prototype.extractPoints = function (e) {
        return this.useSpacedPoints ? this.extractAllSpacedPoints(e) : this.extractAllPoints(e)
      }, X.Shape.prototype.extractAllSpacedPoints = function (e) {
        return {
          shape: this.getTransformedSpacedPoints(e),
          holes: this.getSpacedPointsHoles(e)
        }
      }, X.Shape.Utils = {
        triangulateShape: function (e, t) {
          function n(e, t, n) {
            return e.x != t.x ? e.x < t.x ? e.x <= n.x && n.x <= t.x : t.x <= n.x && n.x <= e.x : e.y < t.y ? e.y <= n.y && n.y <= t.y : t.y <= n.y && n.y <= e.y
          }

          function i(e, t, i, r, o) {
            var a = t.x - e.x,
              s = t.y - e.y,
              l = r.x - i.x,
              c = r.y - i.y,
              u = e.x - i.x,
              h = e.y - i.y,
              d = s * l - a * c,
              f = s * u - a * h;
            if (Math.abs(d) > 1e-10) {
              var p;
              if (d > 0) {
                if (f < 0 || f > d) return [];
                if ((p = c * u - l * h) < 0 || p > d) return []
              } else {
                if (f > 0 || f < d) return [];
                if ((p = c * u - l * h) > 0 || p < d) return []
              }
              if (0 == p) return !o || 0 != f && f != d ? [e] : [];
              if (p == d) return !o || 0 != f && f != d ? [t] : [];
              if (0 == f) return [i];
              if (f == d) return [r];
              var m = p / d;
              return [{
                x: e.x + m * a,
                y: e.y + m * s
              }]
            }
            if (0 != f || c * u != l * h) return [];
            var g, v, y, b, _, x, w, E, A = 0 == a && 0 == s,
              S = 0 == l && 0 == c;
            return A && S ? e.x != i.x || e.y != i.y ? [] : [e] : A ? n(i, r, e) ? [e] : [] : S ? n(e, t, i) ? [i] : [] : (0 != a ? (e.x < t.x ? (g = e, y = e.x, v = t, b = t.x) : (g = t, y = t.x, v = e, b = e.x), i.x < r.x ? (_ = i, w = i.x, x = r, E = r.x) : (_ = r, w = r.x, x = i, E = i.x)) : (e.y < t.y ? (g = e, y = e.y, v = t, b = t.y) : (g = t, y = t.y, v = e, b = e.y), i.y < r.y ? (_ = i, w = i.y, x = r, E = r.y) : (_ = r, w = r.y, x = i, E = i.y)), y <= w ? b < w ? [] : b == w ? o ? [] : [_] : b <= E ? [_, v] : [_, x] : y > E ? [] : y == E ? o ? [] : [g] : b <= E ? [g, v] : [g, x])
          }

          function r(e, t, n, i) {
            var r = t.x - e.x,
              o = t.y - e.y,
              a = n.x - e.x,
              s = n.y - e.y,
              l = i.x - e.x,
              c = i.y - e.y,
              u = r * s - o * a,
              h = r * c - o * l;
            if (Math.abs(u) > 1e-10) {
              var d = l * s - c * a;
              return u > 0 ? h >= 0 && d >= 0 : h >= 0 || d >= 0
            }
            return h > 0
          }
          for (var o, a, s, l, c, u, h = {}, d = e.concat(), f = 0, p = t.length; f < p; f++) Array.prototype.push.apply(d, t[f]);
          for (o = 0, a = d.length; o < a; o++) void 0 !== h[c = d[o].x + ":" + d[o].y] && X.warn("THREE.Shape: Duplicate point", c), h[c] = o;
          var m = function (e, t) {
              var n, o = e.concat();

              function a(e, t) {
                var i = o.length - 1,
                  a = e - 1;
                a < 0 && (a = i);
                var s = e + 1;
                s > i && (s = 0);
                var l = r(o[e], o[a], o[s], n[t]);
                if (!l) return !1;
                var c = n.length - 1,
                  u = t - 1;
                u < 0 && (u = c);
                var h = t + 1;
                return h > c && (h = 0), !!(l = r(n[t], n[u], n[h], o[e]))
              }

              function s(e, t) {
                var n, r;
                for (n = 0; n < o.length; n++)
                  if (r = n + 1, r %= o.length, i(e, t, o[n], o[r], !0).length > 0) return !0;
                return !1
              }
              var l = [];

              function c(e, n) {
                var r, o, a, s;
                for (r = 0; r < l.length; r++)
                  for (o = t[l[r]], a = 0; a < o.length; a++)
                    if (s = a + 1, s %= o.length, i(e, n, o[a], o[s], !0).length > 0) return !0;
                return !1
              }
              for (var u, h, d, f, p, m, g, v, y, b, _ = [], x = 0, w = t.length; x < w; x++) l.push(x);
              for (var E = 0, A = 2 * l.length; l.length > 0;) {
                if (--A < 0) {
                  console.log("Infinite Loop! Holes left:" + l.length + ", Probably Hole outside Shape!");
                  break
                }
                for (h = E; h < o.length; h++) {
                  d = o[h], u = -1;
                  for (x = 0; x < l.length; x++)
                    if (p = l[x], void 0 === _[m = d.x + ":" + d.y + ":" + p]) {
                      n = t[p];
                      for (var S = 0; S < n.length; S++)
                        if (f = n[S], a(h, S) && !s(d, f) && !c(d, f)) {
                          u = S, l.splice(x, 1), g = o.slice(0, h + 1), v = o.slice(h), y = n.slice(u), b = n.slice(0, u + 1), o = g.concat(y).concat(b).concat(v), E = h;
                          break
                        } if (u >= 0) break;
                      _[m] = !0
                    } if (u >= 0) break
                }
              }
              return o
            }(e, t),
            g = X.FontUtils.Triangulate(m, !1);
          for (o = 0, a = g.length; o < a; o++)
            for (l = g[o], s = 0; s < 3; s++) void 0 !== (u = h[c = l[s].x + ":" + l[s].y]) && (l[s] = u);
          return g.concat()
        },
        isClockWise: function (e) {
          return X.FontUtils.Triangulate.area(e) < 0
        },
        b2p0: function (e, t) {
          var n = 1 - e;
          return n * n * t
        },
        b2p1: function (e, t) {
          return 2 * (1 - e) * e * t
        },
        b2p2: function (e, t) {
          return e * e * t
        },
        b2: function (e, t, n, i) {
          return this.b2p0(e, t) + this.b2p1(e, n) + this.b2p2(e, i)
        },
        b3p0: function (e, t) {
          var n = 1 - e;
          return n * n * n * t
        },
        b3p1: function (e, t) {
          var n = 1 - e;
          return 3 * n * n * e * t
        },
        b3p2: function (e, t) {
          return 3 * (1 - e) * e * e * t
        },
        b3p3: function (e, t) {
          return e * e * e * t
        },
        b3: function (e, t, n, i, r) {
          return this.b3p0(e, t) + this.b3p1(e, n) + this.b3p2(e, i) + this.b3p3(e, r)
        }
      }, X.LineCurve = function (e, t) {
        this.v1 = e, this.v2 = t
      }, X.LineCurve.prototype = Object.create(X.Curve.prototype), X.LineCurve.prototype.constructor = X.LineCurve, X.LineCurve.prototype.getPoint = function (e) {
        var t = this.v2.clone().sub(this.v1);
        return t.multiplyScalar(e).add(this.v1), t
      }, X.LineCurve.prototype.getPointAt = function (e) {
        return this.getPoint(e)
      }, X.LineCurve.prototype.getTangent = function (e) {
        return this.v2.clone().sub(this.v1).normalize()
      }, X.QuadraticBezierCurve = function (e, t, n) {
        this.v0 = e, this.v1 = t, this.v2 = n
      }, X.QuadraticBezierCurve.prototype = Object.create(X.Curve.prototype), X.QuadraticBezierCurve.prototype.constructor = X.QuadraticBezierCurve, X.QuadraticBezierCurve.prototype.getPoint = function (e) {
        var t = new X.Vector2;
        return t.x = X.Shape.Utils.b2(e, this.v0.x, this.v1.x, this.v2.x), t.y = X.Shape.Utils.b2(e, this.v0.y, this.v1.y, this.v2.y), t
      }, X.QuadraticBezierCurve.prototype.getTangent = function (e) {
        var t = new X.Vector2;
        return t.x = X.Curve.Utils.tangentQuadraticBezier(e, this.v0.x, this.v1.x, this.v2.x), t.y = X.Curve.Utils.tangentQuadraticBezier(e, this.v0.y, this.v1.y, this.v2.y), t.normalize()
      }, X.CubicBezierCurve = function (e, t, n, i) {
        this.v0 = e, this.v1 = t, this.v2 = n, this.v3 = i
      }, X.CubicBezierCurve.prototype = Object.create(X.Curve.prototype), X.CubicBezierCurve.prototype.constructor = X.CubicBezierCurve, X.CubicBezierCurve.prototype.getPoint = function (e) {
        var t, n;
        return t = X.Shape.Utils.b3(e, this.v0.x, this.v1.x, this.v2.x, this.v3.x), n = X.Shape.Utils.b3(e, this.v0.y, this.v1.y, this.v2.y, this.v3.y), new X.Vector2(t, n)
      }, X.CubicBezierCurve.prototype.getTangent = function (e) {
        var t, n;
        t = X.Curve.Utils.tangentCubicBezier(e, this.v0.x, this.v1.x, this.v2.x, this.v3.x), n = X.Curve.Utils.tangentCubicBezier(e, this.v0.y, this.v1.y, this.v2.y, this.v3.y);
        var i = new X.Vector2(t, n);
        return i.normalize(), i
      }, X.SplineCurve = function (e) {
        this.points = null == e ? [] : e
      }, X.SplineCurve.prototype = Object.create(X.Curve.prototype), X.SplineCurve.prototype.constructor = X.SplineCurve, X.SplineCurve.prototype.getPoint = function (e) {
        var t = this.points,
          n = (t.length - 1) * e,
          i = Math.floor(n),
          r = n - i,
          o = t[0 == i ? i : i - 1],
          a = t[i],
          s = t[i > t.length - 2 ? t.length - 1 : i + 1],
          l = t[i > t.length - 3 ? t.length - 1 : i + 2],
          c = new X.Vector2;
        return c.x = X.Curve.Utils.interpolate(o.x, a.x, s.x, l.x, r), c.y = X.Curve.Utils.interpolate(o.y, a.y, s.y, l.y, r), c
      }, X.EllipseCurve = function (e, t, n, i, r, o, a) {
        this.aX = e, this.aY = t, this.xRadius = n, this.yRadius = i, this.aStartAngle = r, this.aEndAngle = o, this.aClockwise = a
      }, X.EllipseCurve.prototype = Object.create(X.Curve.prototype), X.EllipseCurve.prototype.constructor = X.EllipseCurve, X.EllipseCurve.prototype.getPoint = function (e) {
        var t, n = this.aEndAngle - this.aStartAngle;
        n < 0 && (n += 2 * Math.PI), n > 2 * Math.PI && (n -= 2 * Math.PI), t = !0 === this.aClockwise ? this.aEndAngle + (1 - e) * (2 * Math.PI - n) : this.aStartAngle + e * n;
        var i = new X.Vector2;
        return i.x = this.aX + this.xRadius * Math.cos(t), i.y = this.aY + this.yRadius * Math.sin(t), i
      }, X.ArcCurve = function (e, t, n, i, r, o) {
        X.EllipseCurve.call(this, e, t, n, n, i, r, o)
      }, X.ArcCurve.prototype = Object.create(X.EllipseCurve.prototype), X.ArcCurve.prototype.constructor = X.ArcCurve, X.LineCurve3 = X.Curve.create((function (e, t) {
        this.v1 = e, this.v2 = t
      }), (function (e) {
        var t = new X.Vector3;
        return t.subVectors(this.v2, this.v1), t.multiplyScalar(e), t.add(this.v1), t
      })), X.QuadraticBezierCurve3 = X.Curve.create((function (e, t, n) {
        this.v0 = e, this.v1 = t, this.v2 = n
      }), (function (e) {
        var t = new X.Vector3;
        return t.x = X.Shape.Utils.b2(e, this.v0.x, this.v1.x, this.v2.x), t.y = X.Shape.Utils.b2(e, this.v0.y, this.v1.y, this.v2.y), t.z = X.Shape.Utils.b2(e, this.v0.z, this.v1.z, this.v2.z), t
      })), X.CubicBezierCurve3 = X.Curve.create((function (e, t, n, i) {
        this.v0 = e, this.v1 = t, this.v2 = n, this.v3 = i
      }), (function (e) {
        var t = new X.Vector3;
        return t.x = X.Shape.Utils.b3(e, this.v0.x, this.v1.x, this.v2.x, this.v3.x), t.y = X.Shape.Utils.b3(e, this.v0.y, this.v1.y, this.v2.y, this.v3.y), t.z = X.Shape.Utils.b3(e, this.v0.z, this.v1.z, this.v2.z, this.v3.z), t
      })), X.SplineCurve3 = X.Curve.create((function (e) {
        this.points = null == e ? [] : e
      }), (function (e) {
        var t = this.points,
          n = (t.length - 1) * e,
          i = Math.floor(n),
          r = n - i,
          o = t[0 == i ? i : i - 1],
          a = t[i],
          s = t[i > t.length - 2 ? t.length - 1 : i + 1],
          l = t[i > t.length - 3 ? t.length - 1 : i + 2],
          c = new X.Vector3;
        return c.x = X.Curve.Utils.interpolate(o.x, a.x, s.x, l.x, r), c.y = X.Curve.Utils.interpolate(o.y, a.y, s.y, l.y, r), c.z = X.Curve.Utils.interpolate(o.z, a.z, s.z, l.z, r), c
      })), X.ClosedSplineCurve3 = X.Curve.create((function (e) {
        this.points = null == e ? [] : e
      }), (function (e) {
        var t = this.points,
          n = (t.length - 0) * e,
          i = Math.floor(n),
          r = n - i,
          o = t[((i += i > 0 ? 0 : (Math.floor(Math.abs(i) / t.length) + 1) * t.length) - 1) % t.length],
          a = t[i % t.length],
          s = t[(i + 1) % t.length],
          l = t[(i + 2) % t.length],
          c = new X.Vector3;
        return c.x = X.Curve.Utils.interpolate(o.x, a.x, s.x, l.x, r), c.y = X.Curve.Utils.interpolate(o.y, a.y, s.y, l.y, r), c.z = X.Curve.Utils.interpolate(o.z, a.z, s.z, l.z, r), c
      })), X.AnimationHandler = {
        LINEAR: 0,
        CATMULLROM: 1,
        CATMULLROM_FORWARD: 2,
        add: function () {
          X.warn("THREE.AnimationHandler.add() has been deprecated.")
        },
        get: function () {
          X.warn("THREE.AnimationHandler.get() has been deprecated.")
        },
        remove: function () {
          X.warn("THREE.AnimationHandler.remove() has been deprecated.")
        },
        animations: [],
        init: function (e) {
          if (!0 === e.initialized) return e;
          for (var t = 0; t < e.hierarchy.length; t++) {
            for (var n = 0; n < e.hierarchy[t].keys.length; n++)
              if (e.hierarchy[t].keys[n].time < 0 && (e.hierarchy[t].keys[n].time = 0), void 0 !== e.hierarchy[t].keys[n].rot && !(e.hierarchy[t].keys[n].rot instanceof X.Quaternion)) {
                var i = e.hierarchy[t].keys[n].rot;
                e.hierarchy[t].keys[n].rot = (new X.Quaternion).fromArray(i)
              } if (e.hierarchy[t].keys.length && void 0 !== e.hierarchy[t].keys[0].morphTargets) {
              var r = {};
              for (n = 0; n < e.hierarchy[t].keys.length; n++)
                for (var o = 0; o < e.hierarchy[t].keys[n].morphTargets.length; o++) {
                  r[s = e.hierarchy[t].keys[n].morphTargets[o]] = -1
                }
              e.hierarchy[t].usedMorphTargets = r;
              for (n = 0; n < e.hierarchy[t].keys.length; n++) {
                var a = {};
                for (var s in r) {
                  for (o = 0; o < e.hierarchy[t].keys[n].morphTargets.length; o++)
                    if (e.hierarchy[t].keys[n].morphTargets[o] === s) {
                      a[s] = e.hierarchy[t].keys[n].morphTargetsInfluences[o];
                      break
                    } o === e.hierarchy[t].keys[n].morphTargets.length && (a[s] = 0)
                }
                e.hierarchy[t].keys[n].morphTargetsInfluences = a
              }
            }
            for (n = 1; n < e.hierarchy[t].keys.length; n++) e.hierarchy[t].keys[n].time === e.hierarchy[t].keys[n - 1].time && (e.hierarchy[t].keys.splice(n, 1), n--);
            for (n = 0; n < e.hierarchy[t].keys.length; n++) e.hierarchy[t].keys[n].index = n
          }
          return e.initialized = !0, e
        },
        parse: function (e) {
          var t = [];
          if (e instanceof X.SkinnedMesh)
            for (var n = 0; n < e.skeleton.bones.length; n++) t.push(e.skeleton.bones[n]);
          else ! function e(t, n) {
            n.push(t);
            for (var i = 0; i < t.children.length; i++) e(t.children[i], n)
          }(e, t);
          return t
        },
        play: function (e) {
          -1 === this.animations.indexOf(e) && this.animations.push(e)
        },
        stop: function (e) {
          var t = this.animations.indexOf(e); - 1 !== t && this.animations.splice(t, 1)
        },
        update: function (e) {
          for (var t = 0; t < this.animations.length; t++) this.animations[t].resetBlendWeights();
          for (t = 0; t < this.animations.length; t++) this.animations[t].update(e)
        }
      }, X.Animation = function (e, t) {
        this.root = e, this.data = X.AnimationHandler.init(t), this.hierarchy = X.AnimationHandler.parse(e), this.currentTime = 0, this.timeScale = 1, this.isPlaying = !1, this.loop = !0, this.weight = 0, this.interpolationType = X.AnimationHandler.LINEAR
      }, X.Animation.prototype = {
        constructor: X.Animation,
        keyTypes: ["pos", "rot", "scl"],
        play: function (e, t) {
          this.currentTime = void 0 !== e ? e : 0, this.weight = void 0 !== t ? t : 1, this.isPlaying = !0, this.reset(), X.AnimationHandler.play(this)
        },
        stop: function () {
          this.isPlaying = !1, X.AnimationHandler.stop(this)
        },
        reset: function () {
          for (var e = 0, t = this.hierarchy.length; e < t; e++) {
            var n = this.hierarchy[e];
            void 0 === n.animationCache && (n.animationCache = {
              animations: {},
              blending: {
                positionWeight: 0,
                quaternionWeight: 0,
                scaleWeight: 0
              }
            });
            var i = this.data.name,
              r = n.animationCache.animations,
              o = r[i];
            void 0 === o && (o = {
              prevKey: {
                pos: 0,
                rot: 0,
                scl: 0
              },
              nextKey: {
                pos: 0,
                rot: 0,
                scl: 0
              },
              originalMatrix: n.matrix
            }, r[i] = o);
            for (var a = 0; a < 3; a++) {
              for (var s = this.keyTypes[a], l = this.data.hierarchy[e].keys[0], c = this.getNextKeyWith(s, e, 1); c.time < this.currentTime && c.index > l.index;) l = c, c = this.getNextKeyWith(s, e, c.index + 1);
              o.prevKey[s] = l, o.nextKey[s] = c
            }
          }
        },
        resetBlendWeights: function () {
          for (var e = 0, t = this.hierarchy.length; e < t; e++) {
            var n = this.hierarchy[e].animationCache;
            if (void 0 !== n) {
              var i = n.blending;
              i.positionWeight = 0, i.quaternionWeight = 0, i.scaleWeight = 0
            }
          }
        },
        update: function () {
          var e = [],
            t = new X.Vector3,
            n = new X.Vector3,
            i = new X.Quaternion,
            r = function (e, t) {
              var n, i, r, a, s, l, c, u, h, d = [],
                f = [];
              return r = (n = (e.length - 1) * t) - (i = Math.floor(n)), d[0] = 0 === i ? i : i - 1, d[1] = i, d[2] = i > e.length - 2 ? i : i + 1, d[3] = i > e.length - 3 ? i : i + 2, l = e[d[0]], c = e[d[1]], u = e[d[2]], h = e[d[3]], s = r * (a = r * r), f[0] = o(l[0], c[0], u[0], h[0], r, a, s), f[1] = o(l[1], c[1], u[1], h[1], r, a, s), f[2] = o(l[2], c[2], u[2], h[2], r, a, s), f
            },
            o = function (e, t, n, i, r, o, a) {
              var s = .5 * (n - e),
                l = .5 * (i - t);
              return (2 * (t - n) + s + l) * a + (-3 * (t - n) - 2 * s - l) * o + s * r + t
            };
          return function (o) {
            if (!1 !== this.isPlaying && (this.currentTime += o * this.timeScale, 0 !== this.weight)) {
              var a = this.data.length;
              (this.currentTime > a || this.currentTime < 0) && (this.loop ? (this.currentTime %= a, this.currentTime < 0 && (this.currentTime += a), this.reset()) : this.stop());
              for (var s = 0, l = this.hierarchy.length; s < l; s++)
                for (var c = this.hierarchy[s], u = c.animationCache.animations[this.data.name], h = c.animationCache.blending, d = 0; d < 3; d++) {
                  var f = this.keyTypes[d],
                    p = u.prevKey[f],
                    m = u.nextKey[f];
                  if (this.timeScale > 0 && m.time <= this.currentTime || this.timeScale < 0 && p.time >= this.currentTime) {
                    for (p = this.data.hierarchy[s].keys[0], m = this.getNextKeyWith(f, s, 1); m.time < this.currentTime && m.index > p.index;) p = m, m = this.getNextKeyWith(f, s, m.index + 1);
                    u.prevKey[f] = p, u.nextKey[f] = m
                  }
                  var g = (this.currentTime - p.time) / (m.time - p.time),
                    v = p[f],
                    y = m[f];
                  if (g < 0 && (g = 0), g > 1 && (g = 1), "pos" === f) {
                    if (this.interpolationType === X.AnimationHandler.LINEAR) {
                      n.x = v[0] + (y[0] - v[0]) * g, n.y = v[1] + (y[1] - v[1]) * g, n.z = v[2] + (y[2] - v[2]) * g;
                      var b = this.weight / (this.weight + h.positionWeight);
                      c.position.lerp(n, b), h.positionWeight += this.weight
                    } else if (this.interpolationType === X.AnimationHandler.CATMULLROM || this.interpolationType === X.AnimationHandler.CATMULLROM_FORWARD) {
                      e[0] = this.getPrevKeyWith("pos", s, p.index - 1).pos, e[1] = v, e[2] = y, e[3] = this.getNextKeyWith("pos", s, m.index + 1).pos;
                      var _ = r(e, g = .33 * g + .33);
                      b = this.weight / (this.weight + h.positionWeight);
                      h.positionWeight += this.weight;
                      var x = c.position;
                      if (x.x = x.x + (_[0] - x.x) * b, x.y = x.y + (_[1] - x.y) * b, x.z = x.z + (_[2] - x.z) * b, this.interpolationType === X.AnimationHandler.CATMULLROM_FORWARD) {
                        var w = r(e, 1.01 * g);
                        t.set(w[0], w[1], w[2]), t.sub(x), t.y = 0, t.normalize();
                        var E = Math.atan2(t.x, t.z);
                        c.rotation.set(0, E, 0)
                      }
                    }
                  } else if ("rot" === f)
                    if (X.Quaternion.slerp(v, y, i, g), 0 === h.quaternionWeight) c.quaternion.copy(i), h.quaternionWeight = this.weight;
                    else {
                      b = this.weight / (this.weight + h.quaternionWeight);
                      X.Quaternion.slerp(c.quaternion, i, c.quaternion, b), h.quaternionWeight += this.weight
                    }
                  else if ("scl" === f) {
                    n.x = v[0] + (y[0] - v[0]) * g, n.y = v[1] + (y[1] - v[1]) * g, n.z = v[2] + (y[2] - v[2]) * g;
                    b = this.weight / (this.weight + h.scaleWeight);
                    c.scale.lerp(n, b), h.scaleWeight += this.weight
                  }
                }
              return !0
            }
          }
        }(),
        getNextKeyWith: function (e, t, n) {
          var i = this.data.hierarchy[t].keys;
          for (this.interpolationType === X.AnimationHandler.CATMULLROM || this.interpolationType === X.AnimationHandler.CATMULLROM_FORWARD ? n = n < i.length - 1 ? n : i.length - 1 : n %= i.length; n < i.length; n++)
            if (void 0 !== i[n][e]) return i[n];
          return this.data.hierarchy[t].keys[0]
        },
        getPrevKeyWith: function (e, t, n) {
          var i = this.data.hierarchy[t].keys;
          for (n = this.interpolationType === X.AnimationHandler.CATMULLROM || this.interpolationType === X.AnimationHandler.CATMULLROM_FORWARD ? n > 0 ? n : 0 : n >= 0 ? n : n + i.length; n >= 0; n--)
            if (void 0 !== i[n][e]) return i[n];
          return this.data.hierarchy[t].keys[i.length - 1]
        }
      }, X.KeyFrameAnimation = function (e) {
        this.root = e.node, this.data = X.AnimationHandler.init(e), this.hierarchy = X.AnimationHandler.parse(this.root), this.currentTime = 0, this.timeScale = .001, this.isPlaying = !1, this.isPaused = !0, this.loop = !0;
        for (var t = 0, n = this.hierarchy.length; t < n; t++) {
          var i = this.data.hierarchy[t].keys,
            r = this.data.hierarchy[t].sids,
            o = this.hierarchy[t];
          if (i.length && r) {
            for (var a = 0; a < r.length; a++) {
              var s = r[a],
                l = this.getNextKeyWith(s, t, 0);
              l && l.apply(s)
            }
            o.matrixAutoUpdate = !1, this.data.hierarchy[t].node.updateMatrix(), o.matrixWorldNeedsUpdate = !0
          }
        }
      }, X.KeyFrameAnimation.prototype = {
        constructor: X.KeyFrameAnimation,
        play: function (e) {
          if (this.currentTime = void 0 !== e ? e : 0, !1 === this.isPlaying) {
            this.isPlaying = !0;
            var t, n, i, r = this.hierarchy.length;
            for (t = 0; t < r; t++) {
              n = this.hierarchy[t], void 0 === (i = this.data.hierarchy[t]).animationCache && (i.animationCache = {}, i.animationCache.prevKey = null, i.animationCache.nextKey = null, i.animationCache.originalMatrix = n.matrix);
              var o = this.data.hierarchy[t].keys;
              o.length && (i.animationCache.prevKey = o[0], i.animationCache.nextKey = o[1], this.startTime = Math.min(o[0].time, this.startTime), this.endTime = Math.max(o[o.length - 1].time, this.endTime))
            }
            this.update(0)
          }
          this.isPaused = !1, X.AnimationHandler.play(this)
        },
        stop: function () {
          this.isPlaying = !1, this.isPaused = !1, X.AnimationHandler.stop(this);
          for (var e = 0; e < this.data.hierarchy.length; e++) {
            var t = this.hierarchy[e],
              n = this.data.hierarchy[e];
            if (void 0 !== n.animationCache) {
              var i = n.animationCache.originalMatrix;
              i.copy(t.matrix), t.matrix = i, delete n.animationCache
            }
          }
        },
        update: function (e) {
          if (!1 !== this.isPlaying) {
            this.currentTime += e * this.timeScale;
            var t = this.data.length;
            !0 === this.loop && this.currentTime > t && (this.currentTime %= t), this.currentTime = Math.min(this.currentTime, t);
            for (var n = 0, i = this.hierarchy.length; n < i; n++) {
              var r = this.hierarchy[n],
                o = this.data.hierarchy[n],
                a = o.keys,
                s = o.animationCache;
              if (a.length) {
                var l = s.prevKey,
                  c = s.nextKey;
                if (c.time <= this.currentTime) {
                  for (; c.time < this.currentTime && c.index > l.index;) c = a[(l = c).index + 1];
                  s.prevKey = l, s.nextKey = c
                }
                c.time >= this.currentTime ? l.interpolate(c, this.currentTime) : l.interpolate(c, c.time), this.data.hierarchy[n].node.updateMatrix(), r.matrixWorldNeedsUpdate = !0
              }
            }
          }
        },
        getNextKeyWith: function (e, t, n) {
          var i = this.data.hierarchy[t].keys;
          for (n %= i.length; n < i.length; n++)
            if (i[n].hasTarget(e)) return i[n];
          return i[0]
        },
        getPrevKeyWith: function (e, t, n) {
          var i = this.data.hierarchy[t].keys;
          for (n = n >= 0 ? n : n + i.length; n >= 0; n--)
            if (i[n].hasTarget(e)) return i[n];
          return i[i.length - 1]
        }
      }, X.MorphAnimation = function (e) {
        this.mesh = e, this.frames = e.morphTargetInfluences.length, this.currentTime = 0, this.duration = 1e3, this.loop = !0, this.lastFrame = 0, this.currentFrame = 0, this.isPlaying = !1
      }, X.MorphAnimation.prototype = {
        constructor: X.MorphAnimation,
        play: function () {
          this.isPlaying = !0
        },
        pause: function () {
          this.isPlaying = !1
        },
        update: function (e) {
          if (!1 !== this.isPlaying) {
            this.currentTime += e, !0 === this.loop && this.currentTime > this.duration && (this.currentTime %= this.duration), this.currentTime = Math.min(this.currentTime, this.duration);
            var t = this.duration / this.frames,
              n = Math.floor(this.currentTime / t),
              i = this.mesh.morphTargetInfluences;
            n != this.currentFrame && (i[this.lastFrame] = 0, i[this.currentFrame] = 1, i[n] = 0, this.lastFrame = this.currentFrame, this.currentFrame = n), i[n] = this.currentTime % t / t, i[this.lastFrame] = 1 - i[n]
          }
        }
      }, X.BoxGeometry = function (e, t, n, i, r, o) {
        X.Geometry.call(this), this.type = "BoxGeometry", this.parameters = {
          width: e,
          height: t,
          depth: n,
          widthSegments: i,
          heightSegments: r,
          depthSegments: o
        }, this.widthSegments = i || 1, this.heightSegments = r || 1, this.depthSegments = o || 1;
        var a = this,
          s = e / 2,
          l = t / 2,
          c = n / 2;

        function u(e, t, n, i, r, o, s, l) {
          var c, u, h, d = a.widthSegments,
            f = a.heightSegments,
            p = r / 2,
            m = o / 2,
            g = a.vertices.length;
          "x" === e && "y" === t || "y" === e && "x" === t ? c = "z" : "x" === e && "z" === t || "z" === e && "x" === t ? (c = "y", f = a.depthSegments) : ("z" === e && "y" === t || "y" === e && "z" === t) && (c = "x", d = a.depthSegments);
          var v = d + 1,
            y = f + 1,
            b = r / d,
            _ = o / f,
            x = new X.Vector3;
          for (x[c] = s > 0 ? 1 : -1, h = 0; h < y; h++)
            for (u = 0; u < v; u++) {
              var w = new X.Vector3;
              w[e] = (u * b - p) * n, w[t] = (h * _ - m) * i, w[c] = s, a.vertices.push(w)
            }
          for (h = 0; h < f; h++)
            for (u = 0; u < d; u++) {
              var E = u + v * h,
                A = u + v * (h + 1),
                S = u + 1 + v * (h + 1),
                M = u + 1 + v * h,
                T = new X.Vector2(u / d, 1 - h / f),
                C = new X.Vector2(u / d, 1 - (h + 1) / f),
                P = new X.Vector2((u + 1) / d, 1 - (h + 1) / f),
                L = new X.Vector2((u + 1) / d, 1 - h / f),
                D = new X.Face3(E + g, A + g, M + g);
              D.normal.copy(x), D.vertexNormals.push(x.clone(), x.clone(), x.clone()), D.materialIndex = l, a.faces.push(D), a.faceVertexUvs[0].push([T, C, L]), (D = new X.Face3(A + g, S + g, M + g)).normal.copy(x), D.vertexNormals.push(x.clone(), x.clone(), x.clone()), D.materialIndex = l, a.faces.push(D), a.faceVertexUvs[0].push([C.clone(), P, L.clone()])
            }
        }
        u("z", "y", -1, -1, n, t, s, 0), u("z", "y", 1, -1, n, t, -s, 1), u("x", "z", 1, 1, e, n, l, 2), u("x", "z", 1, -1, e, n, -l, 3), u("x", "y", 1, -1, e, t, c, 4), u("x", "y", -1, -1, e, t, -c, 5), this.mergeVertices()
      }, X.BoxGeometry.prototype = Object.create(X.Geometry.prototype), X.BoxGeometry.prototype.constructor = X.BoxGeometry, X.CircleGeometry = function (e, t, n, i) {
        X.Geometry.call(this), this.type = "CircleGeometry", this.parameters = {
          radius: e,
          segments: t,
          thetaStart: n,
          thetaLength: i
        }, e = e || 50, t = void 0 !== t ? Math.max(3, t) : 8, n = void 0 !== n ? n : 0, i = void 0 !== i ? i : 2 * Math.PI;
        var r, o = [],
          a = new X.Vector3,
          s = new X.Vector2(.5, .5);
        for (this.vertices.push(a), o.push(s), r = 0; r <= t; r++) {
          var l = new X.Vector3,
            c = n + r / t * i;
          l.x = e * Math.cos(c), l.y = e * Math.sin(c), this.vertices.push(l), o.push(new X.Vector2((l.x / e + 1) / 2, (l.y / e + 1) / 2))
        }
        var u = new X.Vector3(0, 0, 1);
        for (r = 1; r <= t; r++) this.faces.push(new X.Face3(r, r + 1, 0, [u.clone(), u.clone(), u.clone()])), this.faceVertexUvs[0].push([o[r].clone(), o[r + 1].clone(), s.clone()]);
        this.computeFaceNormals(), this.boundingSphere = new X.Sphere(new X.Vector3, e)
      }, X.CircleGeometry.prototype = Object.create(X.Geometry.prototype), X.CircleGeometry.prototype.constructor = X.CircleGeometry, X.CubeGeometry = function (e, t, n, i, r, o) {
        return X.warn("THREE.CubeGeometry has been renamed to THREE.BoxGeometry."), new X.BoxGeometry(e, t, n, i, r, o)
      }, X.CylinderGeometry = function (e, t, n, i, r, o, a, s) {
        X.Geometry.call(this), this.type = "CylinderGeometry", this.parameters = {
          radiusTop: e,
          radiusBottom: t,
          height: n,
          radialSegments: i,
          heightSegments: r,
          openEnded: o,
          thetaStart: a,
          thetaLength: s
        }, e = void 0 !== e ? e : 20, t = void 0 !== t ? t : 20, n = void 0 !== n ? n : 100, i = i || 8, r = r || 1, o = void 0 !== o && o, a = void 0 !== a ? a : 0, s = void 0 !== s ? s : 2 * Math.PI;
        var l, c, u = n / 2,
          h = [],
          d = [];
        for (c = 0; c <= r; c++) {
          var f = [],
            p = [],
            m = c / r,
            g = m * (t - e) + e;
          for (l = 0; l <= i; l++) {
            var v = l / i,
              y = new X.Vector3;
            y.x = g * Math.sin(v * s + a), y.y = -m * n + u, y.z = g * Math.cos(v * s + a), this.vertices.push(y), f.push(this.vertices.length - 1), p.push(new X.Vector2(v, 1 - m))
          }
          h.push(f), d.push(p)
        }
        var b, _, x = (t - e) / n;
        for (l = 0; l < i; l++)
          for (0 !== e ? (b = this.vertices[h[0][l]].clone(), _ = this.vertices[h[0][l + 1]].clone()) : (b = this.vertices[h[1][l]].clone(), _ = this.vertices[h[1][l + 1]].clone()), b.setY(Math.sqrt(b.x * b.x + b.z * b.z) * x).normalize(), _.setY(Math.sqrt(_.x * _.x + _.z * _.z) * x).normalize(), c = 0; c < r; c++) {
            var w = h[c][l],
              E = h[c + 1][l],
              A = h[c + 1][l + 1],
              S = h[c][l + 1],
              M = b.clone(),
              T = b.clone(),
              C = _.clone(),
              P = _.clone(),
              L = d[c][l].clone(),
              D = d[c + 1][l].clone(),
              I = d[c + 1][l + 1].clone(),
              R = d[c][l + 1].clone();
            this.faces.push(new X.Face3(w, E, S, [M, T, P])), this.faceVertexUvs[0].push([L, D, R]), this.faces.push(new X.Face3(E, A, S, [T.clone(), C, P.clone()])), this.faceVertexUvs[0].push([D.clone(), I, R.clone()])
          }
        if (!1 === o && e > 0)
          for (this.vertices.push(new X.Vector3(0, u, 0)), l = 0; l < i; l++) {
            w = h[0][l], E = h[0][l + 1], A = this.vertices.length - 1, M = new X.Vector3(0, 1, 0), T = new X.Vector3(0, 1, 0), C = new X.Vector3(0, 1, 0), L = d[0][l].clone(), D = d[0][l + 1].clone(), I = new X.Vector2(D.x, 0);
            this.faces.push(new X.Face3(w, E, A, [M, T, C])), this.faceVertexUvs[0].push([L, D, I])
          }
        if (!1 === o && t > 0)
          for (this.vertices.push(new X.Vector3(0, -u, 0)), l = 0; l < i; l++) {
            w = h[r][l + 1], E = h[r][l], A = this.vertices.length - 1, M = new X.Vector3(0, -1, 0), T = new X.Vector3(0, -1, 0), C = new X.Vector3(0, -1, 0), L = d[r][l + 1].clone(), D = d[r][l].clone(), I = new X.Vector2(D.x, 1);
            this.faces.push(new X.Face3(w, E, A, [M, T, C])), this.faceVertexUvs[0].push([L, D, I])
          }
        this.computeFaceNormals()
      }, X.CylinderGeometry.prototype = Object.create(X.Geometry.prototype), X.CylinderGeometry.prototype.constructor = X.CylinderGeometry, X.ExtrudeGeometry = function (e, t) {
        void 0 !== e ? (X.Geometry.call(this), this.type = "ExtrudeGeometry", e = e instanceof Array ? e : [e], this.addShapeList(e, t), this.computeFaceNormals()) : e = []
      }, X.ExtrudeGeometry.prototype = Object.create(X.Geometry.prototype), X.ExtrudeGeometry.prototype.constructor = X.ExtrudeGeometry, X.ExtrudeGeometry.prototype.addShapeList = function (e, t) {
        for (var n = e.length, i = 0; i < n; i++) {
          var r = e[i];
          this.addShape(r, t)
        }
      }, X.ExtrudeGeometry.prototype.addShape = function (e, t) {
        var n, i, r, o, a, s, l, c, u = void 0 !== t.amount ? t.amount : 100,
          h = void 0 !== t.bevelThickness ? t.bevelThickness : 6,
          d = void 0 !== t.bevelSize ? t.bevelSize : h - 2,
          f = void 0 !== t.bevelSegments ? t.bevelSegments : 3,
          p = void 0 === t.bevelEnabled || t.bevelEnabled,
          m = void 0 !== t.curveSegments ? t.curveSegments : 12,
          g = void 0 !== t.steps ? t.steps : 1,
          v = t.extrudePath,
          y = !1,
          b = t.material,
          _ = t.extrudeMaterial,
          x = void 0 !== t.UVGenerator ? t.UVGenerator : X.ExtrudeGeometry.WorldUVGenerator;
        v && (n = v.getSpacedPoints(g), y = !0, p = !1, i = void 0 !== t.frames ? t.frames : new X.TubeGeometry.FrenetFrames(v, g, !1), r = new X.Vector3, o = new X.Vector3, a = new X.Vector3), p || (f = 0, h = 0, d = 0);
        var w = this,
          E = this.vertices.length,
          A = e.extractPoints(m),
          S = A.shape,
          M = A.holes,
          T = !X.Shape.Utils.isClockWise(S);
        if (T) {
          for (S = S.reverse(), l = 0, c = M.length; l < c; l++) s = M[l], X.Shape.Utils.isClockWise(s) && (M[l] = s.reverse());
          T = !1
        }
        var C = X.Shape.Utils.triangulateShape(S, M),
          P = S;
        for (l = 0, c = M.length; l < c; l++) s = M[l], S = S.concat(s);

        function L(e, t, n) {
          return t || X.error("THREE.ExtrudeGeometry: vec does not exist"), t.clone().multiplyScalar(n).add(e)
        }
        var D, I, R, O, k, N, F = S.length,
          U = C.length;

        function V(e, t, n) {
          var i, r, o = 1,
            a = e.x - t.x,
            s = e.y - t.y,
            l = n.x - e.x,
            c = n.y - e.y,
            u = a * a + s * s,
            h = a * c - s * l;
          if (Math.abs(h) > 1e-10) {
            var d = Math.sqrt(u),
              f = Math.sqrt(l * l + c * c),
              p = t.x - s / d,
              m = t.y + a / d,
              g = ((n.x - c / f - p) * c - (n.y + l / f - m) * l) / (a * c - s * l),
              v = (i = p + a * g - e.x) * i + (r = m + s * g - e.y) * r;
            if (v <= 2) return new X.Vector2(i, r);
            o = Math.sqrt(v / 2)
          } else {
            var y = !1;
            a > 1e-10 ? l > 1e-10 && (y = !0) : a < -1e-10 ? l < -1e-10 && (y = !0) : Math.sign(s) == Math.sign(c) && (y = !0), y ? (i = -s, r = a, o = Math.sqrt(u)) : (i = a, r = s, o = Math.sqrt(u / 2))
          }
          return new X.Vector2(i / o, r / o)
        }
        for (var B = [], z = 0, G = P.length, H = G - 1, W = z + 1; z < G; z++, H++, W++) H === G && (H = 0), W === G && (W = 0), B[z] = V(P[z], P[H], P[W]);
        var j, q, Y = [],
          K = B.concat();
        for (l = 0, c = M.length; l < c; l++) {
          for (s = M[l], j = [], z = 0, H = (G = s.length) - 1, W = z + 1; z < G; z++, H++, W++) H === G && (H = 0), W === G && (W = 0), j[z] = V(s[z], s[H], s[W]);
          Y.push(j), K = K.concat(j)
        }
        for (D = 0; D < f; D++) {
          for (O = h * (1 - (R = D / f)), I = d * Math.sin(R * Math.PI / 2), z = 0, G = P.length; z < G; z++) Z((k = L(P[z], B[z], I)).x, k.y, -O);
          for (l = 0, c = M.length; l < c; l++)
            for (s = M[l], j = Y[l], z = 0, G = s.length; z < G; z++) Z((k = L(s[z], j[z], I)).x, k.y, -O)
        }
        for (I = d, z = 0; z < F; z++) k = p ? L(S[z], K[z], I) : S[z], y ? (o.copy(i.normals[0]).multiplyScalar(k.x), r.copy(i.binormals[0]).multiplyScalar(k.y), a.copy(n[0]).add(o).add(r), Z(a.x, a.y, a.z)) : Z(k.x, k.y, 0);
        for (q = 1; q <= g; q++)
          for (z = 0; z < F; z++) k = p ? L(S[z], K[z], I) : S[z], y ? (o.copy(i.normals[q]).multiplyScalar(k.x), r.copy(i.binormals[q]).multiplyScalar(k.y), a.copy(n[q]).add(o).add(r), Z(a.x, a.y, a.z)) : Z(k.x, k.y, u / g * q);
        for (D = f - 1; D >= 0; D--) {
          for (O = h * (1 - (R = D / f)), I = d * Math.sin(R * Math.PI / 2), z = 0, G = P.length; z < G; z++) Z((k = L(P[z], B[z], I)).x, k.y, u + O);
          for (l = 0, c = M.length; l < c; l++)
            for (s = M[l], j = Y[l], z = 0, G = s.length; z < G; z++) k = L(s[z], j[z], I), y ? Z(k.x, k.y + n[g - 1].y, n[g - 1].x + O) : Z(k.x, k.y, u + O)
        }

        function Q(e, t) {
          var n, i;
          for (z = e.length; --z >= 0;) {
            n = z, (i = z - 1) < 0 && (i = e.length - 1);
            var r = 0,
              o = g + 2 * f;
            for (r = 0; r < o; r++) {
              var a = F * r,
                s = F * (r + 1);
              $(t + n + a, t + i + a, t + i + s, t + n + s, e, r, o, n, i)
            }
          }
        }

        function Z(e, t, n) {
          w.vertices.push(new X.Vector3(e, t, n))
        }

        function J(e, t, n) {
          e += E, t += E, n += E, w.faces.push(new X.Face3(e, t, n, null, null, b));
          var i = x.generateTopUV(w, e, t, n);
          w.faceVertexUvs[0].push(i)
        }

        function $(e, t, n, i, r, o, a, s, l) {
          e += E, t += E, n += E, i += E, w.faces.push(new X.Face3(e, t, i, null, null, _)), w.faces.push(new X.Face3(t, n, i, null, null, _));
          var c = x.generateSideWallUV(w, e, t, n, i);
          w.faceVertexUvs[0].push([c[0], c[1], c[3]]), w.faceVertexUvs[0].push([c[1], c[2], c[3]])
        }! function () {
          if (p) {
            var e = 0,
              t = F * e;
            for (z = 0; z < U; z++) J((N = C[z])[2] + t, N[1] + t, N[0] + t);
            for (t = F * (e = g + 2 * f), z = 0; z < U; z++) J((N = C[z])[0] + t, N[1] + t, N[2] + t)
          } else {
            for (z = 0; z < U; z++) J((N = C[z])[2], N[1], N[0]);
            for (z = 0; z < U; z++) J((N = C[z])[0] + F * g, N[1] + F * g, N[2] + F * g)
          }
        }(),
        function () {
          var e = 0;
          for (Q(P, e), e += P.length, l = 0, c = M.length; l < c; l++) Q(s = M[l], e), e += s.length
        }()
      }, X.ExtrudeGeometry.WorldUVGenerator = {
        generateTopUV: function (e, t, n, i) {
          var r = e.vertices,
            o = r[t],
            a = r[n],
            s = r[i];
          return [new X.Vector2(o.x, o.y), new X.Vector2(a.x, a.y), new X.Vector2(s.x, s.y)]
        },
        generateSideWallUV: function (e, t, n, i, r) {
          var o = e.vertices,
            a = o[t],
            s = o[n],
            l = o[i],
            c = o[r];
          return Math.abs(a.y - s.y) < .01 ? [new X.Vector2(a.x, 1 - a.z), new X.Vector2(s.x, 1 - s.z), new X.Vector2(l.x, 1 - l.z), new X.Vector2(c.x, 1 - c.z)] : [new X.Vector2(a.y, 1 - a.z), new X.Vector2(s.y, 1 - s.z), new X.Vector2(l.y, 1 - l.z), new X.Vector2(c.y, 1 - c.z)]
        }
      }, X.ShapeGeometry = function (e, t) {
        X.Geometry.call(this), this.type = "ShapeGeometry", e instanceof Array == !1 && (e = [e]), this.addShapeList(e, t), this.computeFaceNormals()
      }, X.ShapeGeometry.prototype = Object.create(X.Geometry.prototype), X.ShapeGeometry.prototype.constructor = X.ShapeGeometry, X.ShapeGeometry.prototype.addShapeList = function (e, t) {
        for (var n = 0, i = e.length; n < i; n++) this.addShape(e[n], t);
        return this
      }, X.ShapeGeometry.prototype.addShape = function (e, t) {
        void 0 === t && (t = {});
        var n, i, r, o = void 0 !== t.curveSegments ? t.curveSegments : 12,
          a = t.material,
          s = void 0 === t.UVGenerator ? X.ExtrudeGeometry.WorldUVGenerator : t.UVGenerator,
          l = this.vertices.length,
          c = e.extractPoints(o),
          u = c.shape,
          h = c.holes,
          d = !X.Shape.Utils.isClockWise(u);
        if (d) {
          for (u = u.reverse(), n = 0, i = h.length; n < i; n++) r = h[n], X.Shape.Utils.isClockWise(r) && (h[n] = r.reverse());
          d = !1
        }
        var f = X.Shape.Utils.triangulateShape(u, h);
        for (n = 0, i = h.length; n < i; n++) r = h[n], u = u.concat(r);
        var p, m, g = u.length,
          v = f.length;
        for (n = 0; n < g; n++) p = u[n], this.vertices.push(new X.Vector3(p.x, p.y, 0));
        for (n = 0; n < v; n++) {
          var y = (m = f[n])[0] + l,
            b = m[1] + l,
            _ = m[2] + l;
          this.faces.push(new X.Face3(y, b, _, null, null, a)), this.faceVertexUvs[0].push(s.generateTopUV(this, y, b, _))
        }
      }, X.LatheGeometry = function (e, t, n, i) {
        X.Geometry.call(this), this.type = "LatheGeometry", this.parameters = {
          points: e,
          segments: t,
          phiStart: n,
          phiLength: i
        }, t = t || 12, n = n || 0, i = i || 2 * Math.PI;
        for (var r = 1 / (e.length - 1), o = 1 / t, a = 0, s = t; a <= s; a++)
          for (var l = n + a * o * i, c = Math.cos(l), u = Math.sin(l), h = 0, d = e.length; h < d; h++) {
            var f = e[h],
              p = new X.Vector3;
            p.x = c * f.x - u * f.y, p.y = u * f.x + c * f.y, p.z = f.z, this.vertices.push(p)
          }
        var m = e.length;
        for (a = 0, s = t; a < s; a++)
          for (h = 0, d = e.length - 1; h < d; h++) {
            var g = h + m * a,
              v = g,
              y = g + m,
              b = (c = g + 1 + m, g + 1),
              _ = a * o,
              x = h * r,
              w = _ + o,
              E = x + r;
            this.faces.push(new X.Face3(v, y, b)), this.faceVertexUvs[0].push([new X.Vector2(_, x), new X.Vector2(w, x), new X.Vector2(_, E)]), this.faces.push(new X.Face3(y, c, b)), this.faceVertexUvs[0].push([new X.Vector2(w, x), new X.Vector2(w, E), new X.Vector2(_, E)])
          }
        this.mergeVertices(), this.computeFaceNormals(), this.computeVertexNormals()
      }, X.LatheGeometry.prototype = Object.create(X.Geometry.prototype), X.LatheGeometry.prototype.constructor = X.LatheGeometry, X.PlaneGeometry = function (e, t, n, i) {
        console.info("THREE.PlaneGeometry: Consider using THREE.PlaneBufferGeometry for lower memory footprint."), X.Geometry.call(this), this.type = "PlaneGeometry", this.parameters = {
          width: e,
          height: t,
          widthSegments: n,
          heightSegments: i
        }, this.fromBufferGeometry(new X.PlaneBufferGeometry(e, t, n, i))
      }, X.PlaneGeometry.prototype = Object.create(X.Geometry.prototype), X.PlaneGeometry.prototype.constructor = X.PlaneGeometry, X.PlaneBufferGeometry = function (e, t, n, i) {
        X.BufferGeometry.call(this), this.type = "PlaneBufferGeometry", this.parameters = {
          width: e,
          height: t,
          widthSegments: n,
          heightSegments: i
        };
        for (var r = e / 2, o = t / 2, a = n || 1, s = i || 1, l = a + 1, c = s + 1, u = e / a, h = t / s, d = new Float32Array(l * c * 3), f = new Float32Array(l * c * 3), p = new Float32Array(l * c * 2), m = 0, g = 0, v = 0; v < c; v++)
          for (var y = v * h - o, b = 0; b < l; b++) {
            var _ = b * u - r;
            d[m] = _, d[m + 1] = -y, f[m + 2] = 1, p[g] = b / a, p[g + 1] = 1 - v / s, m += 3, g += 2
          }
        m = 0;
        var x = new(d.length / 3 > 65535 ? Uint32Array : Uint16Array)(a * s * 6);
        for (v = 0; v < s; v++)
          for (b = 0; b < a; b++) {
            var w = b + l * v,
              E = b + l * (v + 1),
              A = b + 1 + l * (v + 1),
              S = b + 1 + l * v;
            x[m] = w, x[m + 1] = E, x[m + 2] = S, x[m + 3] = E, x[m + 4] = A, x[m + 5] = S, m += 6
          }
        this.addAttribute("index", new X.BufferAttribute(x, 1)), this.addAttribute("position", new X.BufferAttribute(d, 3)), this.addAttribute("normal", new X.BufferAttribute(f, 3)), this.addAttribute("uv", new X.BufferAttribute(p, 2))
      }, X.PlaneBufferGeometry.prototype = Object.create(X.BufferGeometry.prototype), X.PlaneBufferGeometry.prototype.constructor = X.PlaneBufferGeometry, X.RingGeometry = function (e, t, n, i, r, o) {
        X.Geometry.call(this), this.type = "RingGeometry", this.parameters = {
          innerRadius: e,
          outerRadius: t,
          thetaSegments: n,
          phiSegments: i,
          thetaStart: r,
          thetaLength: o
        }, e = e || 0, t = t || 50, r = void 0 !== r ? r : 0, o = void 0 !== o ? o : 2 * Math.PI, n = void 0 !== n ? Math.max(3, n) : 8;
        var a, s, l = [],
          c = e,
          u = (t - e) / (i = void 0 !== i ? Math.max(1, i) : 8);
        for (a = 0; a < i + 1; a++) {
          for (s = 0; s < n + 1; s++) {
            var h = new X.Vector3,
              d = r + s / n * o;
            h.x = c * Math.cos(d), h.y = c * Math.sin(d), this.vertices.push(h), l.push(new X.Vector2((h.x / t + 1) / 2, (h.y / t + 1) / 2))
          }
          c += u
        }
        var f = new X.Vector3(0, 0, 1);
        for (a = 0; a < i; a++) {
          var p = a * (n + 1);
          for (s = 0; s < n; s++) {
            var m = d = s + p,
              g = d + n + 1,
              v = d + n + 2;
            this.faces.push(new X.Face3(m, g, v, [f.clone(), f.clone(), f.clone()])), this.faceVertexUvs[0].push([l[m].clone(), l[g].clone(), l[v].clone()]), m = d, g = d + n + 2, v = d + 1, this.faces.push(new X.Face3(m, g, v, [f.clone(), f.clone(), f.clone()])), this.faceVertexUvs[0].push([l[m].clone(), l[g].clone(), l[v].clone()])
          }
        }
        this.computeFaceNormals(), this.boundingSphere = new X.Sphere(new X.Vector3, c)
      }, X.RingGeometry.prototype = Object.create(X.Geometry.prototype), X.RingGeometry.prototype.constructor = X.RingGeometry, X.SphereGeometry = function (e, t, n, i, r, o, a) {
        X.Geometry.call(this), this.type = "SphereGeometry", this.parameters = {
          radius: e,
          widthSegments: t,
          heightSegments: n,
          phiStart: i,
          phiLength: r,
          thetaStart: o,
          thetaLength: a
        }, e = e || 50, t = Math.max(3, Math.floor(t) || 8), n = Math.max(2, Math.floor(n) || 6), i = void 0 !== i ? i : 0, r = void 0 !== r ? r : 2 * Math.PI, o = void 0 !== o ? o : 0, a = void 0 !== a ? a : Math.PI;
        var s, l, c = [],
          u = [];
        for (l = 0; l <= n; l++) {
          var h = [],
            d = [];
          for (s = 0; s <= t; s++) {
            var f = s / t,
              p = l / n,
              m = new X.Vector3;
            m.x = -e * Math.cos(i + f * r) * Math.sin(o + p * a), m.y = e * Math.cos(o + p * a), m.z = e * Math.sin(i + f * r) * Math.sin(o + p * a), this.vertices.push(m), h.push(this.vertices.length - 1), d.push(new X.Vector2(f, 1 - p))
          }
          c.push(h), u.push(d)
        }
        for (l = 0; l < n; l++)
          for (s = 0; s < t; s++) {
            var g = c[l][s + 1],
              v = c[l][s],
              y = c[l + 1][s],
              b = c[l + 1][s + 1],
              _ = this.vertices[g].clone().normalize(),
              x = this.vertices[v].clone().normalize(),
              w = this.vertices[y].clone().normalize(),
              E = this.vertices[b].clone().normalize(),
              A = u[l][s + 1].clone(),
              S = u[l][s].clone(),
              M = u[l + 1][s].clone(),
              T = u[l + 1][s + 1].clone();
            Math.abs(this.vertices[g].y) === e ? (A.x = (A.x + S.x) / 2, this.faces.push(new X.Face3(g, y, b, [_, w, E])), this.faceVertexUvs[0].push([A, M, T])) : Math.abs(this.vertices[y].y) === e ? (M.x = (M.x + T.x) / 2, this.faces.push(new X.Face3(g, v, y, [_, x, w])), this.faceVertexUvs[0].push([A, S, M])) : (this.faces.push(new X.Face3(g, v, b, [_, x, E])), this.faceVertexUvs[0].push([A, S, T]), this.faces.push(new X.Face3(v, y, b, [x.clone(), w, E.clone()])), this.faceVertexUvs[0].push([S.clone(), M, T.clone()]))
          }
        this.computeFaceNormals(), this.boundingSphere = new X.Sphere(new X.Vector3, e)
      }, X.SphereGeometry.prototype = Object.create(X.Geometry.prototype), X.SphereGeometry.prototype.constructor = X.SphereGeometry, X.TextGeometry = function (e, t) {
        t = t || {};
        var n = X.FontUtils.generateShapes(e, t);
        t.amount = void 0 !== t.height ? t.height : 50, void 0 === t.bevelThickness && (t.bevelThickness = 10), void 0 === t.bevelSize && (t.bevelSize = 8), void 0 === t.bevelEnabled && (t.bevelEnabled = !1), X.ExtrudeGeometry.call(this, n, t), this.type = "TextGeometry"
      }, X.TextGeometry.prototype = Object.create(X.ExtrudeGeometry.prototype), X.TextGeometry.prototype.constructor = X.TextGeometry, X.TorusGeometry = function (e, t, n, i, r) {
        X.Geometry.call(this), this.type = "TorusGeometry", this.parameters = {
          radius: e,
          tube: t,
          radialSegments: n,
          tubularSegments: i,
          arc: r
        }, e = e || 100, t = t || 40, n = n || 8, i = i || 6, r = r || 2 * Math.PI;
        for (var o = new X.Vector3, a = [], s = [], l = 0; l <= n; l++)
          for (var c = 0; c <= i; c++) {
            var u = c / i * r,
              h = l / n * Math.PI * 2;
            o.x = e * Math.cos(u), o.y = e * Math.sin(u);
            var d = new X.Vector3;
            d.x = (e + t * Math.cos(h)) * Math.cos(u), d.y = (e + t * Math.cos(h)) * Math.sin(u), d.z = t * Math.sin(h), this.vertices.push(d), a.push(new X.Vector2(c / i, l / n)), s.push(d.clone().sub(o).normalize())
          }
        for (l = 1; l <= n; l++)
          for (c = 1; c <= i; c++) {
            var f = (i + 1) * l + c - 1,
              p = (i + 1) * (l - 1) + c - 1,
              m = (i + 1) * (l - 1) + c,
              g = (i + 1) * l + c,
              v = new X.Face3(f, p, g, [s[f].clone(), s[p].clone(), s[g].clone()]);
            this.faces.push(v), this.faceVertexUvs[0].push([a[f].clone(), a[p].clone(), a[g].clone()]), v = new X.Face3(p, m, g, [s[p].clone(), s[m].clone(), s[g].clone()]), this.faces.push(v), this.faceVertexUvs[0].push([a[p].clone(), a[m].clone(), a[g].clone()])
          }
        this.computeFaceNormals()
      }, X.TorusGeometry.prototype = Object.create(X.Geometry.prototype), X.TorusGeometry.prototype.constructor = X.TorusGeometry, X.TorusKnotGeometry = function (e, t, n, i, r, o, a) {
        X.Geometry.call(this), this.type = "TorusKnotGeometry", this.parameters = {
          radius: e,
          tube: t,
          radialSegments: n,
          tubularSegments: i,
          p: r,
          q: o,
          heightScale: a
        }, e = e || 100, t = t || 40, n = n || 64, i = i || 8, r = r || 2, o = o || 3, a = a || 1;
        for (var s = new Array(n), l = new X.Vector3, c = new X.Vector3, u = new X.Vector3, h = 0; h < n; ++h) {
          s[h] = new Array(i);
          var d = h / n * 2 * r * Math.PI,
            f = L(d, o, r, e, a),
            p = L(d + .01, o, r, e, a);
          l.subVectors(p, f), c.addVectors(p, f), u.crossVectors(l, c), c.crossVectors(u, l), u.normalize(), c.normalize();
          for (var m = 0; m < i; ++m) {
            var g = m / i * 2 * Math.PI,
              v = -t * Math.cos(g),
              y = t * Math.sin(g),
              b = new X.Vector3;
            b.x = f.x + v * c.x + y * u.x, b.y = f.y + v * c.y + y * u.y, b.z = f.z + v * c.z + y * u.z, s[h][m] = this.vertices.push(b) - 1
          }
        }
        for (h = 0; h < n; ++h)
          for (m = 0; m < i; ++m) {
            var _ = (h + 1) % n,
              x = (m + 1) % i,
              w = s[h][m],
              E = s[_][m],
              A = s[_][x],
              S = s[h][x],
              M = new X.Vector2(h / n, m / i),
              T = new X.Vector2((h + 1) / n, m / i),
              C = new X.Vector2((h + 1) / n, (m + 1) / i),
              P = new X.Vector2(h / n, (m + 1) / i);
            this.faces.push(new X.Face3(w, E, S)), this.faceVertexUvs[0].push([M, T, P]), this.faces.push(new X.Face3(E, A, S)), this.faceVertexUvs[0].push([T.clone(), C, P.clone()])
          }

        function L(e, t, n, i, r) {
          var o = Math.cos(e),
            a = Math.sin(e),
            s = t / n * e,
            l = Math.cos(s),
            c = i * (2 + l) * .5 * o,
            u = i * (2 + l) * a * .5,
            h = r * i * Math.sin(s) * .5;
          return new X.Vector3(c, u, h)
        }
        this.computeFaceNormals(), this.computeVertexNormals()
      }, X.TorusKnotGeometry.prototype = Object.create(X.Geometry.prototype), X.TorusKnotGeometry.prototype.constructor = X.TorusKnotGeometry, X.TubeGeometry = function (e, t, n, i, r, o) {
        X.Geometry.call(this), this.type = "TubeGeometry", this.parameters = {
          path: e,
          segments: t,
          radius: n,
          radialSegments: i,
          closed: r
        }, t = t || 64, n = n || 1, i = i || 8, r = r || !1, o = o || X.TubeGeometry.NoTaper;
        var a, s, l, c, u, h, d, f, p, m, g, v, y, b, _, x, w, E, A, S, M = [],
          T = this,
          C = t + 1,
          P = new X.Vector3,
          L = new X.TubeGeometry.FrenetFrames(e, t, r),
          D = L.tangents,
          I = L.normals,
          R = L.binormals;

        function O(e, t, n) {
          return T.vertices.push(new X.Vector3(e, t, n)) - 1
        }
        for (this.tangents = D, this.normals = I, this.binormals = R, p = 0; p < C; p++)
          for (M[p] = [], l = p / (C - 1), f = e.getPointAt(l), D[p], a = I[p], s = R[p], u = n * o(l), m = 0; m < i; m++) c = m / i * 2 * Math.PI, h = -u * Math.cos(c), d = u * Math.sin(c), P.copy(f), P.x += h * a.x + d * s.x, P.y += h * a.y + d * s.y, P.z += h * a.z + d * s.z, M[p][m] = O(P.x, P.y, P.z);
        for (p = 0; p < t; p++)
          for (m = 0; m < i; m++) g = r ? (p + 1) % t : p + 1, v = (m + 1) % i, y = M[p][m], b = M[g][m], _ = M[g][v], x = M[p][v], w = new X.Vector2(p / t, m / i), E = new X.Vector2((p + 1) / t, m / i), A = new X.Vector2((p + 1) / t, (m + 1) / i), S = new X.Vector2(p / t, (m + 1) / i), this.faces.push(new X.Face3(y, b, x)), this.faceVertexUvs[0].push([w, E, S]), this.faces.push(new X.Face3(b, _, x)), this.faceVertexUvs[0].push([E.clone(), A, S.clone()]);
        this.computeFaceNormals(), this.computeVertexNormals()
      }, X.TubeGeometry.prototype = Object.create(X.Geometry.prototype), X.TubeGeometry.prototype.constructor = X.TubeGeometry, X.TubeGeometry.NoTaper = function (e) {
        return 1
      }, X.TubeGeometry.SinusoidalTaper = function (e) {
        return Math.sin(Math.PI * e)
      }, X.TubeGeometry.FrenetFrames = function (e, t, n) {
        var i, r, o, a, s, l, c, u = new X.Vector3,
          h = [],
          d = [],
          f = [],
          p = new X.Vector3,
          m = new X.Matrix4,
          g = t + 1;
        for (this.tangents = h, this.normals = d, this.binormals = f, l = 0; l < g; l++) c = l / (g - 1), h[l] = e.getTangentAt(c), h[l].normalize();
        for (function () {
            d[0] = new X.Vector3, f[0] = new X.Vector3, r = Number.MAX_VALUE, o = Math.abs(h[0].x), a = Math.abs(h[0].y), s = Math.abs(h[0].z), o <= r && (r = o, u.set(1, 0, 0));
            a <= r && (r = a, u.set(0, 1, 0));
            s <= r && u.set(0, 0, 1);
            p.crossVectors(h[0], u).normalize(), d[0].crossVectors(h[0], p), f[0].crossVectors(h[0], d[0])
          }(), l = 1; l < g; l++) d[l] = d[l - 1].clone(), f[l] = f[l - 1].clone(), p.crossVectors(h[l - 1], h[l]), p.length() > 1e-4 && (p.normalize(), i = Math.acos(X.Math.clamp(h[l - 1].dot(h[l]), -1, 1)), d[l].applyMatrix4(m.makeRotationAxis(p, i))), f[l].crossVectors(h[l], d[l]);
        if (n)
          for (i = Math.acos(X.Math.clamp(d[0].dot(d[g - 1]), -1, 1)), i /= g - 1, h[0].dot(p.crossVectors(d[0], d[g - 1])) > 0 && (i = -i), l = 1; l < g; l++) d[l].applyMatrix4(m.makeRotationAxis(h[l], i * l)), f[l].crossVectors(h[l], d[l])
      }, X.PolyhedronGeometry = function (e, t, n, i) {
        X.Geometry.call(this), this.type = "PolyhedronGeometry", this.parameters = {
          vertices: e,
          indices: t,
          radius: n,
          detail: i
        }, n = n || 1, i = i || 0;
        for (var r = this, o = 0, a = e.length; o < a; o += 3) _(new X.Vector3(e[o], e[o + 1], e[o + 2]));
        var s = this.vertices,
          l = [],
          c = (o = 0, 0);
        for (a = t.length; o < a; o += 3, c++) {
          var u = s[t[o]],
            h = s[t[o + 1]],
            d = s[t[o + 2]];
          l[c] = new X.Face3(u.index, h.index, d.index, [u.clone(), h.clone(), d.clone()])
        }
        var f = new X.Vector3;
        for (o = 0, a = l.length; o < a; o++) w(l[o], i);
        for (o = 0, a = this.faceVertexUvs[0].length; o < a; o++) {
          var p = this.faceVertexUvs[0][o],
            m = p[0].x,
            g = p[1].x,
            v = p[2].x,
            y = Math.max(m, Math.max(g, v)),
            b = Math.min(m, Math.min(g, v));
          y > .9 && b < .1 && (m < .2 && (p[0].x += 1), g < .2 && (p[1].x += 1), v < .2 && (p[2].x += 1))
        }
        for (o = 0, a = this.vertices.length; o < a; o++) this.vertices[o].multiplyScalar(n);

        function _(e) {
          var t = e.normalize().clone();
          t.index = r.vertices.push(t) - 1;
          var n = E(e) / 2 / Math.PI + .5,
            i = function (e) {
              return Math.atan2(-e.y, Math.sqrt(e.x * e.x + e.z * e.z))
            }(e) / Math.PI + .5;
          return t.uv = new X.Vector2(n, 1 - i), t
        }

        function x(e, t, n) {
          var i = new X.Face3(e.index, t.index, n.index, [e.clone(), t.clone(), n.clone()]);
          r.faces.push(i), f.copy(e).add(t).add(n).divideScalar(3);
          var o = E(f);
          r.faceVertexUvs[0].push([A(e.uv, e, o), A(t.uv, t, o), A(n.uv, n, o)])
        }

        function w(e, t) {
          for (var n = Math.pow(2, t), i = _(r.vertices[e.a]), o = _(r.vertices[e.b]), a = _(r.vertices[e.c]), s = [], l = 0; l <= n; l++) {
            s[l] = [];
            for (var c = _(i.clone().lerp(a, l / n)), u = _(o.clone().lerp(a, l / n)), h = n - l, d = 0; d <= h; d++) s[l][d] = 0 == d && l == n ? c : _(c.clone().lerp(u, d / h))
          }
          for (l = 0; l < n; l++)
            for (d = 0; d < 2 * (n - l) - 1; d++) {
              var f = Math.floor(d / 2);
              d % 2 == 0 ? x(s[l][f + 1], s[l + 1][f], s[l][f]) : x(s[l][f + 1], s[l + 1][f + 1], s[l + 1][f])
            }
        }

        function E(e) {
          return Math.atan2(e.z, -e.x)
        }

        function A(e, t, n) {
          return n < 0 && 1 === e.x && (e = new X.Vector2(e.x - 1, e.y)), 0 === t.x && 0 === t.z && (e = new X.Vector2(n / 2 / Math.PI + .5, e.y)), e.clone()
        }
        this.mergeVertices(), this.computeFaceNormals(), this.boundingSphere = new X.Sphere(new X.Vector3, n)
      }, X.PolyhedronGeometry.prototype = Object.create(X.Geometry.prototype), X.PolyhedronGeometry.prototype.constructor = X.PolyhedronGeometry, X.DodecahedronGeometry = function (e, t) {
        this.parameters = {
          radius: e,
          detail: t
        };
        var n = (1 + Math.sqrt(5)) / 2,
          i = 1 / n,
          r = [-1, -1, -1, -1, -1, 1, -1, 1, -1, -1, 1, 1, 1, -1, -1, 1, -1, 1, 1, 1, -1, 1, 1, 1, 0, -i, -n, 0, -i, n, 0, i, -n, 0, i, n, -i, -n, 0, -i, n, 0, i, -n, 0, i, n, 0, -n, 0, -i, n, 0, -i, -n, 0, i, n, 0, i];
        X.PolyhedronGeometry.call(this, r, [3, 11, 7, 3, 7, 15, 3, 15, 13, 7, 19, 17, 7, 17, 6, 7, 6, 15, 17, 4, 8, 17, 8, 10, 17, 10, 6, 8, 0, 16, 8, 16, 2, 8, 2, 10, 0, 12, 1, 0, 1, 18, 0, 18, 16, 6, 10, 2, 6, 2, 13, 6, 13, 15, 2, 16, 18, 2, 18, 3, 2, 3, 13, 18, 1, 9, 18, 9, 11, 18, 11, 3, 4, 14, 12, 4, 12, 0, 4, 0, 8, 11, 9, 5, 11, 5, 19, 11, 19, 7, 19, 5, 14, 19, 14, 4, 19, 4, 17, 1, 12, 14, 1, 14, 5, 1, 5, 9], e, t)
      }, X.DodecahedronGeometry.prototype = Object.create(X.Geometry.prototype), X.DodecahedronGeometry.prototype.constructor = X.DodecahedronGeometry, X.IcosahedronGeometry = function (e, t) {
        var n = (1 + Math.sqrt(5)) / 2,
          i = [-1, n, 0, 1, n, 0, -1, -n, 0, 1, -n, 0, 0, -1, n, 0, 1, n, 0, -1, -n, 0, 1, -n, n, 0, -1, n, 0, 1, -n, 0, -1, -n, 0, 1];
        X.PolyhedronGeometry.call(this, i, [0, 11, 5, 0, 5, 1, 0, 1, 7, 0, 7, 10, 0, 10, 11, 1, 5, 9, 5, 11, 4, 11, 10, 2, 10, 7, 6, 7, 1, 8, 3, 9, 4, 3, 4, 2, 3, 2, 6, 3, 6, 8, 3, 8, 9, 4, 9, 5, 2, 4, 11, 6, 2, 10, 8, 6, 7, 9, 8, 1], e, t), this.type = "IcosahedronGeometry", this.parameters = {
          radius: e,
          detail: t
        }
      }, X.IcosahedronGeometry.prototype = Object.create(X.Geometry.prototype), X.IcosahedronGeometry.prototype.constructor = X.IcosahedronGeometry, X.OctahedronGeometry = function (e, t) {
        this.parameters = {
          radius: e,
          detail: t
        };
        X.PolyhedronGeometry.call(this, [1, 0, 0, -1, 0, 0, 0, 1, 0, 0, -1, 0, 0, 0, 1, 0, 0, -1], [0, 2, 4, 0, 4, 3, 0, 3, 5, 0, 5, 2, 1, 2, 5, 1, 5, 3, 1, 3, 4, 1, 4, 2], e, t), this.type = "OctahedronGeometry", this.parameters = {
          radius: e,
          detail: t
        }
      }, X.OctahedronGeometry.prototype = Object.create(X.Geometry.prototype), X.OctahedronGeometry.prototype.constructor = X.OctahedronGeometry, X.TetrahedronGeometry = function (e, t) {
        X.PolyhedronGeometry.call(this, [1, 1, 1, -1, -1, 1, -1, 1, -1, 1, -1, -1], [2, 1, 0, 0, 3, 2, 1, 3, 0, 2, 3, 1], e, t), this.type = "TetrahedronGeometry", this.parameters = {
          radius: e,
          detail: t
        }
      }, X.TetrahedronGeometry.prototype = Object.create(X.Geometry.prototype), X.TetrahedronGeometry.prototype.constructor = X.TetrahedronGeometry, X.ParametricGeometry = function (e, t, n) {
        X.Geometry.call(this), this.type = "ParametricGeometry", this.parameters = {
          func: e,
          slices: t,
          stacks: n
        };
        var i, r, o, a, s, l, c, u, h, d, f, p, m = this.vertices,
          g = this.faces,
          v = this.faceVertexUvs[0],
          y = t + 1;
        for (i = 0; i <= n; i++)
          for (a = i / n, r = 0; r <= t; r++) o = e(r / t, a), m.push(o);
        for (i = 0; i < n; i++)
          for (r = 0; r < t; r++) s = i * y + r, l = i * y + r + 1, c = (i + 1) * y + r + 1, u = (i + 1) * y + r, h = new X.Vector2(r / t, i / n), d = new X.Vector2((r + 1) / t, i / n), f = new X.Vector2((r + 1) / t, (i + 1) / n), p = new X.Vector2(r / t, (i + 1) / n), g.push(new X.Face3(s, l, u)), v.push([h, d, p]), g.push(new X.Face3(l, c, u)), v.push([d.clone(), f, p.clone()]);
        this.computeFaceNormals(), this.computeVertexNormals()
      }, X.ParametricGeometry.prototype = Object.create(X.Geometry.prototype), X.ParametricGeometry.prototype.constructor = X.ParametricGeometry, X.AxisHelper = function (e) {
        e = e || 1;
        var t = new Float32Array([0, 0, 0, e, 0, 0, 0, 0, 0, 0, e, 0, 0, 0, 0, 0, 0, e]),
          n = new Float32Array([1, 0, 0, 1, .6, 0, 0, 1, 0, .6, 1, 0, 0, 0, 1, 0, .6, 1]),
          i = new X.BufferGeometry;
        i.addAttribute("position", new X.BufferAttribute(t, 3)), i.addAttribute("color", new X.BufferAttribute(n, 3));
        var r = new X.LineBasicMaterial({
          vertexColors: X.VertexColors
        });
        X.Line.call(this, i, r, X.LinePieces)
      }, X.AxisHelper.prototype = Object.create(X.Line.prototype), X.AxisHelper.prototype.constructor = X.AxisHelper, X.ArrowHelper = function () {
        var e = new X.Geometry;
        e.vertices.push(new X.Vector3(0, 0, 0), new X.Vector3(0, 1, 0));
        var t = new X.CylinderGeometry(0, .5, 1, 5, 1);
        return t.applyMatrix((new X.Matrix4).makeTranslation(0, -.5, 0)),
          function (n, i, r, o, a, s) {
            X.Object3D.call(this), void 0 === o && (o = 16776960), void 0 === r && (r = 1), void 0 === a && (a = .2 * r), void 0 === s && (s = .2 * a), this.position.copy(i), this.line = new X.Line(e, new X.LineBasicMaterial({
              color: o
            })), this.line.matrixAutoUpdate = !1, this.add(this.line), this.cone = new X.Mesh(t, new X.MeshBasicMaterial({
              color: o
            })), this.cone.matrixAutoUpdate = !1, this.add(this.cone), this.setDirection(n), this.setLength(r, a, s)
          }
      }(), X.ArrowHelper.prototype = Object.create(X.Object3D.prototype), X.ArrowHelper.prototype.constructor = X.ArrowHelper, X.ArrowHelper.prototype.setDirection = (q = new X.Vector3, function (e) {
        e.y > .99999 ? this.quaternion.set(0, 0, 0, 1) : e.y < -.99999 ? this.quaternion.set(1, 0, 0, 0) : (q.set(e.z, 0, -e.x).normalize(), j = Math.acos(e.y), this.quaternion.setFromAxisAngle(q, j))
      }), X.ArrowHelper.prototype.setLength = function (e, t, n) {
        void 0 === t && (t = .2 * e), void 0 === n && (n = .2 * t), this.line.scale.set(1, e - t, 1), this.line.updateMatrix(), this.cone.scale.set(n, t, n), this.cone.position.y = e, this.cone.updateMatrix()
      }, X.ArrowHelper.prototype.setColor = function (e) {
        this.line.material.color.set(e), this.cone.material.color.set(e)
      }, X.BoxHelper = function (e) {
        var t = new X.BufferGeometry;
        t.addAttribute("position", new X.BufferAttribute(new Float32Array(72), 3)), X.Line.call(this, t, new X.LineBasicMaterial({
          color: 16776960
        }), X.LinePieces), void 0 !== e && this.update(e)
      }, X.BoxHelper.prototype = Object.create(X.Line.prototype), X.BoxHelper.prototype.constructor = X.BoxHelper, X.BoxHelper.prototype.update = function (e) {
        var t = e.geometry;
        null === t.boundingBox && t.computeBoundingBox();
        var n = t.boundingBox.min,
          i = t.boundingBox.max,
          r = this.geometry.attributes.position.array;
        r[0] = i.x, r[1] = i.y, r[2] = i.z, r[3] = n.x, r[4] = i.y, r[5] = i.z, r[6] = n.x, r[7] = i.y, r[8] = i.z, r[9] = n.x, r[10] = n.y, r[11] = i.z, r[12] = n.x, r[13] = n.y, r[14] = i.z, r[15] = i.x, r[16] = n.y, r[17] = i.z, r[18] = i.x, r[19] = n.y, r[20] = i.z, r[21] = i.x, r[22] = i.y, r[23] = i.z, r[24] = i.x, r[25] = i.y, r[26] = n.z, r[27] = n.x, r[28] = i.y, r[29] = n.z, r[30] = n.x, r[31] = i.y, r[32] = n.z, r[33] = n.x, r[34] = n.y, r[35] = n.z, r[36] = n.x, r[37] = n.y, r[38] = n.z, r[39] = i.x, r[40] = n.y, r[41] = n.z, r[42] = i.x, r[43] = n.y, r[44] = n.z, r[45] = i.x, r[46] = i.y, r[47] = n.z, r[48] = i.x, r[49] = i.y, r[50] = i.z, r[51] = i.x, r[52] = i.y, r[53] = n.z, r[54] = n.x, r[55] = i.y, r[56] = i.z, r[57] = n.x, r[58] = i.y, r[59] = n.z, r[60] = n.x, r[61] = n.y, r[62] = i.z, r[63] = n.x, r[64] = n.y, r[65] = n.z, r[66] = i.x, r[67] = n.y, r[68] = i.z, r[69] = i.x, r[70] = n.y, r[71] = n.z, this.geometry.attributes.position.needsUpdate = !0, this.geometry.computeBoundingSphere(), this.matrix = e.matrixWorld, this.matrixAutoUpdate = !1
      }, X.BoundingBoxHelper = function (e, t) {
        var n = void 0 !== t ? t : 8947848;
        this.object = e, this.box = new X.Box3, X.Mesh.call(this, new X.BoxGeometry(1, 1, 1), new X.MeshBasicMaterial({
          color: n,
          wireframe: !0
        }))
      }, X.BoundingBoxHelper.prototype = Object.create(X.Mesh.prototype), X.BoundingBoxHelper.prototype.constructor = X.BoundingBoxHelper, X.BoundingBoxHelper.prototype.update = function () {
        this.box.setFromObject(this.object), this.box.size(this.scale), this.box.center(this.position)
      }, X.CameraHelper = function (e) {
        var t = new X.Geometry,
          n = new X.LineBasicMaterial({
            color: 16777215,
            vertexColors: X.FaceColors
          }),
          i = {};

        function r(e, t, n) {
          o(e, n), o(t, n)
        }

        function o(e, n) {
          t.vertices.push(new X.Vector3), t.colors.push(new X.Color(n)), void 0 === i[e] && (i[e] = []), i[e].push(t.vertices.length - 1)
        }
        r("n1", "n2", 16755200), r("n2", "n4", 16755200), r("n4", "n3", 16755200), r("n3", "n1", 16755200), r("f1", "f2", 16755200), r("f2", "f4", 16755200), r("f4", "f3", 16755200), r("f3", "f1", 16755200), r("n1", "f1", 16755200), r("n2", "f2", 16755200), r("n3", "f3", 16755200), r("n4", "f4", 16755200), r("p", "n1", 16711680), r("p", "n2", 16711680), r("p", "n3", 16711680), r("p", "n4", 16711680), r("u1", "u2", 43775), r("u2", "u3", 43775), r("u3", "u1", 43775), r("c", "t", 16777215), r("p", "c", 3355443), r("cn1", "cn2", 3355443), r("cn3", "cn4", 3355443), r("cf1", "cf2", 3355443), r("cf3", "cf4", 3355443), X.Line.call(this, t, n, X.LinePieces), this.camera = e, this.matrix = e.matrixWorld, this.matrixAutoUpdate = !1, this.pointMap = i, this.update()
      }, X.CameraHelper.prototype = Object.create(X.Line.prototype), X.CameraHelper.prototype.constructor = X.CameraHelper, X.CameraHelper.prototype.update = function () {
        var e, t, n = new X.Vector3,
          i = new X.Camera,
          r = function (r, o, a, s) {
            n.set(o, a, s).unproject(i);
            var l = t[r];
            if (void 0 !== l)
              for (var c = 0, u = l.length; c < u; c++) e.vertices[l[c]].copy(n)
          };
        return function () {
          e = this.geometry, t = this.pointMap;
          i.projectionMatrix.copy(this.camera.projectionMatrix), r("c", 0, 0, -1), r("t", 0, 0, 1), r("n1", -1, -1, -1), r("n2", 1, -1, -1), r("n3", -1, 1, -1), r("n4", 1, 1, -1), r("f1", -1, -1, 1), r("f2", 1, -1, 1), r("f3", -1, 1, 1), r("f4", 1, 1, 1), r("u1", .7, 1.1, -1), r("u2", -.7, 1.1, -1), r("u3", 0, 2, -1), r("cf1", -1, 0, 1), r("cf2", 1, 0, 1), r("cf3", 0, -1, 1), r("cf4", 0, 1, 1), r("cn1", -1, 0, -1), r("cn2", 1, 0, -1), r("cn3", 0, -1, -1), r("cn4", 0, 1, -1), e.verticesNeedUpdate = !0
        }
      }(), X.DirectionalLightHelper = function (e, t) {
        X.Object3D.call(this), this.light = e, this.light.updateMatrixWorld(), this.matrix = e.matrixWorld, this.matrixAutoUpdate = !1, t = t || 1;
        var n = new X.Geometry;
        n.vertices.push(new X.Vector3(-t, t, 0), new X.Vector3(t, t, 0), new X.Vector3(t, -t, 0), new X.Vector3(-t, -t, 0), new X.Vector3(-t, t, 0));
        var i = new X.LineBasicMaterial({
          fog: !1
        });
        i.color.copy(this.light.color).multiplyScalar(this.light.intensity), this.lightPlane = new X.Line(n, i), this.add(this.lightPlane), (n = new X.Geometry).vertices.push(new X.Vector3, new X.Vector3), (i = new X.LineBasicMaterial({
          fog: !1
        })).color.copy(this.light.color).multiplyScalar(this.light.intensity), this.targetLine = new X.Line(n, i), this.add(this.targetLine), this.update()
      }, X.DirectionalLightHelper.prototype = Object.create(X.Object3D.prototype), X.DirectionalLightHelper.prototype.constructor = X.DirectionalLightHelper, X.DirectionalLightHelper.prototype.dispose = function () {
        this.lightPlane.geometry.dispose(), this.lightPlane.material.dispose(), this.targetLine.geometry.dispose(), this.targetLine.material.dispose()
      }, X.DirectionalLightHelper.prototype.update = function () {
        var e = new X.Vector3,
          t = new X.Vector3,
          n = new X.Vector3;
        return function () {
          e.setFromMatrixPosition(this.light.matrixWorld), t.setFromMatrixPosition(this.light.target.matrixWorld), n.subVectors(t, e), this.lightPlane.lookAt(n), this.lightPlane.material.color.copy(this.light.color).multiplyScalar(this.light.intensity), this.targetLine.geometry.vertices[1].copy(n), this.targetLine.geometry.verticesNeedUpdate = !0, this.targetLine.material.color.copy(this.lightPlane.material.color)
        }
      }(), X.EdgesHelper = function (e, t, n) {
        var i = void 0 !== t ? t : 16777215;
        n = void 0 !== n ? n : 1;
        var r, o = Math.cos(X.Math.degToRad(n)),
          a = [0, 0],
          s = {},
          l = function (e, t) {
            return e - t
          },
          c = ["a", "b", "c"],
          u = new X.BufferGeometry;
        e.geometry instanceof X.BufferGeometry ? (r = new X.Geometry).fromBufferGeometry(e.geometry) : r = e.geometry.clone(), r.mergeVertices(), r.computeFaceNormals();
        for (var h = r.vertices, d = r.faces, f = 0, p = 0, m = d.length; p < m; p++)
          for (var g = d[p], v = 0; v < 3; v++) {
            a[0] = g[c[v]], a[1] = g[c[(v + 1) % 3]], a.sort(l), void 0 === s[_ = a.toString()] ? (s[_] = {
              vert1: a[0],
              vert2: a[1],
              face1: p,
              face2: void 0
            }, f++) : s[_].face2 = p
          }
        var y = new Float32Array(2 * f * 3),
          b = 0;
        for (var _ in s) {
          var x = s[_];
          if (void 0 === x.face2 || d[x.face1].normal.dot(d[x.face2].normal) <= o) {
            var w = h[x.vert1];
            y[b++] = w.x, y[b++] = w.y, y[b++] = w.z, w = h[x.vert2], y[b++] = w.x, y[b++] = w.y, y[b++] = w.z
          }
        }
        u.addAttribute("position", new X.BufferAttribute(y, 3)), X.Line.call(this, u, new X.LineBasicMaterial({
          color: i
        }), X.LinePieces), this.matrix = e.matrixWorld, this.matrixAutoUpdate = !1
      }, X.EdgesHelper.prototype = Object.create(X.Line.prototype), X.EdgesHelper.prototype.constructor = X.EdgesHelper, X.FaceNormalsHelper = function (e, t, n, i) {
        this.object = e, this.size = void 0 !== t ? t : 1;
        for (var r = void 0 !== n ? n : 16776960, o = void 0 !== i ? i : 1, a = new X.Geometry, s = 0, l = this.object.geometry.faces.length; s < l; s++) a.vertices.push(new X.Vector3, new X.Vector3);
        X.Line.call(this, a, new X.LineBasicMaterial({
          color: r,
          linewidth: o
        }), X.LinePieces), this.matrixAutoUpdate = !1, this.normalMatrix = new X.Matrix3, this.update()
      }, X.FaceNormalsHelper.prototype = Object.create(X.Line.prototype), X.FaceNormalsHelper.prototype.constructor = X.FaceNormalsHelper, X.FaceNormalsHelper.prototype.update = function () {
        var e = this.geometry.vertices,
          t = this.object,
          n = t.geometry.vertices,
          i = t.geometry.faces,
          r = t.matrixWorld;
        t.updateMatrixWorld(!0), this.normalMatrix.getNormalMatrix(r);
        for (var o = 0, a = 0, s = i.length; o < s; o++, a += 2) {
          var l = i[o];
          e[a].copy(n[l.a]).add(n[l.b]).add(n[l.c]).divideScalar(3).applyMatrix4(r), e[a + 1].copy(l.normal).applyMatrix3(this.normalMatrix).normalize().multiplyScalar(this.size).add(e[a])
        }
        return this.geometry.verticesNeedUpdate = !0, this
      }, X.GridHelper = function (e, t) {
        var n = new X.Geometry,
          i = new X.LineBasicMaterial({
            vertexColors: X.VertexColors
          });
        this.color1 = new X.Color(4473924), this.color2 = new X.Color(8947848);
        for (var r = -e; r <= e; r += t) {
          n.vertices.push(new X.Vector3(-e, 0, r), new X.Vector3(e, 0, r), new X.Vector3(r, 0, -e), new X.Vector3(r, 0, e));
          var o = 0 === r ? this.color1 : this.color2;
          n.colors.push(o, o, o, o)
        }
        X.Line.call(this, n, i, X.LinePieces)
      }, X.GridHelper.prototype = Object.create(X.Line.prototype), X.GridHelper.prototype.constructor = X.GridHelper, X.GridHelper.prototype.setColors = function (e, t) {
        this.color1.set(e), this.color2.set(t), this.geometry.colorsNeedUpdate = !0
      }, X.HemisphereLightHelper = function (e, t) {
        X.Object3D.call(this), this.light = e, this.light.updateMatrixWorld(), this.matrix = e.matrixWorld, this.matrixAutoUpdate = !1, this.colors = [new X.Color, new X.Color];
        var n = new X.SphereGeometry(t, 4, 2);
        n.applyMatrix((new X.Matrix4).makeRotationX(-Math.PI / 2));
        for (var i = 0; i < 8; i++) n.faces[i].color = this.colors[i < 4 ? 0 : 1];
        var r = new X.MeshBasicMaterial({
          vertexColors: X.FaceColors,
          wireframe: !0
        });
        this.lightSphere = new X.Mesh(n, r), this.add(this.lightSphere), this.update()
      }, X.HemisphereLightHelper.prototype = Object.create(X.Object3D.prototype), X.HemisphereLightHelper.prototype.constructor = X.HemisphereLightHelper, X.HemisphereLightHelper.prototype.dispose = function () {
        this.lightSphere.geometry.dispose(), this.lightSphere.material.dispose()
      }, X.HemisphereLightHelper.prototype.update = function () {
        var e = new X.Vector3;
        return function () {
          this.colors[0].copy(this.light.color).multiplyScalar(this.light.intensity), this.colors[1].copy(this.light.groundColor).multiplyScalar(this.light.intensity), this.lightSphere.lookAt(e.setFromMatrixPosition(this.light.matrixWorld).negate()), this.lightSphere.geometry.colorsNeedUpdate = !0
        }
      }(), X.PointLightHelper = function (e, t) {
        this.light = e, this.light.updateMatrixWorld();
        var n = new X.SphereGeometry(t, 4, 2),
          i = new X.MeshBasicMaterial({
            wireframe: !0,
            fog: !1
          });
        i.color.copy(this.light.color).multiplyScalar(this.light.intensity), X.Mesh.call(this, n, i), this.matrix = this.light.matrixWorld, this.matrixAutoUpdate = !1
      }, X.PointLightHelper.prototype = Object.create(X.Mesh.prototype), X.PointLightHelper.prototype.constructor = X.PointLightHelper, X.PointLightHelper.prototype.dispose = function () {
        this.geometry.dispose(), this.material.dispose()
      }, X.PointLightHelper.prototype.update = function () {
        this.material.color.copy(this.light.color).multiplyScalar(this.light.intensity)
      }, X.SkeletonHelper = function (e) {
        this.bones = this.getBoneList(e);
        for (var t = new X.Geometry, n = 0; n < this.bones.length; n++) {
          this.bones[n].parent instanceof X.Bone && (t.vertices.push(new X.Vector3), t.vertices.push(new X.Vector3), t.colors.push(new X.Color(0, 0, 1)), t.colors.push(new X.Color(0, 1, 0)))
        }
        var i = new X.LineBasicMaterial({
          vertexColors: X.VertexColors,
          depthTest: !1,
          depthWrite: !1,
          transparent: !0
        });
        X.Line.call(this, t, i, X.LinePieces), this.root = e, this.matrix = e.matrixWorld, this.matrixAutoUpdate = !1, this.update()
      }, X.SkeletonHelper.prototype = Object.create(X.Line.prototype), X.SkeletonHelper.prototype.constructor = X.SkeletonHelper, X.SkeletonHelper.prototype.getBoneList = function (e) {
        var t = [];
        e instanceof X.Bone && t.push(e);
        for (var n = 0; n < e.children.length; n++) t.push.apply(t, this.getBoneList(e.children[n]));
        return t
      }, X.SkeletonHelper.prototype.update = function () {
        for (var e = this.geometry, t = (new X.Matrix4).getInverse(this.root.matrixWorld), n = new X.Matrix4, i = 0, r = 0; r < this.bones.length; r++) {
          var o = this.bones[r];
          o.parent instanceof X.Bone && (n.multiplyMatrices(t, o.matrixWorld), e.vertices[i].setFromMatrixPosition(n), n.multiplyMatrices(t, o.parent.matrixWorld), e.vertices[i + 1].setFromMatrixPosition(n), i += 2)
        }
        e.verticesNeedUpdate = !0, e.computeBoundingSphere()
      }, X.SpotLightHelper = function (e) {
        X.Object3D.call(this), this.light = e, this.light.updateMatrixWorld(), this.matrix = e.matrixWorld, this.matrixAutoUpdate = !1;
        var t = new X.CylinderGeometry(0, 1, 1, 8, 1, !0);
        t.applyMatrix((new X.Matrix4).makeTranslation(0, -.5, 0)), t.applyMatrix((new X.Matrix4).makeRotationX(-Math.PI / 2));
        var n = new X.MeshBasicMaterial({
          wireframe: !0,
          fog: !1
        });
        this.cone = new X.Mesh(t, n), this.add(this.cone), this.update()
      }, X.SpotLightHelper.prototype = Object.create(X.Object3D.prototype), X.SpotLightHelper.prototype.constructor = X.SpotLightHelper, X.SpotLightHelper.prototype.dispose = function () {
        this.cone.geometry.dispose(), this.cone.material.dispose()
      }, X.SpotLightHelper.prototype.update = function () {
        var e = new X.Vector3,
          t = new X.Vector3;
        return function () {
          var n = this.light.distance ? this.light.distance : 1e4,
            i = n * Math.tan(this.light.angle);
          this.cone.scale.set(i, i, n), e.setFromMatrixPosition(this.light.matrixWorld), t.setFromMatrixPosition(this.light.target.matrixWorld), this.cone.lookAt(t.sub(e)), this.cone.material.color.copy(this.light.color).multiplyScalar(this.light.intensity)
        }
      }(), X.VertexNormalsHelper = function (e, t, n, i) {
        this.object = e, this.size = void 0 !== t ? t : 1;
        for (var r = void 0 !== n ? n : 16711680, o = void 0 !== i ? i : 1, a = new X.Geometry, s = e.geometry.faces, l = 0, c = s.length; l < c; l++)
          for (var u = 0, h = s[l].vertexNormals.length; u < h; u++) a.vertices.push(new X.Vector3, new X.Vector3);
        X.Line.call(this, a, new X.LineBasicMaterial({
          color: r,
          linewidth: o
        }), X.LinePieces), this.matrixAutoUpdate = !1, this.normalMatrix = new X.Matrix3, this.update()
      }, X.VertexNormalsHelper.prototype = Object.create(X.Line.prototype), X.VertexNormalsHelper.prototype.constructor = X.VertexNormalsHelper, X.VertexNormalsHelper.prototype.update = function (e) {
        var t = new X.Vector3;
        return function (e) {
          var n = ["a", "b", "c", "d"];
          this.object.updateMatrixWorld(!0), this.normalMatrix.getNormalMatrix(this.object.matrixWorld);
          for (var i = this.geometry.vertices, r = this.object.geometry.vertices, o = this.object.geometry.faces, a = this.object.matrixWorld, s = 0, l = 0, c = o.length; l < c; l++)
            for (var u = o[l], h = 0, d = u.vertexNormals.length; h < d; h++) {
              var f = r[u[n[h]]],
                p = u.vertexNormals[h];
              i[s].copy(f).applyMatrix4(a), t.copy(p).applyMatrix3(this.normalMatrix).normalize().multiplyScalar(this.size), t.add(i[s]), i[s += 1].copy(t), s += 1
            }
          return this.geometry.verticesNeedUpdate = !0, this
        }
      }(), X.VertexTangentsHelper = function (e, t, n, i) {
        this.object = e, this.size = void 0 !== t ? t : 1;
        for (var r = void 0 !== n ? n : 255, o = void 0 !== i ? i : 1, a = new X.Geometry, s = e.geometry.faces, l = 0, c = s.length; l < c; l++)
          for (var u = 0, h = s[l].vertexTangents.length; u < h; u++) a.vertices.push(new X.Vector3), a.vertices.push(new X.Vector3);
        X.Line.call(this, a, new X.LineBasicMaterial({
          color: r,
          linewidth: o
        }), X.LinePieces), this.matrixAutoUpdate = !1, this.update()
      }, X.VertexTangentsHelper.prototype = Object.create(X.Line.prototype), X.VertexTangentsHelper.prototype.constructor = X.VertexTangentsHelper, X.VertexTangentsHelper.prototype.update = function (e) {
        var t = new X.Vector3;
        return function (e) {
          var n = ["a", "b", "c", "d"];
          this.object.updateMatrixWorld(!0);
          for (var i = this.geometry.vertices, r = this.object.geometry.vertices, o = this.object.geometry.faces, a = this.object.matrixWorld, s = 0, l = 0, c = o.length; l < c; l++)
            for (var u = o[l], h = 0, d = u.vertexTangents.length; h < d; h++) {
              var f = r[u[n[h]]],
                p = u.vertexTangents[h];
              i[s].copy(f).applyMatrix4(a), t.copy(p).transformDirection(a).multiplyScalar(this.size), t.add(i[s]), i[s += 1].copy(t), s += 1
            }
          return this.geometry.verticesNeedUpdate = !0, this
        }
      }(), X.WireframeHelper = function (e, t) {
        var n = void 0 !== t ? t : 16777215,
          i = [0, 0],
          r = {},
          o = function (e, t) {
            return e - t
          },
          a = ["a", "b", "c"],
          s = new X.BufferGeometry;
        if (e.geometry instanceof X.Geometry) {
          for (var l = e.geometry.vertices, c = e.geometry.faces, u = 0, h = new Uint32Array(6 * c.length), d = 0, f = c.length; d < f; d++)
            for (var p = c[d], m = 0; m < 3; m++) {
              i[0] = p[a[m]], i[1] = p[a[(m + 1) % 3]], i.sort(o), void 0 === r[M = i.toString()] && (h[2 * u] = i[0], h[2 * u + 1] = i[1], r[M] = !0, u++)
            }
          var g = new Float32Array(2 * u * 3);
          for (d = 0, f = u; d < f; d++)
            for (m = 0; m < 2; m++) {
              var v = l[h[2 * d + m]];
              g[(A = 6 * d + 3 * m) + 0] = v.x, g[A + 1] = v.y, g[A + 2] = v.z
            }
          s.addAttribute("position", new X.BufferAttribute(g, 3))
        } else if (e.geometry instanceof X.BufferGeometry)
          if (void 0 !== e.geometry.attributes.index) {
            l = e.geometry.attributes.position.array;
            var y = e.geometry.attributes.index.array,
              b = e.geometry.drawcalls;
            u = 0;
            0 === b.length && (b = [{
              count: y.length,
              index: 0,
              start: 0
            }]);
            h = new Uint32Array(2 * y.length);
            for (var _ = 0, x = b.length; _ < x; ++_)
              for (var w = b[_].start, E = b[_].count, A = b[_].index, S = (d = w, w + E); d < S; d += 3)
                for (m = 0; m < 3; m++) {
                  var M;
                  i[0] = A + y[d + m], i[1] = A + y[d + (m + 1) % 3], i.sort(o), void 0 === r[M = i.toString()] && (h[2 * u] = i[0], h[2 * u + 1] = i[1], r[M] = !0, u++)
                }
            for (g = new Float32Array(2 * u * 3), d = 0, f = u; d < f; d++)
              for (m = 0; m < 2; m++) {
                A = 6 * d + 3 * m;
                var T = 3 * h[2 * d + m];
                g[A + 0] = l[T], g[A + 1] = l[T + 1], g[A + 2] = l[T + 2]
              }
            s.addAttribute("position", new X.BufferAttribute(g, 3))
          } else {
            var C = (u = (l = e.geometry.attributes.position.array).length / 3) / 3;
            for (g = new Float32Array(2 * u * 3), d = 0, f = C; d < f; d++)
              for (m = 0; m < 3; m++) {
                var P = 9 * d + 3 * m;
                g[(A = 18 * d + 6 * m) + 0] = l[P], g[A + 1] = l[P + 1], g[A + 2] = l[P + 2];
                T = 9 * d + (m + 1) % 3 * 3;
                g[A + 3] = l[T], g[A + 4] = l[T + 1], g[A + 5] = l[T + 2]
              }
            s.addAttribute("position", new X.BufferAttribute(g, 3))
          } X.Line.call(this, s, new X.LineBasicMaterial({
          color: n
        }), X.LinePieces), this.matrix = e.matrixWorld, this.matrixAutoUpdate = !1
      }, X.WireframeHelper.prototype = Object.create(X.Line.prototype), X.WireframeHelper.prototype.constructor = X.WireframeHelper, X.ImmediateRenderObject = function () {
        X.Object3D.call(this), this.render = function (e) {}
      }, X.ImmediateRenderObject.prototype = Object.create(X.Object3D.prototype), X.ImmediateRenderObject.prototype.constructor = X.ImmediateRenderObject, X.MorphBlendMesh = function (e, t) {
        X.Mesh.call(this, e, t), this.animationsMap = {}, this.animationsList = [];
        var n = this.geometry.morphTargets.length,
          i = n - 1,
          r = n / 1;
        this.createAnimation("__default", 0, i, r), this.setAnimationWeight("__default", 1)
      }, X.MorphBlendMesh.prototype = Object.create(X.Mesh.prototype), X.MorphBlendMesh.prototype.constructor = X.MorphBlendMesh, X.MorphBlendMesh.prototype.createAnimation = function (e, t, n, i) {
        var r = {
          startFrame: t,
          endFrame: n,
          length: n - t + 1,
          fps: i,
          duration: (n - t) / i,
          lastFrame: 0,
          currentFrame: 0,
          active: !1,
          time: 0,
          direction: 1,
          weight: 1,
          directionBackwards: !1,
          mirroredLoop: !1
        };
        this.animationsMap[e] = r, this.animationsList.push(r)
      }, X.MorphBlendMesh.prototype.autoCreateAnimations = function (e) {
        for (var t, n = /([a-z]+)_?(\d+)/, i = {}, r = this.geometry, o = 0, a = r.morphTargets.length; o < a; o++) {
          var s = r.morphTargets[o].name.match(n);
          if (s && s.length > 1) i[l = s[1]] || (i[l] = {
            start: 1 / 0,
            end: -1 / 0
          }), o < (c = i[l]).start && (c.start = o), o > c.end && (c.end = o), t || (t = l)
        }
        for (var l in i) {
          var c = i[l];
          this.createAnimation(l, c.start, c.end, e)
        }
        this.firstAnimation = t
      }, X.MorphBlendMesh.prototype.setAnimationDirectionForward = function (e) {
        var t = this.animationsMap[e];
        t && (t.direction = 1, t.directionBackwards = !1)
      }, X.MorphBlendMesh.prototype.setAnimationDirectionBackward = function (e) {
        var t = this.animationsMap[e];
        t && (t.direction = -1, t.directionBackwards = !0)
      }, X.MorphBlendMesh.prototype.setAnimationFPS = function (e, t) {
        var n = this.animationsMap[e];
        n && (n.fps = t, n.duration = (n.end - n.start) / n.fps)
      }, X.MorphBlendMesh.prototype.setAnimationDuration = function (e, t) {
        var n = this.animationsMap[e];
        n && (n.duration = t, n.fps = (n.end - n.start) / n.duration)
      }, X.MorphBlendMesh.prototype.setAnimationWeight = function (e, t) {
        var n = this.animationsMap[e];
        n && (n.weight = t)
      }, X.MorphBlendMesh.prototype.setAnimationTime = function (e, t) {
        var n = this.animationsMap[e];
        n && (n.time = t)
      }, X.MorphBlendMesh.prototype.getAnimationTime = function (e) {
        var t = 0,
          n = this.animationsMap[e];
        return n && (t = n.time), t
      }, X.MorphBlendMesh.prototype.getAnimationDuration = function (e) {
        var t = -1,
          n = this.animationsMap[e];
        return n && (t = n.duration), t
      }, X.MorphBlendMesh.prototype.playAnimation = function (e) {
        var t = this.animationsMap[e];
        t ? (t.time = 0, t.active = !0) : X.warn("THREE.MorphBlendMesh: animation[" + e + "] undefined in .playAnimation()")
      }, X.MorphBlendMesh.prototype.stopAnimation = function (e) {
        var t = this.animationsMap[e];
        t && (t.active = !1)
      }, X.MorphBlendMesh.prototype.update = function (e) {
        for (var t = 0, n = this.animationsList.length; t < n; t++) {
          var i = this.animationsList[t];
          if (i.active) {
            var r = i.duration / i.length;
            i.time += i.direction * e, i.mirroredLoop ? (i.time > i.duration || i.time < 0) && (i.direction *= -1, i.time > i.duration && (i.time = i.duration, i.directionBackwards = !0), i.time < 0 && (i.time = 0, i.directionBackwards = !1)) : (i.time = i.time % i.duration, i.time < 0 && (i.time += i.duration));
            var o = i.startFrame + X.Math.clamp(Math.floor(i.time / r), 0, i.length - 1),
              a = i.weight;
            o !== i.currentFrame && (this.morphTargetInfluences[i.lastFrame] = 0, this.morphTargetInfluences[i.currentFrame] = 1 * a, this.morphTargetInfluences[o] = 0, i.lastFrame = i.currentFrame, i.currentFrame = o);
            var s = i.time % r / r;
            i.directionBackwards && (s = 1 - s), this.morphTargetInfluences[i.currentFrame] = s * a, this.morphTargetInfluences[i.lastFrame] = (1 - s) * a
          }
        }
      }
  }).call(this, n(696)(e))
}, function (e, t, n) {
  "use strict";
  n.r(t), n.d(t, "LogLevels", (function () {
    return s
  })), n.d(t, "Logger", (function () {
    return l
  })), n.d(t, "logger", (function () {
    return h
  })), n.d(t, "setLogger", (function () {
    return d
  }));
  var i = n(3),
    r = n(6),
    o = Object(i.getGlobal)(),
    a = o,
    s = {
      DEBUG: 5,
      LOG: 4,
      INFO: 3,
      WARNING: 2,
      ERROR: 1,
      NONE: 0
    };

  function l() {
    this.runtimeStats = {}, this.level = -1, this.setLevel(s.ERROR), this._reportError = this._reportError.bind(this)
  }

  function c() {
    return "undefined" != typeof window ? encodeURI(a.location.href) : ""
  }

  function u() {}
  l.prototype.initialize = function (e) {
    if (e.eventCallback && (this.callback = e.eventCallback), this.sessionId = e.sessionId, !this.sessionId) {
      var t = Date.now() + "";
      this.sessionId = parseFloat((1e4 * Math.random() | 0) + "" + t.substring(4))
    }
    "number" == typeof e.logLevel && this.setLevel(e.logLevel), this.environmentInfo = {
      touch: Object(i.isTouchDevice)(),
      env: Object(r.getEnv)(),
      referer: c(),
      version: o.LMV_VIEWER_VERSION,
      build_type: o.LMV_BUILD_TYPE
    };
    var n = {
      category: "viewer_start",
      touch: this.environmentInfo.touch,
      env: this.environmentInfo.env,
      referer: this.environmentInfo.referer,
      version: this.environmentInfo.version,
      build_type: this.environmentInfo.build_type
    };
    this.track(n);
    var a = this;
    this.interval = setInterval((function () {
      a.reportRuntimeStats()
    }), 6e4)
  }, l.prototype.shutdown = function () {
    clearInterval(this.interval), this.interval = void 0
  }, l.prototype.track = function (e) {
    this.updateRuntimeStats(e), !Object(r.isOffline)() && this.sessionId && this.callback && (e.timestamp = Date.now(), e.sessionId = this.sessionId, this.callback(e))
  }, l.prototype.updateRuntimeStats = function (e) {
    if (e.hasOwnProperty("aggregate")) switch (e.aggregate) {
      case "count":
        this.runtimeStats[e.name] > 0 ? this.runtimeStats[e.name]++ : this.runtimeStats[e.name] = 1, this.runtimeStats._nonempty = !0;
        break;
      case "last":
        this.runtimeStats[e.name] = e.value, this.runtimeStats._nonempty = !0;
        break;
      default:
        this.warn("unknown log aggregate type")
    }
  }, l.prototype.reportRuntimeStats = function () {
    this.runtimeStats._nonempty && (delete this.runtimeStats._nonempty, this.runtimeStats.category = "misc_stats", this.track(this.runtimeStats), this.runtimeStats = {})
  }, l.prototype.setLevel = function (e) {
    this.level !== e && (this.level = e, this.debug = e >= s.DEBUG ? console.log : u, this.log = e >= s.LOG ? console.log : u, this.info = e >= s.INFO ? console.info : u, this.warn = e >= s.WARNING ? console.warn : u, this.error = e >= s.ERROR ? this._reportError : u)
  }, l.prototype._reportError = function () {
    if (this.callback) {
      var e = Array.prototype.slice.call(arguments).join(" ");
      this.callback({
        category: "error",
        message: e
      })
    }
    console.error.apply(console, arguments)
  };
  var h = new l;

  function d(e) {
    h = e
  }
}, function (e, t, n) {
  "use strict";
  var i = e.exports;
  i.ESCAPE_EVENT = "escape", i.PROGRESS_UPDATE_EVENT = "progress", i.FULLSCREEN_MODE_EVENT = "fullScreenMode", i.NAVIGATION_MODE_CHANGED_EVENT = "navmode", i.VIEWER_STATE_RESTORED_EVENT = "viewerStateRestored", i.VIEWER_RESIZE_EVENT = "viewerResize", i.VIEWER_INITIALIZED = "viewerInitialized", i.VIEWER_UNINITIALIZED = "viewerUninitialized", i.LOADER_LOAD_FILE_EVENT = "loaderLoadFile", i.LOADER_LOAD_ERROR_EVENT = "loaderLoadError", i.MODEL_ROOT_LOADED_EVENT = "svfLoaded", i.GEOMETRY_LOADED_EVENT = "geometryLoaded", i.TEXTURES_LOADED_EVENT = "texturesLoaded", i.OBJECT_TREE_CREATED_EVENT = "propertyDbLoaded", i.OBJECT_TREE_UNAVAILABLE_EVENT = "propertyDbUnavailable", i.OBJECT_TREE_LOAD_PROGRESS_EVENT = "propertyDbLoadProgress", i.MODEL_UNLOADED_EVENT = "modelUnloaded", i.MODEL_ADDED_EVENT = "modelAdded", i.MODEL_REMOVED_EVENT = "modelRemoved", i.MODEL_LAYERS_LOADED_EVENT = "modelLayersLoaded", i.EXTENSION_LOADED_EVENT = "extensionLoaded", i.EXTENSION_UNLOADED_EVENT = "extensionUnloaded", i.SELECTION_CHANGED_EVENT = "selection", i.AGGREGATE_SELECTION_CHANGED_EVENT = "aggregateSelection", i.ISOLATE_EVENT = "isolate", i.AGGREGATE_ISOLATION_CHANGED_EVENT = "aggregateIsolation", i.HIDE_EVENT = "hide", i.AGGREGATE_HIDDEN_CHANGED_EVENT = "aggregateHidden", i.SHOW_EVENT = "show", i.SHOW_PROPERTIES_EVENT = "showProperties", i.SHOW_ALL_EVENT = "showAll", i.CAMERA_CHANGE_EVENT = "cameraChanged", i.EXPLODE_CHANGE_EVENT = "explodeChanged", i.FIT_TO_VIEW_EVENT = "fitToView", i.AGGREGATE_FIT_TO_VIEW_EVENT = "aggregateFitToView", i.CUTPLANES_CHANGE_EVENT = "cutplanesChanged", i.TOOL_CHANGE_EVENT = "toolChanged", i.RENDER_OPTION_CHANGED_EVENT = "renderOptionChanged", i.FINAL_FRAME_RENDERED_CHANGED_EVENT = "finalFrameRenderedChanged", i.RENDER_PRESENTED_EVENT = "renderPresented", i.LAYER_VISIBILITY_CHANGED_EVENT = "layerVisibility", i.PREF_CHANGED_EVENT = "PrefChanged", i.PREF_RESET_EVENT = "PrefReset", i.RESTORE_DEFAULT_SETTINGS_EVENT = "restoreDefaultSettings", i.ANIMATION_READY_EVENT = "animationReady", i.CAMERA_TRANSITION_COMPLETED = "cameraTransitionCompleted", i.HYPERLINK_EVENT = "hyperlink", i.HYPERLINK_NAVIGATE = "hyperlink_navigate", i.LOAD_GEOMETRY_EVENT = "load_geometry", i.LOAD_MISSING_GEOMETRY = "loadMissingGeometry", i.WEBGL_CONTEXT_LOST_EVENT = "webglcontextlost", i.CANCEL_LEAFLET_SCREENSHOT = "cancelLeafletScreenshot", i.SET_VIEW_EVENT = "setView", i.RENDER_FIRST_PIXEL = "renderFirstPixel", i.PROFILE_CHANGE_EVENT = "profileChanged", i.RENDER_SCENE_PART = "renderScenePart"
}, function (e, t, n) {
  "use strict";
  n.r(t),
    function (e) {
      function i() {
        return "undefined" != typeof window && null !== window ? window : "undefined" != typeof self && null !== self ? self : e
      }
      n.d(t, "getGlobal", (function () {
        return i
      })), n.d(t, "isBrowser", (function () {
        return a
      })), n.d(t, "isNodeJS", (function () {
        return s
      })), n.d(t, "isIE11", (function () {
        return l
      })), n.d(t, "launchFullscreen", (function () {
        return c
      })), n.d(t, "exitFullscreen", (function () {
        return u
      })), n.d(t, "inFullscreen", (function () {
        return h
      })), n.d(t, "fullscreenElement", (function () {
        return d
      })), n.d(t, "isFullscreenAvailable", (function () {
        return f
      })), n.d(t, "getAndroidVersion", (function () {
        return p
      })), n.d(t, "isTouchDevice", (function () {
        return m
      })), n.d(t, "isIOSDevice", (function () {
        return v
      })), n.d(t, "isAndroidDevice", (function () {
        return b
      })), n.d(t, "isMobileDevice", (function () {
        return _
      })), n.d(t, "isSafari", (function () {
        return x
      })), n.d(t, "isFirefox", (function () {
        return w
      })), n.d(t, "isChrome", (function () {
        return E
      })), n.d(t, "isMac", (function () {
        return A
      })), n.d(t, "isWindows", (function () {
        return S
      })), n.d(t, "ObjectAssign", (function () {
        return M
      })), n.d(t, "disableDocumentTouchSafari", (function () {
        return C
      })), n.d(t, "enableDocumentTouchSafari", (function () {
        return P
      })), n.d(t, "touchStartToClick", (function () {
        return L
      }));
      var r = i(),
        o = r && r.document,
        a = "undefined" != typeof navigator,
        s = function () {
          return !a
        },
        l = a && !!navigator.userAgent.match(/Edge|Trident\/7\./);

      function c(e, t) {
        e.requestFullscreen ? e.requestFullscreen(t) : e.mozRequestFullScreen ? e.mozRequestFullScreen(t) : e.webkitRequestFullscreen ? e.webkitRequestFullscreen(t) : e.msRequestFullscreen && e.msRequestFullscreen(t)
      }

      function u(e) {
        h(e) && (e.exitFullscreen ? e.exitFullscreen() : e.mozCancelFullScreen ? e.mozCancelFullScreen() : e.webkitExitFullscreen ? e.webkitExitFullscreen() : e.msExitFullscreen && e.msExitFullscreen())
      }

      function h(e) {
        return "webkitIsFullScreen" in e ? !!e.webkitIsFullScreen : "fullscreenElement" in e ? !!e.fullscreenElement : "mozFullScreenElement" in e ? !!e.mozFullScreenElement : "msFullscreenElement" in e ? !!e.msFullscreenElement : !!e.querySelector(".viewer-fill-browser")
      }

      function d(e) {
        return e.fullscreenElement || e.mozFullScreenElement || e.webkitFullscreenElement || e.msFullscreenElement
      }

      function f(e) {
        return e.requestFullscreen || e.mozRequestFullScreen || e.webkitRequestFullscreen || e.msRequestFullscreen
      }

      function p(e) {
        var t = (e = e || navigator.userAgent).match(/Android\s([0-9\.]*)/);
        return !!t && t[1]
      }

      function m() {
        return "undefined" != typeof window && ("ontouchstart" in window || navigator.maxTouchPoints > 0)
      }
      "undefined" != typeof window && l && function () {
        function e(e, t) {
          t = t || {
            bubbles: !1,
            cancelable: !1,
            detail: void 0
          };
          var n = o.createEvent("CustomEvent");
          return n.initCustomEvent(e, t.bubbles, t.cancelable, t.detail), n
        }
        e.prototype = r.CustomEvent.prototype, r.CustomEvent = e
      }(), ArrayBuffer.prototype.slice || (ArrayBuffer.prototype.slice = function (e, t) {
        if (!t || t > this.byteLength ? t = this.byteLength : t < 0 && (t = this.byteLength + t) < 0 && (t = 0), e < 0 && (e = this.byteLength + e) < 0 && (e = 0), t <= e) return new ArrayBuffer;
        for (var n = t - e, i = new Uint8Array(this, e, n), r = new Uint8Array(n), o = 0; o < n; o++) r[o] = i[o];
        return r.buffer
      }), Math.log2 = Math.log2 || function (e) {
        return Math.log(e) / Math.LN2
      }, "undefined" != typeof window && (r.BlobBuilder = r.BlobBuilder || r.WebKitBlobBuilder || r.MozBlobBuilder || r.MSBlobBuilder);
      var g = a && (/ip(ad|hone|od)/.test(navigator.userAgent.toLowerCase()) || "MacIntel" === navigator.platform && navigator.maxTouchPoints > 1);

      function v() {
        return g
      }
      var y = a && -1 !== navigator.userAgent.toLowerCase().indexOf("android");

      function b() {
        return y
      }

      function _() {
        return !!a && (v() || b())
      }

      function x() {
        if (!a) return !1;
        var e = navigator.userAgent.toLowerCase();
        return -1 !== e.indexOf("safari") && -1 === e.indexOf("chrome")
      }

      function w() {
        return !!a && -1 !== navigator.userAgent.toLowerCase().indexOf("firefox")
      }

      function E() {
        return !!a && -1 !== navigator.userAgent.toLowerCase().indexOf("chrome")
      }

      function A() {
        return !!a && -1 !== navigator.userAgent.toLowerCase().indexOf("mac os")
      }

      function S() {
        if (!a) return !1;
        var e = navigator.userAgent.toLowerCase();
        return -1 !== e.indexOf("win32") || -1 !== e.indexOf("windows")
      }

      function M(e, t) {
        for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
        return e
      }

      function T(e) {
        var t = r.hasOwnProperty("pageXOffset") ? r.pageXOffset : o.documentElement.scrollLeft,
          n = r.hasOwnProperty("pageYOffset") ? r.pageYOffset : o.documentElement.scrollTop,
          i = void 0 === e.pageX ? e.changedTouches[0].pageX : e.pageX,
          a = void 0 === e.pageY ? e.changedTouches[0].pageY : e.pageY,
          s = o.elementFromPoint(i - t, a - n);
        return !s || "CANVAS" !== s.nodeName || (!!s.getAttribute(!0) || (e.preventDefault(), !1))
      }

      function C() {
        _() && x() && (o.documentElement.addEventListener("touchstart", T, !0), o.documentElement.addEventListener("touchmove", T, !0), o.documentElement.addEventListener("touchcanceled", T, !0), o.documentElement.addEventListener("touchend", T, !0))
      }

      function P() {
        _() && x() && (o.documentElement.removeEventListener("touchstart", T, !0), o.documentElement.removeEventListener("touchmove", T, !0), o.documentElement.removeEventListener("touchcanceled", T, !0), o.documentElement.removeEventListener("touchend", T, !0))
      }

      function L(e) {
        e.target.className && (e.target.className.indexOf("fullscreen") > -1 || e.target.className.indexOf("webvr") > -1) || (e.preventDefault(), e.stopPropagation(), e.target.click())
      }! function () {
        var e = i();
        e.performance || (e.performance = Date)
      }(), Number.isInteger = Number.isInteger || function (e) {
        return "number" == typeof e && isFinite(e) && Math.floor(e) === e
      }, String.prototype.repeat = String.prototype.repeat || function (e) {
        if (e < 1) return "";
        for (var t = "", n = this.valueOf(); e > 1;) 1 & e && (t += n), e >>= 1, n += n;
        return t + n
      }, Array.prototype.fill || Object.defineProperty(Array.prototype, "fill", {
        enumerable: !1,
        value: function (e, t, n) {
          t = void 0 === t ? 0 : t, n = void 0 === n ? this.length : n;
          for (var i = t; i < n; ++i) this[i] = e
        }
      }), Int32Array.prototype.lastIndexOf = Int32Array.prototype.lastIndexOf || function (e, t) {
        return Array.prototype.lastIndexOf.call(this, e, t)
      }, Array.prototype.find || Object.defineProperty(Array.prototype, "find", {
        enumerable: !1,
        value: function (e, t) {
          for (var n = this.length, i = 0; i < n; ++i) {
            var r = this[i];
            if (e.call(t, r, i, this)) return r
          }
        }
      }), "function" != typeof Object.assign && Object.defineProperty(Object, "assign", {
        value: function (e, t) {
          if (null == e) throw new TypeError("Cannot convert undefined or null to object");
          for (var n = Object(e), i = 1; i < arguments.length; i++) {
            var r = arguments[i];
            if (null != r)
              for (var o in r) Object.prototype.hasOwnProperty.call(r, o) && (n[o] = r[o])
          }
          return n
        },
        writable: !0,
        configurable: !0
      }), "undefined" == typeof window || !l && !v() || HTMLCanvasElement.prototype.toBlob || Object.defineProperty(HTMLCanvasElement.prototype, "toBlob", {
        value: function (e, t, n) {
          var i = this;
          setTimeout((function () {
            for (var r = atob(i.toDataURL(t, n).split(",")[1]), o = r.length, a = new Uint8Array(o), s = 0; s < o; s++) a[s] = r.charCodeAt(s);
            e(new Blob([a], {
              type: t || "image/png"
            }))
          }))
        }
      }), Uint8Array.prototype.slice || (Uint8Array.prototype.slice = function (e, t) {
        if (t = void 0 !== t ? t : this.length, "[object Array]" === Object.prototype.toString.call(this)) return _slice.call(this, e, t);
        var n, i, r = [],
          o = this.length,
          a = e || 0;
        a = a >= 0 ? a : Math.max(0, o + a);
        var s = "number" == typeof t ? Math.min(t, o) : o;
        if (t < 0 && (s = o + t), (i = s - a) > 0)
          if (r = new Array(i), this.charAt)
            for (n = 0; n < i; n++) r[n] = this.charAt(a + n);
          else
            for (n = 0; n < i; n++) r[n] = this[a + n];
        return r
      })
    }.call(this, n(151))
}, function (e, t, n) {
  var i = n(17),
    r = n(60).f,
    o = n(56),
    a = n(68),
    s = n(209),
    l = n(286),
    c = n(156);
  e.exports = function (e, t) {
    var n, u, h, d, f, p = e.target,
      m = e.global,
      g = e.stat;
    if (n = m ? i : g ? i[p] || s(p, {}) : (i[p] || {}).prototype)
      for (u in t) {
        if (d = t[u], h = e.noTargetGet ? (f = r(n, u)) && f.value : n[u], !c(m ? u : p + (g ? "." : "#") + u, e.forced) && void 0 !== h) {
          if (typeof d == typeof h) continue;
          l(d, h)
        }(e.sham || h && h.sham) && o(d, "sham", !0), a(n, u, d, e)
      }
  }
}, function (e, t, n) {
  "use strict";
  n.r(t), n.d(t, "Prefs3D", (function () {
    return i
  })), n.d(t, "Prefs2D", (function () {
    return r
  })), n.d(t, "Prefs", (function () {
    return o
  })), n.d(t, "VIEW_TYPES", (function () {
    return a
  }));
  var i = {
      VIEW_CUBE: "viewCube",
      VIEW_CUBE_COMPASS: "viewCubeCompass",
      VIEW_TYPE: "viewType",
      ALWAYS_USE_PIVOT: "alwaysUsePivot",
      ZOOM_TOWARDS_PIVOT: "zoomTowardsPivot",
      SELECTION_SETS_PIVOT: "selectionSetsPivot",
      REVERSE_HORIZONTAL_LOOK_DIRECTION: "reverseHorizontalLookDirection",
      REVERSE_VERTICAL_LOOK_DIRECTION: "reverseVerticalLookDirection",
      ORBIT_PAST_WORLD_POLES: "orbitPastWorldPoles",
      CLICK_TO_SET_COI: "clickToSetCOI",
      GHOSTING: "ghosting",
      OPTIMIZE_NAVIGATION: "optimizeNavigation",
      AMBIENT_SHADOWS: "ambientShadows",
      ANTIALIASING: "antialiasing",
      GROUND_SHADOW: "groundShadow",
      GROUND_REFLECTION: "groundReflection",
      LINE_RENDERING: "lineRendering",
      EDGE_RENDERING: "edgeRendering",
      LIGHT_PRESET: "lightPreset",
      ENV_MAP_BACKGROUND: "envMapBackground",
      FIRST_PERSON_TOOL_POPUP: "firstPersonToolPopup",
      BIM_WALK_TOOL_POPUP: "bimWalkToolPopup",
      BIM_WALK_NAVIGATOR_TYPE: "bimWalkNavigatorType",
      DEFAULT_NAVIGATION_TOOL_3D: "defaultNavigationTool3D",
      SELECTION_MODE: "selectionMode",
      ENABLE_CUSTOM_ORBIT_TOOL_CURSOR: "enableCustomOrbitToolCursor",
      EXPLODE_STRATEGY: "explodeStrategy"
    },
    r = {
      GRAYSCALE: "grayscale",
      SWAP_BLACK_AND_WHITE: "swapBlackAndWhite",
      LOADING_ANIMATION: "loadingAnimation",
      FORCE_PDF_CALIBRATION: "forcePDFCalibration",
      FORCE_LEAFLET_CALIBRATION: "forceLeafletCalibration"
    },
    o = {
      PROGRESSIVE_RENDERING: "progressiveRendering",
      OPEN_PROPERTIES_ON_SELECT: "openPropertiesOnSelect",
      POINT_RENDERING: "pointRendering",
      BACKGROUND_COLOR_PRESET: "backgroundColorPreset",
      REVERSE_MOUSE_ZOOM_DIR: "reverseMouseZoomDir",
      LEFT_HANDED_MOUSE_SETUP: "leftHandedMouseSetup",
      FUSION_ORBIT: "fusionOrbit",
      FUSION_ORBIT_CONSTRAINED: "fusionOrbitConstrained",
      WHEEL_SETS_PIVOT: "wheelSetsPivot",
      RESTORE_SESSION_MEASUREMENTS: "restoreMeasurements"
    },
    a = {
      DEFAULT: 0,
      ORTHOGRAPHIC: 1,
      PERSPECTIVE: 2,
      PERSPECTIVE_ORTHO_FACES: 3
    }
}, function (e, t, n) {
  "use strict";
  n.r(t), n.d(t, "getEnv", (function () {
    return m
  })), n.d(t, "setEnv", (function () {
    return g
  })), n.d(t, "isOffline", (function () {
    return y
  })), n.d(t, "setOffline", (function () {
    return b
  })), n.d(t, "setOfflineResourcePrefix", (function () {
    return x
  })), n.d(t, "getOfflineResourcePrefix", (function () {
    return w
  })), n.d(t, "endpoint", (function () {
    return E
  })), n.d(t, "initLoadContext", (function () {
    return A
  }));
  var i = n(3),
    r = n(16),
    o = Object(i.getGlobal)(),
    a = {},
    s = null;
  a.ENDPOINT_API_DERIVATIVE_SERVICE_V2 = "derivativeV2", a.ENDPOINT_API_MODEL_DERIVATIVE_V2 = "modelDerivativeV2", a.ENDPOINT_API_FLUENT = "fluent";
  var l, c = {
      derivativeV2: {
        baseURL: "/derivativeservice/v2",
        itemURL: "/derivativeservice/v2/derivatives/:derivativeurn",
        manifestURL: "/derivativeservice/v2/manifest/:urn",
        thumbnailsURL: "/derivativeservice/v2/thumbnails/:urn"
      },
      derivativeV2_EU: {
        baseURL: "/derivativeservice/v2/regions/eu",
        itemURL: "/derivativeservice/v2/regions/eu/derivatives/:derivativeurn",
        manifestURL: "/derivativeservice/v2/regions/eu/manifest/:urn",
        thumbnailsURL: "/derivativeservice/v2/regions/eu/thumbnails/:urn"
      },
      modelDerivativeV2: {
        baseURL: "/modelderivative/v2/",
        itemURL: "/modelderivative/v2/designdata/:urn/manifest/:derivativeurn",
        manifestURL: "/modelderivative/v2/designdata/:urn/manifest",
        thumbnailsURL: "/modelderivative/v2/designdata/:urn/thumbnail"
      },
      fluent: {
        baseURL: "/modeldata",
        itemURL: "/modeldata/file/:derivativeurn",
        manifestURL: "/modeldata/manifest/:urn",
        thumbnailsURL: "/derivativeservice/v2/thumbnails/:urn",
        cdnURL: "/cdn",
        cdnWS: "/cdnws"
      }
    },
    u = "",
    h = a.ENDPOINT_API_DERIVATIVE_SERVICE_V2,
    d = !1,
    f = !1,
    p = "";

  function m() {
    return l
  }

  function g(e) {
    l = e
  }
  a.HTTP_REQUEST_HEADERS = {}, a.queryParams = {}, a.setEndpointAndApi = function (e, t) {
    u = e, t && (h = t)
  }, a.getEndpointAndApi = function () {
    return u + c[h].baseURL
  }, a.getApiEndpoint = function () {
    return u
  }, a.getApiFlavor = function () {
    return h
  }, a.getCdnUrl = function () {
    return s || (u ? u + c[h].cdnURL : void 0)
  }, a.getCdnWebSocketEndpoint = function () {
    return u + (c[h].cdnWS || "")
  }, a.setCdnUrl = function (e) {
    s = e
  }, a.getCdnRedirectUrl = function () {
    var e = c[h].cdnRedirectURL;
    return e ? u + e : null
  }, a.setAcmSession = function (e) {
    p = e
  }, a.getAcmSession = function () {
    return p
  }, a.getManifestApi = function (e, t, n) {
    var i = e || u;
    return t = t || "", i = (i += c[n = n || h].manifestURL).replace(":urn", t)
  }, a.getItemApi = function (e, t, n) {
    var i = n || h,
      r = (e || u) + c[i].itemURL;
    t = t || "";
    var o = decodeURIComponent(t);
    if (-1 !== r.indexOf(":urn")) {
      var s = o.split("/")[0] || "";
      s = (s = s.split(":"))[s.length - 1] || "", r = r.replace(":urn", s)
    }
    return i === a.ENDPOINT_API_MODEL_DERIVATIVE_V2 && (t = encodeURIComponent(o)), r = r.replace(":derivativeurn", t)
  }, a.getThumbnailApi = function (e, t, n) {
    return ((e || u) + c[n || h].thumbnailsURL).replace(":urn", t || "")
  }, a.getUseCredentials = function () {
    return d
  }, a.getDomainParam = function () {
    return console.warn("getDomainParam is deprecated, switch to getQueryParams instead."), this.getUseCredentials() && !Object(i.isNodeJS)() ? "domain=" + encodeURIComponent(o.location.origin) : ""
  }, a.addQueryParam = function (e, t) {
    this.queryParams[e] = t
  }, a.deleteQueryParam = function (e) {
    delete this.queryParams[e]
  }, a.getQueryParams = function (e) {
    var t = this.getUseCredentials() && !Object(i.isNodeJS)() ? "domain=" + encodeURIComponent(o.location.origin) : "";
    Object(r.getParameterByName)("bypassds") && (t = t ? t + "&bypassds=1" : "bypassds=1");
    var n = [];
    for (var a in this.queryParams) n.push(encodeURIComponent(a) + "=" + encodeURIComponent(this.queryParams[a]));
    return n.length && (t ? t += "&" + n.join("&") : t = n.join("&")), t && e && (e.queryParams ? e.queryParams += "&" + t : e.queryParams = t), t
  }, a.setUseCredentials = function (e) {
    d = e
  }, a.setUseCookie = function (e) {
    f = e
  }, a.getUseCookie = function () {
    return f
  }, a.initLoadContext = function (e) {
    for (var t in (e = e || {}).auth = this.getUseCredentials(), e.endpoint || (e.endpoint = this.getApiEndpoint()), e.api || (e.api = this.getApiFlavor()), e.headers || (e.headers = {}), this.HTTP_REQUEST_HEADERS) e.headers[t] = this.HTTP_REQUEST_HEADERS[t];
    return e.api === this.ENDPOINT_API_FLUENT && (e.supportsRangeRequests = !0), this.getQueryParams(e), e.otg_cdn = s || this.getCdnUrl(), e.otg_ws = this.getCdnWebSocketEndpoint(), e
  };
  var v = !1;

  function y() {
    return v
  }

  function b(e) {
    v = e
  }
  var _ = "";

  function x(e) {
    _ = e
  }

  function w() {
    return _
  }
  var E = a,
    A = a.initLoadContext.bind(a)
}, function (e, t, n) {
  var i = n(22);
  e.exports = function (e) {
    if (!i(e)) throw TypeError(String(e) + " is not an object");
    return e
  }
}, function (e, t, n) {
  "use strict";
  n.r(t), n.d(t, "i18n", (function () {
    return U
  }));
  var i = n(16),
    r = n(3);

  function o(e) {
    return (o = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (e) {
      return typeof e
    } : function (e) {
      return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
    })(e)
  }
  var a = Object(r.getGlobal)(),
    s = a,
    l = s && s.document,
    c = null;
  Array.prototype.indexOf || (Array.prototype.indexOf = function (e) {
    if (null == this) throw new TypeError;
    var t = Object(this),
      n = t.length >>> 0;
    if (0 === n) return -1;
    var i = 0;
    if (arguments.length > 0 && ((i = Number(arguments[1])) != i ? i = 0 : 0 != i && i != 1 / 0 && i != -1 / 0 && (i = (i > 0 || -1) * Math.floor(Math.abs(i)))), i >= n) return -1;
    for (var r = i >= 0 ? i : Math.max(n - Math.abs(i), 0); r < n; r++)
      if (r in t && t[r] === e) return r;
    return -1
  }), Array.prototype.lastIndexOf || (Array.prototype.lastIndexOf = function (e) {
    if (null == this) throw new TypeError;
    var t = Object(this),
      n = t.length >>> 0;
    if (0 === n) return -1;
    var i = n;
    arguments.length > 1 && ((i = Number(arguments[1])) != i ? i = 0 : 0 != i && i != 1 / 0 && i != -1 / 0 && (i = (i > 0 || -1) * Math.floor(Math.abs(i))));
    for (var r = i >= 0 ? Math.min(i, n - 1) : n - Math.abs(i); r >= 0; r--)
      if (r in t && t[r] === e) return r;
    return -1
  }), "function" != typeof String.prototype.trim && (String.prototype.trim = function () {
    return this.replace(/^\s+|\s+$/g, "")
  });
  var u, h = a,
    d = h.jQuery || h.Zepto,
    f = {},
    p = 0,
    m = [],
    g = !1,
    v = {
      lng: void 0,
      load: "current",
      preload: [],
      lowerCaseLng: !1,
      returnObjectTrees: !1,
      fallbackLng: ["dev"],
      fallbackNS: [],
      detectLngQS: "setLng",
      ns: "translation",
      fallbackOnNull: !0,
      fallbackOnEmpty: !1,
      fallbackToDefaultNS: !1,
      nsseparator: ":",
      keyseparator: ".",
      selectorAttr: "data-i18n",
      debug: !1,
      resGetPath: "res/locales/__lng__/__ns__.json",
      resPostPath: "res/locales/add/__lng__/__ns__",
      getAsync: !0,
      postAsync: !0,
      resStore: void 0,
      useLocalStorage: !1,
      localStorageExpirationTime: 6048e5,
      dynamicLoad: !1,
      sendMissing: !1,
      sendMissingTo: "fallback",
      sendType: "POST",
      interpolationPrefix: "__",
      interpolationSuffix: "__",
      reusePrefix: "$t(",
      reuseSuffix: ")",
      pluralSuffix: "_plural",
      pluralNotFound: ["plural_not_found", Math.random()].join(""),
      contextNotFound: ["context_not_found", Math.random()].join(""),
      escapeInterpolation: !1,
      defaultValueFromContent: !0,
      useDataAttrOptions: !1,
      cookieExpirationTime: void 0,
      useCookie: !0,
      cookieName: "i18next",
      cookieDomain: void 0,
      objectTreeKeyHandler: void 0,
      postProcess: void 0,
      parseMissingKey: void 0,
      shortcutFunction: "sprintf"
    };
  var y = {
    "&": "&amp;",
    "<": "&lt;",
    ">": "&gt;",
    '"': "&quot;",
    "'": "&#39;",
    "/": "&#x2F;"
  };
  var b = {
      create: function (e, t, n, i) {
        var r;
        if (n) {
          var o = new Date;
          o.setTime(o.getTime() + 60 * n * 1e3), r = "; expires=" + o.toGMTString()
        } else r = "";
        i = i ? "domain=" + i + ";" : "", l.cookie = e + "=" + t + r + ";" + i + "path=/"
      },
      read: function (e) {
        for (var t = e + "=", n = l.cookie.split(";"), i = 0; i < n.length; i++) {
          for (var r = n[i];
            " " == r.charAt(0);) r = r.substring(1, r.length);
          if (0 === r.indexOf(t)) return r.substring(t.length, r.length)
        }
        return null
      },
      remove: function (e) {
        this.create(e, "", -1)
      }
    },
    _ = {
      extend: d ? d.extend : function (e, t) {
        if (!t || "function" == typeof t) return e;
        for (var n in t) e[n] = t[n];
        return e
      },
      each: d ? d.each : function (e, t, n) {
        var i, r = 0,
          o = e.length,
          a = void 0 === o || "[object Array]" !== Object.prototype.toString.apply(e) || "function" == typeof e;
        if (n)
          if (a) {
            for (i in e)
              if (!1 === t.apply(e[i], n)) break
          } else
            for (; r < o && !1 !== t.apply(e[r++], n););
        else if (a) {
          for (i in e)
            if (!1 === t.call(e[i], i, e[i])) break
        } else
          for (; r < o && !1 !== t.call(e[r], r, e[r++]););
        return e
      },
      ajax: d ? d.ajax : void 0 !== l ? function (e) {
        var t = function (e) {
            var t = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";
            e = function (e) {
              e = e.replace(/\r\n/g, "\n");
              for (var t = "", n = 0; n < e.length; n++) {
                var i = e.charCodeAt(n);
                i < 128 ? t += String.fromCharCode(i) : i > 127 && i < 2048 ? (t += String.fromCharCode(i >> 6 | 192), t += String.fromCharCode(63 & i | 128)) : (t += String.fromCharCode(i >> 12 | 224), t += String.fromCharCode(i >> 6 & 63 | 128), t += String.fromCharCode(63 & i | 128))
              }
              return t
            }(e);
            var n, i, r, o, a, s, l, c = "",
              u = 0;
            do {
              o = (n = e.charCodeAt(u++)) >> 2, a = (3 & n) << 4 | (i = e.charCodeAt(u++)) >> 4, s = (15 & i) << 2 | (r = e.charCodeAt(u++)) >> 6, l = 63 & r, isNaN(i) ? s = l = 64 : isNaN(r) && (l = 64), c += t.charAt(o) + t.charAt(a) + t.charAt(s) + t.charAt(l), n = i = r = "", o = a = s = l = ""
            } while (u < e.length);
            return c
          },
          n = function e(t, n, i, r) {
            "function" == typeof i && (r = i, i = {}), i.doNotCache = i.doNotCache || !1, i.data = i.data || {}, i.headers = i.headers || {}, i.jsonp = i.jsonp || !1, i.async = void 0 === i.async || i.async;
            var o, a = function () {
              for (var e = arguments[0], t = 1; t < arguments.length; t++) {
                var n = arguments[t];
                for (var i in n) n.hasOwnProperty(i) && (e[i] = n[i])
              }
              return e
            }({
              accept: "*/*",
              "content-type": "application/x-www-form-urlencoded;charset=UTF-8"
            }, e.headers, i.headers);
            if (o = "application/json" === a["content-type"] ? JSON.stringify(i.data) : function (e) {
                if ("string" == typeof e) return e;
                var t = [];
                for (var n in e) e.hasOwnProperty(n) && t.push(encodeURIComponent(n) + "=" + encodeURIComponent(e[n]));
                return t.join("&")
              }(i.data), "GET" === t) {
              var c = [];
              if (o && (c.push(o), o = null), i.doNotCache && c.push("_=" + (new Date).getTime()), i.jsonp && (c.push("callback=" + i.jsonp), c.push("jsonp=" + i.jsonp)), (c = c.join("&")).length > 1 && (n.indexOf("?") > -1 ? n += "&" + c : n += "?" + c), i.jsonp) {
                var u = l.getElementsByTagName("head")[0],
                  h = l.createElement("script");
                return h.type = "text/javascript", h.src = n, void u.appendChild(h)
              }
            }! function (e) {
              if (s.XMLHttpRequest) return e(null, new XMLHttpRequest);
              if (s.ActiveXObject) try {
                return e(null, new ActiveXObject("Msxml2.XMLHTTP"))
              } catch (t) {
                return e(null, new ActiveXObject("Microsoft.XMLHTTP"))
              }
              e(new Error)
            }((function (e, s) {
              if (e) return r(e);
              for (var l in s.open(t, n, i.async), a) a.hasOwnProperty(l) && s.setRequestHeader(l, a[l]);
              s.onreadystatechange = function () {
                if (4 === s.readyState) {
                  var e = s.responseText || "";
                  if (!r) return;
                  r(s.status, e)
                }
              }, s.send(o)
            }))
          };
        ({
          authBasic: function (e, i) {
            n.headers.Authorization = "Basic " + t(e + ":" + i)
          },
          connect: function (e, t, i) {
            return n("CONNECT", e, t, i)
          },
          del: function (e, t, i) {
            return n("DELETE", e, t, i)
          },
          get: function (e, t, i) {
            return n("GET", e, t, i)
          },
          head: function (e, t, i) {
            return n("HEAD", e, t, i)
          },
          headers: function (e) {
            n.headers = e || {}
          },
          isAllowed: function (e, t, n) {
            this.options(e, (function (e, i) {
              n(-1 !== i.text().indexOf(t))
            }))
          },
          options: function (e, t, i) {
            return n("OPTIONS", e, t, i)
          },
          patch: function (e, t, i) {
            return n("PATCH", e, t, i)
          },
          post: function (e, t, i) {
            return n("POST", e, t, i)
          },
          put: function (e, t, i) {
            return n("PUT", e, t, i)
          },
          trace: function (e, t, i) {
            return n("TRACE", e, t, i)
          }
        })[e.type ? e.type.toLowerCase() : "get"](e.url, e, (function (t, n) {
          200 === t ? e.success(n, t, null) : e.error(n, t, null)
        }))
      } : function () {},
      cookie: void 0 !== l ? b : {
        create: function (e, t, n, i) {},
        read: function (e) {
          return null
        },
        remove: function (e) {}
      },
      detectLanguage: function () {
        var e, t = [];
        "undefined" != typeof window && (! function () {
          for (var e = s.location.search.substring(1).split("&"), n = 0; n < e.length; n++) {
            var i = e[n].indexOf("=");
            if (i > 0) {
              var r = e[n].substring(0, i),
                o = e[n].substring(i + 1);
              t[r] = o
            }
          }
        }(), t[v.detectLngQS] && (e = t[v.detectLngQS]));
        if (!e && void 0 !== l && v.useCookie) {
          var n = _.cookie.read(v.cookieName);
          n && (e = n)
        }
        e || "undefined" == typeof navigator || (e = navigator.language ? navigator.language : navigator.userLanguage);
        return e
      },
      escape: function (e) {
        return "string" == typeof e ? e.replace(/[&<>"'\/]/g, (function (e) {
          return y[e]
        })) : e
      },
      log: function (e) {
        v.debug && "undefined" != typeof console && console.log(e)
      },
      toLanguages: function (e) {
        var t = [];
        if ("string" == typeof e && e.indexOf("-") > -1) {
          var n = e.split("-");
          e = v.lowerCaseLng ? n[0].toLowerCase() + "-" + n[1].toLowerCase() : n[0].toLowerCase() + "-" + n[1].toUpperCase(), "unspecific" !== v.load && t.push(e), "current" !== v.load && t.push(n[0])
        } else t.push(e);
        for (var i = 0; i < v.fallbackLng.length; i++) - 1 === t.indexOf(v.fallbackLng[i]) && v.fallbackLng[i] && t.push(v.fallbackLng[i]);
        return t
      },
      regexEscape: function (e) {
        return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g, "\\$&")
      }
    };

  function x(e, t) {
    "function" == typeof e && (t = e, e = {}), e = e || {}, _.extend(v, e), delete v.fixLng, "string" == typeof v.ns && (v.ns = {
      namespaces: [v.ns],
      defaultNs: v.ns
    }), "string" == typeof v.fallbackNS && (v.fallbackNS = [v.fallbackNS]), "string" != typeof v.fallbackLng && "boolean" != typeof v.fallbackLng || (v.fallbackLng = [v.fallbackLng]), v.interpolationPrefixEscaped = _.regexEscape(v.interpolationPrefix), v.interpolationSuffixEscaped = _.regexEscape(v.interpolationSuffix), v.lng || (v.lng = _.detectLanguage()), v.lng ? v.useCookie && _.cookie.create(v.cookieName, v.lng, v.cookieExpirationTime, v.cookieDomain) : (v.lng = v.fallbackLng[0], v.useCookie && _.cookie.remove(v.cookieName)), m = _.toLanguages(v.lng), u = m[0], _.log("currentLng set to: " + u);
    var n = T;
    if (e.fixLng && ((n = function (e, t) {
        return (t = t || {}).lng = t.lng || n.lng, T(e, t)
      }).lng = u), R.setCurrentLng(u), v.resStore) return _.each(v.resStore, (function (e, t) {
      _.each(t, (function (t, n) {
        w(e, t, n)
      }))
    })), g = !0, void(t && t(n));
    var i = _.toLanguages(v.lng);
    "string" == typeof v.preload && (v.preload = [v.preload]);
    for (var r = 0, o = v.preload.length; r < o; r++)
      for (var a = _.toLanguages(v.preload[r]), s = 0, l = a.length; s < l; s++) i.indexOf(a[s]) < 0 && i.push(a[s]);
    Autodesk.Viewing.i18n.sync.load(i, v, (function (e, i) {
      _.each(i, (function (e, t) {
        _.each(t, (function (t, n) {
          w(e, t, n)
        }))
      })), g = !0, t && t(n)
    }))
  }

  function w(e, t, n) {
    "string" != typeof t ? (n = t, t = v.ns.defaultNs) : v.ns.namespaces.indexOf(t) < 0 && v.ns.namespaces.push(t), f[e] = f[e] || {}, f[e][t] = f[e][t] || {}, _.extend(f[e][t], n)
  }

  function E(e, t) {
    var n = {
        dynamicLoad: v.dynamicLoad,
        resGetPath: v.resGetPath,
        getAsync: v.getAsync,
        customLoad: v.customLoad,
        ns: {
          namespaces: e,
          defaultNs: ""
        }
      },
      i = _.toLanguages(v.lng);
    "string" == typeof v.preload && (v.preload = [v.preload]);
    for (var r = 0, o = v.preload.length; r < o; r++)
      for (var a = _.toLanguages(v.preload[r]), s = 0, l = a.length; s < l; s++) i.indexOf(a[s]) < 0 && i.push(a[s]);
    for (var c = [], u = 0, h = i.length; u < h; u++) {
      var d = !1,
        p = f[i[u]];
      if (p)
        for (var m = 0, g = e.length; m < g; m++) p[e[m]] || (d = !0);
      else d = !0;
      d && c.push(i[u])
    }
    c.length ? I._fetch(c, n, (function (n, i) {
      var r = e.length * c.length;
      _.each(e, (function (e, n) {
        v.ns.namespaces.indexOf(n) < 0 && v.ns.namespaces.push(n), _.each(c, (function (e, o) {
          f[o] = f[o] || {}, f[o][n] = i[o][n], 0 === --r && t && (v.useLocalStorage && I._storeLocal(f), t())
        }))
      }))
    })) : t && t()
  }

  function A(e, t, n, i) {
    if (!e) return e;
    if (i = i || t, e.indexOf(i.interpolationPrefix || v.interpolationPrefix) < 0) return e;
    var r = i.interpolationPrefix ? _.regexEscape(i.interpolationPrefix) : v.interpolationPrefixEscaped,
      a = i.interpolationSuffix ? _.regexEscape(i.interpolationSuffix) : v.interpolationSuffixEscaped,
      s = "HTML" + a;
    return _.each(t, (function (t, l) {
      var c = n ? n + v.keyseparator + t : t;
      e = "object" === o(l) && null !== l ? A(e, l, c, i) : i.escapeInterpolation || v.escapeInterpolation ? (e = e.replace(new RegExp([r, c, s].join(""), "g"), l)).replace(new RegExp([r, c, a].join(""), "g"), _.escape(l)) : e.replace(new RegExp([r, c, a].join(""), "g"), l)
    })), e
  }

  function S(e, t) {
    var n = _.extend({}, t);
    for (delete n.postProcess; - 1 != e.indexOf(v.reusePrefix) && !(++p > v.maxRecursion);) {
      var i = e.lastIndexOf(v.reusePrefix),
        r = e.indexOf(v.reuseSuffix, i) + v.reuseSuffix.length,
        o = e.substring(i, r),
        a = o.replace(v.reusePrefix, "").replace(v.reuseSuffix, "");
      if (-1 != a.indexOf(",")) {
        var s = a.indexOf(",");
        if (-1 != a.indexOf("{", s) && -1 != a.indexOf("}", s)) {
          var l = a.indexOf("{", s),
            c = a.indexOf("}", l) + "}".length;
          try {
            n = _.extend(n, JSON.parse(a.substring(l, c))), a = a.substring(0, s)
          } catch (e) {}
        }
      }
      var u = L(a, n);
      e = e.replace(o, u)
    }
    return e
  }

  function M(e, t) {
    var n = C(e, t = t || {}),
      i = D(e, t);
    return void 0 !== i || i === n
  }

  function T(e, t) {
    if (t = t || {}, !g) {
      _.log("i18next not finished initialization. you might have called t function before loading resources finished.");
      var n = e.indexOf(":");
      n < 0 ? n = 0 : n++;
      var i = t.defaultValue || e.substr(n);
      return i && (i = A(i, t)), i
    }
    return p = 0, L.apply(null, arguments)
  }

  function C(e, t) {
    return void 0 !== t.defaultValue ? t.defaultValue : e
  }

  function P() {
    for (var e = [], t = 1; t < arguments.length; t++) e.push(arguments[t]);
    return {
      postProcess: "sprintf",
      sprintf: e
    }
  }

  function L(e, t) {
    if (t && "object" !== o(t) ? "sprintf" === v.shortcutFunction ? t = P.apply(null, arguments) : "defaultValue" === v.shortcutFunction && (t = {
        defaultValue: t
      }) : t = t || {}, null == e) return "";
    "string" == typeof e && (e = [e]);
    var n = e[0];
    if (e.length > 1)
      for (var i = 0; i < e.length && !M(n = e[i], t); i++);
    var r, a = C(n, t),
      s = D(n, t),
      l = t.lng ? _.toLanguages(t.lng) : m,
      u = t.ns || v.ns.defaultNs;
    n.indexOf(v.nsseparator) > -1 && (u = (r = n.split(v.nsseparator))[0], n = r[1]), void 0 === s && v.sendMissing && (t.lng ? I.postMissing(l[0], u, n, a, l) : I.postMissing(v.lng, u, n, a, l));
    var h = t.postProcess || v.postProcess;
    if (void 0 !== s && h && O[h] && (s = O[h](s, n, t)), c && void 0 !== s) return c;
    var d = a;
    if (a.indexOf(v.nsseparator) > -1 && (d = (r = a.split(v.nsseparator))[1]), d === n && v.parseMissingKey && (a = v.parseMissingKey(a)), void 0 === s && (a = S(a = A(a, t), t), h && O[h])) {
      var f = C(n, t);
      s = O[h](f, n, t)
    }
    return void 0 !== s ? s : a
  }

  function D(e, t) {
    var n, i, r = C(e, t = t || {}),
      o = m;
    if (!f) return r;
    if ("cimode" === o[0].toLowerCase()) return r;
    if (t.lng && (o = _.toLanguages(t.lng), !f[o[0]])) {
      var a = v.getAsync;
      v.getAsync = !1, I.load(o, v, (function (e, t) {
        _.extend(f, t), v.getAsync = a
      }))
    }
    var s, l = t.ns || v.ns.defaultNs;
    if (e.indexOf(v.nsseparator) > -1) {
      var c = e.split(v.nsseparator);
      l = c[0], e = c[1]
    }
    if (function (e) {
        return e.context && ("string" == typeof e.context || "number" == typeof e.context)
      }(t) && (delete(n = _.extend({}, t)).context, n.defaultValue = v.contextNotFound, (i = T(l + v.nsseparator + e + "_" + t.context, n)) != v.contextNotFound)) return A(i, {
      context: t.context
    });
    if (function (e) {
        return void 0 !== e.count && "string" != typeof e.count && 1 !== e.count
      }(t)) {
      delete(n = _.extend({}, t)).count, n.defaultValue = v.pluralNotFound;
      var u = l + v.nsseparator + e + v.pluralSuffix,
        h = R.get(o[0], t.count);
      if (h >= 0 ? u = u + "_" + h : 1 === h && (u = l + v.nsseparator + e), (i = T(u, n)) != v.pluralNotFound) return A(i, {
        count: t.count,
        interpolationPrefix: t.interpolationPrefix,
        interpolationSuffix: t.interpolationSuffix
      })
    }
    for (var d = e.split(v.keyseparator), p = 0, g = o.length; p < g && void 0 === s; p++) {
      for (var y = o[p], b = 0, x = f[y] && f[y][l]; d[b];) x = x && x[d[b]], b++;
      if (void 0 !== x) {
        var w = Object.prototype.toString.apply(x);
        if ("string" == typeof x) x = S(x = A(x, t), t);
        else if ("[object Array]" !== w || v.returnObjectTrees || t.returnObjectTrees) {
          if (null === x && !0 === v.fallbackOnNull) x = void 0;
          else if (null !== x)
            if (v.returnObjectTrees || t.returnObjectTrees) {
              if ("[object Number]" !== w && "[object Function]" !== w && "[object RegExp]" !== w) {
                var E = "[object Array]" === w ? [] : {};
                _.each(x, (function (n) {
                  E[n] = L(l + v.nsseparator + e + v.keyseparator + n, t)
                })), x = E
              }
            } else v.objectTreeKeyHandler && "function" == typeof v.objectTreeKeyHandler ? x = v.objectTreeKeyHandler(e, x, y, l, t) : (x = "key '" + l + ":" + e + " (" + y + ")' returned an object instead of string.", _.log(x))
        } else x = S(x = A(x = x.join("\n"), t), t);
        "string" == typeof x && "" === x.trim() && !0 === v.fallbackOnEmpty && (x = void 0), s = x
      }
    }
    if (void 0 === s && !t.isFallbackLookup && (!0 === v.fallbackToDefaultNS || v.fallbackNS && v.fallbackNS.length > 0))
      if (t.isFallbackLookup = !0, v.fallbackNS.length)
        for (var M = 0, P = v.fallbackNS.length; M < P; M++) {
          if (s = D(v.fallbackNS[M] + v.nsseparator + e, t))
            if ((s.indexOf(v.nsseparator) > -1 ? s.split(v.nsseparator)[1] : s) !== (r.indexOf(v.nsseparator) > -1 ? r.split(v.nsseparator)[1] : r)) break
        } else s = D(e, t);
    return s
  }
  _.applyReplacement = A;
  var I = {
      load: function (e, t, n) {
        t.useLocalStorage ? I._loadLocal(e, t, (function (i, r) {
          for (var o = [], a = 0, s = e.length; a < s; a++) r[e[a]] || o.push(e[a]);
          o.length > 0 ? I._fetch(o, t, (function (e, t) {
            _.extend(r, t), I._storeLocal(t), n(null, r)
          })) : n(null, r)
        })) : I._fetch(e, t, (function (e, t) {
          n(null, t)
        }))
      },
      _loadLocal: function (e, t, n) {
        var i = {},
          r = (new Date).getTime();
        if (s.localStorage) {
          var o = e.length;
          _.each(e, (function (e, a) {
            var l = s.localStorage.getItem("res_" + a);
            l && (l = JSON.parse(l)).i18nStamp && l.i18nStamp + t.localStorageExpirationTime > r && (i[a] = l), 0 === --o && n(null, i)
          }))
        }
      },
      _storeLocal: function (e) {
        if (s.localStorage)
          for (var t in e) e[t].i18nStamp = (new Date).getTime(), s.localStorage.setItem("res_" + t, JSON.stringify(e[t]))
      },
      _fetch: function (e, t, n) {
        var r = t.ns,
          o = {};
        if (t.dynamicLoad) {
          var a = function (e, t) {
            n(null, t)
          };
          if ("function" == typeof t.customLoad) t.customLoad(e, r.namespaces, t, a);
          else {
            var s = A(t.resGetPath, {
              lng: e.join("+"),
              ns: r.namespaces.join("+")
            });
            s = Object(i.getResourceUrl)(s), _.ajax({
              url: s,
              success: function (e, t, n) {
                _.log("loaded: " + s), a(0, e.json())
              },
              error: function (e, t, n) {
                _.log("failed loading: " + s), a()
              },
              dataType: "text",
              async: t.getAsync
            })
          }
        } else {
          var l, c = r.namespaces.length * e.length;
          _.each(r.namespaces, (function (i, r) {
            _.each(e, (function (e, i) {
              var a = function (e, t) {
                e && (l = l || []).push(e), o[i] = o[i] || {}, o[i][r] = t, 0 === --c && n(l, o)
              };
              "function" == typeof t.customLoad ? t.customLoad(i, r, t, a) : I._fetchOne(i, r, t, a)
            }))
          }))
        }
      },
      _fetchOne: function (e, t, n, r) {
        var o = A(n.resGetPath, {
          lng: e,
          ns: t
        });
        o = Object(i.getResourceUrl)(o), _.ajax({
          url: o,
          success: function (e, t, n) {
            _.log("loaded: " + o);
            var i = e;
            r(null, JSON.parse(i))
          },
          error: function (e, t, n) {
            if (t && 200 == t || e && e.status && 200 == e.status) _.log("There is a typo in: " + o);
            else if (t && 404 == t || e && e.status && 404 == e.status) _.log("Does not exist: " + o);
            else {
              var i = t || (e && e.status ? e.status : null);
              _.log(i + " when loading " + o)
            }
            r(n, {})
          },
          dataType: "text",
          async: n.getAsync
        })
      },
      postMissing: function (e, t, n, i, r) {
        var o = {};
        o[n] = i;
        var a = [];
        if ("fallback" === v.sendMissingTo && !1 !== v.fallbackLng[0])
          for (var s = 0; s < v.fallbackLng.length; s++) a.push({
            lng: v.fallbackLng[s],
            url: A(v.resPostPath, {
              lng: v.fallbackLng[s],
              ns: t
            })
          });
        else if ("current" === v.sendMissingTo || "fallback" === v.sendMissingTo && !1 === v.fallbackLng[0]) a.push({
          lng: e,
          url: A(v.resPostPath, {
            lng: e,
            ns: t
          })
        });
        else if ("all" === v.sendMissingTo) {
          s = 0;
          for (var l = r.length; s < l; s++) a.push({
            lng: r[s],
            url: A(v.resPostPath, {
              lng: r[s],
              ns: t
            })
          })
        }
        for (var c = 0, u = a.length; c < u; c++) {
          var h = a[c];
          _.ajax({
            url: h.url,
            type: v.sendType,
            data: o,
            success: function (e, r, o) {
              _.log("posted missing key '" + n + "' to: " + h.url);
              for (var a = n.split("."), s = 0, l = f[h.lng][t]; a[s];) l = s === a.length - 1 ? l[a[s]] = i : l[a[s]] = l[a[s]] || {}, s++
            },
            error: function (e, t, i) {
              _.log("failed posting missing key '" + n + "' to: " + h.url)
            },
            dataType: "json",
            async: v.postAsync
          })
        }
      }
    },
    R = {
      rules: {
        ach: {
          name: "Acholi",
          numbers: [1, 2],
          plurals: function (e) {
            return Number(e > 1)
          }
        },
        af: {
          name: "Afrikaans",
          numbers: [1, 2],
          plurals: function (e) {
            return Number(1 != e)
          }
        },
        ak: {
          name: "Akan",
          numbers: [1, 2],
          plurals: function (e) {
            return Number(e > 1)
          }
        },
        am: {
          name: "Amharic",
          numbers: [1, 2],
          plurals: function (e) {
            return Number(e > 1)
          }
        },
        an: {
          name: "Aragonese",
          numbers: [1, 2],
          plurals: function (e) {
            return Number(1 != e)
          }
        },
        ar: {
          name: "Arabic",
          numbers: [0, 1, 2, 3, 11, 100],
          plurals: function (e) {
            return Number(0 === e ? 0 : 1 == e ? 1 : 2 == e ? 2 : e % 100 >= 3 && e % 100 <= 10 ? 3 : e % 100 >= 11 ? 4 : 5)
          }
        },
        arn: {
          name: "Mapudungun",
          numbers: [1, 2],
          plurals: function (e) {
            return Number(e > 1)
          }
        },
        ast: {
          name: "Asturian",
          numbers: [1, 2],
          plurals: function (e) {
            return Number(1 != e)
          }
        },
        ay: {
          name: "Aymará",
          numbers: [1],
          plurals: function (e) {
            return 0
          }
        },
        az: {
          name: "Azerbaijani",
          numbers: [1, 2],
          plurals: function (e) {
            return Number(1 != e)
          }
        },
        be: {
          name: "Belarusian",
          numbers: [1, 2, 5],
          plurals: function (e) {
            return Number(e % 10 == 1 && e % 100 != 11 ? 0 : e % 10 >= 2 && e % 10 <= 4 && (e % 100 < 10 || e % 100 >= 20) ? 1 : 2)
          }
        },
        bg: {
          name: "Bulgarian",
          numbers: [1, 2],
          plurals: function (e) {
            return Number(1 != e)
          }
        },
        bn: {
          name: "Bengali",
          numbers: [1, 2],
          plurals: function (e) {
            return Number(1 != e)
          }
        },
        bo: {
          name: "Tibetan",
          numbers: [1],
          plurals: function (e) {
            return 0
          }
        },
        br: {
          name: "Breton",
          numbers: [1, 2],
          plurals: function (e) {
            return Number(e > 1)
          }
        },
        bs: {
          name: "Bosnian",
          numbers: [1, 2, 5],
          plurals: function (e) {
            return Number(e % 10 == 1 && e % 100 != 11 ? 0 : e % 10 >= 2 && e % 10 <= 4 && (e % 100 < 10 || e % 100 >= 20) ? 1 : 2)
          }
        },
        ca: {
          name: "Catalan",
          numbers: [1, 2],
          plurals: function (e) {
            return Number(1 != e)
          }
        },
        cgg: {
          name: "Chiga",
          numbers: [1],
          plurals: function (e) {
            return 0
          }
        },
        cs: {
          name: "Czech",
          numbers: [1, 2, 5],
          plurals: function (e) {
            return Number(1 == e ? 0 : e >= 2 && e <= 4 ? 1 : 2)
          }
        },
        csb: {
          name: "Kashubian",
          numbers: [1, 2, 5],
          plurals: function (e) {
            return Number(1 == e ? 0 : e % 10 >= 2 && e % 10 <= 4 && (e % 100 < 10 || e % 100 >= 20) ? 1 : 2)
          }
        },
        cy: {
          name: "Welsh",
          numbers: [1, 2, 3, 8],
          plurals: function (e) {
            return Number(1 == e ? 0 : 2 == e ? 1 : 8 != e && 11 != e ? 2 : 3)
          }
        },
        da: {
          name: "Danish",
          numbers: [1, 2],
          plurals: function (e) {
            return Number(1 != e)
          }
        },
        de: {
          name: "German",
          numbers: [1, 2],
          plurals: function (e) {
            return Number(1 != e)
          }
        },
        dz: {
          name: "Dzongkha",
          numbers: [1],
          plurals: function (e) {
            return 0
          }
        },
        el: {
          name: "Greek",
          numbers: [1, 2],
          plurals: function (e) {
            return Number(1 != e)
          }
        },
        en: {
          name: "English",
          numbers: [1, 2],
          plurals: function (e) {
            return Number(1 != e)
          }
        },
        eo: {
          name: "Esperanto",
          numbers: [1, 2],
          plurals: function (e) {
            return Number(1 != e)
          }
        },
        es: {
          name: "Spanish",
          numbers: [1, 2],
          plurals: function (e) {
            return Number(1 != e)
          }
        },
        es_ar: {
          name: "Argentinean Spanish",
          numbers: [1, 2],
          plurals: function (e) {
            return Number(1 != e)
          }
        },
        et: {
          name: "Estonian",
          numbers: [1, 2],
          plurals: function (e) {
            return Number(1 != e)
          }
        },
        eu: {
          name: "Basque",
          numbers: [1, 2],
          plurals: function (e) {
            return Number(1 != e)
          }
        },
        fa: {
          name: "Persian",
          numbers: [1],
          plurals: function (e) {
            return 0
          }
        },
        fi: {
          name: "Finnish",
          numbers: [1, 2],
          plurals: function (e) {
            return Number(1 != e)
          }
        },
        fil: {
          name: "Filipino",
          numbers: [1, 2],
          plurals: function (e) {
            return Number(e > 1)
          }
        },
        fo: {
          name: "Faroese",
          numbers: [1, 2],
          plurals: function (e) {
            return Number(1 != e)
          }
        },
        fr: {
          name: "French",
          numbers: [1, 2],
          plurals: function (e) {
            return Number(e > 1)
          }
        },
        fur: {
          name: "Friulian",
          numbers: [1, 2],
          plurals: function (e) {
            return Number(1 != e)
          }
        },
        fy: {
          name: "Frisian",
          numbers: [1, 2],
          plurals: function (e) {
            return Number(1 != e)
          }
        },
        ga: {
          name: "Irish",
          numbers: [1, 2, 3, 7, 11],
          plurals: function (e) {
            return Number(1 == e ? 0 : 2 == e ? 1 : e < 7 ? 2 : e < 11 ? 3 : 4)
          }
        },
        gd: {
          name: "Scottish Gaelic",
          numbers: [1, 2, 3, 20],
          plurals: function (e) {
            return Number(1 == e || 11 == e ? 0 : 2 == e || 12 == e ? 1 : e > 2 && e < 20 ? 2 : 3)
          }
        },
        gl: {
          name: "Galician",
          numbers: [1, 2],
          plurals: function (e) {
            return Number(1 != e)
          }
        },
        gu: {
          name: "Gujarati",
          numbers: [1, 2],
          plurals: function (e) {
            return Number(1 != e)
          }
        },
        gun: {
          name: "Gun",
          numbers: [1, 2],
          plurals: function (e) {
            return Number(e > 1)
          }
        },
        ha: {
          name: "Hausa",
          numbers: [1, 2],
          plurals: function (e) {
            return Number(1 != e)
          }
        },
        he: {
          name: "Hebrew",
          numbers: [1, 2],
          plurals: function (e) {
            return Number(1 != e)
          }
        },
        hi: {
          name: "Hindi",
          numbers: [1, 2],
          plurals: function (e) {
            return Number(1 != e)
          }
        },
        hr: {
          name: "Croatian",
          numbers: [1, 2, 5],
          plurals: function (e) {
            return Number(e % 10 == 1 && e % 100 != 11 ? 0 : e % 10 >= 2 && e % 10 <= 4 && (e % 100 < 10 || e % 100 >= 20) ? 1 : 2)
          }
        },
        hu: {
          name: "Hungarian",
          numbers: [1, 2],
          plurals: function (e) {
            return Number(1 != e)
          }
        },
        hy: {
          name: "Armenian",
          numbers: [1, 2],
          plurals: function (e) {
            return Number(1 != e)
          }
        },
        ia: {
          name: "Interlingua",
          numbers: [1, 2],
          plurals: function (e) {
            return Number(1 != e)
          }
        },
        id: {
          name: "Indonesian",
          numbers: [1],
          plurals: function (e) {
            return 0
          }
        },
        is: {
          name: "Icelandic",
          numbers: [1, 2],
          plurals: function (e) {
            return Number(e % 10 != 1 || e % 100 == 11)
          }
        },
        it: {
          name: "Italian",
          numbers: [1, 2],
          plurals: function (e) {
            return Number(1 != e)
          }
        },
        ja: {
          name: "Japanese",
          numbers: [1],
          plurals: function (e) {
            return 0
          }
        },
        jbo: {
          name: "Lojban",
          numbers: [1],
          plurals: function (e) {
            return 0
          }
        },
        jv: {
          name: "Javanese",
          numbers: [0, 1],
          plurals: function (e) {
            return Number(0 !== e)
          }
        },
        ka: {
          name: "Georgian",
          numbers: [1],
          plurals: function (e) {
            return 0
          }
        },
        kk: {
          name: "Kazakh",
          numbers: [1],
          plurals: function (e) {
            return 0
          }
        },
        km: {
          name: "Khmer",
          numbers: [1],
          plurals: function (e) {
            return 0
          }
        },
        kn: {
          name: "Kannada",
          numbers: [1, 2],
          plurals: function (e) {
            return Number(1 != e)
          }
        },
        ko: {
          name: "Korean",
          numbers: [1],
          plurals: function (e) {
            return 0
          }
        },
        ku: {
          name: "Kurdish",
          numbers: [1, 2],
          plurals: function (e) {
            return Number(1 != e)
          }
        },
        kw: {
          name: "Cornish",
          numbers: [1, 2, 3, 4],
          plurals: function (e) {
            return Number(1 == e ? 0 : 2 == e ? 1 : 3 == e ? 2 : 3)
          }
        },
        ky: {
          name: "Kyrgyz",
          numbers: [1],
          plurals: function (e) {
            return 0
          }
        },
        lb: {
          name: "Letzeburgesch",
          numbers: [1, 2],
          plurals: function (e) {
            return Number(1 != e)
          }
        },
        ln: {
          name: "Lingala",
          numbers: [1, 2],
          plurals: function (e) {
            return Number(e > 1)
          }
        },
        lo: {
          name: "Lao",
          numbers: [1],
          plurals: function (e) {
            return 0
          }
        },
        lt: {
          name: "Lithuanian",
          numbers: [1, 2, 10],
          plurals: function (e) {
            return Number(e % 10 == 1 && e % 100 != 11 ? 0 : e % 10 >= 2 && (e % 100 < 10 || e % 100 >= 20) ? 1 : 2)
          }
        },
        lv: {
          name: "Latvian",
          numbers: [1, 2, 0],
          plurals: function (e) {
            return Number(e % 10 == 1 && e % 100 != 11 ? 0 : 0 !== e ? 1 : 2)
          }
        },
        mai: {
          name: "Maithili",
          numbers: [1, 2],
          plurals: function (e) {
            return Number(1 != e)
          }
        },
        mfe: {
          name: "Mauritian Creole",
          numbers: [1, 2],
          plurals: function (e) {
            return Number(e > 1)
          }
        },
        mg: {
          name: "Malagasy",
          numbers: [1, 2],
          plurals: function (e) {
            return Number(e > 1)
          }
        },
        mi: {
          name: "Maori",
          numbers: [1, 2],
          plurals: function (e) {
            return Number(e > 1)
          }
        },
        mk: {
          name: "Macedonian",
          numbers: [1, 2],
          plurals: function (e) {
            return Number(1 == e || e % 10 == 1 ? 0 : 1)
          }
        },
        ml: {
          name: "Malayalam",
          numbers: [1, 2],
          plurals: function (e) {
            return Number(1 != e)
          }
        },
        mn: {
          name: "Mongolian",
          numbers: [1, 2],
          plurals: function (e) {
            return Number(1 != e)
          }
        },
        mnk: {
          name: "Mandinka",
          numbers: [0, 1, 2],
          plurals: function (e) {
            return Number(1 == e ? 1 : 2)
          }
        },
        mr: {
          name: "Marathi",
          numbers: [1, 2],
          plurals: function (e) {
            return Number(1 != e)
          }
        },
        ms: {
          name: "Malay",
          numbers: [1],
          plurals: function (e) {
            return 0
          }
        },
        mt: {
          name: "Maltese",
          numbers: [1, 2, 11, 20],
          plurals: function (e) {
            return Number(1 == e ? 0 : 0 === e || e % 100 > 1 && e % 100 < 11 ? 1 : e % 100 > 10 && e % 100 < 20 ? 2 : 3)
          }
        },
        nah: {
          name: "Nahuatl",
          numbers: [1, 2],
          plurals: function (e) {
            return Number(1 != e)
          }
        },
        nap: {
          name: "Neapolitan",
          numbers: [1, 2],
          plurals: function (e) {
            return Number(1 != e)
          }
        },
        nb: {
          name: "Norwegian Bokmal",
          numbers: [1, 2],
          plurals: function (e) {
            return Number(1 != e)
          }
        },
        ne: {
          name: "Nepali",
          numbers: [1, 2],
          plurals: function (e) {
            return Number(1 != e)
          }
        },
        nl: {
          name: "Dutch",
          numbers: [1, 2],
          plurals: function (e) {
            return Number(1 != e)
          }
        },
        nn: {
          name: "Norwegian Nynorsk",
          numbers: [1, 2],
          plurals: function (e) {
            return Number(1 != e)
          }
        },
        no: {
          name: "Norwegian",
          numbers: [1, 2],
          plurals: function (e) {
            return Number(1 != e)
          }
        },
        nso: {
          name: "Northern Sotho",
          numbers: [1, 2],
          plurals: function (e) {
            return Number(1 != e)
          }
        },
        oc: {
          name: "Occitan",
          numbers: [1, 2],
          plurals: function (e) {
            return Number(e > 1)
          }
        },
        or: {
          name: "Oriya",
          numbers: [2, 1],
          plurals: function (e) {
            return Number(1 != e)
          }
        },
        pa: {
          name: "Punjabi",
          numbers: [1, 2],
          plurals: function (e) {
            return Number(1 != e)
          }
        },
        pap: {
          name: "Papiamento",
          numbers: [1, 2],
          plurals: function (e) {
            return Number(1 != e)
          }
        },
        pl: {
          name: "Polish",
          numbers: [1, 2, 5],
          plurals: function (e) {
            return Number(1 == e ? 0 : e % 10 >= 2 && e % 10 <= 4 && (e % 100 < 10 || e % 100 >= 20) ? 1 : 2)
          }
        },
        pms: {
          name: "Piemontese",
          numbers: [1, 2],
          plurals: function (e) {
            return Number(1 != e)
          }
        },
        ps: {
          name: "Pashto",
          numbers: [1, 2],
          plurals: function (e) {
            return Number(1 != e)
          }
        },
        pt: {
          name: "Portuguese",
          numbers: [1, 2],
          plurals: function (e) {
            return Number(1 != e)
          }
        },
        pt_br: {
          name: "Brazilian Portuguese",
          numbers: [1, 2],
          plurals: function (e) {
            return Number(1 != e)
          }
        },
        rm: {
          name: "Romansh",
          numbers: [1, 2],
          plurals: function (e) {
            return Number(1 != e)
          }
        },
        ro: {
          name: "Romanian",
          numbers: [1, 2, 20],
          plurals: function (e) {
            return Number(1 == e ? 0 : 0 === e || e % 100 > 0 && e % 100 < 20 ? 1 : 2)
          }
        },
        ru: {
          name: "Russian",
          numbers: [1, 2, 5],
          plurals: function (e) {
            return Number(e % 10 == 1 && e % 100 != 11 ? 0 : e % 10 >= 2 && e % 10 <= 4 && (e % 100 < 10 || e % 100 >= 20) ? 1 : 2)
          }
        },
        sah: {
          name: "Yakut",
          numbers: [1],
          plurals: function (e) {
            return 0
          }
        },
        sco: {
          name: "Scots",
          numbers: [1, 2],
          plurals: function (e) {
            return Number(1 != e)
          }
        },
        se: {
          name: "Northern Sami",
          numbers: [1, 2],
          plurals: function (e) {
            return Number(1 != e)
          }
        },
        si: {
          name: "Sinhala",
          numbers: [1, 2],
          plurals: function (e) {
            return Number(1 != e)
          }
        },
        sk: {
          name: "Slovak",
          numbers: [1, 2, 5],
          plurals: function (e) {
            return Number(1 == e ? 0 : e >= 2 && e <= 4 ? 1 : 2)
          }
        },
        sl: {
          name: "Slovenian",
          numbers: [5, 1, 2, 3],
          plurals: function (e) {
            return Number(e % 100 == 1 ? 1 : e % 100 == 2 ? 2 : e % 100 == 3 || e % 100 == 4 ? 3 : 0)
          }
        },
        so: {
          name: "Somali",
          numbers: [1, 2],
          plurals: function (e) {
            return Number(1 != e)
          }
        },
        son: {
          name: "Songhay",
          numbers: [1, 2],
          plurals: function (e) {
            return Number(1 != e)
          }
        },
        sq: {
          name: "Albanian",
          numbers: [1, 2],
          plurals: function (e) {
            return Number(1 != e)
          }
        },
        sr: {
          name: "Serbian",
          numbers: [1, 2, 5],
          plurals: function (e) {
            return Number(e % 10 == 1 && e % 100 != 11 ? 0 : e % 10 >= 2 && e % 10 <= 4 && (e % 100 < 10 || e % 100 >= 20) ? 1 : 2)
          }
        },
        su: {
          name: "Sundanese",
          numbers: [1],
          plurals: function (e) {
            return 0
          }
        },
        sv: {
          name: "Swedish",
          numbers: [1, 2],
          plurals: function (e) {
            return Number(1 != e)
          }
        },
        sw: {
          name: "Swahili",
          numbers: [1, 2],
          plurals: function (e) {
            return Number(1 != e)
          }
        },
        ta: {
          name: "Tamil",
          numbers: [1, 2],
          plurals: function (e) {
            return Number(1 != e)
          }
        },
        te: {
          name: "Telugu",
          numbers: [1, 2],
          plurals: function (e) {
            return Number(1 != e)
          }
        },
        tg: {
          name: "Tajik",
          numbers: [1, 2],
          plurals: function (e) {
            return Number(e > 1)
          }
        },
        th: {
          name: "Thai",
          numbers: [1],
          plurals: function (e) {
            return 0
          }
        },
        ti: {
          name: "Tigrinya",
          numbers: [1, 2],
          plurals: function (e) {
            return Number(e > 1)
          }
        },
        tk: {
          name: "Turkmen",
          numbers: [1, 2],
          plurals: function (e) {
            return Number(1 != e)
          }
        },
        tr: {
          name: "Turkish",
          numbers: [1, 2],
          plurals: function (e) {
            return Number(e > 1)
          }
        },
        tt: {
          name: "Tatar",
          numbers: [1],
          plurals: function (e) {
            return 0
          }
        },
        ug: {
          name: "Uyghur",
          numbers: [1],
          plurals: function (e) {
            return 0
          }
        },
        uk: {
          name: "Ukrainian",
          numbers: [1, 2, 5],
          plurals: function (e) {
            return Number(e % 10 == 1 && e % 100 != 11 ? 0 : e % 10 >= 2 && e % 10 <= 4 && (e % 100 < 10 || e % 100 >= 20) ? 1 : 2)
          }
        },
        ur: {
          name: "Urdu",
          numbers: [1, 2],
          plurals: function (e) {
            return Number(1 != e)
          }
        },
        uz: {
          name: "Uzbek",
          numbers: [1, 2],
          plurals: function (e) {
            return Number(e > 1)
          }
        },
        vi: {
          name: "Vietnamese",
          numbers: [1],
          plurals: function (e) {
            return 0
          }
        },
        wa: {
          name: "Walloon",
          numbers: [1, 2],
          plurals: function (e) {
            return Number(e > 1)
          }
        },
        wo: {
          name: "Wolof",
          numbers: [1],
          plurals: function (e) {
            return 0
          }
        },
        yo: {
          name: "Yoruba",
          numbers: [1, 2],
          plurals: function (e) {
            return Number(1 != e)
          }
        },
        zh: {
          name: "Chinese",
          numbers: [1],
          plurals: function (e) {
            return 0
          }
        }
      },
      addRule: function (e, t) {
        R.rules[e] = t
      },
      setCurrentLng: function (e) {
        if (!R.currentRule || R.currentRule.lng !== e) {
          var t = e.split("-");
          R.currentRule = {
            lng: e,
            rule: R.rules[t[0]]
          }
        }
      },
      get: function (e, t) {
        return function (t, n) {
          var i;
          if (i = R.currentRule && R.currentRule.lng === e ? R.currentRule.rule : R.rules[t]) {
            var r = i.plurals(n),
              o = i.numbers[r];
            return 2 === i.numbers.length && 1 === i.numbers[0] && (2 === o ? o = -1 : 1 === o && (o = 1)), o
          }
          return 1 === n ? "1" : "-1"
        }(e.split("-")[0], t)
      }
    },
    O = {},
    k = function (e, t) {
      O[e] = t
    },
    N = function () {
      function e(e) {
        return Object.prototype.toString.call(e).slice(8, -1).toLowerCase()
      }

      function t(e, t) {
        for (var n = []; t > 0; n[--t] = e);
        return n.join("")
      }
      var n = function e() {
        return e.cache.hasOwnProperty(arguments[0]) || (e.cache[arguments[0]] = e.parse(arguments[0])), e.format.call(null, e.cache[arguments[0]], arguments)
      };
      return n.format = function (n, i) {
        var r, o, a, s, l, c, u, h = 1,
          d = n.length,
          f = "",
          p = [];
        for (o = 0; o < d; o++)
          if ("string" === (f = e(n[o]))) p.push(n[o]);
          else if ("array" === f) {
          if ((s = n[o])[2])
            for (r = i[h], a = 0; a < s[2].length; a++) {
              if (!r.hasOwnProperty(s[2][a])) throw N('[sprintf] property "%s" does not exist', s[2][a]);
              r = r[s[2][a]]
            } else r = s[1] ? i[s[1]] : i[h++];
          if (/[^s]/.test(s[8]) && "number" != e(r)) throw N("[sprintf] expecting number but found %s", e(r));
          switch (s[8]) {
            case "b":
              r = r.toString(2);
              break;
            case "c":
              r = String.fromCharCode(r);
              break;
            case "d":
              r = parseInt(r, 10);
              break;
            case "e":
              r = s[7] ? r.toExponential(s[7]) : r.toExponential();
              break;
            case "f":
              r = s[7] ? parseFloat(r).toFixed(s[7]) : parseFloat(r);
              break;
            case "o":
              r = r.toString(8);
              break;
            case "s":
              r = (r = String(r)) && s[7] ? r.substring(0, s[7]) : r;
              break;
            case "u":
              r = Math.abs(r);
              break;
            case "x":
              r = r.toString(16);
              break;
            case "X":
              r = r.toString(16).toUpperCase()
          }
          r = /[def]/.test(s[8]) && s[3] && r >= 0 ? "+" + r : r, c = s[4] ? "0" == s[4] ? "0" : s[4].charAt(1) : " ", u = s[6] - String(r).length, l = s[6] ? t(c, u) : "", p.push(s[5] ? r + l : l + r)
        }
        return p.join("")
      }, n.cache = {}, n.parse = function (e) {
        for (var t = e, n = [], i = [], r = 0; t;) {
          if (null !== (n = /^[^\x25]+/.exec(t))) i.push(n[0]);
          else if (null !== (n = /^\x25{2}/.exec(t))) i.push("%");
          else {
            if (null === (n = /^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-fosuxX])/.exec(t))) throw "[sprintf] huh?";
            if (n[2]) {
              r |= 1;
              var o = [],
                a = n[2],
                s = [];
              if (null === (s = /^([a-z_][a-z_\d]*)/i.exec(a))) throw "[sprintf] huh?";
              for (o.push(s[1]);
                "" !== (a = a.substring(s[0].length));)
                if (null !== (s = /^\.([a-z_][a-z_\d]*)/i.exec(a))) o.push(s[1]);
                else {
                  if (null === (s = /^\[(\d+)\]/.exec(a))) throw "[sprintf] huh?";
                  o.push(s[1])
                } n[2] = o
            } else r |= 2;
            if (3 === r) throw "[sprintf] mixing positional and named placeholders is not (yet) supported";
            i.push(n)
          }
          t = t.substring(n[0].length)
        }
        return i
      }, n
    }();
  k("sprintf", (function (e, t, n) {
    return n.sprintf ? "[object Array]" === Object.prototype.toString.apply(n.sprintf) ? (i = e, (r = n.sprintf).unshift(i), N.apply(null, r)) : "object" === o(n.sprintf) ? N(e, n.sprintf) : e : e;
    var i, r
  }));
  var F = function (e) {
      var t = e || l;
      Array.prototype.forEach.call(t.querySelectorAll("[data-i18n]"), (function (e) {
        var t = e.getAttribute("data-i18n"),
          n = [null, t],
          i = n[0],
          r = n[1],
          o = T(r);
        o ? i ? e.setAttribute(i, o) : e.placeholder ? e.placeholder = o : e.textContent = o : i ? e.setAttribute(i, r) : e.textContent = r
      }))
    },
    U = {
      init: x,
      setLng: function (e, t, n) {
        return "function" == typeof t ? (n = t, t = {}) : t || (t = {}), t.lng = e, x(t, n)
      },
      preload: function (e, t) {
        "string" == typeof e && (e = [e]);
        for (var n = 0, i = e.length; n < i; n++) v.preload.indexOf(e[n]) < 0 && v.preload.push(e[n]);
        return x(t)
      },
      addResourceBundle: w,
      removeResourceBundle: function (e, t) {
        "string" != typeof t && (t = v.ns.defaultNs), f[e] = f[e] || {}, f[e][t] = {}
      },
      loadNamespace: function (e, t) {
        E([e], t)
      },
      loadNamespaces: E,
      localize: F,
      setDefaultNamespace: function (e) {
        v.ns.defaultNs = e
      },
      t: T,
      translate: T,
      exists: M,
      detectLanguage: _.detectLanguage,
      pluralExtensions: R,
      sync: I,
      functions: _,
      lng: function () {
        return u
      },
      addPostProcessor: k,
      options: v,
      setDebugLocString: function () {
        c = "aaaa", F()
      },
      clearDebugLocString: function () {
        c = null, F()
      }
    }
}, function (e, t, n) {
  "use strict";
  n.r(t), n.d(t, "ErrorCodes", (function () {
    return i
  })), n.d(t, "errorCodeString", (function () {
    return r
  })), n.d(t, "getErrorCode", (function () {
    return o
  }));
  var i = {
    UNKNOWN_FAILURE: 1,
    BAD_DATA: 2,
    NETWORK_FAILURE: 3,
    NETWORK_ACCESS_DENIED: 4,
    NETWORK_FILE_NOT_FOUND: 5,
    NETWORK_SERVER_ERROR: 6,
    NETWORK_UNHANDLED_RESPONSE_CODE: 7,
    BROWSER_WEBGL_NOT_SUPPORTED: 8,
    BAD_DATA_NO_VIEWABLE_CONTENT: 9,
    BROWSER_WEBGL_DISABLED: 10,
    BAD_DATA_MODEL_IS_EMPTY: 11,
    RTC_ERROR: 12,
    UNSUPORTED_FILE_EXTENSION: 13,
    VIEWER_INTERNAL_ERROR: 14,
    WEBGL_LOST_CONTEXT: 15
  };

  function r(e) {
    return "ErrorCode:" + e + "."
  }

  function o(e) {
    return 403 === e || 401 === e ? i.NETWORK_ACCESS_DENIED : 404 === e ? i.NETWORK_FILE_NOT_FOUND : e >= 500 ? i.NETWORK_SERVER_ERROR : i.NETWORK_UNHANDLED_RESPONSE_CODE
  }
}, function (e, t, n) {
  "use strict";
  n.r(t), n.d(t, "MeshFlags", (function () {
    return i
  }));
  var i = {
    MESH_VISIBLE: 1,
    MESH_HIGHLIGHTED: 2,
    MESH_HIDE: 4,
    MESH_ISLINE: 8,
    MESH_MOVED: 16,
    MESH_RENDERFLAG: 32,
    MESH_NOTLOADED: 64,
    MESH_ISPOINT: 128,
    MESH_ISWIDELINE: 256,
    MESH_TRAVERSED: 512,
    MESH_DRAWN: 1024
  }
}, function (e, t, n) {
  "use strict";
  n.r(t), n.d(t, "Button", (function () {
    return s
  }));
  var i, r, o = n(37),
    a = n(3);

  function s(e, t) {
    o.Control.call(this, e, t);
    var n = this;
    this._state = s.State.INACTIVE;
    var i = this.getDocument();
    this.icon = i.createElement("div"), this.icon.classList.add("adsk-button-icon"), this.container.appendChild(this.icon), this.container.addEventListener("click", (function (e) {
      n.getState() !== s.State.DISABLED && (n.dispatchEvent(s.Event.CLICK), n.onClick && n.onClick(e)), e.stopPropagation()
    })), Object(a.isTouchDevice)() ? this.container.addEventListener("touchstart", a.touchStartToClick) : (this.container.addEventListener("mouseover", (function (e) {
      n.onMouseOver(e)
    })), this.container.addEventListener("mouseout", (function (e) {
      n.onMouseOut(e)
    }))), this.addClass("adsk-button"), this.addClass(s.StateToClassMap[this._state])
  }
  s.Event = {
    VISIBILITY_CHANGED: o.Control.Event.VISIBILITY_CHANGED,
    COLLAPSED_CHANGED: o.Control.Event.COLLAPSED_CHANGED,
    STATE_CHANGED: "Button.StateChanged",
    CLICK: "click"
  }, s.State = {
    ACTIVE: 0,
    INACTIVE: 1,
    DISABLED: 2
  }, s.StateToClassMap = (i = s.State, (r = {})[i.ACTIVE] = "active", r[i.INACTIVE] = "inactive", r[i.DISABLED] = "disabled", r), s.prototype = Object.create(o.Control.prototype), s.prototype.constructor = s, s.prototype.setState = function (e) {
    if (e === this._state) return !1;
    this.removeClass(s.StateToClassMap[this._state]), this.addClass(s.StateToClassMap[e]), this._state = e;
    var t = {
      type: s.Event.STATE_CHANGED,
      state: e
    };
    return this.dispatchEvent(t), !0
  }, s.prototype.setIcon = function (e) {
    this.iconClass && this.icon.classList.remove(this.iconClass), this.iconClass = e, this.icon.classList.add(e)
  }, s.prototype.getState = function () {
    return this._state
  }, s.prototype.onClick = function (e) {}, s.prototype.onMouseOver = function (e) {}, s.prototype.onMouseOut = function (e) {}
}, function (e, t, n) {
  "use strict";
  n.r(t), n.d(t, "GlobalManagerMixin", (function () {
    return o
  }));
  var i = n(145),
    r = new i.GlobalManager;

  function o() {
    this.globalManager = r, this.setGlobalManager = function (e) {
      this.globalManager = e, this.onSetGlobalManager(this.globalManager)
    }, this.onSetGlobalManager = function (e) {}, this.getWindow = function () {
      return this.globalManager.getWindow()
    }, this.getDocument = function () {
      return this.globalManager.getDocument()
    }, this.setWindow = function (e) {
      return this.globalManager.setWindow(e)
    }, this.addWindowEventListener = function (e, t) {
      for (var n, i = arguments.length, r = new Array(i > 2 ? i - 2 : 0), o = 2; o < i; o++) r[o - 2] = arguments[o];
      (n = this.globalManager).addWindowEventListener.apply(n, [e, t].concat(r))
    }, this.removeWindowEventListener = function (e, t) {
      for (var n, i = arguments.length, r = new Array(i > 2 ? i - 2 : 0), o = 2; o < i; o++) r[o - 2] = arguments[o];
      (n = this.globalManager).removeWindowEventListener.apply(n, [e, t].concat(r))
    }, this.addDocumentEventListener = function (e, t) {
      for (var n, i = arguments.length, r = new Array(i > 2 ? i - 2 : 0), o = 2; o < i; o++) r[o - 2] = arguments[o];
      (n = this.globalManager).addDocumentEventListener.apply(n, [e, t].concat(r))
    }, this.removeDocumentEventListener = function (e, t) {
      for (var n, i = arguments.length, r = new Array(i > 2 ? i - 2 : 0), o = 2; o < i; o++) r[o - 2] = arguments[o];
      (n = this.globalManager).removeDocumentEventListener.apply(n, [e, t].concat(r))
    }
  }
  Autodesk.Viewing.GlobalManager = i.GlobalManager, Autodesk.Viewing.GlobalManagerMixin = o
}, function (e, t, n) {
  "use strict";
  n.r(t), n.d(t, "LmvVector3", (function () {
    return s
  }));
  var i, r, o, a, s = function (e, t, n) {
    this.x = e || 0, this.y = t || 0, this.z = n || 0
  };
  s.prototype = {
    constructor: s,
    set: function (e, t, n) {
      return this.x = e, this.y = t, this.z = n, this
    },
    setX: function (e) {
      return this.x = e, this
    },
    setY: function (e) {
      return this.y = e, this
    },
    setZ: function (e) {
      return this.z = e, this
    },
    setComponent: function (e, t) {
      switch (e) {
        case 0:
          this.x = t;
          break;
        case 1:
          this.y = t;
          break;
        case 2:
          this.z = t;
          break;
        default:
          throw new Error("index is out of range: " + e)
      }
    },
    getComponent: function (e) {
      switch (e) {
        case 0:
          return this.x;
        case 1:
          return this.y;
        case 2:
          return this.z;
        default:
          throw new Error("index is out of range: " + e)
      }
    },
    clone: function () {
      return new this.constructor(this.x, this.y, this.z)
    },
    copy: function (e) {
      return this.x = e.x, this.y = e.y, this.z = e.z, this
    },
    add: function (e, t) {
      return void 0 !== t ? (console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."), this.addVectors(e, t)) : (this.x += e.x, this.y += e.y, this.z += e.z, this)
    },
    addScalar: function (e) {
      return this.x += e, this.y += e, this.z += e, this
    },
    addVectors: function (e, t) {
      return this.x = e.x + t.x, this.y = e.y + t.y, this.z = e.z + t.z, this
    },
    addScaledVector: function (e, t) {
      return this.x += e.x * t, this.y += e.y * t, this.z += e.z * t, this
    },
    sub: function (e, t) {
      return void 0 !== t ? (console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."), this.subVectors(e, t)) : (this.x -= e.x, this.y -= e.y, this.z -= e.z, this)
    },
    subScalar: function (e) {
      return this.x -= e, this.y -= e, this.z -= e, this
    },
    subVectors: function (e, t) {
      return this.x = e.x - t.x, this.y = e.y - t.y, this.z = e.z - t.z, this
    },
    multiply: function (e, t) {
      return void 0 !== t ? (console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."), this.multiplyVectors(e, t)) : (this.x *= e.x, this.y *= e.y, this.z *= e.z, this)
    },
    multiplyScalar: function (e) {
      return this.x *= e, this.y *= e, this.z *= e, this
    },
    multiplyVectors: function (e, t) {
      return this.x = e.x * t.x, this.y = e.y * t.y, this.z = e.z * t.z, this
    },
    applyMatrix3: function (e) {
      var t = this.x,
        n = this.y,
        i = this.z,
        r = e.elements;
      return this.x = r[0] * t + r[3] * n + r[6] * i, this.y = r[1] * t + r[4] * n + r[7] * i, this.z = r[2] * t + r[5] * n + r[8] * i, this
    },
    applyMatrix4: function (e) {
      var t = this.x,
        n = this.y,
        i = this.z,
        r = e.elements;
      return this.x = r[0] * t + r[4] * n + r[8] * i + r[12], this.y = r[1] * t + r[5] * n + r[9] * i + r[13], this.z = r[2] * t + r[6] * n + r[10] * i + r[14], this
    },
    applyProjection: function (e) {
      var t = this.x,
        n = this.y,
        i = this.z,
        r = e.elements,
        o = 1 / (r[3] * t + r[7] * n + r[11] * i + r[15]);
      return this.x = (r[0] * t + r[4] * n + r[8] * i + r[12]) * o, this.y = (r[1] * t + r[5] * n + r[9] * i + r[13]) * o, this.z = (r[2] * t + r[6] * n + r[10] * i + r[14]) * o, this
    },
    applyQuaternion: function (e) {
      var t = this.x,
        n = this.y,
        i = this.z,
        r = e.x,
        o = e.y,
        a = e.z,
        s = e.w,
        l = s * t + o * i - a * n,
        c = s * n + a * t - r * i,
        u = s * i + r * n - o * t,
        h = -r * t - o * n - a * i;
      return this.x = l * s + h * -r + c * -a - u * -o, this.y = c * s + h * -o + u * -r - l * -a, this.z = u * s + h * -a + l * -o - c * -r, this
    },
    transformDirection: function (e) {
      var t = this.x,
        n = this.y,
        i = this.z,
        r = e.elements;
      return this.x = r[0] * t + r[4] * n + r[8] * i, this.y = r[1] * t + r[5] * n + r[9] * i, this.z = r[2] * t + r[6] * n + r[10] * i, this.normalize(), this
    },
    divide: function (e) {
      return this.x /= e.x, this.y /= e.y, this.z /= e.z, this
    },
    divideScalar: function (e) {
      if (0 !== e) {
        var t = 1 / e;
        this.x *= t, this.y *= t, this.z *= t
      } else this.x = 0, this.y = 0, this.z = 0;
      return this
    },
    min: function (e) {
      return this.x > e.x && (this.x = e.x), this.y > e.y && (this.y = e.y), this.z > e.z && (this.z = e.z), this
    },
    max: function (e) {
      return this.x < e.x && (this.x = e.x), this.y < e.y && (this.y = e.y), this.z < e.z && (this.z = e.z), this
    },
    clamp: function (e, t) {
      return this.x < e.x ? this.x = e.x : this.x > t.x && (this.x = t.x), this.y < e.y ? this.y = e.y : this.y > t.y && (this.y = t.y), this.z < e.z ? this.z = e.z : this.z > t.z && (this.z = t.z), this
    },
    clampScalar: function (e, t) {
      return void 0 === o && (o = new s, a = new s), o.set(e, e, e), a.set(t, t, t), this.clamp(o, a)
    },
    floor: function () {
      return this.x = Math.floor(this.x), this.y = Math.floor(this.y), this.z = Math.floor(this.z), this
    },
    ceil: function () {
      return this.x = Math.ceil(this.x), this.y = Math.ceil(this.y), this.z = Math.ceil(this.z), this
    },
    round: function () {
      return this.x = Math.round(this.x), this.y = Math.round(this.y), this.z = Math.round(this.z), this
    },
    roundToZero: function () {
      return this.x = this.x < 0 ? Math.ceil(this.x) : Math.floor(this.x), this.y = this.y < 0 ? Math.ceil(this.y) : Math.floor(this.y), this.z = this.z < 0 ? Math.ceil(this.z) : Math.floor(this.z), this
    },
    negate: function () {
      return this.x = -this.x, this.y = -this.y, this.z = -this.z, this
    },
    dot: function (e) {
      return this.x * e.x + this.y * e.y + this.z * e.z
    },
    lengthSq: function () {
      return this.x * this.x + this.y * this.y + this.z * this.z
    },
    length: function () {
      return Math.sqrt(this.x * this.x + this.y * this.y + this.z * this.z)
    },
    lengthManhattan: function () {
      return Math.abs(this.x) + Math.abs(this.y) + Math.abs(this.z)
    },
    normalize: function () {
      return this.divideScalar(this.length())
    },
    setLength: function (e) {
      var t = this.length();
      return 0 !== t && e !== t && this.multiplyScalar(e / t), this
    },
    lerp: function (e, t) {
      return this.x += (e.x - this.x) * t, this.y += (e.y - this.y) * t, this.z += (e.z - this.z) * t, this
    },
    lerpVectors: function (e, t, n) {
      return this.subVectors(t, e).multiplyScalar(n).add(e), this
    },
    cross: function (e, t) {
      if (void 0 !== t) return console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."), this.crossVectors(e, t);
      var n = this.x,
        i = this.y,
        r = this.z;
      return this.x = i * e.z - r * e.y, this.y = r * e.x - n * e.z, this.z = n * e.y - i * e.x, this
    },
    crossVectors: function (e, t) {
      var n = e.x,
        i = e.y,
        r = e.z,
        o = t.x,
        a = t.y,
        s = t.z;
      return this.x = i * s - r * a, this.y = r * o - n * s, this.z = n * a - i * o, this
    },
    projectOnVector: function (e) {
      return void 0 === i && (i = new s), i.copy(e).normalize(), r = this.dot(i), this.copy(i).multiplyScalar(r)
    },
    projectOnPlane: function () {
      var e;
      return function (t) {
        return void 0 === e && (e = new s), e.copy(this).projectOnVector(t), this.sub(e)
      }
    }(),
    reflect: function () {
      var e;
      return function (t) {
        return void 0 === e && (e = new s), this.sub(e.copy(t).multiplyScalar(2 * this.dot(t)))
      }
    }(),
    distanceTo: function (e) {
      return Math.sqrt(this.distanceToSquared(e))
    },
    distanceToSquared: function (e) {
      var t = this.x - e.x,
        n = this.y - e.y,
        i = this.z - e.z;
      return t * t + n * n + i * i
    },
    setEulerFromRotationMatrix: function (e, t) {
      console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")
    },
    setEulerFromQuaternion: function (e, t) {
      console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")
    },
    getPositionFromMatrix: function (e) {
      return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."), this.setFromMatrixPosition(e)
    },
    getScaleFromMatrix: function (e) {
      return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."), this.setFromMatrixScale(e)
    },
    getColumnFromMatrix: function (e, t) {
      return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."), this.setFromMatrixColumn(e, t)
    },
    setFromMatrixPosition: function (e) {
      return this.x = e.elements[12], this.y = e.elements[13], this.z = e.elements[14], this
    },
    setFromMatrixScale: function (e) {
      var t = this.set(e.elements[0], e.elements[1], e.elements[2]).length(),
        n = this.set(e.elements[4], e.elements[5], e.elements[6]).length(),
        i = this.set(e.elements[8], e.elements[9], e.elements[10]).length();
      return this.x = t, this.y = n, this.z = i, this
    },
    setFromMatrixColumn: function (e, t) {
      var n = 4 * e,
        i = t.elements;
      return this.x = i[n], this.y = i[n + 1], this.z = i[n + 2], this
    },
    equals: function (e) {
      return e.x === this.x && e.y === this.y && e.z === this.z
    },
    fromArray: function (e, t) {
      return void 0 === t && (t = 0), this.x = e[t], this.y = e[t + 1], this.z = e[t + 2], this
    },
    toArray: function (e, t) {
      return void 0 === e && (e = []), void 0 === t && (t = 0), e[t] = this.x, e[t + 1] = this.y, e[t + 2] = this.z, e
    },
    fromAttribute: function (e, t, n) {
      return void 0 === n && (n = 0), t = t * e.itemSize + n, this.x = e.array[t], this.y = e.array[t + 1], this.z = e.array[t + 2], this
    }
  }
}, function (e, t) {
  e.exports = function (e) {
    try {
      return !!e()
    } catch (e) {
      return !0
    }
  }
}, function (e, t) {
  e.exports = !1
}, function (e, t, n) {
  "use strict";
  n.r(t), n.d(t, "getScript", (function () {
    return s
  })), n.d(t, "injectCSS", (function () {
    return l
  })), n.d(t, "getHtmlTemplate", (function () {
    return c
  })), n.d(t, "isExperimentalFlagEnabled", (function () {
    return u
  })), n.d(t, "getResourceUrl", (function () {
    return h
  })), n.d(t, "getParameterByName", (function () {
    return d
  })), n.d(t, "getParameterByNameFromPath", (function () {
    return f
  })), n.d(t, "stringToDOM", (function () {
    return p
  }));
  var i = n(3),
    r = Object(i.getGlobal)(),
    o = r,
    a = o && o.document;

  function s(e) {
    e = e.toLowerCase();
    var t = a.getElementsByTagName("SCRIPT");
    if (t && t.length > 0)
      for (var n = 0; n < t.length; ++n)
        if (t[n].src && -1 !== t[n].src.toLowerCase().indexOf(e)) return t[n];
    return null
  }

  function l(e, t, n) {
    for (var i = e.indexOf("://") > 0 ? e : h(e), r = a.getElementsByTagName("link"), o = 0, s = r.length; o < s; o++)
      if (r[o].href === i) return void(t && t());
    var l = a.createElement("link");
    l.setAttribute("rel", "stylesheet"), l.setAttribute("type", "text/css"), l.setAttribute("href", i), t && (l.onload = t), n && (l.onerror = n), a.head.appendChild(l)
  }

  function c(e, t) {
    var n = e.indexOf("://") > 0 ? e : h(e),
      i = new XMLHttpRequest;

    function r(e) {
      t(e, null)
    }
    i.onload = function (e) {
      var n = e.currentTarget.responseText;
      t(null, n)
    }, i.onerror = r, i.ontimeout = r, i.open("GET", n, !0), i.send()
  }

  function u(e, t) {
    return !(!t || !Array.isArray(t.experimental)) && -1 !== t.experimental.indexOf(e)
  }

  function h(e) {
    return r.LMV_RESOURCE_ROOT + e
  }

  function d(e) {
    return "undefined" == typeof window ? "" : f(e, o.location.href)
  }

  function f(e, t) {
    e = e.replace(/[\[]/, "\\[").replace(/[\]]/, "\\]");
    var n = new RegExp("[\\?&]" + e + "=([^&#]*)").exec(t);
    return null == n ? "" : decodeURIComponent(n[1].replace(/\+/g, " "))
  }

  function p(e) {
    var t = a.createElement("div");
    return t.innerHTML = e, t.firstChild
  }
  r.LOCALIZATION_REL_PATH = "", r.LMV_VIEWER_VERSION = "7.15.2", r.LMV_BUILD_TYPE = "Production", r.LMV_RESOURCE_ROOT = "", r.LMV_THIRD_PARTY_COOKIE = !Object(i.isNodeJS)() && void 0, "v" === r.LMV_VIEWER_VERSION.charAt(0) && (r.LMV_VIEWER_VERSION = r.LMV_VIEWER_VERSION.substr(1)), r.LMV_VECTOR_PDF = !1, r.LMV_RASTER_PDF = !0
}, function (e, t, n) {
  (function (t) {
    var n = function (e) {
      return e && e.Math == Math && e
    };
    e.exports = n("object" == typeof globalThis && globalThis) || n("object" == typeof window && window) || n("object" == typeof self && self) || n("object" == typeof t && t) || Function("return this")()
  }).call(this, n(151))
}, function (e, t, n) {
  "use strict";
  n.r(t), n.d(t, "ViewingService", (function () {
    return v
  })), n.d(t, "pathToURL", (function () {
    return _
  })), n.d(t, "textToArrayBuffer", (function () {
    return x
  }));
  var i, r, o, a, s, l, c, u, h = n(1),
    d = n(9),
    f = n(96),
    p = n(6),
    m = n(3),
    g = n(698),
    v = {},
    y = !1;

  function b(e) {
    var t = e.split("/");
    if (0 == t.length) return e;
    for (var n = [], i = 0; i < t.length; ++i) {
      var r = t[i];
      "." !== r && (".." === r && n.length ? n.pop() : n.push(r))
    }
    return 0 == n.length ? "" : n.join("/")
  }

  function _(e, t) {
    if (-1 !== e.indexOf("://") || 0 === e.indexOf("urn:")) return e;
    if (t) return t + e;
    if ("undefined" == typeof window) return e;
    var n = Object(m.getGlobal)(),
      i = n.location.pathname,
      r = i.lastIndexOf("/");
    return i = i.substr(0, r + 1), n.location.protocol + "//" + n.location.host + i + e
  }

  function x(e, t) {
    for (var n = e.length - t, i = new ArrayBuffer(n), r = new Uint8Array(i, 0), o = 0, a = t; o < n; o++, a++) r[o] = 255 & e.charCodeAt(a);
    return r
  }

  function w(e, t) {
    return -1 === t.indexOf("file://") && (-1 !== t.indexOf("://") || (!!e || void 0))
  }
  if (v.simplifyPath = b, v.OSS_PREFIX = "urn:adsk.objects:os.object:", v.generateUrl = function (e, t, n) {
      if (n = n || "", Object(m.isNodeJS)() && !w(e, n)) return n;
      var i = (n = b(n)).indexOf("urn:"),
        r = n.indexOf("?");
      if (n = -1 != i ? -1 !== r ? n.slice(0, i) + encodeURIComponent(n.slice(i, r)) + n.slice(r) : n.slice(0, i) + encodeURIComponent(n.slice(i)) : encodeURI(n), !t || 0 !== decodeURIComponent(n).indexOf("urn:")) return w(null, n) ? n : e + n;
      switch ("items" !== t && (n = n.substr(6)), t) {
        case "items":
          return p.endpoint.getItemApi(e, n);
        case "bubbles":
          return p.endpoint.getManifestApi(e, n);
        case "thumbnails":
          return p.endpoint.getThumbnailApi(e, n)
      }
    }, Object(m.isNodeJS)()) i = n(169), r = n(169), o = n(169), a = n(169), s = n(169), l = new o.Agent({
    keepAlive: !0,
    keepAliveMsecs: 100,
    maxSockets: 10
  }), c = new a.Agent({
    keepAlive: !0,
    keepAliveMsecs: 100,
    maxSockets: 10
  }), u = new o.Agent({
    maxSockets: 10
  }), v.rawGet = function (e, t, n, f, p, m) {
    if (m = m || {}, w(e, n = v.generateUrl(e, t, n))) {
      if (m.queryParams) {
        var g = -1 === n.indexOf("?") ? "?" : "&";
        n = n + g + m.queryParams
      }
      var y = s.parse(n),
        b = {
          host: y.hostname,
          port: y.port,
          method: m.method || "GET",
          path: y.path,
          headers: {},
          retryCount: 0,
          agent: "https:" === y.protocol ? l : c
        };
      if (b.host.endsWith(".api.autodesk.com") && (b.path.startsWith("/derivativeservice") || b.path.startsWith("/modelderivative")) && (b.agent = u), m.headers)
        for (var _ in m.headers) b.headers[_] = m.headers[_];
      b.headers["accept-encoding"] || (b.headers["accept-encoding"] = "gzip, deflate"), m.range && (b.headers.Range = "bytes=" + m.range.min + "-" + m.range.max), (m.ondata || m.onprogress) && (m.responseType = "arraybuffer");
      var x = ("https:" === y.protocol ? o : a).request(b, (function (e) {
        var t = !(e.statusCode >= 200 && e.statusCode < 400),
          i = e;
        t || ! function (e, t) {
          return !!("gzip" === e.headers["content-encoding"] || t.endsWith(".json.gz") || t.endsWith("FragmentList.pack") || t.endsWith("LightList.bin") || t.endsWith("CameraList.bin") || t.endsWith("CameraDefinitions.bin") || t.endsWith("LightDefinitions.bin"))
        }(e, y.pathname) || m.skipDecompress || (i = e.pipe(r.createGunzip())), "json" !== m.responseType && "text" !== m.responseType && m.responseType || i.setEncoding("utf8");
        var o = [],
          a = Buffer.allocUnsafe(65536),
          s = 0;
        i.on("data", (function (e) {
          if (m.onprogress) {
            if (e.length + s > a.length) {
              var t = Buffer.allocUnsafe(0 | Math.ceil(1.5 * a.length));
              a.copy(t, 0, 0, s), a = t
            }
            return e.copy(a, s, 0, e.length), s += e.length, void(m.onprogress(a, s) && x.abort())
          }
          o.push(e), m.ondata && m.ondata(e)
        })), i.on("end", (function () {
          if (e.statusCode >= 200 && e.statusCode < 400) {
            if ("json" === m.responseType) {
              var t = JSON.parse(o.join(""));
              return void f(t)
            }
            if ("text" === m.responseType || "" === m.responseType) {
              var i = o.join("");
              return void f(i)
            }
            var l = m.onprogress ? a : Buffer.concat(o);
            if (!m.skipDecompress && 31 === l[0] && 139 === l[1]) {
              h.logger.warn("An LMV resource (" + n + ") was double compressed, or Content-Encoding header missing");
              try {
                l = r.gunzipSync(l), s = l.length
              } catch (e) {
                p(d.ErrorCodes.BAD_DATA, "Malformed data received when requesting file", {
                  url: n,
                  exception: e.toString(),
                  stack: e.stack
                })
              }
            }
            200 === x.status && m.range && (l = new Uint8Array(l, m.range.min, m.range.max - m.range.min)), f(l, s)
          } else p && p(e.statusCode, e.statusMessage, {
            url: n
          })
        }))
      }));
      x.on("error", (function (e) {
        p && p(e.code, e.message, {
          url: n
        })
      })), m.postData && x.write(m.postData), x.end()
    } else ! function (e, t, n, o) {
      function a(e) {
        if ("json" === o.responseType) try {
          return JSON.parse(e.toString("utf8"))
        } catch (e) {
          n(e)
        }
        return e
      }
      0 === e.indexOf("file://") && (e = e.substr(7)), i.readFile(e, (function (i, s) {
        i ? n(0, 0, {
          httpStatusText: i,
          url: e
        }) : 31 === s[0] && 139 === s[1] ? r.gunzip(s, null, (function (i, r) {
          i ? n(0, 0, {
            httpStatusText: i,
            url: e
          }) : (r = a(r), o.ondata && o.ondata(r), t(r))
        })) : (s = a(s), o.ondata && o.ondata(s), t(s))
      }))
    }(n, f, p, m)
  };
  else {
    var E = new(n(336));
    E.max = 25, v.rawGet = function (e, t, n, i, r, o) {
      E.go((function (a) {
        v._rawGet(e, t, n, (function () {
          a();
          for (var e = arguments.length, t = new Array(e), n = 0; n < e; n++) t[n] = arguments[n];
          i && i.apply(i, t)
        }), (function () {
          a();
          for (var e = arguments.length, t = new Array(e), n = 0; n < e; n++) t[n] = arguments[n];
          r && r.apply(r, t)
        }), o)
      }))
    }, v._rawGet = function (e, t, n, i, r, o) {
      if (o = o || {}, n = v.generateUrl(e, t, n), o.queryParams) {
        var a = -1 === n.indexOf("?") ? "?" : "&";
        n = n + a + o.queryParams
      }
      var s = new XMLHttpRequest;

      function l(e) {
        r && r(s.status, s.statusText, {
          url: n
        })
      }

      function c(e) {
        if ("json" === o.responseType) try {
          if (e instanceof Uint8Array) return Object(f.a)(e);
          if ("string" == typeof e) return JSON.parse(e)
        } catch (e) {}
        return e
      }

      function u(e) {
        if (s.status >= 200 && s.status < 400)
          if (s.response && s.response instanceof ArrayBuffer) {
            var t;
            if (t = 200 === s.status && o.range ? new Uint8Array(s.response, o.range.min, o.range.max - o.range.min) : new Uint8Array(s.response), !o.skipDecompress && 31 === t[0] && 139 === t[1]) {
              y || (y = !0, h.logger.warn("An LMV resource (" + n + ") was not uncompressed by the browser. This hurts performance. Check the Content-Encoding header returned by the server and check whether you're getting double-compressed streams. The warning prints only once but it's likely the problem affects multiple resources."));
              try {
                t = g.ungzip(t)
              } catch (e) {
                r(d.ErrorCodes.BAD_DATA, "Malformed data received when requesting file", {
                  url: n,
                  exception: e.toString(),
                  stack: e.stack
                })
              }
            }
            i && i(c(t))
          } else {
            var a = s.response;
            a || o.responseType && "text" !== o.responseType || (a = s.responseText), i && i(c(a))
          }
        else l()
      }
      try {
        var p = !o.hasOwnProperty("asynchronous") || o.asynchronous;
        if (s.open(o.method || (o.noBody ? "HEAD" : "GET"), n, p), o.hasOwnProperty("responseType") && (s.responseType = o.responseType), s.withCredentials = !0, o.hasOwnProperty("withCredentials") && (s.withCredentials = o.withCredentials), o.range && s.setRequestHeader("Range", "bytes=" + o.range.min + "-" + o.range.max), o.headers)
          for (var m in o.headers) s.setRequestHeader(m, o.headers[m]), "authorization" === m.toLocaleLowerCase() && (s.withCredentials = !1);
        p && (s.onload = u, s.onerror = l, s.ontimeout = l, (o.ondata || o.onprogress) && (s.overrideMimeType("text/plain; charset=x-user-defined"), o._dlProgress = {
          streamOffset: 0
        }, s.onreadystatechange = function () {
          if (s.readyState > 2 && 200 === s.status)
            if (o.ondata) {
              var e = s.responseText;
              if (o._dlProgress.streamOffset >= e.length) return;
              var t = x(e, o._dlProgress.streamOffset);
              o._dlProgress.streamOffset = e.length, o.ondata(t)
            } else if (o.onprogress) {
            o.onprogress(s.responseText) && s.abort()
          }
        })), s.send(o.postData), p || u()
      } catch (e) {
        r(s.status, s.statusText, {
          url: n,
          exception: e
        })
      }
    }
  }

  function A(e, t) {
    t.hasOwnProperty("responseType") || (t.responseType = "arraybuffer"), t.hasOwnProperty("withCredentials") || (t.withCredentials = !!e.auth), t.headers = e.headers, t.queryParams = e.queryParams, t.endpoint = e.endpoint
  }
  v.defaultFailureCallback = function (e, t, n) {
    403 == e ? this.raiseError(d.ErrorCodes.NETWORK_ACCESS_DENIED, "Access denied to remote resource", {
      url: n.url,
      httpStatus: e,
      httpStatusText: t
    }) : 404 == e ? this.raiseError(d.ErrorCodes.NETWORK_FILE_NOT_FOUND, "Remote resource not found", {
      url: n.url,
      httpStatus: e,
      httpStatusText: t
    }) : e >= 500 && e < 600 ? this.raiseError(d.ErrorCodes.NETWORK_SERVER_ERROR, "Server error when accessing resource", {
      url: n.url,
      httpStatus: e,
      httpStatusText: t
    }) : n.exception ? this.raiseError(d.ErrorCodes.NETWORK_FAILURE, "Network failure", {
      url: n.url,
      exception: n.exception.toString(),
      stack: n.exception.stack
    }) : this.raiseError(d.ErrorCodes.NETWORK_UNHANDLED_RESPONSE_CODE, "Unhandled response code from server", {
      url: n.url,
      httpStatus: e,
      httpStatusText: t,
      data: n
    })
  }, v.getItem = function (e, t, n, i, r) {
    if (A(e, r = r || {}), r.range && !e.supportsRangeRequests) {
      var o = "start=" + r.range.min + "&end=" + r.range.max;
      r.queryParams ? r.queryParams += "&" + o : r.queryParams = o, r.range = void 0
    }
    v.rawGet(e.endpoint, "items", t, n, i, r)
  }, v.getManifest = function (e, t, n, i, r) {
    (r = r || {}).hasOwnProperty("responseType") || (r.responseType = "json"), A(e, r), v.rawGet(e.endpoint, "bubbles", t, n, i, r)
  }, v.getThumbnail = function (e, t, n, i, r) {
    A(e, r = r || {});
    var o = r.queryParams || "",
      a = [];
    if (-1 === o.indexOf("guid=") && a.push("guid=" + encodeURIComponent(r.guid)), -1 === o.indexOf("role=")) {
      var s = r.role || "rendered";
      a.push("role=" + s)
    }
    if (-1 === o.indexOf("width=")) {
      var l = r.size || 400;
      a.push("width=" + l)
    }
    if (-1 === o.indexOf("height=")) {
      l = r.size || 400;
      a.push("height=" + l)
    } - 1 === o.indexOf("acmsession=") && r.acmsession && a.push("acmsession=" + r.acmsession);
    var c = a.join("&");
    r.queryParams ? r.queryParams = r.queryParams + "&" + c : r.queryParams = c, v.rawGet(e.endpoint, "thumbnails", t, n, i, r)
  }, v.getACMSession = function (e, t, n, i) {
    var r, o = {};
    for (var a in t) "oauth2AccessToken" === a ? r = t[a] : -1 !== a.indexOf("x-ads-acm") && (o[a] = t[a]);
    o.application = "autodesk";
    var s = new XMLHttpRequest;
    s.open("POST", e + "/oss-ext/v2/acmsessions", !0), s.setRequestHeader("Content-Type", "application/json"), s.setRequestHeader("Authorization", "Bearer " + r), s.responseType = "json", s.onload = function () {
      if (200 === s.status && s.response) {
        var e = "string" == typeof s.response ? JSON.parse(s.response) : s.response;
        e && e.acmsession ? n(e.acmsession) : i(s.status, "Can't get acm session from response.")
      } else i(s.status)
    }, s.onerror = i, s.ontimeout = i, s.send(JSON.stringify(o)), delete o.application
  }
}, function (e, t, n) {
  var i = n(7),
    r = n(218),
    o = n(27),
    a = n(41),
    s = n(161),
    l = n(298),
    c = function (e, t) {
      this.stopped = e, this.result = t
    };
  (e.exports = function (e, t, n, u, h) {
    var d, f, p, m, g, v, y, b = a(t, n, u ? 2 : 1);
    if (h) d = e;
    else {
      if ("function" != typeof (f = s(e))) throw TypeError("Target is not iterable");
      if (r(f)) {
        for (p = 0, m = o(e.length); m > p; p++)
          if ((g = u ? b(i(y = e[p])[0], y[1]) : b(e[p])) && g instanceof c) return g;
        return new c(!1)
      }
      d = f.call(e)
    }
    for (v = d.next; !(y = v.call(d)).done;)
      if ("object" == typeof (g = l(d, b, y.value, u)) && g && g instanceof c) return g;
    return new c(!1)
  }).stop = function (e) {
    return new c(!0, e)
  }
}, function (e, t) {
  e.exports = function (e) {
    if ("function" != typeof e) throw TypeError(String(e) + " is not a function");
    return e
  }
}, function (e, t, n) {
  "use strict";
  n.r(t), n.d(t, "SnapType", (function () {
    return i
  }));
  var i = {
    SNAP_VERTEX: 0,
    SNAP_MIDPOINT: 1,
    SNAP_CIRCLE_CENTER: 2,
    SNAP_EDGE: 3,
    SNAP_FACE: 4,
    SNAP_CIRCULARARC: 5,
    SNAP_CURVEDEDGE: 6,
    SNAP_CURVEDFACE: 7,
    RASTER_PIXEL: 8,
    SNAP_INTERSECTION: 9
  }
}, function (e, t) {
  e.exports = function (e) {
    return "object" == typeof e ? null !== e : "function" == typeof e
  }
}, function (e, t, n) {
  "use strict";
  n.r(t), n.d(t, "DefaultLightPreset", (function () {
    return r
  })), n.d(t, "DefaultLightPreset2d", (function () {
    return o
  })), n.d(t, "DefaultToneMapMethod", (function () {
    return a
  })), n.d(t, "BackgroundPresets", (function () {
    return s
  })), n.d(t, "LightPresets", (function () {
    return c
  })), n.d(t, "copyLightPreset", (function () {
    return h
  }));
  var i = n(3),
    r = 1,
    o = 0,
    a = 1,
    s = {
      "Fusion Grey": [230, 230, 230, 150, 150, 150],
      "Sky Blue": [226, 244, 255, 156, 172, 180],
      Snow: [181, 186, 199, 181, 186, 199],
      Midnight: [41, 76, 120, 1, 2, 3],
      White: [255, 255, 255, 255, 255, 255],
      AutoCADModel: [30, 40, 48, 30, 40, 48],
      "Dark Grey": [51, 51, 51, 51, 51, 51],
      "Dark Sky": [51, 51, 51, 51, 51, 51],
      "Infinity Pool": [255, 255, 255, 255, 255, 255],
      Tranquility: [0, 84, 166, 0, 84, 166],
      "Grey Room": [129, 129, 129, 129, 129, 129],
      "Photo Booth": [237, 237, 237, 237, 237, 237],
      "RaaS SBS": [1, 1, 1, 90, 90, 90],
      Plaza: [79, 102, 130, 79, 102, 130],
      Field: [202, 226, 252, 202, 201, 190],
      Boardwalk: [216, 230, 248, 230, 228, 220],
      Custom: [230, 230, 230, 150, 150, 150]
    },
    l = s,
    c = [{
      name: "Simple Grey",
      path: null,
      tonemap: 0,
      E_bias: 0,
      directLightColor: [1, .84, .67],
      ambientColor: [.2, .225, .25],
      lightMultiplier: 1,
      bgColorGradient: l["Fusion Grey"],
      darkerFade: !1,
      rotation: 0
    }, {
      name: "Sharp Highlights",
      path: "SharpHighlights",
      type: "logluv",
      tonemap: a,
      E_bias: -9,
      directLightColor: [.5, .5, .5],
      ambientColor: [.25 / 8, .25 / 8, .25 / 8],
      lightMultiplier: 0,
      lightDirection: [.5, -.2, -.06],
      bgColorGradient: l["Photo Booth"],
      darkerFade: !0,
      rotation: 0
    }, {
      name: "Dark Sky",
      path: "DarkSky",
      type: "logluv",
      tonemap: a,
      E_bias: -1,
      directLightColor: [1, 1, 1],
      ambientColor: [.25 / 8, .25 / 8, .25 / 8],
      lightMultiplier: 1,
      lightDirection: [.1, -.55, -1],
      bgColorGradient: l["Dark Sky"],
      darkerFade: !1,
      rotation: 0
    }, {
      name: "Grey Room",
      path: "GreyRoom",
      type: "logluv",
      tonemap: a,
      E_bias: -1,
      directLightColor: [1, 1, 1],
      ambientColor: [.25 / 8, .25 / 8, .25 / 8],
      lightMultiplier: .5,
      lightDirection: [.1, -.55, -1],
      bgColorGradient: l["Grey Room"],
      darkerFade: !0,
      rotation: 0
    }, {
      name: "Photo Booth",
      path: "PhotoBooth",
      type: "logluv",
      tonemap: a,
      E_bias: 0,
      directLightColor: [1, 1, 1],
      ambientColor: [.25 / 8, .25 / 8, .25 / 8],
      lightMultiplier: .5,
      lightDirection: [.1, -.55, -1],
      bgColorGradient: l["Photo Booth"],
      darkerFade: !0,
      rotation: 0
    }, {
      name: "Tranquility",
      path: "TranquilityBlue",
      type: "logluv",
      tonemap: a,
      E_bias: -1,
      directLightColor: [1, 1, 1],
      ambientColor: [.25 / 8, .25 / 8, .25 / 8],
      lightMultiplier: .5,
      lightDirection: [.1, -.55, -1],
      bgColorGradient: l.Tranquility,
      darkerFade: !1,
      rotation: 0
    }, {
      name: "Infinity Pool",
      path: "InfinityPool",
      type: "logluv",
      tonemap: a,
      E_bias: -1,
      directLightColor: [1, .84, .67],
      ambientColor: [.25 / 8, .25 / 8, .25 / 8],
      lightMultiplier: .5,
      lightDirection: [.1, -.55, -1],
      bgColorGradient: l["Infinity Pool"],
      darkerFade: !1,
      rotation: 0
    }, {
      name: "Simple White",
      path: null,
      tonemap: 0,
      E_bias: 0,
      directLightColor: [1, 1, 1],
      ambientColor: [.25, .25, .25],
      lightMultiplier: 1,
      bgColorGradient: l.White,
      saoRadius: .06,
      saoIntensity: .15,
      darkerFade: !0,
      rotation: 0
    }, {
      name: "Riverbank",
      path: "riverbank",
      type: "logluv",
      tonemap: a,
      E_bias: -5.7,
      directLightColor: [1, 1, 1],
      lightMultiplier: 0,
      bgColorGradient: l["Sky Blue"],
      darkerFade: !1,
      rotation: 0
    }, {
      name: "Contrast",
      path: "IDViz",
      type: "logluv",
      tonemap: a,
      E_bias: 0,
      directLightColor: [1, 1, 1],
      lightMultiplier: 0,
      bgColorGradient: l.Midnight,
      darkerFade: !1,
      rotation: 0
    }, {
      name: "Rim Highlights",
      path: "RimHighlights",
      type: "logluv",
      tonemap: a,
      E_bias: -9,
      directLightColor: [.5, .5, .5],
      ambientColor: [.25 / 8, .25 / 8, .25 / 8],
      lightMultiplier: 0,
      lightDirection: [.35, -.35, -.5],
      bgColorGradient: l["Photo Booth"],
      darkerFade: !0,
      rotation: 0
    }, {
      name: "Cool Light",
      path: "CoolLight",
      type: "logluv",
      tonemap: a,
      E_bias: -9,
      directLightColor: [1, 1, 1],
      ambientColor: [.25 / 8, .25 / 8, .25 / 8],
      lightMultiplier: 0,
      lightDirection: [-0, -.15, -.5],
      bgColorGradient: l["Fusion Grey"],
      darkerFade: !0,
      rotation: 0
    }, {
      name: "Warm Light",
      path: "WarmLight",
      type: "logluv",
      tonemap: a,
      E_bias: -9,
      directLightColor: [1, 1, 1],
      ambientColor: [.25 / 8, .25 / 8, .25 / 8],
      lightMultiplier: 0,
      lightDirection: [-0, -.15, -.5],
      bgColorGradient: l["Fusion Grey"],
      darkerFade: !0,
      rotation: 0
    }, {
      name: "Soft Light",
      path: "SoftLight",
      type: "logluv",
      tonemap: a,
      E_bias: -9,
      directLightColor: [1, 1, 1],
      ambientColor: [.25 / 8, .25 / 8, .25 / 8],
      lightMultiplier: 0,
      lightDirection: [-.5, -.5, 0],
      bgColorGradient: l["Fusion Grey"],
      darkerFade: !0,
      rotation: 0
    }, {
      name: "Grid Light",
      path: "GridLight",
      type: "logluv",
      tonemap: a,
      E_bias: -9,
      directLightColor: [1, 1, 1],
      ambientColor: [.25 / 8, .25 / 8, .25 / 8],
      lightMultiplier: 0,
      lightDirection: [-.5, -.6, 0],
      bgColorGradient: l["Fusion Grey"],
      darkerFade: !0,
      rotation: 0
    }, {
      name: "Plaza",
      path: "Plaza",
      type: "logluv",
      tonemap: a,
      E_bias: -14,
      directLightColor: [.9, .9, 1],
      ambientColor: [.25 / 8, .25 / 8, .25 / 8],
      lightMultiplier: 0,
      lightDirection: [-.2, -.18, .72],
      bgColorGradient: l.Plaza,
      darkerFade: !1,
      rotation: 0
    }, {
      name: "Snow Field",
      path: "SnowField",
      type: "logluv",
      tonemap: a,
      E_bias: -10.461343,
      directLightColor: [1, 1, 1],
      ambientColor: [.25 / 8, .25 / 8, .25 / 8],
      lightMultiplier: 0,
      lightDirection: [0, -1, 0],
      bgColorGradient: l.Snow,
      darkerFade: !1,
      rotation: 0
    }, {
      name: "Field",
      path: "field",
      type: "logluv",
      tonemap: a,
      E_bias: -2.9,
      directLightColor: [1, 1, 1],
      lightMultiplier: 0,
      bgColorGradient: l.Field,
      useIrradianceAsBackground: !0,
      darkerFade: !0,
      rotation: 0
    }, {
      name: "Boardwalk",
      path: "boardwalk",
      type: "logluv",
      tonemap: a,
      E_bias: -7,
      directLightColor: [1, 1, 1],
      lightMultiplier: 0,
      bgColorGradient: l.Boardwalk,
      useIrradianceAsBackground: !0,
      darkerFade: !1,
      rotation: 0
    }, {
      name: "Flat Shading",
      path: null,
      tonemap: 0,
      E_bias: 0,
      directLightColor: [0, 0, 0],
      ambientColor: [0, 0, 0],
      lightMultiplier: 0,
      bgColorGradient: l["Fusion Grey"],
      darkerFade: !1,
      rotation: 0
    }],
    u = [{
      name: "Harbor",
      path: "Harbor",
      type: "logluv",
      tonemap: a,
      E_bias: 1.9,
      directLightColor: [1, 1, 1],
      lightMultiplier: 0,
      bgColorGradient: l["Sky Blue"],
      useIrradianceAsBackground: !0,
      saoIntensity: .5,
      darkerFade: !1,
      rotation: 0
    }, {
      name: "Night",
      path: "Night",
      type: "logluv",
      tonemap: 1,
      E_bias: 4,
      directLightColor: [1, 1, 1],
      lightMultiplier: 0,
      bgColorGradient: l.Midnight,
      useIrradianceAsBackground: !1,
      darkerFade: !1,
      rotation: 0
    }, {
      name: "Parking",
      path: "Parking",
      type: "logluv",
      tonemap: a,
      E_bias: 2.8,
      directLightColor: [1, 1, 1],
      lightMultiplier: 0,
      bgColorGradient: l["Sky Blue"],
      useIrradianceAsBackground: !1,
      saoIntensity: .5,
      darkerFade: !1,
      rotation: 0
    }, {
      name: "River Road",
      path: "RiverRoad",
      type: "logluv",
      tonemap: a,
      E_bias: 0,
      directLightColor: [1, 1, 1],
      lightMultiplier: 0,
      bgColorGradient: l["Fusion Grey"],
      useIrradianceAsBackground: !1,
      saoIntensity: .7,
      darkerFade: !1,
      rotation: 0
    }, {
      name: "Crossroads",
      path: "crossroads",
      type: "logluv",
      tonemap: a,
      E_bias: -5.5,
      directLightColor: [1, 1, 1],
      lightMultiplier: 0,
      bgColorGradient: l["Sky Blue"],
      useIrradianceAsBackground: !0,
      darkerFade: !0,
      rotation: 0
    }, {
      name: "Seaport",
      path: "seaport",
      type: "logluv",
      tonemap: a,
      E_bias: -6.5,
      directLightColor: [1, 1, 1],
      lightMultiplier: 0,
      bgColorGradient: l["Sky Blue"],
      useIrradianceAsBackground: !0,
      darkerFade: !1,
      rotation: 0
    }, {
      name: "Glacier",
      path: "glacier",
      type: "logluv",
      tonemap: a,
      E_bias: 0,
      directLightColor: [1, 1, 1],
      lightMultiplier: 0,
      bgColorGradient: l.Midnight,
      darkerFade: !1,
      rotation: 0
    }, {
      name: "RaaS Test Env",
      path: "Reflection",
      type: "logluv",
      tonemap: 2,
      E_bias: -1.5,
      directLightColor: [1, 1, 1],
      lightMultiplier: 0,
      bgColorGradient: l["RaaS SBS"],
      darkerFade: !1,
      rotation: 0
    }, {
      name: "City Night",
      path: "CityNight",
      type: "logluv",
      tonemap: a,
      E_bias: 1.6,
      directLightColor: [1, 1, 1],
      lightMultiplier: .2,
      bgColorGradient: l.Midnight,
      useIrradianceAsBackground: !1,
      darkerFade: !1,
      rotation: 0
    }];

  function h(e, t) {
    Object(i.ObjectAssign)(t, e), t.name = e.name + " (copy)"
  }
  Object(i.getGlobal)().ENABLE_DEBUG && Array.prototype.push.apply(c, u)
}, function (e, t, n) {
  var i = n(14);
  e.exports = !i((function () {
    return 7 != Object.defineProperty({}, 1, {
      get: function () {
        return 7
      }
    })[1]
  }))
}, function (e, t, n) {
  var i = n(17),
    r = n(182),
    o = n(40),
    a = n(153),
    s = n(214),
    l = n(289),
    c = r("wks"),
    u = i.Symbol,
    h = l ? u : u && u.withoutSetter || a;
  e.exports = function (e) {
    return o(c, e) || (s && o(u, e) ? c[e] = u[e] : c[e] = h("Symbol." + e)), c[e]
  }
}, function (e, t, n) {
  "use strict";
  n.r(t), n.d(t, "LmvMatrix4", (function () {
    return i
  }));
  var i = function (e) {
    this.elements = e ? new Float64Array([1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1]) : new Float32Array([1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1])
  };
  i.prototype = {
    constructor: i,
    set: function (e, t, n, i, r, o, a, s, l, c, u, h, d, f, p, m) {
      var g = this.elements;
      return g[0] = e, g[4] = t, g[8] = n, g[12] = i, g[1] = r, g[5] = o, g[9] = a, g[13] = s, g[2] = l, g[6] = c, g[10] = u, g[14] = h, g[3] = d, g[7] = f, g[11] = p, g[15] = m, this
    },
    identity: function () {
      return this.set(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1), this
    },
    copy: function (e) {
      return this.elements.set(e.elements), this
    },
    makeRotationFromQuaternion: function (e) {
      var t = this.elements,
        n = e.x,
        i = e.y,
        r = e.z,
        o = e.w,
        a = n + n,
        s = i + i,
        l = r + r,
        c = n * a,
        u = n * s,
        h = n * l,
        d = i * s,
        f = i * l,
        p = r * l,
        m = o * a,
        g = o * s,
        v = o * l;
      return t[0] = 1 - (d + p), t[4] = u - v, t[8] = h + g, t[1] = u + v, t[5] = 1 - (c + p), t[9] = f - m, t[2] = h - g, t[6] = f + m, t[10] = 1 - (c + d), t[3] = 0, t[7] = 0, t[11] = 0, t[12] = 0, t[13] = 0, t[14] = 0, t[15] = 1, this
    },
    multiply: function (e) {
      return this.multiplyMatrices(this, e)
    },
    multiplyMatrices: function (e, t) {
      var n = e.elements,
        i = t.elements,
        r = this.elements,
        o = n[0],
        a = n[4],
        s = n[8],
        l = n[12],
        c = n[1],
        u = n[5],
        h = n[9],
        d = n[13],
        f = n[2],
        p = n[6],
        m = n[10],
        g = n[14],
        v = n[3],
        y = n[7],
        b = n[11],
        _ = n[15],
        x = i[0],
        w = i[4],
        E = i[8],
        A = i[12],
        S = i[1],
        M = i[5],
        T = i[9],
        C = i[13],
        P = i[2],
        L = i[6],
        D = i[10],
        I = i[14],
        R = i[3],
        O = i[7],
        k = i[11],
        N = i[15];
      return r[0] = o * x + a * S + s * P + l * R, r[4] = o * w + a * M + s * L + l * O, r[8] = o * E + a * T + s * D + l * k, r[12] = o * A + a * C + s * I + l * N, r[1] = c * x + u * S + h * P + d * R, r[5] = c * w + u * M + h * L + d * O, r[9] = c * E + u * T + h * D + d * k, r[13] = c * A + u * C + h * I + d * N, r[2] = f * x + p * S + m * P + g * R, r[6] = f * w + p * M + m * L + g * O, r[10] = f * E + p * T + m * D + g * k, r[14] = f * A + p * C + m * I + g * N, r[3] = v * x + y * S + b * P + _ * R, r[7] = v * w + y * M + b * L + _ * O, r[11] = v * E + y * T + b * D + _ * k, r[15] = v * A + y * C + b * I + _ * N, this
    },
    multiplyToArray: function (e, t, n) {
      var i = this.elements;
      return this.multiplyMatrices(e, t), n[0] = i[0], n[1] = i[1], n[2] = i[2], n[3] = i[3], n[4] = i[4], n[5] = i[5], n[6] = i[6], n[7] = i[7], n[8] = i[8], n[9] = i[9], n[10] = i[10], n[11] = i[11], n[12] = i[12], n[13] = i[13], n[14] = i[14], n[15] = i[15], this
    },
    multiplyScalar: function (e) {
      var t = this.elements;
      return t[0] *= e, t[4] *= e, t[8] *= e, t[12] *= e, t[1] *= e, t[5] *= e, t[9] *= e, t[13] *= e, t[2] *= e, t[6] *= e, t[10] *= e, t[14] *= e, t[3] *= e, t[7] *= e, t[11] *= e, t[15] *= e, this
    },
    determinant: function () {
      var e = this.elements,
        t = e[0],
        n = e[4],
        i = e[8],
        r = e[12],
        o = e[1],
        a = e[5],
        s = e[9],
        l = e[13],
        c = e[2],
        u = e[6],
        h = e[10],
        d = e[14];
      return e[3] * (+r * s * u - i * l * u - r * a * h + n * l * h + i * a * d - n * s * d) + e[7] * (+t * s * d - t * l * h + r * o * h - i * o * d + i * l * c - r * s * c) + e[11] * (+t * l * u - t * a * d - r * o * u + n * o * d + r * a * c - n * l * c) + e[15] * (-i * a * c - t * s * u + t * a * h + i * o * u - n * o * h + n * s * c)
    },
    transpose: function () {
      var e, t = this.elements;
      return e = t[1], t[1] = t[4], t[4] = e, e = t[2], t[2] = t[8], t[8] = e, e = t[6], t[6] = t[9], t[9] = e, e = t[3], t[3] = t[12], t[12] = e, e = t[7], t[7] = t[13], t[13] = e, e = t[11], t[11] = t[14], t[14] = e, this
    },
    flattenToArrayOffset: function (e, t) {
      var n = this.elements;
      return e[t] = n[0], e[t + 1] = n[1], e[t + 2] = n[2], e[t + 3] = n[3], e[t + 4] = n[4], e[t + 5] = n[5], e[t + 6] = n[6], e[t + 7] = n[7], e[t + 8] = n[8], e[t + 9] = n[9], e[t + 10] = n[10], e[t + 11] = n[11], e[t + 12] = n[12], e[t + 13] = n[13], e[t + 14] = n[14], e[t + 15] = n[15], e
    },
    setPosition: function (e) {
      var t = this.elements;
      return t[12] = e.x, t[13] = e.y, t[14] = e.z, this
    },
    getInverse: function (e, t) {
      var n = this.elements,
        i = e.elements,
        r = i[0],
        o = i[4],
        a = i[8],
        s = i[12],
        l = i[1],
        c = i[5],
        u = i[9],
        h = i[13],
        d = i[2],
        f = i[6],
        p = i[10],
        m = i[14],
        g = i[3],
        v = i[7],
        y = i[11],
        b = i[15];
      n[0] = u * m * v - h * p * v + h * f * y - c * m * y - u * f * b + c * p * b, n[4] = s * p * v - a * m * v - s * f * y + o * m * y + a * f * b - o * p * b, n[8] = a * h * v - s * u * v + s * c * y - o * h * y - a * c * b + o * u * b, n[12] = s * u * f - a * h * f - s * c * p + o * h * p + a * c * m - o * u * m, n[1] = h * p * g - u * m * g - h * d * y + l * m * y + u * d * b - l * p * b, n[5] = a * m * g - s * p * g + s * d * y - r * m * y - a * d * b + r * p * b, n[9] = s * u * g - a * h * g - s * l * y + r * h * y + a * l * b - r * u * b, n[13] = a * h * d - s * u * d + s * l * p - r * h * p - a * l * m + r * u * m, n[2] = c * m * g - h * f * g + h * d * v - l * m * v - c * d * b + l * f * b, n[6] = s * f * g - o * m * g - s * d * v + r * m * v + o * d * b - r * f * b, n[10] = o * h * g - s * c * g + s * l * v - r * h * v - o * l * b + r * c * b, n[14] = s * c * d - o * h * d - s * l * f + r * h * f + o * l * m - r * c * m, n[3] = u * f * g - c * p * g - u * d * v + l * p * v + c * d * y - l * f * y, n[7] = o * p * g - a * f * g + a * d * v - r * p * v - o * d * y + r * f * y, n[11] = a * c * g - o * u * g - a * l * v + r * u * v + o * l * y - r * c * y, n[15] = o * u * d - a * c * d + a * l * f - r * u * f - o * l * p + r * c * p;
      var _ = r * n[0] + l * n[4] + d * n[8] + g * n[12];
      if (0 == _) {
        var x = "Matrix4.getInverse(): can't invert matrix, determinant is 0";
        if (t) throw new Error(x);
        return console.warn(x), this.identity(), this
      }
      return this.multiplyScalar(1 / _), this
    },
    scale: function (e) {
      var t = this.elements,
        n = e.x,
        i = e.y,
        r = e.z;
      return t[0] *= n, t[4] *= i, t[8] *= r, t[1] *= n, t[5] *= i, t[9] *= r, t[2] *= n, t[6] *= i, t[10] *= r, t[3] *= n, t[7] *= i, t[11] *= r, this
    },
    makeTranslation: function (e, t, n) {
      return this.set(1, 0, 0, e, 0, 1, 0, t, 0, 0, 1, n, 0, 0, 0, 1), this
    },
    makeRotationX: function (e) {
      var t = Math.cos(e),
        n = Math.sin(e);
      return this.set(1, 0, 0, 0, 0, t, -n, 0, 0, n, t, 0, 0, 0, 0, 1), this
    },
    makeRotationY: function (e) {
      var t = Math.cos(e),
        n = Math.sin(e);
      return this.set(t, 0, n, 0, 0, 1, 0, 0, -n, 0, t, 0, 0, 0, 0, 1), this
    },
    makeRotationZ: function (e) {
      var t = Math.cos(e),
        n = Math.sin(e);
      return this.set(t, -n, 0, 0, n, t, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1), this
    },
    makeRotationAxis: function (e, t) {
      var n = Math.cos(t),
        i = Math.sin(t),
        r = 1 - n,
        o = e.x,
        a = e.y,
        s = e.z,
        l = r * o,
        c = r * a;
      return this.set(l * o + n, l * a - i * s, l * s + i * a, 0, l * a + i * s, c * a + n, c * s - i * o, 0, l * s - i * a, c * s + i * o, r * s * s + n, 0, 0, 0, 0, 1), this
    },
    makeScale: function (e, t, n) {
      return this.set(e, 0, 0, 0, 0, t, 0, 0, 0, 0, n, 0, 0, 0, 0, 1), this
    },
    compose: function (e, t, n) {
      return this.makeRotationFromQuaternion(t), this.scale(n), this.setPosition(e), this
    },
    transformPoint: function (e) {
      var t = e.x,
        n = e.y,
        i = e.z,
        r = this.elements;
      return e.x = r[0] * t + r[4] * n + r[8] * i + r[12], e.y = r[1] * t + r[5] * n + r[9] * i + r[13], e.z = r[2] * t + r[6] * n + r[10] * i + r[14], e
    },
    transformDirection: function (e) {
      var t = e.x,
        n = e.y,
        i = e.z,
        r = this.elements;
      e.x = r[0] * t + r[4] * n + r[8] * i, e.y = r[1] * t + r[5] * n + r[9] * i, e.z = r[2] * t + r[6] * n + r[10] * i;
      var o = Math.sqrt(e.x * e.x + e.y * e.y + e.z * e.z);
      if (o > 0) {
        var a = 1 / o;
        e.x *= a, e.y *= a, e.z *= a
      }
      return e
    },
    fromArray: function (e) {
      return this.elements.set(e), this
    },
    toArray: function () {
      var e = this.elements;
      return [e[0], e[1], e[2], e[3], e[4], e[5], e[6], e[7], e[8], e[9], e[10], e[11], e[12], e[13], e[14], e[15]]
    },
    clone: function () {
      return new i(this.elements instanceof Float64Array).fromArray(this.elements)
    }
  }
}, function (e, t, n) {
  var i = n(77),
    r = Math.min;
  e.exports = function (e) {
    return e > 0 ? r(i(e), 9007199254740991) : 0
  }
}, function (e, t, n) {
  "use strict";
  n.r(t), n.d(t, "RenderFlags", (function () {
    return i
  }));
  var i = {
    RENDER_NORMAL: 0,
    RENDER_HIGHLIGHTED: 1,
    RENDER_HIDDEN: 2,
    RENDER_SHADOWMAP: 3,
    RENDER_FINISHED: 4
  }
}, function (e, t, n) {
  "use strict";
  var i, r = n(222),
    o = n(24),
    a = n(17),
    s = n(22),
    l = n(40),
    c = n(162),
    u = n(56),
    h = n(68),
    d = n(32).f,
    f = n(69),
    p = n(113),
    m = n(25),
    g = n(153),
    v = a.Int8Array,
    y = v && v.prototype,
    b = a.Uint8ClampedArray,
    _ = b && b.prototype,
    x = v && f(v),
    w = y && f(y),
    E = Object.prototype,
    A = E.isPrototypeOf,
    S = m("toStringTag"),
    M = g("TYPED_ARRAY_TAG"),
    T = r && !!p && "Opera" !== c(a.opera),
    C = !1,
    P = {
      Int8Array: 1,
      Uint8Array: 1,
      Uint8ClampedArray: 1,
      Int16Array: 2,
      Uint16Array: 2,
      Int32Array: 4,
      Uint32Array: 4,
      Float32Array: 4,
      Float64Array: 8
    },
    L = function (e) {
      return s(e) && l(P, c(e))
    };
  for (i in P) a[i] || (T = !1);
  if ((!T || "function" != typeof x || x === Function.prototype) && (x = function () {
      throw TypeError("Incorrect invocation")
    }, T))
    for (i in P) a[i] && p(a[i], x);
  if ((!T || !w || w === E) && (w = x.prototype, T))
    for (i in P) a[i] && p(a[i].prototype, w);
  if (T && f(_) !== w && p(_, w), o && !l(w, S))
    for (i in C = !0, d(w, S, {
        get: function () {
          return s(this) ? this[M] : void 0
        }
      }), P) a[i] && u(a[i], M, i);
  e.exports = {
    NATIVE_ARRAY_BUFFER_VIEWS: T,
    TYPED_ARRAY_TAG: C && M,
    aTypedArray: function (e) {
      if (L(e)) return e;
      throw TypeError("Target is not a typed array")
    },
    aTypedArrayConstructor: function (e) {
      if (p) {
        if (A.call(x, e)) return e
      } else
        for (var t in P)
          if (l(P, i)) {
            var n = a[t];
            if (n && (e === n || A.call(n, e))) return e
          } throw TypeError("Target is not a typed array constructor")
    },
    exportTypedArrayMethod: function (e, t, n) {
      if (o) {
        if (n)
          for (var i in P) {
            var r = a[i];
            r && l(r.prototype, e) && delete r.prototype[e]
          }
        w[e] && !n || h(w, e, n ? t : T && y[e] || t)
      }
    },
    exportTypedArrayStaticMethod: function (e, t, n) {
      var i, r;
      if (o) {
        if (p) {
          if (n)
            for (i in P)(r = a[i]) && l(r, e) && delete r[e];
          if (x[e] && !n) return;
          try {
            return h(x, e, n ? t : T && v[e] || t)
          } catch (e) {}
        }
        for (i in P) !(r = a[i]) || r[e] && !n || h(r, e, t)
      }
    },
    isView: function (e) {
      var t = c(e);
      return "DataView" === t || l(P, t)
    },
    isTypedArray: L,
    TypedArray: x,
    TypedArrayPrototype: w
  }
}, function (e, t, n) {
  "use strict";
  n.r(t), n.d(t, "CutPlanesUniforms", (function () {
    return de
  })), n.d(t, "IdUniforms", (function () {
    return fe
  })), n.d(t, "ThemingUniform", (function () {
    return pe
  })), n.d(t, "ShadowMapCommonUniforms", (function () {
    return me
  })), n.d(t, "ShadowMapUniforms", (function () {
    return ge
  })), n.d(t, "PointSizeUniforms", (function () {
    return ve
  })), n.d(t, "WideLinesUniforms", (function () {
    return ye
  })), n.d(t, "DepthTextureUniforms", (function () {
    return be
  })), n.d(t, "GetPrismMapSampleChunk", (function () {
    return Ee
  })), n.d(t, "GetPrismMapUniformChunk", (function () {
    return Ae
  })), n.d(t, "resolve", (function () {
    return Me
  })), n.d(t, "PackDepthShaderChunk", (function () {
    return Te
  })), n.d(t, "TonemapShaderChunk", (function () {
    return Ce
  })), n.d(t, "OrderedDitheringShaderChunk", (function () {
    return Pe
  })), n.d(t, "CutPlanesShaderChunk", (function () {
    return Le
  })), n.d(t, "PackNormalsShaderChunk", (function () {
    return De
  })), n.d(t, "HatchPatternShaderChunk", (function () {
    return Ie
  })), n.d(t, "EnvSamplingShaderChunk", (function () {
    return Re
  })), n.d(t, "IdVertexDeclaration", (function () {
    return Oe
  })), n.d(t, "IdVertexShaderChunk", (function () {
    return ke
  })), n.d(t, "IdFragmentDeclaration", (function () {
    return Ne
  })), n.d(t, "IdOutputShaderChunk", (function () {
    return Fe
  })), n.d(t, "FinalOutputShaderChunk", (function () {
    return Ue
  })), n.d(t, "ThemingFragmentDeclaration", (function () {
    return Ve
  })), n.d(t, "ThemingFragmentShaderChunk", (function () {
    return Be
  })), n.d(t, "InstancingVertexDeclaration", (function () {
    return ze
  })), n.d(t, "ShadowMapDeclareCommonUniforms", (function () {
    return Ge
  })), n.d(t, "ShadowMapVertexDeclaration", (function () {
    return He
  })), n.d(t, "ShadowMapVertexShaderChunk", (function () {
    return We
  })), n.d(t, "ShadowMapFragmentDeclaration", (function () {
    return je
  })), n.d(t, "PointSizeDeclaration", (function () {
    return qe
  })), n.d(t, "PointSizeShaderChunk", (function () {
    return Xe
  })), n.d(t, "ShaderChunks", (function () {
    return Ye
  }));
  var i = n(0),
    r = n(348),
    o = n.n(r),
    a = n(349),
    s = n.n(a),
    l = n(350),
    c = n.n(l),
    u = n(351),
    h = n.n(u),
    d = n(352),
    f = n.n(d),
    p = n(353),
    m = n.n(p),
    g = n(354),
    v = n.n(g),
    y = n(355),
    b = n.n(y),
    _ = n(356),
    x = n.n(_),
    w = n(357),
    E = n.n(w),
    A = n(358),
    S = n.n(A),
    M = n(359),
    T = n.n(M),
    C = n(360),
    P = n.n(C),
    L = n(361),
    D = n.n(L),
    I = n(362),
    R = n.n(I),
    O = n(363),
    k = n.n(O),
    N = n(364),
    F = n.n(N),
    U = n(365),
    V = n.n(U),
    B = n(366),
    z = n.n(B),
    G = n(367),
    H = n.n(G),
    W = n(368),
    j = n.n(W),
    q = n(369),
    X = n.n(q),
    Y = n(370),
    K = n.n(Y),
    Q = n(371),
    Z = n.n(Q),
    J = n(372),
    $ = n.n(J),
    ee = n(373),
    te = n.n(ee),
    ne = n(374),
    ie = n.n(ne),
    re = n(375),
    oe = n.n(re),
    ae = n(376),
    se = n.n(ae),
    le = n(377),
    ce = n.n(le),
    ue = n(378),
    he = n.n(ue),
    de = {
      cutplanes: {
        type: "v4v",
        value: []
      },
      hatchParams: {
        type: "v2",
        value: new i.Vector2(1, 10)
      },
      hatchTintColor: {
        type: "c",
        value: new i.Color(16777215)
      },
      hatchTintIntensity: {
        type: "f",
        value: 1
      }
    },
    fe = {
      dbId: {
        type: "v3",
        value: new i.Vector3(0, 0, 0)
      },
      modelId: {
        type: "v3",
        value: new i.Vector3(0, 0, 0)
      }
    },
    pe = {
      themingColor: {
        type: "v4",
        value: new i.Vector4(0, 0, 0, 0)
      }
    },
    me = {
      shadowESMConstant: {
        type: "f",
        value: 0
      }
    },
    ge = i.UniformsUtils.merge([{
      shadowMap: {
        type: "t",
        value: null
      },
      shadowMapSize: {
        type: "v2",
        value: new i.Vector2(0, 0)
      },
      shadowBias: {
        type: "f",
        value: 0
      },
      shadowDarkness: {
        type: "f",
        value: 0
      },
      shadowMatrix: {
        type: "m4",
        value: new i.Matrix4
      },
      shadowLightDir: {
        type: "v3",
        value: new i.Vector3
      }
    }, me]),
    ve = {
      point_size: {
        type: "f",
        value: 1
      }
    },
    ye = {
      view_size: {
        type: "v2",
        value: new i.Vector2(640, 480)
      }
    },
    be = {
      tDepth: {
        type: "t",
        value: null
      },
      projInfo: {
        type: "v4",
        value: new i.Vector4
      },
      isOrtho: {
        type: "f",
        value: 0
      },
      worldMatrix_mainPass: {
        type: "m4",
        value: new i.Matrix4
      }
    },
    _e = {};
  for (var xe in i.ShaderChunk) _e[xe] = i.ShaderChunk[xe];
  _e.pack_depth = o.a, _e.depth_texture = s.a, _e.tonemap = c.a, _e.ordered_dither = h.a, _e.cutplanes = f.a, _e.pack_normals = m.a, _e.hatch_pattern = v.a, _e.env_sample = b.a, _e.id_decl_vert = x.a, _e.id_vert = E.a, _e.id_decl_frag = S.a, _e.id_frag = T.a, _e.final_frag = P.a, _e.theming_decl_frag = D.a, _e.theming_frag = R.a, _e.instancing_decl_vert = k.a, _e.shadowmap_decl_common = F.a, _e.shadowmap_decl_vert = V.a, _e.shadowmap_vert = z.a, _e.shadowmap_decl_frag = H.a, _e.float3_average = j.a, _e.line_decl_common = X.a, _e.prism_wood = K.a, _e.prism_glazing = Z.a, _e.prism_transparency = $.a, _e.normal_map = te.a, _e.decl_point_size = ie.a, _e.point_size = oe.a, _e.wide_lines_decl = se.a, _e.wide_lines_vert = ce.a, _e.hsv = he.a;
  var we = {};

  function Ee(e, t, n, i) {
    var r = n ? "_v3" : "",
      o = n ? "vec3 " : "",
      a = n ? t + " = average(" + t + r + ");" : "",
      s = i ? t + r + " = SRGBToLinear(" + t + r + ");" : "";
    return ["#if defined( USE_" + e.toUpperCase() + "_MAP )", "vec2 uv_" + e + "_map = (" + e + "_map_texMatrix * vec3(uv, 1.0)).xy;", e.toUpperCase() + "_CLAMP_TEST;", o + t + r + " = texture2D(" + e + "_map, uv_" + e + "_map).xyz;", s, "if(" + e + "_map_invert) " + t + r + " = vec3(1.0) - " + t + r + ";", a, "#else", t + " = " + e + ";", "#endif"].join("\n")
  }

  function Ae(e) {
    var t = e + "_texMatrix",
      n = e + "_invert";
    return ["#if defined( " + ("USE_" + e).toUpperCase() + " )", "uniform sampler2D " + e + ";", "uniform mat3 " + t + ";", "uniform bool " + n + ";", "#endif"].join("\n")
  }
  we.prism_check = function (e) {
    return ["#if defined( USE_SURFACE_ALBEDO_MAP ) || defined( USE_SURFACE_ROUGHNESS_MAP ) || defined( USE_SURFACE_CUTOUT_MAP ) || defined( USE_SURFACE_ANISOTROPY_MAP ) || defined( USE_SURFACE_ROTATION_MAP ) || defined( USE_OPAQUE_ALBEDO_MAP ) || defined( USE_OPAQUE_F0_MAP ) || defined( USE_OPAQUE_LUMINANCE_MODIFIER_MAP ) || defined( USE_LAYERED_BOTTOM_F0_MAP ) || defined( USE_LAYERED_F0_MAP ) || defined( USE_LAYERED_DIFFUSE_MAP ) || defined( USE_LAYERED_FRACTION_MAP ) || defined( USE_LAYERED_ROUGHNESS_MAP ) || defined( USE_LAYERED_ANISOTROPY_MAP ) || defined( USE_LAYERED_ROTATION_MAP ) || defined( USE_METAL_F0_MAP ) || defined( USE_SURFACE_NORMAL_MAP ) || defined( USE_LAYERED_NORMAL_MAP )", "#define " + e, "#endif"].join("\n")
  }, we.prism_sample_texture = function (e, t, n, i) {
    return Ee(e, t, "true" === n, "true" === i)
  }, we.prism_uniforms = Ae, we.prism_bump_uniforms = function (e) {
    var t = e + "_texMatrix",
      n = e + "_bumpScale",
      i = e + "_bumpmapType";
    return ["#if defined( " + ("USE_" + e).toUpperCase() + " )", "uniform sampler2D " + e + ";", "uniform mat3 " + t + ";", "uniform vec2 " + n + ";", "uniform int " + i + ";", "#endif"].join("\n")
  };
  var Se = {};
  for (xe in we) Se[xe] = new RegExp("#" + xe + " *<([\\w\\d., ]*)>", "g");
  var Me = function e(t) {
      for (var n in we) {
        var i = Se[n];
        t = t.replace(i, (function (e, t) {
          var i = t.split(",").map((function (e) {
            return e.trim()
          }));
          return we[n].apply(null, i)
        }))
      }
      return t.replace(/#include *<([\w\d.]+)>/g, (function (t, n) {
        if (!_e[n]) throw new Error("Cannot resolve #include<" + n + ">");
        return e(_e[n])
      }))
    },
    Te = _e.pack_depth,
    Ce = _e.tonemap,
    Pe = _e.ordered_dither,
    Le = _e.cutplanes,
    De = _e.pack_normals,
    Ie = _e.hatch_pattern,
    Re = _e.env_sample,
    Oe = _e.id_decl_vert,
    ke = _e.id_vert,
    Ne = _e.id_decl_frag,
    Fe = _e.id_frag,
    Ue = _e.final_frag,
    Ve = _e.theming_decl_frag,
    Be = _e.theming_frag,
    ze = _e.instancing_decl_vert,
    Ge = _e.shadowmap_decl_common,
    He = _e.shadowmap_decl_vert,
    We = _e.shadowmap_vert,
    je = _e.shadowmap_decl_frag,
    qe = _e.decl_point_size,
    Xe = _e.point_size,
    Ye = {
      IdUniforms: fe,
      ThemingUniform: pe,
      CutPlanesUniforms: de,
      ShadowMapCommonUniforms: me,
      ShadowMapUniforms: ge,
      PointSizeUniforms: ve,
      WideLinesUniforms: ye,
      DepthTextureUniforms: be,
      PackDepthShaderChunk: Te,
      TonemapShaderChunk: Ce,
      OrderedDitheringShaderChunk: Pe,
      CutPlanesShaderChunk: Le,
      PackNormalsShaderChunk: De,
      HatchPatternShaderChunk: Ie,
      EnvSamplingShaderChunk: Re,
      IdVertexDeclaration: Oe,
      IdVertexShaderChunk: ke,
      IdFragmentDeclaration: Ne,
      IdOutputShaderChunk: Fe,
      FinalOutputShaderChunk: Ue,
      ThemingFragmentDeclaration: Ve,
      ThemingFragmentShaderChunk: Be,
      InstancingVertexDeclaration: ze,
      ShadowMapDeclareCommonUniforms: Ge,
      ShadowMapVertexDeclaration: He,
      ShadowMapVertexShaderChunk: We,
      ShadowMapFragmentDeclaration: je,
      PointSizeDeclaration: qe,
      PointSizeShaderChunk: Xe,
      GetPrismMapSampleChunk: Ee,
      GetPrismMapUniformChunk: Ae,
      resolve: Me
    }
}, function (e, t, n) {
  "use strict";
  n.r(t), n.d(t, "GroundFlags", (function () {
    return i
  }));
  var i = {
    GROUND_UNFINISHED: 0,
    GROUND_FINISHED: 1,
    GROUND_RENDERED: 2
  }
}, function (e, t, n) {
  var i = n(24),
    r = n(283),
    o = n(7),
    a = n(84),
    s = Object.defineProperty;
  t.f = i ? s : function (e, t, n) {
    if (o(e), t = a(t, !0), o(n), r) try {
      return s(e, t, n)
    } catch (e) {}
    if ("get" in n || "set" in n) throw TypeError("Accessors not supported");
    return "value" in n && (e[t] = n.value), e
  }
}, function (e, t, n) {
  "use strict";
  n.r(t), n.d(t, "OptionSlider", (function () {
    return c
  })), n.d(t, "OptionCheckbox", (function () {
    return u
  })), n.d(t, "OptionLabel", (function () {
    return h
  })), n.d(t, "OptionButton", (function () {
    return d
  })), n.d(t, "OptionDropDown", (function () {
    return f
  })), n.d(t, "ResizeFooter", (function () {
    return p
  })), n.d(t, "OptionRow", (function () {
    return m
  })), n.d(t, "SimpleList", (function () {
    return g
  }));
  var i = n(42),
    r = n(8),
    o = n(3),
    a = n(12);

  function s(e, t) {
    for (var n = 0; n < t.length; n++) {
      var i = t[n];
      i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(e, i.key, i)
    }
  }
  var l = n(168);

  function c(e, t, n, i, o) {
    var a = this;
    this.tbody = i;
    var s = o && o.insertAtIndex ? o.insertAtIndex : -1;
    this.hideStepper = o && o.hideStepper;
    var l = o && o.hideCaption;
    this.sliderRow = this.tbody.insertRow(s), this.sliderRow.classList.add("switch-slider-row");
    var c = this.getDocument(),
      u = this.sliderRow.insertCell(0);

    function h(e) {
      e.target != a.stepperElement && (a.stepperElement.value = a.sliderElement.value), a.fireChangeEvent()
    }
    this.caption = c.createElement("div"), this.caption.setAttribute("data-i18n", e), this.caption.textContent = r.i18n.translate(e), l && (this.caption.style.display = "none"), u.appendChild(this.caption), u = this.sliderRow.insertCell(1), this.sliderElement = c.createElement("input"), this.sliderElement.type = "range", this.sliderElement.id = e + "_slider", this.sliderElement.min = t, this.sliderElement.max = n, this.sliderElement.style.width = "85%", u.appendChild(this.sliderElement), u = this.sliderRow.insertCell(2), this.stepperElement = c.createElement("input"), this.stepperElement.type = "number", this.stepperElement.id = e + "_stepper", this.stepperElement.min = t, this.stepperElement.max = n, this.stepperElement.step = 1, this.stepperElement.style.width = "64px", this.hideStepper && (this.stepperElement.style.display = "none"), u.appendChild(this.stepperElement), this.blockEvent = !1, this.stepperElement.addEventListener("change", (function (e) {
      e.target != a.sliderElement && (a.sliderElement.value = a.stepperElement.value), a.fireChangeEvent()
    }), !1), this.sliderElement.addEventListener("change", h, !1), this.sliderElement.addEventListener("input", h, !1)
  }

  function u(e, t, n, i, a, s) {
    var c = this;
    this.tbody = t;
    var u = s && s.insertAtIndex ? s.insertAtIndex : -1;
    this.sliderRow = this.tbody.insertRow(u), this.sliderRow.classList.add("switch-slider-row");
    var h = this.getDocument(),
      d = this.sliderRow.insertCell(0);
    this.caption = h.createElement("div"), this.caption.setAttribute("data-i18n", e), this.caption.textContent = r.i18n.translate(e), d.appendChild(this.caption), d = this.sliderRow.insertCell(1), i && (this.description = h.createElement("div"), this.description.setAttribute("data-i18n", i), this.description.textContent = r.i18n.translate(i), d.appendChild(this.description), d = this.sliderRow.insertCell(2));
    var f = h.createElement("label");
    f.classList.add("switch"), this.checkElement = h.createElement("input"), this.checkElement.type = "checkbox", this.checkElement.id = e + "_check", this.checkElement.checked = n, f.appendChild(this.checkElement);
    var p = h.createElement("div");
    p.classList.add("slider"), f.appendChild(p), d.appendChild(f), this.blockEvent = !1, this.checked = n, this.checkElement.addEventListener("change", (function (e) {
      c.fireChangeEvent()
    }), !1), Object(o.isTouchDevice)() && (this.sliderRowHammer = new l.Manager(this.sliderRow, {
      recognizers: [
        [l.Tap]
      ],
      handlePointerEventMouse: !1,
      inputClass: o.isIE11 ? l.PointerEventInput : l.TouchInput
    }), this.sliderRowHammer.on("tap", (function (e) {
      e.preventDefault(), e.target.click()
    }))), this.checkElement.addEventListener("click", (function (e) {
      e.stopPropagation()
    }), !1), this.sliderRow.addEventListener("click", (function (e) {
      c.checkElement.disabled || (c.checkElement.checked = !c.checkElement.checked, c.fireChangeEvent())
    }), !1)
  }

  function h(e, t, n, i) {
    this.tbody = t;
    var o = i && i.insertAtIndex ? i.insertAtIndex : -1;
    this.sliderRow = this.tbody.insertRow(o);
    var a = this.getDocument(),
      s = this.sliderRow.insertCell(0);
    this.caption = a.createElement("div"), this.caption.setAttribute("data-i18n", e), this.caption.textContent = r.i18n.translate(e), s.appendChild(this.caption), s.colSpan = "3", this.blockEvent = !1, this.removeFromParent = function () {
      this.tbody.removeChild(this.sliderRow), this.tbody = null, this.sliderRow = null, this.caption = null
    }
  }

  function d(e, t, n, i) {
    this.tbody = t;
    var o = i && i.insertAtIndex ? i.insertAtIndex : -1;
    this.sliderRow = this.tbody.insertRow(o), this.sliderRow.insertCell();
    var a = this.sliderRow.insertCell();
    this.sliderRow.insertCell();
    var s = this.getDocument();
    this.caption = s.createElement("div"), this.caption.setAttribute("data-i18n", e), this.caption.textContent = r.i18n.translate(e), this.caption.classList.add("adsk-button"), this.caption.classList.add("table-button"), a.appendChild(this.caption), this.removeFromParent = function () {
      this.tbody.removeChild(this.sliderRow), this._onClick && (this.caption.removeEventListener("click", this._onClick), this._onClick = null), this.tbody = null, this.sliderRow = null, this.caption = null
    }, this.setOnClick = function (e) {
      this._onClick = e, this.caption.addEventListener("click", e, !1)
    }
  }

  function f(e, t, n, i, o, a, s) {
    var l = this;
    this.tbody = t;
    var c = s && s.insertAtIndex ? s.insertAtIndex : -1;
    this.sliderRow = this.tbody.insertRow(c);
    var u = this.getDocument();
    this.dropdownElement = u.createElement("select"), this.dropdownElement.id = e + "_dropdown", this.dropdownElement.classList.add("option-drop-down");
    for (var h = 0; h < n.length; h++) {
      var d = u.createElement("option");
      d.value = h, d.setAttribute("data-i18n", n[h]), d.textContent = r.i18n.translate(n[h]), this.dropdownElement.add(d)
    }
    this.selectedIndex = this.dropdownElement.selectedIndex = i;
    var f = this.sliderRow.insertCell(0);
    (this.caption = u.createElement("div"), this.caption.setAttribute("data-i18n", e), this.caption.textContent = r.i18n.translate(e), f.appendChild(this.caption), o) ? (f.colSpan = "2", this.sliderRow = this.tbody.insertRow(c), (f = this.sliderRow.insertCell(0)).appendChild(this.dropdownElement), f.colSpan = "2", this.dropdownElement.classList.add("tabcell")) : (f = this.sliderRow.insertCell(1)).appendChild(this.dropdownElement);
    f.style.paddingLeft = (s && void 0 !== s.paddingLeft ? s.paddingLeft : 5) + "px", f.style.paddingRight = (s && void 0 !== s.paddingRight ? s.paddingRight : 5) + "px", this.blockEvent = !1, this.dropdownElement.addEventListener("change", (function (e) {
      l.fireChangeEvent()
    }), !1)
  }

  function p(e, t, n) {
    this.resizeCallback = t;
    var i = this.getDocument(),
      r = i.createElement("div");
    r.classList.add("docking-panel-footer");
    var o = i.createElement("div");
    o.classList.add("docking-panel-footer-resizer"), r.appendChild(o);
    var a = !1,
      s = e.getBoundingClientRect(),
      l = {
        x: 0,
        y: 0
      },
      c = i.createElement("div");
    c.classList.add("adsk-viewing-viewer"), c.classList.add("docking-panel-resize-overlay");
    var u = function (t) {
      a = !0, s = e.getBoundingClientRect(), this.getDocument().body.appendChild(c), this.addDocumentEventListener("touchmove", d), this.addDocumentEventListener("touchcancel", h), this.addDocumentEventListener("touchend", h), this.addDocumentEventListener("mousemove", d), this.addDocumentEventListener("mouseup", h), t.preventDefault(), t.stopPropagation()
    };
    u = u.bind(this);
    var h = function (e) {
      var t = this.getDocument();
      t.body.contains(c) && (t.body.removeChild(c), this.removeDocumentEventListener("touchmove", d), this.removeDocumentEventListener("touchcancel", h), this.removeDocumentEventListener("touchend", h), this.removeDocumentEventListener("mousemove", d), this.removeDocumentEventListener("mouseup", h), e.preventDefault(), e.stopPropagation())
    };
    h = h.bind(this);
    var d = function (t) {
      "touchmove" === t.type && (t.canvasX = t.touches[0].screenX, t.canvasY = t.touches[0].screenY), a && (a = !1, l.x = t.canvasX || t.clientX, l.y = t.canvasY || t.clientY);
      var n = (t.canvasX || t.clientX) - l.x,
        i = (t.canvasY || t.clientY) - l.y,
        r = parseInt(s.width + n),
        o = parseInt(s.height + i);
      e.style.width = r + "px", e.style.height = o + "px", this.resizeCallback && this.resizeCallback(r, o), t.preventDefault(), t.stopPropagation()
    };
    d = d.bind(this), o.addEventListener("touchstart", u), o.addEventListener("mousedown", u), e.style.resize = "none", e.appendChild(r), this.footer = r, this.resizer = o
  }

  function m(e, t, n, i, o) {
    this.tbody = t;
    var a = o && o.insertAtIndex ? o.insertAtIndex : -1;
    this.sliderRow = this.tbody.insertRow(a), this.sliderRow.classList.add("switch-slider-row");
    var s = this.getDocument(),
      l = this.sliderRow.insertCell(0);
    this.caption = s.createElement("div"), this.caption.setAttribute("data-i18n", e), this.caption.textContent = r.i18n.translate(e), l.appendChild(this.caption), l = this.sliderRow.insertCell(1), n && (this.description = s.createElement("div"), this.description.setAttribute("data-i18n", n), this.description.textContent = r.i18n.translate(n), l.appendChild(this.description), l = this.sliderRow.insertCell(2))
  }
  c.prototype.constructor = c, i.EventDispatcher.prototype.apply(c.prototype), c.prototype.fireChangeEvent = function () {
    if (!this.blockEvent) {
      this.value = this.sliderElement.value;
      var e = new CustomEvent("change", {
        detail: {
          target: this,
          value: this.sliderElement.value
        }
      });
      this.dispatchEvent(e)
    }
  }, c.prototype.setValue = function (e) {
    this.blockEvent = !0, this.value = e, this.sliderElement.value = e, this.stepperElement.value = e, this.blockEvent = !1
  }, c.prototype.setDisabled = function (e) {
    this.sliderElement.disabled = e, this.stepperElement.disabled = e, this.caption.disabled = e
  }, a.GlobalManagerMixin.call(c.prototype), u.prototype.constructor = u, i.EventDispatcher.prototype.apply(u.prototype), a.GlobalManagerMixin.call(u.prototype), u.prototype.fireChangeEvent = function () {
    if (!this.blockEvent) {
      this.checked = this.checkElement.checked;
      var e = new CustomEvent("change", {
        detail: {
          target: this,
          value: this.checkElement.checked
        }
      });
      this.dispatchEvent(e)
    }
  }, u.prototype.setChecked = function (e) {
    this.checkElement.checked != e && (this.checkElement.checked = e, this.fireChangeEvent())
  }, u.prototype.setValue = function (e) {
    this.blockEvent = !0, this.checked = e, this.checkElement.checked = e, this.blockEvent = !1
  }, u.prototype.getValue = function () {
    return this.checkElement.checked
  }, u.prototype.setDisabled = function (e) {
    this.checkElement.disabled = e, this.caption.disabled = e
  }, u.prototype.setVisibility = function (e) {
    this.sliderRow.style.display = e ? "table-row" : "none"
  }, a.GlobalManagerMixin.call(h.prototype), a.GlobalManagerMixin.call(d.prototype), f.prototype.constructor = f, i.EventDispatcher.prototype.apply(f.prototype), f.prototype.setSelectedIndex = function (e) {
    this.blockEvent = !0, this.selectedIndex = this.dropdownElement.selectedIndex = e, this.blockEvent = !1
  }, f.prototype.setSelectedValue = function (e) {
    this.blockEvent = !0, this.dropdownElement.selectedValue = e, this.selectedIndex = this.dropdownElement.selectedIndex, this.blockEvent = !1
  }, f.prototype.fireChangeEvent = function () {
    if (!this.blockEvent) {
      this.selectedIndex = this.dropdownElement.selectedIndex;
      var e = new CustomEvent("change", {
        detail: {
          target: this,
          value: this.selectedIndex
        }
      });
      this.dispatchEvent(e)
    }
  }, f.prototype.setDisabled = function (e) {
    this.dropdownElement.disabled = e, this.caption.disabled = e
  }, a.GlobalManagerMixin.call(f.prototype), a.GlobalManagerMixin.call(p.prototype), a.GlobalManagerMixin.call(m.prototype);
  var g = function () {
    function e(t, n, i) {
      ! function (e, t) {
        if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
      }(this, e), this._parentDiv = t, this._renderRowFn = n, this._onClickFn = i, this._onRowClick = this._onRowClick.bind(this);
      var r = this.getDocument(),
        o = r.createElement("div");
      o.classList.add("settings-container"), this._parentDiv.appendChild(o), this._myContainer = o, this._myContainer.addEventListener("click", this._onRowClick, {
        capture: !0
      });
      var a = r.createElement("div");
      a.classList.add("settings-table"), this._rowsContainer = a, o.appendChild(a)
    }
    var t, n, i;
    return t = e, (n = [{
      key: "setData",
      value: function (e, t) {
        this._removeAllRows(), this._items = e;
        for (var n = 0; n < e.length; ++n) this._addRow(n);
        this._updateSelection(t)
      }
    }, {
      key: "removeFromParent",
      value: function () {
        this._myContainer.removeEventListener("click", this._onRowClick, {
          capture: !0
        }), this._removeAllRows(), this._parentDiv.removeChild(this._myContainer), this._parentDiv = null, this._myContainer = null, this._rowsContainer = null, this._onClickFn = null, this._items = null
      }
    }, {
      key: "_addRow",
      value: function (e) {
        var t = this._items[e],
          n = this.getDocument(),
          i = n.createElement("div");
        this._renderRowFn(i, t, {
          domDocument: n
        }), i.setAttribute("data-index", e), this._rowsContainer.appendChild(i)
      }
    }, {
      key: "_removeAllRows",
      value: function () {
        for (var e = this._rowsContainer.children; e.length;) this._rowsContainer.removeChild(e[0])
      }
    }, {
      key: "_updateSelection",
      value: function (e) {
        this._myContainer;
        for (var t = this._rowsContainer.children, n = 0; n < t.length; n++) {
          var i = t[n];
          n === e ? i.classList.add("border-select") : i.classList.remove("border-select")
        }
      }
    }, {
      key: "_onRowClick",
      value: function (e) {
        for (var t, n = e.target; n !== this._myContainer && !(t = n.getAttribute("data-index"));) n = n.parentNode;
        if (t) {
          var i = parseInt(t);
          this._onClickFn(i)
        }
      }
    }]) && s(t.prototype, n), i && s(t, i), e
  }();
  a.GlobalManagerMixin.call(g.prototype)
}, function (e, t, n) {
  var i = n(55);
  e.exports = function (e) {
    return Object(i(e))
  }
}, function (e, t, n) {
  "use strict";
  n.r(t), n.d(t, "Extension", (function () {
    return o
  }));
  var i = n(124),
    r = n(12),
    o = function (e, t) {
      this.viewer = e, r.GlobalManagerMixin.call(this), this.setGlobalManager(e.globalManager), this.options = t || {}, this.id = "", this.modes = [], this.mode = "", this.name = "", this.activeStatus = !1
    };
  o.prototype.load = function () {
    return !0
  }, o.prototype.unload = function () {
    return !0
  }, o.prototype.activate = function (e) {
    return !0
  }, o.prototype.deactivate = function () {
    return !0
  }, o.prototype.getName = function () {
    return this.name
  }, o.prototype.getModes = function () {
    return this.modes
  }, o.prototype.isActive = function (e) {
    return e ? this.activeStatus && this.mode === e : this.activeStatus
  }, o.prototype.getState = function (e) {}, o.prototype.restoreState = function (e, t) {
    return !0
  }, o.prototype.extendLocalization = function (e) {
    return Object(i.extendLocalization)(e)
  }, o.prototype.getCache = function () {
    this.viewer.extensionCache || (this.viewer.extensionCache = {});
    var e = this.viewer.extensionCache[this.id];
    return e || (e = this.viewer.extensionCache[this.id] = {}), e
  }, o.prototype.onToolbarCreated = function (e) {}, "undefined" != typeof Autodesk && (Autodesk.Viewing.Extension = o)
}, function (e, t, n) {
  "use strict";
  n.r(t), n.d(t, "createShaderMaterial", (function () {
    return r
  })), n.d(t, "setMacro", (function () {
    return o
  })), n.d(t, "removeMacro", (function () {
    return a
  }));
  var i = n(0),
    r = function (e) {
      var t = {
        vertexShader: e.vertexShader,
        fragmentShader: e.fragmentShader
      };
      return e.uniforms && (t.uniforms = i.UniformsUtils.clone(e.uniforms)), e.defines && (t.defines = Object.assign({}, e.defines)), e.extensions && (t.extensions = Object.assign({}, e.extensions)), e.attributes && (t.attributes = e.attributes), new i.ShaderMaterial(t)
    },
    o = function (e, t, n) {
      n = n || "", e.defines || (e.defines = {}), e.defines[t] != n && (e.defines[t] = n, e.needsUpdate = !0)
    },
    a = function (e, t) {
      (e.defines || e.defines[t]) && (delete e.defines[t], e.needsUpdate = !0)
    }
}, function (e, t, n) {
  "use strict";
  n.r(t), n.d(t, "Control", (function () {
    return r
  }));
  var i = n(42);

  function r(e, t) {
    this._id = e, this._isCollapsible = !t || t.collapsible, this._toolTipElement = null, this._listeners = {}, this.container = this.getDocument().createElement("div"), this.container.id = e, this.addClass("adsk-control")
  }
  n(12).GlobalManagerMixin.call(r.prototype), r.Event = {
    VISIBILITY_CHANGED: "Control.VisibilityChanged",
    COLLAPSED_CHANGED: "Control.CollapsedChanged"
  }, i.EventDispatcher.prototype.apply(r.prototype), r.prototype.constructor = r, r.prototype.container = null, r.prototype.getId = function () {
    return this._id
  }, r.prototype.setVisible = function (e) {
    if (!this.container.classList.contains("adsk-hidden") === e) return !1;
    e ? this.container.classList.remove("adsk-hidden") : this.container.classList.add("adsk-hidden");
    var t = {
      type: r.Event.VISIBILITY_CHANGED,
      target: this,
      controlId: this._id,
      isVisible: e
    };
    return this.dispatchEvent(t), !0
  }, r.prototype.isVisible = function () {
    return !this.container.classList.contains("adsk-hidden")
  }, r.prototype.setToolTip = function (e) {
    return (!this._toolTipElement || this._toolTipElement.getAttribute("tooltipText") !== e) && (this._toolTipElement || (this._toolTipElement = this.getDocument().createElement("div"), this._toolTipElement.id = this._id + "-tooltip", this._toolTipElement.classList.add("adsk-control-tooltip"), this.container.appendChild(this._toolTipElement)), this._toolTipElement.setAttribute("data-i18n", e), this._toolTipElement.setAttribute("tooltipText", e), this._toolTipElement.textContent = Autodesk.Viewing.i18n.translate(e, {
      defaultValue: e
    }), !0)
  }, r.prototype.getToolTip = function () {
    return this._toolTipElement && this._toolTipElement.getAttribute("tooltipText")
  }, r.prototype.setCollapsed = function (e) {
    if (!this._isCollapsible || this.isCollapsed() === e) return !1;
    e ? this.container.classList.add("collapsed") : this.container.classList.remove("collapsed");
    var t = {
      type: r.Event.COLLAPSED_CHANGED,
      isCollapsed: e
    };
    return this.dispatchEvent(t), !0
  }, r.prototype.isCollapsed = function () {
    return !!this.container.classList.contains("collapsed")
  }, r.prototype.isCollapsible = function () {
    return this._isCollapsible
  }, r.prototype.addClass = function (e) {
    this.container.classList.add(e)
  }, r.prototype.removeClass = function (e) {
    this.container.classList.remove(e)
  }, r.prototype.getPosition = function () {
    var e = this.container.getBoundingClientRect();
    return {
      top: e.top,
      left: e.left
    }
  }, r.prototype.getDimensions = function () {
    var e = this.container.getBoundingClientRect();
    return {
      width: e.width,
      height: e.height
    }
  }, r.prototype.setDisplay = function (e) {
    this.container.style.display = e
  }, r.prototype.removeFromParent = function () {
    return !!this.parent && this.parent.removeControl(this)
  }
}, function (e, t, n) {
  var i = n(287),
    r = n(17),
    o = function (e) {
      return "function" == typeof e ? e : void 0
    };
  e.exports = function (e, t) {
    return arguments.length < 2 ? o(i[e]) || o(r[e]) : i[e] && i[e][t] || r[e] && r[e][t]
  }
}, function (e, t, n) {
  "use strict";
  n.r(t), n.d(t, "Animation", (function () {
    return r
  })), n.d(t, "interpolateCatmullRom", (function () {
    return o
  }));
  var i = n(59);

  function r(e, t, n) {
    this.root = e, this.handler = n.animationHandler, this.data = this.handler.init(t), this.hierarchy = this.handler.parse(e), this.viewer = n.viewer, this.animator = n, this.currentTime = 0, this.timeScale = 1, this.isPlaying = !1, this.isPaused = !0, this.loop = !1, this.delta = .5, this.interpolationType = i.a.LINEAR, this.setStartAndEndKeyTime()
  }

  function o(e, t) {
    function n(e, t, n, i, r, o, a) {
      var s = .5 * (n - e),
        l = .5 * (i - t);
      return (2 * (t - n) + s + l) * a + (-3 * (t - n) - 2 * s - l) * o + s * r + t
    }
    var i, r, o, a, s, l, c, u, h, d = [],
      f = [];
    return o = (i = (e.length - 1) * t) - (r = Math.floor(i)), d[0] = 0 === r ? r : r - 1, d[1] = r, d[2] = r > e.length - 2 ? r : r + 1, d[3] = r > e.length - 3 ? r : r + 2, l = e[d[0]], c = e[d[1]], u = e[d[2]], h = e[d[3]], s = o * (a = o * o), f[0] = n(l[0], c[0], u[0], h[0], o, a, s), f[1] = n(l[1], c[1], u[1], h[1], o, a, s), f[2] = n(l[2], c[2], u[2], h[2], o, a, s), f
  }
  n(12).GlobalManagerMixin.call(r.prototype), r.prototype.setStartAndEndKeyTime = function () {
    if (this.data.hierarchy.length > 0) {
      var e = this.data.hierarchy[0].keys;
      this.startKeyTime = e[0].time, this.endKeyTime = e[e.length - 1].time
    } else this.startKeyTime = this.endKeyTime = 0
  }, r.prototype.keyTypes = [], r.prototype.defaultKey = {}, r.prototype.play = function (e) {
    this.currentTime = void 0 !== e ? e : 0, this.isPlaying = !0, this.isPaused = !1, this.reset(), this.handler.play(this)
  }, r.prototype.pause = function () {
    !0 === this.isPaused ? this.handler.play(this) : this.handler.stop(this), this.isPaused = !this.isPaused
  }, r.prototype.stop = function () {
    this.isPlaying = !1, this.isPaused = !1, this.handler.stop(this)
  }, r.prototype.goto = function (e) {
    this.isPlaying || this.play(), this.isPaused || this.pause();
    var t = e - this.currentTime;
    this.update(t)
  }, r.prototype.reset = function () {
    for (var e = 0, t = this.hierarchy.length; e < t; e++) {
      var n = this.hierarchy[e];
      void 0 === n.animationCache && (n.animationCache = {}), void 0 === n.animationCache[this.data.name] && (n.animationCache[this.data.name] = {
        prevKey: this.defaultKey,
        nextKey: this.defaultKey,
        originalMatrix: n.matrix
      });
      for (var i = n.animationCache[this.data.name], r = 0; r < this.keyTypes.length; r++) {
        for (var o = this.keyTypes[r], a = this.data.hierarchy[e].keys[0], s = this.getNextKeyWith(o, e, 1); s.time < this.currentTime && s.index > a.index;) a = s, s = this.getNextKeyWith(o, e, s.index + 1);
        i.prevKey[o] = a, i.nextKey[o] = s
      }
    }
    this.setStartAndEndKeyTime()
  }, r.prototype.getNextKeyWith = function (e, t, n) {
    var r = this.data.hierarchy[t].keys;
    for (this.interpolationType === i.a.CATMULLROM || this.interpolationType === i.a.CATMULLROM_FORWARD ? n = n < r.length - 1 ? n : r.length - 1 : n %= r.length; n < r.length; n++)
      if (void 0 !== r[n][e]) return r[n];
    return this.data.hierarchy[t].keys[0]
  }, r.prototype.getPrevKeyWith = function (e, t, n) {
    var r = this.data.hierarchy[t].keys;
    for (n = this.interpolationType === i.a.CATMULLROM || this.interpolationType === i.a.CATMULLROM_FORWARD ? n > 0 ? n : 0 : n >= 0 ? n : n + r.length; n >= 0; n--)
      if (void 0 !== r[n][e]) return r[n];
    return this.data.hierarchy[t].keys[r.length - 1]
  }, r.prototype.isPlayingOutOfRange = function () {
    return !1 === this.isPaused && (this.currentTime < this.startKeyTime - this.delta || this.currentTime > this.endKeyTime + this.delta)
  }, r.prototype.resetIfLooped = function () {
    !0 === this.loop && this.currentTime > this.endKeyTime && (this.currentTime %= this.endKeyTime, this.reset())
  }
}, function (e, t) {
  var n = {}.hasOwnProperty;
  e.exports = function (e, t) {
    return n.call(e, t)
  }
}, function (e, t, n) {
  var i = n(20);
  e.exports = function (e, t, n) {
    if (i(e), void 0 === t) return e;
    switch (n) {
      case 0:
        return function () {
          return e.call(t)
        };
      case 1:
        return function (n) {
          return e.call(t, n)
        };
      case 2:
        return function (n, i) {
          return e.call(t, n, i)
        };
      case 3:
        return function (n, i, r) {
          return e.call(t, n, i, r)
        }
    }
    return function () {
      return e.apply(t, arguments)
    }
  }
}, function (e, t, n) {
  "use strict";
  n.r(t), n.d(t, "EventDispatcher", (function () {
    return i
  }));
  var i = function () {};
  i.prototype = {
    constructor: i,
    apply: function (e) {
      e.addEventListener = i.prototype.addEventListener, e.hasEventListener = i.prototype.hasEventListener, e.removeEventListener = i.prototype.removeEventListener, e.clearListeners = i.prototype.clearListeners, e.fireEvent = i.prototype.fireEvent, e.dispatchEvent = i.prototype.fireEvent, e.debugEvents = i.prototype.debugEvents
    },
    addEventListener: function (e, t, n) {
      if (e) {
        void 0 === this.listeners && (this.listeners = {}), void 0 === this.listeners[e] && (this.listeners[e] = []);
        for (var i = n && n.priority || 0, r = this.listeners[e].length, o = this.listeners[e].length - 1; o >= 0 && i > this.listeners[e][o].priority; o--) r--;
        this.listeners[e].splice(r, 0, {
          callbackFn: t,
          once: !!n && !!n.once,
          priority: i
        })
      }
    },
    hasEventListener: function (e, t) {
      if (!e) return !1;
      if (void 0 === this.listeners) return !1;
      var n = this.listeners[e];
      if (!n || 0 === n.length) return !1;
      for (var i = 0, r = n.length; i < r; ++i)
        if (n[i].callbackFn === t) return !0;
      return !1
    },
    removeEventListener: function (e, t) {
      if (e)
        if (void 0 !== this.listeners) {
          var n = this.listeners[e];
          if (n)
            for (var i = 0, r = n.length; i < r; ++i)
              if (n[i].callbackFn === t) {
                n.splice(i, 1);
                break
              }
        } else this.listeners = {}
    },
    clearListeners: function () {
      this.listeners = null
    },
    dispatchEvent: function (e) {
      if (void 0 !== this.listeners) {
        if ("string" == typeof e && (e = {
            type: e
          }), !e.target) try {
          e.target = this
        } catch (e) {}
        if (!e.type) throw new Error("event type unknown.");
        if (this._doDebug && console.log("Event: " + e.type), Array.isArray(this.listeners[e.type])) {
          for (var t = this.listeners[e.type].slice(), n = [], i = 0, r = t.length; i < r; ++i) t[i].callbackFn.call(this, e), t[i].once && n.push(t[i].callbackFn);
          for (var o = 0; o < n.length; ++o) this.removeEventListener(e.type, n[o])
        }
      } else this.listeners = {}
    },
    debugEvents: function (e) {
      this._doDebug = e
    }
  }, i.prototype.fireEvent = i.prototype.dispatchEvent, "undefined" != typeof Autodesk && (Autodesk.Viewing.EventDispatcher = i)
}, function (e, t, n) {
  "use strict";
  n.r(t), n.d(t, "KeyCode", (function () {
    return i
  }));
  var i = {
    BACKSPACE: 8,
    TAB: 9,
    ENTER: 13,
    SHIFT: 16,
    CONTROL: 17,
    ALT: 18,
    ESCAPE: 27,
    SPACE: 32,
    PAGEUP: 33,
    PAGEDOWN: 34,
    END: 35,
    HOME: 36,
    LEFT: 37,
    UP: 38,
    RIGHT: 39,
    DOWN: 40,
    INSERT: 45,
    DELETE: 46,
    ZERO: 48,
    SEMICOLONMOZ: 59,
    EQUALSMOZ: 61,
    a: 65,
    b: 66,
    c: 67,
    d: 68,
    e: 69,
    f: 70,
    g: 71,
    h: 72,
    i: 73,
    j: 74,
    k: 75,
    l: 76,
    m: 77,
    n: 78,
    o: 79,
    p: 80,
    q: 81,
    r: 82,
    s: 83,
    t: 84,
    u: 85,
    v: 86,
    w: 87,
    x: 88,
    y: 89,
    z: 90,
    LCOMMAND: 91,
    RCOMMAND: 93,
    PLUS: 107,
    PLUSMOZ: 171,
    DASHMOZ: 109,
    F1: 112,
    F2: 113,
    F3: 114,
    F4: 115,
    F5: 116,
    F6: 117,
    F7: 118,
    F8: 119,
    F9: 120,
    F10: 121,
    F11: 122,
    F12: 123,
    DASHMOZNEW: 173,
    SEMICOLON: 186,
    EQUALS: 187,
    COMMA: 188,
    DASH: 189,
    PERIOD: 190,
    SLASH: 191,
    LBRACKET: 219,
    RBRACKET: 221,
    SINGLEQUOTE: 222,
    COMMANDMOZ: 224
  }
}, function (e, t, n) {
  "use strict";
  n.r(t), n.d(t, "memoryOptimizedLoading", (function () {
    return r
  })), n.d(t, "GPU_MEMORY_LIMIT", (function () {
    return o
  })), n.d(t, "GPU_OBJECT_LIMIT", (function () {
    return a
  })), n.d(t, "USE_VAO", (function () {
    return s
  })), n.d(t, "GEOMETRY_OVERHEAD", (function () {
    return l
  })), n.d(t, "PIXEL_CULLING_THRESHOLD", (function () {
    return c
  }));
  var i = n(3),
    r = !0,
    o = 1024 * (Object(i.isMobileDevice)() ? 64 : 256) * 1024,
    a = Object(i.isMobileDevice)() ? 2500 : 1e4,
    s = !Object(i.isMobileDevice)(),
    l = 336,
    c = 1
}, function (e, t, n) {
  "use strict";
  n.r(t), n.d(t, "TextureLoader", (function () {
    return M
  }));
  var i = n(18),
    r = n(3),
    o = n(9),
    a = n(50),
    s = n(171),
    l = n(1),
    c = n(0),
    u = n(146),
    h = n(6),
    d = n(336),
    f = Object(r.getGlobal)(),
    p = f.document,
    m = new d;
  m.max = Object(r.isMobileDevice)() ? 4 : 6;
  var g = 0,
    v = Object(r.isMobileDevice)() ? 32 : 1 / 0;
  v *= 1048576;
  var y = 0,
    b = 1 / 0;

  function _(e) {
    var t;
    !0 === e.image.wasNPOT && ((t = e).format === c.AlphaFormat || t.format === c.RGBAFormat) && function (e) {
      return e.clampS || e.clampT
    }(e) && function (e) {
      return e.minFilter !== c.NearestFilter && e.minFilter !== c.LinearFilter
    }(e) && Object(r.isChrome)() && Object(r.isWindows)() && (e.minFilter = c.LinearFilter, e.generateMipmaps = !1, e.needsUpdate = !0)
  }

  function x(e, t, n, a, s, d, v) {
    var y = h.endpoint.getUseCredentials(),
      x = h.endpoint.getUseCookie();
    y && x ? c.ImageUtils.crossOrigin = "use-credentials" : h.endpoint.getUseCredentials() ? c.ImageUtils.crossOrigin = "anonymous" : c.ImageUtils.crossOrigin = "";
    var w = "";
    y && s && (w = "acmsession=" + s), v && v.queryParams && (w = w ? w + "&" : "", w += v.queryParams);
    var E = h.endpoint.initLoadContext({
      queryParams: w
    });
    g++, m.go((function (s) {
      var h = function (e, t) {
          g--, t && a ? a(t) : n(e), s()
        },
        m = d ? h : function (e) {
          function t(t) {
            e && (e.image = t), g--, n(e), s()
          }
          e && e.image ? function (e, t) {
            var n, i, r = e.width,
              a = e.height;
            if (0 == (r & r - 1) && 0 == (a & a - 1)) {
              if (r * a <= b) return void t(e);
              n = r, i = a
            } else {
              for (n = 1; 1.5 * n < r;) n *= 2;
              for (i = 1; 1.5 * i < a;) i *= 2
            }
            for (; n * i > b;) n = Math.max(n / 2, 1), i = Math.max(i / 2, 1);
            var s = p.createElement("canvas"),
              c = s.getContext("2d");
            s.width = n, s.height = i, c.drawImage(e, 0, 0, n, i);
            var u = new Image;
            u.wasNPOT = !0, u.src = s.toDataURL(), u.onload = function () {
              t(u)
            }, u.onerror = function (e) {
              l.logger.error(e, Object(o.errorCodeString)(o.ErrorCodes.UNKNOWN_FAILURE)), t(null)
            }
          }(e.image, t) : t()
        },
        w = function (e) {
          g--, l.logger.error("Texture load error", e), n(null), s()
        };
      if (Object(r.isNodeJS)()) ! function (e, t, n, r, a) {
        var s = new c.DataTexture(void 0, n);

        function u(e) {
          a && a.extractImage && (e = a.extractImage(e)), s.image = {
            data: e,
            width: void 0,
            height: void 0
          }, s.needsUpdate = !0, r && r(s)
        }

        function h(e, t) {
          var n = "Error: " + e + " (" + t + ")";
          l.logger.error(n, Object(o.errorCodeString)(o.ErrorCodes.NETWORK_SERVER_ERROR)), r && r(null, {
            msg: t,
            args: e
          })
        }
        i.ViewingService.getItem(t, e, u, h)
      }(e, E, t, h, v);
      else if (".dds" === e.slice(e.length - 4).toLocaleLowerCase())
        if (Object(r.isIOSDevice)()) {
          var A = e.slice(0, e.length - 4) + ".pvr";
          (new PVRLoader).load(A + "?" + E.queryParams, h, w)
        } else(new u.DDSLoader).load(e + "?" + E.queryParams, h, w);
      else y && !x || v && (v.rawData || v.extractImage) ? function (e, t, n, r, a) {
        var s = new c.Texture(void 0, n);

        function u(e) {
          a && a.extractImage && (e = a.extractImage(e));
          var t, n, i = new Image;
          s.image = i, _(s), i.onload = function () {
            s.needsUpdate = !0, r && r(s), f.URL.revokeObjectURL(i.src)
          }, i.onerror = function (e) {
            l.logger.error(e, Object(o.errorCodeString)(o.ErrorCodes.UNKNOWN_FAILURE)), r && r(null)
          }, i.src = (t = new Uint8Array(e), n = new Blob([t], {
            type: "image/jpeg"
          }), (f.URL || f.webkitURL).createObjectURL(n))
        }
        a && a.rawData ? u(a.rawData) : i.ViewingService.getItem(t, e, u, (function (e, t) {
          var n = "Error: " + e + " (" + t + ")";
          l.logger.error(n, Object(o.errorCodeString)(o.ErrorCodes.NETWORK_SERVER_ERROR)), r && r(null, {
            msg: t,
            args: e
          })
        }), a)
      }(e, E, t, m, v) : c.ImageUtils.loadTexture(E.queryParams ? e + "?" + E.queryParams : e, t, m, w)
    }))
  }

  function w(e, t, n) {
    var r = t.getData();
    return x(t.isOTG() ? function (e) {
      var t = h.endpoint.initLoadContext({});
      return r.makeSharedResourcePath(t.otg_cdn, "textures", e)
    }(e) : function (e) {
      for (var t = null, n = 0; n < r.manifest.assets.length; ++n) {
        var o = r.manifest.assets[n];
        if (o.id.toLowerCase() == e.toLowerCase()) {
          t = Object(i.pathToURL)(r.basePath + o.URI);
          break
        }
      }
      return t || (t = Object(i.pathToURL)(r.basePath + e)), t
    }(e), c.UVMapping, n, null, r.acmSessionId)
  }

  function E(e, t, n) {
    if (t.textureMaps && !t.texturesLoaded) {
      t.texturesLoaded = !0;
      var i = e.getData(),
        r = t.textureMaps;
      for (var o in r) {
        var s = r[o];
        if (!n.matman().loadTextureFromCache(e, t, s, o)) w(s.uri, e, function (t) {
          return function (r) {
            if (r) {
              var o = i.materials.scene.SceneUnit,
                s = n.renderer() ? n.renderer().getMaxAnisotropy() : 0;
              (t.converter || a.MaterialConverter.convertTexture)(t, r, o, s)
            }
            var l = n.matman();
            l && (l.setTextureInCache(e, t, r), i.loadOptions.onTextureReceived && i.loadOptions.onTextureReceived(l, t, r, !A()), !A() && n && i.loadDone && !i.texLoadDone && (i.texLoadDone = !0, n.onTextureLoadComplete(e)))
          }
        }(s))
      }
    }
  }

  function A() {
    return g
  }

  function S(e) {
    e >= 0 && (y = e, b = Math.max(16384, v / (4 * y)))
  }
  var M = {
    loadTextureWithSecurity: x,
    loadMaterialTextures: E,
    loadModelTextures: function (e, t) {
      var n = t.matman(),
        i = n._getModelHash(e),
        r = 0;
      if (e.isOTG()) r = e.getData().metadata.stats.num_textures || 0;
      else
        for (var o in n._materials) {
          if (-1 !== o.indexOf(i))(a = n._materials[o]).textureMaps && (r += Object.keys(a.textureMaps).length)
        }
      for (var o in S(r), n._materials) {
        var a;
        if (-1 !== o.indexOf(i)) E(e, a = n._materials[o], t)
      }
      var s = e.getData();
      !A() && t && s.loadDone && !s.texLoadDone && (s.texLoadDone = !0, t.onTextureLoadComplete(e))
    },
    loadCubeMap: function (e, t, n) {
      var i, r = function (i) {
        i ? (i.mapping = c.CubeReflectionMapping, i.LogLuv = -1 !== e.indexOf("logluv"), i.RGBM = -1 !== e.indexOf("rgbm"), Object(s.DecodeEnvMap)(i, t, !1, n)) : n && n(i)
      };
      return c.ImageUtils.crossOrigin = "", Array.isArray(e) ? (i = c.ImageUtils.loadTextureCube(e, c.CubeReflectionMapping, r)).format = c.RGBFormat : "string" == typeof e ? -1 !== e.toLowerCase().indexOf(".dds") ? i = (new u.DDSLoader).load(e, r) : (i = c.ImageUtils.loadTexture(e, c.SphericalReflectionMapping, n)).format = c.RGBFormat : e ? n && n(e) : n && n(null), i
    },
    requestsInProgress: A,
    calculateTextureSize: function (e) {
      var t = 4;
      switch (e.format) {
        case c.AlphaFormat:
          t = 1;
          break;
        case c.RGBFormat:
          t = 3;
          break;
        case c.LuminanceFormat:
          t = 1;
          break;
        case c.LuminanceAlphaFormat:
          t = 2
      }
      switch (e.type) {
        case c.ShortType:
        case c.UnsignedShortType:
        case c.HalfFloatType:
          t *= 2;
          break;
        case c.IntType:
        case c.UnsignedIntType:
        case c.FloatType:
          t *= 4;
          break;
        case c.UnsignedShort4444Type:
        case c.UnsignedShort5551Type:
        case c.UnsignedShort565Type:
          t = 2
      }
      var n = t * e.image.width;
      return n += e.unpackAlignment - 1, n -= n % e.unpackAlignment, e.image.height * n
    },
    imageToCanvas: function (e, t, n) {
      var i = e.width,
        r = e.height,
        o = p.createElement("canvas"),
        a = o.getContext("2d");
      return a.globalCompositeOperation = "copy", o.width = i, o.height = r, t && (a.fillStyle = n || "#FFFFFF", a.fillRect(0, 0, i, r)), a.drawImage(e, 0, 0, i, r), o
    }
  }
}, function (e, t, n) {
  "use strict";
  n.r(t), n.d(t, "ShaderPass", (function () {
    return o
  }));
  var i = n(36),
    r = n(0),
    o = function (e, t) {
      this.textureID = void 0 !== t ? t : "tDiffuse", this.material = Object(i.createShaderMaterial)(e), this.uniforms = this.material.uniforms, this.renderToScreen = !1, this.enabled = !0, this.clear = !1, this.camera = new r.OrthographicCamera(-1, 1, 1, -1, 0, 1);
      var n = new r.BufferGeometry,
        o = new Float32Array(9);
      o[0] = -1, o[1] = -1, o[2] = 0, o[3] = 3, o[4] = -1, o[5] = 0, o[6] = -1, o[7] = 3, o[8] = 0;
      var a = new Float32Array(6);
      a[0] = 0, a[1] = 0, a[2] = 2, a[3] = 0, a[4] = 0, a[5] = 2;
      var s = new Float32Array(9);
      s[0] = 0, s[1] = 0, s[2] = 1, s[3] = 0, s[4] = 0, s[5] = 1, s[6] = 0, s[7] = 0, s[8] = 1, n.addAttribute("position", new r.BufferAttribute(o, 3)), n.addAttribute("normal", new r.BufferAttribute(s, 3)), n.addAttribute("uv", new r.BufferAttribute(a, 2)), this.quad = new r.Mesh(n, this.material), this.scene = new r.Scene, this.scene.add(this.quad)
    };
  o.prototype = {
    render: function (e, t, n, i) {
      this.uniforms[this.textureID] && (this.uniforms[this.textureID].value = n.texture || n), this.renderToScreen || !t ? e.render(this.scene, this.camera) : e.render(this.scene, this.camera, t, this.clear)
    }
  }
}, function (e, t, n) {
  var i = n(3),
    r = i.isNodeJS,
    o = i.getGlobal,
    a = n(16).getResourceUrl;
  r() ? function () {
    var t = n(697).MainWorker;

    function i() {
      return new t
    }
    e.exports = {
      createWorker: i,
      initWorkerScript: function (e, t) {
        e && e()
      },
      createWorkerWithIntercept: function () {
        return i()
      }
    }
  }() : function () {
    var t = Autodesk.Viewing.Private,
      n = t.LMV_WORKER_URL || "src/file-loaders/workers/MainWorker-web.js",
      i = null,
      r = !1,
      s = [];

    function l() {
      var e;
      return (e = t.ENABLE_INLINE_WORKER ? new Worker(i) : new Worker(a(n))).doOperation = e.postMessage, e
    }
    e.exports = {
      createWorker: l,
      initWorkerScript: function (e, l) {
        if (t.ENABLE_INLINE_WORKER && !i) {
          if (s.push({
              successCB: e
            }), !r) {
            var c = new XMLHttpRequest,
              u = n,
              h = a(n);
            h && (u = h), c.open("GET", u, !0), c.withCredentials = !1, c.onload = function () {
              var e, t = o();
              r = !1, t.URL = t.URL || t.webkitURL;
              try {
                e = new Blob([c.responseText], {
                  type: "application/javascript"
                })
              } catch (t) {
                var n = new BlobBuilder;
                n.append(c.responseText), e = n.getBlob()
              }
              i = URL.createObjectURL(e);
              var a = s.concat();
              s = [];
              for (var l = 0; l < a.length; ++l) a[l].successCB && a[l].successCB()
            }, r = !0, c.send()
          }
          var d = {
            cancel: function () {
              var t = -1;
              return !!s.some((function (n, i) {
                return n.successCB == e && (t = i, !0)
              })) && (s.splice(t, 1), !0)
            }
          };
          return d
        }
        return e && e(), null
      },
      createWorkerWithIntercept: function () {
        var e = l();
        e.checkEvent = function (e) {
          return !(!e.data || !e.data.assetRequest)
        };
        var t = [];
        return e.addEventListenerWithIntercept = function (n) {
          var i = function (t) {
            e.checkEvent(t) || n(t)
          };
          return t || (t = []), t.push({
            arg: n,
            callback: i
          }), e.addEventListener("message", i, !1), i
        }, e.removeEventListenerWithIntercept = function (n) {
          var i = function (e) {
            if (!t) return null;
            for (var n = 0; n < t.length; ++n)
              if (t[n].arg === e) {
                var i = t[n].callback;
                return t.splice(n, 1), 0 === t.length && (t = null), i
              } return null
          }(n);
          i && e.removeEventListener("message", i, !1)
        }, e.clearAllEventListenerWithIntercept = function () {
          if (t)
            for (var n = t.concat(), i = 0; i < n.length; ++i) e.removeEventListenerWithIntercept(n[i].arg)
        }, e
      },
      clearWorkerDataURL: function () {
        i = null
      }
    }
  }()
}, function (e, t, n) {
  "use strict";
  n.r(t), n.d(t, "DockingPanel", (function () {
    return o
  }));
  var i = n(8),
    r = n(33);

  function o(e, t, n, i) {
    this.kMinWdth = 100, this.kMinHeight = 100, this.visibilityCallbacks = [], this.movedSinceLastClick = !1, this.movedSinceCreate = !1, this.parentContainer = e;
    var r = this.getDocument();
    this.container = r.createElement("div"), this.container.id = t, this.container.lastWidth = "", this.container.dockRight = !1, this.container.dockBottom = !1, this.titleLabel = n, (i = i || {}).hasOwnProperty("localizeTitle") || (i.localizeTitle = !0), i.hasOwnProperty("addFooter") || (i.addFooter = !0), this.options = i, this.container.classList.add("docking-panel"), e.appendChild(this.container), this.listeners = [], this.initialize(), this.setVisible(!1)
  }
  n(12).GlobalManagerMixin.call(o.prototype), o.prototype.onSetGlobalManager = function (e) {
    this.footerInstance && this.footerInstance.setGlobalManager(e)
  }, o.prototype.initialize = function () {
    this.title = this.createTitleBar(this.titleLabel || this.container.id), this.container.appendChild(this.title), this.initializeMoveHandlers(this.title), this.setTitle(this.titleLabel || this.container.id, this.options), this.closer = this.createCloseButton(), this.container.appendChild(this.closer), this.options.addFooter && (this.footer = this.createFooter(), this.container.appendChild(this.footer))
  }, o.prototype.uninitialize = function () {
    for (var e = 0; e < this.listeners.length; ++e) {
      var t = this.listeners[e];
      t.target.removeEventListener(t.eventId, t.callback)
    }
    this.listeners = [], this.visibilityCallbacks = [], this.parentContainer.removeChild(this.container), this.parentContainer = null, this.container = null, this.title = null, this.closer = null
  }, o.prototype.addVisibilityListener = function (e) {
    this.visibilityCallbacks.push(e)
  }, o.prototype.setVisible = function (e) {
    if (e) {
      var t = this.getContainerBoundingRect();
      if (this.container.dockRight) {
        var n = t.width,
          i = 300,
          r = this.container.lastWidth || this.container.style.width;
        r || (r = this.container.getBoundingClientRect().width), r && (i = parseInt(r)), this.container.style.left = n - i + "px"
      }
      if (this.container.dockBottom) {
        var o = t.height,
          a = 300,
          s = this.container.lastHeight || this.container.style.height;
        s || (s = this.container.getBoundingClientRect().height), s && (a = parseInt(s));
        var l = o - a;
        this.container.style.top = l > 0 ? l + "px" : 0
      }
      this.container.style.maxHeight = t.height + "px", this.container.style.maxWidth = t.width + "px", this.container.style.display = "block", this.bringToFront()
    } else this.container.lastWidth = this.container.style.width, this.container.lastHeight = this.container.style.height, this.container.style.display = "none";
    for (var c = 0; c < this.visibilityCallbacks.length; c++) this.visibilityCallbacks[c](e)
  }, o.prototype.isVisible = function () {
    return "block" === this.container.style.display
  }, o.prototype.visibilityChanged = function () {}, o.prototype.initializeMoveHandlers = function (e) {
    var t, n, i, r, o, a, s, l, c = this.container,
      u = this;

    function h(e) {
      var h = c.style.minWidth ? parseInt(c.style.minWidth) : u.kMinWdth,
        d = c.style.minHeight ? parseInt(c.style.minHeight) : u.kMinHeight,
        f = u.getContainerBoundingRect();
      c.style.maxWidth && parseInt(c.style.width) > parseInt(c.style.maxWidth) && (c.style.width = c.style.maxWidth), c.style.maxHeight && parseInt(c.style.height) > parseInt(c.style.maxHeight) && (c.style.height = c.style.maxHeight), parseInt(c.style.width) < h && (c.style.width = h + "px"), parseInt(c.style.height) < d && (c.style.height = d + "px"), "touchmove" === e.type && (e.screenX = e.touches[0].screenX, e.screenY = e.touches[0].screenY), s += e.screenX - i, l += e.screenY - r, t = o + s, n = a + l;
      var p = parseInt(c.style.width),
        m = parseInt(c.style.height);
      isNaN(p) && (p = u.container.getBoundingClientRect().width), isNaN(m) && (m = u.container.getBoundingClientRect().height), t < 5 && (t = 0), n < 5 && (n = 0), c.dockRight = !1, c.dockBottom = !1, f.width - 5 < t + p && (t = f.width - p, c.dockRight = !0), f.height - 5 < n + m && (n = f.height - m, c.dockBottom = !0), c.style.left = t + "px", c.style.top = n + "px", c.style.maxWidth = f.width - t + "px", c.style.maxHeight = f.height - n + "px", i = e.screenX, r = e.screenY, u.onMove(e, t, n)
    }

    function d(e) {
      u.removeWindowEventListener("mousemove", h), u.removeWindowEventListener("mouseup", d), u.removeWindowEventListener("touchmove", h), u.removeWindowEventListener("touchend", d), u.onEndMove(e, t, n)
    }

    function f(e) {
      "touchstart" === e.type && (e.screenX = e.touches[0].screenX, e.screenY = e.touches[0].screenY), i = e.screenX, r = e.screenY, s = 0, l = 0, o = u.container.offsetLeft, a = u.container.offsetTop, u.addWindowEventListener("mousemove", h, !1), u.addWindowEventListener("mouseup", d, !1), u.addWindowEventListener("touchmove", h, !1), u.addWindowEventListener("touchend", d, !1), e.preventDefault(), u.onStartMove(e, o, a)
    }
    u.addEventListener(e, "mousedown", f), u.addEventListener(e, "touchstart", f)
  }, o.prototype.initializeCloseHandler = function (e) {
    var t = this;
    t.addEventListener(e, "click", (function (e) {
      t.setVisible(!1)
    }), !1)
  }, o.prototype.createScrollContainer = function (e) {
    var t = this.getDocument().createElement("div"),
      n = t.classList;
    return n.add("docking-panel-scroll"), n.add("docking-panel-container-solid-color-a"), n.add(e && e.left ? "left" : "right"), e && e.heightAdjustment && (t.style.height = "calc(100% - " + e.heightAdjustment + "px)"), e && e.marginTop && (t.style.marginTop = e.marginTop + "px"), t.id = this.container.id + "-scroll-container", this.container.appendChild(t), this.scrollContainer = t, this.scrollEaseCurve = e && e.scrollEaseCurve || [0, 0, .29, 1], this.scrollEaseSpeed = e && e.scrollEaseSpeed || .003, t
  }, o.prototype.createTitleBar = function (e) {
    var t = this.getDocument().createElement("div");
    t.classList.add("docking-panel-title"), t.textContent = e;
    var n = this;
    return n.addEventListener(t, "click", (function (e) {
      n.movedSinceLastClick || n.onTitleClick(e), n.movedSinceLastClick = !1
    })), n.addEventListener(t, "mousedown", (function (e) {
      n.bringToFront()
    })), n.addEventListener(t, "dblclick", (function (e) {
      n.onTitleDoubleClick(e)
    })), t
  }, o.prototype.createFooter = function () {
    var e = new r.ResizeFooter(this.container);
    return e.setGlobalManager(this.globalManager), this.footerInstance = e, this.container.style.resize = "none", e.footer
  }, o.prototype.setTitle = function (e, t) {
    t && t.localizeTitle ? (this.title.setAttribute("data-i18n", e), e = i.i18n.translate(e)) : this.title.removeAttribute("data-i18n"), this.title.textContent = e
  }, o.prototype.createCloseButton = function () {
    var e = this.getDocument().createElement("div");
    return e.className = "docking-panel-close", this.initializeCloseHandler(e), e
  }, o.prototype.onStartMove = function (e, t, n) {}, o.prototype.onEndMove = function (e, t, n) {}, o.prototype.onMove = function (e, t, n) {
    this.movedSinceLastClick = !0, this.movedSinceCreate = !0
  }, o.prototype.onTitleClick = function (e) {}, o.prototype.onTitleDoubleClick = function (e) {}, o.prototype.addEventListener = function (e, t, n) {
    e.addEventListener(t, n), this.listeners.push({
      target: e,
      eventId: t,
      callback: n
    })
  }, o.prototype.removeEventListener = function (e, t, n) {
    for (var i = 0; i < this.listeners.length; ++i) {
      var r = this.listeners[i];
      if (r.target === e && r.eventId === t && r.callback === n) return e.removeEventListener(t, n), this.listeners.splice(i, 1), !0
    }
    return !1
  }, o.prototype.getContentSize = function () {
    return {
      height: this.container.clientHeight,
      width: this.container.clientWidth
    }
  }, o.prototype.resizeToContent = function (e) {
    if (this.isVisible()) {
      var t = this.getContentSize().height,
        n = this.container.getBoundingClientRect(),
        i = this.getContainerBoundingRect(),
        r = this.container.querySelector(".docking-panel-footer");
      r && (t += r.getBoundingClientRect().height);
      var o = i.height;
      o -= n.top - i.top + 75, e && void 0 !== e.maxHeight && (o = Math.min(o, e.maxHeight)), t > o && (t = o), this.container.style.maxHeight = o.toString() + "px", this.container.style.height = t.toString() + "px"
    }
  }, o.prototype.getContainerBoundingRect = function () {
    return this.parentContainer.getBoundingClientRect()
  }, o.prototype.animateScroll = function (e, t, n) {
    var i = this.scrollEaseCurve,
      r = this.scrollEaseSpeed,
      o = this.scrollContainer;
    var a = performance.now();
    requestAnimationFrame((function s(l) {
      var c = (l - a) * r;
      c = Math.min(c, 1);
      var u = function (e, t) {
          var n = 3 * e[1],
            i = 3 * (e[3] - e[1]) - n;
          return (((1 - n - i) * t + i) * t + n) * t
        }(i, c),
        h = e + (t - e) * u;
      o.scrollTop = h, n && n(h), c < 1 && requestAnimationFrame(s)
    }))
  }, o.prototype.onViewerResize = function (e, t, n, i, r, o) {
    var a = this.container,
      s = a.getBoundingClientRect(),
      l = s.width,
      c = s.height;
    if (!l || !c) return !1;
    var u = s.top,
      h = s.bottom,
      d = s.left,
      f = s.right;
    return r < l && (l = Math.round(r), a.style.width = l + "px"), o < c && (c = Math.round(o), a.style.height = c + "px"), (i < f || a.dockRight) && (d = Math.round(i - l - n), a.style.left = d + "px"), (t < h || a.dockBottom) && ((u = Math.round(t - c - e)) < 0 && (u = 0), a.style.top = u + "px"), a.style.maxWidth = Math.round(r) + "px", a.style.maxHeight = Math.round(o) + "px", !0
  }, o.prototype.bringToFront = function () {
    var e = this.scrollContainer ? this.scrollContainer.scrollTop : 0;
    this.parentContainer.appendChild(this.container), this.scrollContainer && (this.scrollContainer.scrollTop = e)
  }
}, function (e, t, n) {
  "use strict";
  n.r(t), n.d(t, "ControlGroup", (function () {
    return r
  }));
  var i = n(37);

  function r(e, t) {
    i.Control.call(this, e, t);
    var n = this;
    this._controls = [], this.addClass("adsk-control-group"), this.handleChildSizeChanged = function (e) {
      var t = {
        type: r.Event.SIZE_CHANGED,
        childEvent: e
      };
      n.dispatchEvent(t)
    }
  }
  r.Event = {
    VISIBILITY_CHANGED: i.Control.Event.VISIBILITY_CHANGED,
    COLLAPSED_CHANGED: i.Control.Event.COLLAPSED_CHANGED,
    SIZE_CHANGED: "ControlGroup.SizeChanged",
    CONTROL_ADDED: "ControlGroup.ControlAdded",
    CONTROL_REMOVED: "ControlGroup.ControlRemoved"
  }, r.prototype = Object.create(i.Control.prototype), r.prototype.constructor = r, r.prototype.addControl = function (e, t) {
    e.setGlobalManager(this.globalManager);
    var n = t && void 0 !== t.index ? t.index : this._controls.length;
    if (null !== this.getControl(e.getId())) return !1;
    var o = {
      type: r.Event.CONTROL_ADDED,
      control: e,
      index: n
    };
    return n < this._controls.length ? (this.container.insertBefore(e.container, this._controls[n].container), this._controls.splice(n, 0, e)) : (this.container.appendChild(e.container), this._controls.push(e)), e.addEventListener(i.Control.Event.VISIBILITY_CHANGED, this.handleChildSizeChanged), e.addEventListener(i.Control.Event.COLLAPSED_CHANGED, this.handleChildSizeChanged), e instanceof r && e.addEventListener(r.Event.SIZE_CHANGED, this.handleChildSizeChanged), e.parent = this, this.dispatchEvent(o), this.dispatchEvent(r.Event.SIZE_CHANGED), !0
  }, r.prototype.indexOf = function (e) {
    for (var t = 0; t < this._controls.length; t++) {
      var n = this._controls[t];
      if (n === e || "string" == typeof e && e === n.getId()) return t
    }
    return -1
  }, r.prototype.removeControl = function (e) {
    var t = "string" == typeof e ? this.getControl(e) : e;
    if (!t) return !1;
    var n = this._controls.indexOf(t);
    if (-1 === n) return !1;
    this._controls.splice(n, 1), this.container.removeChild(t.container);
    var o = {
      type: r.Event.CONTROL_REMOVED,
      control: t,
      index: n
    };
    return t.removeEventListener(i.Control.Event.VISIBILITY_CHANGED, this.handleChildSizeChanged), t.removeEventListener(i.Control.Event.COLLAPSED_CHANGED, this.handleChildSizeChanged), t instanceof r && t.removeEventListener(r.Event.SIZE_CHANGED, this.handleChildSizeChanged), t.parent = void 0, this.dispatchEvent(o), this.dispatchEvent(r.Event.SIZE_CHANGED), !0
  }, r.prototype.getControl = function (e) {
    for (var t = 0; t < this._controls.length; t++)
      if (e === this._controls[t].getId()) return this._controls[t];
    return null
  }, r.prototype.getControlId = function (e) {
    return e < 0 || e >= this._controls.length ? null : this._controls[e].getId()
  }, r.prototype.getNumberOfControls = function () {
    return this._controls.length
  }, r.prototype.setCollapsed = function (e) {
    if (!this._isCollapsible) return !1;
    var t = !1;
    return this._controls.forEach((function (n) {
      n.isCollapsible() && n.setCollapsed(e) && (t = !0)
    })), t && (e ? this.container.classList.add("collapsed") : this.container.classList.remove("collapsed"), this.dispatchEvent({
      type: r.Event.COLLAPSED_CHANGED,
      isCollapsed: e
    })), t
  }
}, function (e, t, n) {
  "use strict";
  n.r(t);
  var i = n(0);

  function r(e, t, n) {
    if (!e || !e.colors) return new i.Color(1, 0, 0);
    var r = e.colors[t];
    if (!r) return new i.Color(0, 0, 0);
    var o = r.values;
    if (!o || !o.length) return new i.Color(1, 0, 0);
    var a = o[0];
    return new i.Color(a.r, a.g, a.b)
  }

  function o(e, t, n) {
    if (!e || !e.scalars) return n;
    var i = e.scalars[t];
    return i ? i.values[0] : n
  }

  function a(e, t, n) {
    if (!e || !e.booleans) return n;
    var i = e.booleans[t];
    return void 0 === i ? n : i
  }

  function s(e) {
    var t = o(e, "texture_UScale", 1),
      n = o(e, "texture_VScale", 1),
      i = o(e, "texture_UOffset", 0),
      r = o(e, "texture_VOffset", 0),
      a = o(e, "texture_WAngle", 0);
    return {
      elements: [Math.cos(a) * t, Math.sin(a) * n, 0, -Math.sin(a) * t, Math.cos(a) * n, 0, i, r, 1]
    }
  }

  function l(e, t, n, i, r, o, a) {
    try {
      var s = e[o](a),
        l = s.value
    } catch (e) {
      return void n(e)
    }
    s.done ? t(l) : Promise.resolve(l).then(i, r)
  }

  function c(e) {
    return function () {
      var t = this,
        n = arguments;
      return new Promise((function (i, r) {
        var o = e.apply(t, n);

        function a(e) {
          l(o, i, r, a, s, "next", e)
        }

        function s(e) {
          l(o, i, r, a, s, "throw", e)
        }
        a(void 0)
      }))
    }
  }
  n.d(t, "MaterialConverter", (function () {
    return h
  }));
  var u = Autodesk.Viewing,
    h = {
      convertMaterial: function (e, t, n, i) {
        return p.apply(this, arguments)
      },
      convertTexture: function (e, t, n, r) {
        "bumpMap" == e.mapName || "normalMap" == e.mapName ? t.anisotropy = 0 : t.anisotropy = r || 0;
        t.flipY = void 0 === e.flipY || e.flipY, t.invert = !1, t.wrapS = i.RepeatWrapping, t.wrapT = i.RepeatWrapping, e.isPrism ? h.convertPrismTexture(e.textureObj, t, n) : function (e, t) {
          if (!e) return;
          var n = e.properties;
          t.invert = a(n, "unifiedbitmap_Invert"), t.clampS = !a(n, "texture_URepeat", !0), t.clampT = !a(n, "texture_VRepeat", !0), t.wrapS = t.clampS ? i.ClampToEdgeWrapping : i.RepeatWrapping, t.wrapT = t.clampT ? i.ClampToEdgeWrapping : i.RepeatWrapping, t.matrix = e.matrix || (e.matrix = s(n))
        }(e.textureObj, t)
      },
      isPrismMaterial: g,
      convertMaterialGltf: function (e, t) {
        var n = new i.MeshPhongMaterial;
        n.packedNormals = !0, n.textureMaps = {};
        var r = e.values,
          o = r.diffuse;
        if (o)
          if (Array.isArray(o)) n.color = new i.Color(o[0], o[1], o[2]);
          else if ("string" == typeof o) {
          n.color = new i.Color(1, 1, 1);
          var a = {
              mapName: "map"
            },
            s = t.gltf.textures[o];
          a.uri = s.source, a.flipY = !1, n.textureMaps[a.mapName] = a
        }
        var l = r.specular;
        l && (n.specular = new i.Color(l[0], l[1], l[2]));
        r.shininess && (n.shininess = r.shininess);
        return n.reflectivity = 0, n.transparent = !1, n
      },
      applyAppearanceHeuristics: function (e, t, n) {
        var r = e.proteinMat ? e.proteinMat : null,
          o = e.prismType && -1 !== e.prismType.indexOf("Prism");
        o && e.transparent && (e.side === i.FrontSide && "PrismGlazing" !== e.prismType && (e.side = i.DoubleSide), e.side === i.DoubleSide && e.depthTest && (e.twoPassTransparency = !0));
        var a = e.textureMaps || {};
        if (!t) {
          var s = e.proteinType && -1 !== e.proteinType.indexOf("Prism");
          if (e.metal) e.reflectivity || (e.reflectivity = v(e.specular)), r && (1 === e.reflectivity && (e.reflectivity = v(e.specular)), 0 === e.color.r && 0 === e.color.g && 0 === e.color.b || (e.color.r *= .1, e.color.g *= .1, e.color.b *= .1));
          else if (s) {
            var l = !1;
            if ("PrismLayered" === e.proteinType) {
              e.clearcoat = !0, e.reflectivity = .06;
              var c = e.proteinCategories;
              c && c.length && -1 != c[0].indexOf("Metal") && (l = !0)
            }
            e.reflectivity = Math.sqrt(e.reflectivity), l ? e.specular.copy(e.color) : (e.specular.r = e.reflectivity, e.specular.g = e.reflectivity, e.specular.b = e.reflectivity)
          } else e.reflectivity ? e.reflectivity > .3 ? (e.metal = !0, e.specular.r = e.color.r, e.specular.g = e.color.g, e.specular.b = e.color.b, e.color.r *= .1, e.color.g *= .1, e.color.b *= .1) : (e.specular.r *= e.reflectivity, e.specular.g *= e.reflectivity, e.specular.b *= e.reflectivity) : 1 !== e.color.r || 1 !== e.color.g || 1 !== e.color.b || 1 !== e.specular.r || 1 !== e.specular.g || 1 !== e.specular.b || a.map || a.specularMap ? (e.reflectivity = .01 + .06 * v(e.specular), e.specular.r *= e.reflectivity, e.specular.g *= e.reflectivity, e.specular.b *= e.reflectivity) : (e.metal = !0, e.reflectivity = .7, e.color.r *= .1, e.color.g *= .1, e.color.b *= .1), e.opacity < 1 && (e.reflectivity = 1);
          (e.transparent || a.map && -1 !== a.map.uri.toLowerCase().indexOf(".png") || a.alphaMap) && (e.alphaTest = .01)
        }
        if (a.normalMap) {
          var u = e.bumpScale;
          (void 0 === u || u >= 1) && (u = 1), e.normalScale = new i.Vector2(u, u)
        } else(void 0 === e.bumpScale && (a.map || a.bumpMap) || e.bumpScale >= 1) && (e.bumpScale = .03);
        if ((!t || o) && e.transparent) {
          if (o) e.lmv_depthWriteTransparent = !0, e.depthWrite = !!n;
          else if (e.opacity >= 1) a.alphaMap || (e.transparency = !1);
          else e.lmv_depthWriteTransparent = !0, e.depthWrite = !!n
        }
        void 0 !== e.shininess && (e.shininess *= .25)
      },
      applyGeometryFlagsToMaterial: function (e, t) {
        t.attributes.color && (e.vertexColors = i.VertexColors, e.needsUpdate = !0);
        if (!e.proteinType && t.attributes.uv && t.attributes.uv.isPattern) {
          var n = !1;
          e.map && !e.bumpMap && (e.bumpMap = e.map, e.needsUpdate = !0, n = !0), e.textureMaps && e.textureMaps.map && !e.textureMaps.bumpMap && (e.textureMaps.bumpMap = e.textureMaps.map, e.needsUpdate = !0, n = !0), n && void 0 === e.bumpScale && (e.bumpScale = .03)
        }
      },
      hasTiling: function (e) {
        var t = e.materials[e.userassets[0]];
        if (t) {
          if ("TilingPattern" === t.definition) return !0
        }
        return !1
      },
      loadMaterialConverterPrismLibrary: d
    };

  function d() {
    return f.apply(this, arguments)
  }

  function f() {
    return (f = c(regeneratorRuntime.mark((function e() {
      var t;
      return regeneratorRuntime.wrap((function (e) {
        for (;;) switch (e.prev = e.next) {
          case 0:
            if (u.MaterialConverterPrism && u.MaterialConverterPrism.convertPrismMaterial) {
              e.next = 3;
              break
            }
            return e.next = 3, u.theExtensionManager.downloadExtension("Autodesk.Viewing.MaterialConverterPrism");
          case 3:
            if (!h.convertPrismMaterial)
              for (t in u.MaterialConverterPrism) h[t] = u.MaterialConverterPrism[t];
          case 4:
          case "end":
            return e.stop()
        }
      }), e)
    })))).apply(this, arguments)
  }

  function p() {
    return (p = c(regeneratorRuntime.mark((function e(t, n, s, l) {
      var c, u, f, p, v, y, b, _, x, w, E, A, S, M, T, C;
      return regeneratorRuntime.wrap((function (e) {
        for (;;) switch (e.prev = e.next) {
          case 0:
            if (!g(t)) {
              e.next = 7;
              break
            }
            return e.next = 4, d();
          case 4:
            return s = h.convertPrismMaterial(t, n, s, l), t.transparent = s.transparent, e.abrupt("return", s);
          case 7:
            if (l = l || t.userassets, c = t.materials, u = c[l], f = u.properties, s) {
              e.next = 15;
              break
            }
            s = new i.MeshPhongMaterial, e.next = 20;
            break;
          case 15:
            if (s instanceof i.MeshPhongMaterial) {
              e.next = 19;
              break
            }
            return e.abrupt("return", null);
          case 19:
            s.needsUpdate = !0;
          case 20:
            if (s.proteinMat = t, s.proteinCategories = u.categories, s.packedNormals = !0, !u || "SimplePhong" !== u.definition) {
              e.next = 86;
              break
            }
            s.tag = u.tag, s.proteinType = u.proteinType, void 0 === s.proteinType && (s.proteinType = null), y = a(f, "generic_baked_lighting", !1), s.disableEnvMap = y, b = s.ambient = r(f, "generic_ambient"), _ = s.color = r(f, "generic_diffuse"), x = s.specular = r(f, "generic_specular"), w = s.emissive = r(f, "generic_emissive"), s.shininess = o(f, "generic_glossiness", 30), s.opacity = 1 - o(f, "generic_transparency", 0), s.reflectivity = o(f, "generic_reflectivity_at_0deg", 0), E = a(f, "generic_bump_is_normal"), null == (A = o(f, "generic_bump_amount", 0)) && (A = 1), E ? (A > 1 && (A = 1), s.normalScale = new i.Vector2(A, A)) : (A >= 1 && (A = .03), s.bumpScale = A), void 0 !== (S = a(f, "generic_is_metal")) && (s.metal = S), void 0 === (M = a(f, "generic_backface_cull")) || M || (s.side = i.DoubleSide), s.transparent = u.transparent, s.textureMaps = {}, T = u.textures, e.t0 = regeneratorRuntime.keys(T);
          case 48:
            if ((e.t1 = e.t0()).done) {
              e.next = 81;
              break
            }
            if (C = e.t1.value, (p = {}).textureObj = c[T[C].connections[0]], v = p.textureObj.properties, p.textureObj.matrix = m(p.textureObj), p.uriPointer = v.uris.unifiedbitmap_Bitmap.values, p.uri = p.uriPointer[0], p.uri) {
              e.next = 58;
              break
            }
            return e.abrupt("continue", 48);
          case 58:
            if ("generic_diffuse" != C) {
              e.next = 63;
              break
            }
            p.mapName = "map", (!s.color || 0 === s.color.r && 0 === s.color.g && 0 === s.color.b) && s.color.setRGB(1, 1, 1), e.next = 78;
            break;
          case 63:
            if ("generic_bump" != C) {
              e.next = 67;
              break
            }
            p.mapName = E ? "normalMap" : "bumpMap", e.next = 78;
            break;
          case 67:
            if ("generic_specular" != C) {
              e.next = 71;
              break
            }
            p.mapName = "specularMap", e.next = 78;
            break;
          case 71:
            if ("generic_alpha" != C) {
              e.next = 77;
              break
            }
            p.mapName = "alphaMap", s.side = i.DoubleSide, s.transparent = !0, e.next = 78;
            break;
          case 77:
            return e.abrupt("continue", 48);
          case 78:
            s.textureMaps[p.mapName] = p, e.next = 48;
            break;
          case 81:
            0 === _.r && 0 === _.g && 0 === _.b && 0 === x.r && 0 === x.g && 0 === x.b && 0 === b.r && 0 === b.g && 0 === b.b && 0 === w.r && 0 === w.g && 0 === w.b && (_.r = _.g = _.b = .4), s.extraDepthOffset = o(f, "generic_depth_offset"), s.extraDepthOffset && (s.polygonOffset = !0, s.polygonOffsetFactor = s.extraDepthOffset, s.polygonOffsetUnits = 0), e.next = 91;
            break;
          case 86:
            s.ambient = new i.Color(197379), s.color = new i.Color(7829367), s.specular = new i.Color(3355443), s.shininess = 30, s.shading = i.SmoothShading;
          case 91:
            return t.transparent = s.transparent, e.abrupt("return", s);
          case 93:
          case "end":
            return e.stop()
        }
      }), e)
    })))).apply(this, arguments)
  }

  function m(e) {
    return e.matrix || (e.matrix = s(e.properties)), e.matrix
  }

  function g(e) {
    var t = e.materials,
      n = t[e.userassets[0]];
    if (n) {
      var i = n.definition;
      if ("TilingPattern" === i)(n = t[n.properties.references.grout_material.connections[0]]) && (i = n.definition);
      return "PrismLayered" === i || "PrismMetal" === i || "PrismOpaque" === i || "PrismTransparent" === i || "PrismGlazing" === i || "PrismWood" === i
    }
    return !1
  }

  function v(e) {
    return .299 * e.r + .587 * e.g + .114 * e.b
  }
}, function (e, t, n) {
  var i, r, o, a = n(285),
    s = n(17),
    l = n(22),
    c = n(56),
    u = n(40),
    h = n(181),
    d = n(154),
    f = s.WeakMap;
  if (a) {
    var p = new f,
      m = p.get,
      g = p.has,
      v = p.set;
    i = function (e, t) {
      return v.call(p, e, t), t
    }, r = function (e) {
      return m.call(p, e) || {}
    }, o = function (e) {
      return g.call(p, e)
    }
  } else {
    var y = h("state");
    d[y] = !0, i = function (e, t) {
      return c(e, y, t), t
    }, r = function (e) {
      return u(e, y) ? e[y] : {}
    }, o = function (e) {
      return u(e, y)
    }
  }
  e.exports = {
    set: i,
    get: r,
    has: o,
    enforce: function (e) {
      return o(e) ? r(e) : i(e, {})
    },
    getterFor: function (e) {
      return function (t) {
        var n;
        if (!l(t) || (n = r(t)).type !== e) throw TypeError("Incompatible receiver, " + e + " required");
        return n
      }
    }
  }
}, function (e, t, n) {
  var i = n(7),
    r = n(20),
    o = n(25)("species");
  e.exports = function (e, t) {
    var n, a = i(e).constructor;
    return void 0 === a || null == (n = i(a)[o]) ? t : r(n)
  }
}, function (e, t, n) {
  "use strict";
  n.r(t), n.d(t, "FrustumIntersector", (function () {
    return o
  })), n.d(t, "OUTSIDE", (function () {
    return l
  })), n.d(t, "INTERSECTS", (function () {
    return c
  })), n.d(t, "CONTAINS", (function () {
    return u
  })), n.d(t, "CONTAINMENT_UNKNOWN", (function () {
    return h
  }));
  var i = n(0),
    r = [
      [1, 5, 4, 7, 3, 2, 6],
      [0, 3, 2, 1, 5, 4, 6],
      [0, 3, 2, 6, 5, 4, 6],
      [0, 4, 7, 3, 2, 1, 6],
      [0, 3, 2, 1, -1, -1, 4],
      [0, 3, 2, 6, 5, 1, 6],
      [0, 4, 7, 6, 2, 1, 6],
      [0, 3, 7, 6, 2, 1, 6],
      [0, 3, 7, 6, 5, 1, 6],
      [0, 1, 5, 4, 7, 3, 6],
      [0, 1, 5, 4, -1, -1, 4],
      [0, 1, 2, 6, 5, 4, 6],
      [0, 4, 7, 3, -1, -1, 4],
      [-1, -1, -1, -1, -1, -1, 0],
      [1, 2, 6, 5, -1, -1, 4],
      [0, 4, 7, 6, 2, 3, 6],
      [2, 3, 7, 6, -1, -1, 4],
      [1, 2, 3, 7, 6, 5, 6],
      [0, 1, 5, 6, 7, 3, 6],
      [0, 1, 5, 6, 7, 4, 6],
      [0, 1, 2, 6, 7, 4, 6],
      [0, 4, 5, 6, 7, 3, 6],
      [4, 5, 6, 7, -1, -1, 4],
      [1, 2, 6, 7, 4, 5, 6],
      [0, 4, 5, 6, 2, 3, 6],
      [2, 3, 7, 4, 5, 6, 6],
      [1, 2, 3, 7, 4, 5, 6]
    ];

  function o() {
    this.frustum = new i.Frustum, this.viewProj = new i.Matrix4, this.viewDir = [0, 0, 1], this.ar = 1, this.viewport = new i.Vector3(1, 1, 1), this.areaConv = 1, this.areaCullThreshold = 1, this.eye = new i.Vector3, this.perspective = !1
  }
  var a, s, l = 0,
    c = 1,
    u = 2,
    h = -1;

  function d(e, t, n) {
    return n.x = 1 & t ? e.max.x : e.min.x, n.y = 2 & t ? e.max.y : e.min.y, n.z = 4 & t ? e.max.z : e.min.z, n
  }
  o.OUTSIDE = l, o.INTERSECTS = c, o.CONTAINS = u, o.CONTAINMENT_UNKNOWN = h, o.prototype.reset = function (e, t) {
    this.viewProj.multiplyMatrices(e.projectionMatrix, e.matrixWorldInverse), this.perspective = e.isPerspective, this.frustum.setFromMatrix(this.viewProj);
    var n = e.matrixWorldInverse.elements;
    this.ar = e.aspect, this.viewDir[0] = -n[2], this.viewDir[1] = -n[6], this.viewDir[2] = -n[10], this.eye.x = e.position.x, this.eye.y = e.position.y, this.eye.z = e.position.z, this.areaConv = e.clientWidth * e.clientHeight / 4, this.cutPlanes = t
  }, o.prototype.projectedArea = function () {
    var e = [new i.Vector3, new i.Vector3, new i.Vector3, new i.Vector3, new i.Vector3, new i.Vector3, new i.Vector3, new i.Vector3],
      t = new i.Box2;

    function n(e, t) {
      var n = e.x,
        i = e.y,
        r = e.z,
        o = t.elements,
        a = o[3] * n + o[7] * i + o[11] * r + o[15];
      a < 0 && (a = -a);
      var s = 1 / a;
      e.x = (o[0] * n + o[4] * i + o[8] * r + o[12]) * s, e.y = (o[1] * n + o[5] * i + o[9] * r + o[13]) * s
    }
    return function (i) {
      if (i.empty()) return 0;
      var r = this.viewProj;
      e[0].set(i.min.x, i.min.y, i.min.z), e[1].set(i.min.x, i.min.y, i.max.z), e[2].set(i.min.x, i.max.y, i.min.z), e[3].set(i.min.x, i.max.y, i.max.z), e[4].set(i.max.x, i.min.y, i.min.z), e[5].set(i.max.x, i.min.y, i.max.z), e[6].set(i.max.x, i.max.y, i.min.z), e[7].set(i.max.x, i.max.y, i.max.z);
      for (var o = 0; o < 8; o++) n(e[o], r);
      return t.makeEmpty(), t.setFromPoints(e), t.min.x < -1 && (t.min.x = -1), t.min.x > 1 && (t.min.x = 1), t.min.y < -1 && (t.min.y = -1), t.min.y > 1 && (t.min.y = 1), t.max.x > 1 && (t.max.x = 1), t.max.x < -1 && (t.max.x = -1), t.max.y > 1 && (t.max.y = 1), t.max.y < -1 && (t.max.y = -1), (t.max.x - t.min.x) * (t.max.y - t.min.y)
    }
  }(), o.prototype.projectedBoxArea = function () {
    for (var e, t = [], n = [], o = 0; o < 10; o++) t.push(new i.Vector3), n.push(new i.Vector3);

    function a(e, t) {
      var n = e.x,
        i = e.y,
        r = e.z,
        o = t.elements,
        a = o[3] * n + o[7] * i + o[11] * r + o[15];
      a < 0 && (a = -a);
      var s = 1 / a;
      e.x = (o[0] * n + o[4] * i + o[8] * r + o[12]) * s, e.y = (o[1] * n + o[5] * i + o[9] * r + o[13]) * s
    }
    return function (i, o) {
      if (i.empty()) return 0;
      var s, l = this.viewProj;
      if (this.perspective ? (s = this.eye.x >= i.min.x ? this.eye.x > i.max.x ? 2 : 1 : 0, this.eye.y >= i.min.y && (s += this.eye.y > i.max.y ? 6 : 3), this.eye.z >= i.min.z && (s += this.eye.z > i.max.z ? 18 : 9)) : (s = this.viewDir[0] <= 0 ? this.viewDir[0] < 0 ? 2 : 1 : 0, this.viewDir[1] <= 0 && (s += this.viewDir[1] < 0 ? 6 : 3), this.viewDir[2] <= 0 && (s += this.viewDir[2] < 0 ? 18 : 9)), 13 === s) return 4;
      var c, u = r[s][6];
      for (c = 0; c < u; c++) {
        var h = r[s][c];
        t[c].set((h + 1) % 4 < 2 ? i.min.x : i.max.x, h % 4 < 2 ? i.min.y : i.max.y, h < 4 ? i.min.z : i.max.z), a(t[c], l)
      }
      var d = 0;
      if (o)
        for (d = (t[u - 1].x - t[0].x) * (t[u - 1].y + t[0].y), c = 0; c < u - 1; c++) d += (t[c].x - t[c + 1].x) * (t[c].y + t[c + 1].y);
      else {
        var f = function (t, i) {
          var r, o, a, s, l, c, u, h, d = t,
            f = n,
            p = function (e) {
              switch (u) {
                case 0:
                  return e.x >= -1;
                case 1:
                  return e.x <= 1;
                case 2:
                  return e.y >= -1;
                case 3:
                  return e.y <= 1
              }
            },
            m = function (e) {
              f[h].x = e.x, f[h++].y = e.y
            },
            g = function () {
              var e, t;
              switch (u) {
                case 0:
                  e = -1, t = o.y + (a.y - o.y) * (e - o.x) / (a.x - o.x);
                  break;
                case 1:
                  e = 1, t = o.y + (a.y - o.y) * (e - o.x) / (a.x - o.x);
                  break;
                case 2:
                  t = -1, e = o.x + (a.x - o.x) * (t - o.y) / (a.y - o.y);
                  break;
                case 3:
                  t = 1, e = o.x + (a.x - o.x) * (t - o.y) / (a.y - o.y)
              }
              f[h].x = e, f[h++].y = t
            };
          for (u = 0; u < 4 && i > 2; u++) {
            for (h = 0, s = p(o = d[i - 1]), c = 0; c < i; c++) l = p(a = d[c]), s ? l ? m(a) : g() : l && (g(), m(a)), o = a, s = l;
            i = h, r = d, d = f, f = r
          }
          return e = i, d
        }(t, u);
        if (e >= 3)
          for (d = (f[e - 1].x - f[0].x) * (f[e - 1].y + f[0].y), c = 0; c < e - 1; c++) d += (f[c].x - f[c + 1].x) * (f[c].y + f[c + 1].y)
      }
      return Math.abs(.5 * d)
    }
  }(), o.prototype.estimateDepth = function (e) {
    var t = this.viewProj.elements,
      n = (e.min.x + e.max.x) / 2,
      i = (e.min.y + e.max.y) / 2,
      r = (e.min.z + e.max.z) / 2,
      o = 1 / (t[3] * n + t[7] * i + t[11] * r + t[15]);
    return (t[2] * n + t[6] * i + t[10] * r + t[14]) * o
  }, o.prototype.intersectsBox = (a = new i.Vector3, s = new i.Vector3, function (e) {
    for (var t = this.frustum.planes, n = 0, i = 0; i < 6; i++) {
      var r = t[i];
      a.x = r.normal.x > 0 ? e.min.x : e.max.x, s.x = r.normal.x > 0 ? e.max.x : e.min.x, a.y = r.normal.y > 0 ? e.min.y : e.max.y, s.y = r.normal.y > 0 ? e.max.y : e.min.y, a.z = r.normal.z > 0 ? e.min.z : e.max.z, s.z = r.normal.z > 0 ? e.max.z : e.min.z;
      var l = r.distanceToPoint(a),
        c = r.distanceToPoint(s);
      if (l < 0 && c < 0) return o.OUTSIDE;
      l > 0 && c > 0 && n++
    }
    return 6 == n ? o.CONTAINS : o.INTERSECTS
  });
  var f, p = function (e, t) {
    f || (f = new i.Vector3);
    for (var n = 0; n < 8; n++) {
      var r = d(e, n, f);
      if (a = t, !((o = r).x * a.x + o.y * a.y + o.z * a.z + a.w > 1e-6)) return !1
    }
    var o, a;
    return !0
  };
  o.prototype.boxOutsideCutPlanes = function (e) {
    if (!this.cutPlanes) return !1;
    for (var t = 0; t < this.cutPlanes.length; t++) {
      var n = this.cutPlanes[t];
      if (p(e, n)) return !0
    }
    return !1
  }
}, function (e, t, n) {
  "use strict";
  n.r(t), n.d(t, "ProgressState", (function () {
    return i
  }));
  var i = {
    ROOT_LOADED: 0,
    LOADING: 1,
    RENDERING: 2
  }
}, function (e, t) {
  e.exports = function (e) {
    if (null == e) throw TypeError("Can't call method on " + e);
    return e
  }
}, function (e, t, n) {
  var i = n(24),
    r = n(32),
    o = n(99);
  e.exports = i ? function (e, t, n) {
    return r.f(e, t, o(1, n))
  } : function (e, t, n) {
    return e[t] = n, e
  }
}, function (e, t, n) {
  var i = n(41),
    r = n(152),
    o = n(34),
    a = n(27),
    s = n(158),
    l = [].push,
    c = function (e) {
      var t = 1 == e,
        n = 2 == e,
        c = 3 == e,
        u = 4 == e,
        h = 6 == e,
        d = 5 == e || h;
      return function (f, p, m, g) {
        for (var v, y, b = o(f), _ = r(b), x = i(p, m, 3), w = a(_.length), E = 0, A = g || s, S = t ? A(f, w) : n ? A(f, 0) : void 0; w > E; E++)
          if ((d || E in _) && (y = x(v = _[E], E, b), e))
            if (t) S[E] = y;
            else if (y) switch (e) {
          case 3:
            return !0;
          case 5:
            return v;
          case 6:
            return E;
          case 2:
            l.call(S, v)
        } else if (u) return !1;
        return h ? -1 : c || u ? u : S
      }
    };
  e.exports = {
    forEach: c(0),
    map: c(1),
    filter: c(2),
    some: c(3),
    every: c(4),
    find: c(5),
    findIndex: c(6)
  }
}, function (e, t, n) {
  "use strict";
  n.r(t), n.d(t, "getVertexCount", (function () {
    return m
  })), n.d(t, "enumMeshVertices", (function () {
    return g
  })), n.d(t, "enumMeshIndices", (function () {
    return v
  })), n.d(t, "enumMeshTriangles", (function () {
    return y
  })), n.d(t, "enumMeshLines", (function () {
    return b
  })), n.d(t, "enumMeshEdges", (function () {
    return _
  })), n.d(t, "VertexEnumerator", (function () {
    return x
  }));
  var i, r, o, a, s, l, c, u, h, d, f, p = n(13);

  function m(e) {
    return e.vb ? e.vb.length / e.vbstride : e.attributes.positions ? e.attributes.positions.count : 0
  }

  function g(e, t, n) {
    var a = e.attributes;
    i || (i = new p.LmvVector3, r = new p.LmvVector3, new p.LmvVector3), n && (o || (o = new THREE.Matrix3), o.getNormalMatrix(n));
    var s, l = e.vb || a.position.array,
      c = e.vb || a.normal && a.normal.array,
      u = e.vb ? e.vbstride : 3;
    if (e.vblayout) {
      if (!e.vblayout.position) return;
      s = e.vblayout.position.offset
    } else {
      if (!a.position) return;
      s = a.position.itemOffset || 0
    }
    var h = 0,
      d = e.vblayout ? e.vblayout.normal : a.normal || null;
    d ? h = d.offset || d.itemOffset || 0 : c = null, !d || 3 === d.itemSize && 4 === d.bytesPerItem || (c = null);
    for (var f = e.vb ? e.vb.length / e.vbstride : l.length, m = s, g = h, v = 0; v < f; v++, m += u, g += u) i.set(l[m], l[m + 1], l[m + 2]), n && i.applyMatrix4(n), c && (r.set(c[g], c[g + 1], c[g + 2]), n && r.applyMatrix3(o)), t(i, c ? r : null, null, v)
  }

  function v(e, t) {
    var n = e.ib || e.indices || (attributes.index ? attributes.index.array : null);
    if (n) {
      var i = e.offsets;
      i && 0 !== i.length || (i = [{
        start: 0,
        count: n.length,
        index: 0
      }]);
      for (var r = 0, o = i.length; r < o; ++r)
        for (var a = i[r].start, s = i[r].count, l = i[r].index, c = a, u = a + s; c < u; c += 3) {
          t(l + n[c], l + n[c + 1], l + n[c + 2])
        }
    } else
      for (var h = e.vb || attributes.position.array, d = e.vb ? e.vb.length / e.vbstride : h.length / 3, f = 0; f < d; f++) {
        t(3 * f, 3 * f + 1, 3 * f + 2)
      }
  }

  function y(e, t) {
    var n, i, r, o = e.attributes;
    a || (a = new p.LmvVector3, s = new p.LmvVector3, l = new p.LmvVector3, c = new p.LmvVector3, u = new p.LmvVector3, h = new p.LmvVector3);
    var d, f = e.vb || o.position.array,
      m = e.vb || o.normal && o.normal.array,
      g = e.vb ? e.vbstride : 3;
    if (e.vblayout) {
      if (!e.vblayout.position) return;
      d = e.vblayout.position.offset
    } else {
      if (!o.position) return;
      d = o.position.itemOffset || 0
    }
    var v = 0,
      y = e.vblayout ? e.vblayout.normal : o.normal || null;
    y ? v = y.offset || y.itemOffset || 0 : m = null, !y || 3 === y.itemSize && 4 === y.bytesPerItem || (m = null);
    var b = e.ib || e.indices || (o.index ? o.index.array : null);
    if (b) {
      var _ = e.offsets;
      _ && 0 !== _.length || (_ = [{
        start: 0,
        count: b.length,
        index: 0
      }]);
      for (var x = 0, w = _.length; x < w; ++x)
        for (var E = _[x].start, A = _[x].count, S = _[x].index, M = E, T = E + A; M < T; M += 3) {
          var C = (n = S + b[M]) * g + d,
            P = (i = S + b[M + 1]) * g + d,
            L = (r = S + b[M + 2]) * g + d;
          if (a.x = f[C], a.y = f[C + 1], a.z = f[C + 2], s.x = f[P], s.y = f[P + 1], s.z = f[P + 2], l.x = f[L], l.y = f[L + 1], l.z = f[L + 2], m) {
            var D = n * g + v,
              I = i * g + v,
              R = r * g + v;
            c.x = m[D], c.y = m[D + 1], c.z = m[D + 2], u.x = m[I], u.y = m[I + 1], u.z = m[I + 2], h.x = m[R], h.y = m[R + 1], h.z = m[R + 2], t(a, s, l, n, i, r, c, u, h, M / 3)
          } else t(a, s, l, n, i, r, null, null, null, M / 3)
        }
    } else {
      var O = e.vb ? e.vb.length / e.vbstride : f.length / 3;
      for (M = 0; M < O; M++) {
        C = (n = 3 * M) * g + d, P = (i = 3 * M + 1) * g + d, L = (r = 3 * M + 2) * g + d;
        if (a.x = f[C], a.y = f[C + 1], a.z = f[C + 2], s.x = f[P], s.y = f[P + 1], s.z = f[P + 2], l.x = f[L], l.y = f[L + 1], l.z = f[L + 2], m) {
          D = n * g + v, I = i * g + v, R = r * g + v;
          c.x = m[D], c.y = m[D + 1], c.z = m[D + 2], u.x = m[I], u.y = m[I + 1], u.z = m[I + 2], h.x = m[R], h.y = m[R + 1], h.z = m[R + 2], t(a, s, l, n, i, r, c, u, h, M)
        } else t(a, s, l, n, i, r, null, null, null, M)
      }
    }
  }

  function b(e, t) {
    var n, i, r = e.attributes;
    d || (d = new p.LmvVector3, f = new p.LmvVector3);
    var o = 2;
    e.lineWidth && (o = 6);
    var a = e.ib || e.indices || (r.index ? r.index.array : null);
    if (a) {
      var s = e.vb ? e.vb : r.position.array,
        l = e.vb ? e.vbstride : 3,
        c = e.offsets;
      c && 0 !== c.length || (c = [{
        start: 0,
        count: a.length,
        index: 0
      }]);
      for (var u = 0, h = c.length; u < h; ++u)
        for (var m = c[u].start, g = c[u].count, v = c[u].index, y = m, b = m + g, _ = m / o; y < b; y += o, _++) n = v + a[y], i = v + a[y + 1], d.x = s[n * l], d.y = s[n * l + 1], d.z = s[n * l + 2], f.x = s[i * l], f.y = s[i * l + 1], f.z = s[i * l + 2], t(d, f, n, i, _)
    } else
      for (s = e.vb ? e.vb : r.position.array, l = e.vb ? e.vbstride : 3, y = 0, b = s.length / l, _ = 0; y < b; y += o, _++) n = y, i = y + 1, d.x = s[n * l], d.y = s[n * l + 1], d.z = s[n * l + 2], f.x = s[i * l], f.y = s[i * l + 1], f.z = s[i * l + 2], t(d, f, n, i, _)
  }

  function _(e, t) {
    var n, i, r = e.attributes;
    d || (d = new p.LmvVector3, f = new p.LmvVector3);
    var o = e.iblines;
    if (o) {
      var a = e.vb ? e.vb : r.position.array,
        s = e.vb ? e.vbstride : 3,
        l = e.offsets;
      l && 0 !== l.length || (l = [{
        start: 0,
        count: o.length,
        index: 0
      }]);
      for (var c = 0, u = l.length; c < u; ++c)
        for (var h = l[c].start, m = l[c].count, g = l[c].index, v = h, y = h + m; v < y; v += 2) n = g + o[v], i = g + o[v + 1], d.x = a[n * s], d.y = a[n * s + 1], d.z = a[n * s + 2], f.x = a[i * s], f.y = a[i * s + 1], f.z = a[i * s + 2], t(d, f, n, i)
    }
  }
  var x = {
    getVertexCount: m,
    enumMeshVertices: g,
    enumMeshIndices: v,
    enumMeshTriangles: y,
    enumMeshLines: b,
    enumMeshEdges: _
  }
}, function (e, t, n) {
  "use strict";
  n.d(t, "a", (function () {
    return i
  }));
  var i = {
    LINEAR: 0,
    CATMULLROM: 1,
    CATMULLROM_FORWARD: 2
  }
}, function (e, t, n) {
  var i = n(24),
    r = n(180),
    o = n(99),
    a = n(76),
    s = n(84),
    l = n(40),
    c = n(283),
    u = Object.getOwnPropertyDescriptor;
  t.f = i ? u : function (e, t) {
    if (e = a(e), t = s(t, !0), c) try {
      return u(e, t)
    } catch (e) {}
    if (l(e, t)) return o(!r.f.call(e, t), e[t])
  }
}, function (e, t, n) {
  var i = n(287),
    r = n(40),
    o = n(293),
    a = n(32).f;
  e.exports = function (e) {
    var t = i.Symbol || (i.Symbol = {});
    r(t, e) || a(t, e, {
      value: o.f(e)
    })
  }
}, function (e, t, n) {
  "use strict";
  n.r(t), n.d(t, "LmvBox3", (function () {
    return a
  }));
  var i, r, o = n(13),
    a = function (e, t) {
      this.min = void 0 !== e ? e : new o.LmvVector3(1 / 0, 1 / 0, 1 / 0), this.max = void 0 !== t ? t : new o.LmvVector3(-1 / 0, -1 / 0, -1 / 0)
    };
  a.prototype = {
    constructor: a,
    set: function (e, t) {
      return this.min.copy(e), this.max.copy(t), this
    },
    setFromPoints: function (e) {
      this.makeEmpty();
      for (var t = 0, n = e.length; t < n; t++) this.expandByPoint(e[t]);
      return this
    },
    setFromArray: function (e, t) {
      return this.min.x = e[t], this.min.y = e[t + 1], this.min.z = e[t + 2], this.max.x = e[t + 3], this.max.y = e[t + 4], this.max.z = e[t + 5], this
    },
    copyToArray: function (e, t) {
      e[t] = this.min.x, e[t + 1] = this.min.y, e[t + 2] = this.min.z, e[t + 3] = this.max.x, e[t + 4] = this.max.y, e[t + 5] = this.max.z
    },
    setFromCenterAndSize: (r = new o.LmvVector3, function (e, t) {
      var n = r.copy(t).multiplyScalar(.5);
      return this.min.copy(e).sub(n), this.max.copy(e).add(n), this
    }),
    clone: function () {
      return (new this.constructor).copy(this)
    },
    copy: function (e) {
      return this.min.copy(e.min), this.max.copy(e.max), this
    },
    makeEmpty: function () {
      return this.min.x = this.min.y = this.min.z = 1 / 0, this.max.x = this.max.y = this.max.z = -1 / 0, this
    },
    empty: function () {
      return this.max.x < this.min.x || this.max.y < this.min.y || this.max.z < this.min.z
    },
    center: function (e) {
      return (e || new o.LmvVector3).addVectors(this.min, this.max).multiplyScalar(.5)
    },
    size: function (e) {
      return (e || new o.LmvVector3).subVectors(this.max, this.min)
    },
    expandByPoint: function (e) {
      return this.min.min(e), this.max.max(e), this
    },
    expandByVector: function (e) {
      return this.min.sub(e), this.max.add(e), this
    },
    expandByScalar: function (e) {
      return this.min.addScalar(-e), this.max.addScalar(e), this
    },
    containsPoint: function (e) {
      return !(e.x < this.min.x || e.x > this.max.x || e.y < this.min.y || e.y > this.max.y || e.z < this.min.z || e.z > this.max.z)
    },
    containsBox: function (e) {
      return this.min.x <= e.min.x && e.max.x <= this.max.x && this.min.y <= e.min.y && e.max.y <= this.max.y && this.min.z <= e.min.z && e.max.z <= this.max.z
    },
    getParameter: function (e, t) {
      return (t || new o.LmvVector3).set((e.x - this.min.x) / (this.max.x - this.min.x), (e.y - this.min.y) / (this.max.y - this.min.y), (e.z - this.min.z) / (this.max.z - this.min.z))
    },
    isIntersectionBox: function (e) {
      return !(e.max.x < this.min.x || e.min.x > this.max.x || e.max.y < this.min.y || e.min.y > this.max.y || e.max.z < this.min.z || e.min.z > this.max.z)
    },
    clampPoint: function (e, t) {
      return (t || new o.LmvVector3).copy(e).clamp(this.min, this.max)
    },
    distanceToPoint: function () {
      var e = new o.LmvVector3;
      return function (t) {
        return e.copy(t).clamp(this.min, this.max).sub(t).length()
      }
    }(),
    intersect: function (e) {
      return this.min.max(e.min), this.max.min(e.max), this
    },
    union: function (e) {
      return this.min.min(e.min), this.max.max(e.max), this
    },
    applyMatrix4: (i = [new o.LmvVector3, new o.LmvVector3, new o.LmvVector3, new o.LmvVector3, new o.LmvVector3, new o.LmvVector3, new o.LmvVector3, new o.LmvVector3], function (e) {
      return i[0].set(this.min.x, this.min.y, this.min.z).applyMatrix4(e), i[1].set(this.min.x, this.min.y, this.max.z).applyMatrix4(e), i[2].set(this.min.x, this.max.y, this.min.z).applyMatrix4(e), i[3].set(this.min.x, this.max.y, this.max.z).applyMatrix4(e), i[4].set(this.max.x, this.min.y, this.min.z).applyMatrix4(e), i[5].set(this.max.x, this.min.y, this.max.z).applyMatrix4(e), i[6].set(this.max.x, this.max.y, this.min.z).applyMatrix4(e), i[7].set(this.max.x, this.max.y, this.max.z).applyMatrix4(e), this.makeEmpty(), this.setFromPoints(i), this
    }),
    translate: function (e) {
      return this.min.add(e), this.max.add(e), this
    },
    equals: function (e) {
      return e.min.equals(this.min) && e.max.equals(this.max)
    }
  }
}, function (e, t) {
  e.exports = "varying vec2 vUv;\nvoid main() {\n    vUv = uv;\n    gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}\n"
}, function (e, t, n) {
  "use strict";
  n.r(t), n.d(t, "SceneMath", (function () {
    return s
  }));
  var i = n(0),
    r = [new i.Vector3(1, 0, 0), new i.Vector3(0, 1, 0), new i.Vector3(0, 0, 1), new i.Vector3(-1, 0, 0), new i.Vector3(0, -1, 0), new i.Vector3(0, 0, -1)],
    o = new i.Plane;

  function a(e, t, n, r) {
    var o = e;
    o.z = -1;
    var a = new i.Vector3(o.x, o.y, 1);
    o = o.unproject(t), (a = a.unproject(t)).sub(o).normalize();
    var s, l = a;
    if (Math.abs(l[n]) < 1e-6) return null;
    s = t.isPerspective ? t.position : o;
    var c = ((r ? r.min[n] : 0) - s[n]) / l[n];
    return l.multiplyScalar(c), l.add(s), l
  }
  var s = {
    box2CutPlanes: function (e, t) {
      for (var n = [], a = 0; a < r.length; a++) {
        o.normal.copy(r[a]);
        var s = a < 3 ? e.max : e.min;
        o.constant = -o.normal.dot(s), t && o.applyMatrix4(t), n.push(new i.Vector4(o.normal.x, o.normal.y, o.normal.z, o.constant))
      }
      return n
    },
    getPixelsPerUnit: function (e, t, n, r, o, s) {
      var l;
      if (t) {
        var c = a(new i.Vector3(0, 0, 1), e, "z", s);
        l = r / (2 * (c ? e.position.distanceTo(c) : e.position.distanceTo(n.center())) * Math.tan(i.Math.degToRad(.5 * e.fov)))
      } else {
        var u;
        if (o) {
          var h = o,
            d = e.target.clone().sub(e.position).normalize(),
            f = d.dot(h);
          if (0 === f) u = n.center();
          else {
            var p = -(e.position.clone().dot(h) + h.w) / f;
            u = n.clampPoint(d.multiplyScalar(p).add(e.position))
          }
        } else u = n.center();
        l = r / (2 * e.position.distanceTo(u) * Math.tan(i.Math.degToRad(.5 * e.fov)))
      }
      return l
    },
    intersectGroundViewport: a,
    getNormalizingMatrix: function (e, t) {
      t = t || e.getData().bbox;
      var n = new i.Matrix4;
      n.makeTranslation(-t.min.x, -t.min.y, -t.min.z);
      var r = new i.Vector3(0, 0, 0).subVectors(t.max, t.min),
        o = new i.Matrix4;
      o.makeScale(1 / r.x, 1 / r.y, 1);
      var a = new i.Matrix4;
      return a.multiplyMatrices(o, n), a
    }
  }
}, function (e, t, n) {
  "use strict";
  n.r(t),
    function (e) {
      n.d(t, "theExtensionManager", (function () {
        return l
      })), n.d(t, "ExtensionMixin", (function () {
        return c
      }));
      var i = n(1),
        r = n(141),
        o = n(2);

      function a(e, t) {
        return function (e) {
          if (Array.isArray(e)) return e
        }(e) || function (e, t) {
          if (!(Symbol.iterator in Object(e) || "[object Arguments]" === Object.prototype.toString.call(e))) return;
          var n = [],
            i = !0,
            r = !1,
            o = void 0;
          try {
            for (var a, s = e[Symbol.iterator](); !(i = (a = s.next()).done) && (n.push(a.value), !t || n.length !== t); i = !0);
          } catch (e) {
            r = !0, o = e
          } finally {
            try {
              i || null == s.return || s.return()
            } finally {
              if (r) throw o
            }
          }
          return n
        }(e, t) || function () {
          throw new TypeError("Invalid attempt to destructure non-iterable instance")
        }()
      }

      function s(e, t) {
        for (var n = 0; n < t.length; n++) {
          var i = t[n];
          i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(e, i.key, i)
        }
      }
      var l = new(function () {
          function e() {
            ! function (e, t) {
              if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
            }(this, e), this.registeredExtensions = new Map
          }
          var t, n, i;
          return t = e, (n = [{
            key: "registerExtension",
            value: function (e, t) {
              if (this.registeredExtensions.has(e)) {
                var n = this.registeredExtensions.get(e);
                if (n.EXTENSION_CLASS) return !1;
                n.EXTENSION_CLASS = t
              } else this.registeredExtensions.set(e, {
                EXTENSION_CLASS: t
              });
              return !0
            }
          }, {
            key: "getExtensionClass",
            value: function (e) {
              return this.registeredExtensions.has(e) ? this.registeredExtensions.get(e).EXTENSION_CLASS : null
            }
          }, {
            key: "unregisterExtension",
            value: function (e) {
              return !!this.registeredExtensions.has(e) && (this.registeredExtensions.delete(e), !0)
            }
          }, {
            key: "registerExternalExtension",
            value: function (e, t) {
              return !this.registeredExtensions.has(e) && (this.registeredExtensions.set(e, {
                EXTENSION_CLASS: null,
                externalPath: t
              }), !0)
            }
          }, {
            key: "getExternalPath",
            value: function (e) {
              return this.registeredExtensions.has(e) ? this.registeredExtensions.get(e).externalPath : null
            }
          }, {
            key: "getRegisteredExtensions",
            value: function () {
              return Array.from(this.registeredExtensions).map((function (e) {
                var t = a(e, 2),
                  n = t[0],
                  i = t[1];
                return {
                  id: n,
                  inMemory: !!i.EXTENSION_CLASS,
                  isAsync: !!i.externalPath
                }
              }))
            }
          }, {
            key: "downloadExtension",
            value: function (e) {
              if (!this.registeredExtensions.has(e)) return Promise.reject("Extension not found: " + e + ". Has it been registered(1)?");
              var t = this.registeredExtensions.get(e);
              return t.externalPath ? (t.downloadPromise || (t.downloadPromise = r.theResourceLoader.loadScript(t.externalPath, e).then((function () {
                if (delete t.downloadPromise, !t.EXTENSION_CLASS) throw new Error("Extension not found: " + e + ". Has it been registered(3)?");
                return t.EXTENSION_CLASS
              }))), t.downloadPromise) : Promise.reject("Extension not found: " + e + ". Has it been registered(2)?")
            }
          }, {
            key: "popuplateOptions",
            value: function (e) {
              this.registeredExtensions.forEach((function (t) {
                t.EXTENSION_CLASS.populateDefaultOptions(e)
              }))
            }
          }, {
            key: "isDownloading",
            value: function (e) {
              return !!this.registeredExtensions.has(e) && !!this.registeredExtensions.get(e).downloadPromise
            }
          }, {
            key: "isAvailable",
            value: function (e) {
              return !!this.getExtensionClass(e)
            }
          }]) && s(t.prototype, n), i && s(t, i), e
        }()),
        c = function () {};
      c.prototype = {
        loadExtension: function (e, t) {
          var n = this;
          return this.loadedExtensions = this.loadedExtensions || {}, l.isAvailable(e) ? this.loadExtensionLocal(e, t) : (this.loadExtensionPromises = this.loadExtensionPromises || {}, e in this.loadExtensionPromises || (this.loadExtensionPromises[e] = l.downloadExtension(e).then((function () {
            if (delete n.loadExtensionPromises[e], n.loadedExtensions) {
              if (n.cancelledExtensions && e in n.cancelledExtensions) throw delete n.cancelledExtensions[e], new Error("Abort loadExtension('".concat(e, "') - extension has been unloaded"));
              return n.loadExtensionLocal(e, t)
            }
            i.logger.info("Abort loadExtension('".concat(e, "') - teardown in progress"))
          }))), this.loadExtensionPromises[e])
        },
        getExtension: function (e, t) {
          var n = this.loadedExtensions && e in this.loadedExtensions ? this.loadedExtensions[e] : null;
          return n && t && t(n), n
        },
        unloadExtension: function (e) {
          if (this.cancelledExtensions = this.cancelledExtensions || {}, l.isDownloading(e)) return this.cancelledExtensions[e] = !0, !1;
          var t = !1,
            n = this.getExtension(e);
          return n ? (t = n.unload(), i.logger.info("Extension unloaded: " + e), delete this.loadedExtensions[e], this.dispatchEvent({
            type: o.EXTENSION_UNLOADED_EVENT,
            extensionId: e
          })) : i.logger.warn("Extension not found: " + e), t
        },
        loadExtensionLocal: function (t, n) {
          var r = this,
            a = l.getExtensionClass(t);
          if (!a) return Promise.reject("Extension not found : " + t);
          var s = this.getExtension(t);
          if (s) return Promise.resolve(s);
          if (this.loadingExtensions && t in this.loadingExtensions) return Promise.resolve(this.loadingExtensions[t]);
          (s = new a(this, n)).id = t;
          var c = s.load();
          if (!c) return Promise.reject("Extension failed to .load() : " + t);
          var u = function () {
            r.loadedExtensions[t] = s, r.onPostExtensionLoad(s), i.logger.info("Extension loaded: " + t), e((function () {
              r.getExtension(t) && r.dispatchEvent({
                type: o.EXTENSION_LOADED_EVENT,
                extensionId: t
              })
            }))
          };
          return c instanceof Promise ? (this.loadingExtensions = this.loadingExtensions || {}, this.loadingExtensions[t] = s, c.then((function () {
            return u(), s
          })).finally((function () {
            delete r.loadingExtensions[t]
          }))) : (u(), Promise.resolve(s))
        },
        onPostExtensionLoad: function (e) {},
        forEachExtension: function (e) {
          var t = this.loadedExtensions || {};
          for (var n in t) t.hasOwnProperty(n) && e(t[n])
        },
        apply: function (e) {
          var t = c.prototype;
          e.loadExtension = t.loadExtension, e.getExtension = t.getExtension, e.unloadExtension = t.unloadExtension, e.loadExtensionLocal = t.loadExtensionLocal, e.forEachExtension = t.forEachExtension, e.onPostExtensionLoad = t.onPostExtensionLoad
        }
      }
    }.call(this, n(337).setImmediate)
}, function (e, t, n) {
  "use strict";
  n.r(t), n.d(t, "BubbleNode", (function () {
    return r
  }));
  var i = 1;
  var r = function e(t, n) {
    if (this.parent = n, this.id = i++, this.data = t, this.isLeaf = "geometry" === t.type && ("3d" === t.role || "2d" === t.role || "lod" === t.role), Array.isArray(t.children) || Array.isArray(t.derivatives)) {
      this.children = [];
      for (var r = t.children || t.derivatives, o = r.length, a = 0; a < o; a++) this.children[a] = new e(r[a], this);
      this.children.length > 1 && this.children.sort((function (e, t) {
        return e.data.hasOwnProperty("order") && t.data.hasOwnProperty("order") ? e.data.order - t.data.order : 0
      }));
      for (a = 0; a < o; a++) {
        var s = "application/autodesk-db" == (l = r[a]).mime && l.urn ? 0 === l.urn.indexOf("urn:adsk.objects:os.object") ? l.urn.substr(0, l.urn.lastIndexOf("%2F") + 3) : l.urn.substr(0, l.urn.lastIndexOf("/") + 1) : null;
        s && (this.sharedPropertyDbPath = s), "lod" === r[a].role && (this.lodNode = this.children[a])
      }
    }
    var l
  };
  r.prototype.constructor = r, r.prototype.setDocument = function (e) {
    this.lmvDocument = e
  }, r.prototype.getDocument = function () {
    for (var e = this; e.parent;) e = e.parent;
    return e.lmvDocument
  }, r.prototype.isOtg = function () {
    return !!this._getOtgManifest()
  }, r.prototype._getOtgManifest = function () {
    if ("undefined" != typeof DISABLE_OTG && DISABLE_OTG) return null;
    var e = this.findViewableParent();
    return e ? e.data.otg_manifest : null
  }, r.prototype.getOtgGraphicsNode = function () {
    if (this.isViewPreset()) return this.findParentGeom2Dor3D().getOtgGraphicsNode();
    var e = this._getOtgManifest();
    return e && e.views && e.views[this.guid()]
  }, r.prototype.getPropertyDbManifest = function () {
    var e, t = this._getOtgManifest();
    if (t && t.pdb_manifest) {
      var n = t.pdb_manifest;
      e = {
        propertydb: {},
        isOtg: !0
      };
      for (var i = 0; i < n.assets.length; i++) {
        var r = n.assets[i];
        o = r.isShared ? t.paths.shared_root + n.pdb_shared_rel_path : t.paths.version_root + n.pdb_version_rel_path, e.propertydb[r.tag] = [{
          path: o + r.uri,
          isShared: r.isShared
        }]
      }
      this.getOtgGraphicsNode() || (e.needsDbIdRemap = !0)
    } else {
      var o;
      null === (o = this.findPropertyDbPath()) && (console.warn("Missing property database entry in manifest."), o = ""), 0 === o.indexOf("$file$") && (console.warn("Bubble local path given for shared property DB files. Assuming that sharedPropertyDbPath is specified correctly by loadDocumentNode()."), o = ""), e = {
        propertydb: {
          attrs: [{
            path: o + "objects_attrs.json.gz"
          }],
          values: [{
            path: o + "objects_vals.json.gz"
          }],
          avs: [{
            path: o + "objects_avs.json.gz"
          }],
          offsets: [{
            path: o + "objects_offs.json.gz"
          }],
          ids: [{
            path: o + "objects_ids.json.gz"
          }]
        }
      }
    }
    return e
  }, r.prototype.getRootNode = function () {
    return this.parent ? this.parent.getRootNode() : this
  }, r.prototype.isForgeManifest = function () {
    return "manifest" === this.getRootNode().data.type
  }, r.prototype.findPropertyDbPath = function () {
    var e = this._getOtgManifest(),
      t = e && e.pdb_manifest;
    return t && t.assets && t.assets.length ? e.paths.version_root + e.pdb_manifest.pdb_version_rel_path : (e && console.warn("Unexpected: OTG manifest exists, but it has no property database manifest."), this.sharedPropertyDbPath ? this.sharedPropertyDbPath : this.parent ? this.parent.findPropertyDbPath() : null)
  }, r.prototype._raw = function () {
    return this.data
  }, r.prototype.name = function () {
    return this.data.name || ""
  }, r.prototype.guid = function () {
    return this.data.guid
  }, r.prototype.type = function () {
    return this.data.type
  }, r.prototype.extensions = function () {
    if (this.data.extensions) return Array.isArray(this.data.extensions) ? this.data.extensions : [this.data.extensions]
  }, r.prototype.urn = function (e) {
    var t = this.data.urn;
    if (!e) return t;
    for (var n = this.parent; !t && n;) t = n.data.urn, n = n.parent;
    return t
  }, r.prototype.isGeomLeaf = function () {
    return this.isLeaf
  }, r.prototype.isViewable = function () {
    return "viewable" === this.data.role || "svf" === this.data.outputType
  }, r.prototype.getLodNode = function () {
    return this.lodNode
  }, r.prototype.isGeometry = function () {
    return "geometry" === this.data.type
  }, r.prototype.isViewPreset = function () {
    return "view" === this.data.type
  }, r.prototype.is2D = function () {
    return "2d" === this.data.role
  }, r.prototype.is3D = function () {
    return "3d" === this.data.role
  }, r.prototype.is2DGeom = function () {
    return this.isGeometry() && this.is2D()
  }, r.prototype.is3DGeom = function () {
    return this.isGeometry() && this.is3D()
  }, r.prototype.useAsDefault = function () {
    return !0 === this.data.useAsDefault
  }, r.prototype.getDefaultGeometry = function () {
    for (var e = this.search({
        type: "geometry"
      }), t = 0; t < e.length; ++t)
      if (e[t].useAsDefault()) return e[t];
    return e[0]
  }, r.prototype.getPlacementTransform = function () {
    return console.warn("BubbleNode.getPlacementTransform is deprecated. Sheet placement information is stored in AECModelData.json"), null
  }, r.prototype.getHash = function () {
    return console.warn("BubbleNode.getHash is deprecated and will be removed in a future release."), null
  }, r.prototype.getViewBox = function () {
    return this.data.viewbox
  }, r.prototype.isMetadata = function () {
    if (this.data.role) {
      if (-1 !== this.data.role.indexOf("Autodesk.CloudPlatform.DesignDescription")) return !0;
      if ("Autodesk.CloudPlatform.PropertyDatabase" === this.data.role) return !0
    }
    return !1
  }, r.prototype.findViewableParent = function () {
    for (var e = null, t = this; t;) t.isViewable() && (e = t), t = t.parent;
    if (!e && !this.parent && this.children)
      for (var n = 0; n < this.children.length; n++) {
        var i = this.children[n];
        if (i.isViewable()) {
          e = i;
          break
        }
      }
    return e
  }, r.prototype.findParentGeom2Dor3D = function (e) {
    for (var t = this; t && !t.is2DGeom() && !t.is3DGeom();) t = t.parent;
    !t && this.isViewPreset() && (t = this.findGeometryFromSiblings()[0], e && e.fallbackParent && (t = e.fallbackParent));
    return t
  }, r.prototype.findGeometryFromSiblings = function () {
    var e = this.parent;
    if (!e) return [];
    for (var t = [], n = 0, i = e.children.length; n < i; ++n) {
      var r, o = e.children[n];
      if (o !== this) o.traverse((function (e) {
        if (e.isGeometry() && (e.is2D() || e.is3D())) return r = e, !0
      })), r && t.push(r)
    }
    return t
  }, r.prototype.findAllViewables = function () {
    var e = [];
    this.isForgeManifest() && (e = this.search({
      outputType: "svf"
    }));
    var t = this.search({
      role: "viewable"
    });
    return e.concat(t)
  }, r.prototype.getViewableRootPath = function (e) {
    var t = this.getOtgGraphicsNode();
    if (t && !t.error) return this._getOtgManifest().paths.version_root + t.urn;
    if (!this.isGeomLeaf()) return this.urn();
    if (!e && this.is2D()) {
      var n = this.search({
        role: "leaflet"
      });
      if (n && n.length) return n[0].urn()
    }
    var i = this.is2D() ? "application/autodesk-f2d" : "application/autodesk-svf",
      r = this.search({
        mime: i
      });
    return r && r.length ? r[0].urn() : null
  }, r.prototype.getNamedViews = function () {
    var e = this.search({
      type: "view"
    });
    return e = e.filter((function (e) {
      return !!e.data.name && !!Array.isArray(e.data.camera)
    }))
  }, r.prototype.findByGuid = function (e) {
    var t = null;
    return this.traverse((function (n) {
      if (n.data.guid === e) return t = n, !0
    })), t
  }, r.prototype.search = function (e) {
    var t = [];
    return this.traverse((function (n) {
      var i = !0;
      for (var r in e)
        if (!n.data.hasOwnProperty(r) || n.data[r] !== e[r]) {
          i = !1;
          break
        } i && t.push(n)
    })), t
  }, r.prototype.traverse = function (e) {
    if (e(this)) return !0;
    if (this.children)
      for (var t = 0; t < this.children.length; t++)
        if (this.children[t].traverse(e)) return !0;
    return !1
  }, r.prototype.getShallowCopySource = function (e) {
    if (!this.isViewable()) return console.error("getShallowCopySource must be called with a viewable node."), null;
    e || (e = this.parent.urn());
    var t = this.urn();
    return t !== e && (t ? (console.log("Redirecting shallow copied URN ".concat(e, " to ").concat(t)), e = t) : console.warn("Unexpected: manifest viewable node does not have a urn property.\n".concat(JSON.stringify(this._raw())))), e
  }, r.prototype.getAecModelData = function () {
    var e = this.findViewableParent();
    return e ? (e.data.aec_model_data || console.warn("Use Document.getAecModelData(bubbleNode) instead of BubbleNode.getAecModelData(), or make sure Document.downloadAecModelData is loaded before using this API"), e.data.aec_model_data) : null
  }, r.prototype.extractRefPointTransform = function () {
    var e = this.getAecModelData();
    return e && e.refPointTransformation && r.readMatrixFromArray12(e.refPointTransformation)
  }, r.prototype.extractCamera = function () {
    if (this.data.camera) return r.readCameraFromArray(this.data.camera);
    var e = this.isGeometry() && this.search({
      type: "view"
    })[0];
    return e ? e.extractCamera() : null
  }, r.prototype.getLevel = function () {
    var e = this.data.levelNumber;
    return Array.isArray(e) ? e[0] : e
  }, r.prototype.getLevelName = function () {
    return this.data.levelName || this.getLevel()
  }, r.prototype.isSheet = function () {
    for (var e = this.parent; e;) {
      if ("Sheets" === e.name()) return !0;
      e = e.parent
    }
    return !1
  }, r.prototype.isMasterView = function () {
    for (var e = r.MASTER_VIEW_NODE.name, t = this; t;) {
      if (t.name() === e) return !0;
      t = t.parent
    }
    return !1
  }, r.prototype.getModelKey = function () {
    var e = "".concat(this.getViewableRootPath()).concat(this.originModel).concat(this.guid());
    return decodeURIComponent(e)
  }, r.readCameraFromArray = function (e, t) {
    if (!Array.isArray(e)) return null;
    if (t && !t.elements) {
      var n = new THREE.Matrix4;
      n.setPosition(t), t = n
    }
    var i = {
      position: new THREE.Vector3(e[0], e[1], e[2]),
      target: new THREE.Vector3(e[3], e[4], e[5]),
      up: new THREE.Vector3(e[6], e[7], e[8]),
      aspect: e[9],
      fov: THREE.Math.radToDeg(e[10]),
      orthoScale: e[11],
      isPerspective: !e[12]
    };
    return t && (i.position.applyMatrix4(t), i.target.applyMatrix4(t), i.up.transformDirection(t)), 0 === e[10] && 1 === e[11] && 1 === e[12] && (i.orthoScale = i.position.distanceTo(i.target)), i
  }, r.readMatrixFromArray12 = function (e) {
    return (new THREE.Matrix4).fromArray([e[0], e[1], e[2], 0, e[3], e[4], e[5], 0, e[6], e[7], e[8], 0, e[9], e[10], e[11], 1])
  }, r.MODEL_NODE = {
    role: "3d",
    type: "geometry"
  }, r.GEOMETRY_SVF_NODE = {
    role: "graphics",
    mime: "application/autodesk-svf"
  }, r.SHEET_NODE = {
    role: "2d",
    type: "geometry"
  }, r.LEAFLET_NODE = {
    role: "leaflet"
  }, r.PDF_PAGE_NODE = {
    role: "pdf-page"
  }, r.IMAGE_NODE = {
    role: "image"
  }, r.GEOMETRY_F2D_NODE = {
    role: "graphics",
    mime: "application/autodesk-f2d"
  }, r.VIEWABLE_NODE = {
    role: "viewable"
  }, r.AEC_MODEL_DATA = {
    role: "Autodesk.AEC.ModelData"
  }, r.MASTER_VIEW_NODE = {
    name: "08f99ae5-b8be-4f8d-881b-128675723c10"
  }
}, function (e, t, n) {
  "use strict";
  n.r(t), n.d(t, "TOOLBAR_CREATED_EVENT", (function () {
    return i
  })), n.d(t, "VIEW_CUBE_CREATED_EVENT", (function () {
    return r
  })), n.d(t, "TOOLBAR", (function () {
    return o
  }));
  var i = "toolbarCreated",
    r = "viewCubeCreated",
    o = {
      NAVTOOLSID: "navTools",
      MODELTOOLSID: "modelTools",
      SETTINGSTOOLSID: "settingsTools",
      MEASURETOOLSID: "measureTools"
    }
}, function (e, t, n) {
  var i = n(17),
    r = n(56),
    o = n(40),
    a = n(209),
    s = n(210),
    l = n(51),
    c = l.get,
    u = l.enforce,
    h = String(String).split("String");
  (e.exports = function (e, t, n, s) {
    var l = !!s && !!s.unsafe,
      c = !!s && !!s.enumerable,
      d = !!s && !!s.noTargetGet;
    "function" == typeof n && ("string" != typeof t || o(n, "name") || r(n, "name", t), u(n).source = h.join("string" == typeof t ? t : "")), e !== i ? (l ? !d && e[t] && (c = !0) : delete e[t], c ? e[t] = n : r(e, t, n)) : c ? e[t] = n : a(t, n)
  })(Function.prototype, "toString", (function () {
    return "function" == typeof this && c(this).source || s(this)
  }))
}, function (e, t, n) {
  var i = n(40),
    r = n(34),
    o = n(181),
    a = n(221),
    s = o("IE_PROTO"),
    l = Object.prototype;
  e.exports = a ? Object.getPrototypeOf : function (e) {
    return e = r(e), i(e, s) ? e[s] : "function" == typeof e.constructor && e instanceof e.constructor ? e.constructor.prototype : e instanceof Object ? l : null
  }
}, function (e, t, n) {
  "use strict";
  n.r(t), n.d(t, "ShadowMapShader", (function () {
    return b
  })), n.d(t, "GroundShadowShader", (function () {
    return _
  })), n.d(t, "ShadowMapOverrideMaterials", (function () {
    return x
  })), n.d(t, "ShadowConfig", (function () {
    return w
  })), n.d(t, "SHADOWMAP_NEEDS_UPDATE", (function () {
    return E
  })), n.d(t, "SHADOWMAP_INCOMPLETE", (function () {
    return A
  })), n.d(t, "SHADOWMAP_VALID", (function () {
    return S
  })), n.d(t, "ShadowMaps", (function () {
    return C
  })), n.d(t, "ShadowRender", (function () {
    return P
  }));
  var i = n(30),
    r = n(36),
    o = n(239),
    a = n(128),
    s = n(143),
    l = n(201),
    c = n(28),
    u = n(0),
    h = n(385),
    d = n.n(h),
    f = n(386),
    p = n.n(f),
    m = n(387),
    g = n.n(m),
    v = n(388),
    y = n.n(v),
    b = {
      uniforms: u.UniformsUtils.merge([i.ShaderChunks.ShadowMapCommonUniforms, {
        shadowMapRangeMin: {
          type: "f",
          value: 0
        },
        shadowMapRangeSize: {
          type: "f",
          value: 0
        },
        shadowMinOpacity: {
          type: "f",
          value: 0
        },
        map: {
          type: "t",
          value: null
        },
        alphaMap: {
          type: "t",
          value: null
        },
        texMatrix: {
          type: "m3",
          value: new u.Matrix3
        },
        texMatrixAlpha: {
          type: "m3",
          value: new u.Matrix3
        }
      }, Object(o.GetPrismMapUniforms)("surface_cutout_map")]),
      vertexShader: d.a,
      fragmentShader: p.a
    },
    _ = {
      uniforms: i.ShaderChunks.ShadowMapUniforms,
      vertexShader: g.a,
      fragmentShader: y.a
    };

  function x() {
    var e = [],
      t = Object(r.createShaderMaterial)(b),
      n = new u.Material;
    n.visible = !1;
    var i = [];
    var o = new function () {
      this.init = function () {
        this.isPrism = !1, this.alphaMap = !1, this.alphaClampS = !1, this.alphaClampT = !1, this.alphaInvert = !1, this.rgbaMap = !1, this.rgbaClampS = !1, this.rgbaClampT = !1, this.rgbaInvert = !1, this.instanced = !1, this.decalIndex = -1
      }, this.init(), this.getMaterialIndex = function () {
        return (this.isPrism ? 1 : 0) | (this.alphaMap ? 2 : 0) | (this.alphaClampS ? 4 : 0) | (this.alphaClampT ? 8 : 0) | (this.alphaInvert ? 16 : 0) | (this.rgbaMap ? 32 : 0) | (this.rgbaClampS ? 64 : 0) | (this.rgbaClampT ? 128 : 0) | (this.rgbaInvert ? 256 : 0) | (this.instanced ? 512 : 0) | 1024 * (this.decalIndex + 1)
      }
    };

    function s(i, s) {
      if ((l = i) instanceof u.MeshPhongMaterial ? l.opacity < w.ShadowMinOpacity : l.isPrismMaterial ? "PrismTransparent" === l.prismType || "PrismGlazing" === l.prismType : !l.visible) return n;
      var l, c = i instanceof u.MeshPhongMaterial,
        h = i.isPrismMaterial;
      if (!c && !h) return null;
      var d = c ? i.alphaMap : i.surface_cutout_map,
        f = c && i.alphaTest ? i.map : null;
      if (!d && !f && !i.useInstancing) return null;
      var p = o;
      p.init(), p.isPrism = h, p.alphaMap = !!d, p.rgbaMap = !!f, p.instanced = i.useInstancing, p.decalIndex = void 0 === s ? -1 : s, d && (p.alphaClampS = d.clampS, p.alphaClampT = d.clampT, p.alphaInvert = d.invert), f && (p.rgbaClampS = f.clampS, p.rgbaClampT = f.clampT, p.rgbaInvert = f.invert);
      var m = function (n, i) {
        var o = n.getMaterialIndex();
        if (!e[o]) {
          var s = t.clone();
          n.isPrism && n.alphaMap && (Object(r.setMacro)(s, "USE_SURFACE_CUTOUT_MAP"), s.fragmentShader = Object(a.GetPrismMapChunk)("surface_cutout", n.alphaClampS, n.alphaClampT) + "\n" + s.fragmentShader), n.instanced && (s.useInstancing = !0), e[o] = s
        }
        return e[o]
      }(p);
      return d && (c ? (m.uniforms.alphaMap.value = d, m.uniforms.texMatrixAlpha.value = d.matrix, m.alphaMap = d, m.side = i.side) : (m.uniforms.surface_cutout_map.value = d, m.uniforms.surface_cutout_map_texMatrix.value.copy(d.matrix), m.uniforms.surface_cutout_map_invert.value = d.invert, m.side = u.DoubleSide)), f && (m.uniforms.map.value = f, m.uniforms.texMatrix.value = f.matrix, m.map = f), m
    }
    this.forEachMaterial = function (n) {
      for (var i = 0; i < e.length; i++) {
        var r = e[i];
        r && n(r)
      }
      n(t)
    }, this.getCustomOverrideMaterial = function (e) {
      var t = s(e);
      if (!t) return null;
      if (!e.decals) return t.decals = null, t;
      if (e.decals) {
        i.length = 0;
        for (var n = 0; n < e.decals.length; n++) {
          var r = e.decals[n],
            o = s(r.material, n);
          if (!o) return null;
          i.push({
            uv: r.uv,
            material: o
          })
        }
      }
      return t.decals = i, t
    }, this.dispose = function () {
      this.forEachMaterial((function (e) {
        e.dispose()
      }))
    }
  }
  var w = {
      ShadowMapSize: 1024,
      ShadowESMConstant: 80,
      ShadowBias: .001,
      ShadowDarkness: .7,
      ShadowMapBlurRadius: 4,
      ShadowMinOpacity: .9,
      UseHardShadows: !1,
      BlurShadowMap: !0
    },
    E = 0,
    A = 1,
    S = 2;

  function M() {
    this.shadowMap = void 0, this.shadowMapSize = void 0, this.shadowMatrix = void 0, this.shadowLightDir = void 0, this.init = function (e) {
      this.shadowMap = e, this.shadowMapSize = new u.Vector2(e.width, e.height), this.shadowMatrix = new u.Matrix4, this.shadowLightDir = new u.Vector3
    }, this.apply = function (e) {
      e.shadowMap = this.shadowMap, e.shadowMatrix = this.shadowMatrix, e.shadowLightDir = this.shadowLightDir, this.shadowMap ? (Object(r.setMacro)(e, "USE_SHADOWMAP"), w.UseHardShadows && Object(r.setMacro)(e, "USE_HARD_SHADOWS")) : (Object(r.removeMacro)(e, "USE_SHADOWMAP"), Object(r.removeMacro)(e, "USE_HARD_SHADOWS"))
    }
  }
  var T = new M;

  function C(e) {
    var t = null,
      n = null,
      i = new u.OrthographicCamera,
      o = Math.exp(w.ShadowESMConstant),
      a = w.UseHardShadows ? new u.Color(1, 1, 1) : new u.Color(o, 1, 1),
      h = e,
      d = null,
      f = null,
      p = null,
      m = Object(r.createShaderMaterial)(b),
      g = new x;
    m.getCustomOverrideMaterial = g.getCustomOverrideMaterial;
    var v = null;

    function y(e, t) {
      e.forEach((function (e) {
        t.apply(e)
      }))
    }

    function C(e) {
      var t = new u.WebGLRenderTarget(e, e, {
        minFilter: u.LinearFilter,
        magFilter: u.LinearFilter,
        format: u.RGBAFormat,
        type: u.FloatType,
        stencilBuffer: !1,
        generateMipmaps: !1
      });
      return t.generateMipmaps = !1, t
    }

    function P(e) {
      h.setRenderTarget(e), h.setClearColor(a, 1), h.clear()
    }
    var L, D, I, R, O, k, N, F, U, V, B, z = (L = new u.Matrix4, D = new u.Matrix4, I = new u.Vector3(0, 0, 0), R = new u.Box3, O = new u.Vector3, k = new u.Vector3, function (e, t, n) {
      e.position.copy(n), e.lookAt(I), L.makeRotationFromQuaternion(e.quaternion), D.getInverse(L), R.copy(t).applyMatrix4(D), k = R.center(k), O.set(k.x, k.y, R.max.z), O.applyMatrix4(L), e.position.copy(O), k = R.size(k), e.left = -.5 * k.x, e.right = .5 * k.x, e.bottom = -.5 * k.y, e.top = .5 * k.y, e.near = 0, e.far = k.z, e.updateMatrixWorld(), e.matrixWorldInverse.getInverse(e.matrixWorld), e.updateProjectionMatrix()
    });

    function G(e) {
      e.uniforms.shadowMapRangeMin.value = i.near, e.uniforms.shadowMapRangeSize.value = i.far - i.near, e.uniforms.shadowESMConstant.value = w.ShadowESMConstant, e.uniforms.shadowMinOpacity.value = w.ShadowMinOpacity
    }
    this.init = function () {
      (t = new M).init(C(w.ShadowMapSize)), n = w.BlurShadowMap ? new l.a(w.ShadowMapSize, w.ShadowMapSize, w.ShadowMapBlurRadius, 1, {
        type: t.shadowMap.type,
        format: t.shadowMap.format
      }) : void 0, (d = Object(r.createShaderMaterial)(_)).depthWrite = !1, d.transparent = !0, f = Object(s.createGroundShape)(d), (p = new u.Scene).add(f), this.groundShapeBox = new u.Box3, P(v = C(1))
    }, this.init(), this.state = E, this.startUpdate = function (e, t, n, r, o) {
      var a = e.getVisibleBounds(!0);
      return this.beginShadowMapUpdate(n, a, r), e.reset(i, c.RenderFlags.RENDER_SHADOWMAP, !0), this.state = A, t = this.continueUpdate(e, t, o)
    }, this.continueUpdate = function (e, n, i) {
      return n = e.renderSome(this.renderSceneIntoShadowMap, n), e.isDone() ? (this.state = S, this.finishShadowMapUpdate(i)) : function (e) {
        var n = t.shadowMap;
        t.shadowMap = v, y(e, t), t.apply(d), t.shadowMap = n
      }(i), n
    }, this.beginShadowMapUpdate = function (e, n, o) {
      z(i, n, o), G(m), g.forEachMaterial(G), w.UseHardShadows && (Object(r.setMacro)(m, "USE_HARD_SHADOWS"), g.forEachMaterial((function (e) {
        Object(r.setMacro)(e, "USE_HARD_SHADOWS")
      }))), P(t.shadowMap), this.renderSceneIntoShadowMap(p)
    }, this.renderSceneIntoShadowMap = function (e) {
      e.overrideMaterial = m, h.render(e, i, t.shadowMap), e.overrideMaterial = null
    }, this.finishShadowMapUpdate = function (e) {
      n && !w.UseHardShadows && n.render(h, t.shadowMap, t.shadowMap), t.shadowMatrix.multiplyMatrices(i.projectionMatrix, i.matrixWorldInverse), t.shadowMapRangeMin = i.near, t.shadowMapRangeSize = i.far - i.near, t.shadowLightDir.copy(i.position).normalize(), y(e, t), t.apply(d), this.isValid = !0
    }, this.cleanup = function (e) {
      n && n.cleanup(), t.shadowMap && t.shadowMap.dispose(), y(e, T), m.dispose(), g.dispose(), d.dispose(), f.geometry.dispose()
    }, this.setGroundShadowTransform = function (e, t, n, i) {
      Object(s.setGroundShapeTransform)(f, e, t, n, i), this.groundShapeBox.setFromObject(f)
    }, this.renderGroundShadow = function (e, t) {
      h.render(p, e, t, !1)
    }, this.expandByGroundShadow = (N = new u.Plane, F = new u.Ray, U = new u.Vector3, V = new u.Vector3, B = new u.Box3, function (e, t) {
      N.normal.set(0, 1, 0), N.constant = -e.min.y, F.direction.copy(t).negate().normalize();
      var n, i, r, o = e.center(U),
        a = 100 * o.distanceToSquared(e.min) * 100;
      B.makeEmpty();
      for (var s = 0; s < 8; s++) {
        F.origin = (n = e, i = s, r = void 0, (r = new u.Vector3).x = 1 & i ? n.max.x : n.min.x, r.y = 2 & i ? n.max.y : n.min.y, r.z = 4 & i ? n.max.z : n.min.z, r);
        var l = F.intersectPlane(N, V);
        l && (l.distanceToSquared(o) >= a || B.expandByPoint(l))
      }
      e.union(B)
    }), this.getShadowParams = function () {
      return t
    }, this.getShadowCamera = function () {
      return i
    }
  }
  var P = function () {};
  P.RefreshUniformsShadow = function (e, t) {
    e.shadowMap && (e.shadowMap.value = t.shadowMap), e.shadowMatrix && (e.shadowMatrix.value = t.shadowMatrix), e.shadowLightDir && (e.shadowLightDir.value = t.shadowLightDir), e.shadowESMConstant && (e.shadowESMConstant.value = w.ShadowESMConstant), e.shadowBias && (e.shadowBias.value = w.ShadowBias), e.shadowMapSize && (e.shadowMapSize.value = w.ShadowMapSize), e.shadowDarkness && (e.shadowDarkness.value = w.ShadowDarkness)
  }
}, function (e, t, n) {
  var i = n(24),
    r = n(14),
    o = n(40),
    a = Object.defineProperty,
    s = {},
    l = function (e) {
      throw e
    };
  e.exports = function (e, t) {
    if (o(s, e)) return s[e];
    t || (t = {});
    var n = [][e],
      c = !!o(t, "ACCESSORS") && t.ACCESSORS,
      u = o(t, 0) ? t[0] : l,
      h = o(t, 1) ? t[1] : void 0;
    return s[e] = !!n && !r((function () {
      if (c && !i) return !0;
      var e = {
        length: -1
      };
      c ? a(e, 1, {
        enumerable: !0,
        get: l
      }) : e[1] = 1, n.call(e, u, h)
    }))
  }
}, function (e, t, n) {
  "use strict";
  n.r(t), n.d(t, "RenderBatch", (function () {
    return u
  }));
  var i = n(126),
    r = n(53),
    o = n(10),
    a = n(28),
    s = n(1),
    l = new(n(62).LmvBox3),
    c = null;

  function u(e, t, n, i) {
    this.frags = e, this.indices = t, this.start = n, this.count = i, this.lastItem = n, this.overrideMaterial = null, this.sortDone = !1, this.numAdded = 0, this.avgFrameTime = void 0, this.nodeIndex = void 0, this.bboxes = new Array(12), this.bboxes[0] = this.bboxes[1] = this.bboxes[2] = 1 / 0, this.bboxes[3] = this.bboxes[4] = this.bboxes[5] = -1 / 0, this.bboxes[6] = this.bboxes[7] = this.bboxes[8] = 1 / 0, this.bboxes[9] = this.bboxes[10] = this.bboxes[11] = -1 / 0, this.sortObjects = !1, this.sortDone = !1, this.sortByShaderDone = !1, this.frustumCulled = !0, this.forceVisible = !1, this.renderImmediate = !e.useThreeMesh, this.renderImportance = 0
  }

  function h(e, t, n, i, r) {
    var s, l = o.MeshFlags.MESH_RENDERFLAG,
      c = t[n] & ~l;
    switch (e) {
      case a.RenderFlags.RENDER_HIDDEN:
        s = !(c & o.MeshFlags.MESH_VISIBLE);
        break;
      case a.RenderFlags.RENDER_HIGHLIGHTED:
        s = c & o.MeshFlags.MESH_HIGHLIGHTED;
        break;
      default:
        s = 1 == (c & (o.MeshFlags.MESH_VISIBLE | o.MeshFlags.MESH_HIGHLIGHTED | o.MeshFlags.MESH_HIDE))
    }
    if (i) {
      var u = c & (o.MeshFlags.MESH_ISLINE | o.MeshFlags.MESH_ISWIDELINE);
      s = s && !u
    }
    if (r) {
      var h = c & o.MeshFlags.MESH_ISPOINT;
      s = s && !h
    }
    return t[n] = c | (s ? l : 0), s
  }

  function d(e, t, n, i) {
    var r = !1;
    return n.getWorldBounds(i, l), e && !t.intersectsBox(l) && (r = !0), !r && t.boxOutsideCutPlanes(l) && (r = !0), r
  }
  u.prototype.getIndices = function () {
    return Array.isArray(this.indices) ? this.indices[0] : this.indices
  }, u.prototype.sortByMaterial = function () {
    if (!(this.numAdded < this.count)) {
      var e = this.frags,
        t = this.getIndices();
      if (t) {
        var n = t.subarray(this.start, this.start + this.count);
        Array.prototype.sort.call(n, (function (t, n) {
          var i = e.getMaterialId(t),
            r = e.getMaterialId(n);
          return void 0 === i ? r ? 1 : 0 : void 0 === r ? -1 : i - r
        })), this.numAdded = 0, this.sortDone = !0
      } else s.logger.warn("Only indexed RenderSubsets can be sorted.")
    }
  }, u.prototype.sortByShader = function () {
    if (this.sortDone && !this.sortByShaderDone) {
      var e = this.frags,
        t = this.getIndices().subarray(this.start, this.start + this.count);
      Array.prototype.sort.call(t, (function (t, n) {
        var i = e.getMaterial(t),
          r = e.getMaterial(n),
          o = i.program.id - r.program.id;
        return o || i.id - r.id
      })), this.numAdded = 0, this.sortByShaderDone = !0
    }
  }, u.prototype.sortByDepth = function (e) {
    var t = this.frags,
      n = this.getIndices(),
      i = e,
      r = l;
    if (n) {
      (!c || c.length < this.count) && (c = new Float32Array(this.count));
      var o, a, u = c,
        h = this.start;
      this.forEachNoMesh((function (e, n) {
        t.getGeometry(e) ? (t.getWorldBounds(e, r), u[n] = i.estimateDepth(r)) : u[n] = -1 / 0
      }));
      for (var d = 1; d < this.count; d++)
        for (var f = d; f > 0 && u[f - 1] < u[f];) o = u[f - 1], u[f - 1] = u[f], u[f] = o, a = n[h + f - 1], n[h + f - 1] = n[h + f], n[h + f] = a, f--
    } else s.logger.warn("Only indexed RenderSubsets can be sorted.")
  }, u.prototype.addToBox = function (e, t) {
    var n = t ? 6 : 0,
      i = this.bboxes;
    i[0 + n] = Math.min(i[0 + n], e.min.x), i[1 + n] = Math.min(i[1 + n], e.min.y), i[2 + n] = Math.min(i[2 + n], e.min.z), i[3 + n] = Math.max(i[3 + n], e.max.x), i[4 + n] = Math.max(i[4 + n], e.max.y), i[5 + n] = Math.max(i[5 + n], e.max.z)
  }, u.prototype.getBoundingBox = function (e) {
    e = e || l;
    var t = this.bboxes;
    return e.min.x = t[0], e.min.y = t[1], e.min.z = t[2], e.max.x = t[3], e.max.y = t[4], e.max.z = t[5], e
  }, u.prototype.getBoundingBoxHidden = function (e) {
    e = e || l;
    var t = this.bboxes;
    return e.min.x = t[6], e.min.y = t[7], e.min.z = t[8], e.max.x = t[9], e.max.y = t[10], e.max.z = t[11], e
  }, u.prototype.onFragmentAdded = function (e) {
    this.frags.getWorldBounds(e, l), this.addToBox(l, !1), this.sortDone = !1, this.lastItem <= e && (this.lastItem = e + 1, void 0 !== this.visibleStats && (this.visibleStats = 0), this.numAdded++)
  }, u.prototype.forEach = function (e, t, n) {
    var i, r, a, s = this.getIndices(),
      l = this.frags,
      c = !this.sortByShaderDone;
    if (t || n || c)
      for (i = t === o.MeshFlags.MESH_RENDERFLAG && this.hasOwnProperty("drawStart") ? this.drawStart : this.start, r = this.lastItem; i < r; i++) {
        a = s ? s[i] : i;
        u = l.getVizmesh(a, this.renderImportance);
        !c || u && u.material && u.material.program && !u.geometry_proxy || (c = !1), !(n || u && u.geometry) || t && !l.isFlagSet(a, t) || e(u, a)
      } else
        for (i = this.start, r = this.lastItem; i < r; i++) {
          var u;
          a = s ? s[i] : i, (u = l.getVizmesh(a, this.renderImportance)) && u.geometry && e(u, a)
        }
    c && this.sortByShader()
  }, u.prototype.forEachNoMesh = function (e, t, n) {
    for (var i = this.getIndices(), r = this.frags, o = this.start, a = this.lastItem; o < a; o++) {
      var s, l = i ? i[o] : o;
      if (r.useThreeMesh) {
        var c = r.getVizmesh(l);
        c && (s = c.geometry)
      } else s = r.getGeometry(l);
      !n && !s || t && !r.isFlagSet(l, t) || e(l, o - this.start)
    }
  }, u.prototype.raycast = function (e, t, n) {
    if (!1 !== e.ray.isIntersectionBox(this.getBoundingBox())) {
      var r = this,
        a = l;
      this.forEach((function (s, l) {
        if (!r.frags.isFlagSet(l, o.MeshFlags.MESH_HIDE)) {
          if (n && n.length) {
            var c = 0 | r.frags.getDbIds(l);
            if (-1 === n.indexOf(c)) return
          }
          r.frags.getWorldBounds(l, a), a.expandByScalar(.5), e.ray.isIntersectionBox(a) && i.VBIntersector.rayCast(s, e, t)
        }
      }), o.MeshFlags.MESH_VISIBLE)
    }
  }, u.prototype.calculateBounds = function () {
    var e, t, n, i;

    function r(r) {
      t.getWorldBounds(r, n);
      var o = e[r];
      i.addToBox(n, !(1 & o))
    }
    return function () {
      this.bboxes[0] = this.bboxes[1] = this.bboxes[2] = 1 / 0, this.bboxes[3] = this.bboxes[4] = this.bboxes[5] = -1 / 0, this.bboxes[6] = this.bboxes[7] = this.bboxes[8] = 1 / 0, this.bboxes[9] = this.bboxes[10] = this.bboxes[11] = -1 / 0, e = this.frags.vizflags, t = this.frags, n = l, i = this, this.forEachNoMesh(r, 0, !0)
    }
  }(), u.prototype.applyVisibility = function () {
    var e, t, n, i, l, c;

    function u(r, a) {
      if ((r || !e.useThreeMesh) && r.geometry) {
        if (d(l, n, e, a)) return r ? r.visible = !1 : s.logger.warn("Unexpected null mesh"), void(t[a] = t[a] & ~o.MeshFlags.MESH_RENDERFLAG);
        var u = h(i, t, a, e.linesHidden, e.pointsHidden);
        r && (r.visible = !!u), c = c && !u
      }
    }

    function f(r) {
      if (e.getGeometryId(r))
        if (d(l, n, e, r)) t[r] = t[r] & ~o.MeshFlags.MESH_RENDERFLAG;
        else {
          var a = h(i, t, r, e.linesHidden, e.pointsHidden);
          c = c && !a
        }
    }
    return function (o, s) {
      c = !0, n = s;
      var h = (i = o) === a.RenderFlags.RENDER_HIDDEN ? this.getBoundingBoxHidden() : this.getBoundingBox(),
        d = n.intersectsBox(h);
      return d === r.FrustumIntersector.OUTSIDE || s.boxOutsideCutPlanes(h) || (t = this.frags.vizflags, e = this.frags, l = d !== r.FrustumIntersector.CONTAINS, e.useThreeMesh ? this.forEach(u, null) : this.forEachNoMesh(f, 0, !1), e = null), c
    }
  }()
}, function (e, t, n) {
  "use strict";
  n.r(t),
    function (e) {
      n.d(t, "MESH_RECEIVE_EVENT", (function () {
        return h
      })), n.d(t, "MESH_FAILED_EVENT", (function () {
        return d
      })), n.d(t, "MATERIAL_RECEIVE_EVENT", (function () {
        return f
      })), n.d(t, "MATERIAL_FAILED_EVENT", (function () {
        return p
      })), n.d(t, "OtgResourceCache", (function () {
        return b
      }));
      var i = n(3),
        r = n(87),
        o = n(47),
        a = n(6),
        s = n(42),
        l = n(2),
        c = n(16),
        u = n(281),
        h = "meshReceived",
        d = "meshFailed",
        f = "materialReceived",
        p = "materialFailed",
        m = "true" === Object(c.getParameterByName)("disableIndexedDb").toLowerCase() || Object(i.getGlobal)().DISABLE_INDEXED_DB,
        g = "true" === Object(c.getParameterByName)("disableWebSocket").toLowerCase() || Object(i.getGlobal)().DISABLE_WEBSOCKET;

      function v(e) {
        var t = Object(a.initLoadContext)(e);
        return t.disableIndexedDb = m, t.disableWebSocket = g, t
      }

      function y(e, t) {
        return e.importance - t.importance
      }

      function b(t) {
        var n = new Map,
          a = new Map,
          s = {},
          c = Object(i.isMobileDevice)() ? 2 : 8,
          m = [];
        this.byteSize = 0, this.refCount = 0;
        var g = 0,
          b = void 0,
          _ = new u.a,
          x = this,
          w = 0,
          E = !1;

        function A() {
          E = !1
        }
        var S = !1,
          M = [];

        function T(e) {
          if (e.data)
            if (_.waitingTasks.length && !b && (b = setTimeout(P, 0)), e.data.error) {
              var t = e.data.error,
                i = t.args ? t.args.hash : void 0,
                o = t.args ? t.args.type : "g";
              i && ("m" === o ? (a.set(i, t), x.fireEvent({
                type: p,
                error: t
              }), console.warn("Error loading material", i)) : (n.set(i, t), x.fireEvent({
                type: d,
                error: t
              }), console.warn("Error loading mesh", i)), delete s[t.hash], g--)
            } else if (e.data.material) {
            i = (m = e.data).hash;
            var l = m.material;
            a.set(i, l), x.fireEvent({
              type: f,
              material: l,
              hash: i
            }), delete s[m.hash], g--
          } else
            for (var c = e.data, u = 0; u < c.length; u++) {
              var m;
              if ((m = c[u]).hash && m.mesh) {
                r.BufferGeometryUtils.meshToGeometry(m);
                i = m.hash;
                var v = m.geometry;
                n.set(i, v), x.byteSize += v.byteSize, x.cleanup(), x.fireEvent({
                  type: h,
                  geom: v
                }), delete s[m.hash]
              }
              g--
            }
        }

        function C(e) {
          return "number" == typeof e ? e % c : 0 | Math.random() * c
        }

        function P() {
          var e = 100 * c - g;
          if (0 !== e) {
            _.updateRequestPriorities() || (e = Math.min(e, 10 * c));
            for (var t = [], n = 0; !_.isEmpty() && n < e;) {
              var i = _.takeTask(),
                r = C(i.geomIdx);
              (a = t[r]) ? (a.urls.push(i.url), a.hashes.push(i.hash)) : (a = {
                operation: "LOAD_CDN_RESOURCE_OTG",
                type: "g",
                urls: [i.url],
                hashes: [i.hash],
                isCDN: i.isCDN,
                queryParams: i.queryParams
              }, t[r] = a), n++
            }
            for (var o = 0; o < t.length; o++) {
              var a;
              (a = t[o]) && (m[o].doOperation(v(a)), g += a.urls.length)
            }
            b = void 0
          } else b = setTimeout(P, 30)
        }
        this.addViewer = function (e) {
          if (!S) {
            for (var t = 0; t < c; t++) {
              var n = Object(o.createWorkerWithIntercept)();
              n.addEventListenerWithIntercept(T), m.push(n)
            }
            S = !0
          }
          e.addEventListener(l.MODEL_UNLOADED_EVENT, A), M.push(e), _.addViewer(e)
        }, this.removeViewer = function (e) {
          var t = M.indexOf(e); - 1 !== t && (e.removeEventListener(l.MODEL_UNLOADED_EVENT, A), _.removeViewer(e), M.splice(t, 1))
        }, t && this.addViewer(t), this.dtor = function () {
          for (var e = 0; e < M.length; e++) this.removeViewer(M[e]);
          M = [];
          for (e = 0; e < c; e++) m[e].clearAllEventListenerWithIntercept(), m[e].terminate()
        }, this.initWorker = function (e) {
          for (var t = 0; t < c; t++) {
            var n = {
              operation: "INIT_WORKER_OTG",
              authorizeUrns: [e]
            };
            m[t].doOperation(v(n))
          }
        }, this.updateMruTimestamps = function () {
          for (var e = 0; e < c; e++) {
            var t = {
              operation: "UPDATE_MRU_TIMESTAMPS_OTG",
              endSession: _.isEmpty()
            };
            m[e].doOperation(v(t))
          }
        }, this.requestGeometry = function (t, i, r, o, a) {
          var l = this,
            c = n.get(r);
          if (c && c.args) e((function () {
            return l.fireEvent({
              type: d,
              error: c,
              hash: r,
              repeated: !0
            })
          }));
          else if (c) e((function () {
            return l.fireEvent({
              type: h,
              geom: c
            })
          }));
          else {
            var u = s[r];
            if (u && u.refcount) return u.importanceNeedsUpdate = !0, void u.refcount++;
            var f = {
              operation: "LOAD_CDN_RESOURCE_OTG",
              type: "g",
              url: t,
              isCDN: i,
              hash: r,
              queryParams: a,
              importance: 0,
              geomIdx: o,
              importanceNeedsUpdate: !0,
              refcount: 1
            };
            _.addTask(f), s[r] = f, b || (b = setTimeout(P, 0))
          }
        }, this.requestMaterial = function (t, n, i, r, o) {
          var l = this,
            c = a.get(i);
          if (c && c.args) e((function () {
            return l.fireEvent({
              type: p,
              error: c,
              hash: i,
              repeated: !0
            })
          }));
          else if (c) e((function () {
            return l.fireEvent({
              type: f,
              material: c,
              hash: i
            })
          }));
          else {
            var u = s[i];
            if (u && u.refcount) u.refcount++;
            else {
              var h = {
                operation: "LOAD_CDN_RESOURCE_OTG",
                type: "m",
                urls: [t],
                hashes: [i],
                isCDN: n,
                queryParams: o,
                refcount: 1
              };
              s[i] = h;
              var d = C(r);
              m[d].doOperation(v(h)), g++
            }
          }
        }, this.cancelRequests = function (e) {
          for (var t in e) {
            var n = s[t];
            n && n.refcount--
          }
          for (var i = [], r = 0; r < _.waitingTasks.length; r++) {
            var o = _.waitingTasks[r];
            s[o.hash].refcount ? i.push(o) : delete s[o.hash]
          }
          _.waitingTasks = i
        }, this.updateGeomImportance = function (e, t) {
          return Object(u.b)(e, t)
        }, this.cleanup = function () {
          var e = [];
          if (!(this.byteSize < 104857600)) {
            for (var t = [], i = 0; i < M.length; i++) {
              var r = M[i].impl.modelQueue();
              t = t.concat(r.getModels().concat(M[i].getHiddenModels()))
            }
            if (!E) {
              w++;
              for (i = 0; i < t.length; i++) {
                var o = t[i],
                  a = o.getData();
                if (o.isOTG()) {
                  var s = a.geomMetadata.hashes;
                  if (s)
                    for (var l = s.length / a.geomMetadata.byteStride, c = 1; c < l; c++) {
                      var u = a.getGeometryHash(c);
                      (h = n.get(u)) && (h.timeStamp = w)
                    }
                }
              }
              for (var u in e.length > 0 && console.warn("OtgResourceCache.cleanup(): array must be empty"), n) {
                (h = n.get(u)).timeStamp !== w && e.push(h)
              }
              e.sort(y);
              for (i = 0; i < e.length && this.byteSize >= 52428800; i++) {
                var h = e[i];
                n.delete(h.hash), this.byteSize -= h.byteSize, h.dispose()
              }
              i === e.length && (E = !0), e.length = 0
            }
          }
        }, this.waitForGeometry = function (e, t) {
          var i = 0,
            r = _.makeUrgent(e);
          if (0 === r && e) t(e);
          else
            for (var o in P(), this.addEventListener(h, l), this.addEventListener(d, c), e) {
              var a = n.get(o);
              a && s(o, a)
            }

          function s(n, o) {
            _.removeUrgent(n), !0 != !e[n] && (e[n] = o, ++i < r || (x.removeEventListener(h, l), x.removeEventListener(d, c), t(e)))
          }

          function l(e) {
            s(e.geom.hash, e.geom)
          }

          function c(e) {
            s(e.error.args.hash, void 0)
          }
        }, this.getGeometry = function (e) {
          return n.get(e)
        }
      }
      s.EventDispatcher.prototype.apply(b.prototype)
    }.call(this, n(337).setImmediate)
}, function (e, t, n) {
  "use strict";
  n.r(t), n.d(t, "MeasurementTypes", (function () {
    return i
  }));
  var i = {
    MEASUREMENT_DISTANCE: 1,
    MEASUREMENT_ANGLE: 2,
    MEASUREMENT_AREA: 3,
    CALIBRATION: 4
  }
}, function (e, t, n) {
  "use strict";
  n.r(t), n.d(t, "SettingsPanel", (function () {
    return l
  }));
  var i = n(48),
    r = n(8),
    o = n(3),
    a = n(33);
  n(11);

  function s(e) {
    return (s = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (e) {
      return typeof e
    } : function (e) {
      return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
    })(e)
  }

  function l(e, t, n, r) {
    i.DockingPanel.call(this, e, t, n, r), this.panelTabs = [], this.tabIdToIndex = {}, this.controls = {}, this.controlIdCount = 0, this.shown = !1;
    var o = this,
      a = r && void 0 !== r.width ? r.width : 340;
    this.container.style.maxWidth = "800px", this.container.style.minWidth = a + "px", this.container.style.top = "10px", this.container.style.left = e.offsetWidth / 2 - 170 + "px", this.container.style.position = "absolute";
    var s = this.getDocument();
    this.tabContainer = s.createElement("div"), this.tabContainer.classList.add("docking-panel-container-solid-color-b"), this.tabContainer.classList.add("settings-tabs"), this.tabContainer.classList.add("docking-panel-delimiter-shadow"), this.container.appendChild(this.tabContainer), this.tabs = s.createElement("ul"), this.tabContainer.appendChild(this.tabs), this.heightAdjustment = r && r.heightAdjustment ? r.heightAdjustment : 179, r && r.hideTabBar && (this.heightAdjustment -= 40, this.tabContainer.style.display = "none", this.tabContainer.style.height = 0), this.createScrollContainer({
      left: !1,
      heightAdjustment: this.heightAdjustment,
      marginTop: 0
    }), this.tablesContainer = s.createElement("div"), this.tablesContainer.classList.add("settings-tabs-tables-container"), r && r.hideTabBar && (this.scrollContainer.style.top = "50px"), this.scrollContainer.appendChild(this.tablesContainer), this.mouseOver = !1, this.addEventListener(this.container, "mouseover", (function (e) {
      var t = e.toElement || e.relatedTarget;
      if (o.mouseOver) return !0;
      for (var n = 0, i = o.getWindow(); t && t.parentNode && t.parentNode != i;) {
        if (t.parentNode == this || t == this) {
          t.preventDefault && t.preventDefault(), o.mouseOver = !0;
          for (n = 0; n < o.panelTabs.length; n++) o.panelTabs[n].classList.remove("selectedmouseout");
          return !0
        }
        t = t.parentNode
      }
    })), this.addEventListener(this.container, "mouseout", (function (e) {
      var t = e.toElement || e.relatedTarget;
      if (o.mouseOver) {
        for (var n = o.getWindow(); t && t.parentNode && t.parentNode != n;) {
          if (t.parentNode == this || t == this) return t.preventDefault && t.preventDefault(), !1;
          t = t.parentNode
        }
        o.mouseOver = !1;
        for (var i = 0; i < o.panelTabs.length; i++) o.panelTabs[i].classList.contains("tabselected") && o.panelTabs[i].classList.add("selectedmouseout")
      }
    })), this.expandID = function (e) {
      return t + "-" + e
    }
  }
  l.prototype = Object.create(i.DockingPanel.prototype), l.prototype.constructor = l, l.prototype.setVisible = function (e) {
    e && (this.container.style.display = "block", this.shown || (this.resizeToContent(), this.container.style.left = this.parentContainer.offsetWidth / 2 - this.container.getBoundingClientRect().width / 2 + "px"), this.shown = !0), i.DockingPanel.prototype.setVisible.call(this, e)
  }, l.prototype.addTab = function (e, t, n) {
    var i = this;
    if (void 0 !== this.tabIdToIndex[e]) return !1;
    var a = n && void 0 !== n.className ? n.className : null,
      s = n && void 0 !== n.width ? n.width : 200,
      l = n && void 0 !== n.index ? n.index : this.panelTabs.length;
    var c = this.getDocument(),
      u = c.createElement("li");
    u._id = e, u.id = this.expandID(u._id), u.classList.add(a);
    var h = c.createElement("a"),
      d = c.createElement("span");
    d.setAttribute("data-i18n", t), d.textContent = r.i18n.translate(t), h.appendChild(d), u.appendChild(h), this.tabs.appendChild(u);
    var f = c.createElement("table");
    f._id = e + "-table", f.id = this.expandID(f._id), f.classList.add("settings-table"), f.classList.add("adsk-lmv-tftable"), f.classList.add(a);
    var p = c.createElement("tbody");
    return p.style.display = "table", p.style.width = "100%", f.appendChild(p), this.tablesContainer.appendChild(f), this.addEventListener(u, "touchstart", o.touchStartToClick), this.addEventListener(u, "click", (function (t) {
      i.selectTab(e)
    })), this.panelTabs.push(u), this.tabIdToIndex[e] = l, s > (this.container.style.minWidth ? parseInt(this.container.style.minWidth) : 0) && (this.container.style.minWidth = s + "px"), !0
  }, l.prototype.removeTab = function (e) {
    var t = this.tabIdToIndex[e];
    if (!t) return !1;
    this.panelTabs.splice(t, 1);
    var n = this.getDocument().getElementById(this.expandID(e));
    this.tabs.removeChild(n), this.tabIdToIndex = {};
    for (var i = this.panelTabs.length, r = 0; r < i; r++) {
      var a = this.panelTabs[r];
      this.tabIdToIndex[a._id] = r, this.removeEventListener(a, "touchstart", o.touchStartToClick), this.removeEventListener(a, "click", select)
    }
    return !0
  }, l.prototype.resizeTabs = function () {
    for (var e = this.tabs.getElementsByTagName("li"), t = 100 / e.length, n = 0; n < e.length; n++) e[n].style.width = t + "%"
  }, l.prototype.hasTab = function (e) {
    var t = this.tabIdToIndex[e];
    return void 0 !== this.panelTabs[t]
  }, l.prototype.selectTab = function (e) {
    if (this.isTabSelected(e)) return !1;
    for (var t = this.getDocument(), n = this.panelTabs.length, i = 0; i < n; i++) {
      var r = this.panelTabs[i],
        o = t.getElementById(this.expandID(r._id + "-table"));
      e === r._id ? (r.classList.add("tabselected"), o.classList.add("settings-selected-table"), this.mouseOver || r.classList.add("selectedmouseout")) : (r.classList.remove("tabselected"), o.classList.remove("settings-selected-table"), this.mouseOver || this.panelTabs[i].classList.remove("selectedmouseout"))
    }
    return this.scrollContainer.scrollTop = 0, !0
  }, l.prototype.isTabSelected = function (e) {
    var t = this.tabIdToIndex[e],
      n = this.panelTabs[t];
    return n && n.classList.contains("tabselected")
  }, l.prototype.getSelectedTabId = function () {
    for (var e in this.tabIdToIndex)
      if (this.isTabSelected(e)) return e;
    return null
  }, l.prototype.addLabel = function (e, t) {
    var n, i = this.tabIdToIndex[e];
    if (-1 === i) return !1;
    n = this.tablesContainer.childNodes[i];
    var r = new a.OptionLabel(t, n.tBodies[0]);
    return r.setGlobalManager(this.globalManager), r.sliderRow.classList.add("logical-group"), r
  }, l.prototype.addButton = function (e, t) {
    var n = this.tabIdToIndex[e];
    if (void 0 === n) return null;
    var i = this.tablesContainer.childNodes[n],
      r = new a.OptionButton(t, i.tBodies[0]);
    return r.setGlobalManager(this.globalManager), this.addControl(e, r)
  }, l.prototype.addCheckbox = function (e, t, n, i, r, o) {
    if (void 0 === this.tabIdToIndex[e]) return null;
    var s = this.getDocument().getElementById(this.expandID(e + "-table")),
      l = new a.OptionCheckbox(t, s.tBodies[0], n, r, o);
    return l.setGlobalManager(this.globalManager), l.changeListener = function (e) {
      var t = e.detail.target.checked;
      i(t)
    }, this.addEventListener(l, "change", l.changeListener), this.addControl(e, l)
  }, l.prototype.addRow = function (e, t, n, i) {
    if (void 0 === this.tabIdToIndex[e]) return null;
    var r = this.getDocument().getElementById(this.expandID(e + "-table")),
      o = new a.OptionRow(t, r.tBodies[0], n, i);
    return o.setGlobalManager(this.globalManager), this.addControl(e, o)
  }, l.prototype.addSlider = function (e, t, n, i, r, o, s) {
    if (void 0 === this.tabIdToIndex[e]) return null;
    var l = this.getDocument().getElementById(this.expandID(e + "-table")),
      c = new a.OptionSlider(t, n, i, l.tBodies[0], s);
    c.setGlobalManager(this.globalManager), c.setValue(r);
    var u = 1;
    return s && s.step && (u = s.step), c.sliderElement.step = c.stepperElement.step = u, this.addEventListener(c, "change", (function (e) {
      o(e)
    })), this.addControl(e, c)
  }, l.prototype.addSliderV2 = function (e, t, n, i, r, o, a, s) {
    (s = s || {}).hideStepper = !0, s.hideCaption = !0;
    var l = [];
    return l.push(this.addRow(e, t, n, s)), l.push(this.addSlider(e, t, i, r, o, a, s)), l
  }, l.prototype.addDropDownMenu = function (e, t, n, i, r, o) {
    if (void 0 === this.tabIdToIndex[e]) return null;
    var s = this.getDocument().getElementById(this.expandID(e + "-table")),
      l = new a.OptionDropDown(t, s.tBodies[0], n, i, null, this.globalManager, o);
    return l.setGlobalManager(this.globalManager), this.addEventListener(l, "change", (function (e) {
      r(e)
    })), this.addControl(e, l)
  }, l.prototype.addControl = function (e, t, n) {
    if (void 0 === this.tabIdToIndex[e]) return null;
    if (!t.hasOwnProperty("sliderRow")) {
      var i = n && n.insertAtIndex ? n.insertAtIndex : -1,
        o = n && n.caption ? n.caption : null,
        a = this.getDocument(),
        s = a.getElementById(this.expandID(e + "-table"));
      i > s.length && (i = -1);
      var l = s.tBodies[0].insertRow(i),
        c = l.insertCell(0);
      if (o) {
        var u = a.createElement("div");
        u.setAttribute("data-i18n", o), u.textContent = r.i18n.translate(o), c.appendChild(u), c = l.insertCell(1)
      } else c.colSpan = 3;
      c.appendChild(t), t.sliderRow = l, t.tbody = s.tBodies[0]
    }
    var h = this.expandID("adsk_settings_control_id_" + this.controlIdCount.toString());
    return this.controlIdCount = this.controlIdCount + 1, this.controls[h] = t, t.parent = this, h
  }, l.prototype.removeButton = function (e) {
    return this.removeControl(e)
  }, l.prototype.removeCheckbox = function (e) {
    return this.removeControl(e)
  }, l.prototype.removeSlider = function (e) {
    return this.removeControl(e)
  }, l.prototype.removeDropdownMenu = function (e) {
    return this.removeControl(e)
  }, l.prototype.removeControl = function (e) {
    var t;
    if ("object" === s(e) && e.tbody) {
      for (var n in t = e, this.controls)
        if (this.controls[n] === t) {
          e = n;
          break
        }
    } else t = this.controls[e];
    if (void 0 === t) return !1;
    if (t.removeFromParent) t.removeFromParent();
    else {
      var i = t.tbody,
        r = t.sliderRow.rowIndex;
      i.deleteRow(r)
    }
    return delete this.controls[e], t.parent = void 0, !0
  }, l.prototype.getControl = function (e) {
    return this.controls[e] || null
  }, l.prototype.getContentSize = function () {
    for (var e = this.heightAdjustment, t = 0, n = this.getDocument(), i = 0; i < this.panelTabs.length; i++) {
      var r = this.panelTabs[i],
        o = n.getElementById(this.expandID(r._id + "-table")),
        a = o ? o.clientHeight : 0;
      t = Math.max(t, a)
    }
    return {
      height: e + t,
      width: this.container.clientWidth
    }
  }, l.prototype.sizeToContent = function (e) {
    var t = this.getContentSize().height + this.heightAdjustment,
      n = e.clientHeight - this.heightAdjustment,
      i = Math.min(t, n);
    this.container.style.height = parseInt(i) + "px"
  }, l.prototype.addSimpleList = function (e, t, n) {
    var i = new a.SimpleList(e, t, n);
    return i.setGlobalManager(this.globalManager), i
  }, l.prototype.removeSimpleList = function (e) {
    return !!e && (e.removeFromParent(), !0)
  }
}, function (e, t, n) {
  var i = n(152),
    r = n(55);
  e.exports = function (e) {
    return i(r(e))
  }
}, function (e, t) {
  var n = Math.ceil,
    i = Math.floor;
  e.exports = function (e) {
    return isNaN(e = +e) ? 0 : (e > 0 ? i : n)(e)
  }
}, function (e, t, n) {
  var i = n(55),
    r = /"/g;
  e.exports = function (e, t, n, o) {
    var a = String(i(e)),
      s = "<" + t;
    return "" !== n && (s += " " + n + '="' + String(o).replace(r, "&quot;") + '"'), s + ">" + a + "</" + t + ">"
  }
}, function (e, t, n) {
  var i = n(14);
  e.exports = function (e) {
    return i((function () {
      var t = "" [e]('"');
      return t !== t.toLowerCase() || t.split('"').length > 3
    }))
  }
}, function (e, t) {
  var n = {}.toString;
  e.exports = function (e) {
    return n.call(e).slice(8, -1)
  }
}, function (e, t, n) {
  "use strict";
  n.r(t), n.d(t, "formatValueWithUnits", (function () {
    return h
  })), n.d(t, "convertUnits", (function () {
    return d
  })), n.d(t, "calculatePrecision", (function () {
    return f
  }));
  var i = n(8),
    r = n(721);

  function o(e) {
    var t = 0 <= e ? Math.floor(e) : Math.ceil(e);
    return {
      intPart: t,
      fracPart: e - t
    }
  }

  function a(e, t, n) {
    var i = "";
    return n && 0 === e && (i += "-"), i += 0 < t ? e.toFixed(t) : e.toFixed(0)
  }

  function s(e, t, n) {
    for (var i, r, s = "", l = 1, c = e < 0, u = 0; u < t; ++u) l *= 2;
    e > 0 ? e += .5 / l : e -= .5 / l, n ? r = e : (s += a(i = o(e / 12).intPart, 0, c) + "' ", (r = e - 12 * i) < 0 && (r = -r));
    var h = o(r).intPart,
      d = o((r - h) * l).intPart;
    if (0 !== d && 0 === h || (s += a(h, 0)), 0 !== d) {
      for (h < 0 && d < 0 && (d = -d); d % 2 == 0;) d /= 2, l /= 2;
      0 !== h && (s += "-"), s += a(d, 0) + "/" + a(l, 0)
    }
    return s += '"'
  }

  function l(e, t) {
    var n = "";
    e < 0 && (n = "-", e = Math.abs(e));
    var i = o(e),
      r = i.intPart,
      s = 100 * i.fracPart;
    return n + a(r, 0) + " m " + a(s, t) + " cm"
  }

  function c(e, t) {
    var n = "";
    e < 0 && (n = "-", e = Math.abs(e));
    var i = o(e),
      r = i.intPart,
      s = 12 * i.fracPart;
    return n + a(r, 0) + "' " + a(s, t) + '"'
  }
  var u = {
    feetFractionalInches: "ft-and-fractional-in",
    fractionalInches: "fractional-in",
    feet: "feet",
    inches: "inches",
    stationingFeet: "feet"
  };

  function h(e, t, n, o) {
    var d;
    null == o && (o = 3), t = function (e) {
      if (!e || !e.startsWith("autodesk.unit.unit:")) return e;
      var t = e.split(":")[1].split("-")[0],
        n = r.unit[t];
      if (!n) return console.warn("Failed to find Forge unit schema for", e), e;
      var i = u[t];
      if (i) return i;
      if (!n.symbols) return "";
      for (var o in n.symbols) return n.symbols[o].text
    }(t);
    try {
      if (1 === n) d = i.i18n.translate(e ? "Yes" : "No");
      else if (24 === n) {
        var f = e.split(" ");
        d = [];
        for (var p = 0; p < f.length; ++p) d.push(h(parseFloat(f[p]), t, 3, o));
        d = d.join(", ")
      } else 2 !== n && 3 !== n || !isNaN(e) ? "ft-and-fractional-in" === t ? d = s(12 * e, o) : "ft-and-fractional-in^2" === t ? d = s(12 * e, o) + " " + String.fromCharCode(178) : "ft-and-decimal-in" === t ? d = c(e, o) : "ft-and-decimal-in^2" === t ? d = c(e, o) + " " + String.fromCharCode(178) : "decimal-in" === t || "in" === t || "inch" === t || "inches" === t ? d = a(e, o) + '"' : "decimal-in^2" === t || "in^2" === t || "inch^2" === t ? d = a(e, o) + " in" + String.fromCharCode(178) : "decimal-ft" === t || "ft" === t || "feet" === t || "foot" === t ? d = a(e, o) + "'" : "decimal-ft^2" === t || "ft^2" === t || "feet^2" === t || "foot^2" === t ? d = a(e, o) + " ft" + String.fromCharCode(178) : "fractional-in" === t ? d = s(e, o, !0) : "fractional-in^2" === t ? d = s(e, o, !0) + " " + String.fromCharCode(178) : "m-and-cm" === t ? d = l(e, o) : "m-and-cm^2" === t ? d = l(e, o) + " " + String.fromCharCode(178) : 3 === n && t ? (t = (t = t.replace("^2", String.fromCharCode(178))).replace("^3", String.fromCharCode(179)), d = a(e, o) + " " + t) : d = t ? e + " " + t : 3 === n ? a(e, o) : e : d = "NaN"
    } catch (n) {
      d = t ? e + " " + t : e
    }
    return d
  }

  function d(e, t, n, i, r, o) {
    if (n = n || 1, o = o || 72, e === t && 1 == n) return i;
    var a = 1;
    switch (t) {
      case "mm":
        a = 1e3;
        break;
      case "cm":
        a = 100;
        break;
      case "m":
        a = 1;
        break;
      case "in":
        a = 39.37007874;
        break;
      case "ft":
      case "ft-and-fractional-in":
      case "ft-and-decimal-in":
        a = 3.280839895;
        break;
      case "decimal-in":
        a = 39.37007874;
        break;
      case "decimal-ft":
        a = 3.280839895;
        break;
      case "fractional-in":
        a = 39.37007874;
        break;
      case "m-and-cm":
        a = 1;
        break;
      case "pt":
        a = 39.37007874 * o
    }
    var s = 1;
    switch (e) {
      case "mm":
        s = .001;
        break;
      case "cm":
        s = .01;
        break;
      case "m":
        s = 1;
        break;
      case "in":
        s = .0254;
        break;
      case "ft":
      case "ft-and-fractional-in":
      case "ft-and-decimal-in":
        s = .3048;
        break;
      case "decimal-in":
        s = .0254;
        break;
      case "decimal-ft":
        s = .3048;
        break;
      case "fractional-in":
        s = .0254;
        break;
      case "m-and-cm":
        s = 1;
        break;
      case "pt":
        s = .0254 / o
    }
    return "square" === r ? i ? i * Math.pow(a * s * n, 2) : 0 : i ? i * a * s * n : 0
  }

  function f(e) {
    if (!e) return 0;
    var t = e.toString().split(".")[1];
    if (!t) {
      var n = e.toString().split("/")[1],
        i = n && n.match(/\d+/);
      if (i) {
        var r = parseFloat(i);
        if (r && !isNaN(r)) return Math.floor(Math.log2(r))
      }
      return 0
    }
    return (t = t.match(/\d+/)) && t[0] && t[0].length || 0
  }
}, function (e, t, n) {
  "use strict";
  n.r(t), n.d(t, "PropertyPanel", (function () {
    return l
  }));
  var i = n(48),
    r = n(132),
    o = n(270),
    a = n(81),
    s = n(8);

  function l(e, t, n, a) {
    i.DockingPanel.call(this, e, t, n, a), this.title.classList.add("docking-panel-delimiter-shadow"), this.container.classList.add("property-panel"), this.container.dockRight = !0, this.createScrollContainer({
      left: !1,
      heightAdjustment: 70,
      marginTop: 0
    }), this.highlightableElements = {};
    var s = this;
    var l = function () {
      var e = new r.TreeDelegate;

      function t(e) {
        return "category" === e.type
      }
      return e.setGlobalManager(s.globalManager), e.getTreeNodeId = function (e) {
        return e.name + (e.hasOwnProperty("value") ? e.value : "") + (e.hasOwnProperty("category") ? e.category : "")
      }, e.getTreeNodeClass = function (e) {
        return t(e) ? s.getCategoryClass(e) : s.getPropertyClass(e)
      }, e.isTreeNodeGroup = function (e) {
        return t(e)
      }, e.onTreeNodeClick = function (e, n, i) {
        t(n) ? s.onCategoryClick(n, i) : s.onPropertyClick(n, i)
      }, e.onTreeNodeRightClick = function (e, n, i) {
        t(n) ? s.onCategoryRightClick(n, i) : s.onPropertyRightClick(n, i)
      }, e.onTreeNodeDoubleClick = function (e, n, i) {
        t(n) ? s.onCategoryDoubleClick(n, i) : s.onPropertyDoubleClick(n, i)
      }, e.onTreeNodeIconClick = function (e, n, i) {
        t(n) ? s.onCategoryIconClick(n, i) : s.onPropertyIconClick(n, i)
      }, e.createTreeNode = function (e, n, i) {
        var r = null;
        (r = t(e) ? s.displayCategory(e, n, i) : s.displayProperty(e, n, i)) && (s.highlightableElements[this.getTreeNodeId(e)] = r)
      }, e
    }();
    this.tree = new o.Tree(l, null, this.scrollContainer, {}), this.tree.setGlobalManager(this.globalManager)
  }
  l.prototype = Object.create(i.DockingPanel.prototype), l.prototype.constructor = l, l.prototype.setProperties = function (e, t) {
    this.removeAllProperties();
    for (var n = [], i = [], r = 0; r < e.length; r++) {
      if (!(u = e[r]).hidden) {
        var o = e[r].displayCategory;
        o && "string" == typeof o && "" !== o ? n.push(u) : i.push(u)
      }
    }
    if (n.length + i.length !== 0) {
      i[0] && "Name" === i[0].displayName && (this.addProperty(i[0].displayName, i[0].displayValue), i.shift());
      for (r = 0; r < n.length; r++) {
        var s = (u = n[r]).precision || Object(a.calculatePrecision)(u.displayValue),
          l = Object(a.formatValueWithUnits)(u.displayValue, u.units, u.type, s);
        this.addProperty(u.displayName, l, u.displayCategory)
      }
      var c = n.length > 0;
      for (r = 0; r < i.length; r++) {
        var u;
        s = (u = i[r]).precision || Object(a.calculatePrecision)(u.displayValue), l = Object(a.formatValueWithUnits)(u.displayValue, u.units, u.type, s);
        this.addProperty(u.displayName, l, c ? "Other" : "", c ? {
          localizeCategory: !0
        } : {})
      }
    } else this.showNoProperties()
  }, l.prototype.showNoProperties = function () {
    this.removeAllProperties();
    var e = this.tree.myRootContainer,
      t = this.getDocument().createElement("div");
    t.className = "no-properties";
    var n = "No properties to display";
    t.setAttribute("data-i18n", n), t.textContent = s.i18n.translate(n), e.appendChild(t)
  }, l.prototype.showDefaultProperties = function () {
    this.showNoProperties(), this.resizeToContent()
  }, l.prototype.areDefaultPropertiesShown = function () {
    return !this.hasProperties()
  }, l.prototype.addProperty = function (e, t, n, i) {
    if (this.tree.getElementForNode({
        name: e,
        value: t,
        category: n
      })) return !1;
    var r = null,
      o = {
        name: e,
        value: t,
        type: "property"
      };
    return n ? ((r = this.tree.getElementForNode({
      name: n
    })) || (r = this.tree.createElement_({
      name: n,
      type: "category"
    }, this.tree.myRootContainer, i && i.localizeCategory ? {
      localize: !0
    } : null)), o.category = n) : r = this.tree.myRootContainer, this.tree.createElement_(o, r, i && i.localizeProperty ? {
      localize: !0
    } : null), !0
  }, l.prototype.hasProperties = function () {
    for (var e in this.highlightableElements) return !0;
    return !1
  }, l.prototype.removeProperty = function (e, t, n, i) {
    var r = {
        name: e,
        value: t,
        category: n
      },
      o = this.tree.getElementForNode(r);
    return !!o && (delete this.highlightableElements[this.tree.delegate().getTreeNodeId(r)], o.parentNode.removeChild(o), !0)
  }, l.prototype.removeAllProperties = function () {
    this.highlightableElements = {}, this.tree.clear()
  }, l.prototype.setCategoryCollapsed = function (e, t) {
    var n = this.tree.delegate().getTreeNodeId(e);
    this.tree.setCollapsed(n, t)
  }, l.prototype.isCategoryCollapsed = function (e) {
    var t = this.tree.delegate().getTreeNodeId(e);
    return this.tree.isCollapsed(t)
  }, l.prototype.getContentSize = function () {
    var e = this.tree.myRootContainer;
    return {
      height: e.clientHeight + 55,
      width: e.clientWidth
    }
  }, l.prototype.highlight = function (e, t) {
    function n(t) {
      var n = t.innerHTML,
        i = n.replace(/(<highlight>|<\/highlight>)/gim, "");
      if (n !== i && (t.innerHTML = i), e && "" !== e) {
        var r = new RegExp("(\\b" + e + "\\b)", "gim"),
          o = i.replace(r, "<highlight>$1</highlight>");
        t.innerHTML = o
      }
    }
    for (var i in this.highlightableElements)
      for (var r = this.highlightableElements[i], o = 0; o < r.length; ++o) n(r[o])
  }, l.prototype.displayCategory = function (e, t, n) {
    var i = this.getDocument().createElement("div"),
      r = e.name;
    return n && n.localize && (i.setAttribute("data-i18n", r), r = s.i18n.translate(r)), i.textContent = r, i.title = r, i.className = "category-name", t.appendChild(i), [i]
  }, l.prototype.displayProperty = function (e, t, n) {
    var i = this.getDocument(),
      r = i.createElement("div"),
      o = e.name;
    n && n.localize && (r.setAttribute("data-i18n", o), o = s.i18n.translate(o)), r.textContent = o, r.title = o, r.className = "property-name";
    var a = i.createElement("div");
    a.className = "separator";
    var l = i.createElement("div");
    l.textContent = e.value;
    var c = e.value;
    return l.title = c, c = function (e) {
      e = String(e);
      var t = ' target="blank" class="propertyLink" ';
      return [{
        pattern: /\b(?:https?|ftp):\/\/[a-z0-9-+&@#\/%?=~_|!:,.;]*[a-z0-9-+&@#\/%=~_|]/gim,
        value: "<a" + t + 'href="$&">$&</a>'
      }, {
        pattern: /(^|[^\/])(www\.[\S]+(\b|$))/gim,
        value: "$1<a" + t + 'href="http://$2">$2</a>'
      }].reduce((function (e, t) {
        return e.replace(t.pattern, t.value)
      }), e)
    }(c), l.innerHTML = c, l.className = "property-value", t.appendChild(r), t.appendChild(a), t.appendChild(l), [r, l]
  }, l.prototype.getCategoryClass = function (e) {
    return "category"
  }, l.prototype.getPropertyClass = function (e) {
    return "property"
  }, l.prototype.onCategoryClick = function (e, t) {
    this.setCategoryCollapsed(e, !this.isCategoryCollapsed(e))
  }, l.prototype.onPropertyClick = function (e, t) {}, l.prototype.onCategoryIconClick = function (e, t) {
    this.setCategoryCollapsed(e, !this.isCategoryCollapsed(e))
  }, l.prototype.onPropertyIconClick = function (e, t) {}, l.prototype.onCategoryDoubleClick = function (e, t) {}, l.prototype.onPropertyDoubleClick = function (e, t) {}, l.prototype.onCategoryRightClick = function (e, t) {}, l.prototype.onPropertyRightClick = function (e, t) {}
}, function (e, t, n) {
  "use strict";

  function i(e, t, n) {
    this.level = e, this.x = t, this.y = n
  }

  function r(e) {
    var t = ((1 << 2 * e.level) - 1) / 3,
      n = 1 << e.level;
    return t + e.y * n + e.x
  }

  function o(e) {
    for (var t = new i(0, 0, 0); r(t) <= e;) t.level++;
    t.level--;
    var n = e - r(t),
      o = 1 << t.level;
    return t.y = Math.floor(n / o), t.x = n % o, t
  }
  n.r(t), n.d(t, "TileCoords", (function () {
    return i
  })), n.d(t, "tile2Index", (function () {
    return r
  })), n.d(t, "index2Tile", (function () {
    return o
  })), i.prototype = {
    constructor: i,
    copy: function () {
      return new i(this.level, this.x, this.y)
    },
    isValid: function () {
      return Number.isInteger(this.level) && this.level >= 0 && Number.isInteger(this.x) && Number.isInteger(this.y)
    },
    getChild: function (e) {
      var t = 1 & e ? 1 : 0,
        n = 2 & e ? 1 : 0;
      return new i(this.level + 1, 2 * this.x + t, 2 * this.y + n)
    },
    getParent: function () {
      return 0 == this.level ? null : new i(this.level - 1, Math.floor(this.x / 2), Math.floor(this.y / 2))
    },
    getParentAtLevel: function (e) {
      if (e < 0 || e > this.level) return null;
      var t = this.level - e;
      return new i(e, Math.floor(this.x >> t), Math.floor(this.y >> t))
    },
    toString: function () {
      return "(" + this.level + ", " + this.x + ", " + this.y + ")"
    },
    equals: function (e, t, n) {
      return e instanceof i ? this.equals(e.level, e.x, e.y) : this.level === e && this.x === t && this.y === n
    }
  }
}, function (e, t, n) {
  var i = n(22);
  e.exports = function (e, t) {
    if (!i(e)) return e;
    var n, r;
    if (t && "function" == typeof (n = e.toString) && !i(r = n.call(e))) return r;
    if ("function" == typeof (n = e.valueOf) && !i(r = n.call(e))) return r;
    if (!t && "function" == typeof (n = e.toString) && !i(r = n.call(e))) return r;
    throw TypeError("Can't convert object to primitive value")
  }
}, function (e, t, n) {
  var i, r = n(7),
    o = n(290),
    a = n(212),
    s = n(154),
    l = n(291),
    c = n(208),
    u = n(181),
    h = u("IE_PROTO"),
    d = function () {},
    f = function (e) {
      return "<script>" + e + "<\/script>"
    },
    p = function () {
      try {
        i = document.domain && new ActiveXObject("htmlfile")
      } catch (e) {}
      var e, t;
      p = i ? function (e) {
        e.write(f("")), e.close();
        var t = e.parentWindow.Object;
        return e = null, t
      }(i) : ((t = c("iframe")).style.display = "none", l.appendChild(t), t.src = String("javascript:"), (e = t.contentWindow.document).open(), e.write(f("document.F=Object")), e.close(), e.F);
      for (var n = a.length; n--;) delete p.prototype[a[n]];
      return p()
    };
  s[h] = !0, e.exports = Object.create || function (e, t) {
    var n;
    return null !== e ? (d.prototype = r(e), n = new d, d.prototype = null, n[h] = e) : n = p(), void 0 === t ? n : o(n, t)
  }
}, function (e, t, n) {
  "use strict";
  n.r(t), n.d(t, "FileLoaderManager", (function () {
    return r
  }));
  var i = {};
  var r = {
    registerFileLoader: function (e, t, n) {
      return !i[e] && (i[e] = {
        loader: n,
        extensions: t
      }, !0)
    },
    getFileLoader: function (e) {
      return i[e] ? i[e].loader : null
    },
    getFileLoaderForExtension: function (e) {
      for (var t in e = e ? e.toLowerCase() : "", i) {
        var n = i[t];
        if (n)
          for (var r = 0; r < n.extensions.length; r++)
            if (n.extensions[r].toLowerCase() === e) return n.loader
      }
      return null
    },
    unregisterFileLoader: function (e) {
      return !!i[e] && (delete i[e], !0)
    }
  }
}, function (e, t, n) {
  "use strict";
  n.r(t), n.d(t, "createBufferGeometry", (function () {
    return p
  })), n.d(t, "meshToGeometry", (function () {
    return m
  })), n.d(t, "BufferGeometryUtils", (function () {
    return g
  }));
  var i = n(44),
    r = n(3),
    o = n(0),
    a = n(1),
    s = {};

  function l(e, t, n) {
    var i;
    if (t.array) i = new o.BufferAttribute(t.array, t.itemSize);
    else {
      var r = e + "|" + t.bytesPerItem + "|" + t.normalize + "|" + t.isPattern + "|" + t.divisor + "|" + t.offset;
      if (i = s[r]) return i;
      i = new o.BufferAttribute(void 0, t.itemSize), s[r] = i
    }
    return i.bytesPerItem = t.bytesPerItem, i.normalize = t.normalize, i.isPattern = t.isPattern, n && (i.divisor = t.divisor), t.array || (t.hasOwnProperty("offset") ? i.itemOffset = t.offset : a.logger.warn("VB attribute is neither interleaved nor separate. Something is wrong with the buffer specificaiton.")), i
  }
  var c, u, h, d = {};
  var f = 1;

  function p() {
    return h || ((c = new o.BufferAttribute(void 0, 1)).bytesPerItem = 2, (u = new o.BufferAttribute(void 0, 1)).bytesPerItem = 4, (h = function () {
      this.id = f++, this.attributes = {}, this.__webglInit = void 0
    }).prototype = Object.create(o.BufferGeometry.prototype), h.prototype.constructor = h), new h
  }

  function m(e) {
    var t = e.mesh,
      n = p();
    for (var a in Object(r.isNodeJS)() && (n.packId = e.packId, n.meshIndex = e.meshIndex), n.byteSize = 0, n.vb = t.vb, n.vbbuffer = void 0, n.vbNeedsUpdate = !0, n.byteSize += t.vb.byteLength, n.hash = e.hash, n.vbstride = t.vbstride, t.isLines && (n.isLines = t.isLines), t.isWideLines && (n.isWideLines = !0, n.lineWidth = t.lineWidth), t.isPoints && (n.isPoints = t.isPoints, n.pointSize = t.pointSize), e.is2d && (n.is2d = !0), n.numInstances = t.numInstances, t.vblayout) {
      var s = t.vblayout[a];
      n.attributes[a] = l(a, s, n.numInstances)
    }
    if (i.memoryOptimizedLoading) n.attributes.index = t.indices instanceof Uint32Array ? u : c, n.ib = t.indices, n.ibbuffer = void 0, t.iblines && (n.attributes.indexlines = t.iblines instanceof Uint32Array ? u : c, n.iblines = t.iblines, n.iblinesbuffer = void 0);
    else {
      var h = new o.BufferAttribute(t.indices, 1);
      h.bytesPerItem = t.indices instanceof Uint32Array ? 4 : 2, n.addAttribute("index", h)
    }
    n.attributesKeys = function (e) {
      var t = "";
      for (var n in e.attributes) t += n + "|";
      var i = d[t];
      return i || (i = Object.keys(e.attributes), d[t] = i, i)
    }(n), n.byteSize += t.indices.byteLength, n.boundingBox = (new o.Box3).copy(t.boundingBox), n.boundingSphere = (new o.Sphere).copy(t.boundingSphere), e.geometry = n, e.mesh = null
  }
  var g = {
    meshToGeometry: m,
    createBufferGeometry: p,
    findBufferAttribute: l
  }
}, function (e, t, n) {
  "use strict";
  n.r(t), n.d(t, "Profile", (function () {
    return s
  }));
  var i = n(5),
    r = n(115),
    o = n(3),
    a = Object(o.getGlobal)();

  function s(e) {
    if (e) {
      var t = Autodesk.Viewing,
        n = t.ProfileSettings.Default,
        o = [];
      if (this.name = e.hasOwnProperty("name") ? e.name : "Custom", this.label = e.label, this.description = e.description, this.persistent = Array.isArray(e.persistent) ? e.persistent : n.persistent, this.settings = Object.assign({}, n.settings), e.hasOwnProperty("settings")) {
        var s = e.settings;
        o = Object.keys(s), this.settings = Object.assign(this.settings, s)
      }
      var l = [],
        c = [];
      if (e.hasOwnProperty("extensions")) {
        var u = e.extensions.load,
          h = e.extensions.unload;
        l = u ? u.slice() : l, c = h ? h.slice() : c
      }
      this.extensions = {
        load: l,
        unload: c
      }, this.apply = function (e) {
        if (!e) return !1;
        ! function (e, t) {
          if (r.LocalStorage.isSupported()) {
            a.localStorage.getItem("Autodesk.Viewing.ProfileName") !== e && (r.LocalStorage.setItem("Autodesk.Viewing.ProfileName", e), t.clearWebStorage())
          }
        }(this.name, e);
        var n = this.settings,
          s = [t.ProfileSettings.Default.name, t.ProfileSettings.AEC.name],
          l = Object.values(i.Prefs3D),
          c = Object.values(i.Prefs2D);
        for (var u in n)
          if (n.hasOwnProperty(u)) {
            var h = n[u],
              d = -1 !== o.indexOf(u) && -1 === s.indexOf(this.name) ? ["ignore-producer"] : []; - 1 !== l.indexOf(u) ? d.push("3d") : -1 !== c.indexOf(u) ? d.push("2d") : (d.push("2d"), d.push("3d")), -1 === this.persistent.indexOf(u) && d.push("no-storage");
            var f = e.get(u);
            void 0 !== f ? (e.addTags(u, d), f !== h && e.set(u, h)) : e.add(u, h, d, !0)
          } return !0
      }
    }
  }
}, function (e, t, n) {
  "use strict";
  n.r(t), n.d(t, "SelectionType", (function () {
    return i
  }));
  var i = {
    MIXED: 1,
    REGULAR: 2,
    OVERLAYED: 3
  }
}, function (e, t, n) {
  "use strict";
  n.r(t);
  var i = n(0),
    r = n(3),
    o = n(1),
    a = n(88),
    s = n(5),
    l = n(241),
    c = n(242),
    u = n(16),
    h = n(9),
    d = n(42),
    f = n(129),
    p = n(98),
    m = n(65),
    g = n(243),
    v = n(107),
    y = n(244),
    b = n(245),
    _ = n(246),
    x = n(108),
    w = n(8),
    E = (n(6), n(2)),
    A = n(86),
    S = n(104),
    M = n(141),
    T = n(172),
    C = n(249),
    P = n(251),
    L = n(252),
    D = n(179),
    I = n(66),
    R = n(95),
    O = n(43),
    k = n(12);

  function N(e, t) {
    for (var n = 0; n < t.length; n++) {
      var i = t[n];
      i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(e, i.key, i)
    }
  }
  var F = function () {
    function e() {
      ! function (e, t) {
        if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
      }(this, e), this.domElement = null
    }
    var t, n, i;
    return t = e, (n = [{
      key: "createDom",
      value: function (e) {
        var t = this.getDocument(),
          n = t.createElement("div");
        n.className = "spinner", e && e.appendChild(n);
        for (var i = 1; i <= 3; i++) {
          var r = t.createElement("div");
          r.className = "bounce" + i, n.appendChild(r)
        }
        return this.domElement = n, this.hide(), n
      }
    }, {
      key: "show",
      value: function () {
        this.domElement && (this.domElement.style.display = "block")
      }
    }, {
      key: "hide",
      value: function () {
        this.domElement && (this.domElement.style.display = "None")
      }
    }, {
      key: "destroy",
      value: function () {
        this.domElement = null
      }
    }]) && N(t.prototype, n), i && N(t, i), e
  }();
  k.GlobalManagerMixin.call(F.prototype);
  var U = n(64),
    V = n(173),
    B = Object.freeze({
      pdf: "Autodesk.PDF",
      scalaris: "Autodesk.Scalaris"
    }),
    z = n(257),
    G = n(145),
    H = n(23),
    W = n(204),
    j = n(150),
    q = n.n(j);

  function X(e, t) {
    for (var n = 0; n < t.length; n++) {
      var i = t[n];
      i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(e, i.key, i)
    }
  }
  var Y = new(function () {
    function e(t, n) {
      ! function (e, t) {
        if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
      }(this, e), this.initialized = !1, t && (q.a.init(t, n), this.initialized = !0)
    }
    var t, n, i;
    return t = e, (n = [{
      key: "optOut",
      value: function (e) {
        this.initialized && (this.track("OptOutTracking"), q.a.opt_out_tracking(e))
      }
    }, {
      key: "optIn",
      value: function (e) {
        this.initialized && (this.track("OptInTracking"), q.a.opt_in_tracking(e))
      }
    }, {
      key: "track",
      value: function (e, t) {
        this.initialized && q.a.track(e, t)
      }
    }, {
      key: "identify",
      value: function (e) {
        this.initialized && q.a.identify(e)
      }
    }]) && X(t.prototype, n), i && X(t, i), e
  }())("7cecb637d6468a8b61f388bbb82072ee", {
    persistence: "localStorage"
  });

  function K(e, t, n, i, r, o, a) {
    try {
      var s = e[o](a),
        l = s.value
    } catch (e) {
      return void n(e)
    }
    s.done ? t(l) : Promise.resolve(l).then(i, r)
  }
  n.d(t, "Viewer3D", (function () {
    return ee
  })), n.d(t, "waitForCompleteLoad", (function () {
    return te
  }));
  var Q = Autodesk.Viewing;

  function Z(e, t, n, i) {
    var r = Q.getGlobal(),
      o = {
        url: e,
        lmvViewerVersion: r.LMV_VIEWER_VERSION,
        lmvFileExtension: t,
        returnValue: n,
        lmvBuildType: r.LMV_BUILD_TYPE
      };
    if (i) {
      o.isOtg = i.isOtg(), o.geometrySize = i.data.size || 0;
      var a = i.findViewableParent();
      try {
        var s = a && a.urn(),
          l = (s = s && atob(s)) && s.lastIndexOf("."),
          c = l >= 0 && s.substring(l + 1);
        c && (o.seedFileExt = c)
      } catch (e) {}
    }
    Y.track("LoadModel", o)
  }
  var J = 0,
    $ = ["markups-svg", "pushpin-container"];

  function ee(e, t) {
    if (this.setGlobalManager(new G.GlobalManager), e) {
      if (this.clientContainer = e, this.container = this.getDocument().createElement("div"), this.container.classList.add("adsk-viewing-viewer"), this.container.style.height = "100%", this.container.style.width = "100%", this.container.style.overflow = "hidden", this.container.classList.add(Object(r.isTouchDevice)() ? "touch" : "notouch"), this.clientContainer.appendChild(this.container), this.config = t || {}, this.contextMenu = null, this.contextMenuCallbacks = {}, this.started = !1, this.theme = this.config.theme || "dark-theme", this.container.classList.add(this.theme), this.containerLayerOrder = this.config.containerLayerOrder || $, Object(r.isChrome)() && this.container.classList.add("quality-text"), "CANVAS" === this.container.nodeName) throw "Viewer must be initialized on a div [temporary]";
      this.canvasWrap = this.getDocument().createElement("div"), this.canvasWrap.classList.add("canvas-wrap"), this.canvas = this.getDocument().createElement("canvas"), this.canvas.tabIndex = 0, this.canvas.setAttribute("data-viewer-canvas", "true"), this.canvasWrap.appendChild(this.canvas), this.container.appendChild(this.canvasWrap), this.canvas.viewer = this
    }
    var n = {
      prefix: "Autodesk.Viewing.Private.GuiViewer3D.SavedSettings.",
      localStorage: !Object(r.isNodeJS)()
    };
    this.prefs = new l.Preferences(this, n), this.profile = null, this.profileManager = new c.ProfileManager, this._hotkeyManager = new g.HotkeyManager, this.extensionCache = null, this.running = !1, this._pushedTool = "", this._defaultNavigationTool = "", this.id = J++, this.impl = new D.Viewer3DImpl(this.canvas, this), this.overlays = new z.OverlayManager(this.impl), this._loadingSpinner = new F, this._loadingSpinner.setGlobalManager(this.globalManager), this.trackADPTimer = []
  }

  function te(e, t) {
    return new Promise((function (n, i) {
      var r = 0;

      function o(t) {
        2 === r && n({
          viewer: e,
          model: t
        })
      }
      e.addEventListener(E.GEOMETRY_LOADED_EVENT, (function n(a) {
        a.model.getData().loadOptions.bubbleNode === t.bubbleNode && (e.removeEventListener(E.GEOMETRY_LOADED_EVENT, n), r++, t.skipPropertyDb ? o(a.model) : a.model.getProperties(1, (function (e) {
          return o(a.model)
        }), (function (e) {
          return i(e)
        })))
      })), e.addEventListener(E.TEXTURES_LOADED_EVENT, (function n(i) {
        i.model.getData().loadOptions.bubbleNode === t.bubbleNode && (e.removeEventListener(E.TEXTURES_LOADED_EVENT, n), r++, o(i.model))
      }))
    }))
  }
  d.EventDispatcher.prototype.apply(ee.prototype), p.ScreenModeMixin.prototype.apply(ee.prototype), m.ExtensionMixin.prototype.apply(ee.prototype), k.GlobalManagerMixin.call(ee.prototype), ee.prototype.constructor = ee, Object.defineProperty(ee.prototype, "model", {
    get: function () {
      return this.impl.model
    },
    set: function () {
      throw "Do not set viewer.model"
    }
  }), ee.ViewerCount = 0, ee.kDefaultCanvasConfig = {
    click: {
      onObject: ["selectOnly"],
      offObject: ["deselectAll"]
    },
    clickAlt: {
      onObject: ["setCOI"],
      offObject: ["setCOI"]
    },
    clickCtrl: {
      onObject: ["selectToggle"]
    },
    clickShift: {
      onObject: ["selectToggle"]
    },
    disableSpinner: !1,
    disableMouseWheel: !1,
    disableTwoFingerSwipe: !1
  }, ee.createHeadlessViewer = function () {
    var e = new ee;
    return e.impl.initialize(), e.impl.setLightPreset(0), e
  }, ee.prototype.start = function (e, t, n, i, r) {
    if (this.started) return 0;
    this.started = !0;
    var o = this,
      a = o.initialize(r);
    return 0 !== a ? (i && setTimeout((function () {
      i(a)
    }), 1), a) : (setTimeout((function () {
      o.setUp(o.config)
    }), 1), e && this.loadModel(e, t, n, i), 0)
  }, ee.prototype.startWithDocumentNode = function (e, t, n) {
    var i = this;
    return new Promise((function (r, o) {
      if (i.started) return 0;
      i.started = !0;
      var a = i.initialize();
      0 === a ? (setTimeout((function () {
        i.setUp(i.config)
      }), 1), i.loadDocumentNode(e, t, n).then(r).catch(o)) : setTimeout((function () {
        o(a)
      }), 1)
    }))
  }, ee.prototype.registerUniversalHotkeys = function () {
    var e, t, n, i = this;
    e = function () {
      return i.navigation.setRequestFitToView(!0), !0
    }, i._hotkeyManager.pushHotkeys("Autodesk.FitToView", [{
      keycodes: [O.KeyCode.f],
      onPress: e
    }]), e = function () {
      return i.navigation.setRequestHomeView(!0), !0
    }, i._hotkeyManager.pushHotkeys("Autodesk.Home", [{
      keycodes: [O.KeyCode.h],
      onPress: e
    }, {
      keycodes: [O.KeyCode.HOME],
      onPress: e
    }]), t = function () {
      return i.objectContextMenu && i.objectContextMenu.hide() || i.dispatchEvent({
        type: E.ESCAPE_EVENT
      }), !0
    }, i._hotkeyManager.pushHotkeys("Autodesk.Escape", [{
      keycodes: [O.KeyCode.ESCAPE],
      onRelease: t
    }]), e = function () {
      return n = i.getActiveNavigationTool(), i.setActiveNavigationTool("pan")
    }, t = function () {
      return i.setActiveNavigationTool(n)
    };
    var r = [{
      keycodes: [O.KeyCode.SHIFT],
      onPress: e,
      onRelease: t
    }, {
      keycodes: [O.KeyCode.SPACE],
      onPress: e,
      onRelease: t
    }];
    i._hotkeyManager.pushHotkeys("Autodesk.Pan", r, {
      tryUntilSuccess: !0
    })
  }, ee.prototype.createControls = function () {
    var e = this.impl;
    return this.navigation = new v.Navigation(e.camera), this.__initAutoCam(e), this.utilities = new b.ViewingUtilities(e, this.autocam, this.navigation), this.clickHandler = new _.DefaultHandler(e, this.navigation, this.utilities), this.toolController = new y.ToolController(e, this, this.autocam, this.utilities, this.clickHandler), this.toolController.registerTool(new x.GestureHandler(this)), this.toolController.registerTool(this._hotkeyManager), this.toolController.activateTool(this._hotkeyManager.getName()), this.registerUniversalHotkeys(), this.toolController.registerTool(new P.OrbitDollyPanTool(e, this, this.config.navToolsConfig)), this.toolController
  }, ee.prototype.initialize = function (e) {
    this.setScreenModeDelegate(this.config ? this.config.screenModeDelegate : void 0);
    var t = this.getDimensions();
    if (this.canvas.width = t.width, this.canvas.height = t.height, Object(r.isIOSDevice)() && this.getWindow().devicePixelRatio && (this.canvas.width /= this.getWindow().devicePixelRatio, this.canvas.height /= this.getWindow().devicePixelRatio), this.impl.initialize(e), !this.impl.glrenderer()) {
      var n = function () {
        if (Q.getGlobal().WebGLRenderingContext) {
          for (var e = Q.getGlobal().document.createElement("canvas"), t = ["webgl", "experimental-webgl", "moz-webgl", "webkit-3d"], n = !1, i = 0; i < 4; i++) try {
            if ((n = e.getContext(t[i])) && "function" == typeof n.getParameter) return 1
          } catch (e) {}
          return 0
        }
        return -1
      }();
      if (n <= 0) return -1 === n ? h.ErrorCodes.BROWSER_WEBGL_NOT_SUPPORTED : h.ErrorCodes.BROWSER_WEBGL_DISABLED
    }
    var i, o = this;
    Object(r.isIOSDevice)() ? this.onResizeCallback = function (e) {
      clearTimeout(i), i = setTimeout(o.resize.bind(o), 500)
    } : this.onResizeCallback = function (e) {
      var t = o.impl.camera.clientWidth,
        n = o.impl.camera.clientHeight,
        i = o.container.clientWidth,
        r = o.container.clientHeight;
      t === i && n === r || o.resize()
    };
    this.addWindowEventListener("resize", this.onResizeCallback, !1), this.onScrollCallback = function (e) {
      o.impl.canvasBoundingclientRectDirty = !0
    }, this.addWindowEventListener("scroll", this.onScrollCallback), this.initContextMenu(), this.localize(), this.impl.controls = this.createControls(), this.initializePrefListeners(), this.setDefaultNavigationTool("orbit"), this.impl.controls && this.impl.controls.setAutocam(this.autocam);
    var a = this.config && this.config.canvasConfig ? this.config.canvasConfig : ee.kDefaultCanvasConfig;
    return this.setCanvasClickBehavior(a), a.disableSpinner || (this.loadSpinner = this._loadingSpinner.createDom(this.container)), this.viewerState = new T.ViewerState(this), this.config && this.config.hasOwnProperty("startOnInitialize") && !this.config.startOnInitialize || this.run(), this.getWindow().NOP_VIEWER = this, this.addEventListener(E.MODEL_ADDED_EVENT, (function (e) {
      o.onModelAdded(e.model, e.preserveTools)
    })), this.dispatchEvent(E.VIEWER_INITIALIZED), this.trackADPSettingsOptions(), this.trackADPExtensionsLoaded(), ee.ViewerCount++, 0
  }, ee.prototype.setUp = function (e) {
    if (this.config = e || {}, Array.isArray(this.config.extensions))
      for (var t = this.config.extensions, n = 0; n < t.length; ++n) this.loadExtension(t[n], this.config);
    "true" === Object(u.getParameterByName)("lmv_viewer_debug") && this.loadExtension("Autodesk.Debug", this.config);
    var i = this.config.canvasConfig || ee.kDefaultCanvasConfig;
    this.setCanvasClickBehavior(i), this._onAggregatedSelectionChanged = this._onAggregatedSelectionChanged.bind(this), this.addEventListener(E.AGGREGATE_SELECTION_CHANGED_EVENT, this._onAggregatedSelectionChanged)
  }, ee.prototype.tearDown = function () {
    if (this.clearSelection(), this.removeEventListener(E.AGGREGATE_SELECTION_CHANGED_EVENT, this._onAggregatedSelectionChanged), this.loadedExtensions) {
      for (var e in this.loadedExtensions) try {
        this.unloadExtension(e)
      } catch (t) {
        o.logger.error("Failed to unload extension: " + e, t, Object(h.errorCodeString)(h.ErrorCodes.VIEWER_INTERNAL_ERROR)), o.logger.track({
          category: "error_unload_extension",
          extensionId: e,
          error_message: t.message,
          call_stack: t.stack
        })
      }
      this.loadedExtensions = null
    }
    for (this.toolController && (this.toolController.enableMouseButtons(!1), this.toolController.deactivateTool("gestures")), o.logger.reportRuntimeStats(!0), this._loadingSpinner.show(), this.liveReviewClient && (this.liveReviewClient.destroy(), this.liveReviewClient = null); this.trackADPTimer.length > 0;) clearTimeout(this.trackADPTimer.pop());
    this.impl.unloadCurrentModel(), this.impl.setCutPlaneSet("__set_view", void 0)
  }, ee.prototype._onAggregatedSelectionChanged = function () {
    if (this.navigation.getSelectionSetsPivot()) {
      var e = this.impl.selector.getAggregateSelection();
      if (e.length) {
        var t = this.impl.get3DBounds(e);
        this.utilities.setPivotPoint(t.center(), !0, !0), this.utilities.pivotActive(this.navigation.getPivotSetFlag(), !0)
      }
    }
  }, ee.prototype.run = function () {
    this.running || (this.resize(), this.running = !0, this.impl.run())
  }, ee.prototype.localize = function () {
    w.i18n.localize()
  }, ee.prototype.__initAutoCam = function (e) {
    var t = this,
      n = e.camera;
    n.pivot || (n.pivot = new i.Vector3(0, 0, 0)), n.target || (n.target = new i.Vector3(0, 0, 0)), n.worldup || (n.worldup = n.up.clone()), t.autocamCamera = n.clone(), t.autocamCamera.target = n.target.clone(), t.autocamCamera.pivot = n.pivot.clone(), t.autocamCamera.worldup = n.worldup.clone(), t.autocam = new L.Autocam(t.autocamCamera, t.navigation, t.canvas), t.autocam.setGlobalManager(this.globalManager), t.autocam.registerCallbackCameraChanged((function (e) {
      t.autocamCamera.isPerspective !== n.isPerspective && (t.autocamCamera.isPerspective ? t.navigation.toPerspective() : t.navigation.toOrthographic()), t.navigation.setVerticalFov(t.autocamCamera.fov, !1), t.navigation.setView(t.autocamCamera.position, t.autocamCamera.target), t.navigation.setPivotPoint(t.autocamCamera.pivot), t.navigation.setCameraUpVector(t.autocamCamera.up), e && t.navigation.setWorldUpVector(t.autocamCamera.worldup), t.impl.syncCamera(e)
    })), t.autocam.registerCallbackPivotDisplay((function (e) {
      t.utilities ? t.utilities.pivotActive(e, !1) : t.impl.controls.pivotActive(e, !1)
    })), t.autocam.registerCallbackTransitionCompleted((function () {
      t.fireEvent({
        type: E.CAMERA_TRANSITION_COMPLETED
      })
    })), t.addEventListener("cameraChanged", (function (e) {
      var n = e.camera;
      t.autocam.sync(n)
    })), t.autocam.sync(n)
  }, ee.prototype.uninitialize = function () {
    this.removeWindowEventListener("resize", this.onResizeCallback, !1), this.onResizeCallback = null, this.removeWindowEventListener("scroll", this.onScrollCallback), this.onScrollCallback = null, this.canvas ? this.canvas.removeEventListener("mousedown", this.onMouseDown) : this.container && this.container.removeEventListener("mousedown", this.onMouseDown), this.onMouseDown = null, this.canvas ? this.canvas.removeEventListener("mouseup", this.onMouseUp) : this.container && this.container.removeEventListener("mouseup", this.onMouseUp), this.onMouseUp = null, this.canvas.parentNode.removeChild(this.canvas), this.canvas.viewer = null, D.InitParametersSetting.canvas === this.canvas && (D.InitParametersSetting.canvas = null), this.canvas = null, this.canvasWrap = null, this.viewerState = null, o.logger.reportRuntimeStats(), o.logger.track({
      category: "viewer_destroy"
    }, !0), this.toolController && (this.toolController.uninitialize(), this.toolController = null, this.clickHandler = null, this.utilities = null), this.navigation && (this.navigation.uninitialize(), this.navigation = null), this.impl && (this.impl.dtor(), this.impl = null), this.overlays && (this.overlays.dtor(), this.overlays = null), this.loadSpinner = null, this._loadingSpinner.destroy(), this.prefs && this.prefs.clearListeners(), this.prefs = null, this.profile = null, this.profileManager = null, this.autocam.dtor(), this.autocam = null, this.autocamCamera = null, this._hotkeyManager.popHotkeys("Autodesk.FitToView"), this._hotkeyManager.popHotkeys("Autodesk.Home"), this._hotkeyManager.popHotkeys("Autodesk.Escape"), this._hotkeyManager.popHotkeys("Autodesk.Pan"), this._hotkeyManager.popHotkeys("Autodesk.Orbit"), ee.ViewerCount--, 0 === ee.ViewerCount && Object(S.clearPropertyWorkerCache)(), this.onDefaultContextMenu && (this.container.removeEventListener("contextmenu", this.onDefaultContextMenu, !1), this.onDefaultContextMenu = null), this.screenModeDelegate && (this.screenModeDelegate.uninitialize(), this.screenModeDelegate = null), this.extensionCache = null, this.clientContainer = null, this.config = null, this.contextMenu = null, this.contextMenuCallbacks = null, this.container && this.container.parentNode && this.container.parentNode.removeChild(this.container), this.container = null, this.dispatchEvent(E.VIEWER_UNINITIALIZED), this.listeners = {}, Q.getGlobal().NOP_VIEWER === this && (Q.getGlobal().NOP_VIEWER = null), o.logger.log("viewer destroy")
  }, ee.prototype.finish = function () {
    this.tearDown(), this.uninitialize()
  }, ee.prototype.setLoadHeuristics = function (e) {
    var t = e.bubbleNode;
    if (t) {
      var n = t.findViewableParent();
      if (n) {
        var i = n.name();
        e.fileExt = i.slice(i.length - 3).toLowerCase();
        void 0 === e.isAEC && -1 !== ["rvt", "nwd", "nwc", "ifc"].indexOf(e.fileExt) && (e.isAEC = !0)
      }
    }
    if (e.isAEC) {
      if (void 0 === e.useConsolidation) {
        var o = Object(u.getParameterByName)("useConsolidation") || "";
        e.useConsolidation = "true" === o || "false" !== o && void 0
      }
      void 0 === e.useConsolidation && (e.useConsolidation = !Object(r.isMobileDevice)() && !Object(r.isNodeJS)()), void 0 === e.createWireframe && (e.createWireframe = !Object(r.isMobileDevice)()), void 0 === e.disablePrecomputedNodeBoxes && (e.disablePrecomputedNodeBoxes = !0)
    } else void 0 === e.createWireframe && (e.createWireframe = !Object(r.isMobileDevice)() && this.prefs.edgeRendering);
    e.useConsolidation && !e.bvhOptions && (e.bvhOptions = {}, R.Consolidation.applyBVHDefaults(e.bvhOptions))
  }, ee.prototype.trackADPSettingsOptions = function () {
    var e = this;
    this.trackADPTimer.push(setTimeout((function () {
      if (e.prefs) {
        var t = {
          category: "settingOptionsStatus",
          switchSheetColorWhiteToBlack: e.prefs.swapBlackAndWhite,
          leftHandedMouseSetup: e.prefs.leftHandedMouseSetup,
          openPropertiesOnSelect: e.prefs.openPropertiesOnSelect,
          orbitPastWorldPoles: e.prefs.orbitPastWorldPoles,
          reverseMouseZoomDirection: e.prefs.reverseMouseZoomDir,
          fusionStyleOrbit: e.prefs.fusionOrbit,
          setPivotWithLeftMouseButton: e.prefs.clickToSetCOI,
          zoomTowardPivot: e.prefs.zoomTowardsPivot,
          viewCubeActsOnPivot: e.prefs.alwaysUsePivot,
          showViewCube: e.prefs.viewCube,
          environmentImageVisible: e.prefs.envMapBackground,
          displayEdges: e.prefs.edgeRendering,
          displayPoints: e.prefs.pointRendering,
          displayLines: e.prefs.lineRendering,
          ghostHiddenObjects: e.prefs.ghosting,
          groundReflection: e.prefs.groundReflection,
          groundShadow: e.prefs.groundShadow,
          ambientShadows: e.prefs.ambientShadows,
          antiAliasing: e.prefs.antialiasing,
          progressiveModelDisplay: e.prefs.progressiveRendering,
          smoothNavigation: e.prefs.optimizeNavigation
        };
        o.logger.track(t)
      }
    }), 3e4))
  }, ee.prototype.trackADPExtensionsLoaded = function () {
    var e = this,
      t = {
        category: "loaded_extensions"
      };
    this.trackADPTimer.push(setTimeout((function () {
      if (e.loadedExtensions)
        for (var n in e.loadedExtensions) t[n] = n;
      o.logger.track(t)
    }), 3e4))
  }, ee.prototype.activateDefaultNavigationTools = function (e) {
    if (!Object(r.isNodeJS)()) {
      var t = e ? "pan" : "orbit";
      this.setDefaultNavigationTool(t), this.setActiveNavigationTool(t), this.toolController && (this.toolController.enableMouseButtons(!0), this.toolController.activateTool("gestures"))
    }
  }, ee.prototype.registerDimensionSpecificHotkeys = function (e) {
    if (this._hotkeyManager)
      if (e) this._hotkeyManager.popHotkeys("Autodesk.Orbit");
      else {
        var t, n = this,
          i = [{
            keycodes: [O.KeyCode.ALT],
            onPress: function () {
              return t = n.getActiveNavigationTool(), n.setActiveNavigationTool("orbit")
            },
            onRelease: function () {
              return n.setActiveNavigationTool(t)
            }
          }];
        this._hotkeyManager.pushHotkeys("Autodesk.Orbit", i, {
          tryUntilSuccess: !0
        })
      }
  }, ee.prototype.onModelAdded = function (e, t) {
    1 === this.impl.modelQueue().getModels().length && this.initializeFirstModelPresets(e, t)
  }, ee.prototype.initializeFirstModelPresets = function (e, t, n) {
    e.is2d() && this.activateLayerState("Initial"), n || e.getData().loadOptions.preserveView || (this.setActiveNavigationTool(), this.impl.setViewFromFile(e, !0), this.toolController.recordHomeView()), this.registerDimensionSpecificHotkeys(e.is2d()), t || this.activateDefaultNavigationTools(e.is2d()), this.navigation.setIs2D(this.impl.modelQueue().areAll2D());
    var i = e.getData();
    i.isLeaflet ? this.navigation.setConstraints2D(i.bbox, i.maxPixelPerUnit) : this.navigation.setConstraints2D()
  }, ee.prototype.loadModel = function () {
    var e, t = (e = regeneratorRuntime.mark((function e(t, n, i, a, s) {
      var l, c, d, f, p, m, g, v, y, b, _, x;
      return regeneratorRuntime.wrap((function (e) {
        for (;;) switch (e.prev = e.next) {
          case 0:
            if (m = function (e, t, n) {
                l._loadingSpinner.hide(), a && a(e, t, n)
              }, p = function (e, t) {
                if (l.impl._removeLoadingFile(f), e) return l.dispatchEvent({
                  type: E.LOADER_LOAD_ERROR_EVENT,
                  error: e,
                  loader: f
                }), void m(e.code, e.msg, e.args);
                t.getData().underlayRaster = n.underlayRaster && t.getLeaflet(), n.loadAsHidden ? l.impl.modelQueue().addHiddenModel(t) : l.impl.addModel(t), t.loader && t.loader.notifiesFirstPixel ? l.addEventListener(E.RENDER_FIRST_PIXEL, (function () {
                  l._loadingSpinner.hide()
                }), {
                  once: !0
                }) : l._loadingSpinner.hide(), i && i(t)
              }, c = (l = this).impl._reserveLoadingFile(), void 0 === (n = n || {}).skipPropertyDb && (d = Object(u.getParameterByName)("skipPropertyDb") || "", n.skipPropertyDb = "true" === d || "false" !== d && void 0), g = t.toLowerCase().match(/\.([a-z0-9]+)(\?|$)/), v = g ? g[1] : null, !(y = this.config && this.config.loaderExtensions && this.config.loaderExtensions[v] || v in B && B[v]) || this.isExtensionLoaded(y)) {
              e.next = 19;
              break
            }
            return e.prev = 9, e.next = 12, this.loadExtension(y);
          case 12:
            e.next = 19;
            break;
          case 14:
            return e.prev = 14, e.t0 = e.catch(9), l.impl._removeLoadingFile(c), a && a(h.ErrorCodes.VIEWER_INTERNAL_ERROR, e.t0.toString()), e.abrupt("return", !1);
          case 19:
            if (b = n && n.fileLoader ? n.fileLoader : A.FileLoaderManager.getFileLoaderForExtension(v)) {
              e.next = 25;
              break
            }
            return l.impl._removeLoadingFile(c), o.logger.error("File extension not supported:" + v, Object(h.errorCodeString)(h.ErrorCodes.UNSUPORTED_FILE_EXTENSION)), m(h.ErrorCodes.UNSUPORTED_FILE_EXTENSION, "File extension not supported", 0, v), e.abrupt("return", !1);
          case 25:
            return this.setLoadHeuristics(n), this.impl.hasModels() || this._loadingSpinner.show(), f = new b(this.impl, this.config), l.impl._addLoadingFile(c, f), (_ = f.loadFile(t, n, p, s)) || l.impl._removeLoadingFile(f), this.fireEvent({
              type: E.LOADER_LOAD_FILE_EVENT,
              loader: f
            }), n.skipPrefs || (Object(r.isNodeJS)() || this.profile || (x = this.chooseProfile(n), this.setProfile(x)), this.impl.setRenderingPrefsFor2D(!f.is3d())), Z(t, v, _, n.bubbleNode), e.abrupt("return", _);
          case 35:
          case "end":
            return e.stop()
        }
      }), e, this, [
        [9, 14]
      ])
    })), function () {
      var t = this,
        n = arguments;
      return new Promise((function (i, r) {
        var o = e.apply(t, n);

        function a(e) {
          K(o, i, r, a, s, "next", e)
        }

        function s(e) {
          K(o, i, r, a, s, "throw", e)
        }
        a(void 0)
      }))
    });
    return function (e, n, i, r, o) {
      return t.apply(this, arguments)
    }
  }(), ee.prototype.isLoadDone = function () {
    var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {},
      t = e.geometry,
      n = void 0 === t || t,
      i = e.propDb,
      r = void 0 === i || i,
      o = e.textures,
      a = void 0 === o || o,
      s = e.hidden,
      l = void 0 !== s && s,
      c = e.onlyModels,
      u = void 0 === c ? void 0 : c;
    if (!u) {
      if (!this.started) return !0;
      if (this.impl._hasLoadingFile()) return !1
    }
    if (a && Autodesk.Viewing.Private.TextureLoader.requestsInProgress() > 0) return !1;
    n = n || a;
    var h = function (e) {
      return !e || (n ? e.isLoadDone() : e.modelRootLoaded) && (!r || !e.getPropertyDb() || e.getPropertyDb().isLoadDone())
    };
    if (u) return Array.isArray(u) ? u.every(h) : h(u);
    var d = this.impl.modelQueue();
    return d.getModels().every(h) && (!l || d.getHiddenModels().every(h))
  }, ee.prototype.waitForLoadDone = function (e) {
    var t = this;
    return new Promise((function (n, i) {
      var r = e || {},
        o = r.geometry,
        a = void 0 === o || o,
        s = r.propDb,
        l = void 0 === s || s,
        c = r.textures,
        u = void 0 === c || c,
        h = r.hidden,
        d = void 0 !== h && h,
        f = r.onlyModels,
        p = void 0 === f ? void 0 : f,
        m = {
          geometry: a = a || u,
          propDb: l,
          textures: u,
          hidden: d,
          onlyModels: p
        },
        g = function () {
          return t.started && (t.impl._hasLoadingFile() > 0 || t.impl.modelQueue().getModels().length > 0 || t.impl.modelQueue().getHiddenModels().length > 0)
        },
        v = !p && g();
      if (v && t.isLoadDone(m)) n();
      else {
        var y, b = function () {
            (v = v || g()) && t.isLoadDone(m) && (y(), n())
          },
          _ = function (e) {
            y();
            var t = new Error("Error loading model");
            t.loader = e.loader, t.error = e.error, i(t)
          };
        y = function () {
          a && t.removeEventListener(E.GEOMETRY_LOADED_EVENT, b), l && (t.removeEventListener(E.OBJECT_TREE_CREATED_EVENT, b), t.removeEventListener(E.OBJECT_TREE_UNAVAILABLE_EVENT, b)), u && t.removeEventListener(E.TEXTURES_LOADED_EVENT, b), t.removeEventListener(E.LOADER_LOAD_FILE_EVENT, b), t.removeEventListener(E.MODEL_ADDED_EVENT, b), t.removeEventListener(E.MODEL_REMOVED_EVENT, b), t.removeEventListener(E.LOADER_LOAD_ERROR_EVENT, _), t.removeEventListener(E.MODEL_ROOT_LOADED_EVENT, b), t.removeEventListener(E.VIEWER_UNINITIALIZED, n)
        }, a && t.addEventListener(E.GEOMETRY_LOADED_EVENT, b), l && (t.addEventListener(E.OBJECT_TREE_CREATED_EVENT, b), t.addEventListener(E.OBJECT_TREE_UNAVAILABLE_EVENT, b)), u && t.addEventListener(E.TEXTURES_LOADED_EVENT, b), t.addEventListener(E.LOADER_LOAD_FILE_EVENT, b), t.addEventListener(E.MODEL_ADDED_EVENT, b), t.addEventListener(E.MODEL_REMOVED_EVENT, b), t.addEventListener(E.LOADER_LOAD_ERROR_EVENT, _), t.addEventListener(E.MODEL_ROOT_LOADED_EVENT, b, {
          priority: -1e6
        }), t.addEventListener(E.VIEWER_UNINITIALIZED, (function () {
          return i(new Error("Promise reject because viewer finished"))
        }))
      }
    }))
  }, ee.prototype.unloadModel = function (e) {
    e || (e = this.model), this.impl.unloadModel(e)
  }, ee.prototype.loadDocumentNode = function (e, t, n) {
    var i = this,
      r = t,
      o = {},
      a = e.getViewableUrn(r, o),
      s = r.findPropertyDbPath();
    a = e.getFullPath(a);
    var l = {
      sharedPropertyDbPath: s = e.getFullPath(s),
      acmSessionId: e.acmSessionId,
      bubbleNode: r,
      applyRefPoint: !1,
      loadOptions: o,
      page: o.page || 1
    };
    for (var c in n = n || {}, l) n.hasOwnProperty(c) || (n[c] = l[c]);
    if (!n.keepCurrentModels && this.impl.hasModels()) {
      var u = this.config;
      this.tearDown(), this.setUp(u)
    }
    var h = r.findParentGeom2Dor3D().extensions();
    Array.isArray(h) && h.forEach((function (e) {
      i.loadExtension(e, i.config)
    }));
    var d = this,
      f = o.isPdf ? this.loadExtension("Autodesk.PDF", this.config) : Promise.resolve(),
      p = !n.disableUnderlayRaster && o.tempRasterPath ? this._loadTempRasterModel(e, n, r) : Promise.resolve();
    return f.then((function () {
      return p
    })).then((function () {
      return new Promise((function (e, t) {
        d.loadModel(a, n, (function (t) {
          n.loadAsHidden || n.preserveView || "view" !== r.type() || d.setView(r, {
            skipTransition: !0
          }), e(t)
        }), (function (e) {
          t(e)
        }))
      }))
    }))
  }, ee.prototype.unloadDocumentNode = function (e) {
    var t = this.impl.findModel(e, !0);
    if (t) return this.impl.unloadModel(t), !0;
    if (!this.impl.loaders) return !1;
    for (var n = 0; n < this.impl.loaders.length; n++) {
      var i = this.impl.loaders[n];
      if ((i.options && i.options.bubbleNode) === e) return i.dtor(), this.impl.loaders.splice(n, 1), !0
    }
    return !1
  }, ee.prototype._loadTempRasterModel = function (e, t, n) {
    var i = this;
    return new Promise((function (r, o) {
      if (t.loadAsHidden) return r();
      t.underlayRaster = !0, t.loadOptions.fitPaperSize = !0;
      var a = function (e) {
          return e.getDocumentNode().getDocument().getPath() === n.getDocument().getPath() && e.getDocumentNode().guid() === n.guid() && !e.getData().isLeaflet
        },
        s = function e(t) {
          var n = t.model;
          a(n) && (i.initializeFirstModelPresets(n, !1, !0), i.removeEventListener(E.MODEL_ADDED_EVENT, e))
        };
      i.addEventListener(E.MODEL_ADDED_EVENT, s);
      var l, c = function e(t) {
        var n = t.model;
        a(n) && (n.getFragmentList().setObject2DVisible(-1, !0), i.removeEventListener(E.MODEL_REMOVED_EVENT, e), i.removeEventListener(E.MODEL_ADDED_EVENT, s), i.removeEventListener(E.GEOMETRY_LOADED_EVENT, u))
      };
      i.addEventListener(E.MODEL_REMOVED_EVENT, c);
      var u = function e(t) {
        var n = t.model;
        a(n) && (n.getFragmentList().setObject2DVisible(-1, !0), i.removeEventListener(E.MODEL_REMOVED_EVENT, c), l && (i.unloadModel(l), l = null), i.removeEventListener(E.GEOMETRY_LOADED_EVENT, e))
      };
      i.addEventListener(E.GEOMETRY_LOADED_EVENT, u);
      var h = e.getFullPath(t.loadOptions.tempRasterPath);
      i.loadModel(h, t, (function (e) {
        l = e, t.loadOptions.fitPaperSize = void 0, t.underlayRaster = void 0, t.hideBackground = !0, r()
      }), (function () {
        t.loadOptions.fitPaperSize = void 0, t.underlayRaster = void 0, r()
      }))
    }))
  }, ee.prototype.getDimensions = function () {
    if (this.container) {
      var e = {};
      return this.getScreenMode() === p.ScreenMode.kFullScreen ? (e.width = screen.width, e.height = screen.height) : e = this.container.getBoundingClientRect(), {
        width: e.width,
        height: e.height
      }
    }
    return null
  }, ee.prototype.resize = function () {
    this.container.clientWidth > 0 && this.container.clientHeight > 0 && this.impl.resize(this.container.clientWidth, this.container.clientHeight)
  }, ee.prototype.getHotkeyManager = function () {
    return this._hotkeyManager
  }, ee.prototype.getCamera = function () {
    return this.impl.camera
  }, ee.prototype.getState = function (e) {
    return this.viewerState.getState(e)
  }, ee.prototype.restoreState = function (e, t, n) {
    var i = this.viewerState.restoreState(e, t, n);
    return i && this.dispatchEvent({
      type: E.VIEWER_STATE_RESTORED_EVENT,
      value: i
    }), i
  }, ee.prototype.setView = function (e, t) {
    if (!this.model) return !1;
    if (!(e && e instanceof I.BubbleNode)) return !1;
    var n = !!t && t.skipTransition,
      r = !t || t.useExactCamera;
    if (e.getViewBox()) return this.setViewFromViewBox(e.getViewBox(), e.name(), n), this.dispatchEvent({
      type: E.SET_VIEW_EVENT,
      view: e
    }), !0;
    var o = this.getCameraFromViewArray(e.data.camera);
    if (!o) return !1;
    this.impl.setViewFromCamera(o, n, r);
    var a = e.data.sectionPlane,
      s = e.data.sectionBox,
      l = e.data.sectionBoxTransform,
      c = this.model.getData().globalOffset;
    if (a) {
      for (var u = [], h = 0; h < a.length; h += 4) {
        var d = new i.Vector4(a[h + 0], a[h + 1], a[h + 2], a[h + 3]);
        c && (d.w += i.Vector3.prototype.dot.call(c, new i.Vector3(a[h + 0], a[h + 1], a[h + 2]))), u.push(d)
      }
      this.impl.setCutPlaneSet("__set_view", u)
    } else if (s && l) {
      var f = (new i.Matrix4).fromArray([l[0], l[1], l[2], l[3], l[4], l[5], l[6], l[7], l[8], l[9], l[10], l[11], l[12], l[13], l[14], l[15]]);
      if (c) {
        var p = (new i.Matrix4).makeTranslation(-c.x, -c.y, -c.z);
        f.multiply(p)
      }
      var m = new i.Vector3(s[0], s[1], s[2]),
        g = new i.Vector3(s[3], s[4], s[5]),
        v = new i.Box3(m, g);
      v.applyMatrix4(f);
      var y = U.SceneMath.box2CutPlanes(v);
      this.impl.setCutPlaneSet("__set_view", y)
    } else this.impl.setCutPlaneSet("__set_view", void 0);
    return this.dispatchEvent({
      type: E.SET_VIEW_EVENT,
      view: e
    }), !0
  }, ee.prototype.setViewType = function (e) {
    this.model && this.model.is2d() ? o.logger.warn("Viewer3D.setViewType is not applicable to 2D") : this.prefs.set(s.Prefs3D.VIEW_TYPE, e)
  }, ee.prototype.setViewFromArray = function (e) {
    var t = this.getCameraFromViewArray(e);
    this.impl.setViewFromCamera(t, !1, !0)
  }, ee.prototype.getCameraFromViewArray = function (e, t) {
    t = t || this.model;
    var n = this.model && this.model.getData().placementWithOffset;
    return I.BubbleNode.readCameraFromArray(e, n)
  }, ee.prototype.getViewArrayFromCamera = function () {
    var e = this.model ? this.model.getData().globalOffset : {
      x: 0,
      y: 0,
      z: 0
    };
    return this.impl.getViewArrayFromCamera(e)
  }, ee.prototype.setViewFromViewBox = function (e, t, n) {
    var i = this.model;
    if (!i || i.is2d()) {
      if (t && t.length) {
        var r, a = i.getData().metadata.views;
        for (r = 0; r < a.length && a[r].name != t; r++);
        if (r < a.length) {
          var s = a[r].layer_state;
          s && this.activateLayerState(s)
        }
      }
      this.impl.setViewFromViewBox(this.model, e, t, n)
    } else o.logger.warn("Viewer3D.setViewFromViewBox is not applicable to 3D")
  }, ee.prototype.activateLayerState = function (e) {
    this.impl.layers.activateLayerState(e), this.dispatchEvent({
      type: E.LAYER_VISIBILITY_CHANGED_EVENT
    })
  }, ee.prototype.getLayerStates = function () {
    return this.impl.layers.getLayerStates()
  }, ee.prototype.setViewFromFile = function (e) {
    this.setActiveNavigationTool(), this.impl.setViewFromFile(e || this.model)
  }, ee.prototype.getProperties = function (e, t, n) {
    this.model ? this.model.getProperties(e, t, n) : n && n(h.ErrorCodes.BAD_DATA, "Properties failed to load since model does not exist")
  }, ee.prototype.getObjectTree = function (e, t) {
    this.model ? this.model.getObjectTree(e, t) : t && t(h.ErrorCodes.BAD_DATA, "ObjectTree failed to load since model does not exist")
  }, ee.prototype.setCanvasClickBehavior = function (e) {
    if (this.impl.controls.hasOwnProperty("setClickBehavior") && this.impl.controls.setClickBehavior(e), this.clickHandler && this.clickHandler.setClickBehavior(e), e && e.disableMouseWheel && this.toolController.setMouseWheelInputEnabled(!1), e && e.disableTwoFingerSwipe) {
      var t = this.toolController.getTool("gestures");
      t && t.disableTwoFingerSwipe()
    }
  }, ee.prototype.search = function (e, t, n, i) {
    this.searchText = e, this.model ? this.model.search(e, t, n, i) : n && n(h.ErrorCodes.BAD_DATA, "Search failed since model does not exist")
  }, ee.prototype.getHiddenNodes = function (e) {
    return e = e || this.model, this.impl.visibilityManager.getHiddenNodes(e)
  }, ee.prototype.getIsolatedNodes = function (e) {
    return (e = e || this.model) && e.is2d() ? (o.logger.warn("Viewer3D.getIsolatedNodes is not yet implemented for 2D"), []) : this.impl.visibilityManager.getIsolatedNodes(e)
  }, ee.prototype.isolate = function (e, t) {
    if (t = t || this.model) {
      t.getData();
      this.impl.visibilityManager.isolate(e, t)
    }
  }, ee.prototype.setBackgroundColor = function (e, t, n, i, r, o) {
    this.impl.setClearColors(e, t, n, i, r, o)
  }, ee.prototype.setBackgroundOpacity = function (e) {
    this.impl.setClearAlpha(e)
  }, ee.prototype.toggleSelect = function (e, t, n) {
    (t = t || this.model) && t.is2d() ? o.logger.warn("Viewer3D.toggleSelect is not yet implemented for 2D") : this.impl.selector.toggleSelection(e, t, n)
  }, ee.prototype.select = function (e, t, n) {
    "number" == typeof e && (e = [e]), t = t || this.model, this.impl.selector.setSelection(e, t, n)
  }, ee.prototype.clearSelection = function () {
    this.impl.selector.clearSelection()
  }, ee.prototype.getSelectionVisibility = function () {
    return this.impl.selector.getSelectionVisibility()
  }, ee.prototype.getSelectionCount = function () {
    return this.impl.selector.getSelectionLength()
  }, ee.prototype.setSelectionMode = function (e) {
    this.prefs.set(s.Prefs3D.SELECTION_MODE, e)
  }, ee.prototype.getSelection = function () {
    return this.impl.selector.getSelection()
  }, ee.prototype.lockSelection = function (e, t, n) {
    n = n || this.model, this.impl.selector.lockSelection(e, t, n)
  }, ee.prototype.unlockSelection = function (e, t) {
    this.impl.selector.unlockSelection(e, t)
  }, ee.prototype.isSelectionLocked = function (e, t) {
    return this.impl.selector.isNodeSelectionLocked(e, t)
  }, ee.prototype.getAggregateSelection = function (e) {
    var t = this.impl.selector.getAggregateSelection();
    if (e)
      for (var n = 0; n < t.length; n++)
        for (var i = 0; i < t[n].selection.length; i++) e(t[n].model, t[n].selection[i]);
    return t
  }, ee.prototype.getAggregateIsolation = function () {
    return this.impl.visibilityManager.getAggregateIsolatedNodes()
  }, ee.prototype.getAggregateHiddenNodes = function () {
    return this.impl.visibilityManager.getAggregateHiddenNodes()
  }, ee.prototype.hide = function (e, t) {
    t = t || this.model, this.impl.visibilityManager.hide(e, t)
  }, ee.prototype.show = function (e, t) {
    t = t || this.model, this.impl.visibilityManager.show(e, t)
  }, ee.prototype.showAll = function () {
    this.impl.visibilityManager.aggregateIsolate([]), this.impl.layers.showAllLayers(), this.fireEvent({
      type: E.SHOW_ALL_EVENT
    })
  }, ee.prototype.toggleVisibility = function (e, t) {
    this.impl.visibilityManager.toggleVisibility(e, t)
  }, ee.prototype.areAllVisible = function () {
    return this.impl.isWholeModelVisible(this.model)
  }, ee.prototype.isNodeVisible = function (e, t) {
    return t = t || this.model, this.impl.isNodeVisible(e, t)
  }, ee.prototype.lockVisible = function (e, t, n) {
    n = n || this.model, this.impl.visibilityManager.lockNodeVisible(e, t, n)
  }, ee.prototype.toggleLockVisible = function (e, t) {
    this.impl.visibilityManager.toggleVisibleLocked(e, t)
  }, ee.prototype.isVisibleLocked = function (e, t) {
    return this.impl.visibilityManager.isNodeVisibleLocked(e, t)
  }, ee.prototype.explode = function (e) {
    this.model && (this.model.is2d() ? o.logger.warn("Viewer3D.explode is not applicable to 2D") : this.impl.explode(e) && o.logger.track({
      name: "explode_count",
      aggregate: "count"
    }))
  }, ee.prototype.getExplodeScale = function () {
    return this.model && this.model.is2d() ? (o.logger.warn("Viewer3D.getExplodeScale is not applicable to 2D"), 0) : this.impl.getExplodeScale()
  }, ee.prototype.lockExplode = function (e, t, n) {
    return (n = n || this.model) && n.is2d() ? (o.logger.warn("Viewer3D.lockExplode is not applicable to 2D"), 0) : this.impl.lockExplode(e, t, n)
  }, ee.prototype.isExplodeLocked = function (e, t) {
    return (t = t || this.model) && t.is2d() ? (o.logger.warn("Viewer3D.isExplodeLocked is not applicable to 2D"), 0) : this.impl.isExplodeLocked(e, t)
  }, ee.prototype.toggleLockExplode = function (e, t) {
    return (t = t || this.model) && t.is2d() ? (o.logger.warn("Viewer3D.toggleLockExplode is not applicable to 2D"), 0) : this.impl.lockExplode(e, !this.isExplodeLocked(e, t), t)
  }, ee.prototype.setQualityLevel = function (e, t) {
    this.model && this.model.is2d() ? o.logger.warn("Viewer3D.setQualityLevel is not applicable to 2D") : (this.prefs.set(s.Prefs3D.AMBIENT_SHADOWS, e), this.prefs.set(s.Prefs3D.ANTIALIASING, t))
  }, ee.prototype.setGhosting = function (e) {
    this.model && this.model.is2d() ? o.logger.warn("Viewer3D.setGhosting is not applicable to 2D") : this.prefs.set(s.Prefs3D.GHOSTING, e)
  }, ee.prototype.setGroundShadow = function (e) {
    this.model && this.model.is2d() ? o.logger.warn("Viewer3D.setGroundShadow is not applicable to 2D") : this.prefs.set(s.Prefs3D.GROUND_SHADOW, e)
  }, ee.prototype.setGroundReflection = function (e) {
    this.model && this.model.is2d() ? o.logger.warn("Viewer3D.setGroundReflection is not applicable to 2D") : this.prefs.set(s.Prefs3D.GROUND_REFLECTION, e)
  }, ee.prototype.setEnvMapBackground = function (e) {
    this.model && this.model.is2d() ? o.logger.warn("Viewer3D.setEnvMapBackground is not applicable to 2D") : this.prefs.set(s.Prefs3D.ENV_MAP_BACKGROUND, e)
  }, ee.prototype.setFirstPersonToolPopup = function (e) {
    this.model && this.model.is2d() ? o.logger.warn("Viewer3D.setFirstPersonToolPopup is not applicable to 2D") : this.prefs.set(s.Prefs3D.FIRST_PERSON_TOOL_POPUP, e)
  }, ee.prototype.getFirstPersonToolPopup = function () {
    if (!this.model || !this.model.is2d()) return this.prefs.firstPersonToolPopup;
    o.logger.warn("Viewer3D.getFirstPersonToolPopup is not applicable to 2D")
  }, ee.prototype.setBimWalkToolPopup = function (e) {
    this.model && this.model.is2d() ? o.logger.warn("Viewer3D.setBimWalkToolPopup is not applicable to 2D") : this.prefs.set(s.Prefs3D.BIM_WALK_TOOL_POPUP, e)
  }, ee.prototype.getBimWalkToolPopup = function () {
    if (!this.model || !this.model.is2d()) return this.prefs.bimWalkToolPopup;
    o.logger.warn("Viewer3D.getBimWalkToolPopup is not applicable to 2D")
  }, ee.prototype.setProgressiveRendering = function (e) {
    this.prefs.set(s.Prefs.PROGRESSIVE_RENDERING, e)
  }, ee.prototype.setGrayscale = function (e) {
    this.model && this.model.is3d() ? o.logger.warn("Viewer3D.setGrayscale is not applicable to 3D") : this.prefs.set(s.Prefs2D.GRAYSCALE, e)
  }, ee.prototype.setSwapBlackAndWhite = function (e) {
    this.model && this.model.is3d() ? o.logger.warn("Viewer3D.setSwapBlackAndWhite is not applicable to 3D") : this.prefs.set(s.Prefs2D.SWAP_BLACK_AND_WHITE, e)
  }, ee.prototype.setOptimizeNavigation = function (e) {
    this.model && this.model.is2d() ? o.logger.warn("Viewer3D.setOptimizeNaviation is not applicable to 2D") : this.prefs.set(s.Prefs3D.OPTIMIZE_NAVIGATION, e)
  }, ee.prototype.initializePrefListeners = function () {
    var e = this;
    this.prefs.addListeners(s.Prefs3D.ANTIALIASING, (function (t) {
      var n = e.prefs.get(s.Prefs3D.AMBIENT_SHADOWS);
      e.impl.togglePostProcess(n, t)
    })), this.prefs.addListeners(s.Prefs3D.AMBIENT_SHADOWS, (function (t) {
      var n = e.prefs.get(s.Prefs3D.ANTIALIASING);
      e.impl.togglePostProcess(t, n)
    })), this.prefs.addListeners(s.Prefs3D.GROUND_SHADOW, (function (t) {
      e.impl.toggleGroundShadow(t)
    })), this.prefs.addListeners(s.Prefs3D.GROUND_REFLECTION, (function (t) {
      e.impl.toggleGroundReflection(t)
    })), this.prefs.addListeners(s.Prefs3D.ENV_MAP_BACKGROUND, (function (t) {
      e.impl.toggleEnvMapBackground(t)
    })), this.prefs.addListeners(s.Prefs.PROGRESSIVE_RENDERING, (function (t) {
      e.impl.toggleProgressive(t)
    })), this.prefs.addListeners(s.Prefs3D.VIEW_TYPE, (function (t) {
      var n = e.prefs.get(s.Prefs3D.VIEW_TYPE),
        i = e.impl.getModelCamera(e.model);
      if (i) {
        var r = i.isPerspective;
        if (!isNaN(r)) {
          var o = r ? s.VIEW_TYPES.PERSPECTIVE : s.VIEW_TYPES.ORTHOGRAPHIC;
          e.prefs.setDefault(s.Prefs3D.VIEW_TYPE, o), n === s.VIEW_TYPES.DEFAULT && (e.prefs[s.Prefs3D.VIEW_TYPE] = o)
        }
      }
      e.autocam.setViewType(t)
    })), this.prefs.addListeners(s.Prefs2D.GRAYSCALE, (function (t) {
      e.impl.toggleGrayscale(t)
    })), this.prefs.addListeners(s.Prefs2D.SWAP_BLACK_AND_WHITE, (function (t) {
      e.impl.toggleSwapBlackAndWhite(t)
    })), this.prefs.addListeners(s.Prefs3D.OPTIMIZE_NAVIGATION, (function (t) {
      e.impl.setOptimizeNavigation(t)
    })), this.prefs.addListeners(s.Prefs3D.GHOSTING, (function (t) {
      e.impl.toggleGhosting(t)
    })), this.prefs.addListeners(s.Prefs3D.LINE_RENDERING, (function (t) {
      e.impl.hideLines(!t)
    })), this.prefs.addListeners(s.Prefs.POINT_RENDERING, (function (t) {
      e.impl.hidePoints(!t)
    })), this.prefs.addListeners(s.Prefs3D.EDGE_RENDERING, (function (t) {
      e.impl.setDisplayEdges(t)
    })), this.prefs.addListeners(s.Prefs3D.LIGHT_PRESET, (function (t) {
      if ("string" == typeof t) {
        for (var n = t, i = -1, r = 0; r < H.LightPresets.length; r++)
          if (H.LightPresets[r].name === n) {
            i = r;
            break
          } if (!(i >= 0)) return void o.logger.warn("Invalid Prefs3D.LIGHT_PRESET: " + t);
        t = i
      }
      e.impl.setLightPreset(t)
    })), this.prefs.addListeners(s.Prefs3D.ALWAYS_USE_PIVOT, (function (t) {
      e.navigation.setUsePivotAlways(t)
    })), this.prefs.addListeners(s.Prefs.REVERSE_MOUSE_ZOOM_DIR, (function (t) {
      e.navigation.setReverseZoomDirection(t)
    })), this.prefs.addListeners(s.Prefs3D.REVERSE_HORIZONTAL_LOOK_DIRECTION, (function (t) {
      e.navigation.setReverseHorizontalLookDirection(t)
    })), this.prefs.addListeners(s.Prefs3D.REVERSE_VERTICAL_LOOK_DIRECTION, (function (t) {
      e.navigation.setReverseVerticalLookDirection(t)
    })), this.prefs.addListeners(s.Prefs3D.ZOOM_TOWARDS_PIVOT, (function (t) {
      e.navigation.setZoomTowardsPivot(t)
    })), this.prefs.addListeners(s.Prefs3D.SELECTION_SETS_PIVOT, (function (t) {
      e.navigation.setSelectionSetsPivot(t)
    })), this.prefs.addListeners(s.Prefs3D.ORBIT_PAST_WORLD_POLES, (function (t) {
      e.navigation.setOrbitPastWorldPoles(t)
    })), this.prefs.addListeners(s.Prefs.LEFT_HANDED_MOUSE_SETUP, (function (t) {
      e.navigation.setUseLeftHandedInput(t), f.EventUtils.setUseLeftHandedInput(t)
    })), this.prefs.addListeners(s.Prefs.WHEEL_SETS_PIVOT, (function (t) {
      e.navigation.setWheelSetsPivot(t)
    })), this.prefs.addListeners(s.Prefs3D.SELECTION_MODE, (function (t) {
      e.impl.selector.setSelectionMode(t)
    })), this.prefs.addListeners(s.Prefs.BACKGROUND_COLOR_PRESET, (function (t) {
      if (t) try {
        var n = JSON.parse(t);
        e.impl.setClearColors(n[0], n[1], n[2], n[3], n[4], n[5])
      } catch (e) {
        o.logger.warn("Invalid Prefs.BACKGROUND_COLOR_PRESET: " + n)
      }
    })), this.prefs.addListeners(s.Prefs3D.EXPLODE_STRATEGY, (function (t) {
      W.a.setStrategy(t) && e.impl.refreshExplode()
    })), this.prefs.addListeners(s.Prefs2D.LOADING_ANIMATION, (function (t) {
      e.impl.onLoadingAnimationChanged(t)
    }))
  }, ee.prototype.setNavigationLock = function (e) {
    this.navigation.getIsLocked() !== e && (this.navigation.setIsLocked(e), this.dispatchEvent({
      type: E.NAVIGATION_MODE_CHANGED_EVENT,
      id: this.getActiveNavigationTool()
    }))
  }, ee.prototype.getNavigationLock = function () {
    return this.navigation.getIsLocked()
  }, ee.prototype.setNavigationLockSettings = function (e) {
    this.navigation.setLockSettings(e), this.dispatchEvent({
      type: E.NAVIGATION_MODE_CHANGED_EVENT,
      id: this.getActiveNavigationTool()
    })
  }, ee.prototype.getNavigationLockSettings = function () {
    return this.navigation.getLockSettings()
  }, ee.prototype.setActiveNavigationTool = function (e) {
    if (e === this._pushedTool || !e && !this._pushedTool) return !0;
    if (this._pushedTool) {
      if (!this.impl.controls.deactivateTool(this._pushedTool)) return !1;
      this.impl.controls.setToolActiveName(this.getDefaultNavigationToolName()), this._pushedTool = null
    }
    return (!e || e === this.getDefaultNavigationToolName()) && null === this._pushedTool ? (this.dispatchEvent({
      type: E.NAVIGATION_MODE_CHANGED_EVENT,
      id: this.getDefaultNavigationToolName()
    }), !0) : !!this.impl.controls.activateTool(e) && (this._pushedTool = e, this.dispatchEvent({
      type: E.NAVIGATION_MODE_CHANGED_EVENT,
      id: this._pushedTool
    }), !0)
  }, ee.prototype.getActiveNavigationTool = function () {
    return this._pushedTool ? this._pushedTool : this._defaultNavigationTool
  }, ee.prototype.setDefaultNavigationTool = function (e) {
    this._defaultNavigationTool && this.impl.controls.deactivateTool(this._defaultNavigationTool);
    var t = this._pushedTool;
    this._pushedTool = null, t && this.impl.controls.deactivateTool(t), this.impl.controls.activateTool(e), this._defaultNavigationTool = e, t && (this.impl.controls.activateTool(t), this._pushedTool = t)
  }, ee.prototype.getDefaultNavigationToolName = function () {
    return this._defaultNavigationTool
  }, ee.prototype.getFOV = function () {
    return this.navigation.getVerticalFov()
  }, ee.prototype.setFOV = function (e) {
    this.navigation.setVerticalFov(e, !0)
  }, ee.prototype.getFocalLength = function () {
    return this.navigation.getFocalLength()
  }, ee.prototype.setFocalLength = function (e) {
    this.navigation.setFocalLength(e, !0)
  }, ee.prototype.hideLines = function (e) {
    this.model && this.model.is2d() ? o.logger.warn("Viewer3D.hideLines is not applicable to 2D") : this.prefs.set(s.Prefs3D.LINE_RENDERING, !e)
  }, ee.prototype.hidePoints = function (e) {
    this.prefs.set(s.Prefs.POINT_RENDERING, !e)
  }, ee.prototype.setDisplayEdges = function (e) {
    this.model && this.model.is2d() ? o.logger.warn("Viewer3D.setDisplayEdges is not applicable to 2D") : this.prefs.set(s.Prefs3D.EDGE_RENDERING, e)
  }, ee.prototype.applyCamera = function (e, t) {
    this.impl.setViewFromCamera(e, !0), t && this.fitToView()
  }, ee.prototype.fitToView = function (e, t, n) {
    var i = [];
    e && (e.length > 0 && e[0].model ? i = e : e.length > 0 && i.push({
      model: t || this.model,
      selection: e
    })), this.impl.fitToView(i, n)
  }, ee.prototype.setClickConfig = function (e, t, n) {
    var i = this.clickHandler ? this.clickHandler.getClickBehavior() : this.impl.controls.getClickBehavior();
    if (e in i) {
      var r = i[e];
      if (t in r) return r[t] = n, !0
    }
    return !1
  }, ee.prototype.getClickConfig = function (e, t) {
    var n = this.clickHandler ? this.clickHandler.getClickBehavior() : this.impl.controls.getClickBehavior();
    if (e in n) {
      var i = n[e];
      if (t in i) return i[t]
    }
    return null
  }, ee.prototype.setClickToSetCOI = function (e, t) {
    !1 !== t && this.prefs.set(s.Prefs3D.CLICK_TO_SET_COI, e);
    var n = this.getClickConfig("click", "onObject");
    e ? -1 === n.indexOf("setCOI") && this.setClickConfig("click", "onObject", ["setCOI"]) : n.indexOf("setCOI") >= 0 && this.setClickConfig("click", "onObject", ["selectOnly"])
  }, ee.prototype.setProfile = function (e) {
    var t = this;
    if (!e) return !1;
    this.profile = e, this.profile.apply(this.prefs);
    var n = this.profile.extensions && this.profile.extensions.unload || [],
      i = this.profile.extensions && this.profile.extensions.load || [];
    n.forEach((function (e) {
      t.isExtensionLoaded(e) && t.unloadExtension(e)
    })), i.forEach((function (e) {
      t.isExtensionLoaded(e) || t.loadExtension(e, t.config)
    })), this.dispatchEvent({
      type: Autodesk.Viewing.PROFILE_CHANGE_EVENT,
      profile: e
    })
  }, ee.prototype.initSettings = function (e) {
    if (!this.profile) {
      var t = new a.Profile(e);
      this.setProfile(t)
    }
  }, ee.prototype.setLightPreset = function (e) {
    this.model && this.model.is2d() ? o.logger.warn("Viewer3D.setLightPreset is not applicable to 2D") : this.prefs.set(s.Prefs3D.LIGHT_PRESET, e)
  }, ee.prototype.setUsePivotAlways = function (e) {
    this.model && this.model.is2d() ? o.logger.warn("Viewer3D.setUsePivotAlways is not applicable to 2D") : this.prefs.set(s.Prefs3D.ALWAYS_USE_PIVOT, e)
  }, ee.prototype.setReverseZoomDirection = function (e) {
    this.prefs.set(s.Prefs.REVERSE_MOUSE_ZOOM_DIR, e)
  }, ee.prototype.setReverseHorizontalLookDirection = function (e) {
    this.model && this.model.is2d() ? o.logger.warn("Viewer3D.setReverseHorizontalLookDirection is not applicable to 2D") : this.prefs.set(s.Prefs3D.REVERSE_HORIZONTAL_LOOK_DIRECTION, e)
  }, ee.prototype.setReverseVerticalLookDirection = function (e) {
    this.model && this.model.is2d() ? o.logger.warn("Viewer3D.setReverseVerticalLookDirection is not applicable to 2D") : this.prefs.set(s.Prefs3D.REVERSE_VERTICAL_LOOK_DIRECTION, e)
  }, ee.prototype.setZoomTowardsPivot = function (e) {
    this.model && this.model.is2d() ? o.logger.warn("Viewer3D.setZoomTowardsPivot is not applicable to 2D") : this.prefs.set(s.Prefs3D.ZOOM_TOWARDS_PIVOT, e)
  }, ee.prototype.setOrbitPastWorldPoles = function (e) {
    this.model && this.model.is2d() ? o.logger.warn("Viewer3D.setOrbitPastWorldPoles is not applicable to 2D") : this.prefs.set(s.Prefs3D.ORBIT_PAST_WORLD_POLES, e)
  }, ee.prototype.setUseLeftHandedInput = function (e) {
    this.prefs.set(s.Prefs.LEFT_HANDED_MOUSE_SETUP, e)
  }, ee.prototype.setLayerVisible = function (e, t, n) {
    var i = this.impl.layers;
    null === e ? t ? i.showAllLayers() : i.hideAllLayers() : (Array.isArray(e) || (e = [e]), n && i.hideAllLayers(), this.impl.setLayerVisible(e, t)), this.dispatchEvent({
      type: E.LAYER_VISIBILITY_CHANGED_EVENT
    })
  }, ee.prototype.isLayerVisible = function (e) {
    return !!(e && e.isLayer && this.impl.isLayerVisible(e))
  }, ee.prototype.anyLayerHidden = function () {
    for (var e = this.impl.getLayersRoot(), t = e && e.children, n = t ? t.length : 0, i = 0; i < n; ++i)
      if (!this.impl.layers.isLayerVisible(t[i])) return !0;
    return !1
  }, ee.prototype.allLayersHidden = function () {
    for (var e = this.impl.getLayersRoot(), t = e && e.children, n = t ? t.length : 0, i = 0; i < n; ++i)
      if (this.impl.layers.isLayerVisible(t[i])) return !1;
    return !0
  }, ee.prototype.setGroundShadowColor = function (e) {
    this.model && this.model.is2d() ? o.logger.warn("Viewer3D.setGroundShadowColor is not applicable to 2D") : this.impl.setGroundShadowColor(e)
  }, ee.prototype.setGroundShadowAlpha = function (e) {
    this.model && this.model.is2d() ? o.logger.warn("Viewer3D.setGroundShadowAlpha is not applicable to 2D") : this.impl.setGroundShadowAlpha(e)
  }, ee.prototype.setGroundReflectionColor = function (e) {
    this.model && this.model.is2d() ? o.logger.warn("Viewer3D.setGroundReflectionColor is not applicable to 2D") : this.impl.setGroundReflectionColor(e)
  }, ee.prototype.setGroundReflectionAlpha = function (e) {
    this.model && this.model.is2d() ? o.logger.warn("Viewer3D.setGroundReflectionAlpha is not applicable to 2D") : this.impl.setGroundReflectionAlpha(e)
  }, ee.prototype.getCutPlanes = function () {
    return this.model && this.model.is2d() ? (o.logger.warn("Viewer3D.getCutPlanes is not applicable to 2D"), []) : this.impl.getCutPlanes()
  }, ee.prototype.setCutPlanes = function (e) {
    this.model && this.model.is2d() ? o.logger.warn("Viewer3D.getCutPlanes is not applicable to 2D") : this.impl.setCutPlaneSet("__set_view", e)
  }, ee.prototype.getScreenShot = function (e, t, n, i) {
    return V.ScreenShot.getScreenShotLegacy(this, e, t, n, i)
  }, ee.prototype.setContextMenu = function (e) {
    this.contextMenu && this.contextMenu.hide(), this.contextMenu = e || null
  }, ee.prototype.setDefaultContextMenu = function () {
    var e = Autodesk.Viewing.Extensions;
    return !(!e || !e.ViewerObjectContextMenu) && (this.setContextMenu(new e.ViewerObjectContextMenu(this)), !0)
  }, ee.prototype.triggerContextMenu = function (e) {
    return this.config && this.config.onTriggerContextMenuCallback && this.config.onTriggerContextMenuCallback(e), !!this.contextMenu && (this.contextMenu.show(e), !0)
  }, ee.prototype.triggerSelectionChanged = function (e) {
    this.config && this.config.onTriggerSelectionChangedCallback && this.config.onTriggerSelectionChangedCallback(e)
  }, ee.prototype.triggerDoubleTapCallback = function (e) {
    this.config && this.config.onTriggerDoubleTapCallback && this.config.onTriggerDoubleTapCallback(e)
  }, ee.prototype.triggerSingleTapCallback = function (e) {
    this.config && this.config.onTriggerSingleTapCallback && this.config.onTriggerSingleTapCallback(e)
  }, ee.prototype.triggerSwipeCallback = function (e) {
    this.config && this.config.onTriggerSwipeCallback && this.config.onTriggerSwipeCallback(e)
  }, ee.prototype.initContextMenu = function () {
    (!this.config || !this.config.hasOwnProperty("disableBrowserContextMenu") || this.config.disableBrowserContextMenu) && (this.onDefaultContextMenu = function (e) {
      e.preventDefault()
    }, this.container.addEventListener("contextmenu", this.onDefaultContextMenu, !1));
    var e = this,
      t = this.canvas || this.container;
    this.onMouseDown = function (t) {
      f.EventUtils.isRightClick(t) && (e.startX = t.clientX, e.startY = t.clientY)
    }, t.addEventListener("mousedown", this.onMouseDown), this.onMouseUp = function (t) {
      return f.EventUtils.isRightClick(t) && t.clientX === e.startX && t.clientY === e.startY && e.triggerContextMenu(t), !0
    }, t.addEventListener("mouseup", this.onMouseUp, !1)
  }, ee.prototype.registerContextMenuCallback = function (e, t) {
    this.contextMenuCallbacks[e] = t
  }, ee.prototype.unregisterContextMenuCallback = function (e) {
    return e in this.contextMenuCallbacks && (delete this.contextMenuCallbacks[e], !0)
  }, ee.prototype.runContextMenuCallbacks = function (e, t) {
    for (var n in this.contextMenuCallbacks) this.contextMenuCallbacks.hasOwnProperty(n) && this.contextMenuCallbacks[n](e, t)
  }, ee.prototype.joinLiveReview = function (e) {
    var t = this;
    this.liveReviewClient || (this.liveReviewClient = new C.LiveReviewClient(this)), M.theResourceLoader.loadScript("socket.io-1.3.5.js", "lmv_io").then((function () {
      t.liveReviewClient.joinLiveReviewSession(e)
    }))
  }, ee.prototype.leaveLiveReview = function () {
    this.liveReviewClient && this.liveReviewClient.leaveLiveReviewSession()
  }, ee.prototype.setModelUnits = function (e) {
    this.model && (this.model.getData().overriddenUnits = e)
  }, ee.prototype.worldToClient = function (e) {
    var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : this.impl.camera;
    return this.impl.worldToClient(e, t)
  }, ee.prototype.clientToWorld = function (e, t, n) {
    return this.impl.clientToWorld(e, t, n)
  }, ee.prototype.modelHasTopology = function () {
    return !(!this.model || !this.model.hasTopology())
  }, ee.prototype.setSelectionColor = function (e, t) {
    this.impl.setSelectionColor(e, t)
  }, ee.prototype.set2dSelectionColor = function (e, t) {
    this.impl.set2dSelectionColor(e, t)
  }, ee.prototype.setTheme = function (e) {
    for (var t = this.container.classList, n = 0; n < t.length; ++n) {
      -1 !== t[n].indexOf("-theme") && t.remove(t[n--])
    }
    t.add(e)
  }, ee.prototype.setThemingColor = function (e, t, n, i) {
    (n = n || this.model).setThemingColor(e, t, i), this.impl.invalidate(!0)
  }, ee.prototype.clearThemingColors = function (e) {
    (e = e || this.model).clearThemingColors(), this.impl.invalidate(!0)
  }, ee.prototype.transferModel = function (e, t) {
    var n = this.impl.findModel(e);
    if (n) {
      var i = [];
      this.getAggregateSelection((function (t, n) {
        t.id == e && i.push(n)
      }));
      var r = this.impl.visibilityManager.getIsolatedNodes(n),
        o = this.impl.visibilityManager.getHiddenNodes(n),
        a = this.impl.matman().exportModelMaterials(n),
        s = n.loader;
      n.loader = null, this.impl.unloadModel(n), n.loader = s, n.isAEC() && n.is3d() && t.impl.setLightPresetForAec(), t.impl.setRenderingPrefsFor2D(n.is2d()), t.impl.addModel(n), t.impl.matman().importModelMaterials(a, e), t._loadingSpinner.hide(), n.loader && n.loader.viewer3DImpl === this.impl && (n.loader.viewer3DImpl = t.impl), n.getData().loadDone && t.impl.onLoadComplete(n), t.impl.selector.setSelection(i, n), 0 != r.length ? t.impl.visibilityManager.isolate(r, n) : 0 != o.length && t.impl.visibilityManager.hide(o, n)
    }
  }, ee.prototype.hideModel = function (e) {
    var t = this.impl.modelQueue();
    return !!(e = "number" == typeof e ? t.findModel(e) : e) && (this.impl.removeModel(e), t.addHiddenModel(e), !0)
  }, ee.prototype.showModel = function (e, t) {
    var n = this.impl.modelQueue();
    return !!(e = "number" == typeof e ? n.findHiddenModel(e) : e) && (n.removeHiddenModel(e), this.impl.addModel(e, t), !0)
  }, ee.prototype.getVisibleModels = function () {
    return this.impl.modelQueue().getModels().slice()
  }, ee.prototype.getHiddenModels = function () {
    return this.impl.modelQueue().getHiddenModels().slice()
  }, ee.prototype.restoreDefaultSettings = function () {
    var e = this.model,
      t = e.is2d() ? "2d" : "3d";
    this.prefs.reset(t), this.impl.setupLighting(e), e.isAEC() && e.is3d() && this.impl.setLightPresetForAec(), this.impl.setRenderingPrefsFor2D(!e.is3d()), this.fireEvent({
      type: E.RESTORE_DEFAULT_SETTINGS_EVENT
    })
  }, ee.prototype.disableHighlight = function (e) {
    this.impl.disableHighlight(e)
  }, ee.prototype.disableSelection = function (e) {
    e && this.clearSelection(), this.impl.disableSelection(e)
  }, ee.prototype.isHighlightDisabled = function () {
    return this.impl.selector.highlightDisabled
  }, ee.prototype.isHighlightPaused = function () {
    return this.impl.selector.highlightPaused
  }, ee.prototype.isHighlightActive = function () {
    return !(this.impl.selector.highlightDisabled || this.impl.selector.highlightPaused)
  }, ee.prototype.isSelectionDisabled = function () {
    return this.impl.selector.selectionDisabled
  }, ee.prototype.activateExtension = function (e, t) {
    return this.loadedExtensions && e in this.loadedExtensions ? this.loadedExtensions[e].activate(t) : (o.logger.warn("Extension is not loaded or doesn't exist"), !1)
  }, ee.prototype.deactivateExtension = function (e) {
    return this.loadedExtensions && e in this.loadedExtensions ? this.loadedExtensions[e].deactivate() : (o.logger.warn("Extension is not loaded or doesn't exist"), !1)
  }, ee.prototype.isExtensionActive = function (e, t) {
    return this.loadedExtensions && e in this.loadedExtensions ? this.loadedExtensions[e].isActive(t) : (o.logger.warn("Extension is not loaded or doesn't exist"), !1)
  }, ee.prototype.isExtensionLoaded = function (e) {
    return this.loadedExtensions && e in this.loadedExtensions
  }, ee.prototype.getLoadedExtensions = function () {
    return this.loadedExtensions || []
  }, ee.prototype.getExtensionModes = function (e) {
    return this.loadedExtensions && e in this.loadedExtensions ? this.loadedExtensions[e].getModes() : (console.warn("Extension is not loaded or doesn't exist"), [])
  }, ee.prototype.reorderElements = function (e) {
    var t = e.getAttribute("layer-order-id"),
      n = this.containerLayerOrder.indexOf(t),
      i = null;
    if (-1 !== n)
      for (var r = n + 1; r < this.containerLayerOrder.length && !i; r++) i = this.container.querySelector('[layer-order-id="' + this.containerLayerOrder[r] + '"]');
    i ? this.container.insertBefore(e, i) : this.container.appendChild(e)
  }, ee.prototype.appendOrderedElementToViewer = function (e) {
    var t = this.container.querySelector('[layer-order-id="' + e + '"]');
    if (t) return t;
    var n = this.getDocument().createElement("div");
    return n.setAttribute("layer-order-id", e), this.reorderElements(n), n
  }, ee.prototype.hitTest = function (e, t, n) {
    return this.impl.hitTest(e, t, n)
  }, ee.prototype.refresh = function (e) {
    this.impl.invalidate(e, !1, !e)
  }, ee.prototype.chooseProfile = function (e) {
    var t = this.profileManager.PROFILE_DEFAULT;
    return this.config && this.config.profileSettings ? t = new a.Profile(this.config.profileSettings) : e && e.useFileProfile ? t = this.profileManager.getProfileOrDefault(e.fileExt) : e.isAEC && (t = this.profileManager.PROFILE_AEC), t
  }
}, function (e, t, n) {
  var i = n(32).f,
    r = n(40),
    o = n(25)("toStringTag");
  e.exports = function (e, t, n) {
    e && !r(e = n ? e : e.prototype, o) && i(e, o, {
      configurable: !0,
      value: t
    })
  }
}, function (e, t, n) {
  var i = n(25),
    r = n(85),
    o = n(32),
    a = i("unscopables"),
    s = Array.prototype;
  null == s[a] && o.f(s, a, {
    configurable: !0,
    value: r(null)
  }), e.exports = function (e) {
    s[a][e] = !0
  }
}, function (e, t, n) {
  var i = n(15),
    r = n(167);
  e.exports = i ? r : function (e) {
    return Map.prototype.entries.call(e)
  }
}, function (e, t, n) {
  "use strict";
  n.r(t), n.d(t, "token", (function () {
    return f
  })), n.d(t, "getWebGLHelpLink", (function () {
    return m
  })), n.d(t, "EnvironmentConfigurations", (function () {
    return _
  })), n.d(t, "initializeEnvironmentVariable", (function () {
    return x
  })), n.d(t, "initializeResourceRoot", (function () {
    return w
  })), n.d(t, "initializeServiceEndPoints", (function () {
    return E
  })), n.d(t, "refreshCookie", (function () {
    return A
  })), n.d(t, "refreshRequestHeader", (function () {
    return S
  })), n.d(t, "refreshToken", (function () {
    return M
  })), n.d(t, "initializeAuth", (function () {
    return T
  })), n.d(t, "initializeLogger", (function () {
    return C
  })), n.d(t, "Initializer", (function () {
    return L
  })), n.d(t, "shutdown", (function () {
    return D
  }));
  var i = n(16),
    r = (n(141), n(1)),
    o = n(6),
    a = n(3),
    s = n(47),
    l = n(18),
    c = n(124),
    u = (n(65), Object(a.getGlobal)()),
    h = u,
    d = {
      accessToken: null,
      getAccessToken: null,
      tokenRefreshInterval: null
    },
    f = d,
    p = null;

  function m() {
    return p
  }
  var g = {
      local: {
        RTC: ["https://rtc-dev.api.autodesk.com:443", "https://lmv.autodesk.com:443"]
      },
      dev: {
        RTC: ["https://rtc-dev.api.autodesk.com:443", "https://lmv.autodesk.com:443"]
      },
      stg: {
        RTC: ["https://rtc-stg.api.autodesk.com:443", "https://lmv.autodesk.com:443"]
      },
      prod: {
        RTC: ["https://rtc.api.autodesk.com:443", "https://lmv.autodesk.com:443"]
      }
    },
    v = "";
  if (Object(a.getGlobal)().location) {
    var y = Object(a.getGlobal)().location;
    v = y.protocol + "//" + y.host
  }
  var b = {
      local: "",
      dev: "https://developer-dev.api.autodesk.com",
      stg: "https://developer-stg.api.autodesk.com",
      prod: "https://developer.api.autodesk.com"
    },
    _ = {
      Local: {
        ROOT: "",
        LMV: g.local
      },
      Development: {
        ROOT: b.dev,
        LMV: g.dev,
        bubbleManifest: !0
      },
      Staging: {
        ROOT: b.stg,
        LMV: g.stg,
        bubbleManifest: !0
      },
      Production: {
        ROOT: b.prod,
        LMV: g.prod,
        bubbleManifest: !0
      },
      AutodeskDevelopment: {
        ROOT: b.dev,
        LMV: g.dev
      },
      AutodeskStaging: {
        ROOT: b.stg,
        LMV: g.stg
      },
      AutodeskProduction: {
        ROOT: b.prod,
        LMV: g.prod
      },
      FluentLocal: {
        ROOT: v,
        LMV: v
      },
      FluentDev: {
        ROOT: "https://us.otgs-dev.autodesk.com",
        LMV: g.dev
      },
      FluentStaging: {
        ROOT: "https://us.otgs-stg.autodesk.com",
        LMV: g.stg
      },
      FluentProduction: {
        ROOT: "https://us.otgs.autodesk.com",
        LMV: g.prod
      },
      FluentStagingEU: {
        ROOT: "https://eu.otgs-stg.autodesk.com",
        LMV: g.stg
      },
      FluentProductionEU: {
        ROOT: "https://eu.otgs.autodesk.com",
        LMV: g.prod
      }
    };

  function x(e) {
    var t;
    if (e && e.env && (t = e.env), t || (t = Object(i.getParameterByName)("env")), Object(o.setOfflineResourcePrefix)(e && e.offlineResourcePrefix || ""), Object(o.setOffline)(e && "true" === e.offline), !t) switch (h.location.hostname) {
      case "developer-dev.api.autodesk.com":
        t = "AutodeskDevelopment";
        break;
      case "developer-stg.api.autodesk.com":
        t = "AutodeskStaging";
        break;
      case "developer.api.autodesk.com":
        t = "AutodeskProduction";
        break;
      case "localhost.autodesk.com":
      case "":
      case "127.0.0.1":
        t = "Local";
        break;
      default:
        t = "AutodeskProduction"
    }
    Object(o.setEnv)(t), "undefined" != typeof window && r.logger.info("Host name : " + window.location.hostname), r.logger.info("Environment initialized as : " + t)
  }

  function w(e) {
    var t, n, r = ["viewer3D.js", "viewer3D.min.js", "viewerCE.js", "viewerCE.min.js"];
    e && e.hasOwnProperty("libraryName") && r.push(e.libraryName);
    for (var o = !1, a = 0; a < r.length; a++) {
      var s = Object(i.getScript)(r[a]),
        l = (n = s ? s.src : "").indexOf(r[a]);
      if (l >= 0) {
        t = n.substr(0, l), (n.indexOf("&v=", l) > 0 || n.indexOf("?v=", l) > 0) && (o = !0);
        break
      }
    }
    if (u.LMV_RESOURCE_ROOT = t || u.LMV_RESOURCE_ROOT, o) {
      var c = !1,
        h = ["dev", "stg", "prod"];
      for (a = 0; a < h.length; ++a) {
        var d = b[h[a]];
        if (-1 !== u.LMV_RESOURCE_ROOT.indexOf(d)) {
          c = !0;
          break
        }
      }
      c && (u.LMV_RESOURCE_ROOT += u.LMV_VIEWER_VERSION + "/")
    }
  }

  function E(e) {
    var t = e.endpoint;
    t || (t = _[Object(o.getEnv)()].ROOT);
    var n = e.api || t.ENDPOINT_API_DERIVATIVE_SERVICE_V2;
    if (o.endpoint.setEndpointAndApi(t, n), !Object(a.isNodeJS)()) return w(e), Promise.resolve()
  }

  function A(e, t, n) {
    t = t || function () {}, l.ViewingService.rawGet(o.endpoint.getApiEndpoint(), null, "/auth/settoken", t, n, {
      method: "POST",
      headers: {
        "Content-Type": "application/x-www-form-urlencoded"
      },
      withCredentials: !0,
      postData: "access-token=" + e
    })
  }

  function S(e) {
    o.endpoint.HTTP_REQUEST_HEADERS.Authorization = "Bearer " + e
  }

  function M(e, t, n) {
    if (d.accessToken = e, o.endpoint.getUseCookie()) {
      A(e, t, (function (t) {
        r.logger.warn("Failed to set token in cookie. Will use header instead."), o.endpoint.setUseCookie(!1), S(e), n && n(t)
      }))
    } else S(e), t && t()
  }

  function T(e, t) {
    var n, a = t ? t.shouldInitializeAuth : void 0;
    void 0 === a && (a = "false" !== Object(i.getParameterByName)("auth").toLowerCase());
    if ("Local" == Object(o.getEnv)() || !a) return setTimeout(e, 0), void o.endpoint.setUseCredentials(void 0 !== t.useCredentials && t.useCredentials);
    o.endpoint.setUseCredentials(void 0 === t.useCredentials || t.useCredentials), o.endpoint.setUseCookie(t.useCookie), d.tokenRefreshInterval && (clearTimeout(d.tokenRefreshInterval), d.tokenRefreshInterval = null), t && t.getAccessToken ? (d.getAccessToken = t.getAccessToken, "string" == typeof (n = t.getAccessToken((function i(r, o) {
      n = r, !d.tokenRefreshInterval ? M(n, e, e) : M(n), "number" != typeof o && (o = 3599);
      var a = o - 5;
      a <= 0 && (a = o), d.tokenRefreshInterval = setTimeout((function () {
        t.getAccessToken(i)
      }), 1e3 * a)
    }))) && n && M(n, e)) : t && t.accessToken ? M(n = t.accessToken, e) : ((n = Object(i.getParameterByName)("accessToken")) || r.logger.error("No access token is provided, but authorization requested. This is a problem."), M(n, e))
  }

  function C(e) {
    r.logger.initialize(e);
    var t = Object(i.getParameterByName)("logLevel");
    t && r.logger.setLevel(parseInt(t))
  }

  function P(e) {
    e && "Local" === e.env || o.endpoint.getCdnRedirectUrl() && l.ViewingService.rawGet(o.endpoint.getCdnRedirectUrl(), null, null, (function (e) {
      e && e.length && (o.endpoint.setCdnUrl(e), r.logger.info("CDN_ROOT is: " + e))
    }), (function () {}), {
      withCredentials: !1,
      responseType: "text"
    })
  }

  function L(e, t) {
    if (Object(a.isNodeJS)()) return x(e), E(e), C(e), P(e), void T(t, e);
    e.webGLHelpLink && (p = e.webGLHelpLink), x(e);
    var n = E(e);
    C(e), P(e), Object(c.initializeLocalization)(e), Object(a.disableDocumentTouchSafari)(), Object(s.initWorkerScript)();
    var i = function (e) {
      return new Promise((function (t) {
        T(t, e)
      }))
    }(e);
    Promise.all([n, i]).then(t)
  }

  function D() {
    r.logger.shutdown(), Autodesk.Viewing.Private.shutdownPropWorker()
  }
}, function (e, t, n) {
  "use strict";
  n.r(t);
  var i = n(0),
    r = n(58),
    o = n(87),
    a = n(174),
    s = n(47),
    l = n(26),
    c = n(13);

  function u(e, t, n, i) {
    var o = function (e) {
        for (var t = new Uint16Array(e.length + 1), n = 0, i = 0; i < e.length; i++) t[i] = n, n += Object(r.getVertexCount)(e[i]);
        return t[i] = n, t
      }(e),
      s = new a.GeomMergeTask;
    return s.vb = t.vb, s.vbstride = t.vbstride, s.posOffset = t.attributes.position.itemOffset, s.normalOffset = t.attributes.normal ? t.attributes.normal.itemOffset : -1, s.matrices = n, s.ranges = o, s.dbIds = i, s
  }

  function h(e, t) {
    t.vb = e.vb, t.attributes.id.array = e.vertexIds, t.needsUpdate = !0
  }

  function d(e) {
    var t = 0,
      n = {},
      i = [],
      r = e,
      o = new Array(2);

    function a(e) {
      for (var i = e.data, a = 0; a < i.length; a++) {
        var s = i[a],
          l = s.taskId;
        h(s, n[l]), delete n[l]
      }
      if (0 === --t)
        for (r.inProgress = !1, a = 0; a < o.length; a++) o[a].clearAllEventListenerWithIntercept(), o[a].terminate(), o[a] = null
    }
    this.addMergeTask = function (e, t, r, o) {
      var a = u(e, t, r, o);
      i.push(a), n[a.id] = t
    }, this.runTasks = function () {
      for (var e = 0; e < 2; e++) o[e] = d.createWorker(), o[e].addEventListenerWithIntercept(a);
      for (var n = i.length, s = Math.floor(n / 2), l = 0; l < 2; l++) {
        var c = l * s,
          u = 1 === l ? n : c + s,
          h = [],
          f = new Array(4 * (u - c)),
          p = 0;
        for (e = c; e < u; e++) {
          var m = i[e];
          f[p++] = m.vb.buffer, f[p++] = m.matrices.buffer, f[p++] = m.ranges.buffer, f[p++] = m.dbIds.buffer, h.push(m)
        }
        var g = {
          operation: "MERGE_GEOMETRY",
          tasks: h
        };
        o[l].doOperation(g, f), t++
      }
      r.inProgress = !0
    }
  }
  d.createWorker = s.createWorkerWithIntercept;
  var f = n(1),
    p = n(106),
    m = n(10),
    g = n(28);
  n.d(t, "isVisible", (function () {
    return D
  })), n.d(t, "copyVertexFormat", (function () {
    return R
  })), n.d(t, "copyPrimitiveProps", (function () {
    return O
  })), n.d(t, "mergeGeometries", (function () {
    return k
  })), n.d(t, "Consolidation", (function () {
    return F
  })), n.d(t, "ConsolidationBuilder", (function () {
    return U
  }));
  var v = 1,
    y = 2,
    b = 3,
    _ = 4;

  function x(e) {
    return e.isLines ? y : e.isPoints ? _ : e.isWideLines ? b : v
  }

  function w(e, t) {
    switch (!0 === e.isLines && (e.isLines = void 0), !0 === e.isWideLines && (e.isWideLines = void 0), !0 === e.isPoints && (e.isPoints = void 0), t) {
      case y:
        e.isLines = !0;
        break;
      case b:
        e.isWideLines = !0;
        break;
      case _:
        e.isPoints = !0
    }
  }
  var E = m.MeshFlags.MESH_HIGHLIGHTED,
    A = m.MeshFlags.MESH_VISIBLE | m.MeshFlags.MESH_HIDE | E,
    S = m.MeshFlags.MESH_VISIBLE,
    M = m.MeshFlags.MESH_VISIBLE | m.MeshFlags.MESH_HIDE,
    T = m.MeshFlags.MESH_HIGHLIGHTED | m.MeshFlags.MESH_HIDE,
    C = m.MeshFlags.MESH_HIGHLIGHTED,
    P = g.RenderFlags.RENDER_HIDDEN,
    L = g.RenderFlags.RENDER_HIGHLIGHTED;

  function D(e, t) {
    switch (t) {
      case P:
        return 0 == (e & M);
      case L:
        return (e & T) === C
    }
    return (e & A) == S
  }

  function I(e) {
    this.geoms = [], this.matrices = [], this.vertexCount = 0, this.material = e, this.fragIds = [], this.worldBox = new i.Box3
  }

  function R(e, t) {
    for (var n in e.vb && e.vbstride || f.logger.warn("copyVertexFormat() supports only interleaved buffers"), e.attributes) t.attributes[n] = e.attributes[n];
    t.attributesKeys = e.attributesKeys.slice(0), t.vbstride = e.vbstride
  }

  function O(e, t) {
    w(t, x(e)), t.lineWidth = e.lineWidth, t.pointSize = e.pointSize
  }

  function k(e, t, n, a, s) {
    var d = function (e) {
      for (var t = e[0].vbstride, n = 0, a = 0, s = 0, l = 0; l < e.length; l++) {
        var c = e[l];
        n += e[l].ib.length, a += Object(r.getVertexCount)(c), e[l].iblines && (s += e[l].iblines.length)
      }
      var u = Object(o.createBufferGeometry)();
      u.vb = new Float32Array(a * t), u.ib = new Uint16Array(n), s && (u.iblines = new Uint16Array(s)), u.byteSize = u.vb.byteLength + u.ib.byteLength, u.iblines && (u.byteSize += u.iblines.byteLength), O(e[0], u), R(e[0], u);
      var h = new i.BufferAttribute(null, 3);
      h.normalize = !0, h.bytesPerItem = 1, u.addAttribute("id", h);
      var d = e[0];
      return w(u, x(d)), d.isPoints && (u = d.pointSize), d.isWideLines && (u = d.lineWidth), u
    }(e);
    return d.boundingBox = a.clone(),
      function (e, t) {
        for (var n = 0, i = 0, o = 0, a = 0, s = 0; s < e.length; s++) {
          for (var l = e[s], c = Object(r.getVertexCount)(l), u = 0; u < l.ib.length; u++) t.ib[o + u] = l.ib[u] + i;
          if (l.iblines) {
            for (u = 0; u < l.iblines.length; u++) t.iblines[a + u] = l.iblines[u] + i;
            a += l.iblines.length
          }
          t.vb.set(l.vb, n), n += l.vb.length, i += c, o += l.ib.length
        }
      }(e, d), s ? s.addMergeTask(e, d, t, n) : function (e, t, n, i) {
        var r = u(e, t, n, i),
          o = new c.LmvVector3,
          a = new l.LmvMatrix4;
        h(r.run(a, o), t)
      }(e, d, t, n), d
  }

  function N(e, t) {
    if (e.vbstride != t.vbstride) return !1;
    if (x(e) !== x(t)) return !1;
    if (e.isPoints && e.pointSize !== t.pointSize) return !1;
    if (e.isWideLines && e.lineWidth !== t.lineWidth) return !1;
    if (e.attributesKeys.length != t.attributesKeys.length) return !1;
    for (var n = 0, i = e.attributesKeys.length; n < i; n++) {
      var r = e.attributesKeys[n],
        o = e.attributes[r],
        a = t.attributes[r];
      if (!a) return !1;
      if (o !== a && (o.itemOffset !== a.itemOffset || o.normalize !== a.normalize || o.itemSize !== a.itemSize || o.bytesPerItem !== a.bytesPerItem || o.isPattern !== a.isPattern)) return !1
    }
    return !0
  }

  function F(e) {
    this.meshes = [], this.fragId2MeshIndex = new Int32Array(e);
    for (var t = 0; t < this.fragId2MeshIndex.length; t++) this.fragId2MeshIndex[t] = -1;
    this.byteSize = 0, this.consolidationMap = null
  }

  function U() {
    this.buckets = {}, this.bucketCount = 0, this.costs = 0
  }

  function V(e, t) {
    this.fragOrder = new Uint32Array(e), this.ranges = new Uint32Array(t), this.boxes = new Array(t), this.numConsolidated = -1
  }
  I.prototype = {
    constructor: I,
    addGeom: function (e, t, n) {
      this.geoms.push(e), this.fragIds.push(n), this.worldBox.union(t), this.vertexCount += Object(r.getVertexCount)(e);
      var i = this.geoms.length;
      return 1 == i ? 0 : (void 0 === e.byteSize && f.logger.warn("Error in consolidation: Geometry must contain byteSize."), e.byteSize + (2 == i ? this.geoms[0].byteSize : 0))
    }
  }, F.prototype = {
    constructor: F,
    addContainerMesh: function (e, t, n, r, o) {
      var a = new i.Mesh(e, t);
      this.meshes.push(a), this.byteSize += e.byteSize;
      var s = r || 0,
        l = s + (o || n.length);
      a.frustumCulled = !1;
      for (var c = this.meshes.length - 1, u = s; u < l; u++) {
        var h = n[u];
        this.fragId2MeshIndex[h] = c
      }
    },
    addSingleMesh: function (e, t, n, r, o) {
      var a = new i.Mesh(e, t);
      a.matrix.copy(r), a.matrixAutoUpdate = !1, a.dbId = o, a.fragId = n, this.meshes.push(a), a.frustumCulled = !1, this.fragId2MeshIndex[n] = this.meshes.length - 1
    },
    addSingleFragment: function (e, t) {
      var n = e.getVizmesh(t);
      this.addSingleMesh(n.geometry, n.material, t, n.matrixWorld, n.dbId)
    },
    applyAttributes: function (e, t, n, i) {
      var r, o, a = this.meshes[e],
        s = a.geometry,
        l = t.vizflags,
        c = this.consolidationMap,
        u = c.fragOrder,
        h = s.numInstances,
        d = t.db2ThemingColor,
        f = d.length > 0 || void 0;
      if (h ? o = (r = a.rangeStart) + a.geometry.numInstances : s.attributes.id ? (r = c.ranges[e], o = e + 1 >= c.ranges.length ? c.numConsolidated : c.ranges[e + 1]) : E = a.fragId, !i || void 0 !== E) return s.offsets && void 0 === E && (s.offsets = s.drawcalls = void 0), a.visible = D(l[void 0 === E ? u[r] : E], n), a.themingColor = f && d[t.fragments.fragId2dbId[E]], a;
      var p, m, g = 0,
        v = 0,
        y = 0,
        b = 0,
        _ = 0;

      function x() {
        if (p) {
          s.drawcalls = s.offsets = s.offsets || [];
          var e = s.offsets[_] || {
            index: 0
          };
          s.offsets[_++] = e, h ? (e.start = 0, e.count = s.ib.length, s.iblines && (e.edgeStart = 0, e.edgeCount = s.iblines.length), e.instanceStart = g, e.numInstances = v - g) : (e.start = g, e.count = v - g, s.iblines && (e.edgeStart = y, e.edgeCount = b - y)), e.themingColor = m
        }
      }
      for (var w = r; w < o; ++w) {
        var E, A = D(l[E = u[w]], n),
          S = f && t.db2ThemingColor[t.fragments.fragId2dbId[E]];
        if ((A !== p || A && S !== m) && (v > g && x(), g = v, y = b, p = A, m = S), h) v += 1;
        else {
          var M = t.getGeometry(E);
          v += M.ib.length, M.iblines && (b += M.iblines.length)
        }
      }
      return 0 === g ? (a.themingColor = m, a.visible = p) : (a.visible = !0, x()), s.offsets && (s.offsets.length = _), a
    }
  }, U.prototype = {
    addGeom: function (e, t, n, i) {
      var o = null,
        a = this.buckets[t.id];
      if (a)
        for (var s = 0; s < a.length; s++) {
          var l = a[s];
          if (N(l.geoms[0], e))
            if (!(Object(r.getVertexCount)(e) + l.vertexCount > 65535)) {
              o = l;
              break
            }
        }
      o || (o = new I(t), this.bucketCount++, this.buckets[t.id] ? this.buckets[t.id].push(o) : this.buckets[t.id] = [o]), this.costs += o.addGeom(e, n, i)
    },
    createConsolidationMap: function (e, t) {
      var n = new V(e.length, this.bucketCount),
        i = 0,
        r = 0;
      for (var o in this.buckets)
        for (var a = this.buckets[o], s = 0; s < a.length; s++) {
          var l = a[s];
          n.ranges[r] = i, n.boxes[r] = l.worldBox, n.fragOrder.set(l.fragIds, i), i += l.fragIds.length, r++
        }
      n.numConsolidated = t;
      for (var c = t; c < e.length; c++) n.fragOrder[c] = e[c];
      return n
    }
  }, V.prototype = {
    buildConsolidation: function (e, t, n) {
      var r = this.fragOrder,
        o = e.getCount(),
        a = this.ranges.length,
        s = new F(o),
        l = null;
      d.createWorker && (l = new d(s));
      for (var c = [], u = new i.Matrix4, h = 0; h < a; h++) {
        var f = this.ranges[h],
          m = (h === a - 1 ? this.numConsolidated : this.ranges[h + 1]) - f;
        if (1 !== m) {
          c.length = m;
          for (var g = new Float32Array(16 * m), v = new Uint32Array(m), y = 0; y < m; y++) A = r[f + y], c[y] = e.getGeometry(A), e.getOriginalWorldMatrix(A, u), g.set(u.elements, 16 * y), v[y] = e.getDbIds(A);
          var b = this.boxes[h],
            _ = r[f],
            x = e.getMaterial(_),
            w = k(c, g, v, b, l),
            E = t.getMaterialVariant(x, p.MATERIAL_VARIANT.VERTEX_IDS, n);
          s.addContainerMesh(w, E, r, f, m)
        } else {
          var A = r[f];
          s.addSingleFragment(e, A, s)
        }
      }
      return l && l.runTasks(), s.consolidationMap = this, s
    }
  }, F.applyBVHDefaults = function (e) {
    e.frags_per_leaf_node = 512, e.max_polys_per_node = 1e5
  }, F.getDefaultBVHOptions = function () {
    var e = {};
    return F.applyBVHDefaults(e), e
  }
}, function (e, t, n) {
  "use strict";

  function i(e, t, n) {
    var i, r, o, a, s, l;
    for (i = "", o = n, r = 0; r < o;) switch ((a = e[t + r++]) >> 4) {
      case 0:
      case 1:
      case 2:
      case 3:
      case 4:
      case 5:
      case 6:
      case 7:
        i += String.fromCharCode(a);
        break;
      case 12:
      case 13:
        s = e[t + r++], i += String.fromCharCode((31 & a) << 6 | 63 & s);
        break;
      case 14:
        s = e[t + r++], l = e[t + r++], i += String.fromCharCode((15 & a) << 12 | (63 & s) << 6 | (63 & l) << 0)
    }
    return i
  }

  function r(e, t, n) {
    var i, r, o, a = n || 0;
    if (r = e.length, t)
      for (i = 0; i < r; i++)(o = e.charCodeAt(i)) >= 1 && o <= 127 ? t[a++] = o : o > 2047 ? (t[a++] = 224 | o >> 12 & 15, t[a++] = 128 | o >> 6 & 63, t[a++] = 128 | o >> 0 & 63) : (t[a++] = 192 | o >> 6 & 31, t[a++] = 128 | o >> 0 & 63);
    else
      for (i = 0; i < r; i++)(o = e.charCodeAt(i)) >= 1 && o <= 127 ? a++ : a += o > 2047 ? 3 : 2;
    return a - (n || 0)
  }
  n.d(t, "d", (function () {
    return i
  })), n.d(t, "b", (function () {
    return r
  })), n.d(t, "c", (function () {
    return o
  })), n.d(t, "a", (function () {
    return a
  }));

  function o(e, t, n) {
    return void 0 === t && (t = 0), void 0 === n && (n = e.length), n > 1048576 ? function (e, t, n) {
      var i, r, o, a, s, l, c, u;
      for (i = "", s = [], o = n, l = 0, r = 0; r < o;) {
        switch ((a = e[t + r++]) >> 4) {
          case 0:
          case 1:
          case 2:
          case 3:
          case 4:
          case 5:
          case 6:
          case 7:
            s.push(String.fromCharCode(a));
            break;
          case 12:
          case 13:
            c = e[t + r++], s.push(String.fromCharCode((31 & a) << 6 | 63 & c));
            break;
          case 14:
            c = e[t + r++], u = e[t + r++], s.push(String.fromCharCode((15 & a) << 12 | (63 & c) << 6 | (63 & u) << 0))
        }(++l >= 32768 || r >= o) && (i += s.join(""), s.length = 0, l = 0)
      }
      return i
    }(e, t, n) : i(e, t, n)
  }

  function a(e) {
    var t = o(e, 0, e.length);
    return JSON.parse(t)
  }
}, function (e, t, n) {
  "use strict";
  n.r(t), n.d(t, "RadioButtonGroup", (function () {
    return a
  }));
  var i = n(49),
    r = n(11),
    o = n(37);

  function a(e, t) {
    i.ControlGroup.call(this, e, t);
    var n = this;
    this._activeButton = null, this._handleButtonStateChange = function (e) {
      var t = r.Button.State;
      e.state === t.ACTIVE ? (n._activeButton = e.target, n.dispatchEvent({
        type: a.Event.ACTIVE_BUTTON_CHANGED,
        button: e.target,
        isActiveButton: !0
      }), n._controls.forEach((function (n) {
        n !== e.target && n.getState() !== t.DISABLED && n.setState(t.INACTIVE)
      }))) : e.target === n._activeButton && (n._activeButton = null, n.dispatchEvent({
        type: a.Event.ACTIVE_BUTTON_CHANGED,
        button: e.target,
        isActiveButton: !1
      }))
    }
  }
  a.Event = {
    ACTIVE_BUTTON_CHANGED: "RadioButtonGroup.ActiveButtonChanged",
    VISIBILITY_CHANGED: o.Control.Event.VISIBILITY_CHANGED,
    COLLAPSED_CHANGED: o.Control.Event.COLLAPSED_CHANGED,
    CONTROL_ADDED: i.ControlGroup.Event.CONTROL_ADDED,
    CONTROL_REMOVED: i.ControlGroup.Event.CONTROL_REMOVED,
    SIZE_CHANGED: i.ControlGroup.Event.SIZE_CHANGED
  }, a.prototype = Object.create(i.ControlGroup.prototype), a.prototype.constructor = a, a.prototype.addControl = function (e, t) {
    return e instanceof r.Button && (!!i.ControlGroup.prototype.addControl.call(this, e, t) && (e.addEventListener(r.Button.Event.STATE_CHANGED, this._handleButtonStateChange), !0))
  }, a.prototype.removeControl = function (e) {
    var t = "string" == typeof e ? this.getControl(e) : e;
    return !(null === t || !i.ControlGroup.prototype.removeControl.call(this, t)) && (t.removeEventListener(r.Button.Event.STATE_CHANGED, this._handleButtonStateChange), !0)
  }, a.prototype.getActiveButton = function () {
    return this._activeButton
  }
}, function (e, t, n) {
  "use strict";
  n.r(t), n.d(t, "ScreenMode", (function () {
    return c
  })), n.d(t, "ScreenModeDelegate", (function () {
    return u
  })), n.d(t, "AppScreenModeDelegate", (function () {
    return h
  })), n.d(t, "ApplicationScreenModeDelegate", (function () {
    return d
  })), n.d(t, "NullScreenModeDelegate", (function () {
    return f
  })), n.d(t, "ScreenModeMixin", (function () {
    return p
  }));
  var i = n(3),
    r = n(2),
    o = n(1),
    a = ["fullscreenchange", "mozfullscreenchange", "webkitfullscreenchange", "MSFullscreenChange"];

  function s(e, t) {
    for (var n = 0; n < a.length; ++n) t.addDocumentEventListener(a[n], e, !1)
  }

  function l(e, t) {
    for (var n = 0; n < a.length; ++n) t.removeDocumentEventListener(a[n], e, !1)
  }
  var c = {
    kNormal: 0,
    kFullBrowser: 1,
    kFullScreen: 2
  };

  function u(e) {
    this.viewer = e, this.bindFullscreenEventListener = this.fullscreenEventListener.bind(this), this.getMode() === c.kFullScreen && s(this.bindFullscreenEventListener, this.viewer.globalManager)
  }

  function h(e) {
    u.call(this, e)
  }
  u.prototype.uninitialize = function () {
    l(this.bindFullscreenEventListener, this.viewer.globalManager), this.viewer = null
  }, u.prototype.isModeSupported = function (e) {
    return !0
  }, u.prototype.setMode = function (e) {
    var t = this.getMode();
    return !(e === t || !this.isModeSupported(e)) && (this.doScreenModeChange(t, e), this.onScreenModeChanged(t, e), !0)
  }, u.prototype.getMode = function () {
    throw "Implement getMode() in derived class"
  }, u.prototype.getNextMode = function () {
    var e, t = this.getMode(),
      n = c;
    return t === n.kNormal && this.isModeSupported(n.kFullBrowser) ? e = n.kFullBrowser : t === n.kNormal && this.isModeSupported(n.kFullScreen) || t === n.kFullBrowser && this.isModeSupported(n.kFullScreen) ? e = n.kFullScreen : t === n.kFullBrowser && this.isModeSupported(n.kNormal) || t === n.kFullScreen && this.isModeSupported(n.kNormal) ? e = n.kNormal : t === n.kFullScreen && this.isModeSupported(n.kFullBrowser) && (e = n.kFullBrowser), e
  }, u.prototype.getEscapeMode = function () {
    return this.getMode() !== c.kNormal ? c.kNormal : void 0
  }, u.prototype.fullscreenEventListener = function () {
    var e = this.viewer.globalManager.getDocument();
    Object(i.inFullscreen)(e) ? this.viewer.resize() : (this.doScreenModeChange(c.kFullScreen, c.kNormal), this.onScreenModeChanged(c.kFullScreen, c.kNormal))
  }, u.prototype.doScreenModeChange = function (e, t) {
    throw "Implement doScreenModeChange() in derived class"
  }, u.prototype.onScreenModeChanged = function (e, t) {
    e === c.kFullScreen ? l(this.bindFullscreenEventListener, this.viewer.globalManager) : t === c.kFullScreen && s(this.bindFullscreenEventListener, this.viewer.globalManager), this.viewer.resize(), this.viewer.dispatchEvent({
      type: r.FULLSCREEN_MODE_EVENT,
      mode: t
    })
  }, h.prototype = Object.create(u.prototype), h.prototype.constructor = h, h.prototype.isModeSupported = function (e) {
    return e !== c.kFullBrowser
  }, h.prototype.getMode = function () {
    var e = this.viewer.globalManager.getDocument();
    return Object(i.inFullscreen)(e) ? c.kFullScreen : c.kNormal
  }, h.prototype.doScreenModeChange = function (e, t) {
    var n = this.viewer.container;
    if (t === c.kNormal) {
      n.classList.remove("viewer-fill-browser");
      var r = this.viewer.globalManager.getDocument();
      Object(i.exitFullscreen)(r)
    } else t === c.kFullScreen && (n.classList.add("viewer-fill-browser"), Object(i.launchFullscreen)(n))
  };
  var d = h;

  function f(e) {
    u.call(this, e)
  }

  function p() {}
  f.prototype = Object.create(u.prototype), f.prototype.constructor = u, f.prototype.isModeSupported = function (e) {
    return !1
  }, f.prototype.getMode = function () {
    return c.kNormal
  }, p.prototype = {
    setScreenModeDelegate: function (e) {
      this.screenModeDelegate && (this.screenModeDelegate.uninitialize(), this.screenModeDelegate = null), this.screenModeDelegateClass = e || (null === e ? f : h)
    },
    getScreenModeDelegate: function () {
      return this.screenModeDelegate || (this.screenModeDelegate = new this.screenModeDelegateClass(this)), this.screenModeDelegate
    },
    isScreenModeSupported: function (e) {
      return this.getScreenModeDelegate().isModeSupported(e)
    },
    canChangeScreenMode: function () {
      return this.isScreenModeSupported(Autodesk.Viewing.ScreenMode.kNormal)
    },
    setScreenMode: function (e) {
      var t = {
        category: "screen_mode",
        value: e
      };
      return o.logger.track(t), this.getScreenModeDelegate().setMode(e)
    },
    getScreenMode: function () {
      return this.getScreenModeDelegate().getMode()
    },
    nextScreenMode: function () {
      var e = this.getScreenModeDelegate().getNextMode();
      return void 0 !== e && this.setScreenMode(e)
    },
    escapeScreenMode: function () {
      var e = this.getScreenModeDelegate().getEscapeMode();
      return void 0 !== e && this.setScreenMode(e)
    },
    apply: function (e) {
      var t = p.prototype;
      e.setScreenModeDelegate = t.setScreenModeDelegate, e.getScreenModeDelegate = t.getScreenModeDelegate, e.isScreenModeSupported = t.isScreenModeSupported, e.canChangeScreenMode = t.canChangeScreenMode, e.setScreenMode = t.setScreenMode, e.getScreenMode = t.getScreenMode, e.nextScreenMode = t.nextScreenMode, e.escapeScreenMode = t.escapeScreenMode
    }
  }
}, function (e, t) {
  e.exports = function (e, t) {
    return {
      enumerable: !(1 & e),
      configurable: !(2 & e),
      writable: !(4 & e),
      value: t
    }
  }
}, function (e, t, n) {
  "use strict";
  var i = n(14);
  e.exports = function (e, t) {
    var n = [][e];
    return !!n && i((function () {
      n.call(null, t || function () {
        throw 1
      }, 1)
    }))
  }
}, function (e, t) {
  e.exports = function (e, t, n) {
    if (!(e instanceof t)) throw TypeError("Incorrect " + (n ? n + " " : "") + "invocation");
    return e
  }
}, function (e, t, n) {
  "use strict";
  var i = n(4),
    r = n(17),
    o = n(24),
    a = n(233),
    s = n(29),
    l = n(186),
    c = n(101),
    u = n(99),
    h = n(56),
    d = n(27),
    f = n(302),
    p = n(322),
    m = n(84),
    g = n(40),
    v = n(162),
    y = n(22),
    b = n(85),
    _ = n(113),
    x = n(118).f,
    w = n(323),
    E = n(57).forEach,
    A = n(120),
    S = n(32),
    M = n(60),
    T = n(51),
    C = n(188),
    P = T.get,
    L = T.set,
    D = S.f,
    I = M.f,
    R = Math.round,
    O = r.RangeError,
    k = l.ArrayBuffer,
    N = l.DataView,
    F = s.NATIVE_ARRAY_BUFFER_VIEWS,
    U = s.TYPED_ARRAY_TAG,
    V = s.TypedArray,
    B = s.TypedArrayPrototype,
    z = s.aTypedArrayConstructor,
    G = s.isTypedArray,
    H = function (e, t) {
      for (var n = 0, i = t.length, r = new(z(e))(i); i > n;) r[n] = t[n++];
      return r
    },
    W = function (e, t) {
      D(e, t, {
        get: function () {
          return P(this)[t]
        }
      })
    },
    j = function (e) {
      var t;
      return e instanceof k || "ArrayBuffer" == (t = v(e)) || "SharedArrayBuffer" == t
    },
    q = function (e, t) {
      return G(e) && "symbol" != typeof t && t in e && String(+t) == String(t)
    },
    X = function (e, t) {
      return q(e, t = m(t, !0)) ? u(2, e[t]) : I(e, t)
    },
    Y = function (e, t, n) {
      return !(q(e, t = m(t, !0)) && y(n) && g(n, "value")) || g(n, "get") || g(n, "set") || n.configurable || g(n, "writable") && !n.writable || g(n, "enumerable") && !n.enumerable ? D(e, t, n) : (e[t] = n.value, e)
    };
  o ? (F || (M.f = X, S.f = Y, W(B, "buffer"), W(B, "byteOffset"), W(B, "byteLength"), W(B, "length")), i({
    target: "Object",
    stat: !0,
    forced: !F
  }, {
    getOwnPropertyDescriptor: X,
    defineProperty: Y
  }), e.exports = function (e, t, n) {
    var o = e.match(/\d+$/)[0] / 8,
      s = e + (n ? "Clamped" : "") + "Array",
      l = "get" + e,
      u = "set" + e,
      m = r[s],
      g = m,
      v = g && g.prototype,
      S = {},
      M = function (e, t) {
        D(e, t, {
          get: function () {
            return function (e, t) {
              var n = P(e);
              return n.view[l](t * o + n.byteOffset, !0)
            }(this, t)
          },
          set: function (e) {
            return function (e, t, i) {
              var r = P(e);
              n && (i = (i = R(i)) < 0 ? 0 : i > 255 ? 255 : 255 & i), r.view[u](t * o + r.byteOffset, i, !0)
            }(this, t, e)
          },
          enumerable: !0
        })
      };
    F ? a && (g = t((function (e, t, n, i) {
      return c(e, g, s), C(y(t) ? j(t) ? void 0 !== i ? new m(t, p(n, o), i) : void 0 !== n ? new m(t, p(n, o)) : new m(t) : G(t) ? H(g, t) : w.call(g, t) : new m(f(t)), e, g)
    })), _ && _(g, V), E(x(m), (function (e) {
      e in g || h(g, e, m[e])
    })), g.prototype = v) : (g = t((function (e, t, n, i) {
      c(e, g, s);
      var r, a, l, u = 0,
        h = 0;
      if (y(t)) {
        if (!j(t)) return G(t) ? H(g, t) : w.call(g, t);
        r = t, h = p(n, o);
        var m = t.byteLength;
        if (void 0 === i) {
          if (m % o) throw O("Wrong length");
          if ((a = m - h) < 0) throw O("Wrong length")
        } else if ((a = d(i) * o) + h > m) throw O("Wrong length");
        l = a / o
      } else l = f(t), r = new k(a = l * o);
      for (L(e, {
          buffer: r,
          byteOffset: h,
          byteLength: a,
          length: l,
          view: new N(r)
        }); u < l;) M(e, u++)
    })), _ && _(g, V), v = g.prototype = b(B)), v.constructor !== g && h(v, "constructor", g), U && h(v, U, s), S[s] = g, i({
      global: !0,
      forced: g != m,
      sham: !F
    }, S), "BYTES_PER_ELEMENT" in g || h(g, "BYTES_PER_ELEMENT", o), "BYTES_PER_ELEMENT" in v || h(v, "BYTES_PER_ELEMENT", o), A(s)
  }) : e.exports = function () {}
}, function (e, t, n) {
  var i = n(225),
    r = n(234),
    o = n(182)("metadata"),
    a = o.store || (o.store = new r),
    s = function (e, t, n) {
      var r = a.get(e);
      if (!r) {
        if (!n) return;
        a.set(e, r = new i)
      }
      var o = r.get(t);
      if (!o) {
        if (!n) return;
        r.set(t, o = new i)
      }
      return o
    };
  e.exports = {
    store: a,
    getMap: s,
    has: function (e, t, n) {
      var i = s(t, n, !1);
      return void 0 !== i && i.has(e)
    },
    get: function (e, t, n) {
      var i = s(t, n, !1);
      return void 0 === i ? void 0 : i.get(e)
    },
    set: function (e, t, n, i) {
      s(n, i, !0).set(e, t)
    },
    keys: function (e, t) {
      var n = s(e, t, !1),
        i = [];
      return n && n.forEach((function (e, t) {
        i.push(t)
      })), i
    },
    toKey: function (e) {
      return void 0 === e || "symbol" == typeof e ? e : String(e)
    }
  }
}, function (e, t, n) {
  "use strict";
  n.r(t), n.d(t, "getPropWorker", (function () {
    return b
  })), n.d(t, "shutdownPropWorker", (function () {
    return _
  })), n.d(t, "clearPropertyWorkerCache", (function () {
    return x
  })), n.d(t, "PropDbLoader", (function () {
    return M
  }));
  var i = n(1),
    r = n(18),
    o = n(9),
    a = n(2),
    s = n(6),
    l = n(247),
    c = n(248),
    u = n(47),
    h = n(42);

  function d(e, t) {
    var n = Object.keys(e);
    if (Object.getOwnPropertySymbols) {
      var i = Object.getOwnPropertySymbols(e);
      t && (i = i.filter((function (t) {
        return Object.getOwnPropertyDescriptor(e, t).enumerable
      }))), n.push.apply(n, i)
    }
    return n
  }

  function f(e, t, n) {
    return t in e ? Object.defineProperty(e, t, {
      value: n,
      enumerable: !0,
      configurable: !0,
      writable: !0
    }) : e[t] = n, e
  }
  var p, m = 1,
    g = {};

  function v(e) {
    var t = e.data;
    if (t && t.debug) i.logger.debug(t.message);
    else {
      var n = t && t.cbId && g[t.cbId];
      n && (t.progress ? n[2] && n[2](t.progress) : (t.error ? n[1] && n[1](t.error) : n[0] && n[0](t.result), delete g[t.cbId]))
    }
  }

  function y(e, t, n) {
    var i = m++;
    return g[i] = [e, t, n], i
  }

  function b() {
    return p
  }

  function _() {
    p && (p.clearAllEventListenerWithIntercept(), p.terminate(), p = void 0)
  }

  function x() {
    p && p.doOperation({
      operation: "UNLOAD_PROPERTYDB",
      clearCaches: !0
    })
  }
  var w = 0,
    E = 1,
    A = 2,
    S = 3,
    M = function (e, t, n) {
      this.eventTarget = n || new h.EventDispatcher, this.model = t, this.svf = t && t.getData(), this.dbPath = "", this.sharedDbPath = !1;
      var o = this.svf && this.svf.is2d && this.svf.loadOptions.bubbleNode && this.svf.loadOptions.bubbleNode.findViewableParent()._getOtgManifest();
      if (this.svf && !o && this.svf.propertydb && this.svf.propertydb.avs.length) {
        // for (var a in this.dbFiles = this.svf.propertydb, this.dbFiles) this.dbFiles[a][0] && (this.dbFiles[a][0].path = this.dbFiles[a][0].path.replace(/\\/g, "/"));
        for (var a in this.dbFiles = this.svf.propertydb, this.dbFiles) this.dbFiles[a][0] && (this.dbFiles[a][0] = this.dbFiles[a][0].replace(/\\/g, "/"));
        var s = Object(r.pathToURL)(this.svf.basePath);
        if (e) {
          var l = r.ViewingService.simplifyPath(s + this.svf.propertydb.avs[0].path);
          if ((l = l.slice(0, l.lastIndexOf("/") + 1)) === e) {
            var c = {};
            for (var a in this.dbFiles) {
              var u = this.dbFiles[a][0],
                d = u.path;
              0 === (d = r.ViewingService.simplifyPath(s + d)).indexOf(e) && (d = d.slice(e.length)), c[a] = [{
                path: d,
                isShared: u.isShared
              }]
            }
            this.dbFiles = c, this.dbPath = e, this.sharedDbPath = !0
          } else this.dbPath = s, this.sharedDbPath = !1
        } else this.dbPath = s, this.sharedDbPath = !1
      } else {
        if (this.sharedDbPath = !0, this.svf && this.svf.loadOptions.bubbleNode) {
          this.dbPath = e;
          var f = this.svf.loadOptions.bubbleNode.getPropertyDbManifest();
          this.dbFiles = f.propertydb, this.needsDbIdRemap = f.needsDbIdRemap
        } else i.logger.warn("Deprecated shared property database initialization without bubbleNode in Model load options."), this.dbPath = e, this.dbFiles = {
          attrs: [],
          avs: [],
          ids: [],
          values: [],
          offsets: []
        };
        i.logger.log("Using shared db path " + e)
      }
      this.queryParams = "", this.svf && this.svf.acmSessionId && (this.queryParams = "acmsession=" + this.svf.acmSessionId), this.loadProgress = 0, this.cbId = void 0, this.idLoadState = w, this.waitingForExternalIds = []
    };
  M.prototype.dtor = function () {
    this.asyncPropertyOperation({
      operation: "UNLOAD_PROPERTYDB"
    }, (function () {}), (function () {}));
    var e, t = Boolean(this.cbId),
      n = this.instanceTree || this.propertyDbError;
    t && !n && (e = this.cbId, delete g[e], this.propertyDbError = {
      propDbWasUnloaded: !0
    }, this.eventTarget.dispatchEvent({
      type: a.OBJECT_TREE_UNAVAILABLE_EVENT,
      svf: this.svf,
      model: this.model,
      target: this
    })), this.model = null, this.svf = null
  }, M.prototype.processLoadResult = function (e) {
    if (e.instanceTreeStorage) {
      var t = new c.InstanceTreeAccess(e.instanceTreeStorage, e.rootId, e.instanceBoxes);
      this.instanceTree = new l.InstanceTree(t, e.objectCount, e.maxTreeDepth), this.svf && (this.svf.instanceTree = this.instanceTree, this.instanceTree.setFragmentList(this.model.getFragmentList()))
    }
    e.objectCount && (this.hasObjectProperties = e.objectCount, this.svf && (this.svf.hasObjectProperties = e.objectCount)), e.dbidOldToNew && this.model.setDbIdRemap(e.dbidOldToNew), this.onLoadProgress(100), this.eventTarget.dispatchEvent({
      type: a.OBJECT_TREE_CREATED_EVENT,
      svf: this.svf,
      model: this.model,
      target: this
    })
  }, M.prototype.processLoadError = function (e) {
    this.propertyDbError = e, this.onLoadProgress(100), this.eventTarget.dispatchEvent({
      type: a.OBJECT_TREE_UNAVAILABLE_EVENT,
      svf: this.svf,
      model: this.model,
      target: this
    })
  }, M.prototype.load = function (e) {
    var t = this;
    if (e = e || {}, this.svf && this.svf.instanceTree && this.svf.instanceBoxes) setTimeout((function () {
      t.processLoadResult(t.svf)
    }), 0);
    else {
      p || (p = Object(u.createWorkerWithIntercept)()).addEventListenerWithIntercept(v);
      this.cbId = y((function (e) {
        t.processLoadResult(e)
      }), (function (e) {
        t.processLoadError(e)
      }), (function (e) {
        t.onLoadProgress(e.percent)
      }));
      var n = this.svf && this.svf.loadOptions,
        i = !(n && n.disablePrecomputedNodeBoxes),
        r = !(!n || !n.skipExternalIds);
      r || (this.idLoadState = E);
      var o = function (e) {
        for (var t = 1; t < arguments.length; t++) {
          var n = null != arguments[t] ? arguments[t] : {};
          t % 2 ? d(Object(n), !0).forEach((function (t) {
            f(e, t, n[t])
          })) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(n)) : d(Object(n)).forEach((function (t) {
            Object.defineProperty(e, t, Object.getOwnPropertyDescriptor(n, t))
          }))
        }
        return e
      }({
        operation: "LOAD_PROPERTYDB",
        dbPath: this.dbPath,
        sharedDbPath: this.sharedDbPath,
        propertydb: this.dbFiles,
        fragToDbId: this.svf && this.svf.fragments.fragId2dbId,
        fragBoxes: i && this.svf && this.svf.fragments.boxes,
        needsDbIdRemap: this.needsDbIdRemap,
        cbId: this.cbId,
        queryParams: this.queryParams,
        skipExternalIds: r
      }, e);
      p.doOperation(Object(s.initLoadContext)(o))
    }
  }, M.prototype.asyncPropertyOperation = function (e, t, n, i) {
    var r = this;
    if (e.dbPath = this.dbPath, r.instanceTree || r.hasObjectProperties) e.cbId = y(t, n, i), p.doOperation(e);
    else if (r.propertyDbError) n && n(r.propertyDbError);
    else {
      var s = function s(l) {
        r.eventTarget.removeEventListener(a.OBJECT_TREE_CREATED_EVENT, s), r.eventTarget.removeEventListener(a.OBJECT_TREE_UNAVAILABLE_EVENT, s), r.instanceTree || r.hasObjectProperties || r.propertyDbError ? r.asyncPropertyOperation(e, t, n, i) : n && n({
          code: o.ErrorCodes.UNKNOWN_FAILURE,
          msg: "Failed to load properties"
        })
      };
      r.eventTarget.addEventListener(a.OBJECT_TREE_CREATED_EVENT, s), r.eventTarget.addEventListener(a.OBJECT_TREE_UNAVAILABLE_EVENT, s)
    }
  }, M.prototype.getProperties = function (e, t, n) {
    this.idLoadState === w && i.logger.warn("Calling getProperties() will cause loading of the potentially large externalIDs file. Use getProperties2() to avoid this warning."), this.getProperties2(e, t, n, {
      needsExternalId: !0
    })
  }, M.prototype.getProperties2 = function (e, t, n, i) {
    var r = this,
      o = function () {
        r.asyncPropertyOperation({
          operation: "GET_PROPERTIES",
          dbId: e
        }, t, n)
      };
    i && i.needsExternalId ? this.loadExternalIds().then(o).catch(n) : o()
  }, M.prototype.getBulkProperties = function (e, t, n, r, o) {
    var a = {
      ignoreHidden: o,
      propFilter: t,
      needsExternalId: !t || t.includes("externalId")
    };
    a.needsExternalId && this.idLoadState === w && i.logger.warn("Calling getProperties() will cause loading of the potentially large externalIDs file. Use getProperties2() to avoid this warning."), this.getBulkProperties2(e, a, n, r)
  }, M.prototype.getBulkProperties2 = function (e, t, n, i) {
    var r = this,
      o = function () {
        r.asyncPropertyOperation({
          operation: "GET_PROPERTIES",
          dbIds: e,
          propFilter: t.propFilter,
          ignoreHidden: t.ignoreHidden
        }, n, i)
      };
    (t = t || {}) && t.needsExternalId ? this.loadExternalIds().then(o).catch(i) : o()
  }, M.prototype.searchProperties = function (e, t, n, i) {
    this.asyncPropertyOperation({
      operation: "SEARCH_PROPERTIES",
      searchText: e,
      attributeNames: t
    }, n, i)
  }, M.prototype.findProperty = function (e) {
    var t = this;
    return new Promise((function (n, i) {
      t.asyncPropertyOperation({
        operation: "FIND_PROPERTY",
        propertyName: e
      }, n, i)
    }))
  }, M.prototype.diffProperties = function (e, t, n, i, r) {
    this.asyncPropertyOperation({
      operation: "DIFF_PROPERTIES",
      dbPath2: e,
      diffOptions: i
    }, t, n, r)
  }, M.prototype.findLayers = function () {
    var e = this;
    return new Promise((function (t, n) {
      e.asyncPropertyOperation({
        operation: "FIND_LAYERS"
      }, t, n)
    }))
  }, M.prototype.getExternalIdMapping = function (e, t, n) {
    var i = this;
    return this.loadExternalIds().then((function () {
      i.asyncPropertyOperation({
        operation: "BUILD_EXTERNAL_ID_MAPPING",
        extIdFilter: n
      }, e, t)
    }))
  }, M.prototype.getLayerToNodeIdMapping = function (e, t) {
    this.asyncPropertyOperation({
      operation: "BUILD_LAYER_TO_NODE_ID_MAPPING"
    }, e, t)
  }, M.prototype.executeUserFunction = function (e, t) {
    var n, i = this;
    if ("function" == typeof e) e = e.toString();
    else if ("string" != typeof e) return Promise.reject("Expected Function or string.");
    try {
      n = new Blob([e], {
        type: "application/javascript"
      })
    } catch (t) {
      var r = new BlobBuilder;
      r.append(e), n = r.getBlob()
    }
    var o = URL.createObjectURL(n);
    return new Promise((function (e, n) {
      i.asyncPropertyOperation({
        operation: "USER_FUNCTION",
        userFunction: o,
        userData: t
      }, e, n)
    }))
  }, M.prototype.isObjectTreeLoaded = function () {
    return !!this.instanceTree
  }, M.prototype.getObjectTree = function (e, t) {
    var n = this;
    if (n.instanceTree) e(n.instanceTree);
    else if (n.propertyDbError) t && t(n.propertyDbError);
    else if ("hasObjectProperties" in n) n.svf && n.svf.is2d && t ? t("F2D files do not have an InstanceTree.") : e(null);
    else {
      var i = function i() {
        n.eventTarget.removeEventListener(a.OBJECT_TREE_CREATED_EVENT, i), n.eventTarget.removeEventListener(a.OBJECT_TREE_UNAVAILABLE_EVENT, i), n.getObjectTree(e, t)
      };
      n.eventTarget.addEventListener(a.OBJECT_TREE_CREATED_EVENT, i), n.eventTarget.addEventListener(a.OBJECT_TREE_UNAVAILABLE_EVENT, i)
    }
  }, M.prototype.onLoadProgress = function (e) {
    this.eventTarget.dispatchEvent({
      type: a.OBJECT_TREE_LOAD_PROGRESS_EVENT,
      percent: e,
      svf: this.svf,
      model: this.model,
      target: this
    }), this.loadProgress = e
  }, M.prototype.getLoadProgress = function () {
    return this.loadProgress
  }, M.prototype.isLoadDone = function () {
    return 100 == this.loadProgress
  }, M.prototype.loadExternalIds = function () {
    var e = this;
    switch (this.idLoadState) {
      case E:
        return Promise.resolve();
      case S:
        return Promise.reject();
      case w:
        this.idLoadState = A;
        var t = {
          operation: "LOAD_EXTERNAL_IDS",
          idsFile: this.dbFiles.ids[0],
          queryParams: this.queryParams
        };
        Object(s.initLoadContext)(t), this.asyncPropertyOperation(t, (function () {
          e.idLoadState = E, e.waitingForExternalIds.forEach((function (e) {
            return e.resolve()
          }))
        }), (function () {
          e.idLoadState = S, e.waitingForExternalIds.forEach((function (e) {
            return e.reject()
          }))
        }))
    }
    return new Promise((function (t, n) {
      e.waitingForExternalIds.push({
        resolve: t,
        reject: n
      })
    }))
  }
}, function (e, t, n) {
  "use strict";
  n.r(t), n.d(t, "ModelUnits", (function () {
    return c
  })), n.d(t, "Model", (function () {
    return u
  }));
  var i = n(200),
    r = (n(115), n(42)),
    o = n(18),
    a = (n(1), n(26)),
    s = n(3),
    l = n(125),
    c = {
      METER: "m",
      CENTIMETER: "cm",
      MILLIMETER: "mm",
      FOOT: "ft",
      INCH: "in",
      POINT: "pt"
    };

  function u(e) {
    i.RenderModel.call(this, e), this.myData = e, this.topology = null, this.topologyPromise = null, this.svfUUID = null, this.defaultCameraHash = null, this.getInstanceTree = function () {
      return this.myData ? this.myData.instanceTree : null
    }, this.getBoundingBox = function () {
      return this.myData ? this.myData.bbox : null
    }, this.getFuzzyBox = function (e, t) {
      var n = this;
      e = e || function () {
        var e = n.getFragmentList(),
          t = new THREE.Box3,
          i = new THREE.Vector3,
          r = new THREE.Vector3,
          o = new THREE.Vector3,
          a = 0;

        function s(n) {
          e.getWorldBounds(n, t), t.center(i);
          var s = t.size(r).length();
          o.add(i.multiplyScalar(s)), a += s
        }
        for (var l = 0; l < e.getCount(); l++) s(l);
        return o.multiplyScalar(1 / a), o
      }(), t = t || .75;
      for (var i = this.getFragmentList(), r = new THREE.Box3, o = [], a = 0; a < i.getCount(); a++)
        if (i.getWorldBounds(a, r), !r.empty()) {
          var s = r.distanceToPoint(e);
          0 == s && (s = e.distanceTo(r.center())), o.push({
            fragId: a,
            distance: s
          })
        } o.sort((function (e, t) {
        return e.distance - t.distance
      }));
      var l = new THREE.Box3;
      for (a = 0; a < o.length * t; a++) {
        var c = o[a];
        i.getWorldBounds(c.fragId, r), l.union(r)
      }
      return l
    }, this.is2d = function () {
      return !(!this.myData || !this.myData.is2d)
    }, this.is3d = function () {
      return !this.is2d()
    }, this.isOTG = function () {
      return this.myData && !!this.myData.isOTG
    }, this.isPdf = function () {
      return !(!this.myData || !this.myData.isPdf)
    }, this.isLeaflet = function () {
      return !(!this.myData || !this.myData.isLeaflet)
    }
  }
  r.EventDispatcher.prototype.apply(u.prototype), u.prototype.constructor = u, u.prototype.getData = function () {
    return this.myData
  }, u.prototype.setUUID = function (e) {
    this.svfUUID = btoa(Object(o.pathToURL)(e))
  }, u.prototype.getDocumentNode = function () {
    var e = this.getData();
    return e.loadOptions && e.loadOptions.bubbleNode || null
  }, u.prototype.getRoot = function () {
    var e = this.getData();
    return e && e.instanceTree ? e.instanceTree.root : null
  }, u.prototype.getRootId = function () {
    var e = this.getData();
    return e && e.instanceTree && e.instanceTree.getRootId() || 0
  }, u.prototype.getUnitData = function (e) {
    var t = {
      unitString: null,
      unitScale: 1
    };
    switch (e) {
      case "meter":
      case "meters":
      case "m":
        return t.unitString = c.METER, t.unitScale = 1, t;
      case "foot":
      case "feet":
      case "ft":
        return t.unitString = c.FOOT, t.unitScale = .3048, t;
      case "feet and inches":
      case "inch":
      case "inches":
      case "in":
        return t.unitString = c.INCH, t.unitScale = .0254, t;
      case "centimeter":
      case "centimeters":
      case "cm":
        return t.unitString = c.CENTIMETER, t.unitScale = .01, t;
      case "millimeter":
      case "millimeters":
      case "mm":
        return t.unitString = c.MILLIMETER, t.unitScale = .001, t;
      case "point":
      case "points":
      case "pt":
        return t.unitString = c.POINT, t.unitScale = .0254 / 72, t;
      default:
        return t
    }
  }, u.prototype.getUnitScale = function () {
    var e;
    if (this.is2d()) e = this.getMetadata("page_dimensions", "page_units", null);
    else {
      var t = this.getData();
      e = t && t.overriddenUnits ? t.overriddenUnits : t && t.scalingUnit ? t.scalingUnit : this.getMetadata("distance unit", "value", null)
    }
    return e && (e = e.toLowerCase()), this.getUnitData(e).unitScale
  }, u.prototype.getUnitString = function () {
    var e;
    if (this.is2d()) e = this.getMetadata("page_dimensions", "model_units", null) || this.getMetadata("page_dimensions", "page_units", null);
    else {
      var t = this.getData();
      e = t && t.overriddenUnits ? t.overriddenUnits : t && t.scalingUnit ? t.scalingUnit : this.getMetadata("distance unit", "value", null)
    }
    return e && (e = e.toLowerCase()), this.getUnitData(e).unitString
  }, u.prototype.getDisplayUnit = function () {
    var e;
    if (this.is2d()) e = this.getMetadata("page_dimensions", "model_units", null) || this.getMetadata("page_dimensions", "page_units", null);
    else {
      var t = this.getData();
      e = t && t.scalingUnit ? t.scalingUnit : this.getMetadata("distance unit", "value", null)
    }
    return e && (e = e.toLowerCase()), this.getUnitData(e).unitString
  }, u.prototype.getMetadata = function (e, t, n) {
    var i = this.getData();
    if (i) {
      var r = i.metadata;
      if (r) {
        var o = r[e];
        if (void 0 !== o) {
          if (!t) return o;
          var a = o[t];
          if (void 0 !== a) return a
        }
      }
    }
    return n
  }, u.prototype.getDefaultCamera = function () {
    var e = this.getData();
    if (!e) return null;
    var t = null,
      n = e.cameras ? e.cameras.length : 0;
    if (0 < n) {
      var i = this.getMetadata("default camera", "index", null);
      if (null !== i && e.cameras[i]) t = e.cameras[i];
      else {
        for (var r = 0; r < n; r++) {
          var o = e.cameras[r];
          if (o.isPerspective) {
            t = o;
            break
          }
        }
        t || (t = e.cameras[0])
      }
    }
    return t
  }, u.prototype.isAEC = function () {
    return !!this.getData().loadOptions.isAEC
  }, u.prototype.hasPageShadow = function () {
    return this.getData().hasPageShadow
  }, u.prototype.getUpVector = function () {
    return this.getMetadata("world up vector", "XYZ", null)
  }, u.prototype.geomPolyCount = function () {
    var e = this.getGeometryList();
    return e ? e.geomPolyCount : null
  }, u.prototype.instancePolyCount = function () {
    var e = this.getGeometryList();
    return e ? e.instancePolyCount : null
  }, u.prototype.isLoadDone = function () {
    var e = this.getData();
    return !(!e || !e.loadDone)
  }, u.prototype.isObjectTreeCreated = function () {
    return !!this.getData().instanceTree
  }, u.prototype.getPropertyDb = function () {
    var e = this.getData();
    return e && e.propDbLoader
  }, u.prototype.getProperties = function (e, t, n) {
    var i = this.getPropertyDb();
    !i || e <= 0 ? n && n() : i.getProperties(e, t, n)
  }, u.prototype.getProperties2 = function (e, t, n, i) {
    var r = this.getPropertyDb();
    !r || e <= 0 ? n && n() : r.getProperties2(e, t, n, i)
  }, u.prototype.getBulkProperties = function (e, t, n, i) {
    Array.isArray(t) && (t = {
      propFilter: t
    });
    var r = (t = t || {}).propFilter || null,
      o = t.ignoreHidden || !1,
      a = this.getPropertyDb();
    a ? a.getBulkProperties(e, r, n, i, o) : i && i()
  }, u.prototype.getBulkProperties2 = function (e, t, n, i) {
    var r = this.getPropertyDb();
    r ? r.getBulkProperties2(e, t, n, i) : i && i()
  }, u.prototype.getExternalIdMapping = function (e, t) {
    var n = this.getPropertyDb();
    n ? n.getExternalIdMapping(e, t) : t && t()
  }, u.prototype.getLayerToNodeIdMapping = function (e, t) {
    var n = this.getPropertyDb();
    n ? n.getLayerToNodeIdMapping(e, t) : t && t()
  }, u.prototype.getObjectTree = function (e, t) {
    var n = this.getPropertyDb();
    n ? n.getObjectTree(e, t) : t && t()
  }, u.prototype.isObjectTreeLoaded = function () {
    var e = this.getPropertyDb();
    return !!e && e.isObjectTreeLoaded()
  }, u.prototype.search = function (e, t, n, i) {
    var r = this.getPropertyDb();
    r ? r.searchProperties(e, i, t, n) : n && n()
  }, u.prototype.findProperty = function (e) {
    var t = this.getPropertyDb();
    return t ? t.findProperty(e) : Promise.reject("Model doesn't have any properties.")
  };
  var h = function (e, t, n, i) {
    var r, o, a, s, l, c, u = !1;
    a = i[n[n.length - 1]].x, r = (s = i[n[n.length - 1]].y) >= t;
    for (var h = 0, d = n.length; h < d; ++h) l = i[n[h]].x, r != (o = (c = i[n[h]].y) >= t) && (c - t) * (a - l) >= (l - e) * (s - c) == o && (u = !u), r = o, a = l, s = c;
    return u
  };
  u.prototype.pointInPolygon = function (e, t, n, i) {
    for (var r = !1, o = 0; o < n.length; o++) h(e, t, n[o], i) && (r = !r);
    return r
  }, u.prototype.getPageToModelTransform = function (e) {
    var t = this.getData();
    if (t.pageToModelTransform) return t.pageToModelTransform;
    var n = t,
      i = n.metadata.page_dimensions,
      r = n.viewports && n.viewports[e];
    if (!r) return new THREE.Matrix4;
    n.viewportTransforms || (n.viewportTransforms = new Array(n.viewports.length));
    var o = n.viewportTransforms[e];
    if (o) return o;
    var s = new a.LmvMatrix4(!0).set(i.logical_width / i.page_width, 0, 0, i.logical_offset_x, 0, i.logical_height / i.page_height, 0, i.logical_offset_y, 0, 0, 1, 0, 0, 0, 0, 1),
      l = r.transform.slice();
    ! function (e) {
      var t = e;
      if (Math.abs(t[0]) < .001)
        if (Math.abs(t[4]) > .001)
          for (var n = 0; n < 4; n++) {
            var i = t[n];
            t[n] = t[n + 4], t[n + 4] = i
          } else
            for (n = 0; n < 4; n++) {
              i = t[n];
              t[n] = t[n + 8], t[n + 8] = i
            }
      if (Math.abs(t[5]) < .001)
        for (n = 4; n < 8; n++) {
          i = t[n];
          t[n] = t[n + 4], t[n + 4] = i
        }
    }(l);
    var c = new a.LmvMatrix4(!0);
    c.elements.set(l);
    var u = new a.LmvMatrix4(!0);
    return u.getInverse(c), u.multiply(s), n.viewportTransforms[e] = u, u
  }, u.prototype.pageToModel = function (e, t, n, i) {
    var r = this.getPageToModelTransform(n);
    if (i) {
      var o = new THREE.Matrix4;
      o.getInverse(r), r = o
    }

    function a(e) {
      if (e) {
        var t = (new THREE.Vector3).set(e.x, e.y, 0).applyMatrix4(r);
        e.x = t.x, e.y = t.y
      }
    }
    a(e), a(t)
  }, u.prototype.pointInClip = function (e, t) {
    for (var n = this.getData().clips, i = [], r = 1; r < n.length; r++)
      if (r !== t) {
        for (var o = [], a = [], s = n[r].contourCounts, l = n[r].points, c = 0, u = [], h = 0; h < s.length; h++) {
          for (var d = 0; d < s[h]; d++) o.push(c), c++;
          a.push(o), o = []
        }
        for (h = 0; h < l.length; h += 2) {
          var f = {
            x: l[h],
            y: l[h + 1]
          };
          u.push(f)
        }
        this.pointInPolygon(e.x, e.y, a, u) && i.push(r)
      } return i
  }, u.prototype.getClip = function (e) {
    for (var t = this.getData().clips, n = [], i = [], r = t[e].contourCounts, o = t[e].points, a = 0, s = [], l = 0; l < r.length; l++) {
      for (var c = 0; c < r[l]; c++) n.push(a), a++;
      i.push(n), n = []
    }
    for (l = 0; l < o.length; l += 2) {
      var u = {
        x: o[l],
        y: o[l + 1]
      };
      s.push(u)
    }
    return {
      contours: i,
      points: s
    }
  }, u.prototype.getTopoIndex = function (e) {
    var t = this.getData();
    if (t && t.fragments) {
      var n = t.fragments.topoIndexes;
      if (n) return n[e]
    }
  }, u.prototype.getTopology = function (e) {
    return this.topology ? this.topology[e] : null
  }, u.prototype.hasTopology = function () {
    return !!this.topology
  }, u.prototype.fetchTopology = function (e) {
    if (this.topology) return Promise.resolve(this.topology);
    var t = this.getData();
    if (!t.topologyPath) return Promise.reject({
      error: "no-topology"
    });
    var n = e || (Object(s.isMobileDevice)() ? 20 : 100);
    if (t.topologySizeMB > n) return Promise.reject({
      error: "topology-too-big",
      limitMB: n,
      topologyMB: t.topologySizeMB
    });
    if (!this.topologyPromise) {
      var i = this;
      this.topologyPromise = new Promise((function (e, t) {
        i.loader.fetchTopologyFile(i.getData().topologyPath, (function (n) {
          n && n.topology ? (i.topology = n.topology, e(n.topology)) : t(n)
        }))
      }))
    }
    return this.topologyPromise
  }, u.prototype.hasGeometry = function () {
    var e = this.getData();
    return !!e && (!!e.isLeaflet || e.fragments.length > 0)
  }, u.prototype.getFragmentPointer = function (e) {
    return e ? new l.FragmentPointer(this.getFragmentList(), e) : null
  }, u.prototype.clone = function () {
    var e = new u(this.myData);
    return e.topology = this.topology, e.topologyPromise = this.topologyPromise, e.svfUUID = this.svfUUID, e.defaultCameraHash = this.defaultCameraHash, e.setInnerAttributes(this.getInnerAttributes()), e
  }
}, function (e, t, n) {
  "use strict";
  n.r(t);
  var i = n(238),
    r = n(1),
    o = n(50),
    a = (n(200), n(45)),
    s = n(0),
    l = n(36),
    c = n(400),
    u = n.n(c),
    h = n(401),
    d = n.n(h),
    f = n(30),
    p = {
      uniforms: s.UniformsUtils.merge([f.ShaderChunks.CutPlanesUniforms, {
        pixelsPerUnit: {
          type: "f",
          value: 1
        },
        aaRange: {
          type: "f",
          value: .5
        },
        tLayerMask: {
          type: "t",
          value: null
        },
        tLineStyle: {
          type: "t",
          value: null
        },
        vLineStyleTexSize: {
          type: "v2",
          value: new s.Vector2(13, 70)
        },
        tRaster: {
          type: "t",
          value: null
        },
        tSelectionTexture: {
          type: "t",
          value: null
        },
        vSelTexSize: {
          type: "v2",
          value: new s.Vector2(4096, 1)
        },
        displayPixelRatio: {
          type: "f",
          value: 1
        },
        opacity: {
          type: "f",
          value: 1
        },
        selectionColor: {
          type: "v4",
          value: new s.Vector4(0, 0, 1, 1)
        },
        modelId: {
          type: "v3",
          value: new s.Vector3(0, 0, 0)
        },
        viewportId: {
          type: "f",
          value: 0
        },
        swap: {
          type: "f",
          value: 0
        },
        grayscale: {
          type: "f",
          value: 0
        },
        viewportBounds: {
          type: "v4",
          value: new s.Vector4(0, 0, 1, 1)
        },
        unpackXform: {
          type: "v4",
          value: new s.Vector4(1, 1, 0, 0),
          perObject: !0
        },
        tIdColor: {
          type: "t",
          value: null,
          perObject: !0
        },
        vIdColorTexSize: {
          type: "v2",
          value: new s.Vector2(256, 1),
          perObject: !0
        },
        meshAnimTime: {
          type: "f",
          value: 0,
          perObject: !0
        }
      }]),
      attributes: {
        fields1: 0,
        fields2: 0,
        color4b: 0,
        dbId4b: 0,
        flags4b: 0,
        layerVp4b: 0,
        extraParams: 0,
        instFlags4b: 0,
        uvIdColor: 0
      },
      defines: {},
      vertexShader: u.a,
      fragmentShader: d.a
    },
    m = n(402),
    g = n.n(m),
    v = n(403),
    y = n.n(v),
    b = {
      uniforms: s.UniformsUtils.merge([f.ShaderChunks.CutPlanesUniforms, {
        pixelsPerUnit: {
          type: "f",
          value: 1
        },
        aaRange: {
          type: "f",
          value: 1
        },
        tLayerMask: {
          type: "t",
          value: null
        },
        tLineStyle: {
          type: "t",
          value: null
        },
        vLineStyleTexSize: {
          type: "v2",
          value: new s.Vector2(13, 70)
        },
        tRaster: {
          type: "t",
          value: null
        },
        tSelectionTexture: {
          type: "t",
          value: null
        },
        vSelTexSize: {
          type: "v2",
          value: new s.Vector2(4096, 1)
        },
        displayPixelRatio: {
          type: "f",
          value: 1
        },
        size: {
          type: "v2",
          value: new s.Vector2(1024, 768)
        },
        opacity: {
          type: "f",
          value: 1
        },
        selectionColor: {
          type: "v4",
          value: new s.Vector4(0, 0, 1, 1)
        },
        modelId: {
          type: "v3",
          value: new s.Vector3(0, 0, 0)
        },
        viewportId: {
          type: "f",
          value: 0
        },
        swap: {
          type: "f",
          value: 0
        },
        grayscale: {
          type: "f",
          value: 0
        },
        viewportBounds: {
          type: "v4",
          value: new s.Vector4(0, 0, 1, 1)
        },
        unpackXform: {
          type: "v4",
          value: new s.Vector4(1, 1, 0, 0),
          perObject: !0
        },
        tIdColor: {
          type: "t",
          value: null,
          perObject: !0
        },
        vIdColorTexSize: {
          type: "v2",
          value: new s.Vector2(256, 1),
          perObject: !0
        },
        meshAnimTime: {
          type: "f",
          value: 0,
          perObject: !0
        }
      }]),
      attributes: {
        fields1: 0,
        fields2: 0,
        color4b: 0,
        dbId4b: 0,
        flags4b: 0,
        layerVp4b: 0,
        extraParams: 0,
        instFlags4b: 0,
        uvIdColor: 0
      },
      defines: {},
      vertexShader: g.a,
      fragmentShader: y.a
    };

  function _(e, t, n, i, r, o, a) {
    try {
      var s = e[o](a),
        l = s.value
    } catch (e) {
      return void n(e)
    }
    s.done ? t(l) : Promise.resolve(l).then(i, r)
  }

  function x(e) {
    return function () {
      var t = this,
        n = arguments;
      return new Promise((function (i, r) {
        var o = e.apply(t, n);

        function a(e) {
          _(o, i, r, a, s, "next", e)
        }

        function s(e) {
          _(o, i, r, a, s, "throw", e)
        }
        a(void 0)
      }))
    }
  }

  function w(e, t, n) {
    e.x = t.r, e.y = t.g, e.z = t.b, e.w = n
  }
  n.d(t, "MATERIAL_VARIANT", (function () {
    return S
  })), n.d(t, "MaterialManager", (function () {
    return M
  }));
  var E = new s.Color("#0000FF"),
    A = .6,
    S = {
      INSTANCED: 0,
      VERTEX_IDS: 1
    };

  function M(e) {
    this._renderer = e, this._textures = {}, this._texturesToUpdate = [], this._materials = {}, this._materialsNonHDR = {}, this._exposureBias = 0, this._tonemapMethod = 0, this._envMapExposure = 1, this._envRotationSin = 0, this._envRotationCos = 1, this._reflectionMap = null, this._irradianceMap = null, this._cutplanes = [], this._mrtNormals = !1, this._mrtIdBuffer = void 0, this._polygonOffsetOn = !1, this._pixelsPerUnit = 1, this._lineStyleTex = null, this._swapBlackAndWhite = 0, this._grayscaleLines = 0, this._depthWriteTransparent = !0, this._needsTwoSided = !1, this._hasTransparentMaterial = !1, this.hasPrism = !1, this._layerMaskTextures = [], this._layerMaps = [], this._selectionTextures = {}, this._prismWoodTextures = void 0, this.defaultMaterial = new s.MeshPhongMaterial({
      ambient: 197379,
      color: 7829367,
      specular: 3355443,
      shininess: 30,
      shading: s.SmoothShading,
      reflectivity: 0
    }), this.addMaterial("__defaultMaterial__", this.defaultMaterial), this.initLineStyleTexture(), this.refCount = 0
  }
  M.prototype.dtor = function () {
    this.cleanup(), s.Cache.clear()
  }, M.prototype._getModelHash = function (e) {
    return "model:" + (e ? e.id : "") + "|"
  }, M.prototype._getMaterialHash = function (e, t) {
    return e && e.isOTG() ? t : this._getModelHash(e) + "mat:" + t
  }, M.prototype._getTextureHash = function (e, t, n) {
    return this._getModelHash(e) + "tex:" + t + "|map:" + n
  }, M.prototype.addNonHDRMaterial = function (e, t) {
    t.doNotCut || (t.cutplanes = this._cutplanes), this._applyMRTFlags(t), this._materialsNonHDR[e] = t
  }, M.prototype.removeNonHDRMaterial = function (e) {
    delete this._materialsNonHDR[e]
  }, M.prototype.addMaterialNonHDR = function (e, t) {
    this.addNonHDRMaterial(e, t)
  }, M.prototype.addHDRMaterial = function (e, t) {
    this._reflectionMap && !t.disableEnvMap && (t.envMap = this._reflectionMap), this._irradianceMap && (t.irradianceMap = this._irradianceMap), t.exposureBias = Math.pow(2, this._exposureBias), t.tonemapOutput = this._tonemapMethod, t.envMapExposure = this._envMapExposure, t.envRotationSin = this._envRotationSin, t.envRotationCos = this._envRotationCos, this._applyCutPlanes(t), this._applyMRTFlags(t), this._applyPolygonOffset(t, this._polygonOffsetOn), this._materials[e] = t
  }, M.prototype._applyCutPlanes = function (e) {
    e.doNotCut || (e.cutplanes = this._cutplanes, e.needsUpdate = !0, this._cutplanes && this._cutplanes.length > 0 ? e.side = s.DoubleSide : this._needsTwoSided || e.is2d || (e.side = s.FrontSide))
  }, M.prototype.addMaterial = function (e, t, n) {
    var i = t.prismType && -1 !== t.prismType.indexOf("Prism");
    this.hasPrism = i || this.hasPrism, o.MaterialConverter.applyAppearanceHeuristics(t, i || n, this.isDepthWriteTransparentEnabled()), t.side === s.DoubleSide && (this._needsTwoSided = !0), this.addHDRMaterial(e, t)
  }, M.prototype.addLineMaterial = function (e, t, n) {
    var i = n && this._layerMaskTextures[n];
    i && (t.defines.HAS_LAYERS = 1, t.uniforms.tLayerMask.value = i), t.hasLineStyles && (t.defines.HAS_LINESTYLES = 1, t.defines.MAX_LINESTYLE_LENGTH = this._lineStyleTex.image.width, t.uniforms.tLineStyle.value = this._lineStyleTex, t.uniforms.vLineStyleTexSize.value.set(this._lineStyleTex.image.width, this._lineStyleTex.image.height)), t.uniforms.swap.value = this._swapBlackAndWhite, t.uniforms.grayscale.value = this._grayscaleLines, t.doNotCut || (t.cutplanes = this._cutplanes), this._updatePixelScaleForMaterial(t), this._materials[e] = t
  }, M.prototype.addOverrideMaterial = function (e, t) {
    if (this.addNonHDRMaterial(e, t), t.variants)
      for (var n = 0; n < t.variants.length; n++) {
        var i = t.variants[n];
        if (i) {
          var r = e + "_variant_" + n;
          this.addNonHDRMaterial(r, i)
        }
      }
  }, M.prototype.getMaterialVariant = function (e, t, n) {
    var i = !!e.hash,
      r = (i ? e.hash : this._getModelHash(n) + e.id) + "|" + t,
      o = this._materials[r];
    return o || (o = this.cloneMaterial(e, n), t === S.INSTANCED ? (o.useInstancing = !0, o.vertexIds = !0) : t === S.VERTEX_IDS && (o.vertexIds = !0), this.addHDRMaterial(r, o)), i && this._addMaterialRef(o, n.id), o
  }, M.prototype.addInstancingSupport = function (e) {
    var t = e.clone();
    t.useInstancing = !0, t.packedNormals = e.packedNormals;
    var n = e.clone();
    n.wideLines = !0, n.packedNormals = e.packedNormals, e.variants = [t, n], e.getCustomOverrideMaterial = function (e) {
      return e.useInstancing ? this.variants[0] : e.wideLines ? (this.variants[1].linewidth = e.linewidth, this.variants[1]) : null
    }
  }, M.prototype.addCompactLayoutSupport = function (e) {
    var t = function (t) {
        var n = t.clone();
        return e.uniforms.tSelectionTexture.value && (n.uniforms.tSelectionTexture.value = e.uniforms.tSelectionTexture.value), e.uniforms.tLayerMask.value && (n.uniforms.tLayerMask.value = e.uniforms.tLayerMask.value), n.is2d = e.is2d, n.modelScale = e.modelScale, n.defines = Object.assign({}, e.defines), n.attributes = Object.assign({}, e.attributes), n
      },
      n = t(e);
    n.defines.UNPACK_POSITIONS = 1;
    var i = t(e);
    i.defines.USE_INSTANCING = 1;
    var r = t(e);
    r.defines.UNPACK_POSITIONS = 1, r.defines.USE_INSTANCING = 1, e.variants = [n, i, r], e.getCustomOverrideMaterial = function (e) {
      if (e.defines) {
        var t = (e.defines.UNPACK_POSITIONS ? 1 : 0) + (e.defines.USE_INSTANCING ? 2 : 0);
        if (t > 0) return this.variants[t - 1]
      }
      return null
    }
  }, M.prototype.removeMaterial = function (e) {
    delete this._materials[e]
  }, M.prototype.findMaterial = function (e, t) {
    var n = this._getMaterialHash(e, t);
    return this._materials[n]
  }, M.prototype.convertSharedMaterial = function () {
    var e = x(regeneratorRuntime.mark((function e(t, n, i) {
      var r;
      return regeneratorRuntime.wrap((function (e) {
        for (;;) switch (e.prev = e.next) {
          case 0:
            if (r = this.findMaterial(t, i)) {
              e.next = 6;
              break
            }
            return e.next = 4, this.convertOneMaterial(t, n, i);
          case 4:
            (r = e.sent).hash = i;
          case 6:
            return this._addMaterialRef(r, t.id), e.abrupt("return", r);
          case 8:
          case "end":
            return e.stop()
        }
      }), e, this)
    })));
    return function (t, n, i) {
      return e.apply(this, arguments)
    }
  }(), M.prototype.convertOneMaterial = function () {
    var e = x(regeneratorRuntime.mark((function e(t, n, i) {
      var a, l, c, u, h, d, f, p, m, g, v, y, b, _, x, w;
      return regeneratorRuntime.wrap((function (e) {
        for (;;) switch (e.prev = e.next) {
          case 0:
            if (!(a = o.MaterialConverter.isPrismMaterial(n))) {
              e.next = 4;
              break
            }
            return e.next = 4, o.MaterialConverter.loadMaterialConverterPrismLibrary();
          case 4:
            return l = t.getData(), c = l && l.materials ? l.materials.scene.SceneUnit : "inch", (u = a && o.MaterialConverter.swapPrismWoodTextures(this._prismWoodTextures)) && r.logger.warn("Unexpected wood textures converting a material"), e.next = 10, o.MaterialConverter.convertMaterial(n, c);
          case 10:
            if (h = e.sent, l.doubleSided && (h.side = s.DoubleSide), this.addMaterial(i, h), this._hasTransparentMaterial = this._hasTransparentMaterial || h.transparent, o.MaterialConverter.hasTiling(n)) {
              for (h.decals = [], d = n.materials, f = d[n.userassets[0]], p = f.properties.references.base_materials.connections, m = f.properties.references.tiles.connections, g = [], v = 0; v < m.length; v++) y = d[m[v]], g.push(y), (b = o.MaterialConverter.convertMaterial(n, c, null, p[v])).useTiling = !0, b.transparent = !0, h.decals.push({
                uv: 0,
                material: b
              }), this.addMaterial(i + "|tile|" + v, b);
              o.MaterialConverter.materialTilingPattern(n, f, g, h.decals, c)
            }
            if (n.decals)
              for (h.decals || (h.decals = []), _ = 0, x = n.decals.length; _ < x; _++) w = n.decals[_], b = o.MaterialConverter.convertMaterial(w.material, c), h.decals.push({
                uv: w.uv || 0,
                material: b
              }), this.addMaterial(i + "|decal|" + _, b);
            return this._prismWoodTextures = a && o.MaterialConverter.swapPrismWoodTextures(u), e.abrupt("return", h);
          case 18:
          case "end":
            return e.stop()
        }
      }), e, this)
    })));
    return function (t, n, i) {
      return e.apply(this, arguments)
    }
  }(), M.prototype.forEach = function (e, t, n, i) {
    for (var r in i = i || this._materials) {
      var o = i[r];
      t && o.is2d || (e(o), n && o.variants && o.variants.forEach((function (t) {
        t && e(t)
      })))
    }
  };
  var T = {
    needsClear: !1,
    needsRender: !1,
    overlayDirty: !1
  };

  function C(e, t, n) {
    var i = e.slots[n];
    i ? -1 == i.indexOf(t) && i.push(t) : e.slots[n] = [t]
  }
  M.prototype.updateMaterials = function () {
    for (T.needsRender = !1; this._texturesToUpdate.length;) {
      var e = this._texturesToUpdate.pop();
      for (var t in e.slots)
        for (var n = e.slots[t], i = 0; i < n.length; i++) n[i][t] = e.tex, n[i].needsUpdate = !0, T.needsRender = !0
    }
    return T
  }, M.prototype.setTextureInCache = function (e, t, n) {
    var i = this._getTextureHash(e, t.uri, t.mapName),
      r = this._textures[i];
    if (r) {
      for (var o in r.tex || (r.tex = n), r.slots)
        for (var a = r.slots[o], s = 0; s < a.length; s++) a[s][o] = n;
      this._texturesToUpdate.push(r)
    }
  }, M.prototype.loadTextureFromCache = function (e, t, n, i) {
    var r = this._getTextureHash(e, n.uri, n.mapName),
      o = this._textures[r];
    if (o) o.tex ? (t[i] = o.tex, t.needsUpdate = !0) : (o.slots[i] || (o.slots[i] = []), o.slots[i].push(t));
    else {
      var a = {};
      a[i] = [t], this._textures[r] = {
        slots: a,
        tex: null
      }
    }
    return !!o
  }, M.prototype.getModelMaterials = function (e) {
    var t = this._getModelHash(e),
      n = {};
    for (var i in this._materials)
      if (-1 !== i.indexOf(t)) {
        var r = this._materials[i];
        r.defines && r.defines.hasOwnProperty("SELECTION_RENDERER") || (n[i] = r)
      } var o = {};
    for (var i in this._materialsNonHDR) - 1 !== i.indexOf(t) && (o[i] = this._materialsNonHDR[i]);
    var a = {};
    for (var s in this._textures) - 1 !== s.indexOf(t) && (a[s] = this._textures[s]);
    return {
      mats: n,
      matsNonHDR: o,
      textures: a
    }
  }, M.prototype.exportModelMaterials = function (e, t) {
    var n = this.getModelMaterials(e);
    return this.cleanup(e), n
  }, M.prototype.importModelMaterials = function (e, t) {
    for (var n in e.mats) {
      var i = e.mats[n];
      i.is2d ? this.addLineMaterial(n, i, t) : this.addHDRMaterial(n, i)
    }
    for (var n in e.matsNonHDR) this.addMaterialNonHDR(n, e.matsNonHDR[n]);
    for (var r in e.textures) this._textures[r] = e.textures[r]
  }, M.prototype.cloneMaterial = function (e, t) {
    var n = e.isPrismMaterial && Autodesk.Viewing.Private.clonePrismMaterial ? Autodesk.Viewing.Private.clonePrismMaterial(e) : e.clone();
    if (e.defines && (n.defines = Object.assign({}, e.defines)), (n instanceof s.MeshPhongMaterial || n.isPrismMaterial) && (n.packedNormals = e.packedNormals, n.exposureBias = e.exposureBias, n.irradianceMap = e.irradianceMap, n.envMapExposure = e.envMapExposure, n.envRotationSin = e.envRotationSin, n.envRotationCos = e.envRotationCos, n.proteinType = e.proteinType, n.proteinMat = e.proteinMat, n.proteinCategories = e.proteinCategories, n.tonemapOutput = e.tonemapOutput, n.cutplanes = e.cutplanes, n.textureMaps = e.textureMaps, n.texturesLoaded = e.texturesLoaded), e.doNotCut && (n.doNotCut = !0), e.is2d && (n.is2d = !0), e.disableEnvMap && (n.disableEnvMap = !0), e.textureMaps)
      for (var i in e.textureMaps)
        if (e[i]) n[i] = e[i];
        else if (t) {
      var o = n.textureMaps[i],
        a = o.uri,
        l = o.mapName,
        c = this._getTextureHash(t, a, l),
        u = this._textures[c];
      u ? C(u, n, i) : r.logger.error("Missing texture receiver", c)
    } else r.logger.error("Cannot connect pending texture maps because cloneMaterial was called without a model");
    return this._applyMRTFlags(n), n
  }, M.prototype.setupMaterial = function (e, t, n) {
    var i = e.getData(),
      a = this.findMaterial(e, n);
    if (!a) {
      a = this.cloneMaterial(this.defaultMaterial, e);
      var l = this._getMaterialHash(e, n);
      this._materials[l] = a, r.logger.warn("Material (" + n + ") missing, using default material instead.")
    }
    if (t.isLines || t.isWideLines || t.isPoints) {
      var c = !!t.attributes.color,
        u = a;
      if (u || (u = this.defaultMaterial.clone()), t.isPoints) a = new s.PointCloudMaterial({
        vertexColors: c,
        size: t.pointSize
      });
      else {
        var h = c ? "cachedLineMaterialVC" : "cachedLineMaterial";
        a = u[h], t.isWideLines ? (a || ((a = u[h] = new s.MeshBasicMaterial({
          vertexColors: c
        })).wideLines = !0, t.isLines = !1), a.polygonOffset = u.polygonOffset, a.polygonOffsetFactor = u.polygonOffsetFactor, a.polygonOffsetUnits = u.polygonOffsetUnits, a.linewidth = u.linewidth) : a || (a = u[h] = new s.LineBasicMaterial({
          vertexColors: c
        }))
      }
      c || (a.color = u.color), a.svfMatId = n;
      var d = this._getMaterialHash(e, n + "_line_" + a.id);
      this.addMaterialNonHDR(d, a), i.hasLines = !0
    } else a.svfMatId = n, o.MaterialConverter.applyGeometryFlagsToMaterial(a, t);
    return a
  }, M.prototype._addMaterialRef = function (e, t) {
    e._sharedBy || (e._sharedBy = []);
    var n = e._sharedBy; - 1 === n.indexOf(t) && n.push(t)
  }, M.prototype._removeMaterialRef = function (e, t) {
    var n = e._sharedBy,
      i = n ? n.indexOf(t) : -1; - 1 !== i && n.splice(i, 1)
  }, M.prototype.cleanup = function (e) {
    var t = this,
      n = this._getModelHash(e),
      i = {};
    for (var r in this._textures) {
      var a = this._textures[r]; - 1 === r.indexOf(n) ? i[r] = a : a.tex && (a.tex.dispose(), a.tex.needsUpdate = !0)
    }
    this._textures = i;
    var l = {},
      c = {
        type: "dispose"
      };
    for (var u in this._materials) {
      var h = this._materials[u],
        d = !e || -1 !== u.indexOf(n);
      if (h._sharedBy && (d ? h._sharedBy.length = 0 : (this._removeMaterialRef(h, e.id), 0 === h._sharedBy.length && (d = !0))), d) {
        if ((h = this._materials[u]).dispatchEvent(c), h.needsUpdate = !0, h.envMap = null, h.is2d) {
          h.uniforms.tLayerMask.value = null, h.uniforms.tLineStyle.value = null;
          var f = h.uniforms.tRaster;
          f && f.value instanceof s.Texture && (f.value.dispose(), f.value.needsUpdate = !0)
        }
      } else l[u] = this._materials[u]
    }
    this._materials = l;
    var p = {};
    for (var u in this._materialsNonHDR) {
      if (e && -1 === u.indexOf(n)) p[u] = this._materialsNonHDR[u];
      else(h = this._materialsNonHDR[u]).dispatchEvent(c), h.needsUpdate = !0
    }
    this._materialsNonHDR = p;
    var m = function (e, n) {
      var i = t._selectionTextures[e];
      i && (i.dispose(), i.needsUpdate = !0, n && delete t._selectionTextures[e])
    };
    if (this._prismWoodTextures && o.MaterialConverter.disposePrismWoodTextures(this._prismWoodTextures), this._prismWoodTextures = void 0, e) m(e.id, !0), delete this._layerMaskTextures[e.id], delete this._layerMaps[e.id];
    else {
      for (var g in this._selectionTextures) this._selectionTextures.hasOwnProperty(g) && m(g, !1);
      this._selectionTextures = {}, this._layerMaskTextures = {}, this._layerMaps = {}
    }
  }, M.prototype.toggleDepthWriteTransparent = function (e) {
    this._depthWriteTransparent != e && (this._depthWriteTransparent = e, this.forEach((function (t) {
      t.lmv_depthWriteTransparent && (t.depthWrite = e)
    }), !1, !0))
  }, M.prototype.isDepthWriteTransparentEnabled = function () {
    return this._depthWriteTransparent
  }, M.prototype.hasTwoSidedMaterials = function () {
    return this._needsTwoSided
  }, M.prototype.hasTransparentMaterial = function () {
    return this._hasTransparentMaterial
  }, M.prototype.texturesLoaded = function () {
    return 0 === this._texturesToUpdate.length
  }, M.prototype.renderer = function () {
    return this._renderer
  }, M.prototype.setTonemapExposureBias = function (e) {
    this._exposureBias = e;
    var t = Math.pow(2, e);
    this.forEach((function (e) {
      e.exposureBias = t, e.needsUpdate = !0
    }), !0, !0)
  }, M.prototype.setTonemapMethod = function (e) {
    this._tonemapMethod = e, this.forEach((function (t) {
      t.tonemapOutput = e, t.needsUpdate = !0
    }), !0, !0)
  }, M.prototype.setEnvExposure = function (e) {
    var t = Math.pow(2, e);
    this._envMapExposure = t, this.forEach((function (e) {
      e.envMapExposure = t, e.needsUpdate = !0
    }), !0, !0)
  }, M.prototype.setEnvRotation = function (e) {
    var t = this._envRotationSin = Math.sin(e),
      n = this._envRotationCos = Math.cos(e);
    this.forEach((function (e) {
      e.envRotationSin = t, e.envRotationCos = n, e.needsUpdate = !0
    }), !0, !0)
  }, M.prototype.setReflectionMap = function (e) {
    this._reflectionMap = e, this.forEach((function (t) {
      t.disableEnvMap || (t.envMap = e, t.needsUpdate = !0)
    }), !0, !0)
  }, M.prototype.setIrradianceMap = function (e) {
    this._irradianceMap = e, this.forEach((function (t) {
      t.irradianceMap = e, t.needsUpdate = !0
    }), !0, !0)
  }, M.prototype.setCutPlanes = function (e) {
    for (var t = this, n = !1, i = this._cutplanes.length !== (e && e.length || 0); this._cutplanes.length > 0;) this._cutplanes.pop();
    if (e)
      for (var r = 0; r < e.length; r++) this._cutplanes.push(e[r].clone());
    if (i)
      for (var o in this.forEach((function (e) {
          t._applyCutPlanes(e), n = n || e.side == s.DoubleSide
        }), !1, !0), this._materialsNonHDR) this._materialsNonHDR[o].doNotCut || (this._materialsNonHDR[o].needsUpdate = !0);
    return n || this._needsTwoSided
  }, M.prototype.getCutPlanes = function () {
    return this._cutplanes.slice()
  }, M.prototype.getCutPlanesRaw = function () {
    return this._cutplanes
  }, M.prototype._applyPolygonOffset = function (e) {
    (e instanceof s.MeshPhongMaterial || e.isPrismMaterial) && (e.polygonOffset = this._polygonOffsetOn, e.polygonOffsetFactor = this._polygonOffsetFactor, e.polygonOffsetUnits = this._polygonOffsetUnits, e.extraDepthOffset && (e.polygonOffsetFactor += e.extraDepthOffset), e.needsUpdate = !0)
  }, M.prototype.getPolygonOffsetOn = function () {
    return this._polygonOffsetOn
  }, M.prototype.getPolygonOffsetFactor = function () {
    return this._polygonOffsetFactor
  }, M.prototype.getPolygonOffsetUnits = function () {
    return this._polygonOffsetUnits
  }, M.prototype.togglePolygonOffset = function (e, t, n) {
    this._polygonOffsetOn = e, this._polygonOffsetFactor = e ? t || 1 : 0, this._polygonOffsetUnits = e ? n || .1 : 0;
    var i = this;
    this.forEach((function (e) {
      i._applyPolygonOffset(e)
    }), !1, !0)
  }, M.prototype._applyMRTFlags = function (e) {
    var t = e.supportsMrtNormals || e instanceof s.MeshPhongMaterial || e.isPrismMaterial || e instanceof s.MeshBasicMaterial || e instanceof s.LineBasicMaterial,
      n = e.mrtNormals,
      i = e.mrtIdBuffer,
      r = this._renderer && this._renderer.supportsMRT();
    e.mrtNormals = t && r && this._mrtNormals, e.mrtIdBuffer = r ? this._mrtIdBuffer : void 0, e.mrtNormals === n && e.mrtIdBuffer === i || (e.needsUpdate = !0)
  }, M.prototype.toggleMRTSetting = function (e) {
    this._mrtNormals = e.mrtNormals, this._mrtIdBuffer = e.mrtIdBuffer;
    var t = this;

    function n(e) {
      t._applyMRTFlags(e)
    }
    this.forEach(n, !0), this.forEach(n, !0, !0, this._materialsNonHDR)
  }, M.prototype.initLineStyleTexture = function () {
    this._lineStyleTex = Object(i.createLinePatternTexture)()
  }, M.prototype.setLineStyleTexture = function (e) {
    this._lineStyleTex = e
  }, M.prototype.initLayersTexture = function (e, t, n) {
    for (var i = this._layerMaskTextures[n], r = i ? i.image.data : new Uint8Array(65536), o = 0, a = e; o < a; o++) r[o] = 255;
    (i = i || new s.DataTexture(r, 256, 256, s.LuminanceFormat, s.UnsignedByteType, s.UVMapping, s.ClampToEdgeWrapping, s.ClampToEdgeWrapping, s.NearestFilter, s.NearestFilter, 0)).generateMipmaps = !1, i.flipY = !1, i.needsUpdate = !0, this._layerMaskTextures[n] = i, this._layerMaps[n] = t
  }, M.prototype.setLayerVisible = function (e, t, n) {
    for (var i = this._layerMaskTextures[n], r = i.image.data, o = this._layerMaps[n], a = t ? 255 : 0, s = 0; s < e.length; ++s) {
      r[o[e[s]]] = a
    }
    i.needsUpdate = !0, this.forEach((function (e) {
      e.is2d && (e.needsUpdate = !0)
    }))
  }, M.prototype.initSelectionTexture = function (e, t) {
    for (var n = e || 1, i = 0 | Math.ceil(n / 4096), r = 1; r < i;) r *= 2;
    i = r;
    for (var o = new Uint8Array(4096 * i), a = 0; a < n; a++) o[a] = 0;
    var l = new s.DataTexture(o, 4096, i, s.LuminanceFormat, s.UnsignedByteType, s.UVMapping, s.ClampToEdgeWrapping, s.ClampToEdgeWrapping, s.NearestFilter, s.NearestFilter, 0);
    return l.generateMipmaps = !1, l.flipY = !1, l.needsUpdate = !0, this._selectionTextures[t] = l, l
  }, M.prototype.highlightObject2D = function (e, t, n) {
    var i = this._selectionTextures[n];
    i && (i.image.data[e] = t ? 255 : 0, i.needsUpdate = !0)
  }, M.prototype._updatePixelScaleForMaterial = function (e) {
    e.is2d && (e.isScreenSpace ? (e.uniforms.size.value.set(this._deviceWidth, this._deviceHeight), e.uniforms.aaRange.value = .5) : e.uniforms.aaRange.value = .5 / (this._pixelsPerUnit * e.modelScale), e.uniforms.pixelsPerUnit.value = this._pixelsPerUnit * e.modelScale)
  }, M.prototype.updatePixelScale = function (e, t, n) {
    var i = this;
    this._pixelsPerUnit = e, this._deviceWidth = t, this._deviceHeight = n, this.forEach((function (e) {
      return i._updatePixelScaleForMaterial(e)
    }))
  }, M.prototype.updateSwapBlackAndWhite = function (e) {
    var t = this._swapBlackAndWhite = e ? 1 : 0;
    this.forEach((function (e) {
      e.is2d && (e.uniforms.swap.value = t)
    }))
  }, M.prototype.setGrayscale = function (e) {
    var t = this._grayscaleLines = e ? 1 : 0;
    this.forEach((function (e) {
      e.is2d && (e.uniforms.grayscale.value = t)
    }))
  }, M.prototype.updateViewportId = function (e) {
    this.forEach((function (t) {
      t.is2d && (t.uniforms.viewportId.value = e, t.needsUpdate = !0)
    }))
  }, M.prototype.create2DMaterial = function (e, t, n, i, r) {
    var o = e ? e.getData() : null,
      c = "__lineMaterial__";
    t.image && (c += "|image:" + t.image.name), t.clip && (c += "|clip:" + JSON.stringify(t.clip)), n && (c += "|id"), i && (c += "|selection"), t.skipEllipticals && (c += "|skipEllipticals"), t.skipCircles && (c += "|skipCircles"), t.skipTriangleGeoms && (c += "|skipTriangleGeoms"), t.useInstancing && (c += "|useInstancing"), t.isScreenSpace && (c += "|isScreenSpace"), t.unpackPositions && (c += "|unpackPositions"), t.hasLineStyles && (c += "|hasLineStyles");
    var u = this._getMaterialHash(e, c);
    if (!this._materials.hasOwnProperty(u)) {
      var h;
      if (t.isScreenSpace ? (h = Object(l.createShaderMaterial)(b)).isScreenSpace = !0 : h = Object(l.createShaderMaterial)(p), t.hasLineStyles && (h.hasLineStyles = !0), h.is2d = !0, h.transparent = !0, h.depthWrite = !1, h.depthTest = !1, h.side = s.DoubleSide, h.blending = s.NormalBlending, "multiply" == t.compositeOperation && (h.blending = s.MultiplyBlending), n ? (h.defines.ID_COLOR = 1, h.blending = s.NoBlending) : i ? (h.uniforms.tSelectionTexture.value = i, h.uniforms.vSelTexSize.value.set(i.image.width, i.image.height), h.defines.SELECTION_RENDERER = 1, this.get2dSelectionColor(h.uniforms.selectionColor)) : (this.get2dSelectionColor(h.uniforms.selectionColor), this.renderer() && this.renderer().supportsMRT() && (h.mrtIdBuffer = this._mrtIdBuffer)), t.skipEllipticals || (h.defines.HAS_ELLIPTICALS = 1), t.skipCircles || (h.defines.HAS_CIRCLES = 1), t.skipTriangleGeoms || (h.defines.HAS_TRIANGLE_GEOMS = 1), t.useInstancing && (h.defines.USE_INSTANCING = 1), t.unpackPositions && !n && (h.defines.UNPACK_POSITIONS = 1), t.msdfFontTexture && (h.defines.MSDF_TEXTURE_FONT = 1), t.imageUVTexture && (h.defines.IMAGE_UV_TEXTURE = 1), t.viewportBounds && (h.uniforms.viewportBounds.value = t.viewportBounds, h.defines.VIEWPORT_CLIPPING = 1), "number" == typeof t.opacity && (h.uniforms.opacity.value = t.opacity), t.image) {
        var d = function (n, i) {
          n ? (n.wrapS = s.ClampToEdgeWrapping, n.wrapT = s.ClampToEdgeWrapping, n.minFilter = i ? s.LinearFilter : s.LinearMipMapLinearFilter, n.magFilter = s.LinearFilter, n.anisotropy = 1, n.flipY = !0, n.generateMipmaps = !0, n.needsUpdate = !0, t.msdfFontTexture || t.imageUVTexture || (h.defines.HAS_RASTER_QUADS = 1), h.uniforms.tRaster.value = n, h.needsUpdate = !0, r && r(n, e)) : r && r(n, e, t)
        };
        if ("undefined" != typeof HTMLCanvasElement && t.image instanceof HTMLCanvasElement || "undefined" != typeof HTMLImageElement && t.image instanceof HTMLImageElement) d(new s.Texture(a.TextureLoader.imageToCanvas(t.image, "multiply" == t.compositeOperation, t.compositeCanvasColor), s.UVMapping), !0);
        else a.TextureLoader.loadTextureWithSecurity(t.image.dataURI, s.UVMapping, d, null, o.acmSessionId)
      }
      h.modelScale = t.modelScale || 1, t.doNotCut && (h.doNotCut = !0), h.textureMaps = {}, this.addLineMaterial(u, h, e && e.id), (n || i) && this.addCompactLayoutSupport(h)
    }
    return c
  }, M.prototype.set2dSelectionColor = function (e, t) {
    E = new s.Color(e), A = null == t ? A : t, this.forEach((function (e) {
      if (e.is2d && e.uniforms) {
        var t = e.uniforms.selectionColor;
        t && (w(t.value, E, A), e.needsUpdate = !0)
      }
    }))
  }, M.prototype.get2dSelectionColor = function (e) {
    return e && w(e.value, E, A), E
  }, M.prototype.get2dSelectionOpacity = function () {
    return A
  }
}, function (e, t, n) {
  "use strict";
  n.r(t), n.d(t, "Navigation", (function () {
    return o
  }));
  var i = n(0),
    r = n(1);

  function o(e) {
    this.__options = {
      dollyToPivot: !1,
      orbitPastPoles: !0,
      reverseDolly: !1,
      reverseHorizontalLook: !1,
      reverseVerticalLook: !1,
      useLeftHandedInput: !1,
      usePivotAlways: !1,
      lockNavigation: !1
    }, this.__lockSettings = {
      orbit: !1,
      pan: !1,
      zoom: !1,
      roll: !1,
      fov: !1,
      gotoview: !1,
      walk: !1
    }, this.FIT_TO_VIEW_VERTICAL_MARGIN = .05, this.FIT_TO_VIEW_VERTICAL_OFFSET = 0, this.FIT_TO_VIEW_HORIZONTAL_MARGIN = .05, this.FIT_TO_VIEW_HORIZONTAL_OFFSET = 0, this.__pivotIsSetFlag = !1, this.__fitToViewRequested = !1, this.__homeViewRequested = !1, this.__transitionActive = !1, this.__destinationView = null, this.__is2D = !1, this.__isTouchDevice = !1, this.__kEpsilon = 1e-6, this.__minDistance = 1e-5;
    var t = void 0,
      n = void 0,
      r = 2,
      o = 200,
      a = null,
      s = {
        left: 0,
        top: 0,
        width: 1,
        height: 1
      };
    this.uninitialize = function () {
      this.setCamera(null)
    }, this.setCamera = function (e) {
      e !== a && (a = e, e && (e.hasOwnProperty("target") || (e.target = new i.Vector3(0, 0, 0)), e.hasOwnProperty("pivot") || (e.pivot = new i.Vector3(0, 0, 0)), e.worldup = e.up.clone(), e.dirty = !0))
    }, this.getCamera = function () {
      return a
    }, this.setScreenViewport = function (e) {
      s = e
    }, this.getScreenViewport = function () {
      return s
    }, this.__setUp = function (e) {
      if (e && a && 0 !== e.clone().normalize().sub(a.worldup).lengthSq()) return a.worldup.copy(e).normalize(), a.dirty = !0, !0;
      return !1
    }, this.__getUp = function () {
      return a ? a.worldup : new i.Vector3(0, 1, 0)
    }, this.setView = function (e, t) {
      a && e && t && (a.position.copy(e), a.target.copy(t), a.dirty = !0)
    }, this.orientCameraUp = function () {
      a && this.isActionEnabled("roll") && (a.up.copy(this.getAlignedUpVector()), a.dirty = !0)
    }, this.getPivotPoint = function () {
      return a ? a.pivot.clone() : new i.Vector3(0, 0, 0)
    }, this.setPivotPoint = function (e) {
      a && e && a.pivot.copy(e)
    }, this.getPosition = function () {
      return a ? a.position.clone() : new i.Vector3(0, 0, 1)
    }, this.setPosition = function (e) {
      a && e && (a.position.copy(e), a.dirty = !0)
    }, this.setTarget = function (e) {
      a && e && (a.target.copy(e), a.dirty = !0)
    }, this.getTarget = function () {
      return a ? a.target.clone() : new i.Vector3(0, 0, 0)
    }, this.getEyeVector = function () {
      return a ? a.target.clone().sub(a.position) : new i.Vector3(0, 0, -1)
    }, this.getEyeToCenterOfBoundsVec = function (e) {
      return a ? e.center().sub(a.position) : new i.Vector3(0, 0, -1)
    }, this.getFovMin = function () {
      return 6.88
    }, this.getFovMax = function () {
      return 100
    }, this.setZoomInLimitFactor = function (e) {
      o = e
    }, this.getZoomInLimitFactor = function () {
      return o
    }, this.setZoomOutLimitFactor = function (e) {
      r = e
    }, this.getZoomOutLimitFactor = function () {
      return r
    }, this.isPointVisible = function (e) {
      return (new i.Frustum).setFromMatrix(a.projectionMatrix.clone().multiply(a.matrixWorldInverse)).containsPoint(e)
    }, this.setVerticalFov = function (e, t) {
      if ((!a || a.isPerspective) && (e < 6.88 ? e = 6.88 : e > 100 && (e = 100), a && this.isActionEnabled("fov"))) {
        if (Math.abs(a.fov - e) <= 1e-6) return;
        if (t) {
          var n = this.__pivotIsSetFlag && this.isPointVisible(this.getPivotPoint()),
            r = this.getPosition(),
            o = this.getEyeVector(),
            s = i.Math.degToRad(a.fov),
            l = i.Math.degToRad(e),
            c = n ? this.getPivotPlaneDistance() : o.length(),
            u = c * Math.tan(.5 * s) / Math.tan(.5 * l),
            h = o.normalize().multiplyScalar(c - u);
          this.setPosition(r.add(h)), n && this.setTarget(this.getTarget().add(h))
        }
        a.setFov(e), a.dirty = !0
      }
    }, this.applyRotation = function (e, t, n, i) {
      e.sub(n), e.applyAxisAngle(i, t), e.add(n)
    }, this.getSignedAngle = function (e, t, n) {
      var i = e.angleTo(t),
        r = e.clone().cross(t).normalize();
      return i * (n.dot(r) > 0 ? 1 : -1)
    }, this.computeFit = function (t, n, r, o, a) {
      if (!o || o.empty()) return {
        position: t,
        target: n
      };
      a = void 0 === a ? 1 : a;
      for (var s = o.center(), l = o.size(), c = t.clone().sub(n).normalize(), u = Math.tan(i.Math.degToRad(.5 * r)), h = 0, d = this.computeOrthogonalUp(t, n), f = c.clone().cross(d).normalize(), p = new i.Vector3, m = 0 === l.z ? 4 : 8, g = 0; g < m; g++) {
        p.set(0 == (1 & g) ? -.5 * l.x : .5 * l.x, 0 == (2 & g) ? -.5 * l.y : .5 * l.y, 0 == (4 & g) ? -.5 * l.z : .5 * l.z);
        var v = 0;
        e.isPerspective && (v = p.dot(c));
        var y = Math.abs(p.dot(d)),
          b = Math.abs(p.dot(f)),
          _ = v + (1 + 2 * this.FIT_TO_VIEW_VERTICAL_MARGIN / (1 - 2 * this.FIT_TO_VIEW_VERTICAL_MARGIN)) * y / u;
        h < _ && (h = _), h < (_ = v + (1 + 2 * this.FIT_TO_VIEW_HORIZONTAL_MARGIN / (1 - 2 * this.FIT_TO_VIEW_HORIZONTAL_MARGIN)) * b / (a * u)) && (h = _)
      }
      return s.add(d.multiplyScalar(-h * this.FIT_TO_VIEW_VERTICAL_OFFSET)), s.add(f.multiplyScalar(h * this.FIT_TO_VIEW_HORIZONTAL_OFFSET)), c.multiplyScalar(h), {
        position: s.clone().add(c),
        target: s
      }
    }, this.computeOrthogonalUp = function (e, t) {
      var n = this.__getUp(),
        i = t.clone().sub(e);
      if (0 === i.lengthSq()) return i.copy(n);
      var r = i.clone().cross(n);
      return 0 === r.lengthSq() && (n.z > n.y ? i.y -= 1e-4 : i.z -= 1e-4, r.crossVectors(i, n)), r.cross(i).normalize()
    }, this.fitBounds = function (e, t, n) {
      var i = this.getTarget(),
        r = this.getPosition();
      if (!this.isActionEnabled("gotoview") || !t || t.empty()) return {
        position: r,
        target: i
      };
      var o = this.getVerticalFov();
      if (!n) {
        var s = (t = t.clone()).center(),
          l = r.clone().sub(i).normalize(),
          c = this.getSignedAngle(this.getCameraUpVector(), this.getAlignedUpVector(), l);
        this.applyRotation(t.min, c, s, l), this.applyRotation(t.max, c, s, l), t.setFromPoints([t.min.clone(), t.max.clone()])
      }
      var u = this.computeFit(r, i, o, t, a.aspect),
        h = n ? this.computeOrthogonalUp(r, i) : a.up;
      return e ? (a.up.copy(h), this.setView(u.position, u.target)) : this.setRequestTransitionWithUp(!0, u.position, u.target, o, h), this.setPivotPoint(u.target), this.setPivotSetFlag(!0), u
    }, this.computeOverviewDistance = function (e) {
      if (this.__is2D) {
        var t = e.size(),
          n = a.aspect,
          r = t.x / n,
          o = t.y;
        return Math.max(r, o)
      }
      var s = this.getVerticalFov(),
        l = (t = e.size()).length();
      return 0 === l && (l = 2), a.isPerspective ? .5 * l / Math.tan(i.Math.degToRad(.5 * s)) : l
    }, this.applyDollyConstraint = function (e, i) {
      if (!(t || n || r)) return e;
      var s = e;
      if ((t || r && i) && e > 1) {
        var l, c = a.isPerspective ? this.getEyeToCenterOfBoundsVec(i) : this.getEyeVector();
        l = t ? r * this.computeOverviewDistance(t) : r * this.computeOverviewDistance(i);
        var u = Math.abs(l / c.length());
        u = Math.max(u, 1), s = Math.min(s, u)
      }
      if ((n || o && i) && this.__is2D) {
        var h = (n ? a.clientHeight / n : this.computeOverviewDistance(i) / o) / -(c = this.getEyeVector()).z;
        h = Math.min(h, 1), s = Math.max(s, h)
      }
      return s
    }, this.applyPanningConstraint2D = function (e) {
      if (this.__is2D && t) {
        var n = a.position.x + e.x,
          r = a.position.y + e.y;
        n = i.Math.clamp(n, t.min.x, t.max.x), r = i.Math.clamp(r, t.min.y, t.max.y);
        var o = n - a.position.x,
          s = r - a.position.y,
          l = Math.min(e.x, 0),
          c = Math.min(e.y, 0),
          u = Math.max(e.x, 0),
          h = Math.max(e.y, 0);
        o = i.Math.clamp(o, l, u), s = i.Math.clamp(s, c, h), e.x = o, e.y = s
      }
    }, this.updateCamera = function () {
      a && (a.updateProjectionMatrix(), this.orient(a, a.target, a.position, a.up), a.dirty = !1)
    }, this.setCamera(e), this.setConstraints2D = function (e, i) {
      t = e, n = i
    }
  }
  o.prototype.constructor = o, o.prototype.setIs2D = function (e) {
    this.__is2D = !!e
  }, o.prototype.getIs2D = function () {
    return this.__is2D
  }, o.prototype.setIsTouchDevice = function (e) {
    this.__isTouchDevice = !!e
  }, o.prototype.getIsTouchDevice = function () {
    return this.__isTouchDevice
  }, o.prototype.orient = function () {
    var e, t, n, r;
    return function (o, a, s, l) {
      e || (e = new i.Matrix4, t = new i.Vector3, n = new i.Vector3, r = new i.Vector3);
      var c = e.elements;
      r.subVectors(s, a).normalize(), 0 === r.lengthSq() && (r.z = 1), t.crossVectors(l, r).normalize(), 0 === t.lengthSq() && (l.z > l.y ? r.y -= 1e-4 : r.z += 1e-4, t.crossVectors(l, r).normalize()), n.crossVectors(r, t), c[0] = t.x, c[4] = n.x, c[8] = r.x, c[1] = t.y, c[5] = n.y, c[9] = r.y, c[2] = t.z, c[6] = n.z, c[10] = r.z, o.setRotationFromMatrix(e)
    }
  }(), o.prototype.fov2fl = function (e) {
    var t = i.Math.degToRad(e);
    return t <= 0 && (t = 1e-4), Math.round(12 / Math.tan(.5 * t))
  }, o.prototype.fl2fov = function (e) {
    e <= 0 && (e = 1e-4);
    var t = 2 * Math.atan(12 / e);
    return i.Math.radToDeg(t)
  }, o.prototype.setCameraUpVector = function (e) {
    if (this.isActionEnabled("roll")) {
      var t = this.getCamera();
      t.up.copy(e), t.dirty = !0
    }
  }, o.prototype.getCameraUpVector = function () {
    var e = this.getCameraRightVector(!1),
      t = this.getEyeVector();
    return e.cross(t).normalize()
  }, o.prototype.getAlignedUpVector = function () {
    var e = this.getCameraRightVector(!0),
      t = this.getEyeVector();
    return e.cross(t).normalize()
  }, o.prototype.getCameraRightVector = function (e) {
    var t = new i.Vector3,
      n = e ? this.getWorldUpVector() : this.getCamera().up,
      r = this.getEyeVector();
    return t.crossVectors(r, n), 0 === t.lengthSq() && (Math.abs(r.z) >= Math.abs(r.y) ? n.set(0, 1, 0) : n.set(0, 0, 1), t.crossVectors(r, n)), t.normalize()
  }, o.prototype.setWorldUpVector = function (e, t) {
    this.isActionEnabled("roll") && (this.__setUp(e), t && this.orientCameraUp())
  }, o.prototype.getWorldUpVector = function () {
    return this.__getUp().clone()
  }, o.prototype.getWorldRightVector = function () {
    var e = new i.Vector3;
    return e.copy(this.__getUp()), Math.abs(e.z) <= Math.abs(e.y) ? e.set(e.y, -e.x, 0) : e.z >= 0 ? e.set(e.z, 0, -e.x) : e.set(-e.z, 0, e.x), e.normalize()
  }, o.prototype.getVerticalFov = function () {
    return this.getCamera().fov
  }, o.prototype.getHorizontalFov = function () {
    var e = this.getScreenViewport();
    return this.getCamera().fov * (e.width / e.height)
  }, o.prototype.getFocalLength = function () {
    return this.fov2fl(this.getVerticalFov())
  }, o.prototype.setFocalLength = function (e, t) {
    this.setVerticalFov(this.fl2fov(e), t)
  }, o.prototype.setReverseZoomDirection = function (e) {
    this.__options.reverseDolly = !!e
  }, o.prototype.setReverseHorizontalLookDirection = function (e) {
    this.getIs2D() ? r.logger.warn("Autodesk.Viewing.Navigation.setReverseHorizontalLookDirection is not applicable to 2D") : this.__options.reverseHorizontalLookDirection = !!e
  }, o.prototype.setReverseVerticalLookDirection = function (e) {
    this.getIs2D() ? r.logger.warn("Autodesk.Viewing.Navigation.setReverseVerticalLookDirection is not applicable to 2D") : this.__options.reverseVerticalLookDirection = !!e
  }, o.prototype.getReverseZoomDirection = function () {
    return this.__options.reverseDolly
  }, o.prototype.getReverseHorizontalLookDirection = function () {
    return this.getIs2D() ? (r.logger.warn("Autodesk.Viewing.Navigation.getReverseHorizontalLookDirection is not applicable to 2D"), !1) : this.__options.reverseHorizontalLookDirection
  }, o.prototype.getReverseVerticalLookDirection = function () {
    return this.getIs2D() ? (r.logger.warn("Autodesk.Viewing.Navigation.getReverseVerticalLookDirection is not applicable to 2D"), !1) : this.__options.reverseVerticalLookDirection
  }, o.prototype.setZoomTowardsPivot = function (e) {
    this.__options.dollyToPivot = !!e
  }, o.prototype.getZoomTowardsPivot = function () {
    return this.__options.dollyToPivot
  }, o.prototype.setOrbitPastWorldPoles = function (e) {
    this.getIs2D() ? r.logger.warn("Autodesk.Viewing.Navigation.setOrbitPastWorldPoles is not applicable to 2D") : this.__options.orbitPastPoles = !!e
  }, o.prototype.getOrbitPastWorldPoles = function () {
    return this.getIs2D() ? (r.logger.warn("Autodesk.Viewing.Navigation.orbitPastWorldPoles is not applicable to 2D"), !1) : this.__options.orbitPastPoles
  }, o.prototype.setUsePivotAlways = function (e) {
    this.__options.usePivotAlways = !!e
  }, o.prototype.getUsePivotAlways = function () {
    return this.__options.usePivotAlways
  }, o.prototype.setUseLeftHandedInput = function (e) {
    this.__options.useLeftHandedInput = !!e
  }, o.prototype.getUseLeftHandedInput = function () {
    return this.__options.useLeftHandedInput
  }, o.prototype.setWheelSetsPivot = function (e) {
    this.__options.wheelSetsPivot = !!e
  }, o.prototype.getWheelSetsPivot = function () {
    return this.__options.wheelSetsPivot
  }, o.prototype.setSelectionSetsPivot = function (e) {
    this.__options.SelectionSetsPivot = !!e
  }, o.prototype.getSelectionSetsPivot = function () {
    return this.__options.SelectionSetsPivot
  }, o.prototype.setIsLocked = function (e) {
    this.__options.lockNavigation = !!e
  }, o.prototype.getIsLocked = function () {
    return this.__options.lockNavigation
  }, o.prototype.setLockSettings = function (e) {
    for (var t in this.__lockSettings) e.hasOwnProperty(t) && (this.__lockSettings[t] = e[t])
  }, o.prototype.getLockSettings = function () {
    var e = {};
    for (var t in this.__lockSettings) e[t] = this.__lockSettings[t];
    return e
  }, o.prototype.isActionEnabled = function (e) {
    return !this.__options.lockNavigation || !0 === this.__lockSettings[e]
  }, o.prototype.setPivotSetFlag = function (e) {
    this.__pivotIsSetFlag = !!e
  }, o.prototype.getPivotSetFlag = function () {
    return this.__pivotIsSetFlag
  }, o.prototype.setRequestFitToView = function (e) {
    this.isActionEnabled("gotoview") && (this.__fitToViewRequested = !!e)
  }, o.prototype.getRequestFitToView = function () {
    return this.__fitToViewRequested
  }, o.prototype.setRequestHomeView = function (e) {
    this.isActionEnabled("gotoview") && (this.__homeViewRequested = !!e)
  }, o.prototype.getRequestHomeView = function () {
    return this.__homeViewRequested
  }, o.prototype.setRequestTransition = function (e, t, n, i, r, o) {
    this.__destinationView = e ? {
      position: t.clone(),
      coi: n.clone(),
      fov: i,
      up: this.getCamera().up.clone(),
      worldUp: this.getWorldUpVector(),
      reorient: r,
      pivot: o ? o.clone() : n.clone()
    } : null
  }, o.prototype.setRequestTransitionWithUp = function (e, t, n, i, r, o, a) {
    this.__destinationView = e ? {
      position: t.clone(),
      coi: n.clone(),
      fov: i,
      up: r.clone(),
      worldUp: o || this.getWorldUpVector(),
      reorient: !1,
      pivot: a ? a.clone() : n.clone()
    } : null
  }, o.prototype.getRequestTransition = function () {
    return this.__destinationView
  }, o.prototype.setTransitionActive = function (e) {
    this.__transitionActive = !!e
  }, o.prototype.getTransitionActive = function () {
    return this.__transitionActive
  }, o.prototype.getWorldSize = function (e) {
    var t = this.getCamera(),
      n = t.aspect,
      r = 2 * e * Math.tan(i.Math.degToRad(.5 * t.fov)),
      o = r * n;
    return new i.Vector2(o, r)
  }, o.prototype.screenToViewport = function (e, t) {
    return e = 2 * e - 1, t = 2 * (t = 1 - t) - 1, new i.Vector3(e, t, 1)
  }, o.prototype.viewportToScreen = function (e, t) {
    return e = (e + 1) / 2, t = 1 - (t = (t + 1) / 2), new i.Vector2(e, t)
  }, o.prototype.getWorldPoint = function (e, t) {
    var n = this.screenToViewport(e, t);
    e = n.x, t = n.y;
    var r, o = this.getCamera();
    o.isPerspective && (r = (r = new i.Vector3(e, t, 1)).unproject(o));
    var a, s, l = this.getEyeVector(),
      c = this.getPosition();
    if (!o.isPerspective || isNaN(r.x)) {
      var u = this.getWorldSize(l.length()),
        h = this.getCameraRightVector(!1).multiplyScalar(.5 * e * u.x),
        d = this.getCameraUpVector().multiplyScalar(.5 * t * u.y);
      a = l.clone().add(h).add(d).normalize()
    } else a = r.sub(c).normalize();
    var f = this.getPivotPoint(),
      p = a.dot(l);
    return s = this.__pivotIsSetFlag && (this.getIs2D() || o.isPerspective && p > 0) ? 0 !== p ? Math.abs(f.sub(c).dot(l)) / p : f.sub(c).length() : o.isPerspective ? .5 * (o.near + o.far) : o.orthoScale, a.multiplyScalar(s).add(c)
  }, o.prototype.getPivotPlaneDistance = function () {
    var e = this.getPivotPoint(),
      t = this.getEyeVector(),
      n = this.getPosition();
    return e.sub(n).dot(t.normalize())
  }, o.prototype.panRelative = function (e, t, n) {
    if (this.isActionEnabled("pan")) {
      var i = this.getScreenViewport(),
        r = this.getCamera(),
        o = this.getWorldSize(n),
        a = e * o.x * i.width / r.clientWidth,
        s = t * o.y * i.height / r.clientHeight,
        l = this.getCameraRightVector(!1).multiplyScalar(a),
        c = this.getCameraUpVector().multiplyScalar(s),
        u = l.add(c);
      this.applyPanningConstraint2D(u), this.setView(this.getPosition().add(u), this.getTarget().add(u))
    }
  }, o.prototype.dollyFromPoint = function (e, t, n) {
    if (this.isActionEnabled("zoom") && !(Math.abs(e) <= this.__kEpsilon)) {
      var i = this.getPosition(),
        r = this.getEyeVector();
      if (!this.getCamera().isPerspective) {
        var o = r.lengthSq(),
          a = r.dot(this.getTarget().sub(t));
        t = r.clone().multiplyScalar(a / o).add(t)
      }
      var s = t.clone().sub(i),
        l = s.length(),
        c = l + e;
      c < this.__minDistance && (c = this.__minDistance);
      var u = c / l;
      if (u = this.applyDollyConstraint(u, n), Math.abs(u - 1) > this.__kEpsilon) {
        s.multiplyScalar(u), s.set(-s.x, -s.y, -s.z);
        var h = s.add(t);
        r = this.getEyeVector();
        this.getCamera().isPerspective || r.multiplyScalar(u), this.setView(h, r.add(h))
      }
    }
  }, o.prototype.toPerspective = function () {
    if (this.getIs2D()) r.logger.warn("Autodesk.Viewing.Navigation.toPerspective is not applicable to 2D");
    else {
      var e = this.getCamera();
      e.isPerspective || (e.toPerspective(), e.dirty = !0)
    }
  }, o.prototype.toOrthographic = function () {
    var e = this.getCamera();
    e.isPerspective && (e.toOrthographic(), e.dirty = !0)
  }, o.snapToAxis = function (e) {
    var t = new i.Vector3(Math.abs(e.x), Math.abs(e.y), Math.abs(e.z));
    return t.x > t.y && t.x > t.z ? e.set(e.x > 0 ? 1 : -1, 0, 0) : t.y > t.x && t.y > t.z ? e.set(0, e.y > 0 ? 1 : -1, 0) : e.set(0, 0, e.z > 0 ? 1 : -1), e
  }
}, function (e, t, n) {
  "use strict";
  n.r(t), n.d(t, "GestureRecognizers", (function () {
    return o
  })), n.d(t, "GestureHandler", (function () {
    return a
  }));
  var i, r = n(3);
  Object(r.isNodeJS)() || (i = n(168));
  var o = {};

  function a(e) {
    var t = e.navigation,
      n = ["gestures"],
      a = this,
      s = !0,
      l = !1,
      c = !0,
      u = null,
      h = !1,
      d = Object(r.isTouchDevice)();
    t.setIsTouchDevice(d), d && ((u = new i.Manager(e.canvasWrap, {
      recognizers: [o.drag, o.doubletap, o.doubletap2, o.singletap, o.singletap2, o.press, o.drag3, o.swipe, o.pan, o.pinch, o.rotate],
      handlePointerEventMouse: !1,
      inputClass: r.isIE11 ? i.PointerEventInput : i.TouchInput
    })).get("pinch").recognizeWith([u.get("drag")]), e.canvasWrap.addEventListener("touchstart", this.onTouchStart, !1)), this.onTouchStart = function (e) {
      e.preventDefault()
    }, this.getNames = function () {
      return n
    }, this.getName = function () {
      return n[0]
    }, this.isActive = function () {
      return h
    }, this.__clientToCanvasCoords = function (t) {
      var n, i, r = e.impl.getCanvasBoundingClientRect(),
        o = r.width,
        a = r.height;
      t.hasOwnProperty("center") ? (n = t.center.x - r.left, i = t.center.y - r.top) : (n = t.pointers[0].clientX - r.left, i = t.pointers[0].clientY - r.top), t.canvasX = n, t.canvasY = i, t.normalizedX = n / o * 2 - 1, t.normalizedY = (a - i) / a * 2 - 1
    }, this.distributeGesture = function (e) {
      a.__clientToCanvasCoords(e), a.controller.distributeEvent("handleGesture", e) && e.preventDefault()
    }, this.onSingleTap = function (e) {
      a.__clientToCanvasCoords(e), a.controller.distributeEvent("handleSingleTap", e) && e.preventDefault()
    }, this.onDoubleTap = function (e) {
      a.__clientToCanvasCoords(e), a.controller.distributeEvent("handleDoubleTap", e) && e.preventDefault()
    }, this.onPressHold = function (e) {
      a.__clientToCanvasCoords(e), a.controller.distributeEvent("handlePressHold", e) && e.preventDefault()
    }, this.onHammerInput = function (e) {
      a.setMouseDisabledWhenTouching(e)
    }, this.setMouseDisabledWhenTouching = function (e) {
      e.isFirst && !l ? (s = a.controller.enableMouseButtons(!1), l = !0) : e.isFinal && setTimeout((function () {
        a.controller.enableMouseButtons(s), l = !1
      }), 10)
    }, this.activate = function (e) {
      u && !h && (u.on("dragstart dragmove dragend", this.distributeGesture), u.on("singletap", this.onSingleTap), u.on("singletap2", this.onSingleTap), u.on("doubletap", this.onDoubleTap), u.on("doubletap2", this.onDoubleTap), u.on("press pressup", this.onPressHold), u.on("drag3start drag3move drag3end", this.distributeGesture), u.on("swipeleft swiperight swipeup swipedown", this.distributeGesture), c && (u.on("panstart panmove panend", this.distributeGesture), u.on("pinchstart pinchmove pinchend", this.distributeGesture), u.on("rotatestart rotatemove rotateend", this.distributeGesture)), u.on("hammer.input", this.onHammerInput), u.get("doubletap2").recognizeWith("doubletap"), u.get("singletap2").recognizeWith("singletap"), u.get("singletap").requireFailure("doubletap"), u.get("swipe").recognizeWith("drag")), h = !0
    }, this.deactivate = function (e) {
      u && h && (u.off("dragstart dragmove dragend", this.distributeGesture), u.off("singletap", this.onSingleTap), u.off("singletap2", this.onSingleTap), u.off("doubletap", this.onDoubleTap), u.off("doubletap2", this.onDoubleTap), u.off("press pressup", this.onPressHold), u.off("drag3start drag3move drag3end", this.distributeGesture), u.off("swipeleft swiperight swipeup swipedown", this.distributeGesture), c && (u.off("panstart panmove panend", this.distributeGesture), u.off("pinchstart pinchmove pinchend", this.distributeGesture), u.off("rotatestart rotatemove rotateend", this.distributeGesture)), u.off("hammer.input", this.onHammerInput)), h = !1
    }, this.update = function () {
      return !1
    }, this.handleBlur = function (e) {
      return !1
    }, this.disableTwoFingerSwipe = function () {
      c = !1, u && (u.remove(i.Pan), u.remove(i.Pinch), u.remove(i.Rotate), u.off("panstart panmove panend", this.distributeGesture), u.off("pinchstart pinchmove pinchend", this.distributeGesture), u.off("rotatestart rotatemove rotateend", this.distributeGesture))
    }, this.setGestureParameter = function (e, t, n) {
      var i = u && u.get(e);
      return !!i && (i.options[t] = n, !0)
    }, this.restoreGestureParameterDefault = function (e, t) {
      var n = u && u.get(e);
      if (!n) return !1;
      var i = o[e][1];
      return n.options[t] = i.hasOwnProperty(t) ? i[t] : n.defaults[t], !0
    }
  }
  i && function () {
    if (!o.singletap) {
      var e = o;
      e.singletap = [i.Tap, {
        event: "singletap",
        threshold: 7,
        time: 400
      }], e.singletap2 = [i.Tap, {
        event: "singletap2",
        pointers: 2,
        threshold: 7,
        time: 400
      }], e.press = [i.Press, {
        event: "press",
        time: 500,
        threshold: 50
      }], e.doubletap = [i.Tap, {
        event: "doubletap",
        taps: 2,
        interval: 300,
        threshold: 6,
        posThreshold: 30
      }], e.doubletap2 = [i.Tap, {
        event: "doubletap2",
        pointers: 2,
        taps: 2,
        interval: 300,
        threshold: 6,
        posThreshold: 40
      }], e.swipe = [i.Swipe, {
        event: "swipe",
        pointers: 1,
        threshold: 200,
        velocity: 1.7
      }], e.drag = [i.Pan, {
        event: "drag",
        pointers: 1
      }], e.drag3 = [i.Pan, {
        event: "drag3",
        pointers: 3,
        threshold: 15
      }], e.pan = [i.Pan, {
        event: "pan",
        pointers: 2,
        threshold: 20
      }], e.pinch = [i.Pinch, {
        event: "pinch",
        pointers: 2,
        enable: !0,
        threshold: .05
      }], e.rotate = [i.Rotate, {
        event: "rotate",
        pointers: 2,
        enable: !0,
        threshold: 7
      }]
    }
  }()
}, function (e, t, n) {
  "use strict";
  n.r(t), n.d(t, "SelectionMode", (function () {
    return i
  }));
  var i = {
    LEAF_OBJECT: 0,
    FIRST_OBJECT: 1,
    LAST_OBJECT: 2
  }
}, function (e, t, n) {
  "use strict";
  n.r(t), n.d(t, "AlertBox", (function () {
    return r
  }));
  var i = n(8);

  function r() {}
  r.instances = [], r.displayError = function (e, t, n, o, a) {
    var s = e.ownerDocument,
      l = s.createElement("div");
    l.className = "alert-box error", e.appendChild(l);
    var c = o;
    c || (c = "img-item-not-found");
    var u = s.createElement("div");
    u.className = "alert-box-image " + c, l.appendChild(u);
    var h = s.createElement("div");
    h.className = "alert-box-msg", l.appendChild(h);
    var d = n;
    d || (d = i.i18n.translate("Error Occurred", {
      defaultValue: "Error Occurred"
    }));
    var f = s.createElement("div");
    f.className = "alert-box-title", f.textContent = d, f.setAttribute("data-i18n", d), h.appendChild(f);
    var p = s.createElement("div");
    if (p.className = "alert-box-text", p.textContent = t, p.setAttribute("data-i18n", t), h.appendChild(p), a) {
      var m = s.createElement("div");
      m.className = "alert-box-content", h.appendChild(m);
      var g = s.createElement("ul");
      g.className = "alert-box-content";
      for (var v = 0; v < a.length; v++) {
        var y = a[v];
        if (y) {
          var b = s.createElement("li"),
            _ = this.extractList(y);
          if (_.list.length) {
            var x = this.generateListElement(list, s);
            g.appendChild(x)
          }
          b.innerHTML = _.msg, b.setAttribute("data-i18n", _.msg), g.appendChild(b)
        }
      }
      m.appendChild(g)
    }
    var w = s.createElement("div");
    w.className = "alert-box-ok", w.textContent = i.i18n.translate("OK", {
      defaultValue: "OK"
    });
    var E = {
      alertBox: l,
      container: e
    };
    w.addEventListener("click", (function (t) {
      l.style.visibility = "hidden", e.removeChild(l), r.instances.splice(r.instances.indexOf(E), 1)
    })), l.appendChild(w), l.style.visibility = "visible", r.instances.push(E)
  }, r.displayErrors = function (e, t, n) {
    var o = e.ownerDocument,
      a = o.createElement("div");
    a.className = "alert-box errors", e.appendChild(a);
    var s = t;
    s || (s = "img-item-not-found");
    var l = o.createElement("div");
    l.className = "alert-box-image " + s, a.appendChild(l);
    var c = o.createElement("div");
    c.className = "alert-box-msg errors", a.appendChild(c);
    for (var u = 0; u < n.length; u++) {
      var h = n[u].header;
      h || (h = i.i18n.translate("Error", {
        defaultValue: "Error"
      }));
      var d = o.createElement("div");
      d.className = "alert-box-title errors", d.textContent = h, c.appendChild(d);
      var f = o.createElement("div");
      f.className = "alert-box-text errors";
      var p = n[u].msg;
      if ((x = this.extractList(p)).list.length) {
        var m = o.createElement("div"),
          g = this.generateListElement(x.list, o);
        m.appendChild(g), f.textContent = x.msg, f.appendChild(m)
      } else f.textContent = p;
      if (c.appendChild(f), n[u].hints) {
        var v = o.createElement("ul");
        v.className = "alert-box-content";
        for (var y = n[u].hints, b = 0; b < y.length; b++) {
          var _ = y[b];
          if (_) {
            var x, w = o.createElement("li");
            if (v.appendChild(w), (x = this.extractList(_)).list.length) {
              g = this.generateListElement(x.list, o);
              v.appendChild(g)
            }
            w.innerHTML = x.msg
          }
        }
        c.appendChild(v)
      }
    }
    var E = o.createElement("div");
    E.className = "alert-box-ok", E.textContent = i.i18n.translate("OK", {
      defaultValue: "OK"
    });
    var A = {
      alertBox: a,
      container: e
    };
    E.addEventListener("click", (function (t) {
      a.style.visibility = "hidden", e.removeChild(a), r.instances.splice(r.instances.indexOf(A), 1)
    })), a.appendChild(E), a.style.visibility = "visible", r.instances.push(A)
  }, r.extractList = function (e) {
    var t = {
      msg: e,
      list: []
    };
    if (e && -1 != e.indexOf("<ul>")) {
      var n = e.split("<ul>");
      t.msg = n[0], n = n[1].split("</ul>"), t.list = n[0].split(", "), 1 === t.list.length && (t.list = n[0].split(","))
    }
    return t
  }, r.generateListElement = function (e, t) {
    for (var n = t.createElement("ul"), i = 0; i < e.length; i++) {
      var r = t.createElement("li");
      r.textContent = e[i], r.setAttribute("data-i18n", e[i]), n.appendChild(r)
    }
    return n
  }, r.dismiss = function () {
    if (r.instances.length > 0) {
      var e = r.instances.pop();
      return e.alertBox.style.visibility = "hidden", e.container.removeChild(e.alertBox), !0
    }
    return !1
  }
}, function (e, t, n) {
  "use strict";
  n.r(t);
  var i = n(48),
    r = n(271),
    o = n(132),
    a = n(1),
    s = n(16),
    l = n(8);

  function c(e) {
    return (c = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (e) {
      return typeof e
    } : function (e) {
      return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
    })(e)
  }

  function u(e, t) {
    o.TreeDelegate.call(this), this.panel = e, this.model = t;
    var n = this.getDocument();
    this.modelDiv = n.createElement("div"), this.modelDiv.classList.add("model-div"), this.modelDiv.setAttribute("lmv-modelId", t.id), this.instanceTree = null, this.rootId = -1, this.state = 1
  }

  function h(e) {
    var t = e.getData();
    if (!t) return "";
    var n = t.urn;
    try {
      n = atob(t.urn)
    } catch (e) {}
    var i = n.lastIndexOf("/");
    return -1 === i || -1 !== (i = (n = n.substr(i + 1)).indexOf("?")) && (n = n.substr(0, i)), n
  }

  function d(e) {
    var t = e.getData();
    return t && t.loadOptions && t.loadOptions.modelNameOverride ? t.loadOptions.modelNameOverride : ""
  }

  function f(e, t, n, r) {
    i.DockingPanel.call(this, e, t, n, r), this.container.classList.add("model-structure-panel"), (r = r || {}).heightAdjustment || (r.heightAdjustment = 40), r.marginTop || (r.marginTop = 0), r.left = !0, this.createScrollContainer(r), this.onScroll = this.onScroll.bind(this), this.scrollContainer.addEventListener("scroll", this.onScroll), this.scrollContainer.style["overflow-x"] = "hidden", this.options = r, this.tree = null, this._pendingModels = [], this.uiCreated = !1;
    var o = this;
    this.addVisibilityListener((function (e) {
      e && (o.uiCreated || o.createUI(), o.resizeToContent())
    }))
  }
  u.prototype = Object.create(o.TreeDelegate.prototype), u.prototype.constructor = u, u.prototype.isLoading = function () {
    return 1 === this.state
  }, u.prototype.isAvailable = function () {
    return 2 === this.state
  }, u.prototype.isNotAvailable = function () {
    return 3 === this.state
  }, u.prototype.isControlId = function (e) {
    return -1 === e || -2 === e
  }, u.prototype.getControlIdCss = function (e) {
    return null
  }, u.prototype.getRootId = function () {
    return this.rootId
  }, u.prototype.getTreeNodeId = function (e) {
    return "object" == c(e) ? (a.logger.warn("Object used instead of dbId. Fix it."), e.dbId) : e
  }, u.prototype.getTreeNodeIndex = function (e) {
    return this.instanceTree.nodeAccess.dbIdToIndex[e]
  }, u.prototype.getTreeNodeLabel = function (e) {
    var t;
    if (-1 === e) return (t = d(this.model)) || (t = h(this.model)), l.i18n.translate("Loading model", {
      name: t
    });
    if (-2 === e) return (t = d(this.model)) || (t = h(this.model)), t;
    if (e === this.getRootId() && (t = d(this.model))) return t;
    return -1e10 == e ? "Object 0" : this.instanceTree.getNodeName(e, !0) || "Object " + e
  }, u.prototype.getTreeNodeClass = function (e) {
    return -1 === e || -2 === e ? "message-unexpected" : ""
  }, u.prototype.getTreeNodeParentId = function (e) {
    if (-1e10 === e) return 0;
    var t = this.instanceTree.nodeAccess.getParentId(e);
    return 0 === t ? -1e10 : t
  }, u.prototype.getTreeNodeCount = function () {
    return this.instanceTree.nodeAccess.getNumNodes()
  }, u.prototype.getTreeNodeClientHeight = function (e) {
    return 36
  }, u.prototype.getTreeNodeDepthOffset = function (e, t) {
    return 13 + 25 * t
  }, u.prototype.isTreeNodeGroup = function (e) {
    return !this.isControlId(e) && this.instanceTree.getChildCount(e) > 0
  }, u.prototype.shouldCreateTreeNode = function (e) {
    return !0
  }, u.prototype.createTreeNode = function (e, t) {
    var n = this,
      i = n.getDocument();
    if (t.addEventListener("mousedown", (function () {
        var e = function () {
          this.classList.remove("highlight"), n.removeDocumentEventListener("mouseup", e)
        }.bind(t);
        t.classList.add("highlight"), n.addDocumentEventListener("mouseup", e)
      })), !this.isControlId(e)) {
      var r = i.createElement("div");
      r.dbId = e, r.classList.add("visibility"), r.addEventListener("mousedown", (function (e) {
        e.preventDefault(), e.stopPropagation()
      })), r.addEventListener("click", function (e) {
        e.preventDefault(), e.stopPropagation();
        var t = parseInt(e.target.dbId);
        this.panel.onEyeIcon(t, this.model)
      }.bind(this)), t.appendChild(r)
    }
    if (-1 === e) {
      var a = i.createElement("img");
      a.src = Object(s.getResourceUrl)("res/ui/spinner.png"), a.style.animation = "loading-spinner-perpetual-motion 1s infinite linear", a.style.float = "right", a.style.marginRight = "5px", a.style.width = "20px", t.appendChild(a)
    }
    var l = {
      localize: -1 === e || -2 === e
    };
    o.TreeDelegate.prototype.createTreeNode.call(this, e, t, l)
  }, u.prototype.onTreeNodeRightClick = function (e, t, n) {
    this.isControlId(t) || this.panel.onTreeNodeRightClick(e, t, this.model, n)
  }, u.prototype.onTreeNodeClick = function (e, t, n) {
    this.isControlId(t) || this.panel.onTreeNodeClick(e, t, this.model, n)
  }, u.prototype.onTreeNodeDoubleClick = function (e, t, n) {}, u.prototype.onTreeNodeIconClick = function (e, t, n) {
    if (this.isTreeNodeGroup(t)) {
      var i = e.isCollapsed(this, t);
      e.setCollapsed(this, t, !i)
    }
  }, u.prototype.onTreeNodeReized = function (e) {}, u.prototype.forEachChild = function (e, t, n) {
    this.isControlId(e) || this.instanceTree.enumNodeChildren(e, t, n)
  }, u.prototype.setInstanceTree = function (e) {
    this.instanceTree = e, this.state = e ? 2 : 3, this.rootId = e ? e.getRootId() : -2,
      function (e) {
        var t = e.instanceTree;
        if (!t) return;
        var n, i = e.rootId,
          r = t.getNodeName(i),
          o = 0,
          a = 0;
        t.enumNodeChildren(i, (function (e) {
          a || (n = t.getNodeName(e), o = e), a++
        })), e.hasDoubleRoot = 1 === a && r === n, e.rootId = e.hasDoubleRoot ? o : i
      }(this)
  }, u.prototype.clean = function () {
    for (var e, t = this.modelDiv; e = t.lastChild;) t.removeChild(e)
  }, n.d(t, "ModelStructurePanel", (function () {
    return f
  })), f.prototype = Object.create(i.DockingPanel.prototype), f.prototype.constructor = f, f.prototype.uninitialize = function (e) {
    this.scrollContainer.addEventListener("scroll", this.onScroll), this.scrollContainer.parentNode.removeChild(this.scrollContainer), i.DockingPanel.prototype.uninitialize.call(this)
  }, f.prototype.addModel = function (e) {
    if (e)
      if (this.uiCreated) this.createTreeUI(e);
      else {
        if (-1 !== this._pendingModels.indexOf(e)) return;
        this._pendingModels.push(e)
      }
  }, f.prototype.unloadModel = function (e) {
    if (e)
      if (this.uiCreated) this.removeTreeUI(e);
      else {
        var t = this._pendingModels.indexOf(e);
        if (-1 === t) return;
        this._pendingModels.splice(t, 1)
      }
  }, f.prototype.createUI = function () {
    if (!this.uiCreated) {
      var e, t = "";
      if (this.options && this.options.defaultTitle ? (t = this.options.defaultTitle, e = void 0 === this.options.localizeTitle || !!this.options.localizeTitle) : (t = this.modelTitle, e = !1), t || (t = "Browser", e = !0), this.setTitle(t, {
          localizeTitle: e
        }), this.uiCreated = !0, this.tree = new r.TreeOnDemand(this.scrollContainer, this.options), this.tree.setGlobalManager(this.globalManager), 0 !== this._pendingModels.length) {
        for (var n = 0; n < this._pendingModels.length; ++n) this.createTreeUI(this._pendingModels[n]);
        this._pendingModels = []
      }
    }
  }, f.prototype.createTreeUI = function (e) {
    if (this.tree.getDelegate(e.id)) return !1;
    var t = new u(this, e);
    t.setGlobalManager(this.globalManager), this.tree.pushDelegate(t);
    var n = this;
    return e.getObjectTree((function (e) {
      n.setInstanceTree(t, e)
    }), (function () {
      n.setInstanceTree(t, null)
    })), !0
  }, f.prototype.setInstanceTree = function (e, t) {
    this.tree.setInstanceTree(e, t)
  }, f.prototype.removeTreeUI = function (e) {
    this.tree.removeDelegate(e.id) && (this.scrollContainer.scrollTop = 0, this.onScroll())
  }, f.prototype.onScroll = function (e) {
    this.tree.setScroll(this.scrollContainer.scrollTop)
  }, f.prototype.getNodeLabel = function (e) {
    return this.myDelegate.getNodeLabel(e)
  }, f.prototype.onTreeNodeClick = function (e, t, n, i) {
    throw new Error("Method must be overriden.")
  }, f.prototype.onTreeNodeRightClick = function (e, t, n, i) {
    throw new Error("Method must be overriden.")
  }, f.prototype.onTitleClick = function (e) {}, f.prototype.onTitleDoubleClick = function (e) {}
}, function (e, t, n) {
  var i = n(77),
    r = Math.max,
    o = Math.min;
  e.exports = function (e, t) {
    var n = i(e);
    return n < 0 ? r(n + t, 0) : o(n, t)
  }
}, function (e, t, n) {
  var i = n(7),
    r = n(300);
  e.exports = Object.setPrototypeOf || ("__proto__" in {} ? function () {
    var e, t = !1,
      n = {};
    try {
      (e = Object.getOwnPropertyDescriptor(Object.prototype, "__proto__").set).call(n, []), t = n instanceof Array
    } catch (e) {}
    return function (n, o) {
      return i(n), r(o), t ? e.call(n, o) : n.__proto__ = o, n
    }
  }() : void 0)
}, function (e, t, n) {
  "use strict";
  var i = "undefined" != typeof Uint8Array && "undefined" != typeof Uint16Array && "undefined" != typeof Int32Array;

  function r(e, t) {
    return Object.prototype.hasOwnProperty.call(e, t)
  }
  t.assign = function (e) {
    for (var t = Array.prototype.slice.call(arguments, 1); t.length;) {
      var n = t.shift();
      if (n) {
        if ("object" != typeof n) throw new TypeError(n + "must be non-object");
        for (var i in n) r(n, i) && (e[i] = n[i])
      }
    }
    return e
  }, t.shrinkBuf = function (e, t) {
    return e.length === t ? e : e.subarray ? e.subarray(0, t) : (e.length = t, e)
  };
  var o = {
      arraySet: function (e, t, n, i, r) {
        if (t.subarray && e.subarray) e.set(t.subarray(n, n + i), r);
        else
          for (var o = 0; o < i; o++) e[r + o] = t[n + o]
      },
      flattenChunks: function (e) {
        var t, n, i, r, o, a;
        for (i = 0, t = 0, n = e.length; t < n; t++) i += e[t].length;
        for (a = new Uint8Array(i), r = 0, t = 0, n = e.length; t < n; t++) o = e[t], a.set(o, r), r += o.length;
        return a
      }
    },
    a = {
      arraySet: function (e, t, n, i, r) {
        for (var o = 0; o < i; o++) e[r + o] = t[n + o]
      },
      flattenChunks: function (e) {
        return [].concat.apply([], e)
      }
    };
  t.setTyped = function (e) {
    e ? (t.Buf8 = Uint8Array, t.Buf16 = Uint16Array, t.Buf32 = Int32Array, t.assign(t, o)) : (t.Buf8 = Array, t.Buf16 = Array, t.Buf32 = Array, t.assign(t, a))
  }, t.setTyped(i)
}, function (e, t, n) {
  "use strict";
  n.r(t), n.d(t, "LocalStorage", (function () {
    return l
  }));
  var i = n(1),
    r = n(3),
    o = Object(r.getGlobal)(),
    a = function () {
      if ("undefined" == typeof window) return !1;
      try {
        var e = "lmv_viewer_test_localStorage",
          t = o.localStorage;
        return !!t && (t.setItem(e, "1"), t.removeItem(e), !0)
      } catch (e) {
        return !1
      }
    }();

  function s() {
    a || (this._data = {})
  }
  s.prototype.getItem = function (e) {
    return a ? o.localStorage.getItem(e) : this._data.hasOwnProperty(e) ? this._data[e] : null
  }, s.prototype.setItem = function (e, t) {
    if (a) try {
      o.localStorage.setItem(e, t)
    } catch (e) {
      i.logger.debug("avp.LocalStorage: Failed to setItem()")
    } else this._data[e] = String(t)
  }, s.prototype.removeItem = function (e) {
    a ? o.localStorage.removeItem(e) : delete this._data[id]
  }, s.prototype.clear = function () {
    a ? o.localStorage.clear() : this._data = {}
  }, s.prototype.isSupported = function () {
    return a
  };
  var l = new s
}, function (e, t, n) {
  "use strict";
  n.r(t);
  var i = n(1),
    r = n(9),
    o = n(3),
    a = n(0),
    s = n(36),
    l = n(389),
    c = n.n(l),
    u = n(390),
    h = n.n(u),
    d = {
      uniforms: {
        cutplanes: {
          type: "v4v",
          value: []
        }
      },
      vertexShader: c.a,
      fragmentShader: h.a
    },
    f = n(46),
    p = n(391),
    m = n.n(p),
    g = n(392),
    v = n.n(g),
    y = {
      uniforms: {
        color: {
          type: "v4",
          value: new a.Vector4(0, 0, 0, .3)
        },
        cutplanes: {
          type: "v4v",
          value: []
        }
      },
      vertexShader: m.a,
      fragmentShader: v.a
    },
    b = n(144),
    _ = n(63),
    x = n.n(_),
    w = n(393),
    E = n.n(w),
    A = {
      uniforms: {
        tDiffuse: {
          type: "t",
          value: null
        },
        size: {
          type: "v2",
          value: new a.Vector2(512, 512)
        },
        resolution: {
          type: "v2",
          value: new a.Vector2(1 / 512, 1 / 512)
        },
        axis: {
          type: "v2",
          value: new a.Vector2(1, 0)
        },
        radius: {
          type: "f",
          value: 50
        }
      },
      vertexShader: x.a,
      fragmentShader: E.a
    },
    S = n(280),
    M = n.n(S),
    T = n(394),
    C = n.n(T),
    P = n(395),
    L = n.n(P),
    D = {
      uniforms: {
        tDiffuse: {
          type: "t",
          value: null
        },
        cameraNear: {
          type: "f",
          value: 1
        },
        cameraInvNearFar: {
          type: "f",
          value: 100
        },
        resolution: {
          type: "v2",
          value: new a.Vector2(1 / 512, 1 / 512)
        }
      },
      vertexShader: M.a,
      fragmentShader: C.a
    },
    I = {
      uniforms: {
        tDiffuse: {
          type: "t",
          value: null
        },
        resolution: {
          type: "v2",
          value: new a.Vector2(1 / 512, 1 / 512)
        }
      },
      vertexShader: M.a,
      fragmentShader: L.a
    },
    R = n(396),
    O = n.n(R),
    k = n(397),
    N = n.n(k),
    F = {
      uniforms: {
        tDiffuse: {
          type: "t",
          value: null
        },
        uResolution: {
          type: "v2",
          value: new a.Vector2(1 / 1024, 1 / 512)
        }
      },
      vertexShader: O.a,
      fragmentShader: N.a
    },
    U = n(30),
    V = n(398),
    B = n.n(V),
    z = {
      uniforms: a.UniformsUtils.merge([U.ShaderChunks.DepthTextureUniforms, {
        tDiffuse: {
          type: "t",
          value: null
        },
        tAO: {
          type: "t",
          value: null
        },
        useAO: {
          type: "i",
          value: 0
        },
        aoOpacity: {
          type: "f",
          value: .625
        },
        tOverlay: {
          type: "t",
          value: null
        },
        useOverlay: {
          type: "i",
          value: 0
        },
        tID: {
          type: "t",
          value: null
        },
        tID2: {
          type: "t",
          value: null
        },
        objIDv4: {
          type: "v4",
          value: new a.Vector4(0, 0, 0, 0)
        },
        modelIDv2: {
          type: "v2",
          value: new a.Vector2(0, 0)
        },
        edgeObjIDv4: {
          type: "v4",
          value: new a.Vector4(0, 0, 0, 0)
        },
        edgeModelIDv2: {
          type: "v2",
          value: new a.Vector2(0, 0)
        },
        highlightIntensity: {
          type: "f",
          value: 1
        },
        resolution: {
          type: "v2",
          value: new a.Vector2(1 / 1024, 1 / 512)
        },
        selectionColor: {
          type: "c",
          value: new a.Color(0, 0, 0)
        },
        expand2dSelection: {
          type: "f",
          value: .5
        },
        tCrossFadeTex0: {
          type: "t",
          value: null
        },
        tCrossFadeTex1: {
          type: "t",
          value: null
        },
        crossFadeOpacity0: {
          type: "f",
          value: 0
        },
        crossFadeOpacity1: {
          type: "f",
          value: 0
        }
      }]),
      vertexShader: x.a,
      fragmentShader: B.a
    },
    G = n(202),
    H = n(399),
    W = n.n(H),
    j = {
      uniforms: {
        tDiffuse: {
          type: "t",
          value: null
        }
      },
      vertexShader: x.a,
      fragmentShader: W.a
    },
    q = n(237);
  n.d(t, "RenderContext", (function () {
    return ne
  }));
  var X = Object(o.getGlobal)().document,
    Y = 1,
    K = 2,
    Q = 3,
    Z = 4,
    J = 5,
    $ = 6,
    ee = 7,
    te = 8;

  function ne() {
    var e, t, n, l, c, u, h, p, m, g, v, _, x, w, E, S = !1,
      M = new q.RenderContextPostProcessManager;
    this.postShadingManager = function () {
      return M
    };
    var T, C, P, L, R, O, k, N = !1,
      U = null,
      V = null,
      B = null,
      H = null,
      W = null,
      ne = null,
      ie = null,
      re = [],
      oe = 0,
      ae = 0,
      se = 0,
      le = 0,
      ce = 1,
      ue = !1,
      he = !1,
      de = new Uint8Array(4),
      fe = [0, 0],
      pe = (new a.Color).setRGB(1, 1, 1),
      me = (new a.Color).setRGB(0, 0, 0),
      ge = new a.Vector4(0, 0, 0, .3),
      ve = new a.Vector4(1, 1, 1, 1),
      ye = new a.Vector4(1, 1, 1, .5),
      be = null,
      _e = 1,
      xe = !1,
      we = !1,
      Ee = !1,
      Ae = !1,
      Se = !1,
      Me = a.RGBAFormat,
      Te = a.FloatType,
      Ce = !1,
      Pe = 0,
      Le = 0,
      De = 0,
      Ie = [.42, 0, 1, 1],
      Re = !0,
      Oe = {
        antialias: !0,
        sao: !1,
        useHdrTarget: !1,
        haveTwoSided: !1,
        useSSAA: !1,
        idbuffer: !0,
        customPresentPass: !1,
        postProcShaded: !1,
        envMapBg: !1,
        numIdTargets: 1,
        renderEdges: !1,
        useIdBufferSelection: !1
      },
      ke = {},
      Ne = null,
      Fe = null;

    function Ue(e, t, n, i, r) {
      var o = new a.WebGLRenderTarget(e, t, {
        minFilter: a.NearestFilter,
        magFilter: a.NearestFilter,
        format: n,
        type: i,
        stencilBuffer: !1
      });
      return r && (o.shareDepthFrom = r), o.name = "depthTarget", o
    }

    function Ve(t) {
      try {
        var n = Ue(2, 2, t.format, t.type);
        n.generateMipmaps = !1, e.setRenderTarget(n);
        var i = e.context,
          r = i.checkFramebufferStatus(i.FRAMEBUFFER);
        return e.setRenderTarget(null), n.dispose(), r === i.FRAMEBUFFER_COMPLETE
      } catch (e) {
        return !1
      }
    }

    function Be(e) {
      Oe.useIdBufferSelection = e, e ? w.material.defines.USE_IDBUFFER_SELECTION = "1" : delete w.material.defines.USE_IDBUFFER_SELECTION
    }

    function ze(e, t) {
      e.depthWrite = t;
      for (var n = 0; n < e.variants.length; n++) {
        var i = e.variants[n];
        i && (i.depthWrite = t)
      }
    }

    function Ge(e) {
      e(t);
      for (var n = 1; n < t.variants.length; n++) e(t.variants[n])
    }

    function He(e) {
      e.material.blending = a.NoBlending, e.material.depthWrite = !1, e.material.depthTest = !1
    }

    function We(e) {
      switch (e) {
        case Y:
          return !0;
        case K:
          return Ce && (Oe.sao || Oe.postProcShaded);
        case Q:
          return Oe.idbuffer;
        case Z:
          return !0;
        case ee:
          return Oe.sao;
        case J:
          return Oe.antialias || Oe.sao || Oe.customPresentPass || Oe.postProcShaded;
        case $:
          return Oe.postProcShaded || Oe.customPresentPass;
        case te:
          return Oe.antialias && Oe.postProcShaded
      }
    }

    function je(e, t) {
      var n = new a.WebGLRenderTarget(e, t, {
        minFilter: a.NearestFilter,
        magFilter: a.NearestFilter,
        format: a.RGBAFormat,
        type: a.UnsignedByteType,
        stencilBuffer: !1
      });
      return n.generateMipmaps = !1, n.shareDepthFrom = V, n.canReadPixels = !0, n
    }

    function qe() {
      var t = H,
        n = V;
      if (w.uniforms.useAO.value) {
        var i = function () {
          var e = [w.uniforms.useOverlay.value, w.uniforms.objIDv4.value];
          return w.uniforms.useOverlay.value = 0, w.uniforms.objIDv4.value = new a.Vector4, e
        }();
        w.render(e, t, n), n = t, t = ie,
          function (e) {
            w.uniforms.useOverlay.value = e[0], w.uniforms.objIDv4.value = e[1]
          }(i)
      }
      if (M.render(e, t, n), n = t, t = t === H ? ie : H, w.uniforms.useOverlay.value || w.uniforms.objIDv4.value) {
        i = function () {
          var e = w.uniforms.useAO.value;
          return w.uniforms.useAO.value = 0, e
        }();
        w.render(e, t, n), n = t,
          function (e) {
            w.uniforms.useAO.value = e
          }(i)
      }
      return n
    }
    this.settings = Oe, this.depthTargetSupported = function () {
      return Ce
    }, this.isRolloverHighlightEnabled = function () {
      return _enableRolloverHighlight
    }, this.isWeakDevice = function () {
      return xe
    }, this.init = function (l, c, u, h) {
      var S, M = h && h.offscreen,
        T = !(!h || void 0 === h.useIdBufferSelection) && h.useIdBufferSelection;
      (function () {
        var e = d;
        (t = Object(s.createShaderMaterial)(e)).blending = a.NoBlending, t.packedNormals = !0, t.depthWrite = !1;
        var n = {
            NoCutPlanes: 1,
            Instancing: 2,
            UnpackedNormals: 4,
            Count: 8
          },
          i = [];
        i[0] = null;
        for (var r = 1; r < n.Count; r++) {
          var o = t.clone();
          o.packedNormals = t.packedNormals, r & n.NoCutPlanes && (o.cutPlanes = null, o.doNotCut = !0), r & n.Instancing && (o.useInstancing = !0), r & n.UnpackedNormals && (o.packedNormals = !1), i[r] = o
        }
        t.variants = i, t.getCustomOverrideMaterial = function (e) {
          var t = !e || !e.cutplanes || 0 == e.cutplanes.length,
            i = e.useInstancing,
            r = !e.packedNormals,
            o = (t ? n.NoCutPlanes : 0) | (i ? n.Instancing : 0) | (r ? n.UnpackedNormals : 0);
          return this.variants[o]
        }
      }(), function () {
        var e = y;
        (n = Object(s.createShaderMaterial)(e)).depthWrite = !0, n.depthTest = !0, n.isEdgeMaterial = !0, n.transparent = !0, n.blending = a.NormalBlending, n.supportsMrtNormals = !0;
        var t = {
            Instancing: 1,
            DoNotCut: 2,
            Count: 4
          },
          i = [];
        i[0] = null;
        for (var r = 1; r < t.Count; r++) {
          var l = n.clone();
          l.defines = Object(o.ObjectAssign)({}, n.defines), l.isEdgeMaterial = !0, l.supportsMrtNormals = !0, r & t.Instancing && (l.useInstancing = !0), r & t.DoNotCut && (l.doNotCut = !0, l.cutplanes = []), i[r] = l
        }
        n.variants = i, n.getCustomOverrideMaterial = function (e) {
          var i = e.useInstancing ? t.Instancing : 0;
          e.doNotCut && (i |= t.DoNotCut);
          var r = this.variants[i] || n;
          return Ee ? we ? r.uniforms.color.value.copy(ye) : r.uniforms.color.value.copy(ve) : r.uniforms.color.value.copy(ge), void 0 !== e.edgeOpacity && (r.uniforms.color.value.w = e.edgeOpacity), r.uniforms.color.needsUpdate = !0, r
        }
      }(), He(g = new f.ShaderPass(b.SAOShader)), He(m = new f.ShaderPass(A)), He(_ = new f.ShaderPass(D)), He(v = new f.ShaderPass(I)), He(x = new f.ShaderPass(F)), He(w = new f.ShaderPass(z)), He(p = new f.ShaderPass(G.a)), He(E = new f.ShaderPass(j)), l) ? (xe = Object(o.isMobileDevice)(), Oe.idbuffer = !xe, T && (Oe.idbuffer = !0, Oe.numIdTargets = 2, w.material.defines.USE_MODEL_ID = "1", Be(!0)), O = c, k = u, e = l, he = !!M, (S = (xe ? [{
        format: a.RGBAFormat,
        type: a.HalfFloatType
      }, {
        format: a.RGBAFormat,
        type: a.FloatType
      }] : [{
        format: a.RGBAFormat,
        type: a.FloatType
      }, {
        format: a.RGBAFormat,
        type: a.HalfFloatType
      }]).find(Ve)) ? (Ce = !0, Me = S.format, Te = S.type) : (Ce = !1, i.logger.warn("Depth target is unsupported for this device."))) : Object(o.isNodeJS)() || i.logger.error("You need a gl context to make a renderer. Things will go downhill from here.", Object(r.errorCodeString)(r.ErrorCodes.BROWSER_WEBGL_NOT_SUPPORTED))
    }, this.setDepthMaterialOffset = function (e, t, n) {
      Ge((function (i) {
        i.polygonOffset = e, i.polygonOffsetFactor = t, i.polygonOffsetUnits = n, i.extraDepthOffset && (i.polygonOffsetFactor += i.extraDepthOffset), i.needsUpdate = !0
      }))
    }, this.setNoDepthNoBlend = He, this.overlayUpdate = function () {
      if (0 === Le || -1 === Le) return !1;
      var e = w.uniforms.highlightIntensity.value,
        t = 1;
      if (Re) {
        var n = .004 * (performance.now() - Pe);
        n = Math.min(n, 1), t = function (e, t) {
          var n = 3 * e[1],
            i = 3 * (e[3] - e[1]) - n;
          return (((1 - n - i) * t + i) * t + n) * t
        }(Ie, n)
      }
      return e != t && (w.uniforms.highlightIntensity.value = t, !0)
    }, this.setRollOverFadeEnabled = function (e) {
      Re = e
    }, this.beginScene = function (t, n, s, l) {
      if (c = n, h = t.fog, u = s, S = !1, N = !1, !V && O) this.initPostPipeline(Oe.sao, Oe.antialias);
      else if (!V && !O) return void(ue || Object(o.isNodeJS)() || (i.logger.error("Rendering to a canvas that was resized to zero. If you see this message you may be accidentally leaking a viewer instance.", Object(r.errorCodeString)(r.ErrorCodes.VIEWER_INTERNAL_ERROR)), ue = !0));
      if (l) {
        var d = Oe.envMapBg && !!p.material.envMap;
        be && !d ? (e.setClearColor(be, _e), e.clearTarget(V, !0, !0, !1)) : (p.uniforms.uCamDir.value = c.worldUpTransform ? c.getWorldDirection().clone().applyMatrix4(c.worldUpTransform) : c.getWorldDirection(), p.uniforms.uCamUp.value = c.worldUpTransform ? c.up.clone().applyMatrix4(c.worldUpTransform) : c.up, p.uniforms.uResolution.value.set(O, k), p.uniforms.uHalfFovTan.value = Math.tan(a.Math.degToRad(.5 * c.fov)), p.uniforms.opacity.value = _e, e.clearTarget(V, !1, !0, !1), p.render(e, V, null)), Ne && Ne.clearTarget(e);
        for (var f = 0; f < re.length; f++) e.setClearColor(pe, 1), e.clearTarget(re[f], !0, !1, !1)
      }
      if (We(K)) {
        l && (e.setClearColor(me, 0), e.clearTarget(R, !0, !1, !1));
        var m = n.near,
          v = n.far;
        g.uniforms.cameraNear.value = m, g.uniforms.cameraFar.value = v, M.updateUniformValue("cameraNear", m), M.updateUniformValue("cameraFar", v), _.uniforms.cameraNear.value = m, _.uniforms.cameraInvNearFar.value = 1 / (m - v);
        var y = n.projectionMatrix.elements;
        n.isPerspective ? g.uniforms.projInfo.value.set(-2 / (V.width * y[0]), -2 / (V.height * y[5]), (1 - y[8]) / y[0], (1 + y[9]) / y[5]) : g.uniforms.projInfo.value.set(-2 / (V.width * y[0]), -2 / (V.height * y[5]), (1 - y[12]) / y[0], (1 - y[13]) / y[5]), M.updateUniformValue("projInfo", g.uniforms.projInfo.value, !0), w.uniforms.projInfo.value.copy(g.uniforms.projInfo.value);
        var b = n.isPerspective ? 0 : 1;
        g.uniforms.isOrtho.value = b, M.updateUniformValue("isOrtho", b), w.uniforms.isOrtho.value = b;
        g.uniforms.projScale.value = V.height * y[5] * .125, w.uniforms.worldMatrix_mainPass.value = n.matrixWorld
      }
      Oe.sao || (w.uniforms.useAO.value = 0), this.renderScenePart(t, !0, !0, !0, !0)
    }, this.renderScenePart = function (i, r, o, a, s) {
      void 0 !== i.skipColorTarget && (r = !i.skipColorTarget), void 0 !== i.skipDepthTarget && (o = !i.skipDepthTarget), void 0 !== i.skipIdTarget && (a = !i.skipIdTarget), r && Oe.renderEdges && (i.edgeMaterial = n);
      var d = o && We(K),
        f = V,
        p = R,
        m = !1;
      Ne && (f = Ne.chooseColorTarget(i, f), m = (p = Ne.getRenderSao(i) ? R : null) && R.shareDepthFrom !== f), S = !1, N = !1;
      var g, v, y = s ? u : void 0;
      i.fog = h, Ae && Se ? (g = We(Q) && a && d ? [f, p].concat(re) : d ? [f, p] : We(Q) && a ? [f].concat(re) : f, e.render(i, c, g, !1, y)) : Se ? (g = We(Q) && a ? [f].concat(re) : f, e.render(i, c, g, !1, y), d && !i.sortObjects && p && (v = i.overrideMaterial, i.overrideMaterial = t, t.depthWrite !== m && ze(t, m), e.render(i, c, p, !1), i.overrideMaterial = v)) : (r ? (g = f, e.render(i, c, f, !1, y)) : m = !0, We(Q) && a && (l ? (v = i.overrideMaterial, i.overrideMaterial = l, e.render(i, c, re[0], !1), i.overrideMaterial = v) : (e.setProgramPrefix(1, "#define ID_COLOR", "#define ID_COLOR"), e.render(i, c, re[0], !1), e.setProgramPrefix(0, "", "")), m = !1), d && !i.sortObjects && p && (v = i.overrideMaterial, t.depthWrite !== m && ze(t, m), i.overrideMaterial = t, e.render(i, c, p, !1), i.overrideMaterial = v)), i.edgeMaterial = void 0
    }, this.clearAllOverlays = function () {
      e.clearTarget(B, !0, !1, !1)
    }, this.renderOverlays = function (t, i, r) {
      var o = 0;
      for (var a in Ee = !0, t) {
        var s = t[a],
          l = s.scene,
          u = s.camera ? s.camera : c;
        l.children.length && (o || (o = 1, r || (e.setClearColor(me, 0), e.clearTarget(B, !0, !1, !1))), s.materialPre && (l.overrideMaterial = s.materialPre), e.render(l, u, B, !1, i), s.materialPost && (we = !0, e.context.depthFunc(e.context.GREATER), Oe.renderEdges && (n.depthWrite = !1, n.depthTest = !1, l.overrideMaterial = n, e.render(l, u, B, !1)), l.overrideMaterial = s.materialPost, e.render(l, u, B, !1, i), e.context.depthFunc(e.context.LEQUAL), we = !1), Oe.renderEdges && s.materialPre && (n.depthWrite = !1, n.depthTest = !0, l.overrideMaterial = n, e.render(l, u, B, !1)), l.overrideMaterial = null)
      }
      Ee = !1, n.depthWrite = !0, n.depthTest = !0, w.uniforms.useOverlay.value = o
    }, this.computeSSAO = function (t) {
      if (!t && Oe.sao) {
        if (!S) {
          if (U && U.length) {
            var n = U[0];
            _.uniforms.resolution.value.set(1 / n.width, 1 / n.height), _.render(e, n, R);
            for (var i = 1; i < U.length; i++) {
              var r = U[i];
              v.uniforms.resolution.value.set(1 / r.width, 1 / r.height), v.render(e, r, n), n = r
            }
          }
          g.render(e, ne, V), m.uniforms.axis.value.set(1, 0), m.render(e, H, ne), m.uniforms.axis.value.set(0, 1), m.render(e, ne, H), S = !0
        }
        w.uniforms.useAO.value = 1
      } else w.uniforms.useAO.value = 0
    }, this.getFinalTarget = function () {
      return Fe || null
    }, this.presentBuffer = function (t) {
      if (e) {
        var n = this.getFinalTarget();
        if (!(w.uniforms.useAO.value || w.uniforms.useOverlay.value || Ne || 0 !== Le && -1 !== Le || 0 !== De && -1 !== De)) Oe.antialias ? t ? (x.render(e, H, V), t.render(e, n, H)) : Oe.postProcShaded ? (M.render(e, H, V), E.render(e, W, H), x.render(e, n, W)) : x.render(e, n, V) : t ? t.render(e, n, V) : Oe.postProcShaded ? (M.render(e, H, V), E.render(e, n, H)) : E.render(e, n, V);
        else if (Oe.antialias)
          if (t) w.render(e, H, V), x.render(e, ie, H), t.render(e, n, ie);
          else if (Oe.postProcShaded) {
          var i = qe();
          E.render(e, W, i), x.render(e, n, W)
        } else w.render(e, H, V), x.render(e, n, H);
        else if (t) w.render(e, H, V), t.render(e, n, H);
        else if (Oe.postProcShaded) {
          i = qe();
          E.render(e, n, i)
        } else w.render(e, n, V)
      }
    }, this.composeFinalFrame = function (e, t) {
      this.computeSSAO(e), t || this.presentBuffer()
    }, this.cleanup = function () {
      if (e && e.setRenderTarget(null), V && (V.dispose(), V = null), R && (R.dispose(), R = null), B && (B.dispose(), B = null), Ne && Ne.disposeTargets(), H && (H.dispose(), H = null), ne && (ne.dispose(), ne = null), ie && (ie.dispose(), ie = null), U) {
        for (var t = 0; t < U.length; t++) U[t].dispose();
        U = []
      }
    }, this.setSize = function (t, n, r, o) {
      if (O = t, k = n, Oe.logicalWidth = t, Oe.logicalHeight = n, 0 === t && 0 === n || !e) this.cleanup();
      else {
        var s, l = 0 | t * e.getPixelRatio(),
          c = 0 | n * e.getPixelRatio();
        Oe.deviceWidth = l, Oe.deviceHeight = c, o || (he ? e.setViewport(0, 0, t, n) : e.setSize(t, n));
        var u = l,
          h = c;
        (Oe.useSSAA || Oe.postProcShaded && !xe && e.getPixelRatio() <= 1 && M.postProcessEdgesOn()) && (l *= 2, c *= 2);
        var d = 1 / l,
          f = 1 / c;
        if (!r && V && V.width == l && V.height == c || (i.logger.log("Reallocating render targets."), this.cleanup(), (V = new a.WebGLRenderTarget(l, c, {
            minFilter: a.LinearFilter,
            magFilter: a.LinearFilter,
            format: a.RGBAFormat,
            type: Oe.useHdrTarget ? a.FloatType : a.UnsignedByteType,
            stencilBuffer: !1
          })).generateMipmaps = !1, V.name = "colorTarget", (B = new a.WebGLRenderTarget(l, c, {
            minFilter: a.NearestFilter,
            magFilter: a.NearestFilter,
            format: a.RGBAFormat,
            stencilBuffer: !1
          })).generateMipmaps = !1, B.name = "overlayTarget", B.shareDepthFrom = V, R = null, H = null, W = null, ne = null, ie = null, U = []), Ne && Ne.updateTargets(l, c, r, Oe.useHdrTarget), We(J) && (!r && H && H.width == l && H.height == c || ((H = new a.WebGLRenderTarget(l, c, {
            minFilter: a.LinearFilter,
            magFilter: a.LinearFilter,
            format: a.RGBAFormat,
            stencilBuffer: !1,
            depthBuffer: !1
          })).generateMipmaps = !1, H.name = "postTarget1")), !ne && We(ee) && ((ne = H.clone()).name = "SSAO target"), !ie && We($) && ((ie = H.clone()).name = "post target 2"), !W && We(te) && ((W = new a.WebGLRenderTarget(u, h, {
            minFilter: a.LinearFilter,
            magFilter: a.LinearFilter,
            format: a.RGBAFormat,
            stencilBuffer: !1,
            depthBuffer: !1
          })).generateMipmaps = !1, W.name = "postTargetNormal"), We(K)) {
          if (r || !R || R.width != l || R.height != c) {
            R = Ue(l, c, Me, Te, V), U = [];
            for (var p = 0; p < 5; p++) {
              var v = 0 | l / (2 << p),
                y = 0 | c / (2 << p),
                b = null;
              v >= 1 && y >= 1 && ((b = new a.WebGLRenderTarget(v, y, {
                minFilter: a.NearestFilter,
                magFilter: a.NearestFilter,
                format: a.RGBAFormat,
                depthBuffer: !1,
                stencilBuffer: !1
              })).generateMipmaps = !1, U.push(b)), g.uniforms["tDepth_mip" + (p + 1)].value = b
            }
            Ae = e.verifyMRTWorks([V, R])
          }
          g.uniforms.size.value.set(l, c), g.uniforms.resolution.value.set(d, f), g.uniforms.tDepth.value = R, m.uniforms.size.value.set(l, c), m.uniforms.resolution.value.set(d, f), M.updateUniformValue("tDepth", R), w.uniforms.tDepth.value = R
        }
        if (We(Q)) {
          if (r || !re[0] || re[0].width != l || re[0].height != c) {
            for (s = 0; s < re.length; s++) re[s] && re[s].dispose();
            for (re = [], s = 0; s < Oe.numIdTargets; s++) {
              var _ = je(l, c);
              _.name = "id " + s, re.push(_)
            }(Se = e.verifyMRTWorks([V].concat(re))) || i.logger.warn("ID buffer requested, but MRT is not supported. Some features will not work.")
          }
          M.updateUniformValue("tID", re[0])
        } else if (re[0]) {
          for (s = 0; s < re.length; s++) re[s].dispose(), re[s] = null;
          re.length = 0
        }
        x.uniforms.uResolution.value.set(d, f), M.changeResolution(d, f), w.uniforms.tOverlay.value = B, w.uniforms.tAO.value = ne, w.uniforms.useAO.value = Oe.sao ? 1 : 0, w.uniforms.resolution.value.set(d, f), w.uniforms.tID.value = re[0] || null, w.uniforms.tID2.value = re[1] || null, Ne && Ne.updateBlendPass()
      }
    }, this.getMaxAnisotropy = function () {
      return e ? e.getMaxAnisotropy() : 0
    }, this.mrtFlags = function () {
      return {
        mrtNormals: Ae && We(K),
        mrtIdBuffer: Se && We(Q) ? Oe.numIdTargets : void 0
      }
    }, this.setIdTargetCount = function (e) {
      if (!(e > 2 || e < 1) && e !== Oe.numIdTargets && (Oe.numIdTargets = e, 0 !== re.length && 2 === e && 1 === re.length)) {
        var t = je(re[0].width, re[0].height);
        return t.name = "id " + re.length, re.push(t), w.uniforms.tID2.value = t, w.material.defines.USE_MODEL_ID = "1", w.material.needsUpdate = !0, !0
      }
    }, this.getAntialiasing = function () {
      return Oe.antialias
    }, this.initPostPipeline = function (e, t) {
      Oe.sao = e && !o.isIE11 && Ce, Oe.antialias = t && !o.isIE11, Oe.haveTwoSided && Ge((function (e) {
        e.side = a.DoubleSide
      })), Ge((function (e) {
        e.needsUpdate = !0
      })), g.material.needsUpdate = !0, m.material.needsUpdate = !0, _.material.needsUpdate = !0, v.material.needsUpdate = !0, x.material.needsUpdate = !0, M.setMaterialNeedsUpdate(), w.material.needsUpdate = !0, p.material.needsUpdate = !0, E.material.needsUpdate = !0, this.setSize(O, k)
    }, this.setClearColors = function (e, t) {
      (be = t ? e.equals(t) || xe ? new a.Color(.5 * (e.x + t.x), .5 * (e.y + t.y), .5 * (e.z + t.z)) : void 0 : e.clone()) || (p.uniforms.color1.value.copy(e), p.uniforms.color2.value.copy(t))
    }, this.setClearAlpha = function (e) {
      _e = e
    }, this.setAOEnabled = function (e) {
      Oe.sao = e && Ce, ke.sao = Oe.sao, this.setSize(O, k, !1, !0)
    }, this.setAOOptions = function (e, t, n) {
      void 0 !== e && (g.uniforms.radius.value = e, g.uniforms.bias.value = Object(o.isMobileDevice)() ? .1 : .01, m.uniforms.radius.value = e), void 0 !== t && (g.uniforms.intensity.value = t), w.uniforms.aoOpacity.value = void 0 !== n ? n : 1, S = !1
    }, this.getAOEnabled = function () {
      return Oe.sao
    }, this.getAORadius = function () {
      return g.uniforms.radius.value
    }, this.getAOIntensity = function () {
      return g.uniforms.intensity.value
    }, this.setCubeMap = function (e) {
      p.material.envMap = e, e || this.toggleEnvMapBackground(!1), e && Oe.envMapBg && (p.uniforms.envMapBackground.value = !0)
    }, this.getCubeMap = function () {
      return p.material.envMap
    }, this.setEnvRotation = function (e) {
      se = e, p.material.envRotationSin = Math.sin(e), p.material.envRotationCos = Math.cos(e)
    }, this.getEnvRotation = function () {
      return se
    }, this.setEnvExposure = function (e) {
      p.uniforms.envMapExposure.value = Math.pow(2, e), p.material.envMapExposure = Math.pow(2, e), p.material.needsUpdate = !0, oe = e
    }, this.setTonemapExposureBias = function (e) {
      ae = e, p.uniforms.exposureBias.value = Math.pow(2, e)
    }, this.getExposureBias = function () {
      return ae
    }, this.setCamera = function (e) {
      c = e
    }, this.setTonemapMethod = function (t) {
      le = t, e.gammaInput = 0 !== t, p.material.tonemapOutput = le, p.material.needsUpdate = !0
    }, this.getToneMapMethod = function () {
      return le
    }, this.toggleTwoSided = function (e) {
      Oe.haveTwoSided != e && t && Ge((function (t) {
        t.side = e ? a.DoubleSide : a.FrontSide, t.needsUpdate = !0
      })), Oe.haveTwoSided = e
    }, this.toggleEdges = function (e) {
      Oe.renderEdges = e, ke.renderEdges = e
    }, this.getRenderEdges = function () {
      return Oe.renderEdges
    }, this.getRenderEdges = function () {
      return Oe.renderEdges
    }, this.toggleEnvMapBackground = function (e) {
      Oe.envMapBg = e, p.uniforms.envMapBackground.value = e && !!p.material.envMap
    }, this.enter2DMode = function (e, t) {
      l = e, ke.sao = Oe.sao, ke.postProcShaded = Oe.postProcShaded, ke.antialias = Oe.antialias, ke.idbuffer = Oe.idbuffer, ke.renderEdges = Oe.renderEdges, ke.useIdBufferSelection = Oe.useIdBufferSelection, t && (ke.selectionColor = Oe.selectionColor, this.setSelectionColor(t)), Oe.idbuffer = !0, Oe.postProcShaded = !1, Oe.renderEdges = !1, w.material.defines.IS_2D = "", Be(Oe.idbuffer), this.initPostPipeline(!1, !1)
    }, this.exit2DMode = function () {
      l = null, Oe.idbuffer = ke.idbuffer, Oe.postProcShaded = ke.postProcShaded, Oe.renderEdges = ke.renderEdges, ke.selectionColor && this.setSelectionColor(ke.selectionColor), delete w.material.defines.IS_2D, Be(ke.idbuffer), this.initPostPipeline(ke.sao, ke.antialias)
    }, this.idAtPixel = function (t, n, i) {
      if (!re[0]) return 0;
      var r = 0 | .5 * (t + 1) * re[0].width,
        o = 0 | .5 * (n + 1) * re[0].height;
      if (N && r === T && o === C) return i && (i[0] = P, i[1] = L), P;
      e.readRenderTargetPixels(re[0], r, o, 1, 1, de);
      var a = de[2] << 16 | de[1] << 8 | de[0],
        s = 0;
      return re[1] ? (e.readRenderTargetPixels(re[1], r, o, 1, 1, de), s = (s = de[1] << 8 | de[0]) << 16 >> 16, a = a << 8 >> 8) : a = a << 8 >> 8, T = r, C = o, P = a, L = s, N = !0, i && (i[0] = a, i[1] = s), a
    }, this.idAtPixels = function (t, n, i, r) {
      if (!re[0]) return 0;
      var o = .5 * (t + 1) * re[0].width - .5 * (i - 1),
        a = .5 * (n + 1) * re[0].height - .5 * (i - 1),
        s = new Uint8Array(4 * i * i);
      e.readRenderTargetPixels(re[0], o, a, i, i, s);
      var l = void 0;
      return r && re[1] && (l = new Uint8Array(4 * i * i), e.readRenderTargetPixels(re[1], o, a, i, i, l)),
        function () {
          for (var e, t = 0, n = 0, o = 0, a = -1, c = 0; c < i * i; c++) {
            var u = t + (i - 1) / 2,
              h = n + (i - 1) / 2;
            if (u >= 0 && u <= i && h >= 0 && h <= i) {
              var d = u + h * i;
              if ((e = (e = s[4 * d + 2] << 16 | s[4 * d + 1] << 8 | s[4 * d]) << 8 >> 8) >= 0) {
                if (l) {
                  var f = l[4 * d + 1] << 8 | l[4 * d];
                  f = f << 16 >> 16, r[0] = e, r[1] = f
                }
                break
              }
            }
            if (t == n || t < 0 && t == -n || t > 0 && t == 1 - n) {
              var p = o;
              o = -a, a = p
            }
            t += o, n += a
          }
          return e
        }()
    }, this.readbackTargetId = function () {
      if (!re[0]) return null;
      var t = new Uint8Array(4 * re[0].width * re[0].height);
      return e.readRenderTargetPixels(re[0], 0, 0, re[0].width, re[0].height, t), {
        buffer: t,
        width: re[0].width,
        height: re[0].height
      }
    }, this.rolloverObjectViewport = function (e, t) {
      fe[1] = 0;
      var n = this.idAtPixel(e, t, fe);
      return this.rolloverObjectId(n, null, fe[1])
    }, this.rolloverObjectId = function (e, t, n) {
      return n = n || 0, (e !== Le || n !== De) && (w.uniforms.highlightIntensity.value = 0, Pe = performance.now(), Le = e, De = n, -1 === e && (e = 0), void 0 === n && (n = 1), w.uniforms.objIDv4.value.set((255 & e) / 255, (e >> 8 & 255) / 255, (e >> 16 & 255) / 255, (e >> 24 & 255) / 255), w.uniforms.modelIDv2.value.set((255 & n) / 255, (n >> 8 & 255) / 255), !0)
    }, this.setDbIdForEdgeDetection = function (e, t) {
      w.uniforms.edgeObjIDv4.value.set((255 & e) / 255, (e >> 8 & 255) / 255, (e >> 16 & 255) / 255, (e >> 24 & 255) / 255), w.uniforms.edgeModelIDv2.value.set((255 & t) / 255, (t >> 8 & 255) / 255)
    }, this.setSpatialFilterForRollOver = function (e) {
      if (!e || this.spatialFilterForRollOverSupported()) {
        w.material.defines.SPATIAL_FILTER !== e && (e && "" !== e ? w.material.defines.SPATIAL_FILTER = e : delete w.material.defines.SPATIAL_FILTER, w.material.needsUpdate = !0, w.uniforms.highlightIntensity.value = 0, Pe = performance.now())
      } else i.logger.warn("Spatial filter for mouse-over can only be used with depth target")
    }, this.spatialFilterForRollOverSupported = function () {
      return We(K)
    }, this.setEdgeColor = function (e) {
      ge.copy(e)
    }, this.setSelectionColor = function (e) {
      var t = new a.Color(e);
      t.r = Math.pow(t.r, 2), t.g = Math.pow(t.g, 2), t.b = Math.pow(t.b, 2), w.uniforms.selectionColor.value.set(t), w.material.needsUpdate = !0, Oe.selectionColor = e
    }, this.setUnitScale = function (e) {
      ce = e
    }, this.getUnitScale = function () {
      return ce
    }, this.getBlendPass = function () {
      return w
    }, this.getClearPass = function () {
      return p
    }, this.getColorTarget = function () {
      return V
    }, this.getIDTargets = function () {
      return re
    }, this.getDepthTarget = function () {
      return R
    }, this.getIdTarget = function () {
      return re[0]
    }, this.getDepthMaterial = function () {
      return t
    }, this.getPostTarget = function () {
      return H
    }, this.getEdgeMaterial = function () {
      return n
    }, this.setCrossFade = function (e) {
      Ne = e
    }, this.getCrossFade = function () {
      return Ne
    }, this.setOffscreenTarget = function (e) {
      Fe = e
    }, this.getOffscreenTarget = function () {
      return Fe
    }, this.getNamedTarget = function (e) {
      switch (e) {
        case "color":
          return V;
        case "overlay":
          return B;
        case "id":
          return re[0];
        case "post1":
          return H;
        case "post2":
          return ie;
        case "postdisplay":
          return W;
        case "ssao":
          return ne;
        case "depth":
          return R
      }
      return null
    }, this.getCurrentFramebuffer = function () {
      return e.getCurrentFramebuffer()
    }, this.getConfig = function () {
      return {
        renderEdges: Oe.renderEdges,
        envMapBackground: Oe.envMapBg,
        envMap: p.material.envMap,
        envExposure: oe,
        toneMapExposureBias: ae,
        envRotation: this.getEnvRotation(),
        tonemapMethod: le,
        clearColor: be && be.clone(),
        clearColorTop: !be && p.uniforms.color1.value.clone(),
        clearColorBottom: !be && p.uniforms.color2.value.clone(),
        clearAlpha: _e,
        aoEnabled: this.getAOEnabled(),
        aoRadius: this.getAORadius(),
        aoIntensity: this.getAOIntensity(),
        twoSided: Oe.haveTwoSided,
        edgeColor: ge.clone(),
        unitScale: this.getUnitScale(),
        is2D: !!w.material.defines.IS_2D,
        antialias: this.getAntialiasing(),
        idMaterial: l,
        selectionColor: Oe.selectionColor
      }
    }, this.applyConfig = function (e) {
      this.toggleEdges(e.renderEdges), this.toggleEnvMapBackground(e.envMapBackground), this.setCubeMap(e.envMap), this.setEnvExposure(e.envExposure), this.setTonemapExposureBias(e.toneMapExposureBias), this.setEnvRotation(e.envRotation), this.setTonemapMethod(e.tonemapMethod), this.toggleTwoSided(e.twoSided), this.setEdgeColor(e.edgeColor), this.setUnitScale(e.unitScale), e.clearColor ? this.setClearColors(e.clearColor) : this.setClearColors(e.clearColorTop, e.clearColorBottom), this.setClearAlpha(e.clearAlpha);
      var t = !!w.material.defines.IS_2D;
      e.is2D && !t ? this.enter2DMode(e.idMaterial, e.selectionColor) : !e.is2D && t && (this.setSelectionColor(e.selectionColor), this.exit2DMode());
      var n = e.aoEnabled != this.getAOEnabled(),
        i = e.antialias != this.getAntialiasing();
      (n || i) && this.initPostPipeline(e.aoEnabled, e.antialias)
    }, this.targetToCanvas = function (t) {
      var n = t.width,
        i = t.height,
        r = new Uint8Array(n * i * 4);
      e.readRenderTargetPixels(t, 0, 0, n, i, r);
      var a = X.createElement("canvas");
      a.width = n, a.height = i;
      var s, l = a.getContext("2d"),
        c = new Uint8ClampedArray(r);
      return o.isIE11 ? (s = l.createImageData(n, i)).data.set(c) : s = new ImageData(c, n, i), l.putImageData(s, 0, 0), l.globalCompositeOperation = "copy", l.translate(0, i), l.scale(1, -1), l.drawImage(a, 0, 0, n, i), l.globalCompositeOperation = "source-over", {
        canvas: a,
        ctx: l
      }
    }
  }
}, function (e, t, n) {
  "use strict";
  n.r(t), n.d(t, "ErrorHandler", (function () {
    return c
  }));
  var i = n(110),
    r = n(1),
    o = n(8),
    a = n(94);

  function s(e) {
    return (s = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (e) {
      return typeof e
    } : function (e) {
      return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
    })(e)
  }
  var l = {
    1: {
      img: "img-reload",
      "globalized-msg": "Viewer-UnknownFailure",
      "default-msg": "<title> Sorry </title><message>We seem to have some technical difficulties and couldn't complete your request.</message><hint>Try loading the item again. </hint><hint>Please verify your Internet connection, and refresh the browser to see if that fixes the problem.</hint>"
    },
    2: {
      img: "img-unsupported",
      "globalized-msg": "Viewer-BadData",
      "default-msg": "<title> Sorry </title><message>The item you are trying to view was not processed completely. </message><hint>Try loading the item again.</hint><hint>Please upload the file again to see if that fixes the issue.</hint>"
    },
    3: {
      img: "img-reload",
      "globalized-msg": "Viewer-NetworkError",
      "default-msg": "<title> Sorry </title><message>We seem to have some technical difficulties and couldn't complete your request.</message><hint> Try loading the item again.</hint><hint> Please verify your Internet connection, and refresh the browser to see if that fixes the problem.</hint>"
    },
    4: {
      img: "img-unloack",
      "globalized-msg": "Viewer-AccessDenied",
      "default-msg": "<title> No access </title><message>Sorry. You don’t have the required privileges to access this item.</message><hint> Please contact the author</hint>"
    },
    5: {
      img: "img-item-not-found",
      "globalized-msg": "Viewer-FileNotFound",
      "default-msg": '<title> Sorry </title><message>We can’t display the item you are looking for. It may not have been processed yet. It may have been moved, deleted, or you may be using a corrupt file or unsupported file format.</message><hint> Try loading the item again.</hint><hint> Please upload the file again to see if that fixes the issue.</hint><hint> <a href="http://help.autodesk.com/view/ADSK360/ENU/?guid=GUID-488804D0-B0B0-4413-8741-4F5EE0FACC4A" target="_blank">See a list of supported formats.</a></hint>'
    },
    6: {
      img: "img-reload",
      "globalized-msg": "Viewer-ServerError",
      "default-msg": "<title> Sorry </title><message>We seem to have some technical difficulties and couldn't complete your request.</message><hint> Try loading the item again.</hint><hint> Please verify your Internet connection, and refresh the browser to see if that fixes the problem.</hint>"
    },
    7: {
      img: "img-reload",
      "globalized-msg": "Viewer-UnhandledResponseCode",
      "default-msg": "<title> Network problem </title><message>Sorry. We seem to have some technical difficulties and couldn't complete your request.</message><hint> Try loading the item again.</hint><hint> Please verify your Internet connection, and refresh the browser to see if that fixes the problem.</hint>"
    },
    8: {
      img: "img-unsupported",
      "globalized-msg": "Viewer-WebGlNotSupported",
      "default-msg": '<title>Sorry</title><message>We can\'t show this item because this browser doesn\'t support WebGL.</message><hint>Try Google Chrome, Mozilla Firefox, or another browser that supports WebGL 3D graphics.</hint><hint>For more information, see the <a href="WEBGL_HELP" target="_blank">A360 browser reqirements.</a></hint>'
    },
    9: {
      img: "img-item-not-found",
      "globalized-msg": "Viewer-NoViewable",
      "default-msg": "<title> No viewable content </title><message>There’s nothing to display for this item. It may not have been processed or it may not have content we can display.</message><hint> Please contact the author.</hint><hint> Please upload the file again to see if that fixes the issue.</hint>"
    },
    10: {
      img: "img-unsupported",
      "globalized-msg": "Viewer-WebGlDisabled",
      "default-msg": '<title>Sorry</title><message>We can\'t show this item because WebGL is disabled on this device.</message><hint> For more information see the <a href="WEBGL_HELP" target="_blank">A360 Help.</a></hint>'
    },
    11: {
      img: "img-item-not-found",
      "globalized-msg": "Viewer-ModeIsEmpty",
      "default-msg": "<title>Model is empty</title><message>Model is empty, there is no geometry for the viewer to show.</message><hint> Please contact the author.</hint><hint> Please upload the file again to see if that fixes the issue.</hint>"
    },
    12: {
      img: "img-unsupported",
      "globalized-msg": "Viewer-RTCError",
      "default-msg": "<title> Sorry </title><message>We couldn’t connect to the Collaboration server.</message><hint> Please verify your Internet connection, and refresh the browser to see if that fixes the problem.</hint>"
    },
    13: {
      img: "img-unsupported",
      "globalized-msg": "Viewer-FileExtNotSupported",
      "default-msg": {
        title: "Sorry",
        message: "The file extension loaded into the Viewer is not supported",
        hints: ["Try a different file"]
      }
    },
    15: {
      img: "img-unsupported",
      "globalized-msg": "Viewer-WebGlContextLost",
      "default-msg": {
        title: "WebGL context lost",
        message: "Unable to recover from software mode.  Please restart your browser and reload the Viewer",
        hints: ["If you continue to encounter this issue when viewing this model, we recommend switching to a different browser."]
      }
    }
  };

  function c() {}
  c.prototype.constructor = c, c.reportError = function (e, t, n, s, u, h) {
    if (c.currentError = null, c.currentErrors = null, t) {
      var d = {
        category: "error",
        code: t,
        message: n,
        httpStatusCode: s,
        httpStatusText: u
      };
      r.logger.track(d, !0), c.currentError = [e, t, n, h];
      var f = l[t];
      if (f) {
        (b = {
          defaultValue: ""
        }).defaultValue = f["default-msg"];
        var p = f.img,
          m = f["globalized-msg"],
          g = this.parseErrorString(m, b);
        if (t === Autodesk.Viewing.ErrorCodes.BROWSER_WEBGL_DISABLED || t === Autodesk.Viewing.ErrorCodes.BROWSER_WEBGL_NOT_SUPPORTED)
          for (var v = Object(a.getWebGLHelpLink)() || "http://www.autodesk.com/a360-browsers", y = 0; y < g.hints.length; y++) {
            -1 !== g.hints[y].indexOf('href="WEBGL_HELP"') && (g.hints[y] = g.hints[y].replace('href="WEBGL_HELP"', 'href="' + v + '"'))
          }
        i.AlertBox.displayError(e, g.msg, g.header, p, g.hints)
      } else {
        p = "img-unsupported";
        var b = {
          defaultValue: "",
          interpolationPrefix: "{",
          interpolationSuffix: "}"
        };
        this.parseArguments(n, b), (g = this.parseErrorString(t, b)).header || (g.header = "warning" === h ? o.i18n.translate("header-warning") : ""), i.AlertBox.displayError(e, g.msg, g.header, p, g.hints)
      }
    }
  }, c.reportErrors = function (e, t) {
    if (c.currentError = null, c.currentErrors = null, t) {
      c.currentErrors = [e, t];
      for (var n = {
          defaultValue: "",
          interpolationPrefix: "{",
          interpolationSuffix: "}"
        }, a = [], s = 0; s < t.length; s++)
        if (t[s].code) {
          this.parseArguments(t[s].message, n);
          var l = this.parseErrorString(t[s].code, n);
          l.header || (l.header = "warning" === t[0].type ? o.i18n.translate("header-warning", {
            defaultValue: "Warning"
          }) : ""), a.push(l);
          var u = {
            category: "error",
            code: t[s].code,
            message: t[s].message
          };
          r.logger.track(u, !0)
        } if (a.length) {
        i.AlertBox.displayErrors(e, "img-unsupported", a)
      }
    }
  }, c.parseArguments = function (e, t) {
    if (e)
      if ("string" == typeof e) t.defaultValue = e;
      else {
        t.defaultValue = e[0];
        for (var n = 1; n < e.length; n++) {
          t[(n - 1).toString()] = e[n]
        }
      }
  }, c.parseErrorString = function (e, t) {
    var n = {
      msg: null,
      msgList: null,
      header: null,
      hints: null
    };
    if (!e) return n;
    if ("object" === s(t.defaultValue)) {
      var i = t.defaultValue;
      return n.header = i.title, n.msg = i.message, n.hints = i.hints.concat(), n
    }
    var r = o.i18n.translate(e, t);
    if (!r) return n;
    if (-1 != r.indexOf("<title>")) {
      var a = r.split("<title>")[1].split("</title>");
      n.header = a[0], r = a[1]
    }
    if (r && -1 != r.indexOf("<message>")) {
      a = r.split("<message>")[1].split("</message>");
      n.msg = a[0], r = a[1]
    } else n.msg = r;
    if (r && -1 != r.indexOf("<hint>")) {
      n.hints = [];
      for (var l = r.split("<hint>"), c = 0; c < l.length; c++) {
        var u = l[c].split("</hint")[0];
        n.hints.push(u)
      }
    }
    return n
  }, c.localize = function () {
    if (i.AlertBox.instances.length > 0)
      if (i.AlertBox.dismiss(), c.currentError) {
        var e = c.currentError.shift(),
          t = c.currentError;
        c.reportError(e, t[0], t[1], t[2])
      } else {
        e = c.currentErrors.shift();
        var n = c.currentErrors[0];
        c.reportErrors(e, n)
      }
  }
}, function (e, t, n) {
  var i = n(288),
    r = n(212).concat("length", "prototype");
  t.f = Object.getOwnPropertyNames || function (e) {
    return i(e, r)
  }
}, function (e, t, n) {
  "use strict";
  var i = n(84),
    r = n(32),
    o = n(99);
  e.exports = function (e, t, n) {
    var a = i(t);
    a in e ? r.f(e, a, o(0, n)) : e[a] = n
  }
}, function (e, t, n) {
  "use strict";
  var i = n(38),
    r = n(32),
    o = n(25),
    a = n(24),
    s = o("species");
  e.exports = function (e) {
    var t = i(e),
      n = r.f;
    a && t && !t[s] && n(t, s, {
      configurable: !0,
      get: function () {
        return this
      }
    })
  }
}, function (e, t, n) {
  var i = n(68);
  e.exports = function (e, t, n) {
    for (var r in t) i(e, r, t[r], n);
    return e
  }
}, function (e, t, n) {
  var i = n(154),
    r = n(22),
    o = n(40),
    a = n(32).f,
    s = n(153),
    l = n(164),
    c = s("meta"),
    u = 0,
    h = Object.isExtensible || function () {
      return !0
    },
    d = function (e) {
      a(e, c, {
        value: {
          objectID: "O" + ++u,
          weakData: {}
        }
      })
    },
    f = e.exports = {
      REQUIRED: !1,
      fastKey: function (e, t) {
        if (!r(e)) return "symbol" == typeof e ? e : ("string" == typeof e ? "S" : "P") + e;
        if (!o(e, c)) {
          if (!h(e)) return "F";
          if (!t) return "E";
          d(e)
        }
        return e[c].objectID
      },
      getWeakData: function (e, t) {
        if (!o(e, c)) {
          if (!h(e)) return !0;
          if (!t) return !1;
          d(e)
        }
        return e[c].weakData
      },
      onFreeze: function (e) {
        return l && f.REQUIRED && h(e) && !o(e, c) && d(e), e
      }
    };
  i[c] = !0
}, function (e, t, n) {
  var i = n(15),
    r = n(167);
  e.exports = i ? r : function (e) {
    return Set.prototype.values.call(e)
  }
}, function (e, t, n) {
  "use strict";
  n.r(t), n.d(t, "extendLocalization", (function () {
    return s
  })), n.d(t, "setLanguage", (function () {
    return l
  })), n.d(t, "initializeLocalization", (function () {
    return c
  }));
  var i = n(3),
    r = n(8),
    o = n(170);

  function a(e) {
    return (a = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (e) {
      return typeof e
    } : function (e) {
      return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
    })(e)
  }
  var s = function (e) {
      return null !== e && "object" === a(e) && (Object.keys(e).forEach((function (t) {
        r.i18n.addResourceBundle(t, "allstrings", e[t], !0, !0)
      })), !0)
    },
    l = function (e, t) {
      var n = {
        lng: e,
        resGetPath: "res/locales/__lng__/__ns__.json",
        ns: {
          namespaces: ["allstrings"],
          defaultNs: "allstrings"
        },
        fallbackLng: "en",
        debug: !1,
        useCookie: !1
      };
      Object(i.getGlobal)().LOCALIZATION_REL_PATH = "res/locales/" + e + "/", r.i18n.init(n, (function (e) {
        r.i18n.clearDebugLocString(), t && t()
      }))
    },
    c = function (e) {
      var t = e && e.language || navigator.language,
        n = o.Lang.getSupported(t);
      l(n)
    }
}, function (e, t, n) {
  "use strict";
  n.r(t), n.d(t, "FragmentList", (function () {
    return f
  })), n.d(t, "FragmentPointer", (function () {
    return E
  }));
  var i = n(44),
    r = n(0),
    o = n(10),
    a = n(1),
    s = n(134),
    l = (n(90), new r.Matrix4),
    c = new r.Box3,
    u = new r.Quaternion,
    h = new r.Vector3,
    d = new r.Vector3;

  function f(e) {
    this.is2d = e.is2d(), this.modelId = e.getModelId(), this.fragments = e.getData().fragments, this.geoms = e.getGeometryList(), this.isFixedSize = this.fragments.length > 0, this.isFixedSize ? (this.boxes = this.fragments.boxes, this.transforms = this.fragments.transforms, this.useThreeMesh = !i.memoryOptimizedLoading) : (this.boxes = null, this.transforms = null, this.useThreeMesh = !0);
    var t = this.fragments.length;
    if (this.vizflags = new Uint16Array(t), this.useThreeMesh && (this.vizmeshes = new Array(t)), e.isOTG()) {
      var n = e.getData().metadata.stats,
        r = n.num_materials,
        o = n.num_geoms;
      this.materialids = Object(s.a)(t, r), this.geomids = Object(s.a)(t, o)
    } else this.geomids = new Int32Array(t), this.materialids = new Int32Array(t);
    this.materialmap = {}, this.materialIdMap = {}, this.nextMaterialId = 1, this.db2ThemingColor = [], this.originalColors = [], this.themingOrGhostingNeedsUpdate = [], this.dbIdIsHidden = [], this.dbIdIsGhosted = [], this.animxforms = null;
    for (var a = 0; a < t; a++) this.vizflags[a] = 1;
    !e.isOTG() && this.fragments.visibilityFlags && this.vizflags.set(this.fragments.visibilityFlags), this.allVisible = !0, this.allVisibleDirty = !0, this.nextAvailableFragID = t, this.linesHidden = !1, this.pointsHidden = !1
  }

  function p(e) {
    var t = e.r;
    return e.r = e.b, e.b = t, e
  }
  f.prototype.getNextAvailableFragmentId = function () {
    return this.nextAvailableFragID++
  }, f.prototype.fragmentsHaveBeenAdded = function () {
    return this.vizflags.length > this.fragments.length
  }, f.prototype.getSvfMaterialId = function (e) {
    var t = this.getMaterial(e);
    return t ? t.svfMatId : void 0
  }, f.prototype.setMesh = function (e, t, n, i) {
    if (this.vizmeshes) {
      var s = this.vizmeshes[e];
      s && s.parent && s.parent.remove(s)
    }
    if (this.vizflags.length <= e) {
      this.isFixedSize && (a.logger.warn("Attempting to resize a fragments list that was initialized with fixed data. This will have a performance impact."), this.isFixedSize = !1);
      var l = Math.ceil(1.5 * Math.max(this.vizflags.length, e)) || 1;
      this.useThreeMesh && l < this.vizmeshes.length && (l = this.vizmeshes.length);
      var u = new Uint16Array(l);
      if (u.set(this.vizflags), this.vizflags = u, this.transforms) {
        var h = new Float32Array(12 * l);
        h.set(this.transforms), this.transforms = h
      }
      if (this.boxes) {
        var d = new Float32Array(6 * l);
        d.set(this.boxes), this.boxes = d
      }
      if (this.geomids) {
        var f = new Int32Array(l);
        f.set(this.geomids), this.geomids = f
      }
      if (this.materialids) {
        var p = new Int32Array(l);
        p.set(this.materialids), this.materialids = p
      }
    }
    if (this.useThreeMesh) {
      var m;
      i && t instanceof r.Mesh ? (m = t, t.matrix && m.matrixWorld.copy(t.matrix), m.dbId = m.dbId || 0) : (m = new r.Mesh(t.geometry, t.material), t.matrix && (m.matrix && m.matrix.copy(t.matrix), m.matrixWorld.copy(t.matrix)), m.is2d = t.is2d, m.isLine = t.isLine, m.isWideLine = t.isWideLine, m.isPoint = t.isPoint, m.dbId = 0 | this.fragments.fragId2dbId[e]), m.matrixAutoUpdate = !1, m.frustumCulled = !1, m.fragId = e, m.modelId = this.modelId, this.vizmeshes[e] = m
    } else {
      var g = void 0;
      t.geometry.hash ? (void 0 === t.geomId && console.error("meshInfo must provide geomId"), g = t.geomId) : g = t.geometry.svfid, this.geomids[e] = g, this.setMaterial(e, t.material)
    }
    var v = 0;
    if (t.isLine ? v = o.MeshFlags.MESH_ISLINE : t.isWideLine ? v = o.MeshFlags.MESH_ISWIDELINE : t.isPoint && (v = o.MeshFlags.MESH_ISPOINT), this.isFixedSize ? this.vizflags[e] |= v : this.vizflags[e] |= o.MeshFlags.MESH_VISIBLE | v, n && this.transforms && this.boxes) {
      var y = t.matrix,
        b = 12 * e,
        _ = y.elements,
        x = this.transforms;
      if (x[b] = _[0], x[b + 1] = _[1], x[b + 2] = _[2], x[b + 3] = _[4], x[b + 4] = _[5], x[b + 5] = _[6], x[b + 6] = _[8], x[b + 7] = _[9], x[b + 8] = _[10], x[b + 9] = _[12], x[b + 10] = _[13], x[b + 11] = _[14], !this.fragments.boxesLoaded) {
        t.bbox ? c.copy(t.bbox) : (t.geometry && t.geometry.boundingBox ? c.copy(t.geometry.boundingBox) : this.geoms.getModelBox(this.geomids[e], c), c.empty() || c.applyMatrix4(y));
        var w = 6 * e,
          E = this.boxes;
        E[w] = c.min.x, E[w + 1] = c.min.y, E[w + 2] = c.min.z, E[w + 3] = c.max.x, E[w + 4] = c.max.y, E[w + 5] = c.max.z
      }
    }
  }, f.prototype.isFlagSet = function (e, t) {
    return !!(this.vizflags[e] & t)
  }, f.prototype.setFlagFragment = function (e, t, n) {
    var i = this.vizflags[e];
    return !!(i & t) != n && (this.vizflags[e] = n ? i | t : i & ~t, !0)
  }, f.prototype.setFlagGlobal = function (e, t) {
    var n = this.vizflags,
      i = 0,
      r = n.length;
    if (t)
      for (; i < r; i++) n[i] = n[i] | e;
    else
      for (var o = ~e; i < r; i++) n[i] = n[i] & o
  }, f.prototype.hideLines = function (e) {
    this.linesHidden = e
  }, f.prototype.hidePoints = function (e) {
    this.pointsHidden = e
  }, f.prototype.hideFragments = function (e, t) {
    var n = o.MeshFlags.MESH_HIDE,
      i = this.vizflags,
      r = 0,
      a = i.length;
    if (t)
      for (; r < a; r++) i[r] & e && (i[r] = i[r] | n);
    else
      for (var s = ~n; r < a; r++) i[r] & e && (i[r] = i[r] & s);
    this.allVisibleDirty = !0
  }, f.prototype.isFragVisible = function (e) {
    var t = this.linesHidden && (this.isLine(e) || this.isWideLine(e)),
      n = this.pointsHidden && this.isPoint(e);
    return 1 == (7 & this.vizflags[e]) && !t && !n
  }, f.prototype.isFragOff = function (e) {
    return !!(this.vizflags[e] & o.MeshFlags.MESH_HIDE)
  }, f.prototype.isNotLoaded = function (e) {
    return this.vizflags[e] & o.MeshFlags.MESH_NOTLOADED
  }, f.prototype.isLine = function (e) {
    return !!(this.vizflags[e] & o.MeshFlags.MESH_ISLINE)
  }, f.prototype.isWideLine = function (e) {
    return this.isFlagSet(e, o.MeshFlags.MESH_ISWIDELINE)
  }, f.prototype.isPoint = function (e) {
    return this.isFlagSet(e, o.MeshFlags.MESH_ISPOINT)
  }, f.prototype.areAllVisible = function () {
    if (this.allVisibleDirty) {
      for (var e = this.vizflags, t = !0, n = 0, i = e.length; n < i; n++)
        if (0 == (1 & e[n])) {
          t = !1;
          break
        } this.allVisible = t, this.allVisibleDirty = !1
    }
    return this.allVisible
  };
  var m, g, v, y, b, _, x = (m = null, g = null, v = parseInt("00FFFFFF", 16), y = parseInt("FF000000", 16), function (e, t) {
    return m || (m = new r.Color, g = new r.Color), m.set(e & v), p(m), t && (g.setRGB(t.x, t.y, t.z), m.lerp(g, t.w)), p(m).getHex() | e & y
  });

  function w(e, t) {
    if (e.is2d) {
      var n = e.fragments.dbId2fragId[t];
      if (Array.isArray(n))
        for (var i = 0; i < n.length; i++) e.themingOrGhostingNeedsUpdate[n[i]] = !0;
      else "number" == typeof n && (e.themingOrGhostingNeedsUpdate[n] = !0)
    }
  }

  function E(e, t) {
    this.frags = e, this.fragId = t, this.scale = null, this.quaternion = null, this.position = null
  }
  f.prototype.getVizmesh = ((b = new r.Mesh(void 0, void 0, !0)).isTemp = !0, b.dbId = 0, b.modelId = 0, b.fragId = -1, b.hide = !1, b.isLine = !1, b.isWideLine = !1, b.isPoint = !1, function (e, t, n) {
    return this.is2d && function (e, t) {
      var n = e.originalColors[t];
      if (e.themingOrGhostingNeedsUpdate[t]) {
        var i = e.getGeometry(t),
          r = i ? i.attributes : null,
          o = r ? r.color4b : null,
          a = r ? r.dbId4b : null,
          s = r ? r.layerVp4b : null,
          l = r ? r.flags4b : null;
        if (o && a && i.vb && s && l) {
          for (var c = new Uint32Array(i.vb.buffer), u = i.vbstride, h = c.length / i.vbstride, d = !1, f = o.itemOffset, p = a.itemOffset, m = s.itemOffset, g = l.itemOffset, v = 0; v < h; v++) {
            var y = c[v * u + p],
              b = n ? n[v] : c[v * u + f],
              _ = c[v * u + m],
              w = -1 == (y = y << 8 >> 8) && 0 == (_ & parseInt("FFFF", 16)),
              E = e.db2ThemingColor[y],
              A = e.dbIdIsHidden[y];
            if (E || A) {
              if (!n) {
                n = new Uint32Array(h);
                for (var S = 0; S < h; S++) n[S] = c[S * u + f];
                e.originalColors[t] = n
              }
              b = A ? 0 : x(b, E), d = !0
            } else n && (b = n[v]);
            c[v * u + f] = b;
            var M = e.dbIdIsGhosted[y] && !w,
              T = c[v * u + g];
            M ? T |= 255 << 24 : T &= 16777215, c[v * u + g] = T
          }
          d || (e.originalColors[t] = null), i.vbNeedsUpdate = !0, e.themingOrGhostingNeedsUpdate[t] = !1
        }
      }
    }(this, e), this.useThreeMesh ? this.vizmeshes[e] : (b.geometry = this.getGeometry(e), b.material = this.getMaterial(e), b.dbId = this.getDbIds(e), b.modelId = this.modelId, b.fragId = e, b.visible = !0, b.isLine = this.isLine(e), b.isWideLine = this.isWideLine(e), b.isPoint = this.isPoint(e), b.hide = this.isFragOff(e), b.themingColor = this.db2ThemingColor[b.dbId], this.getWorldMatrix(e, b.matrixWorld), b)
  }), f.prototype.getMaterialId = function (e) {
    var t = this.getMaterial(e);
    return t ? t.id : 0
  }, f.prototype.getMaterial = function (e) {
    return this.useThreeMesh ? this.vizmeshes[e].material : this.materialIdMap[this.materialids[e]]
  }, f.prototype.getGeometry = function (e) {
    var t;
    return this.useThreeMesh ? (t = this.vizmeshes[e]) ? t.geometry : null : this.geoms.getGeometry(this.geomids[e])
  }, f.prototype.getGeometryId = function (e) {
    return this.useThreeMesh ? e : this.geomids[e]
  }, f.prototype.setMaterial = function (e, t) {
    if (this.useThreeMesh) this.vizmeshes[e].material = t;
    else {
      var n = this.materialmap[t.id];
      n || (n = this.nextMaterialId++, this.materialids = Object(s.b)(this.materialids, n), this.materialIdMap[n] = t, this.materialmap[t.id] = n), this.materialids[e] = n
    }
  }, f.prototype.getCount = function () {
    return this.vizmeshes ? this.vizmeshes.length : this.vizflags.length
  }, f.prototype.getDbIds = function (e) {
    return this.fragments.fragId2dbId[e]
  }, f.prototype.dispose = function (e) {
    if (this.useThreeMesh)
      for (var t = {
          type: "dispose"
        }, n = {
          type: "removed"
        }, i = 0; i < this.vizmeshes.length; i++) {
        var r = this.vizmeshes[i];
        r && (r.dispatchEvent(n), r.geometry.dispatchEvent(t))
      } else this.geoms.dispose(e)
  }, f.prototype.setVisibility = function (e, t) {
    this.setFlagFragment(e, o.MeshFlags.MESH_VISIBLE, t), this.allVisibleDirty = !0
  }, f.prototype.setFragOff = function (e, t) {
    this.setFlagFragment(e, o.MeshFlags.MESH_HIDE, t), this.allVisibleDirty = !0
  }, f.prototype.setAllVisibility = function (e) {
    if (this.is2d) {
      var t = this.fragments;
      if (t && t.dbId2fragId)
        for (var n in t.dbId2fragId) this.setObject2DGhosted(parseInt(n), !e)
    } else this.setFlagGlobal(o.MeshFlags.MESH_VISIBLE, e), this.allVisible = e, this.allVisibleDirty = !1
  }, f.prototype.updateAnimTransform = function (e, t, n, i) {
    var r, a = this.animxforms;
    if (!a) {
      var s = this.getCount();
      a = this.animxforms = new Float32Array(10 * s);
      for (var l = 0; l < s; l++) a[r = 10 * l] = 1, a[r + 1] = 1, a[r + 2] = 1, a[r + 3] = 0, a[r + 4] = 0, a[r + 5] = 0, a[r + 6] = 1, a[r + 7] = 0, a[r + 8] = 0, a[r + 9] = 0
    }
    r = 10 * e;
    var c = !1;
    t && (a[r] = t.x, a[r + 1] = t.y, a[r + 2] = t.z, c = !0), n && (a[r + 3] = n.x, a[r + 4] = n.y, a[r + 5] = n.z, a[r + 6] = n.w, c = !0), i && (a[r + 7] = i.x, a[r + 8] = i.y, a[r + 9] = i.z, c = !0), this.setFlagFragment(e, o.MeshFlags.MESH_MOVED, c), c || (a[r] = 1, a[r + 1] = 1, a[r + 2] = 1, a[r + 3] = 0, a[r + 4] = 0, a[r + 5] = 0, a[r + 6] = 1, a[r + 7] = 0, a[r + 8] = 0, a[r + 9] = 0)
  }, f.prototype.getAnimTransform = function (e, t, n, i) {
    if (!this.animxforms) return !1;
    if (!this.isFlagSet(e, o.MeshFlags.MESH_MOVED)) return !1;
    var r = 10 * e,
      a = this.animxforms;
    return t && (t.x = a[r], t.y = a[r + 1], t.z = a[r + 2]), n && (n.x = a[r + 3], n.y = a[r + 4], n.z = a[r + 5], n.w = a[r + 6]), i && (i.x = a[r + 7], i.y = a[r + 8], i.z = a[r + 9]), !0
  }, f.prototype.getOriginalWorldMatrix = function (e, t) {
    var n = 12 * e,
      i = t.elements,
      r = this.transforms;
    if (r) i[0] = r[n], i[1] = r[n + 1], i[2] = r[n + 2], i[3] = 0, i[4] = r[n + 3], i[5] = r[n + 4], i[6] = r[n + 5], i[7] = 0, i[8] = r[n + 6], i[9] = r[n + 7], i[10] = r[n + 8], i[11] = 0, i[12] = r[n + 9], i[13] = r[n + 10], i[14] = r[n + 11], i[15] = 1;
    else if (this.useThreeMesh) {
      var o = this.getVizmesh(e);
      o ? t.copy(o.matrixWorld) : t.identity()
    } else t.identity()
  }, f.prototype.getWorldMatrix = (_ = new r.Matrix4, function (e, t) {
    this.getOriginalWorldMatrix(e, t), this.isFlagSet(e, o.MeshFlags.MESH_MOVED) && (this.getAnimTransform(e, d, u, h), _.compose(h, u, d), t.multiplyMatrices(_, t))
  }), f.prototype.getWorldBounds = function (e, t) {
    if (this.boxes && !this.isFlagSet(e, o.MeshFlags.MESH_MOVED)) {
      var n = this.boxes,
        i = 6 * e;
      return t.min.x = n[i], t.min.y = n[i + 1], t.min.z = n[i + 2], t.max.x = n[i + 3], t.max.y = n[i + 4], void(t.max.z = n[i + 5])
    }
    if (this.useThreeMesh) {
      var r = this.getVizmesh(e);
      r && r.geometry && t.copy(r.geometry.boundingBox)
    } else this.geoms.getModelBox(this.geomids[e], t);
    t.empty() || (this.getWorldMatrix(e, l), t.applyMatrix4(l))
  }, f.prototype.getOriginalWorldBounds = function (e, t) {
    if (this.boxes) {
      var n = this.boxes,
        i = 6 * e;
      return t[0] = n[i], t[1] = n[i + 1], t[2] = n[i + 2], t[3] = n[i + 3], t[4] = n[i + 4], void(t[5] = n[i + 5])
    }
    if (this.useThreeMesh) {
      var r = this.getVizmesh(e);
      r && r.geometry && c.copy(r.geometry.boundingBox)
    } else this.geoms.getModelBox(this.geomids[e], c);
    c.empty() || (this.getOriginalWorldMatrix(e, l), c.applyMatrix4(l)), t[0] = c.min.x, t[1] = c.min.y, t[2] = c.min.z, t[3] = c.max.x, t[4] = c.max.y, t[5] = c.max.z
  }, f.prototype.setThemingColor = function (e, t) {
    var n = this.db2ThemingColor[e];
    n === t || n && t && n.equals(t) || (this.db2ThemingColor[e] = t || void 0, w(this, e))
  }, f.prototype.clearThemingColors = function () {
    if (this.is2d)
      for (var e in this.fragments.dbId2fragId) w(this, parseInt(e));
    this.db2ThemingColor.length = 0
  }, f.prototype.setObject2DGhosted = function (e, t) {
    !!t != !!this.dbIdIsGhosted[e] && (this.dbIdIsGhosted[e] = t, w(this, e))
  }, f.prototype.setObject2DVisible = function (e, t) {
    t !== !this.dbIdIsHidden[e] && (this.dbIdIsHidden[e] = !t, w(this, e))
  }, E.prototype.getWorldMatrix = function (e) {
    this.frags.getWorldMatrix(this.fragId, e)
  }, E.prototype.getOriginalWorldMatrix = function (e) {
    this.frags.getOriginalWorldMatrix(this.fragId, e)
  }, E.prototype.getWorldBounds = function (e) {
    return this.frags.getWorldBounds(this.fragId, e)
  }, E.prototype.getAnimTransform = function () {
    return this.scale || (this.scale = new r.Vector3(1, 1, 1), this.quaternion = new r.Quaternion(0, 0, 0, 1), this.position = new r.Vector3(0, 0, 0)), this.frags.getAnimTransform(this.fragId, this.scale, this.quaternion, this.position)
  }, E.prototype.updateAnimTransform = function () {
    this.scale || (this.scale = new r.Vector3(1, 1, 1), this.quaternion = new r.Quaternion(0, 0, 0, 1), this.position = new r.Vector3(0, 0, 0)), this.frags.updateAnimTransform(this.fragId, this.scale, this.quaternion, this.position)
  }, E.prototype.getMaterial = function () {
    return this.frags.getMaterial(this.fragId)
  }, E.prototype.setMaterial = function (e) {
    return this.frags.setMaterial(this.fragId, e)
  }
}, function (e, t, n) {
  "use strict";
  n.r(t), n.d(t, "VBIntersector", (function () {
    return d
  }));
  var i, r, o = n(58),
    a = n(0);

  function s() {
    i || (i = new a.Matrix4, r = new a.Ray, new a.Vector3, new a.Vector3, new a.Vector3)
  }

  function l(e, t, n) {
    s();
    var l = e.geometry;
    if (l) {
      var c = e.material,
        u = c ? c.side : a.FrontSide;
      i.getInverse(e.matrixWorld), r.copy(t.ray).applyMatrix4(i);
      var h, d, f = t.precision;
      Object(o.enumMeshTriangles)(l, (function (i, o, s, l, c, p, m, g, v, y) {
        null !== (h = u === a.BackSide ? r.intersectTriangle(s, o, i, !0) : r.intersectTriangle(i, o, s, u !== a.DoubleSide)) && (h.applyMatrix4(e.matrixWorld), (d = t.ray.origin.distanceTo(h)) < f || d < t.near || d > t.far || n.push({
          distance: d,
          point: h,
          face: new a.Face3(l, c, p, a.Triangle.normal(i, o, s)),
          faceIndex: y,
          fragId: e.fragId,
          dbId: e.dbId,
          object: e
        }))
      }))
    }
  }

  function c(e, t, n) {
    s();
    var l = e.geometry;
    if (l) {
      var c = t.linePrecision;
      e.isWideLine && (e.material.linewidth ? c = e.material.linewidth : e.geometry.lineWidth && (c = e.geometry.lineWidth));
      var u = c * c;
      i.getInverse(e.matrixWorld), r.copy(t.ray).applyMatrix4(i);
      var h = new a.Vector3,
        d = new a.Vector3;
      l instanceof a.BufferGeometry && Object(o.enumMeshLines)(l, (function (i, o, a, s, l) {
        var c;
        r.distanceSqToSegment(i, o, d, h), h.applyMatrix4(e.matrixWorld), d.applyMatrix4(e.matrixWorld), h.distanceToSquared(d) > u || (c = t.ray.origin.distanceTo(h)) < t.near || c > t.far || n.push({
          distance: c,
          point: h,
          face: {
            a: a,
            b: s
          },
          faceIndex: l,
          fragId: e.fragId,
          dbId: e.dbId,
          object: e
        })
      }))
    }
  }

  function u(e, t, n) {
    e.isLine || e.isWideLine ? c(e, t, n) : e.isPoint ? function (e, t, n) {
      s();
      var l = e.geometry;
      if (l) {
        i.getInverse(e.matrixWorld), r.copy(t.ray).applyMatrix4(i);
        var c = t.precision,
          u = t.params.PointCloud.threshold;
        u || (u = 1), u *= Math.max(3, l.pointSize), u /= 4, l instanceof a.BufferGeometry && Object(o.enumMeshVertices)(l, (function (i, o, a, s) {
          if (!(r.distanceToPoint(i) > u)) {
            var l = r.closestPointToPoint(i);
            if (null !== l) {
              l.applyMatrix4(e.matrixWorld);
              var h = t.ray.origin.distanceTo(l);
              h < c || h < t.near || h > t.far || n.push({
                distance: h,
                point: i,
                face: {
                  a: s
                },
                faceIndex: s,
                fragId: e.fragId,
                dbId: e.dbId,
                object: e
              })
            }
          }
        }))
      }
    }(e, t, n) : l(e, t, n)
  }
  var h = function (e, t) {
    return e.distance - t.distance
  };
  var d = {
    meshRayCast: l,
    lineRayCast: c,
    rayCast: u,
    intersectObject: function (e, t, n, i) {
      ! function e(t, n, i, r) {
        if (t instanceof a.Mesh ? u(t, n, i) : t.raycast(n, i), !0 === r)
          for (var o = t.children, s = 0, l = o.length; s < l; s++) e(o[s], n, i, !0)
      }(e, t, n, i), n.sort(h)
    }
  }
}, function (e, t, n) {
  "use strict";

  function i() {
    this.getContainerBoundingRect = function () {
      var e = this.parentContainer.getBoundingClientRect(),
        t = {
          height: 0,
          width: 0,
          left: 0,
          bottom: 0,
          right: 0,
          top: 0
        },
        n = this.getDocument().getElementsByClassName("toolbar-menu");
      return n && n.length > 0 && (t = n[0].getBoundingClientRect()), {
        height: e.height - t.height,
        width: e.width,
        left: e.left,
        bottom: e.bottom - t.height,
        right: e.right,
        top: e.top
      }
    }
  }
  n.r(t), n.d(t, "ViewerPanelMixin", (function () {
    return i
  }))
}, function (e, t, n) {
  "use strict";
  n.r(t), n.d(t, "PrismMaps", (function () {
    return f
  })), n.d(t, "GetPrismMapChunk", (function () {
    return p
  })), n.d(t, "WebGLProgram", (function () {
    return m
  }));
  var i, r, o, a = n(203),
    s = n(30),
    l = n(0),
    c = n(3),
    u = "#version 300 es\n    #define _LMVWEBGL2_\n    #define texture2D texture\n    #define textureCube texture\n    #define attribute in\n    #define varying out\n",
    h = "#version 300 es\n    #define _LMVWEBGL2_\n    #define texture2D texture\n    #define textureCube texture\n    #define textureCubeLodEXT textureLod\n    #define gl_FragColor outFragColor\n    #define varying in\n",
    d = "\n    #define gl_FragDepth gl_FragDepthEXT\n    #extension GL_OES_standard_derivatives : enable\n",
    f = ["opaque_luminance_modifier", "surface_albedo", "surface_roughness", "surface_anisotropy", "surface_rotation", "opaque_f0", "opaque_albedo", "metal_f0", "layered_f0", "layered_diffuse", "layered_roughness", "layered_anisotropy", "layered_rotation", "layered_bottom_f0", "layered_fraction", "surface_cutout", "glazing_transmission_color", "glazing_f0", "glazing_transmission_roughness", "wood_curly_distortion"],
    p = function (e, t, n) {
      var i = "uv_" + e + "_map",
        r = "";
      return t && n ? r = "if (" + i + ".x < 0.0 || " + i + ".x > 1.0 || " + i + ".y < 0.0 || " + i + ".y > 1.0) { discard; }" : t ? r = "if (" + i + ".x < 0.0 || " + i + ".x > 1.0) { discard; }" : n && (r = "if (" + i + ".y < 0.0 || " + i + ".y > 1.0) { discard; }"), "#define " + e.toUpperCase() + "_CLAMP_TEST " + r
    },
    m = (i = 0, r = function (e) {
      return "" !== e
    }, o = function (e, t, n, i, r) {
      var o = i ? "1.0-" : "",
        a = "texture2D(" + e + ", (UV))",
        s = "";
      return r = r || "vec4(0.0)", t && n ? s = "((UV).x < 0.0 || (UV).x > 1.0 || (UV).y < 0.0 || (UV).y > 1.0) ? " + r + " : " : t ? s = "((UV).x < 0.0 || (UV).x > 1.0) ? " + r + " : " : n && (s = "((UV).y < 0.0 || (UV).y > 1.0) ? " + r + " : "), "#define GET_" + e.toUpperCase() + "(UV) (" + s + o + a + ")"
    }, function (e, t, n, m) {
      var g = e,
        v = g.context,
        y = g.isWebGL2(),
        b = n.defines,
        _ = n.__webglShader.uniforms,
        x = n.attributes,
        w = Object(s.resolve)(n.__webglShader.vertexShader),
        E = Object(s.resolve)(n.__webglShader.fragmentShader),
        A = n.index0AttributeName;
      void 0 === A && !0 === m.morphTargets && (A = "position"), m.envMap;
      var S, M, T = e.gammaFactor > 0 ? e.gammaFactor : 1,
        C = function (e) {
          var t, n, i = [];
          for (var r in e) !1 !== (t = e[r]) && (n = "#define " + r + " " + t, i.push(n));
          return i.join("\n")
        }(b),
        P = v.createProgram();
      n instanceof l.RawShaderMaterial ? ((S = [y ? u : "", C].filter(r).join("\n")).length > 0 && (S += "\n"), (M = [y ? h : d, "precision " + m.precisionFragment + " float;", C, y ? "out vec4 outFragColor;" : ""].filter(r).join("\n")).length > 0 && (M += "\n")) : (S = [y ? u : "", "precision " + m.precision + " float;", "precision " + m.precision + " int;", C, m.vertexPrefix, m.supportsVertexTextures ? "#define VERTEX_TEXTURES" : "", g.gammaInput ? "#define GAMMA_INPUT" : "", g.gammaOutput ? "#define GAMMA_OUTPUT" : "", "#define GAMMA_FACTOR " + T, m.mrtNormals ? "#define MRT_NORMALS" : "", m.mrtIdBuffer ? "#define MRT_ID_BUFFER" : "", "#define MAX_DIR_LIGHTS " + m.maxDirLights, "#define MAX_POINT_LIGHTS " + m.maxPointLights, "#define MAX_SPOT_LIGHTS " + m.maxSpotLights, "#define MAX_HEMI_LIGHTS " + m.maxHemiLights, "#define MAX_BONES " + m.maxBones, "#define NUM_CUTPLANES " + m.numCutplanes, m.loadingAnimationDuration > 0 ? "#define LOADING_ANIMATION" : "", m.map ? "#define USE_MAP" : "", m.envMap ? "#define USE_ENVMAP" : "", m.envMap ? "#define ENVMAP_MODE_REFLECTION" : "", m.irradianceMap ? "#define USE_IRRADIANCEMAP" : "", m.lightMap ? "#define USE_LIGHTMAP" : "", m.bumpMap ? "#define USE_BUMPMAP" : "", m.normalMap ? "#define USE_NORMALMAP" : "", m.specularMap ? "#define USE_SPECULARMAP" : "", m.alphaMap ? "#define USE_ALPHAMAP" : "", m.vertexColors ? "#define USE_COLOR" : "", m.vertexIds ? "#define USE_VERTEX_ID" : "", m.useTiling ? "#define USE_TILING" : "", m.useInstancing ? "#define USE_INSTANCING" : "", m.wideLines ? "#define WIDE_LINES" : "", m.skinning ? "#define USE_SKINNING" : "", m.useVertexTexture ? "#define BONE_TEXTURE" : "", m.morphTargets ? "#define USE_MORPHTARGETS" : "", m.morphNormals ? "#define USE_MORPHNORMALS" : "", m.wrapAround ? "#define WRAP_AROUND" : "", m.doubleSided ? "#define DOUBLE_SIDED" : "", m.flipSided ? "#define FLIP_SIDED" : "", m.sizeAttenuation ? "#define USE_SIZEATTENUATION" : "", m.logarithmicDepthBuffer ? "#define USE_LOGDEPTHBUF" : "", m.useFragDepthExt ? "#define USE_LOGDEPTHBUF_EXT" : "", m.packedNormals ? "#define UNPACK_NORMALS" : "", "uniform mat4 modelMatrix;", "uniform mat4 modelViewMatrix;", "uniform mat4 projectionMatrix;", "uniform mat4 viewMatrix;", "uniform mat3 normalMatrix;", "uniform vec3 cameraPosition;", "attribute vec3 position;", "#ifdef UNPACK_NORMALS", "attribute vec2 normal;", "#else", "attribute vec3 normal;", "#endif", "attribute vec2 uv;", "attribute vec2 uv2;", "#ifdef PRISMWOOD", "attribute vec3 uvw;", "#endif", "#ifdef USE_COLOR", "   attribute vec3 color;", "#endif", ""].join("\n"), M = [y ? h : d, y || !m.bumpMap && !m.normalMap ? "" : "#extension GL_OES_standard_derivatives : enable", y || !m.mrtIdBuffer && !m.mrtNormals || c.isIE11 ? "" : "#extension GL_EXT_draw_buffers : enable", !y && m.mrtIdBuffer ? "#define gl_FragColor gl_FragData[0]" : "", m.haveTextureLod ? "#define HAVE_TEXTURE_LOD" : "", C, m.fragmentPrefix, "#define MAX_DIR_LIGHTS " + m.maxDirLights, "#define MAX_POINT_LIGHTS " + m.maxPointLights, "#define MAX_SPOT_LIGHTS " + m.maxSpotLights, "#define MAX_HEMI_LIGHTS " + m.maxHemiLights, "#define NUM_CUTPLANES " + m.numCutplanes, m.loadingAnimationDuration > 0 ? "#define LOADING_ANIMATION" : "", m.alphaTest ? "#define ALPHATEST " + m.alphaTest : "", g.gammaInput ? "#define GAMMA_INPUT" : "", g.gammaOutput ? "#define GAMMA_OUTPUT" : "", "#define GAMMA_FACTOR " + T, m.mrtNormals ? "#define MRT_NORMALS" : "", m.mrtIdBuffer ? "#define MRT_ID_BUFFER" : "", m.mrtIdBuffer > 1 ? "#define MODEL_COLOR" : "", "#define TONEMAP_OUTPUT " + (m.tonemapOutput || 0), m.useFog && m.fog ? "#define USE_FOG" : "", m.useFog && m.fogExp ? "#define FOG_EXP2" : "", m.map ? "#define USE_MAP" : "", m.envMap ? "#define USE_ENVMAP" : "", m.envMap ? "#define ENVMAP_TYPE_CUBE" : "", m.envMap ? "#define ENVMAP_MODE_REFLECTION" : "", m.envMap ? "#define ENVMAP_BLENDING_MULTIPLY" : "", m.irradianceMap ? "#define USE_IRRADIANCEMAP" : "", m.envGammaEncoded ? "#define ENV_GAMMA" : "", m.irrGammaEncoded ? "#define IRR_GAMMA" : "", m.envRGBM ? "#define ENV_RGBM" : "", m.irrRGBM ? "#define IRR_RGBM" : "", m.lightMap ? "#define USE_LIGHTMAP" : "", m.bumpMap ? "#define USE_BUMPMAP" : "", m.normalMap ? "#define USE_NORMALMAP" : "", m.specularMap ? "#define USE_SPECULARMAP" : "", m.alphaMap ? "#define USE_ALPHAMAP" : "", m.vertexColors ? "#define USE_COLOR" : "", m.vertexIds ? "#define USE_VERTEX_ID" : "", m.metal ? "#define METAL" : "", m.clearcoat ? "#define CLEARCOAT" : "", m.wrapAround ? "#define WRAP_AROUND" : "", m.doubleSided ? "#define DOUBLE_SIDED" : "", m.flipSided ? "#define FLIP_SIDED" : "", m.logarithmicDepthBuffer ? "#define USE_LOGDEPTHBUF" : "", m.hatchPattern ? "#define HATCH_PATTERN" : "", m.mapInvert ? "#define MAP_INVERT" : "", m.useTiling ? "#define USE_TILING" : "", m.useTiling ? "#define TILE_RANGE_X_MIN " + m.tilingRepeatRange[0] : "", m.useTiling ? "#define TILE_RANGE_Y_MIN " + m.tilingRepeatRange[1] : "", m.useTiling ? "#define TILE_RANGE_X_MAX " + m.tilingRepeatRange[2] : "", m.useTiling ? "#define TILE_RANGE_Y_MAX " + m.tilingRepeatRange[3] : "", m.hasRoundCorner ? "#define USE_TILING_NORMAL" : "", m.useRandomOffset ? "#define USE_TILING_RANDOM" : "", o("map", m.mapClampS, m.mapClampT), o("bumpMap", m.bumpMapClampS, m.bumpMapClampT), o("normalMap", m.normalMapClampS, m.normalMapClampT), o("specularMap", m.specularMapClampS, m.specularMapClampT), o("alphaMap", m.alphaMapClampS, m.alphaMapClampT, m.alphaMapInvert), "#ifdef USE_ENVMAP", "#ifdef HAVE_TEXTURE_LOD", y ? "" : "#extension GL_EXT_shader_texture_lod : enable", "#endif", "#endif", "precision " + m.precisionFragment + " float;", "precision " + m.precisionFragment + " int;", y ? "layout(location = 0) out vec4 outFragColor;" : "", "uniform highp mat4 viewMatrix;", "uniform highp mat4 projectionMatrix;", "uniform highp vec3 cameraPosition;", "#if defined(USE_ENVMAP) || defined(USE_IRRADIANCEMAP)", "uniform mat4 viewMatrixInverse;", "#endif", ""].join("\n"), m.isPrism && (M += function (e) {
        for (var t = "\n", n = 0; n < f.length; n++) {
          var i = e[f[n]];
          i && (t += p(f[n], i.S, i.T) + "\n")
        }
        return t
      }(m)));
      var L = new a.WebGLShader(v, v.VERTEX_SHADER, S + w),
        D = new a.WebGLShader(v, v.FRAGMENT_SHADER, M + E);
      v.attachShader(P, L), v.attachShader(P, D), void 0 !== A && v.bindAttribLocation(P, 0, A), v.linkProgram(P), "undefined" != typeof DEBUG_SHADERS && DEBUG_SHADERS && (!1 === v.getProgramParameter(P, v.LINK_STATUS) && (l.error("THREE.WebGLProgram: Could not initialise shader."), l.error("gl.VALIDATE_STATUS", v.getProgramParameter(P, v.VALIDATE_STATUS)), l.error("gl.getError()", v.getError())), "" !== v.getProgramInfoLog(P) && l.warn("THREE.WebGLProgram: gl.getProgramInfoLog()", v.getProgramInfoLog(P))), v.deleteShader(L), v.deleteShader(D);
      var I = ["viewMatrix", "modelViewMatrix", "projectionMatrix", "normalMatrix", "modelMatrix", "cameraPosition", "viewMatrixInverse", "mvpMatrix", "dbId"];
      for (var R in m.logarithmicDepthBuffer && I.push("logDepthBufFC"), _) I.push(R);
      for (var O in this.uniforms = function (e, t, n) {
          for (var i = {}, r = 0, o = n.length; r < o; r++) {
            var a = n[r];
            i[a] = e.getUniformLocation(t, a)
          }
          return i
        }(v, P, I), I = ["position", "normal", "uv", "uv2", "tangent", "color", "lineDistance", "uvw", "id", "instOffset", "instScaling", "instRotation", "prev", "next", "side"], x) I.push(O);
      return this.attributes = function (e, t, n) {
        for (var i = {}, r = 0, o = n.length; r < o; r++) {
          var a = n[r];
          i[a] = e.getAttribLocation(t, a)
        }
        return i
      }(v, P, I), this.attributesKeys = Object.keys(this.attributes), this.id = i++, this.code = t, this.usedTimes = 1, this.program = P, this.vertexShader = L, this.fragmentShader = D, this
    })
}, function (e, t, n) {
  "use strict";
  n.r(t), n.d(t, "EventUtils", (function () {
    return s
  }));
  var i = n(3);

  function r(e, t) {
    for (var n = 0; n < t.length; n++) {
      var i = t[n];
      i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(e, i.key, i)
    }
  }
  var o = !1,
    a = !1,
    s = function () {
      function e() {
        ! function (e, t) {
          if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
        }(this, e)
      }
      var t, n, i;
      return t = e, i = [{
        key: "isRightClick",
        value: function (e) {
          if (!(e instanceof l(e).MouseEvent)) return !1;
          var t = e.button;
          return "buttons" in e && (!a || 1 & e.buttons ? 2 === t && 1 & e.buttons && (t = 0, a = !0) : (a = !1, t = 0)), t === (o ? 0 : 2)
        }
      }, {
        key: "isMiddleClick",
        value: function (e) {
          return e instanceof l(e).MouseEvent && 1 === e.button
        }
      }, {
        key: "setUseLeftHandedInput",
        value: function (e) {
          o = e
        }
      }], (n = null) && r(t.prototype, n), i && r(t, i), e
    }();

  function l(e) {
    var t = e.target && e.target.ownerDocument;
    return t ? t.defaultView || t.parentWindow : Object(i.getGlobal)()
  }
  Autodesk.Viewing.isRightClick = s.isRightClick, Autodesk.Viewing.isMiddleClick = s.isMiddleClick
}, function (e, t, n) {
  "use strict";
  n.r(t), n.d(t, "ResetFlags", (function () {
    return i
  }));
  var i = {
    RESET_NORMAL: 0,
    RESET_REDRAW: 1,
    RESET_RELOAD: 2
  }
}, function (e, t, n) {
  "use strict";

  function i(e, t) {
    var n, i;
    this.bytes_per_node = t ? 32 : 36, e instanceof ArrayBuffer ? (n = e.byteLength / this.bytes_per_node, i = e, this.nodeCount = n) : (n = 0 | e, i = new ArrayBuffer(this.bytes_per_node * n), this.nodeCount = 0), this.nodeCapacity = n, this.nodesRaw = i, this.is_lean_node = t, this.node_stride = this.bytes_per_node / 4, this.node_stride_short = this.bytes_per_node / 2, this.nodesF = new Float32Array(this.nodesRaw), this.nodesI = new Int32Array(this.nodesRaw), this.nodesS = new Uint16Array(this.nodesRaw)
  }
  n.r(t), n.d(t, "NodeArray", (function () {
    return i
  })), n.d(t, "BVHBuilder", (function () {
    return a
  })), i.prototype.setLeftChild = function (e, t) {
    this.nodesI[e * this.node_stride + 6] = t
  }, i.prototype.getLeftChild = function (e) {
    return this.nodesI[e * this.node_stride + 6]
  }, i.prototype.setPrimStart = function (e, t) {
    this.is_lean_node ? this.nodesI[e * this.node_stride + 6] = t : this.nodesI[e * this.node_stride + 8] = t
  }, i.prototype.getPrimStart = function (e) {
    return this.is_lean_node ? this.nodesI[e * this.node_stride + 6] : this.nodesI[e * this.node_stride + 8]
  }, i.prototype.setPrimCount = function (e, t) {
    this.nodesS[e * this.node_stride_short + 14] = t
  }, i.prototype.getPrimCount = function (e) {
    return this.nodesS[e * this.node_stride_short + 14]
  }, i.prototype.setFlags = function (e, t, n, i) {
    this.nodesS[e * this.node_stride_short + 15] = i << 3 | n << 2 | 3 & t
  }, i.prototype.getFlags = function (e) {
    return this.nodesS[e * this.node_stride_short + 15]
  }, i.prototype.setBox0 = function (e, t) {
    var n = e * this.node_stride,
      i = this.nodesF;
    i[n] = t[0], i[n + 1] = t[1], i[n + 2] = t[2], i[n + 3] = t[3], i[n + 4] = t[4], i[n + 5] = t[5]
  }, i.prototype.getBoxThree = function (e, t) {
    var n = e * this.node_stride,
      i = this.nodesF;
    t.min.x = i[n], t.min.y = i[n + 1], t.min.z = i[n + 2], t.max.x = i[n + 3], t.max.y = i[n + 4], t.max.z = i[n + 5]
  }, i.prototype.getBoxArray = function (e, t, n) {
    var i = e * this.node_stride,
      r = this.nodesF;
    t[0 + (n = n || 0)] = r[i], t[1 + n] = r[i + 1], t[2 + n] = r[i + 2], t[3 + n] = r[i + 3], t[4 + n] = r[i + 4], t[5 + n] = r[i + 5]
  }, i.prototype.setBoxThree = function (e, t) {
    var n = e * this.node_stride,
      i = this.nodesF;
    i[n] = t.min.x, i[n + 1] = t.min.y, i[n + 2] = t.min.z, i[n + 3] = t.max.x, i[n + 4] = t.max.y, i[n + 5] = t.max.z
  }, i.prototype.makeEmpty = function (e) {
    var t = e * this.node_stride,
      n = this.nodesI;
    n[t + 6] = -1, n[t + 7] = 0, this.is_lean_node || (n[t + 8] = -1)
  }, i.prototype.realloc = function (e) {
    if (this.nodeCount + e > this.nodeCapacity) {
      var t = 0 | 3 * this.nodeCapacity / 2;
      t < this.nodeCount + e && (t = this.nodeCount + e);
      var n = new ArrayBuffer(t * this.bytes_per_node),
        i = new Int32Array(n);
      i.set(this.nodesI), this.nodeCapacity = t, this.nodesRaw = n, this.nodesF = new Float32Array(n), this.nodesI = i, this.nodesS = new Uint16Array(n)
    }
  }, i.prototype.nextNodes = function (e) {
    this.realloc(e);
    var t = this.nodeCount;
    this.nodeCount += e;
    for (var n = 0; n < e; n++) this.makeEmpty(t + n);
    return t
  }, i.prototype.getRawData = function () {
    return this.nodesRaw.slice(0, this.nodeCount * this.bytes_per_node)
  };
  var r = function () {
    function e(e, t, n) {
      e[0] > t[n] && (e[0] = t[n]), e[3] < t[n] && (e[3] = t[n]), e[1] > t[n + 1] && (e[1] = t[n + 1]), e[4] < t[n + 1] && (e[4] = t[n + 1]), e[2] > t[n + 2] && (e[2] = t[n + 2]), e[5] < t[n + 2] && (e[5] = t[n + 2])
    }

    function t(e, t, n) {
      e[0] > t[n] && (e[0] = t[n]), e[1] > t[n + 1] && (e[1] = t[n + 1]), e[2] > t[n + 2] && (e[2] = t[n + 2]), e[3] < t[n + 3] && (e[3] = t[n + 3]), e[4] < t[n + 4] && (e[4] = t[n + 4]), e[5] < t[n + 5] && (e[5] = t[n + 5])
    }

    function n(e, t) {
      e[0] > t[0] && (e[0] = t[0]), e[1] > t[1] && (e[1] = t[1]), e[2] > t[2] && (e[2] = t[2]), e[3] < t[3] && (e[3] = t[3]), e[4] < t[4] && (e[4] = t[4]), e[5] < t[5] && (e[5] = t[5])
    }

    function i(e, t, n, i) {
      for (var r = 0; r < 3; r++) e[t + r] = n[i + 3 + r] - n[i + r]
    }

    function r(e, t) {
      e[0] = t[0], e[1] = t[1], e[2] = t[2], e[3] = t[3], e[4] = t[4], e[5] = t[5]
    }

    function o(e) {
      e[0] = 1 / 0, e[1] = 1 / 0, e[2] = 1 / 0, e[3] = -1 / 0, e[4] = -1 / 0, e[5] = -1 / 0
    }

    function a(e) {
      var t = e[3] - e[0],
        n = e[4] - e[1],
        i = e[5] - e[2];
      return t < 0 || n < 0 || i < 0 ? 0 : 2 * (t * n + n * i + i * t)
    }

    function s() {
      this.vb_left = new Float32Array(6), this.vb_right = new Float32Array(6), this.cb_left = new Float32Array(6), this.cb_right = new Float32Array(6), this.num_left = 0, this.best_split = -1, this.best_cost = -1, this.num_bins = -1
    }

    function l() {
      this.box_bbox = new Float32Array(6), this.box_centroid = new Float32Array(6), this.num_prims = 0
    }

    function c() {
      this.BL = new Float32Array(6), this.CL = new Float32Array(6), this.NL = 0, this.AL = 0
    }
    s.prototype.reset = function () {
      this.num_left = 0, this.best_split = -1, this.best_cost = -1, this.num_bins = -1
    }, l.prototype.reset = function () {
      this.num_prims = 0, o(this.box_bbox), o(this.box_centroid)
    }, c.prototype.reset = function () {
      this.NL = 0, this.AL = 0, o(this.BL), o(this.CL)
    };
    var u, h = [];
    for (u = 0; u < 16; u++) h.push(new l);
    var d = [];
    for (u = 0; u < 15; u++) d.push(new c);
    var f = new Float32Array(6),
      p = new Float32Array(6);

    function m(i, o, s, l, c, u, m) {
      if (u[l] < i.scene_epsilon) m.best_cost = 1 / 0;
      else {
        var g, v, y = 16;
        for (y > s - o + 1 && (y = s - o + 1), g = 0; g < y; g++) h[g].reset();
        for (g = 0; g < y - 1; g++) d[g].reset();
        for (m.num_bins = y, function (n, i, r, o, a, s, l) {
            for (var c = n.centroids, u = n.primitives, d = n.finfo.boxes, f = n.finfo.boxStride, p = .99999 * l / s[o], m = a[o], g = n.sort_prims, v = i; v <= r; v++) {
              var y = 0 | u[v],
                b = 0 | p * (c[3 * y + o] - m);
              b < 0 ? b = 0 : b >= l && (b = l - 1), g[v] = b, h[b].num_prims++, t(h[b].box_bbox, d, y * f), e(h[b].box_centroid, c, 3 * y)
            }
          }(i, o, s, l, c, u, y), r(d[0].BL, h[0].box_bbox), r(d[0].CL, h[0].box_centroid), d[0].AL = a(d[0].BL), d[0].NL = h[0].num_prims, g = 1; g < y - 1; g++) {
          v = h[g];
          var b = d[g];
          r(b.BL, d[g - 1].BL), n(b.BL, v.box_bbox), b.AL = a(b.BL), r(b.CL, d[g - 1].CL), n(b.CL, v.box_centroid), b.NL = d[g - 1].NL + v.num_prims
        }
        r(f, h[g = y - 1].box_bbox), r(p, h[g].box_centroid);
        var _ = a(f),
          x = h[g].num_prims,
          w = g,
          E = _ * x + d[g - 1].AL * d[g - 1].NL;
        for (r(m.vb_right, f), r(m.cb_right, h[g].box_centroid), r(m.vb_left, d[g - 1].BL), r(m.cb_left, d[g - 1].CL), m.num_left = d[g - 1].NL, g -= 1; g >= 1; g--) {
          v = h[g], n(f, v.box_bbox), n(p, v.box_centroid);
          var A = (_ = a(f)) * (x += v.num_prims) + d[g - 1].AL * d[g - 1].NL;
          A <= E && (E = A, w = g, r(m.vb_right, f), r(m.cb_right, p), r(m.vb_left, d[g - 1].BL), r(m.cb_left, d[g - 1].CL), m.num_left = d[g - 1].NL)
        }
        m.best_split = w, m.best_cost = E
      }
    }
    var g = new Float32Array(3);
    return {
      bvh_subdivide: function (t, n, r, a, l, c, u, h) {
        i(g, 0, c, 0);
        var d = t.nodes,
          f = u ? t.frags_per_leaf_node_transparent : t.frags_per_leaf_node,
          p = u ? t.frags_per_inner_node_transparent : t.frags_per_inner_node,
          v = t.max_polys_per_node,
          y = 0;
        g[1] > g[0] && (y = 1), g[2] > g[y] && (y = 2), d.setBox0(n, l);
        var b = 0,
          _ = 0,
          x = a - r + 1;
        if (t.finfo.hasPolygonCounts && t.frags_per_inner_node)
          for (var w = x <= t.frags_per_inner_node ? a : r + t.frags_per_inner_node - 1, E = r; E <= w && (_++, !((b += t.finfo.getPolygonCount(t.primitives[E])) > v)); E++);
        if (x <= f && b < v || 1 === x || h > 15 || g[y] < t.scene_epsilon) return d.setLeftChild(n, -1), d.setPrimStart(n, r), d.setPrimCount(n, a - r + 1), void d.setFlags(n, 0, 0, u ? 1 : 0);
        p && (y = function (t, n, r, a, s, l, c, u) {
          var h = t.primitives,
            d = t.centroids,
            f = s - a + 1;
          f > t.frags_per_inner_node && (f = t.frags_per_inner_node), f > u && (f = u), n.setPrimStart(r, a), n.setPrimCount(r, f), a += f, o(l);
          for (var p = a; p <= s; p++) e(l, d, 3 * h[p]);
          i(c, 0, l, 0);
          var m = 0;
          return c[1] > c[0] && (m = 1), c[2] > c[m] && (m = 2), m
        }(t, d, n, r, a, c, g, _), r += d.getPrimCount(n));
        var A = new s;
        if (m(t, r, a, y, c, g, A), A.num_bins < 0) d.setPrimCount(n, d.getPrimCount(n) + a - r + 1);
        else {
          ! function (e, t, n, i, r, o, a) {
            var s, l, c = e.primitives,
              u = e.sort_prims,
              h = 0,
              d = 0 | t,
              f = 0 | a.best_split;
            for (s = t; s <= n; s++) {
              var p = 0 | c[s];
              u[s] < f ? c[d++] = p : u[h++] = p
            }
            for (l = 0; l < h; l++) c[d + l] = u[l]
          }(t, r, a, 0, 0, 0, A);
          var S = d.nextNodes(2),
            M = .5 * (A.vb_left[3 + y] + A.vb_left[y]),
            T = .5 * (A.vb_right[3 + y] + A.vb_right[y]);
          d.setFlags(n, y, M < T ? 0 : 1, u ? 1 : 0), d.setLeftChild(n, S), t.recursion_stack.push([t, S + 1, r + A.num_left, a, A.vb_right, A.cb_right, u, h + 1]), t.recursion_stack.push([t, S, r, r + A.num_left - 1, A.vb_left, A.cb_left, u, h + 1])
        }
      },
      compute_boxes: function (n) {
        var r = n.boxv_o,
          a = n.boxc_o,
          s = n.boxv_t,
          l = n.boxc_t;
        o(r), o(a), o(s), o(l);
        for (var c, u, h, d, f = n.centroids, p = n.finfo.boxes, m = n.finfo.boxStride, v = 0, y = n.prim_count; v < y; v++) {
          var b = n.primitives[v];
          h = p, d = m * b, (c = f)[u = 3 * b] = .5 * (h[d] + h[d + 3]), c[u + 1] = .5 * (h[d + 1] + h[d + 4]), c[u + 2] = .5 * (h[d + 2] + h[d + 5]), v >= n.first_transparent ? (e(l, f, 3 * b), t(s, p, m * b)) : (e(a, f, 3 * b), t(r, p, m * b))
        }
        i(g, 0, n.boxv_o, 0);
        var _ = Math.max(g[0], g[1], g[2]);
        n.scene_epsilon = 1e-5 * _
      },
      box_area: function (e, t) {
        var n = e[t + 3] - e[t],
          i = e[t + 4] - e[t + 1],
          r = e[t + 5] - e[t + 2];
        return n < 0 || i < 0 || r < 0 ? 0 : 2 * (n * i + i * r + r * n)
      }
    }
  }();

  function o(e, t) {
    this.boxes = e.boxes, this.polygonCounts = e.polygonCounts, this.hasPolygonCounts = !!this.polygonCounts, this.materials = e.materials, this.materialDefs = t, this.count = e.length, this.boxStride = 6, this.wantSort = !0
  }

  function a(e, t, n) {
    this.finfo = n || new o(e, t), this.prim_count = this.finfo.getCount(), this.frags_per_leaf_node = -1, this.frags_per_inner_node = -1, this.nodes = null, this.work_buf = new ArrayBuffer(4 * this.prim_count), this.sort_prims = new Int32Array(this.work_buf), this.primitives = new Int32Array(this.prim_count), this.centroids = new Float32Array(3 * this.prim_count), this.boxv_o = new Float32Array(6), this.boxc_o = new Float32Array(6), this.boxv_t = new Float32Array(6), this.boxc_t = new Float32Array(6), this.recursion_stack = []
  }
  o.prototype.getCount = function () {
    return this.count
  }, o.prototype.isTransparent = function (e) {
    return !(!this.materialDefs || !this.materialDefs[this.materials[e]]) && this.materialDefs[this.materials[e]].transparent
  }, o.prototype.getPolygonCount = function (e) {
    return this.polygonCounts[e]
  }, a.prototype.sortPrimitives = function (e) {
    var t, n, i = new Float32Array(this.work_buf),
      o = this.primitives,
      a = 0,
      s = e;
    for (t = 0, n = this.prim_count; t < n; t++) {
      o[t] = t;
      var l = this.finfo.isTransparent(t);
      l && a++, s ? (i[t] = r.box_area(this.finfo.boxes, this.finfo.boxStride * t), l && (i[t] = -i[t])) : i[t] = l ? -1 : 1
    }
    if (s) Array.prototype.sort.call(this.primitives, (function (e, t) {
      return i[t] - i[e]
    }));
    else if (a && a < this.prim_count) {
      var c = new Int32Array(a),
        u = 0,
        h = 0;
      for (t = 0, n = this.prim_count; t < n; t++) i[t] >= 0 ? o[u++] = o[t] : c[h++] = o[t];
      o.set(c, this.prim_count - a)
    }
    this.first_transparent = this.prim_count - a
  }, a.prototype.build = function (e) {
    var t = e && !!e.useSlimNodes,
      n = this;

    function o(t, i) {
      e.hasOwnProperty(t) ? n[t] = e[t] : n[t] = i
    }
    if (t) o("frags_per_leaf_node", 1), o("frags_per_inner_node", 0), o("frags_per_leaf_node_transparent", 1), o("frags_per_inner_node_transparent", 0), o("max_polys_per_node", 1 / 0);
    else {
      var a = e.isWeakDevice ? .5 : 1;
      o("frags_per_leaf_node", 0 | 256 * a), o("frags_per_inner_node", 0 | this.frags_per_leaf_node), o("frags_per_leaf_node_transparent", this.frags_per_leaf_node), o("frags_per_inner_node_transparent", 0), o("max_polys_per_node", 0 | 2e4 * a)
    }
    if (this.nodes && this.nodes.is_lean_node == t) this.nodes.nodeCount = 0;
    else {
      for (var s = this.prim_count / this.frags_per_leaf_node, l = 1; l < s;) l *= 2;
      this.nodes = new i(l, !!e && e.useSlimNodes)
    }
    this.sortPrimitives(this.finfo.wantSort), r.compute_boxes(this);
    var c, u = this.nodes.nextNodes(2);
    for (r.bvh_subdivide(this, u, 0, this.first_transparent - 1, this.boxv_o, this.boxc_o, !1, 0); this.recursion_stack.length;) c = this.recursion_stack.pop(), r.bvh_subdivide(c[0], c[1], c[2], c[3], c[4], c[5], c[6], c[7]);
    for (r.bvh_subdivide(this, u + 1, this.first_transparent, this.prim_count - 1, this.boxv_t, this.boxc_t, !0, 0); this.recursion_stack.length;) c = this.recursion_stack.pop(), r.bvh_subdivide(c[0], c[1], c[2], c[3], c[4], c[5], c[6], c[7])
  }
}, function (e, t, n) {
  "use strict";
  n.r(t), n.d(t, "TreeDelegate", (function () {
    return r
  }));
  var i = n(8);

  function r() {}
  n(12).GlobalManagerMixin.call(r.prototype), r.prototype.constructor = r, r.prototype.isTreeNodeGroup = function (e) {
    throw "isTreeNodeGroup is not implemented."
  }, r.prototype.getTreeNodeId = function (e) {
    throw "getTreeNodeId is not implemented."
  }, r.prototype.getTreeNodeIndex = function (e) {
    throw "getTreeNodeIndex is not implemented."
  }, r.prototype.getTreeNodeParentId = function (e) {
    throw "getTreeNodeParentId is not implemented."
  }, r.prototype.getTreeNodeLabel = function (e) {
    return e.name
  }, r.prototype.getTreeNodeCount = function () {
    throw "getTreeNodeCount is not implemented."
  }, r.prototype.shouldCreateTreeNode = function (e) {
    return !0
  }, r.prototype.forEachChild = function (e, t) {
    for (var n = e.children ? e.children.length : 0, i = 0; i < n; ++i) {
      t(e.children[i])
    }
  }, r.prototype.createTreeNode = function (e, t, n, r, o) {
    var a = this.getDocument().createElement("label");
    t.appendChild(a);
    var s = this.getTreeNodeLabel(e);
    return n && n.localize && (a.setAttribute("data-i18n", s), s = i.i18n.translate(s)), a.textContent = s, a
  }, r.prototype.onTreeNodeClick = function (e, t, n) {}, r.prototype.onTreeNodeIconClick = function (e, t, n) {
    e.delegate().isTreeNodeGroup(t) && e.setCollapsed(t, !e.isCollapsed(t))
  }, r.prototype.onTreeNodeDoubleClick = function (e, t, n) {}, r.prototype.onTreeNodeRightClick = function (e, t, n) {}, r.prototype.onTreeNodeReized = function (e) {}, r.prototype.getTreeNodeClass = function (e) {
    return ""
  }, r.prototype.getTreeNodeParentMaxSize = function (e) {
    return {
      width: 0,
      height: 0
    }
  }, r.prototype.getTreeNodeClientHeight = function (e) {
    return 0
  }, r.prototype.getTreeNodeDepthOffset = function (e, t) {
    return 0
  }, r.prototype.onTreeNodeHover = function (e, t, n) {}, r.prototype.getScrollContainer = function () {
    return null
  }
}, function (e, t, n) {
  "use strict";
  n.d(t, "a", (function () {
    return i
  }));
  var i = "search-selected"
}, function (e, t, n) {
  "use strict";

  function i(e, t) {
    return t <= 255 ? new Uint8Array(e) : t <= 65535 ? new Uint16Array(e) : new Uint32Array(e)
  }

  function r(e, t) {
    if (t <= 255) return e;
    if (t <= 65535 && e instanceof Uint8Array) {
      var n = new Uint16Array(e.length);
      return n.set(e), n
    }
    if (!e instanceof Uint32Array) {
      var i = new Uint32Array(e.length);
      return i.set(e), i
    }
    return e
  }
  n.d(t, "a", (function () {
    return i
  })), n.d(t, "b", (function () {
    return r
  }))
}, function (e, t, n) {
  "use strict";
  n.d(t, "b", (function () {
    return r
  })), n.d(t, "a", (function () {
    return o
  }));
  var i = n(0);

  function r() {
    this.offsetX = 0, this.offsetY = 0, this.scaleX = 1, this.scaleY = 1
  }

  function o() {
    var e = [],
      t = 0,
      n = new r;

    function o(e, t) {
      var r = t || n,
        o = [];
      o.push(new i.Vector2(r.offsetX, r.offsetY)), o.push(new i.Vector2(r.offsetX + r.scaleX, r.offsetY)), o.push(new i.Vector2(r.offsetX + r.scaleX, r.offsetY + r.scaleY)), o.push(new i.Vector2(r.offsetX, r.offsetY + r.scaleY)), e.faceVertexUvs[0].length = 0, e.faceVertexUvs[0].push([o[0], o[1], o[2]]), e.faceVertexUvs[0].push([o[0], o[2], o[3]]), e.uvTransform = r, e.uvsNeedUpdate = !0
    }
    this.acquireQuadGeom = function (n) {
      var i = e[t];
      return i ? o(i, n) : (i = this.createQuadGeom(n), e[t] = i), t++, i
    }, this.createQuadGeom = function (e) {
      var t = new i.Geometry;
      return t.vertices.push(new i.Vector3(0, 0, 0), new i.Vector3(1, 0, 0), new i.Vector3(1, 1, 0), new i.Vector3(0, 1, 0)), t.faces.push(new i.Face3(0, 1, 2)), t.faces.push(new i.Face3(0, 2, 3)), o(t, e), t.computeFaceNormals(), t
    }, this.reset = function () {
      t = 0
    }, this.dispose = function () {
      for (var t = 0; t < e.length; t++) {
        var n = e[t];
        n && (n.dispose(), n.needsUpdate = !0)
      }
    }
  }
  r.prototype.toVec4 = function () {
    return new i.Vector4(this.offsetX, this.offsetY, this.scaleX, this.scaleY)
  }, r.prototype.copyTo = function (e) {
    e.offsetX = this.offsetX, e.offsetY = this.offsetY, e.scaleX = this.scaleX, e.scaleY = this.scaleY
  }
}, function (e, t, n) {
  "use strict";
  n.r(t), n.d(t, "EPSILON", (function () {
    return s
  })), n.d(t, "getSnapResultPosition", (function () {
    return l
  })), n.d(t, "correctPerpendicularPicks", (function () {
    return c
  })), n.d(t, "calculateDistance", (function () {
    return u
  })), n.d(t, "computeResult", (function () {
    return f
  })), n.d(t, "getFaceArea", (function () {
    return p
  })), n.d(t, "getCircularArcRadius", (function () {
    return m
  })), n.d(t, "project", (function () {
    return g
  })), n.d(t, "inverseProject", (function () {
    return v
  })), n.d(t, "nearestPointInPointToLine", (function () {
    return y
  })), n.d(t, "nearestPointInPointToSegment", (function () {
    return b
  })), n.d(t, "isEqualVectors", (function () {
    return _
  })), n.d(t, "getEndPointsInEdge", (function () {
    return x
  })), n.d(t, "angleVectorToVector", (function () {
    return w
  })), n.d(t, "isParallel", (function () {
    return A
  })), n.d(t, "isPerpendicular", (function () {
    return S
  })), n.d(t, "nearestVertexInVertexToEdge", (function () {
    return M
  })), n.d(t, "createCommonOverlay", (function () {
    return T
  })), n.d(t, "safeToggle", (function () {
    return C
  }));
  var i = n(0),
    r = n(21),
    o = n(74),
    a = n(81),
    s = 1e-4;

  function l(e, t) {
    if (!e) return null;
    if (e.isPerpendicular) return e.intersectPoint;
    switch (e.geomType) {
      case r.SnapType.SNAP_VERTEX:
      case r.SnapType.RASTER_PIXEL:
      case r.SnapType.SNAP_MIDPOINT:
      case r.SnapType.SNAP_CIRCLE_CENTER:
        return e.getGeometry();
      case r.SnapType.SNAP_EDGE:
        var n = x(e.getGeometry()),
          i = n[0].clone(),
          o = n[1].clone();
        return y(e.intersectPoint, i, o);
      case r.SnapType.SNAP_FACE:
        return E(e.intersectPoint, e.getGeometry().vertices[0], e.faceNormal);
      case r.SnapType.SNAP_CIRCULARARC:
        if (t && t.model && t.model.is2d()) {
          var a = e.snapPoint;
          return e.geomType = r.SnapType.SNAP_VERTEX, e.geomVertex = a, a
        }
        return e.circularArcCenter;
      case r.SnapType.SNAP_CURVEDEDGE:
        return M(e.intersectPoint, e.getGeometry());
      case r.SnapType.SNAP_CURVEDFACE:
        return e.intersectPoint;
      case r.SnapType.SNAP_INTERSECTION:
        return e.snapPoint;
      default:
        return null
    }
  }

  function c(e, t, n, o) {
    if (!(e && t && e.getGeometry() && t.getGeometry())) return !1;
    var a = l(e, n);
    if (o && n)
      if (t.geomType === r.SnapType.SNAP_EDGE) {
        var s = new i.Vector3,
          c = new i.Vector3,
          u = t.getGeometry();
        if (s.subVectors(t.intersectPoint, a).normalize(), c.subVectors(u.vertices[0], u.vertices[1]).normalize(), S(s, c, .05))
          if (f = b(a, u.vertices[0], u.vertices[1], !0)) return o.onMouseMove(g(f, n)) && o.setPerpendicular(!0), t.geomVertex = f, t.intersectPoint = f, !0
      } else if (t.geomType === r.SnapType.SNAP_FACE) {
      var h = new i.Vector3,
        d = t.getGeometry();
      if (h.subVectors(t.intersectPoint, a).normalize(), A(t.faceNormal, h, .05)) {
        var f = E(a, d.vertices[0], t.faceNormal);
        return o.onMouseMove(g(f, n)) && o.setPerpendicular(!0), t.geomVertex = f, t.intersectPoint = f, !0
      }
    }
  }

  function u(e, t, n, i) {
    if (!(e && t && e.getGeometry() && t.getGeometry())) return null;
    var r, a, c = l(e, i),
      u = l(t, i);
    if (!c || !u) return null;
    if (_(c, u, s)) return null;
    if (i.model.is2d() && (c = c.clone(), u = u.clone(), i.model.pageToModel(c, u, e.viewportIndex2d)), n) {
      var h = Math.log(2 * n) / Math.log(10),
        d = Math.floor(h);
      1 < 2 * n / Math.pow(10, d) && d++, n = Math.pow(10, d);
      var f = c.distanceTo(u),
        p = f / n;
      return r = Math.floor(p + .5) * n, p = (f = Math.abs(c.x - u.x)) / n, a = Math.floor(p + .5) * n, p = (f = Math.abs(c.y - u.y)) / n, {
        distanceXYZ: r,
        distanceX: a,
        distanceY: Math.floor(p + .5) * n,
        distanceZ: 0,
        type: o.MeasurementTypes.MEASUREMENT_DISTANCE
      }
    }
    return {
      distanceXYZ: r = c.distanceTo(u),
      distanceX: a = Math.abs(c.x - u.x),
      distanceY: Math.abs(c.y - u.y),
      distanceZ: Math.abs(c.z - u.z),
      type: o.MeasurementTypes.MEASUREMENT_DISTANCE
    }
  }

  function h(e, t) {
    var n = [];
    for (var r in e)
      if (e.hasOwnProperty(r)) {
        var o = l(e[r], t);
        o && n.push(o)
      } if (3 !== n.length || function (e) {
        for (var t = 0; t < e.length; t++)
          for (var n = 0; n < e.length; n++)
            if (t !== n && _(e[t], e[n], s)) return !0;
        return !1
      }(n)) return null;
    var a = new i.Vector3,
      c = new i.Vector3;
    return a.subVectors(n[0], n[1]), c.subVectors(n[2], n[1]), w(a, c)
  }

  function d(e, t) {
    var n = [];
    for (var i in e)
      if (e.hasOwnProperty(i)) {
        var r = l(e[i], t);
        r && n.push(r.clone())
      } var o = l(e[1], t);
    o && n.push(o.clone());
    for (var a = 0; a < n.length; a += 2) t.model.pageToModel(n[a], n[a + 1], e[1].viewportIndex2d);
    var s = 0,
      c = 0;
    for (a = 0; a < n.length - 1; a++) s += n[a].x * n[a + 1].y, c += n[a].y * n[a + 1].x;
    return Math.abs((s - c) / 2)
  }

  function f(e, t, n) {
    switch (t) {
      case o.MeasurementTypes.MEASUREMENT_DISTANCE:
        var r = e[1];
        return u(r, e[2], function (e, t) {
          if (e.is3d()) return 0;
          if (e.getData().isPdf) return 0;
          var n = e.getMetadata("page_dimensions", "page_width", null),
            r = e.getMetadata("page_dimensions", "logical_width", null),
            o = e.getMetadata("page_dimensions", "page_height", null),
            a = e.getMetadata("page_dimensions", "logical_height", null);
          if (!(n && r && o && a)) return 0;
          var s = n / r,
            l = o / a,
            c = new i.Vector3(0, 0, 0),
            u = new i.Vector3(s, l, 0);
          return e.pageToModel(c, u, t), c.distanceTo(u)
        }(n.model, r.viewportIndex2d), n);
      case o.MeasurementTypes.MEASUREMENT_ANGLE:
        var a = h(e, n);
        return a ? {
          angle: a,
          type: t
        } : null;
      case o.MeasurementTypes.MEASUREMENT_AREA:
        return {
          area: d(e, n), type: t
        };
      default:
        return null
    }
  }

  function p(e, t, n, r, o, s) {
    for (var l = 0, c = n.vertices, u = new i.Vector3, h = new i.Vector3, d = 0; d < c.length; d += 3) u.subVectors(c[d + 1], c[d]), h.subVectors(c[d + 2], c[d]), l += u.length() * h.length() * Math.sin(u.angleTo(h)) / 2;
    return l = Object(a.convertUnits)(e.model.getUnitString(), r, s, l, "square"), r ? Object(a.formatValueWithUnits)(l, r + "^2", 3, o) : Object(a.formatValueWithUnits)(l, null, 3, o)
  }

  function m(e, t, n, i, r, o) {
    var s = n.radius;
    if (s) {
      if (e.model.is2d()) {
        var l = n.center.clone(),
          c = n.vertices[0].clone();
        e.model.pageToModel(l, c, t.getPick(1).viewportIndex2d), s = l.distanceTo(c)
      }
      return s = Object(a.convertUnits)(e.model.getUnitString(), i, o, s), Object(a.formatValueWithUnits)(s, i, 3, r)
    }
  }

  function g(e, t, n) {
    var r = t.navigation.getCamera(),
      o = t.navigation.getScreenViewport(),
      a = new i.Vector3(e.x, e.y, e.z);
    return a = a.project(r), n = n || 0, new i.Vector2(Math.round((a.x + 1) / 2 * o.width) + n, Math.round((1 - a.y) / 2 * o.height) + n)
  }

  function v(e, t) {
    var n = t.navigation.getCamera(),
      r = t.navigation.getScreenViewport(),
      o = new i.Vector3;
    return o.x = e.x / r.width * 2 - 1, o.y = -(e.y / r.height * 2 - 1), o.z = 0, o = o.unproject(n)
  }

  function y(e, t, n) {
    var r, o = new i.Vector3,
      a = new i.Vector3;
    return o.subVectors(t, e), a.subVectors(n, t), r = o.dot(a), o.subVectors(n, t), r = -r / o.dot(o), o.subVectors(n, t), o.multiplyScalar(r), o.add(t)
  }

  function b(e, t, n, r) {
    var o, a, s = new i.Vector3,
      l = new i.Vector3;
    return s.subVectors(t, e), l.subVectors(n, t), a = s.dot(l), s.subVectors(n, t), (a = -a / s.dot(s)) < 0 ? o = r ? null : t : a > 1 ? o = r ? null : n : (s.subVectors(n, t), s.multiplyScalar(a), o = s.add(t)), o
  }

  function _(e, t, n) {
    return !(!e || !t) && (Math.abs(e.x - t.x) <= n && Math.abs(e.y - t.y) <= n && Math.abs(e.z - t.z) <= n)
  }

  function x(e) {
    for (var t = e.vertices, n = [], i = 0; i < t.length; ++i) {
      for (var r = !1, o = 0; o < t.length; ++o)
        if (o !== i && t[o].equals(t[i])) {
          r = !0;
          break
        } r || n.push(t[i])
    }
    return n
  }

  function w(e, t) {
    return 180 * e.angleTo(t) / Math.PI
  }

  function E(e, t, n) {
    var r = new i.Vector3,
      o = n.clone(),
      a = new i.Vector3;
    a.subVectors(e, t);
    var s = -o.dot(a) / o.dot(o);
    return r.addVectors(e, o.multiplyScalar(s)), r
  }

  function A(e, t, n) {
    return n = n || s, 1 - Math.abs(e.dot(t)) < n
  }

  function S(e, t, n) {
    return n = n || s, Math.abs(e.dot(t)) < n
  }

  function M(e, t) {
    for (var n, i = Number.MAX_VALUE, r = 0; r < t.vertices.length; r++) {
      var o = e.distanceTo(t.vertices[r]);
      i > o && (n = t.vertices[r], i = o)
    }
    return n
  }

  function T(e, t) {
    e.impl.overlayScenes[t] || e.impl.createOverlayScene(t)
  }

  function C(e, t, n) {
    (e.classList.contains(t) && !n || !e.classList.contains(t) && n) && e.classList.toggle(t, n)
  }
}, function (e, t, n) {
  var i = n(80);
  e.exports = Array.isArray || function (e) {
    return "Array" == i(e)
  }
}, function (e, t, n) {
  var i = n(55),
    r = "[" + n(190) + "]",
    o = RegExp("^" + r + r + "*"),
    a = RegExp(r + r + "*$"),
    s = function (e) {
      return function (t) {
        var n = String(i(t));
        return 1 & e && (n = n.replace(o, "")), 2 & e && (n = n.replace(a, "")), n
      }
    };
  e.exports = {
    start: s(1),
    end: s(2),
    trim: s(3)
  }
}, function (e, t, n) {
  "use strict";
  var i = n(7);
  e.exports = function () {
    var e = i(this),
      t = "";
    return e.global && (t += "g"), e.ignoreCase && (t += "i"), e.multiline && (t += "m"), e.dotAll && (t += "s"), e.unicode && (t += "u"), e.sticky && (t += "y"), t
  }
}, function (e, t, n) {
  var i = n(77),
    r = n(55),
    o = function (e) {
      return function (t, n) {
        var o, a, s = String(r(t)),
          l = i(n),
          c = s.length;
        return l < 0 || l >= c ? e ? "" : void 0 : (o = s.charCodeAt(l)) < 55296 || o > 56319 || l + 1 === c || (a = s.charCodeAt(l + 1)) < 56320 || a > 57343 ? e ? s.charAt(l) : o : e ? s.slice(l, l + 2) : a - 56320 + (o - 55296 << 10) + 65536
      }
    };
  e.exports = {
    codeAt: o(!1),
    charAt: o(!0)
  }
}, function (e, t, n) {
  "use strict";
  n.r(t), n.d(t, "theResourceLoader", (function () {
    return l
  })), n.d(t, "loadDependency", (function () {
    return c
  }));
  var i = n(16),
    r = n(3);

  function o(e, t) {
    for (var n = 0; n < t.length; n++) {
      var i = t[n];
      i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(e, i.key, i)
    }
  }
  var a = Object(r.getGlobal)(),
    s = a.document,
    l = new(function () {
      function e() {
        ! function (e, t) {
          if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
        }(this, e), this.loadPromises = {}
      }
      var t, n, r;
      return t = e, (n = [{
        key: "getResourceUrl",
        value: function (e) {
          return e.indexOf("://") > 0 ? e : Object(i.getResourceUrl)(e)
        }
      }, {
        key: "loadPromiseLibrary",
        value: function (e, t) {
          if (void 0 === a.Promise) {
            var n = this.getResourceUrl("es6-promise.min.js");
            this.loadScriptIntoDom(n, e, t)
          } else e()
        }
      }, {
        key: "loadScriptIntoDom",
        value: function (e, t, n) {
          var i = s.createElement("SCRIPT");
          i.src = e;
          var r = function () {
            i.onerror = null, i.onload = null
          };
          i.onload = function () {
            r(), t()
          }, i.onerror = function (t) {
            r(), n && n(new Error("Error loading script ".concat(e, ", with error ").concat(t)))
          }, s.head.appendChild(i)
        }
      }, {
        key: "loadScript",
        value: function (e, t) {
          var n = this;
          if (t && void 0 !== a[t]) return Promise.resolve();
          var r = (e = this.getResourceUrl(e)).toLowerCase();
          if (r in this.loadPromises) return this.loadPromises[r];
          var o = Object(i.getScript)(e);
          return this.loadPromises[r] = o ? Promise.resolve() : new Promise((function (t, i) {
            n.loadScriptIntoDom(e, t, i)
          })), this.loadPromises[r]
        }
      }, {
        key: "loadCSS",
        value: function (e) {
          var t = (e = this.getResourceUrl(e)).toLowerCase();
          if (e in this.loadPromises) return this.loadPromises[t];
          var n = this._getLink(e);
          return this.loadPromises[t] = n ? Promise.resolve() : new Promise((function (e, t) {
            var n = s.createElement("link");
            n.setAttribute("rel", "stylesheet"), n.setAttribute("type", "text/css"), n.setAttribute("href", href), n.onload = e, n.onerror = t, s.head.appendChild(n)
          })), this.loadPromises[t]
        }
      }, {
        key: "_getLink",
        value: function (e) {
          for (var t = s.getElementsByTagName("link"), n = 0, i = t.length; n < i; n++)
            if (t[n].href === e) return t[n];
          return null
        }
      }]) && o(t.prototype, n), r && o(t, r), e
    }());

  function c(e, t, n, i) {
    l.loadScript(t, e).then((function () {
      n && n()
    })).catch((function (e) {
      i && i(e)
    }))
  }
  Object.freeze(l)
}, function (e, t, n) {
  "use strict";
  n.r(t), n.d(t, "DEBUG_TEXTURE_LOAD", (function () {
    return c
  })), n.d(t, "WebGLRenderer", (function () {
    return d
  }));
  var i = n(128),
    r = n(70),
    o = n(72),
    a = n(3),
    s = n(0),
    l = n(44),
    c = !1,
    u = Object(a.getGlobal)(),
    h = u.document,
    d = function (e) {
      s.log("THREE.WebGLRenderer", s.REVISION);
      var t = void 0 !== (e = e || {}).canvas ? e.canvas : h.createElement("canvas"),
        n = u.devicePixelRatio || 1,
        d = void 0 !== e.precision ? e.precision : "highp",
        f = d,
        p = void 0 !== e.alpha && e.alpha,
        m = void 0 === e.premultipliedAlpha || e.premultipliedAlpha,
        g = void 0 !== e.antialias && e.antialias,
        v = void 0 === e.stencil || e.stencil,
        y = void 0 === e.preserveDrawingBuffer || e.preserveDrawingBuffer,
        b = void 0 !== e.logarithmicDepthBuffer && e.logarithmicDepthBuffer,
        _ = new s.Color(0),
        x = 0,
        w = -1 != u.navigator.userAgent.indexOf("Firefox") && -1 != u.navigator.userAgent.indexOf("Mac OS");
      w = w || a.isIE11;
      var E = [],
        A = {},
        S = new s.Matrix4,
        M = new s.Matrix3,
        T = 0,
        C = [],
        P = [],
        L = -1;
      this.domElement = t, this.context = null, this.refCount = 0, this.autoClear = !0, this.autoClearColor = !0, this.autoClearDepth = !0, this.autoClearStencil = !0, this.sortObjects = !0, this.gammaInput = !1, this.gammaOutput = !1, this.maxMorphTargets = 8, this.maxMorphNormals = 4, this.autoScaleCubemaps = !0, this.info = {
        memory: {
          programs: 0,
          geometries: 0,
          textures: 0
        },
        render: {
          calls: 0,
          vertices: 0,
          faces: 0,
          points: 0
        }
      };
      var D, I, R, O, k, N = this,
        F = [],
        U = null,
        V = null,
        B = -1,
        z = null,
        G = "",
        H = 0,
        W = "",
        j = "",
        q = 0,
        X = 0,
        Y = 0,
        K = t.width,
        Q = t.height,
        Z = {},
        J = new s.Frustum,
        $ = new s.Matrix4,
        ee = new s.Matrix4,
        te = new s.Vector3,
        ne = new s.Vector3,
        ie = !0,
        re = {
          ambient: [0, 0, 0],
          directional: {
            length: 0,
            colors: [],
            positions: []
          },
          point: {
            length: 0,
            colors: [],
            positions: [],
            distances: []
          },
          spot: {
            length: 0,
            colors: [],
            positions: [],
            distances: [],
            directions: [],
            anglesCos: [],
            exponents: []
          },
          hemi: {
            length: 0,
            skyColors: [],
            groundColors: [],
            positions: []
          }
        };
      try {
        var oe = {
          alpha: p,
          premultipliedAlpha: m,
          antialias: g,
          stencil: v,
          preserveDrawingBuffer: y
        };
        if ((D = !1 !== e.useWebGL2 ? t.getContext("webgl2", oe) : null) ? I = !0 : D = t.getContext("webgl", oe) || t.getContext("experimental-webgl", oe), null === D) throw null !== t.getContext("webgl") ? "Error creating WebGL context with your selected attributes." : "Error creating WebGL context.";
        0 == D.getShaderPrecisionFormat(D.FRAGMENT_SHADER, D.HIGH_FLOAT).precision && (f = "mediump"), t.addEventListener("webglcontextlost", (function (e) {
          e.preventDefault(), ue(), ce(), A = {}, N.webglcontextlost && N.webglcontextlost(e)
        }), !1)
      } catch (e) {
        return void s.error(e)
      }
      var ae = new s.WebGLState(D, Ht);
      void 0 === D.getShaderPrecisionFormat && (D.getShaderPrecisionFormat = function () {
        return {
          rangeMin: 1,
          rangeMax: 1,
          precision: 1
        }
      });
      var se = new s.WebGLExtensions(D);
      se.get("EXT_texture_filter_anisotropic"), se.get("WEBGL_compressed_texture_s3tc"), I ? se.get("EXT_color_buffer_float") : (se.get("OES_texture_float"), se.get("OES_texture_float_linear"), se.get("OES_texture_half_float"), se.get("OES_texture_half_float_linear"), se.get("OES_standard_derivatives"), se.get("EXT_shader_texture_lod"), R = se.get("WEBGL_draw_buffers"), O = se.get("ANGLE_instanced_arrays"), k = se.get("OES_vertex_array_object"), b && se.get("EXT_frag_depth"));
      var le = function (e, t, n, i) {
          !0 === m && (e *= i, t *= i, n *= i), D.clearColor(e, t, n, i)
        },
        ce = function () {
          D.clearColor(0, 0, 0, 1), D.clearDepth(1), D.clearStencil(0), D.enable(D.DEPTH_TEST), D.depthFunc(D.LEQUAL), D.frontFace(D.CCW), D.cullFace(D.BACK), D.enable(D.CULL_FACE), D.enable(D.BLEND), D.blendEquation(D.FUNC_ADD), D.blendFunc(D.SRC_ALPHA, D.ONE_MINUS_SRC_ALPHA), D.viewport(X, Y, K, Q), le(_.r, _.g, _.b, x)
        },
        ue = function () {
          U = null, z = null, G = "", B = -1, ie = !0, ae.reset(), ae.disableUnusedAttributes()
        };
      ce(), this.context = D, this.state = ae;
      for (var he = D.getParameter(D.MAX_TEXTURE_IMAGE_UNITS), de = D.getParameter(D.MAX_VERTEX_TEXTURE_IMAGE_UNITS), fe = D.getParameter(D.MAX_TEXTURE_SIZE), pe = D.getParameter(D.MAX_CUBE_MAP_TEXTURE_SIZE), me = de > 0, ge = D.getShaderPrecisionFormat(D.VERTEX_SHADER, D.HIGH_FLOAT), ve = D.getShaderPrecisionFormat(D.VERTEX_SHADER, D.MEDIUM_FLOAT), ye = D.getShaderPrecisionFormat(D.FRAGMENT_SHADER, D.HIGH_FLOAT), be = D.getShaderPrecisionFormat(D.FRAGMENT_SHADER, D.MEDIUM_FLOAT), _e = new Uint8Array(16), xe = 0; xe < 4; xe++) c ? 1 === xe || 2 === xe ? (_e[4 * xe] = 246, _e[4 * xe + 1] = 140, _e[4 * xe + 2] = 220) : (_e[4 * xe] = 48, _e[4 * xe + 1] = 195, _e[4 * xe + 2] = 3) : _e[4 * xe] = _e[4 * xe + 1] = _e[4 * xe + 2] = 0, _e[4 * xe + 3] = 255;
      var we = new s.DataTexture(_e, 2, 2, s.RGBAFormat, s.UnsignedByteType, s.UVMapping, s.RepeatWrapping, s.RepeatWrapping, s.NearestFilter, s.NearestFilter);
      we.needsUpdate = !0;
      var Ee, Ae, Se = function () {
          if (void 0 !== Ee) return Ee;
          if (Ee = [], se.get("WEBGL_compressed_texture_pvrtc") || se.get("WEBGL_compressed_texture_s3tc"))
            for (var e = D.getParameter(D.COMPRESSED_TEXTURE_FORMATS), t = 0; t < e.length; t++) Ee.push(e[t]);
          return Ee
        },
        Me = ge.precision > 0,
        Te = ve.precision > 0;
      "highp" !== d || Me || (Te ? (d = "mediump", s.warn("WebGLRenderer: highp not supported, using mediump")) : (d = "lowp", s.warn("WebGLRenderer: highp and mediump not supported, using lowp"))), "mediump" !== d || Te || (d = "lowp", s.warn("WebGLRenderer: mediump not supported, using lowp")), Me = ye.precision > 0, Te = be.precision > 0, "highp" !== f || Me || (Te ? (f = "mediump", s.warn("WebGLRenderer: highp not supported, using mediump")) : (f = "lowp", s.warn("WebGLRenderer: highp and mediump not supported, using lowp"))), "mediump" !== f || Te || (f = "lowp", s.warn("WebGLRenderer: mediump not supported, using lowp")), this.getContext = function () {
        return D
      }, this.isWebGL2 = function () {
        return I
      }, this.forceContextLoss = function () {
        se.get("WEBGL_lose_context").loseContext()
      }, this.supportsVertexTextures = function () {
        return me
      }, this.supportsFloatTextures = function () {
        return I || se.get("OES_texture_float")
      }, this.supportsHalfFloatTextures = function () {
        return I || se.get("OES_texture_half_float_linear")
      }, this.supportsStandardDerivatives = function () {
        return I || se.get("OES_standard_derivatives")
      }, this.supportsCompressedTextureS3TC = function () {
        return I || se.get("WEBGL_compressed_texture_s3tc")
      }, this.supportsElementIndexUint = function () {
        return I || se.get("OES_element_index_uint")
      }, this.supportsMRT = function () {
        return I || !w && R
      }, this.supportsInstancedArrays = function () {
        return I || !!O
      }, this.supportsBlendMinMax = function () {
        return I || se.get("EXT_blend_minmax")
      }, this.getMaxAnisotropy = function () {
        if (void 0 !== Ae) return Ae;
        var e = se.get("EXT_texture_filter_anisotropic");
        return Ae = null !== e ? D.getParameter(e.MAX_TEXTURE_MAX_ANISOTROPY_EXT) : 0
      }, this.getPixelRatio = function () {
        return n
      }, this.setPixelRatio = function (e) {
        n = e
      }, this.getCurrentFramebuffer = function () {
        return V
      }, this.setSize = function (e, i, r) {
        t.width = e * n, t.height = i * n, !1 !== r && (t.style.width = e + "px", t.style.height = i + "px"), this.setViewport(0, 0, e, i)
      }, this.setViewport = function (e, t, i, r) {
        X = e * n, Y = t * n, K = i * n, Q = r * n, D.viewport(X, Y, K, Q)
      };
      var Ce = !1;
      this.enableViewportOnOffscreenTargets = function (e) {
        Ce = e
      };
      var Pe = [];

      function Le(e) {
        e.__webglVertexBuffer = D.createBuffer(), e.__webglNormalBuffer = D.createBuffer(), e.__webglTangentBuffer = D.createBuffer(), e.__webglColorBuffer = D.createBuffer(), e.__webglUVBuffer = D.createBuffer(), e.__webglUV2Buffer = D.createBuffer(), e.__webglSkinIndicesBuffer = D.createBuffer(), e.__webglSkinWeightsBuffer = D.createBuffer(), e.__webglFaceBuffer = D.createBuffer(), e.__webglLineBuffer = D.createBuffer(), N.info.memory.geometries++
      }
      this.pushViewport = function () {
        Pe.push(X), Pe.push(Y), Pe.push(K), Pe.push(Q)
      }, this.popViewport = function () {
        var e = Pe.length - 4;
        X = Pe[e], Y = Pe[e + 1], K = Pe[e + 2], Q = Pe[e + 3], D.viewport(X, Y, K, Q), Pe.length = e
      }, this.setScissor = function (e, t, i, r) {
        D.scissor(e * n, t * n, i * n, r * n)
      }, this.enableScissorTest = function (e) {
        e ? D.enable(D.SCISSOR_TEST) : D.disable(D.SCISSOR_TEST)
      }, this.setLoadingAnimationDuration = function (e) {
        L = e
      }, this.getLoadingAnimationDuration = function () {
        return L
      }, this.getClearColor = function () {
        return _
      }, this.setClearColor = function (e, t) {
        _.set(e), x = void 0 !== t ? t : 1, le(_.r, _.g, _.b, x)
      }, this.getClearAlpha = function () {
        return x
      }, this.setClearAlpha = function (e) {
        x = e, le(_.r, _.g, _.b, x)
      }, this.clear = function (e, t, n) {
        var i = 0;
        (void 0 === e || e) && (i |= D.COLOR_BUFFER_BIT), (void 0 === t || t) && (i |= D.DEPTH_BUFFER_BIT), (void 0 === n || n) && (i |= D.STENCIL_BUFFER_BIT), D.clear(i)
      }, this.clearColor = function () {
        D.clear(D.COLOR_BUFFER_BIT)
      }, this.clearDepth = function () {
        D.clear(D.DEPTH_BUFFER_BIT)
      }, this.clearStencil = function () {
        D.clear(D.STENCIL_BUFFER_BIT)
      }, this.clearTarget = function (e, t, n, i) {
        this.setRenderTarget(e), this.clear(t, n, i)
      }, this.resetGLState = ue;
      var De = function e(t) {
          t.target.traverse((function (t) {
            t.removeEventListener("remove", e),
              function (e) {
                (e instanceof s.Mesh || e instanceof s.PointCloud || e instanceof s.Line) && delete A[e.id];
                delete e.__webglInit, delete e.__webglActive
              }(t)
          }))
        },
        Ie = function e(t) {
          var n = t.target;
          n.removeEventListener("dispose", e), Fe(n)
        },
        Re = function e(t) {
          var n = t.target;
          n.removeEventListener("dispose", e), Ge(n), N.info.memory.textures--
        },
        Oe = function e(t) {
          var n = t.target;
          n.removeEventListener("dispose", e), He(n), N.info.memory.textures--
        },
        ke = function e(t) {
          var n = t.target;
          n.removeEventListener("dispose", e), We(n)
        },
        Ne = function (e) {
          if (void 0 !== e.__webglVertexBuffer && (D.deleteBuffer(e.__webglVertexBuffer), e.__webglVertexBuffer = void 0), void 0 !== e.__webglNormalBuffer && (D.deleteBuffer(e.__webglNormalBuffer), e.__webglNormalBuffer = void 0), void 0 !== e.__webglTangentBuffer && (D.deleteBuffer(e.__webglTangentBuffer), e.__webglTangentBuffer = void 0), void 0 !== e.__webglColorBuffer && (D.deleteBuffer(e.__webglColorBuffer), e.__webglColorBuffer = void 0), void 0 !== e.__webglUVBuffer && (D.deleteBuffer(e.__webglUVBuffer), e.__webglUVBuffer = void 0), void 0 !== e.__webglUV2Buffer && (D.deleteBuffer(e.__webglUV2Buffer), e.__webglUV2Buffer = void 0), void 0 !== e.__webglSkinIndicesBuffer && (D.deleteBuffer(e.__webglSkinIndicesBuffer), e.__webglSkinIndicesBuffer = void 0), void 0 !== e.__webglSkinWeightsBuffer && (D.deleteBuffer(e.__webglSkinWeightsBuffer), e.__webglSkinWeightsBuffer = void 0), void 0 !== e.__webglFaceBuffer && (D.deleteBuffer(e.__webglFaceBuffer), e.__webglFaceBuffer = void 0), void 0 !== e.__webglLineBuffer && (D.deleteBuffer(e.__webglLineBuffer), e.__webglLineBuffer = void 0), void 0 !== e.__webglLineDistanceBuffer && (D.deleteBuffer(e.__webglLineDistanceBuffer), e.__webglLineDistanceBuffer = void 0), void 0 !== e.__webglCustomAttributesList) {
            for (var t in e.__webglCustomAttributesList) D.deleteBuffer(e.__webglCustomAttributesList[t].buffer);
            e.__webglCustomAttributesList = void 0
          }
          N.info.memory.geometries--
        },
        Fe = function (e) {
          var t, n, i, r;
          if (e.__webglInit = void 0, e instanceof s.BufferGeometry) {
            if (void 0 !== e.vbbuffer && (D.deleteBuffer(e.vbbuffer), e.vbbuffer = void 0), void 0 !== e.ibbuffer && (D.deleteBuffer(e.ibbuffer), e.ibbuffer = void 0), void 0 !== e.iblinesbuffer && (D.deleteBuffer(e.iblinesbuffer), e.iblinesbuffer = void 0), e.vaos) {
              for (t = 0; t < e.vaos.length; t++) et(e.vaos[t].vao);
              e.vaos = void 0
            }
            var o = e.attributes;
            for (var a in o) void 0 !== o[a].buffer && (D.deleteBuffer(o[a].buffer), o[a].buffer = void 0);
            N.info.memory.geometries--
          } else {
            var l = yt[e.id];
            if (void 0 !== l) {
              for (t = 0, n = l.length; t < n; t++) {
                var c = l[t];
                if (void 0 !== c.numMorphTargets) {
                  for (i = 0, r = c.numMorphTargets; i < r; i++) D.deleteBuffer(c.__webglMorphTargetsBuffers[i]);
                  delete c.__webglMorphTargetsBuffers
                }
                if (void 0 !== c.numMorphNormals) {
                  for (i = 0, r = c.numMorphNormals; i < r; i++) D.deleteBuffer(c.__webglMorphNormalsBuffers[i]);
                  delete c.__webglMorphNormalsBuffers
                }
                Ne(c)
              }
              delete yt[e.id]
            } else Ne(e)
          }
        };
      this.deallocateGeometry = Fe;
      var Ue, Ve, Be, ze, Ge = function (e) {
          if (e.__webglTextureCube) D.deleteTexture(e.__webglTextureCube), e.__webglTextureCube = void 0;
          else {
            if (!e.__webglInit) return;
            D.deleteTexture(e.__webglTexture), e.__webglInit = void 0, e.__webglTexture = void 0
          }
        },
        He = function (e) {
          e && e.__webglTexture && (D.deleteTexture(e.__webglTexture), D.deleteFramebuffer(e.__webglFramebuffer), void 0 !== e.__webglRenderbuffer && D.deleteRenderbuffer(e.__webglRenderbuffer))
        },
        We = function (e) {
          var t = !1;
          e.program = void 0, e.programs.forEach((function (e) {
            var n, i, r, o;
            if (void 0 !== e && null != (n = e.program))
              for (i = 0, r = F.length; i < r; i++)
                if ((o = F[i]) && o.program === n) {
                  o.usedTimes--, 0 === o.usedTimes && (F[i] = void 0, D.deleteProgram(n), N.info.memory.programs--, t = !0);
                  break
                }
          }), !1), e.programs.length = 0, t && (F = F.filter((function (e) {
            return void 0 !== e
          })))
        };

      function je(e, t) {
        var n = e.vertices.length,
          i = t.material;
        if (i.attributes)
          for (var r in void 0 === e.__webglCustomAttributesList && (e.__webglCustomAttributesList = []), i.attributes) {
            var o = i.attributes[r];
            if (!o.__webglInitialized || o.createUniqueBuffers) {
              o.__webglInitialized = !0;
              var a = 1;
              "v2" === o.type ? a = 2 : "v3" === o.type ? a = 3 : "v4" === o.type ? a = 4 : "c" === o.type && (a = 3), o.size = a, o.array = new Float32Array(n * a), o.buffer = D.createBuffer(), o.buffer.belongsToAttribute = r, o.needsUpdate = !0
            }
            e.__webglCustomAttributesList.push(o)
          }
      }

      function qe(e, t) {
        var n = t.geometry,
          i = e.faces3,
          r = 3 * i.length,
          o = 1 * i.length,
          a = 3 * i.length,
          s = Xe(t, e),
          l = Qe(s),
          c = Ye(s),
          u = Ke(s);
        e.__vertexArray = new Float32Array(3 * r), c && (e.__normalArray = new Float32Array(3 * r)), n.hasTangents && (e.__tangentArray = new Float32Array(4 * r)), u && (e.__colorArray = new Float32Array(3 * r)), l && (n.faceVertexUvs.length > 0 && (e.__uvArray = new Float32Array(2 * r)), n.faceVertexUvs.length > 1 && (e.__uv2Array = new Float32Array(2 * r))), t.geometry.skinWeights.length && t.geometry.skinIndices.length && (e.__skinIndexArray = new Float32Array(4 * r), e.__skinWeightArray = new Float32Array(4 * r));
        var h = (I || se.get("OES_element_index_uint")) && o > 21845 ? Uint32Array : Uint16Array;
        if (e.__typeArray = h, e.__faceArray = new h(3 * o), e.__lineArray = new h(2 * a), e.__webglFaceCount = 3 * o, e.__webglLineCount = 2 * a, s.attributes)
          for (var d in void 0 === e.__webglCustomAttributesList && (e.__webglCustomAttributesList = []), s.attributes) {
            var f = s.attributes[d],
              p = {};
            for (var m in f) p[m] = f[m];
            if (!p.__webglInitialized || p.createUniqueBuffers) {
              p.__webglInitialized = !0;
              var g = 1;
              "v2" === p.type ? g = 2 : "v3" === p.type ? g = 3 : "v4" === p.type ? g = 4 : "c" === p.type && (g = 3), p.size = g, p.array = new Float32Array(r * g), p.buffer = D.createBuffer(), p.buffer.belongsToAttribute = d, f.needsUpdate = !0, p.__original = f
            }
            e.__webglCustomAttributesList.push(p)
          }
        e.__inittedArrays = !0
      }

      function Xe(e, t) {
        return e.material instanceof s.MeshFaceMaterial ? e.material.materials[t.materialIndex] : e.material
      }

      function Ye(e) {
        return !(e instanceof s.MeshBasicMaterial && !e.envMap || e instanceof s.MeshDepthMaterial) && (function (e) {
          return e && void 0 !== e.shading && e.shading === s.SmoothShading
        }(e) ? s.SmoothShading : s.FlatShading)
      }

      function Ke(e) {
        return !!e.vertexColors && e.vertexColors
      }

      function Qe(e) {
        return !!(e.map || e.lightMap || e.bumpMap || e.normalMap || e.specularMap || e.alphaMap || e instanceof s.ShaderMaterial)
      }

      function Ze(e, t, n, i, r) {
        if (e.__inittedArrays) {
          var o, a, l, c, u, h, d, f, p, m, g, v, y, b, _, x, w, E, A, S, M, T, C, P, L, I, R = Ye(r),
            O = Ke(r),
            k = Qe(r),
            N = R === s.SmoothShading,
            F = 0,
            U = 0,
            V = 0,
            B = 0,
            z = 0,
            G = 0,
            H = 0,
            W = 0,
            j = 0,
            q = 0,
            X = e.__vertexArray,
            Y = e.__uvArray,
            K = e.__uv2Array,
            Q = e.__normalArray,
            Z = e.__tangentArray,
            J = e.__colorArray,
            $ = e.__webglCustomAttributesList,
            ee = e.__faceArray,
            te = e.__lineArray,
            ne = t.geometry,
            ie = ne.verticesNeedUpdate,
            re = ne.elementsNeedUpdate,
            oe = ne.uvsNeedUpdate,
            ae = ne.normalsNeedUpdate,
            se = ne.tangentsNeedUpdate,
            le = ne.colorsNeedUpdate,
            ce = ne.vertices,
            ue = e.faces3,
            he = ne.faces,
            de = ne.faceVertexUvs[0],
            fe = ne.faceVertexUvs[1];
          if (ie) {
            for (o = 0, a = ue.length; o < a; o++) g = ce[(l = he[ue[o]]).a], v = ce[l.b], y = ce[l.c], X[U] = g.x, X[U + 1] = g.y, X[U + 2] = g.z, X[U + 3] = v.x, X[U + 4] = v.y, X[U + 5] = v.z, X[U + 6] = y.x, X[U + 7] = y.y, X[U + 8] = y.z, U += 9;
            D.bindBuffer(D.ARRAY_BUFFER, e.__webglVertexBuffer), D.bufferData(D.ARRAY_BUFFER, X, n)
          }
          if (le && O) {
            for (o = 0, a = ue.length; o < a; o++) h = (l = he[ue[o]]).vertexColors, d = l.color, 3 === h.length && O === s.VertexColors ? (w = h[0], E = h[1], A = h[2]) : (w = d, E = d, A = d), J[j] = w.r, J[j + 1] = w.g, J[j + 2] = w.b, J[j + 3] = E.r, J[j + 4] = E.g, J[j + 5] = E.b, J[j + 6] = A.r, J[j + 7] = A.g, J[j + 8] = A.b, j += 9;
            j > 0 && (D.bindBuffer(D.ARRAY_BUFFER, e.__webglColorBuffer), D.bufferData(D.ARRAY_BUFFER, J, n))
          }
          if (se && ne.hasTangents) {
            for (o = 0, a = ue.length; o < a; o++) b = (f = (l = he[ue[o]]).vertexTangents)[0], _ = f[1], x = f[2], Z[H] = b.x, Z[H + 1] = b.y, Z[H + 2] = b.z, Z[H + 3] = b.w, Z[H + 4] = _.x, Z[H + 5] = _.y, Z[H + 6] = _.z, Z[H + 7] = _.w, Z[H + 8] = x.x, Z[H + 9] = x.y, Z[H + 10] = x.z, Z[H + 11] = x.w, H += 12;
            D.bindBuffer(D.ARRAY_BUFFER, e.__webglTangentBuffer), D.bufferData(D.ARRAY_BUFFER, Z, n)
          }
          if (ae && R) {
            for (o = 0, a = ue.length; o < a; o++)
              if (c = (l = he[ue[o]]).vertexNormals, u = l.normal, 3 === c.length && N)
                for (S = 0; S < 3; S++) T = c[S], Q[G] = T.x, Q[G + 1] = T.y, Q[G + 2] = T.z, G += 3;
              else
                for (S = 0; S < 3; S++) Q[G] = u.x, Q[G + 1] = u.y, Q[G + 2] = u.z, G += 3;
            D.bindBuffer(D.ARRAY_BUFFER, e.__webglNormalBuffer), D.bufferData(D.ARRAY_BUFFER, Q, n)
          }
          if (oe && de && k) {
            for (o = 0, a = ue.length; o < a; o++)
              if (void 0 !== (p = de[ue[o]]))
                for (S = 0; S < 3; S++) C = p[S], Y[V] = C.x, Y[V + 1] = C.y, V += 2;
            V > 0 && (D.bindBuffer(D.ARRAY_BUFFER, e.__webglUVBuffer), D.bufferData(D.ARRAY_BUFFER, Y, n))
          }
          if (oe && fe && k) {
            for (o = 0, a = ue.length; o < a; o++)
              if (void 0 !== (m = fe[ue[o]]))
                for (S = 0; S < 3; S++) P = m[S], K[B] = P.x, K[B + 1] = P.y, B += 2;
            B > 0 && (D.bindBuffer(D.ARRAY_BUFFER, e.__webglUV2Buffer), D.bufferData(D.ARRAY_BUFFER, K, n))
          }
          if (re) {
            for (o = 0, a = ue.length; o < a; o++) ee[z] = F, ee[z + 1] = F + 1, ee[z + 2] = F + 2, z += 3, te[W] = F, te[W + 1] = F + 1, te[W + 2] = F, te[W + 3] = F + 2, te[W + 4] = F + 1, te[W + 5] = F + 2, W += 6, F += 3;
            D.bindBuffer(D.ELEMENT_ARRAY_BUFFER, e.__webglFaceBuffer), D.bufferData(D.ELEMENT_ARRAY_BUFFER, ee, n), D.bindBuffer(D.ELEMENT_ARRAY_BUFFER, e.__webglLineBuffer), D.bufferData(D.ELEMENT_ARRAY_BUFFER, te, n)
          }
          if ($)
            for (S = 0, M = $.length; S < M; S++)
              if ((I = $[S]).__original.needsUpdate) {
                if (q = 0, 1 === I.size) {
                  if (void 0 === I.boundTo || "vertices" === I.boundTo)
                    for (o = 0, a = ue.length; o < a; o++) l = he[ue[o]], I.array[q] = I.value[l.a], I.array[q + 1] = I.value[l.b], I.array[q + 2] = I.value[l.c], q += 3;
                  else if ("faces" === I.boundTo)
                    for (o = 0, a = ue.length; o < a; o++) L = I.value[ue[o]], I.array[q] = L, I.array[q + 1] = L, I.array[q + 2] = L, q += 3
                } else if (2 === I.size) {
                  if (void 0 === I.boundTo || "vertices" === I.boundTo)
                    for (o = 0, a = ue.length; o < a; o++) l = he[ue[o]], g = I.value[l.a], v = I.value[l.b], y = I.value[l.c], I.array[q] = g.x, I.array[q + 1] = g.y, I.array[q + 2] = v.x, I.array[q + 3] = v.y, I.array[q + 4] = y.x, I.array[q + 5] = y.y, q += 6;
                  else if ("faces" === I.boundTo)
                    for (o = 0, a = ue.length; o < a; o++) g = L = I.value[ue[o]], v = L, y = L, I.array[q] = g.x, I.array[q + 1] = g.y, I.array[q + 2] = v.x, I.array[q + 3] = v.y, I.array[q + 4] = y.x, I.array[q + 5] = y.y, q += 6
                } else if (3 === I.size) {
                  var pe;
                  if (pe = "c" === I.type ? ["r", "g", "b"] : ["x", "y", "z"], void 0 === I.boundTo || "vertices" === I.boundTo)
                    for (o = 0, a = ue.length; o < a; o++) l = he[ue[o]], g = I.value[l.a], v = I.value[l.b], y = I.value[l.c], I.array[q] = g[pe[0]], I.array[q + 1] = g[pe[1]], I.array[q + 2] = g[pe[2]], I.array[q + 3] = v[pe[0]], I.array[q + 4] = v[pe[1]], I.array[q + 5] = v[pe[2]], I.array[q + 6] = y[pe[0]], I.array[q + 7] = y[pe[1]], I.array[q + 8] = y[pe[2]], q += 9;
                  else if ("faces" === I.boundTo)
                    for (o = 0, a = ue.length; o < a; o++) g = L = I.value[ue[o]], v = L, y = L, I.array[q] = g[pe[0]], I.array[q + 1] = g[pe[1]], I.array[q + 2] = g[pe[2]], I.array[q + 3] = v[pe[0]], I.array[q + 4] = v[pe[1]], I.array[q + 5] = v[pe[2]], I.array[q + 6] = y[pe[0]], I.array[q + 7] = y[pe[1]], I.array[q + 8] = y[pe[2]], q += 9;
                  else if ("faceVertices" === I.boundTo)
                    for (o = 0, a = ue.length; o < a; o++) g = (L = I.value[ue[o]])[0], v = L[1], y = L[2], I.array[q] = g[pe[0]], I.array[q + 1] = g[pe[1]], I.array[q + 2] = g[pe[2]], I.array[q + 3] = v[pe[0]], I.array[q + 4] = v[pe[1]], I.array[q + 5] = v[pe[2]], I.array[q + 6] = y[pe[0]], I.array[q + 7] = y[pe[1]], I.array[q + 8] = y[pe[2]], q += 9
                } else if (4 === I.size)
                  if (void 0 === I.boundTo || "vertices" === I.boundTo)
                    for (o = 0, a = ue.length; o < a; o++) l = he[ue[o]], g = I.value[l.a], v = I.value[l.b], y = I.value[l.c], I.array[q] = g.x, I.array[q + 1] = g.y, I.array[q + 2] = g.z, I.array[q + 3] = g.w, I.array[q + 4] = v.x, I.array[q + 5] = v.y, I.array[q + 6] = v.z, I.array[q + 7] = v.w, I.array[q + 8] = y.x, I.array[q + 9] = y.y, I.array[q + 10] = y.z, I.array[q + 11] = y.w, q += 12;
                  else if ("faces" === I.boundTo)
                  for (o = 0, a = ue.length; o < a; o++) g = L = I.value[ue[o]], v = L, y = L, I.array[q] = g.x, I.array[q + 1] = g.y, I.array[q + 2] = g.z, I.array[q + 3] = g.w, I.array[q + 4] = v.x, I.array[q + 5] = v.y, I.array[q + 6] = v.z, I.array[q + 7] = v.w, I.array[q + 8] = y.x, I.array[q + 9] = y.y, I.array[q + 10] = y.z, I.array[q + 11] = y.w, q += 12;
                else if ("faceVertices" === I.boundTo)
                  for (o = 0, a = ue.length; o < a; o++) g = (L = I.value[ue[o]])[0], v = L[1], y = L[2], I.array[q] = g.x, I.array[q + 1] = g.y, I.array[q + 2] = g.z, I.array[q + 3] = g.w, I.array[q + 4] = v.x, I.array[q + 5] = v.y, I.array[q + 6] = v.z, I.array[q + 7] = v.w, I.array[q + 8] = y.x, I.array[q + 9] = y.y, I.array[q + 10] = y.z, I.array[q + 11] = y.w, q += 12;
                D.bindBuffer(D.ARRAY_BUFFER, I.buffer), D.bufferData(D.ARRAY_BUFFER, I.array, n)
              } i && (delete e.__inittedArrays, delete e.__colorArray, delete e.__normalArray, delete e.__tangentArray, delete e.__uvArray, delete e.__uv2Array, delete e.__faceArray, delete e.__vertexArray, delete e.__lineArray, delete e.__skinIndexArray, delete e.__skinWeightArray)
        }
      }

      function Je(e) {
        if (e.streamingDraw) {
          if (!e.streamingIndex) {
            var t = e.attributes.index;
            t && (t.buffer = D.createBuffer(), D.bindBuffer(D.ELEMENT_ARRAY_BUFFER, t.buffer), D.bufferData(D.ELEMENT_ARRAY_BUFFER, t.array || e.ib, D.STATIC_DRAW))
          }
        } else {
          e.vb && void 0 === e.vbbuffer && (e.vbbuffer = D.createBuffer(), e.vbNeedsUpdate = !0), e.ib && void 0 === e.ibbuffer && (e.ibbuffer = D.createBuffer(), D.bindBuffer(D.ELEMENT_ARRAY_BUFFER, e.ibbuffer), D.bufferData(D.ELEMENT_ARRAY_BUFFER, e.ib, D.STATIC_DRAW)), e.iblines && void 0 === e.iblinesbuffer && (e.iblinesbuffer = D.createBuffer(), D.bindBuffer(D.ELEMENT_ARRAY_BUFFER, e.iblinesbuffer), D.bufferData(D.ELEMENT_ARRAY_BUFFER, e.iblines, D.STATIC_DRAW));
          for (var n = e.attributes, i = e.attributesKeys, r = 0, o = i.length; r < o; r++) {
            var a = i[r],
              s = n[a],
              l = "index" === a;
            if (s.array && void 0 === s.buffer && (s.buffer = D.createBuffer(), s.needsUpdate = !0), !0 === s.needsUpdate) {
              var c = l ? D.ELEMENT_ARRAY_BUFFER : D.ARRAY_BUFFER;
              D.bindBuffer(c, s.buffer), D.bufferData(c, s.array, D.STATIC_DRAW), s.needsUpdate = !1
            }
          }
          e.vbNeedsUpdate && (D.bindBuffer(D.ARRAY_BUFFER, e.vbbuffer), D.bufferData(D.ARRAY_BUFFER, e.vb, D.STATIC_DRAW), e.vbNeedsUpdate = !1, e.discardAfterUpload && (e.vb = null))
        }
      }

      function $e(e) {
        I ? D.bindVertexArray(e) : k.bindVertexArrayOES(e)
      }

      function et(e) {
        I ? D.deleteVertexArray(e) : k.deleteVertexArrayOES(e)
      }

      function tt(e, t, n) {
        I ? D.vertexAttribDivisor(e, t && n || 0) : O && O.vertexAttribDivisorANGLE(e, t && n || 0)
      }

      function nt(e, t, n, i, r) {
        I ? D.drawElementsInstanced(e, t, n, i, r) : O.drawElementsInstancedANGLE(e, t, n, i, r)
      }

      function it(e, t, n, i) {
        var r;
        if (!l.USE_VAO || n.streamingDraw) return n.vaos = null, !1;
        if (!I && !k) return n.vaos = null, !1;
        if (void 0 === n.vaos && (n.vaos = []), r = I ? D.createVertexArray() : k.createVertexArrayOES(), n.vaos.push({
            geomhash: t.id,
            uv: i,
            vao: r
          }), $e(r), e.isEdgeMaterial) D.bindBuffer(D.ELEMENT_ARRAY_BUFFER, n.iblinesbuffer);
        else {
          var o = n.attributes.index;
          o && D.bindBuffer(D.ELEMENT_ARRAY_BUFFER, n.ibbuffer || o.buffer)
        }
        for (var a = null, s = t.attributes, c = t.attributesKeys, u = n.vbstride, h = n.offsets && n.offsets.length ? n.offsets[0].index : 0, d = n.offsets && n.offsets.length && n.offsets[0].instanceStart || 0, f = 0, p = c.length; f < p; f++) {
          var m = c[f],
            g = s[m];
          if (g >= 0) {
            var v = n.attributes[m];
            if ("uv" === m && i && (v = n.attributes["uv" + (i + 1)]), !v) {
              $e(null);
              for (var y = 0; y < n.vaos.length; y++) et(n.vaos[y].vao);
              return n.vaos = null, !1
            }
            var b = D.FLOAT,
              _ = v.bytesPerItem || 4;
            1 === _ ? b = D.UNSIGNED_BYTE : 2 === _ && (b = D.UNSIGNED_SHORT), D.enableVertexAttribArray(g);
            var x = h;
            v.divisor && (x += d), void 0 !== v.itemOffset ? (a != n.vbbuffer && (D.bindBuffer(D.ARRAY_BUFFER, n.vbbuffer), a = n.vbbuffer), D.vertexAttribPointer(g, v.itemSize, b, !!v.normalize, 4 * u, 4 * (v.itemOffset + x * u))) : (D.bindBuffer(D.ARRAY_BUFFER, v.buffer), a = v.buffer, D.vertexAttribPointer(g, v.itemSize, b, !!v.normalize, 0, x * v.itemSize * _)), tt(g, n.numInstances, v.divisor)
          }
        }
        return !0
      }

      function rt(e, t) {
        var n = Z[e];
        return n || (n = D.createBuffer(), Z[e] = n), D.bindBuffer(D.ARRAY_BUFFER, n), D.bufferData(D.ARRAY_BUFFER, t, D.DYNAMIC_DRAW), n
      }

      function ot(e, t, n, i, r, o, a) {
        var s, l = t.attributes,
          c = t.attributesKeys,
          u = 0;
        if (r)
          if (!r.buffer && n.streamingDraw) {
            var h = Z.index;
            h || (h = D.createBuffer(), Z.index = h), D.bindBuffer(D.ELEMENT_ARRAY_BUFFER, h), e.isEdgeMaterial ? D.bufferData(D.ELEMENT_ARRAY_BUFFER, n.iblines, D.DYNAMIC_DRAW) : D.bufferData(D.ELEMENT_ARRAY_BUFFER, r.array || n.ib, D.DYNAMIC_DRAW)
          } else e.isEdgeMaterial ? D.bindBuffer(D.ELEMENT_ARRAY_BUFFER, n.iblinesbuffer) : D.bindBuffer(D.ELEMENT_ARRAY_BUFFER, n.ibbuffer || r.buffer);
        for (var d = 0, f = c.length; d < f; d++) {
          var p = c[d],
            m = l[p];
          if (m >= 0) {
            var g = n.attributes[p];
            if ("uv" === p && o && (g = n.attributes["uv" + (o + 1)]), g) {
              var v, y, b = void 0 !== g.itemOffset;
              b ? (v = n.vbstride, y = g.itemOffset, u !== s && (n.streamingDraw ? u = rt("interleavedVB", n.vb) : (u = n.vbbuffer, D.bindBuffer(D.ARRAY_BUFFER, u)), s = u)) : (v = g.itemSize, y = 0, n.streamingDraw ? u = rt(p, g.array) : (u = g.buffer, D.bindBuffer(D.ARRAY_BUFFER, u)));
              var _ = D.FLOAT,
                x = g.bytesPerItem || 4;
              1 === x ? _ = D.UNSIGNED_BYTE : 2 === x && (_ = D.UNSIGNED_SHORT), b && (x = 4), ae.enableAttribute(m);
              var w = i;
              g.divisor && (w += a), D.vertexAttribPointer(m, g.itemSize, _, g.normalize, v * x, (y + w * v) * x), tt(m, n.numInstances, g.divisor)
            } else if (e.defaultAttributeValues) {
              var E = e.defaultAttributeValues[p];
              E && 2 === E.length ? D.vertexAttrib2fv(m, e.defaultAttributeValues[p]) : E && 3 === E.length ? D.vertexAttrib3fv(m, e.defaultAttributeValues[p]) : E && 4 === E.length && D.vertexAttrib4fv(m, e.defaultAttributeValues[p])
            }
          }
        }
        ae.disableUnusedAttributes()
      }

      function at(e, t) {
        return e.object.renderOrder !== t.object.renderOrder ? e.object.renderOrder - t.object.renderOrder : e.z !== t.z ? e.z - t.z : e.id - t.id
      }

      function st(e, t) {
        return e.object.renderOrder !== t.object.renderOrder ? e.object.renderOrder - t.object.renderOrder : e.material.id !== t.material.id ? e.material.id - t.material.id : e.z !== t.z ? t.z - e.z : e.id - t.id
      }

      function lt(e) {
        ut(e, !0)
      }

      function ct(e) {
        ut(e, !1)
      }

      function ut(e, t, n) {
        var i, r;
        if (n || !1 !== e.visible) {
          if (e instanceof s.Scene || e instanceof s.Group);
          else if (e instanceof o.RenderBatch) e.forEach(t ? lt : ct);
          else if (function (e) {
              void 0 === e.__webglInit && (e.__webglInit = !0, e.addEventListener("removed", De));
              var t = e.geometry;
              void 0 === t || void 0 === t.__webglInit && (t.__webglInit = !0, t.addEventListener("dispose", Ie), t instanceof s.BufferGeometry || (e instanceof s.Mesh ? _t(e, t) : e instanceof s.Line ? void 0 === t.__webglVertexBuffer && (! function (e) {
                e.__webglVertexBuffer = D.createBuffer(), e.__webglColorBuffer = D.createBuffer(), e.__webglLineDistanceBuffer = D.createBuffer(), N.info.memory.geometries++
              }(t), function (e, t) {
                var n = e.vertices.length;
                e.__vertexArray = new Float32Array(3 * n), e.__colorArray = new Float32Array(3 * n), e.__lineDistanceArray = new Float32Array(1 * n), e.__webglLineCount = n, je(e, t)
              }(t, e), t.verticesNeedUpdate = !0, t.colorsNeedUpdate = !0, t.lineDistancesNeedUpdate = !0) : e instanceof s.PointCloud && void 0 === t.__webglVertexBuffer && (! function (e) {
                e.__webglVertexBuffer = D.createBuffer(), e.__webglColorBuffer = D.createBuffer(), N.info.memory.geometries++
              }(t), function (e, t) {
                var n = e.vertices.length;
                e.__vertexArray = new Float32Array(3 * n), e.__colorArray = new Float32Array(3 * n), e.__webglPointCount = n, je(e, t)
              }(t, e), t.verticesNeedUpdate = !0, t.colorsNeedUpdate = !0)));
              if (void 0 === e.__webglActive)
                if (e.__webglActive = !0, e instanceof s.Mesh) {
                  if (t instanceof s.BufferGeometry) xt(A, t, e);
                  else if (t instanceof s.Geometry)
                    for (var n = yt[t.id], i = 0, r = n.length; i < r; i++) xt(A, n[i], e)
                } else(e instanceof s.Line || e instanceof s.PointCloud) && xt(A, t, e)
            }(e), e instanceof s.Light) E.push(e);
          else {
            var a = A[e.id];
            if (a && (!1 === e.frustumCulled || !0 === J.intersectsObject(e)))
              for (i = 0, r = a.length; i < r; i++) {
                var l = a[i];
                vt(l), l.render = !0, !0 === t && (te.setFromMatrixPosition(e.matrixWorld), te.applyProjection($), l.z = te.z)
              }
          }
          if (e.children)
            for (i = 0, r = e.children.length; i < r; i++) ut(e.children[i], t, n)
        }
      }

      function ht(e, t) {
        if (!t.getCustomOverrideMaterial) return t;
        var n = t.getCustomOverrideMaterial(e);
        return n || t
      }

      function dt(e, t, n, i, r) {
        for (var o, a = 0, l = e.length; a < l; a++) {
          var c = e[a],
            u = c.object,
            h = c.buffer;
          if (r) o = ht(c.material, r);
          else {
            if (!(o = c.material)) continue;
            Mt(o)
          }
          if (o.twoPassTransparency) {
            var d = o.side;
            o.side = s.BackSide, ft(o, t, n, i, h, r, u), o.side = s.FrontSide, ft(o, t, n, i, h, r, u), o.side = d
          } else ft(o, t, n, i, h, r, u)
        }
      }

      function ft(e, t, n, i, r, o, a) {
        if (N.setMaterialFaces(e), r instanceof s.BufferGeometry ? N.renderBufferDirect(t, n, i, e, r, a) : N.renderBuffer(t, n, i, e, r, a), e.decals)
          for (var l = e.decals, c = 0, u = l.length; c < u; c++) {
            var h = l[c];
            Mt(e = h.material), N.setMaterialFaces(e), r instanceof s.BufferGeometry && N.renderBufferDirect(t, n, i, e, r, a, h.uv)
          }
      }

      function pt(e, t) {
        if (e.visible && !e.hide) {
          var n;
          if (ze) n = ht(e.material, ze);
          else {
            if (!(n = e.material)) return;
            Mt(n)
          }
          if (n.twoPassTransparency) {
            var i = n.side;
            n.side = s.BackSide, mt(e, n), n.side = s.FrontSide, mt(e, n), n.side = i
          } else mt(e, n)
        }
      }

      function mt(e, t) {
        if (N.setMaterialFaces(t), N.renderBufferDirect(Ue, Ve, Be, t, e.geometry, e), t.decals)
          for (var n = t.decals, i = 0, r = n.length; i < r; i++) {
            var o = n[i];
            Mt(t = o.material), N.setMaterialFaces(t), N.renderBufferDirect(Ue, Ve, Be, t, e.geometry, e, o.uv)
          }
      }

      function gt(e, t, n, i, r, o) {
        Ue = n, Ve = i, Be = r, ze = o || null, e.forEach(pt, e.forceVisible ? 1 : 32, !1)
      }

      function vt(e) {
        var t = e.object,
          n = e.buffer,
          i = t.geometry,
          r = t.material;
        if (r instanceof s.MeshFaceMaterial) {
          var o = i instanceof s.BufferGeometry ? 0 : n.materialIndex;
          r = r.materials[o], e.material = r, r.transparent ? P.push(e) : C.push(e)
        } else r && (e.material = r, r.transparent ? P.push(e) : C.push(e))
      }
      this.renderBufferDirect = function (e, t, n, i, r, o, a) {
        if (!1 !== i.visible && (!i.isEdgeMaterial || r.iblines)) {
          Je(o.geometry);
          var l = Tt(e, t, n, i, o),
            c = r.attributes,
            u = !1,
            h = i.wireframe ? 1 : 0,
            d = "direct_" + r.id + (a ? "/" + a : "") + "_" + l.id + "_" + h;
          d !== G && (G = d, u = !0);
          var f, p = r.offsets && r.offsets.length,
            m = p && r.offsets.some((function (e) {
              return e.index >= 0 || e.instanceStart >= 0
            }));
          m ? u = !0 : (f = function (e, t, n, i) {
            var r = n.vaos;
            if (r)
              for (var o = 0, a = r.length; o < a; o++) {
                var s = r[o];
                if (s.geomhash === t.id && s.uv === i) return $e(s.vao), !0
              } else if (null === r) return !1;
            return it(e, t, n, i)
          }(i, l, r, a || 0), u = u && !f), u && ae.initAttributes();
          var g, v = c.index;
          if (v) {
            var y, b, _ = v.array ? v.array : r.ib;
            i.isEdgeMaterial && (v = c.indexlines, _ = r.iblines), v.bytesPerItem ? 4 === (b = v.bytesPerItem) && !I && se.get("OES_element_index_uint") : b = _ instanceof Uint32Array && (I || se.get("OES_element_index_uint")) ? 4 : 2, y = 4 === b ? D.UNSIGNED_INT : D.UNSIGNED_SHORT;
            var x = r.offsets;
            p && i.isEdgeMaterial && !x[0].hasOwnProperty("edgeStart") && (x = null);
            var w = 0;
            do {
              var E, A, S, M, T;
              if (p) {
                var C = x[w];
                E = C.index, A = i.isEdgeMaterial ? C.edgeStart || 0 : C.start, S = i.isEdgeMaterial ? C.edgeCount || _.length : C.count, M = C.instanceStart || 0, T = C.numInstances || r.numInstances;
                var P = i.program.uniforms;
                if (P.themingColor && "themingColor" in C) {
                  var L = C.themingColor;
                  L instanceof s.Vector4 ? D.uniform4f(P.themingColor, L.x, L.y, L.z, L.w) : D.uniform4f(P.themingColor, 0, 0, 0, 0)
                }
              } else E = 0, A = 0, S = _.length, M = 0, T = r.numInstances;
              u && (ot(i, l, r, E, v, a, M), m || (u = !1)), g = D.TRIANGLES, r.isPoints ? g = D.POINTS : (r.isLines || i.isEdgeMaterial) && (g = D.LINES), T ? nt(g, S, y, A * b, T) : D.drawElements(g, S, y, A * b)
            } while (x && ++w < x.length)
          } else {
            r.offsets && r.offsets.length > 1 && console.error("Geometry with draw calls and no index buffer"), u && ot(i, l, r, 0, void 0, a, 0);
            var R = r.attributes.position;
            g = D.TRIANGLES, r.isPoints ? g = D.POINTS : (r.isLines || i.isEdgeMaterial) && (g = D.LINES), r.numInstances ? function (e, t, n, i) {
              I ? D.drawArraysInstanced(e, t, n, i) : O.drawArraysInstancedANGLE(e, t, n, i)
            }(g, 0, R.array.length / 3, r.numInstances) : D.drawArrays(g, 0, R.array.length / R.itemSize)
          }
          f && $e(null)
        }
      }, this.renderBuffer = function (e, t, i, r, o, a) {
        if (!1 !== r.visible) {
          ! function (e) {
            var t, n, i = e.geometry;
            if (i instanceof s.BufferGeometry) Je(i);
            else if (e instanceof s.Mesh) {
              !0 === i.groupsNeedUpdate && _t(e, i);
              for (var r = yt[i.id], o = 0, a = r.length; o < a; o++) {
                var l = r[o];
                n = Xe(e, l), t = n.attributes && wt(n), (i.verticesNeedUpdate || i.morphTargetsNeedUpdate || i.elementsNeedUpdate || i.uvsNeedUpdate || i.normalsNeedUpdate || i.colorsNeedUpdate || i.tangentsNeedUpdate || t) && Ze(l, e, D.DYNAMIC_DRAW, !i.dynamic, n)
              }
              i.verticesNeedUpdate = !1, i.morphTargetsNeedUpdate = !1, i.elementsNeedUpdate = !1, i.uvsNeedUpdate = !1, i.normalsNeedUpdate = !1, i.colorsNeedUpdate = !1, i.tangentsNeedUpdate = !1, n.attributes && Et(n)
            } else e instanceof s.Line ? (n = Xe(e, i), t = n.attributes && wt(n), (i.verticesNeedUpdate || i.colorsNeedUpdate || i.lineDistancesNeedUpdate || t) && function (e, t) {
              var n, i, r, o, a, s, l, c, u, h, d, f, p = e.vertices,
                m = e.colors,
                g = e.lineDistances,
                v = p.length,
                y = m.length,
                b = g.length,
                _ = e.__vertexArray,
                x = e.__colorArray,
                w = e.__lineDistanceArray,
                E = e.verticesNeedUpdate,
                A = e.colorsNeedUpdate,
                S = e.lineDistancesNeedUpdate,
                M = e.__webglCustomAttributesList;
              if (E) {
                for (n = 0; n < v; n++) o = p[n], _[a = 3 * n] = o.x, _[a + 1] = o.y, _[a + 2] = o.z;
                D.bindBuffer(D.ARRAY_BUFFER, e.__webglVertexBuffer), D.bufferData(D.ARRAY_BUFFER, _, t)
              }
              if (A) {
                for (i = 0; i < y; i++) s = m[i], x[a = 3 * i] = s.r, x[a + 1] = s.g, x[a + 2] = s.b;
                D.bindBuffer(D.ARRAY_BUFFER, e.__webglColorBuffer), D.bufferData(D.ARRAY_BUFFER, x, t)
              }
              if (S) {
                for (r = 0; r < b; r++) w[r] = g[r];
                D.bindBuffer(D.ARRAY_BUFFER, e.__webglLineDistanceBuffer), D.bufferData(D.ARRAY_BUFFER, w, t)
              }
              if (M)
                for (l = 0, c = M.length; l < c; l++)
                  if ((f = M[l]).needsUpdate && (void 0 === f.boundTo || "vertices" === f.boundTo)) {
                    if (a = 0, h = f.value.length, 1 === f.size)
                      for (u = 0; u < h; u++) f.array[u] = f.value[u];
                    else if (2 === f.size)
                      for (u = 0; u < h; u++) d = f.value[u], f.array[a] = d.x, f.array[a + 1] = d.y, a += 2;
                    else if (3 === f.size)
                      if ("c" === f.type)
                        for (u = 0; u < h; u++) d = f.value[u], f.array[a] = d.r, f.array[a + 1] = d.g, f.array[a + 2] = d.b, a += 3;
                      else
                        for (u = 0; u < h; u++) d = f.value[u], f.array[a] = d.x, f.array[a + 1] = d.y, f.array[a + 2] = d.z, a += 3;
                    else if (4 === f.size)
                      for (u = 0; u < h; u++) d = f.value[u], f.array[a] = d.x, f.array[a + 1] = d.y, f.array[a + 2] = d.z, f.array[a + 3] = d.w, a += 4;
                    D.bindBuffer(D.ARRAY_BUFFER, f.buffer), D.bufferData(D.ARRAY_BUFFER, f.array, t)
                  }
            }(i, D.DYNAMIC_DRAW), i.verticesNeedUpdate = !1, i.colorsNeedUpdate = !1, i.lineDistancesNeedUpdate = !1, n.attributes && Et(n)) : e instanceof s.PointCloud && (n = Xe(e, i), t = n.attributes && wt(n), (i.verticesNeedUpdate || i.colorsNeedUpdate || t) && function (e, t) {
              var n, i, r, o, a, s, l, c, u, h, d, f = e.vertices,
                p = e.colors,
                m = f.length,
                g = p.length,
                v = e.__vertexArray,
                y = e.__colorArray,
                b = e.verticesNeedUpdate,
                _ = e.colorsNeedUpdate,
                x = e.__webglCustomAttributesList;
              if (b) {
                for (n = 0; n < m; n++) r = f[n], v[o = 3 * n] = r.x, v[o + 1] = r.y, v[o + 2] = r.z;
                D.bindBuffer(D.ARRAY_BUFFER, e.__webglVertexBuffer), D.bufferData(D.ARRAY_BUFFER, v, t)
              }
              if (_) {
                for (i = 0; i < g; i++) a = p[i], y[o = 3 * i] = a.r, y[o + 1] = a.g, y[o + 2] = a.b;
                D.bindBuffer(D.ARRAY_BUFFER, e.__webglColorBuffer), D.bufferData(D.ARRAY_BUFFER, y, t)
              }
              if (x)
                for (s = 0, l = x.length; s < l; s++)
                  if ((d = x[s]).needsUpdate && (void 0 === d.boundTo || "vertices" === d.boundTo)) {
                    if (o = 0, u = d.value.length, 1 === d.size)
                      for (c = 0; c < u; c++) d.array[c] = d.value[c];
                    else if (2 === d.size)
                      for (c = 0; c < u; c++) h = d.value[c], d.array[o] = h.x, d.array[o + 1] = h.y, o += 2;
                    else if (3 === d.size)
                      if ("c" === d.type)
                        for (c = 0; c < u; c++) h = d.value[c], d.array[o] = h.r, d.array[o + 1] = h.g, d.array[o + 2] = h.b, o += 3;
                      else
                        for (c = 0; c < u; c++) h = d.value[c], d.array[o] = h.x, d.array[o + 1] = h.y, d.array[o + 2] = h.z, o += 3;
                    else if (4 === d.size)
                      for (c = 0; c < u; c++) h = d.value[c], d.array[o] = h.x, d.array[o + 1] = h.y, d.array[o + 2] = h.z, d.array[o + 3] = h.w, o += 4;
                    D.bindBuffer(D.ARRAY_BUFFER, d.buffer), D.bufferData(D.ARRAY_BUFFER, d.array, t)
                  }
            }(i, D.DYNAMIC_DRAW), i.verticesNeedUpdate = !1, i.colorsNeedUpdate = !1, n.attributes && Et(n))
          }(a);
          var l = Tt(e, t, i, r, a),
            c = l.attributes,
            u = !1,
            h = r.wireframe ? 1 : 0,
            d = o.id + "_" + l.id + "_" + h;
          if (d !== G && (G = d, u = !0), u && ae.initAttributes(), !r.morphTargets && c.position >= 0 && u && (D.bindBuffer(D.ARRAY_BUFFER, o.__webglVertexBuffer), ae.enableAttribute(c.position), y(c.position, 3, D.FLOAT, !1, 0, 0)), u) {
            if (o.__webglCustomAttributesList)
              for (var f = 0, p = o.__webglCustomAttributesList.length; f < p; f++) {
                var m = o.__webglCustomAttributesList[f];
                c[m.buffer.belongsToAttribute] >= 0 && (D.bindBuffer(D.ARRAY_BUFFER, m.buffer), ae.enableAttribute(c[m.buffer.belongsToAttribute]), y(c[m.buffer.belongsToAttribute], m.size, D.FLOAT, !1, 0, 0))
              }
            c.color >= 0 && (a.geometry.colors.length > 0 || a.geometry.faces.length > 0 ? (D.bindBuffer(D.ARRAY_BUFFER, o.__webglColorBuffer), ae.enableAttribute(c.color), y(c.color, 3, D.FLOAT, !1, 0, 0)) : r.defaultAttributeValues && D.vertexAttrib3fv(c.color, r.defaultAttributeValues.color)), c.normal >= 0 && (D.bindBuffer(D.ARRAY_BUFFER, o.__webglNormalBuffer), ae.enableAttribute(c.normal), y(c.normal, 3, D.FLOAT, !1, 0, 0)), c.tangent >= 0 && (D.bindBuffer(D.ARRAY_BUFFER, o.__webglTangentBuffer), ae.enableAttribute(c.tangent), y(c.tangent, 4, D.FLOAT, !1, 0, 0)), c.uv >= 0 && (a.geometry.faceVertexUvs[0] ? (D.bindBuffer(D.ARRAY_BUFFER, o.__webglUVBuffer), ae.enableAttribute(c.uv), y(c.uv, 2, D.FLOAT, !1, 0, 0)) : r.defaultAttributeValues && D.vertexAttrib2fv(c.uv, r.defaultAttributeValues.uv)), c.uv2 >= 0 && (a.geometry.faceVertexUvs[1] ? (D.bindBuffer(D.ARRAY_BUFFER, o.__webglUV2Buffer), ae.enableAttribute(c.uv2), y(c.uv2, 2, D.FLOAT, !1, 0, 0)) : r.defaultAttributeValues && D.vertexAttrib2fv(c.uv2, r.defaultAttributeValues.uv2)), c.lineDistance >= 0 && (D.bindBuffer(D.ARRAY_BUFFER, o.__webglLineDistanceBuffer), ae.enableAttribute(c.lineDistance), y(c.lineDistance, 1, D.FLOAT, !1, 0, 0))
          }
          if (ae.disableUnusedAttributes(), a instanceof s.Mesh) {
            var g = o.__typeArray === Uint32Array ? D.UNSIGNED_INT : D.UNSIGNED_SHORT;
            r.wireframe ? (ae.setLineWidth(r.wireframeLinewidth * n), u && D.bindBuffer(D.ELEMENT_ARRAY_BUFFER, o.__webglLineBuffer), D.drawElements(D.LINES, o.__webglLineCount, g, 0)) : (u && D.bindBuffer(D.ELEMENT_ARRAY_BUFFER, o.__webglFaceBuffer), D.drawElements(D.TRIANGLES, o.__webglFaceCount, g, 0))
          } else if (a instanceof s.Line) {
            var v = a.mode === s.LineStrip ? D.LINE_STRIP : D.LINES;
            ae.setLineWidth(r.linewidth * n), D.drawArrays(v, 0, o.__webglLineCount)
          } else a instanceof s.PointCloud && D.drawArrays(D.POINTS, 0, o.__webglPointCount)
        }

        function y(e, t, n, i, r, o) {
          D.vertexAttribPointer(e, t, n, i, r, o), O && O.vertexAttribDivisorANGLE(e, 0)
        }
      }, this.render = function (e, t, n, i, r) {
        if (t instanceof s.Camera != !1) {
          G = "", B = -1, z = null, void 0 !== r && (E.length = 0, ie = !0);
          var a = e.fog;
          !0 === e.autoUpdate && e.updateMatrixWorld(), void 0 === t.parent && t.updateMatrixWorld(), t.matrixWorldInverse.getInverse(t.matrixWorld), t.worldUpTransform ? ee.multiplyMatrices(t.worldUpTransform, t.matrixWorld) : ee.copy(t.matrixWorld), $.multiplyMatrices(t.projectionMatrix, t.matrixWorldInverse), J.setFromMatrix($);
          var l = e instanceof o.RenderBatch && e.renderImmediate;
          if (l || (C.length = 0, P.length = 0, ut(e, !0 === N.sortObjects, !0 === e.forceVisible), !0 === N.sortObjects && (C.sort(st), P.sort(at))), ie && (r && r.length && (E = r.slice()), Ot(E)), this.setRenderTarget(n), this.resetGLState(), (this.autoClear || i) && this.clear(this.autoClearColor, this.autoClearDepth, this.autoClearStencil), e.overrideMaterial) {
            var c = e.overrideMaterial;
            Mt(c), l ? gt(e, "", t, E, a, c) : (dt(C, t, E, a, c), dt(P, t, E, a, c))
          } else l ? gt(e, "", t, E, a, null) : (ae.setBlending(s.NoBlending), dt(C, t, E, a, null), dt(P, t, E, a, null));
          if (e.edgeMaterial) {
            D.depthFunc(D.LESS);
            var u = e.edgeMaterial;
            Mt(u), l ? gt(e, "", t, E, a, u) : (dt(C, t, E, a, u), dt(P, t, E, a, u)), D.depthFunc(D.LEQUAL)
          }
          n && n.generateMipmaps && n.minFilter !== s.NearestFilter && n.minFilter !== s.LinearFilter && function (e) {
            D.bindTexture(D.TEXTURE_2D, e.__webglTexture), D.generateMipmap(D.TEXTURE_2D), D.bindTexture(D.TEXTURE_2D, null)
          }(n), this.resetGLState(), ae.setDepthTest(!0), ae.setDepthWrite(!0)
        } else s.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")
      }, this.clearBlend = function () {
        ae.setBlending(s.NoBlending)
      }, this.setProgramPrefix = function (e, t, n) {
        H = e, W = t, j = n
      }, this.getProgramPrefix = function () {
        return {
          programPrefix: H,
          vertexPrefix: W,
          fragmentPrefix: j
        }
      }, this.updateTimestamp = function (e) {
        T = e
      };
      var yt = {},
        bt = 0;

      function _t(e, t) {
        var n = e.material,
          i = !1;
        void 0 !== yt[t.id] && !0 !== t.groupsNeedUpdate || (delete A[e.id], yt[t.id] = function (e, t) {
          for (var n, i, r = I || se.get("OES_element_index_uint") ? 4294967296 : 65535, o = {}, a = e.morphTargets ? e.morphTargets.length : 0, s = e.morphNormals ? e.morphNormals.length : 0, l = {}, c = [], u = 0, h = e.faces.length; u < h; u++) {
            var d = e.faces[u],
              f = t ? d.materialIndex : 0;
            f in o || (o[f] = {
              hash: f,
              counter: 0
            }), (n = o[f].hash + "_" + o[f].counter) in l || (i = {
              id: bt++,
              faces3: [],
              materialIndex: f,
              vertices: 0,
              numMorphTargets: a,
              numMorphNormals: s
            }, l[n] = i, c.push(i)), l[n].vertices + 3 > r && (o[f].counter += 1, (n = o[f].hash + "_" + o[f].counter) in l || (i = {
              id: bt++,
              faces3: [],
              materialIndex: f,
              vertices: 0,
              numMorphTargets: a,
              numMorphNormals: s
            }, l[n] = i, c.push(i))), l[n].faces3.push(u), l[n].vertices += 3
          }
          return c
        }(t, n instanceof s.MeshFaceMaterial), t.groupsNeedUpdate = !1);
        for (var r = yt[t.id], o = 0, a = r.length; o < a; o++) {
          var l = r[o];
          void 0 === l.__webglVertexBuffer ? (Le(l), qe(l, e), t.verticesNeedUpdate = !0, t.morphTargetsNeedUpdate = !0, t.elementsNeedUpdate = !0, t.uvsNeedUpdate = !0, t.normalsNeedUpdate = !0, t.tangentsNeedUpdate = !0, t.colorsNeedUpdate = !0, i = !0) : i = !1, (i || void 0 === e.__webglActive) && xt(A, l, e)
        }
        e.__webglActive = !0
      }

      function xt(e, t, n) {
        var i = n.id;
        e[i] = e[i] || [], e[i].push({
          id: i,
          buffer: t,
          object: n,
          material: null,
          z: 0
        })
      }

      function wt(e) {
        for (var t in e.attributes)
          if (e.attributes[t].needsUpdate) return !0;
        return !1
      }

      function Et(e) {
        for (var t in e.attributes) e.attributes[t].needsUpdate = !1
      }
      var At = {
        MeshDepthMaterial: "depth",
        MeshNormalMaterial: "normal",
        MeshBasicMaterial: "firefly_basic",
        MeshLambertMaterial: "lambert",
        MeshPhongMaterial: "firefly_phong",
        LineBasicMaterial: "firefly_basic",
        LineDashedMaterial: "dashed",
        PointCloudMaterial: "firefly_basic"
      };

      function St(e, t, n, r) {
        e.addEventListener("dispose", ke);
        var o = At[e.type];
        if (o) {
          var a = s.ShaderLib[o];
          e.__webglShader = {
            uniforms: s.UniformsUtils.clone(a.uniforms),
            vertexShader: a.vertexShader,
            fragmentShader: a.fragmentShader
          }
        } else e.__webglShader = {
          uniforms: e.uniforms,
          vertexShader: e.vertexShader,
          fragmentShader: e.fragmentShader
        };
        var l = function (e) {
            for (var t = 0, n = 0, i = 0, r = 0, o = 0, a = e.length; o < a; o++) {
              var l = e[o];
              l.onlyShadow || (l instanceof s.DirectionalLight && t++, l instanceof s.PointLight && n++, l instanceof s.SpotLight && i++, l instanceof s.HemisphereLight && r++)
            }
            return {
              directional: t,
              point: n,
              spot: i,
              hemi: r
            }
          }(t),
          c = {
            precision: d,
            precisionFragment: f,
            supportsVertexTextures: me,
            haveTextureLod: I || !!se.get("EXT_shader_texture_lod"),
            loadingAnimationDuration: L,
            map: !!e.map,
            envMap: !!e.envMap,
            irradianceMap: !!e.irradianceMap,
            envIsSpherical: e.envMap && e.envMap.mapping == s.SphericalReflectionMapping,
            envGammaEncoded: e.envMap && e.envMap.GammaEncoded,
            irrGammaEncoded: e.irradianceMap && e.irradianceMap.GammaEncoded,
            envRGBM: e.envMap && e.envMap.RGBM,
            irrRGBM: e.irradianceMap && e.irradianceMap.RGBM,
            lightMap: !!e.lightMap,
            bumpMap: (I || se.get("OES_standard_derivatives")) && !!e.bumpMap,
            normalMap: (I || se.get("OES_standard_derivatives")) && !!e.normalMap,
            specularMap: !!e.specularMap,
            alphaMap: !!e.alphaMap,
            vertexColors: e.vertexColors,
            vertexIds: e.vertexIds,
            useInstancing: e.useInstancing,
            wideLines: e.wideLines,
            fog: n,
            useFog: e.fog,
            sizeAttenuation: e.sizeAttenuation,
            logarithmicDepthBuffer: b,
            maxDirLights: l.directional,
            maxPointLights: l.point,
            maxSpotLights: l.spot,
            maxHemiLights: l.hemi,
            alphaTest: e.alphaTest,
            metal: e.metal,
            clearcoat: e.clearcoat,
            wrapAround: e.wrapAround,
            doubleSided: e.side === s.DoubleSide,
            flipSided: e.side === s.BackSide,
            mrtNormals: e.mrtNormals,
            mrtIdBuffer: e.mrtIdBuffer,
            vertexPrefix: W,
            fragmentPrefix: j,
            tonemapOutput: e.tonemapOutput,
            packedNormals: e.packedNormals,
            hatchPattern: !!e.hatchParams,
            numCutplanes: e.cutplanes ? e.cutplanes.length : 0,
            useTiling: e.useTiling,
            tilingRepeatRange: e.useTiling && e.tilingRepeatRange,
            hasRoundCorner: e.hasRoundCorner,
            useRandomOffset: e.useRandomOffset,
            mapInvert: e.map && e.map.invert,
            mapClampS: e.map && e.map.clampS,
            mapClampT: e.map && e.map.clampT,
            bumpMapClampS: e.bumpMap && e.bumpMap.clampS,
            bumpMapClampT: e.bumpMap && e.bumpMap.clampT,
            normalMapClampS: e.normalMap && e.normalMap.clampS,
            normalMapClampT: e.normalMap && e.normalMap.clampT,
            specularMapClampS: e.specularMap && e.specularMap.clampS,
            specularMapClampT: e.specularMap && e.specularMap.clampT,
            alphaMapInvert: e.alphaMap && e.alphaMap.invert,
            alphaMapClampS: e.alphaMap && e.alphaMap.clampS,
            alphaMapClampT: e.alphaMap && e.alphaMap.clampT
          };
        e.isPrismMaterial && (! function (e, t) {
          if (t.textureMaps)
            for (var n = 0; n < i.PrismMaps.length; n++) {
              var r = i.PrismMaps[n],
                o = t.textureMaps[r + "_map"];
              if (o) {
                var a = o.textureObj.properties.booleans;
                e[r] = {
                  S: !a.texture_URepeat.values[0],
                  T: !a.texture_VRepeat.values[0]
                }
              }
            }
        }(c, e), c.isPrism = !0);
        var u, h, p = [];
        for (var m in o ? p.push(o) : (p.push(e.fragmentShader), p.push(e.vertexShader)), e.defines) p.push(m), p.push(e.defines[m]);
        for (u in c) p.push(u), p.push(c[u]);
        var g, v = p.join();
        for (u = 0, h = F.length; u < h; u++) {
          var y = F[u];
          if (y.code === v) {
            (g = y).usedTimes++;
            break
          }
        }
        for (var _ in void 0 === g && (g = new i.WebGLProgram(N, v, e, c), F.push(g), N.info.memory.programs = F.length), e.programs || (e.programs = []), e.programs[H] = g, e.uniformsLists || (e.uniformsLists = []), e.uniformsList = e.uniformsLists[H] = [], e.__webglShader.uniforms) {
          var x = g.uniforms[_];
          x && e.uniformsList.push([e.__webglShader.uniforms[_], x])
        }
      }

      function Mt(e) {
        !0 === e.transparent ? ae.setBlending(e.blending, e.blendEquation, e.blendSrc, e.blendDst, e.blendEquationAlpha, e.blendSrcAlpha, e.blendDstAlpha) : ae.setBlending(s.NoBlending), ae.setDepthTest(e.depthTest), ae.setDepthWrite(e.depthWrite), ae.setPolygonOffset(e.polygonOffset, e.polygonOffsetFactor, e.polygonOffsetUnits)
      }

      function Tt(e, t, n, i, o) {
        q = 0, i.needsUpdate ? (i.program && We(i), St(i, t, n), i.needsUpdate = !1) : i.programs[H] || St(i, t, n);
        var a = !1,
          l = !1,
          c = !1;
        i.uniformsList = i.uniformsLists[H];
        var h, d = i.program = i.programs[H],
          f = d.uniforms,
          p = i.__webglShader.uniforms;
        if (d.id !== U && (D.useProgram(d.program), U = d.id, a = !0, l = !0, c = !0), i.id !== B && (-1 === B && (c = !0), B = i.id, l = !0), f.meshAnimTime) {
          var m = 1;
          o.geometry.creationTime && L > 0 && (m = Math.min((T - o.geometry.creationTime) / L, 1)), D.uniform1f(f.meshAnimTime, m)
        }
        if ((a || e !== z) && (D.uniformMatrix4fv(f.projectionMatrix, !1, e.projectionMatrix.elements), b && D.uniform1f(f.logDepthBufFC, 2 / (Math.log(e.far + 1) / Math.LN2)), e !== z && (z = e), (i instanceof s.ShaderMaterial || i instanceof s.MeshPhongMaterial || i.isPrismMaterial || i.envMap) && null !== f.cameraPosition && (te.setFromMatrixPosition(e.matrixWorld), D.uniform3f(f.cameraPosition, te.x, te.y, te.z)), (i instanceof s.MeshPhongMaterial || i instanceof s.MeshLambertMaterial || i instanceof s.ShaderMaterial || i.isPrismMaterial || i.skinning) && (null !== f.viewMatrix && D.uniformMatrix4fv(f.viewMatrix, !1, e.matrixWorldInverse.elements), null !== f.viewMatrixInverse && D.uniformMatrix4fv(f.viewMatrixInverse, !1, ee.elements), f.mvpMatrix && D.uniformMatrix4fv(f.mvpMatrix, !1, $.elements), c ? (Pt(p, i), Lt(p, !0)) : Lt(p, !1))), f.unpackXform) {
          var g = o.geometry,
            v = g.unpackXform;
          if (v ? D.uniform4f(f.unpackXform, v.x, v.y, v.z, v.w) : D.uniform4f(f.unpackXform, 1, 1, 0, 0), f.tIdColor) {
            D.uniform2f(f.vIdColorTexSize, g.vIdColorTexSize.x, g.vIdColorTexSize.y);
            var y = It();
            D.uniform1i(f.tIdColor, y), N.setTexture(g.tIdColor, y)
          }
        }
        if (l) {
          if ((i instanceof s.MeshPhongMaterial || i instanceof s.MeshLambertMaterial || i.isPrismMaterial || i.lights) && (ie && (c = !0, Ot(t), ie = !1), c ? (! function (e, t) {
              e.ambientLightColor.value = t.ambient, e.directionalLightColor.value = t.directional.colors, e.directionalLightDirection.value = t.directional.positions, e.pointLightColor.value = t.point.colors, e.pointLightPosition.value = t.point.positions, e.pointLightDistance.value = t.point.distances, e.spotLightColor.value = t.spot.colors, e.spotLightPosition.value = t.spot.positions, e.spotLightDistance.value = t.spot.distances, e.spotLightDirection.value = t.spot.directions, e.spotLightAngleCos.value = t.spot.anglesCos, e.spotLightExponent.value = t.spot.exponents, e.hemisphereLightSkyColor.value = t.hemi.skyColors, e.hemisphereLightGroundColor.value = t.hemi.groundColors, e.hemisphereLightDirection.value = t.hemi.positions
            }(p, re), Dt(p, !0)) : Dt(p, !1)), (i instanceof s.MeshBasicMaterial || i instanceof s.MeshLambertMaterial || i instanceof s.MeshPhongMaterial) && (! function (e, t) {
              e.opacity.value = t.opacity, e.diffuse.value.copy(t.color), e.map.value = t.map, e.lightMap.value = t.lightMap, e.specularMap.value = t.specularMap, e.alphaMap.value = t.alphaMap, t.bumpMap && (e.bumpMap.value = t.bumpMap, e.bumpScale.value = t.bumpScale);
              t.normalMap && (e.normalMap.value = t.normalMap, e.normalScale.value.copy(t.normalScale));

              function n(e, t, n) {
                var i = n.offset,
                  r = n.repeat;
                if (t) {
                  var o = t.value;
                  n.matrix ? o.copy(n.matrix) : o.identity(), o.elements[6] += i.x, o.elements[7] += i.y, o.elements[0] *= r.x, o.elements[3] *= r.x, o.elements[1] *= r.y, o.elements[4] *= r.y
                } else e.offsetRepeat.value.set(i.x, i.y, r.x, r.y)
              }
              t.alphaMap && n(e, e.texMatrixAlpha, t.alphaMap);
              var i, r;
              t.normalMap ? i = t.normalMap : t.bumpMap && (i = t.bumpMap);
              void 0 !== i && n(e, e.texMatrixBump, i);
              t.map ? r = t.map : t.specularMap && (r = t.specularMap);
              void 0 !== r && n(e, e.texMatrix, r);
              e.envMap.value = t.envMap, e.irradianceMap && (e.irradianceMap.value = t.irradianceMap);
              e.reflectivity.value = t.reflectivity, e.refractionRatio.value = t.refractionRatio
            }(p, i), Pt(p, i)), i instanceof s.PointCloudMaterial ? function (e, t) {
              Ct(e, t), e.point_size.value = t.size
            }(p, i) : i instanceof s.LineBasicMaterial ? Ct(p, i) : i instanceof s.LineDashedMaterial ? (Ct(p, i), function (e, t) {
              e.dashSize.value = t.dashSize, e.totalSize.value = t.dashSize + t.gapSize, e.scale.value = t.scale
            }(p, i)) : i instanceof s.MeshPhongMaterial ? function (e, t) {
              if (e.shininess.value = t.shininess, e.reflMipIndex) {
                var n = Math.log(Math.max(1 + 1e-10, t.shininess));
                e.reflMipIndex.value = Math.max(0, -.72134752 * n + 5.5)
              }
              e.emissive && e.emissive.value.copy(t.emissive);
              e.specular.value.copy(t.specular), e.exposureBias && (e.exposureBias.value = t.exposureBias)
            }(p, i) : i instanceof s.MeshLambertMaterial ? function (e, t) {
              e.emissive.value.copy(t.emissive), t.wrapAround && e.wrapRGB.value.copy(t.wrapRGB)
            }(p, i) : i instanceof s.MeshDepthMaterial ? (p.mNear.value = e.near, p.mFar.value = e.far, p.opacity.value = i.opacity) : i instanceof s.MeshNormalMaterial ? p.opacity.value = i.opacity : i.isPrismMaterial ? (! function (e, t) {
              function n(e, t, n) {
                e[n].value = t[n], null != t[n] && (e[n + "_texMatrix"].value = t[n].matrix, e[n + "_invert"].value = t[n].invert)
              }

              function i(e, t, n) {
                e[n].value = t[n], null != t[n] && (e[n + "_texMatrix"].value = t[n].matrix, e[n + "_bumpScale"].value = t[n].bumpScale, e[n + "_bumpmapType"].value = t[n].bumpmapType)
              }
              switch (e.exposureBias.value = t.exposureBias, e.opacity.value = t.opacity, e.surface_albedo.value = t.surface_albedo, e.surface_roughness.value = t.surface_roughness, e.surface_anisotropy.value = t.surface_anisotropy, e.surface_rotation.value = t.surface_rotation, n(e, t, "surface_albedo_map"), n(e, t, "surface_roughness_map"), n(e, t, "surface_cutout_map"), n(e, t, "surface_anisotropy_map"), n(e, t, "surface_rotation_map"), i(e, t, "surface_normal_map"), t.prismType) {
                case "PrismOpaque":
                  e.opaque_albedo.value = t.opaque_albedo, e.opaque_luminance_modifier.value = t.opaque_luminance_modifier, e.opaque_f0.value = t.opaque_f0, e.opaque_luminance.value = t.opaque_luminance, n(e, t, "opaque_albedo_map"), n(e, t, "opaque_luminance_modifier_map"), n(e, t, "opaque_f0_map");
                  break;
                case "PrismMetal":
                  e.metal_f0.value = t.metal_f0, n(e, t, "metal_f0_map");
                  break;
                case "PrismLayered":
                  e.layered_f0.value = t.layered_f0, e.layered_diffuse.value = t.layered_diffuse, e.layered_fraction.value = t.layered_fraction, e.layered_bottom_f0.value = t.layered_bottom_f0, e.layered_roughness.value = t.layered_roughness, e.layered_anisotropy.value = t.layered_anisotropy, e.layered_rotation.value = t.layered_rotation, n(e, t, "layered_bottom_f0_map"), n(e, t, "layered_f0_map"), n(e, t, "layered_diffuse_map"), n(e, t, "layered_fraction_map"), n(e, t, "layered_roughness_map"), n(e, t, "layered_anisotropy_map"), n(e, t, "layered_rotation_map"), i(e, t, "layered_normal_map");
                  break;
                case "PrismTransparent":
                  e.transparent_color.value = t.transparent_color, e.transparent_distance.value = t.transparent_distance, e.transparent_ior.value = t.transparent_ior;
                  break;
                case "PrismGlazing":
                  e.glazing_f0.value = t.glazing_f0, e.glazing_transmission_color.value = t.glazing_transmission_color, e.glazing_transmission_roughness.value = t.glazing_transmission_roughness, n(e, t, "glazing_f0_map"), n(e, t, "glazing_transmission_color_map"), n(e, t, "glazing_transmission_roughness_map");
                  break;
                case "PrismWood":
                  e.wood_fiber_cosine_enable.value = t.wood_fiber_cosine_enable, e.wood_fiber_cosine_bands.value = t.wood_fiber_cosine_bands, e.wood_fiber_cosine_weights.value = t.wood_fiber_cosine_weights, e.wood_fiber_cosine_frequencies.value = t.wood_fiber_cosine_frequencies, e.wood_fiber_perlin_enable.value = t.wood_fiber_perlin_enable, e.wood_fiber_perlin_bands.value = t.wood_fiber_perlin_bands, e.wood_fiber_perlin_weights.value = t.wood_fiber_perlin_weights, e.wood_fiber_perlin_frequencies.value = t.wood_fiber_perlin_frequencies, e.wood_fiber_perlin_scale_z.value = t.wood_fiber_perlin_scale_z, e.wood_growth_perlin_enable.value = t.wood_growth_perlin_enable, e.wood_growth_perlin_bands.value = t.wood_growth_perlin_bands, e.wood_growth_perlin_weights.value = t.wood_growth_perlin_weights, e.wood_growth_perlin_frequencies.value = t.wood_growth_perlin_frequencies, e.wood_latewood_ratio.value = t.wood_latewood_ratio, e.wood_earlywood_sharpness.value = t.wood_earlywood_sharpness, e.wood_latewood_sharpness.value = t.wood_latewood_sharpness, e.wood_ring_thickness.value = t.wood_ring_thickness, e.wood_earlycolor_perlin_enable.value = t.wood_earlycolor_perlin_enable, e.wood_earlycolor_perlin_bands.value = t.wood_earlycolor_perlin_bands, e.wood_earlycolor_perlin_weights.value = t.wood_earlycolor_perlin_weights, e.wood_earlycolor_perlin_frequencies.value = t.wood_earlycolor_perlin_frequencies, e.wood_early_color.value = t.wood_early_color, e.wood_use_manual_late_color.value = t.wood_use_manual_late_color, e.wood_manual_late_color.value = t.wood_manual_late_color, e.wood_latecolor_perlin_enable.value = t.wood_latecolor_perlin_enable, e.wood_latecolor_perlin_bands.value = t.wood_latecolor_perlin_bands, e.wood_latecolor_perlin_weights.value = t.wood_latecolor_perlin_weights, e.wood_latecolor_perlin_frequencies.value = t.wood_latecolor_perlin_frequencies, e.wood_late_color_power.value = t.wood_late_color_power, e.wood_diffuse_perlin_enable.value = t.wood_diffuse_perlin_enable, e.wood_diffuse_perlin_bands.value = t.wood_diffuse_perlin_bands, e.wood_diffuse_perlin_weights.value = t.wood_diffuse_perlin_weights, e.wood_diffuse_perlin_frequencies.value = t.wood_diffuse_perlin_frequencies, e.wood_diffuse_perlin_scale_z.value = t.wood_diffuse_perlin_scale_z, e.wood_use_pores.value = t.wood_use_pores, e.wood_pore_type.value = t.wood_pore_type, e.wood_pore_radius.value = t.wood_pore_radius, e.wood_pore_cell_dim.value = t.wood_pore_cell_dim, e.wood_pore_color_power.value = t.wood_pore_color_power, e.wood_pore_depth.value = t.wood_pore_depth, e.wood_use_rays.value = t.wood_use_rays, e.wood_ray_color_power.value = t.wood_ray_color_power, e.wood_ray_seg_length_z.value = t.wood_ray_seg_length_z, e.wood_ray_num_slices.value = t.wood_ray_num_slices, e.wood_ray_ellipse_z2x.value = t.wood_ray_ellipse_z2x, e.wood_ray_ellipse_radius_x.value = t.wood_ray_ellipse_radius_x, e.wood_use_latewood_bump.value = t.wood_use_latewood_bump, e.wood_latewood_bump_depth.value = t.wood_latewood_bump_depth, e.wood_use_groove_roughness.value = t.wood_use_groove_roughness, e.wood_groove_roughness.value = t.wood_groove_roughness, e.wood_diffuse_lobe_weight.value = t.wood_diffuse_lobe_weight, n(e, t, "wood_curly_distortion_map"), null != e.wood_curly_distortion_map.value && (e.wood_curly_distortion_map.value.minFilter = s.NearestFilter, e.wood_curly_distortion_map.value.magFilter = s.NearestFilter, e.wood_curly_distortion_enable.value = t.wood_curly_distortion_enable, e.wood_curly_distortion_scale.value = t.wood_curly_distortion_scale);
                  var r = 1 - t.wood_latewood_ratio,
                    o = t.wood_earlywood_sharpness * r,
                    a = t.wood_latewood_sharpness * t.wood_latewood_ratio,
                    l = r + a;
                  e.wood_ring_fraction.value = new s.Vector4(r, o, a, l), e.wood_fall_rise.value = new s.Vector2(r - o, t.wood_latewood_ratio - a);
                  break;
                default:
                  s.warn("Unknown prism type: " + t.prismType)
              }
              t.useTiling && (e.tilingOverallTransform.value = t.tilingOverallTransform, e.TilingMap.value = t.TilingMap, e.TilingMap_texMatrix.value = t.TilingMap_texMatrix, t.hasRoundCorner && (e.TilingNormalMap.value = t.TilingNormalMap, e.TilingNormalMap_texMatrix.value = t.TilingNormalMap_texMatrix), t.useRandomOffset && (e.TilingRandomMap.value = t.TilingRandomMap, e.TilingRandomMap_texMatrix.value = t.TilingRandomMap_texMatrix, e.tilingRandomAxisS.value = t.tilingRandomAxisS, e.tilingRandomAxisT.value = t.tilingRandomAxisT, e.tilingRandomAlignmentOffset.value = t.tilingRandomAlignmentOffset), e.uv2tile.value = t.uv2tile, e.tile2uv.value = t.tile2uv, e.tileAlignOffset.value = t.tileAlignOffset, e.tilingUVTransform.value = t.tilingUVTransform);
              e.envExponentMin.value = t.envExponentMin, e.envExponentMax.value = t.envExponentMax, e.envExponentCount.value = t.envExponentCount
            }(p, i), Pt(p, i)) : "function" == typeof i.refreshUniforms && i.refreshUniforms(p), i.wideLines) {
            var _ = o.geometry.lineWidth;
            void 0 !== i.linewidth && (_ = i.linewidth), p.view_size.value = new s.Vector2(u.innerWidth / _, u.innerHeight / _)
          }
          r.ShadowRender && i.shadowMap && r.ShadowRender.RefreshUniformsShadow(p, i);
          var x = p.cutplanes;
          i.cutplanes && i.cutplanes.length > 0 && x && (x.value = i.cutplanes, x._array && x._array.length != 4 * i.cutplanes && (x._array = void 0)), i.hatchParams && p.hatchParams && (p.hatchParams.value.copy(i.hatchParams), p.hatchTintColor.value.copy(i.hatchTintColor), p.hatchTintIntensity.value = i.hatchTintIntensity),
            function (e) {
              for (var t, n, i, r = 0, o = e.length; r < o; r++) {
                var a = e[r][0];
                if (!1 !== a.needsUpdate && !a.perObject) {
                  var l, c, u = a.type,
                    h = a.value,
                    d = e[r][1];
                  switch (u) {
                    case "1i":
                      D.uniform1i(d, h);
                      break;
                    case "1f":
                      D.uniform1f(d, h);
                      break;
                    case "2f":
                      D.uniform2f(d, h[0], h[1]);
                      break;
                    case "3f":
                      D.uniform3f(d, h[0], h[1], h[2]);
                      break;
                    case "4f":
                      D.uniform4f(d, h[0], h[1], h[2], h[3]);
                      break;
                    case "1iv":
                      D.uniform1iv(d, h);
                      break;
                    case "3iv":
                      D.uniform3iv(d, h);
                      break;
                    case "1fv":
                      D.uniform1fv(d, h);
                      break;
                    case "2fv":
                      D.uniform2fv(d, h);
                      break;
                    case "3fv":
                      D.uniform3fv(d, h);
                      break;
                    case "4fv":
                      D.uniform4fv(d, h);
                      break;
                    case "Matrix3fv":
                      D.uniformMatrix3fv(d, !1, h);
                      break;
                    case "Matrix4fv":
                      D.uniformMatrix4fv(d, !1, h);
                      break;
                    case "i":
                      D.uniform1i(d, h);
                      break;
                    case "f":
                      D.uniform1f(d, h);
                      break;
                    case "v2":
                      D.uniform2f(d, h.x, h.y);
                      break;
                    case "v3":
                      D.uniform3f(d, h.x, h.y, h.z);
                      break;
                    case "v4":
                      D.uniform4f(d, h.x, h.y, h.z, h.w);
                      break;
                    case "c":
                      D.uniform3f(d, h.r, h.g, h.b);
                      break;
                    case "iv1":
                      D.uniform1iv(d, h);
                      break;
                    case "iv":
                      D.uniform3iv(d, h);
                      break;
                    case "fv1":
                      D.uniform1fv(d, h);
                      break;
                    case "fv":
                      D.uniform3fv(d, h);
                      break;
                    case "v2v":
                      for (void 0 === a._array && (a._array = new Float32Array(2 * h.length)), l = 0, c = h.length; l < c; l++) i = 2 * l, a._array[i] = h[l].x, a._array[i + 1] = h[l].y;
                      D.uniform2fv(d, a._array);
                      break;
                    case "v3v":
                      for (void 0 === a._array && (a._array = new Float32Array(3 * h.length)), l = 0, c = h.length; l < c; l++) i = 3 * l, a._array[i] = h[l].x, a._array[i + 1] = h[l].y, a._array[i + 2] = h[l].z;
                      D.uniform3fv(d, a._array);
                      break;
                    case "v4v":
                      for (void 0 === a._array && (a._array = new Float32Array(4 * h.length)), l = 0, c = h.length; l < c; l++) i = 4 * l, a._array[i] = h[l].x, a._array[i + 1] = h[l].y, a._array[i + 2] = h[l].z, a._array[i + 3] = h[l].w;
                      D.uniform4fv(d, a._array);
                      break;
                    case "m3":
                      D.uniformMatrix3fv(d, !1, h.elements);
                      break;
                    case "m3v":
                      for (void 0 === a._array && (a._array = new Float32Array(9 * h.length)), l = 0, c = h.length; l < c; l++) h[l].flattenToArrayOffset(a._array, 9 * l);
                      D.uniformMatrix3fv(d, !1, a._array);
                      break;
                    case "m4":
                      D.uniformMatrix4fv(d, !1, h.elements);
                      break;
                    case "m4v":
                      for (void 0 === a._array && (a._array = new Float32Array(16 * h.length)), l = 0, c = h.length; l < c; l++) h[l].flattenToArrayOffset(a._array, 16 * l);
                      D.uniformMatrix4fv(d, !1, a._array);
                      break;
                    case "t":
                      if (t = h, n = It(), D.uniform1i(d, n), !t) {
                        D.activeTexture(D.TEXTURE0 + n), D.bindTexture(D.TEXTURE_2D, we.__webglTexture);
                        continue
                      }
                      Array.isArray(t.image) && 6 === t.image.length || t instanceof s.CubeTexture ? t.needsUpdate ? Ft(t, n) : (D.activeTexture(D.TEXTURE0 + n), D.bindTexture(D.TEXTURE_CUBE_MAP, t.__webglTextureCube)) : t instanceof s.WebGLRenderTargetCube ? Ut(t, n) : N.setTexture(t, n);
                      break;
                    case "tv":
                      for (void 0 === a._array && (a._array = []), l = 0, c = a.value.length; l < c; l++) a._array[l] = It();
                      for (D.uniform1iv(d, a._array), l = 0, c = a.value.length; l < c; l++) t = a.value[l], n = a._array[l], t && N.setTexture(t, n);
                      break;
                    default:
                      s.warn("THREE.WebGLRenderer: Unknown uniform type: " + u)
                  }
                }
              }
            }(i.uniformsList)
        }
        if (function (e, t, n) {
            S.multiplyMatrices(n.matrixWorldInverse, t.matrixWorld), D.uniformMatrix4fv(e.modelViewMatrix, !1, S.elements), e.normalMatrix && (M.getNormalMatrix(S), D.uniformMatrix3fv(e.normalMatrix, !1, M.elements))
          }(f, o, e), null !== f.modelMatrix && D.uniformMatrix4fv(f.modelMatrix, !1, o.matrixWorld.elements), f.modelId) {
          f.dbId && (h = o.dbId || o.fragId || 0, D.uniform3f(f.dbId, (255 & h) / 255, (h >> 8 & 255) / 255, (h >> 16 & 255) / 255));
          var w = o.modelId;
          D.uniform3f(f.modelId, (255 & w) / 255, (w >> 8 & 255) / 255, (h >> 24 & 255) / 255)
        } else null !== f.dbId && (h = o.dbId || o.fragId || 0, D.uniform3f(f.dbId, (255 & h) / 255, (h >> 8 & 255) / 255, (h >> 16 & 255) / 255));
        if (f.themingColor) {
          var E = o.themingColor;
          E instanceof s.Vector4 ? D.uniform4f(f.themingColor, E.x, E.y, E.z, E.w) : D.uniform4f(f.themingColor, 0, 0, 0, 0)
        }
        return d
      }

      function Ct(e, t) {
        e.diffuse.value = t.color, e.opacity.value = t.opacity
      }

      function Pt(e, t) {
        e.envMap && (e.envMap.value = t.envMap), e.irradianceMap && (e.irradianceMap.value = t.irradianceMap), e.envMapExposure && (e.envMapExposure.value = t.envMapExposure), e.envRotationSin && e.envRotationCos && (e.envRotationSin.value = t.envRotationSin, e.envRotationCos.value = t.envRotationCos)
      }

      function Lt(e, t) {
        e.envMap && (e.envMap.needsUpdate = t), e.irradianceMap && (e.irradianceMap.needsUpdate = t), e.envMapExposure && (e.envMapExposure.needsUpdate = t)
      }

      function Dt(e, t) {
        e.ambientLightColor.needsUpdate = t, e.directionalLightColor.needsUpdate = t, e.directionalLightDirection.needsUpdate = t, e.pointLightColor.needsUpdate = t, e.pointLightPosition.needsUpdate = t, e.pointLightDistance.needsUpdate = t, e.spotLightColor.needsUpdate = t, e.spotLightPosition.needsUpdate = t, e.spotLightDistance.needsUpdate = t, e.spotLightDirection.needsUpdate = t, e.spotLightAngleCos.needsUpdate = t, e.spotLightExponent.needsUpdate = t, e.hemisphereLightSkyColor.needsUpdate = t, e.hemisphereLightGroundColor.needsUpdate = t, e.hemisphereLightDirection.needsUpdate = t
      }

      function It() {
        var e = q;
        return e >= he && s.warn("WebGLRenderer: trying to use " + e + " texture units while this GPU supports only " + he), q += 1, e
      }

      function Rt(e, t, n, i) {
        e[t] = n.r * i, e[t + 1] = n.g * i, e[t + 2] = n.b * i
      }

      function Ot(e) {
        var t, n, i, r, o, a, l, c, u = 0,
          h = 0,
          d = 0,
          f = re,
          p = f.directional.colors,
          m = f.directional.positions,
          g = f.point.colors,
          v = f.point.positions,
          y = f.point.distances,
          b = f.spot.colors,
          _ = f.spot.positions,
          x = f.spot.distances,
          w = f.spot.directions,
          E = f.spot.anglesCos,
          A = f.spot.exponents,
          S = f.hemi.skyColors,
          M = f.hemi.groundColors,
          T = f.hemi.positions,
          C = 0,
          P = 0,
          L = 0,
          D = 0,
          I = 0,
          R = 0,
          O = 0,
          k = 0,
          N = 0,
          F = 0,
          U = 0,
          V = 0;
        for (t = 0, n = e.length; t < n; t++)
          if (!(i = e[t]).onlyShadow)
            if (r = i.color, l = i.intensity, c = i.distance, i instanceof s.AmbientLight) {
              if (!i.visible) continue;
              u += r.r, h += r.g, d += r.b
            } else if (i instanceof s.DirectionalLight) {
          if (I += 1, !i.visible) continue;
          ne.setFromMatrixPosition(i.matrixWorld), te.setFromMatrixPosition(i.target.matrixWorld), ne.sub(te), ne.normalize(), m[N = 3 * C] = ne.x, m[N + 1] = ne.y, m[N + 2] = ne.z, Rt(p, N, r, l), C += 1
        } else if (i instanceof s.PointLight) {
          if (R += 1, !i.visible) continue;
          Rt(g, F = 3 * P, r, l), te.setFromMatrixPosition(i.matrixWorld), v[F] = te.x, v[F + 1] = te.y, v[F + 2] = te.z, y[P] = c, P += 1
        } else if (i instanceof s.SpotLight) {
          if (O += 1, !i.visible) continue;
          Rt(b, U = 3 * L, r, l), te.setFromMatrixPosition(i.matrixWorld), _[U] = te.x, _[U + 1] = te.y, _[U + 2] = te.z, x[L] = c, ne.copy(te), te.setFromMatrixPosition(i.target.matrixWorld), ne.sub(te), ne.normalize(), w[U] = ne.x, w[U + 1] = ne.y, w[U + 2] = ne.z, E[L] = Math.cos(i.angle), A[L] = i.exponent, L += 1
        } else if (i instanceof s.HemisphereLight) {
          if (k += 1, !i.visible) continue;
          ne.setFromMatrixPosition(i.matrixWorld), ne.normalize(), T[V = 3 * D] = ne.x, T[V + 1] = ne.y, T[V + 2] = ne.z, o = i.color, a = i.groundColor, Rt(S, V, o, l), Rt(M, V, a, l), D += 1
        }
        for (t = 3 * C, n = Math.max(p.length, 3 * I); t < n; t++) p[t] = 0;
        for (t = 3 * P, n = Math.max(g.length, 3 * R); t < n; t++) g[t] = 0;
        for (t = 3 * L, n = Math.max(b.length, 3 * O); t < n; t++) b[t] = 0;
        for (t = 3 * D, n = Math.max(S.length, 3 * k); t < n; t++) S[t] = 0;
        for (t = 3 * D, n = Math.max(M.length, 3 * k); t < n; t++) M[t] = 0;
        f.directional.length = C, f.point.length = P, f.spot.length = L, f.hemi.length = D, f.ambient[0] = u, f.ambient[1] = h, f.ambient[2] = d
      }

      function kt(e, t, n) {
        var i;
        n ? (D.texParameteri(e, D.TEXTURE_WRAP_S, Ht(t.wrapS)), D.texParameteri(e, D.TEXTURE_WRAP_T, Ht(t.wrapT)), D.texParameteri(e, D.TEXTURE_MAG_FILTER, Ht(t.magFilter)), D.texParameteri(e, D.TEXTURE_MIN_FILTER, Ht(t.minFilter))) : (D.texParameteri(e, D.TEXTURE_WRAP_S, D.CLAMP_TO_EDGE), D.texParameteri(e, D.TEXTURE_WRAP_T, D.CLAMP_TO_EDGE), t.wrapS === s.ClampToEdgeWrapping && t.wrapT === s.ClampToEdgeWrapping || s.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping. ( " + t.sourceFile + " )"), D.texParameteri(e, D.TEXTURE_MAG_FILTER, zt(t.magFilter)), D.texParameteri(e, D.TEXTURE_MIN_FILTER, zt(t.minFilter)), t.minFilter !== s.NearestFilter && t.minFilter !== s.LinearFilter && s.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter. ( " + t.sourceFile + " )")), (i = se.get("EXT_texture_filter_anisotropic")) && t.type !== s.FloatType && t.type !== s.HalfFloatType && (t.anisotropy > 1 || t.__oldAnisotropy) && (D.texParameterf(e, i.TEXTURE_MAX_ANISOTROPY_EXT, Math.min(t.anisotropy, N.getMaxAnisotropy())), t.__oldAnisotropy = t.anisotropy)
      }

      function Nt(e, t) {
        if (e.width <= t && e.height <= t) return e;
        var n = Math.max(e.width, e.height),
          i = Math.floor(e.width * t / n),
          r = Math.floor(e.height * t / n),
          o = h.createElement("canvas");
        return o.width = i, o.height = r, o.getContext("2d").drawImage(e, 0, 0, e.width, e.height, 0, 0, i, r), o
      }

      function Ft(e, t) {
        if (6 === e.image.length)
          if (e.needsUpdate) {
            e.__webglTextureCube || (e.addEventListener("dispose", Re), e.__webglTextureCube = D.createTexture(), N.info.memory.textures++), D.activeTexture(D.TEXTURE0 + t), D.bindTexture(D.TEXTURE_CUBE_MAP, e.__webglTextureCube), D.pixelStorei(D.UNPACK_FLIP_Y_WEBGL, e.flipY);
            var n, i = e instanceof s.CompressedTexture,
              r = e.image[0] instanceof s.DataTexture,
              o = [];
            for (n = 0; n < 6; n++) !N.autoScaleCubemaps || i || r ? o[n] = r ? e.image[n].image : e.image[n] : o[n] = Nt(e.image[n], pe);
            var a = o[0],
              l = s.Math.isPowerOfTwo(a.width) && s.Math.isPowerOfTwo(a.height),
              c = Ht(e.format),
              u = Ht(e.type);
            for (kt(D.TEXTURE_CUBE_MAP, e, l), n = 0; n < 6; n++)
              if (i)
                for (var h, d = o[n].mipmaps, f = 0, p = d.length; f < p; f++) h = d[f], e.format !== s.RGBAFormat && e.format !== s.RGBFormat ? Se().indexOf(c) > -1 ? D.compressedTexImage2D(D.TEXTURE_CUBE_MAP_POSITIVE_X + n, f, c, h.width, h.height, 0, h.data) : s.warn("Attempt to load unsupported compressed texture format") : D.texImage2D(D.TEXTURE_CUBE_MAP_POSITIVE_X + n, f, c, h.width, h.height, 0, c, u, h.data);
              else r ? D.texImage2D(D.TEXTURE_CUBE_MAP_POSITIVE_X + n, 0, c, o[n].width, o[n].height, 0, c, u, o[n].data) : D.texImage2D(D.TEXTURE_CUBE_MAP_POSITIVE_X + n, 0, c, c, u, o[n]);
            e.generateMipmaps && l && D.generateMipmap(D.TEXTURE_CUBE_MAP), e.needsUpdate = !1, e.onUpdate && e.onUpdate()
          } else D.activeTexture(D.TEXTURE0 + t), D.bindTexture(D.TEXTURE_CUBE_MAP, e.__webglTextureCube)
      }

      function Ut(e, t) {
        D.activeTexture(D.TEXTURE0 + t), D.bindTexture(D.TEXTURE_CUBE_MAP, e.__webglTexture)
      }

      function Vt(e) {
        var t = I ? D.COLOR_ATTACHMENT0 : R.COLOR_ATTACHMENT0_WEBGL,
          n = [t];
        for (xe = 1; xe < e.length; xe++) n.push(t + xe);
        I ? D.drawBuffers(n) : R.drawBuffersWEBGL(n)
      }

      function Bt(e) {
        var t = s.Math.isPowerOfTwo(e.width) && s.Math.isPowerOfTwo(e.height),
          n = Ht(e.format),
          i = Ht(e.type),
          r = Gt(e.format, e.type);
        e.addEventListener("dispose", Oe), e.__webglTexture = D.createTexture(), N.info.memory.textures++, D.bindTexture(D.TEXTURE_2D, e.__webglTexture), kt(D.TEXTURE_2D, e, t), D.texImage2D(D.TEXTURE_2D, 0, r, e.width, e.height, 0, n, i, null), t && e.generateMipmaps && D.generateMipmap(D.TEXTURE_2D)
      }

      function zt(e) {
        return e === s.NearestFilter || e === s.NearestMipMapNearestFilter || e === s.NearestMipMapLinearFilter ? D.NEAREST : D.LINEAR
      }

      function Gt(e, t) {
        if (I) {
          if (e === s.RGBFormat) switch (t) {
            case s.UnsignedByteType:
              return D.RGB8;
            case s.FloatType:
              return D.RGB32F;
            case s.HalfFloatType:
              return D.RGB16F
          } else if (e === s.RGBAFormat) switch (t) {
            case s.UnsignedByteType:
              return D.RGBA8;
            case s.FloatType:
              return D.RGBA32F;
            case s.HalfFloatType:
              return D.RGBA16F
          } else if (e === s.LuminanceFormat) switch (t) {
            case s.UnsignedByteType:
              return D.LUMINANCE
          }
          console.error("failed to map texture format and type to internalformat")
        }
        return Ht(e)
      }

      function Ht(e) {
        var t;
        if (e === s.RepeatWrapping) return D.REPEAT;
        if (e === s.ClampToEdgeWrapping) return D.CLAMP_TO_EDGE;
        if (e === s.MirroredRepeatWrapping) return D.MIRRORED_REPEAT;
        if (e === s.NearestFilter) return D.NEAREST;
        if (e === s.NearestMipMapNearestFilter) return D.NEAREST_MIPMAP_NEAREST;
        if (e === s.NearestMipMapLinearFilter) return D.NEAREST_MIPMAP_LINEAR;
        if (e === s.LinearFilter) return D.LINEAR;
        if (e === s.LinearMipMapNearestFilter) return D.LINEAR_MIPMAP_NEAREST;
        if (e === s.LinearMipMapLinearFilter) return D.LINEAR_MIPMAP_LINEAR;
        if (e === s.UnsignedByteType) return D.UNSIGNED_BYTE;
        if (e === s.UnsignedShort4444Type) return D.UNSIGNED_SHORT_4_4_4_4;
        if (e === s.UnsignedShort5551Type) return D.UNSIGNED_SHORT_5_5_5_1;
        if (e === s.UnsignedShort565Type) return D.UNSIGNED_SHORT_5_6_5;
        if (e === s.ByteType) return D.BYTE;
        if (e === s.ShortType) return D.SHORT;
        if (e === s.UnsignedShortType) return D.UNSIGNED_SHORT;
        if (e === s.IntType) return D.INT;
        if (e === s.UnsignedIntType) return D.UNSIGNED_INT;
        if (e === s.FloatType) return D.FLOAT;
        if (e === s.HalfFloatType) return I ? D.HALF_FLOAT : 36193;
        if (e === s.AlphaFormat) return D.ALPHA;
        if (e === s.RGBFormat) return D.RGB;
        if (e === s.RGBAFormat) return D.RGBA;
        if (e === s.LuminanceFormat) return D.LUMINANCE;
        if (e === s.LuminanceAlphaFormat) return D.LUMINANCE_ALPHA;
        if (e === s.AddEquation) return D.FUNC_ADD;
        if (e === s.SubtractEquation) return D.FUNC_SUBTRACT;
        if (e === s.ReverseSubtractEquation) return D.FUNC_REVERSE_SUBTRACT;
        if (e === s.ZeroFactor) return D.ZERO;
        if (e === s.OneFactor) return D.ONE;
        if (e === s.SrcColorFactor) return D.SRC_COLOR;
        if (e === s.OneMinusSrcColorFactor) return D.ONE_MINUS_SRC_COLOR;
        if (e === s.SrcAlphaFactor) return D.SRC_ALPHA;
        if (e === s.OneMinusSrcAlphaFactor) return D.ONE_MINUS_SRC_ALPHA;
        if (e === s.DstAlphaFactor) return D.DST_ALPHA;
        if (e === s.OneMinusDstAlphaFactor) return D.ONE_MINUS_DST_ALPHA;
        if (e === s.DstColorFactor) return D.DST_COLOR;
        if (e === s.OneMinusDstColorFactor) return D.ONE_MINUS_DST_COLOR;
        if (e === s.SrcAlphaSaturateFactor) return D.SRC_ALPHA_SATURATE;
        if (null !== (t = se.get("WEBGL_compressed_texture_s3tc"))) {
          if (e === s.RGB_S3TC_DXT1_Format) return t.COMPRESSED_RGB_S3TC_DXT1_EXT;
          if (e === s.RGBA_S3TC_DXT1_Format) return t.COMPRESSED_RGBA_S3TC_DXT1_EXT;
          if (e === s.RGBA_S3TC_DXT3_Format) return t.COMPRESSED_RGBA_S3TC_DXT3_EXT;
          if (e === s.RGBA_S3TC_DXT5_Format) return t.COMPRESSED_RGBA_S3TC_DXT5_EXT
        }
        if (null !== (t = se.get("WEBGL_compressed_texture_pvrtc"))) {
          if (e === s.RGB_PVRTC_4BPPV1_Format) return t.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;
          if (e === s.RGB_PVRTC_2BPPV1_Format) return t.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;
          if (e === s.RGBA_PVRTC_4BPPV1_Format) return t.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;
          if (e === s.RGBA_PVRTC_2BPPV1_Format) return t.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG
        }
        if (null !== (t = se.get("EXT_blend_minmax"))) {
          if (e === s.MinEquation) return t.MIN_EXT;
          if (e === s.MaxEquation) return t.MAX_EXT
        }
        return 0
      }
      this.setFaceCulling = function (e, t) {
        e === s.CullFaceNone ? D.disable(D.CULL_FACE) : (t === s.FrontFaceDirectionCW ? D.frontFace(D.CW) : D.frontFace(D.CCW), e === s.CullFaceBack ? D.cullFace(D.BACK) : e === s.CullFaceFront ? D.cullFace(D.FRONT) : D.cullFace(D.FRONT_AND_BACK), D.enable(D.CULL_FACE))
      }, this.setMaterialFaces = function (e) {
        ae.setDoubleSided(e.side === s.DoubleSide), ae.setFlipSided(e.side === s.BackSide)
      }, this.uploadTexture = function (e) {
        void 0 === e.__webglInit && (e.__webglInit = !0, e.addEventListener("dispose", Re), e.__webglTexture = D.createTexture(), N.info.memory.textures++), D.bindTexture(D.TEXTURE_2D, e.__webglTexture), D.pixelStorei(D.UNPACK_FLIP_Y_WEBGL, e.flipY), D.pixelStorei(D.UNPACK_PREMULTIPLY_ALPHA_WEBGL, e.premultiplyAlpha), D.pixelStorei(D.UNPACK_ALIGNMENT, e.unpackAlignment), e.image = Nt(e.image, fe);
        var t = e.image,
          n = s.Math.isPowerOfTwo(t.width) && s.Math.isPowerOfTwo(t.height),
          i = Ht(e.format),
          r = Ht(e.type),
          o = Gt(e.format, e.type);
        kt(D.TEXTURE_2D, e, n);
        var a, l, c, u = e.mipmaps;
        if (e instanceof s.DataTexture)
          if (u.length > 0 && n) {
            for (l = 0, c = u.length; l < c; l++) a = u[l], D.texImage2D(D.TEXTURE_2D, l, o, a.width, a.height, 0, i, r, a.data);
            e.generateMipmaps = !1
          } else D.texImage2D(D.TEXTURE_2D, 0, o, t.width, t.height, 0, i, r, t.data);
        else if (e instanceof s.CompressedTexture) {
          for (l = 0, c = u.length; l < c; l++) a = u[l], e.format !== s.RGBAFormat && e.format !== s.RGBFormat ? Se().indexOf(i) > -1 ? D.compressedTexImage2D(D.TEXTURE_2D, l, o, a.width, a.height, 0, a.data) : s.warn("Attempt to load unsupported compressed texture format") : D.texImage2D(D.TEXTURE_2D, l, o, a.width, a.height, 0, i, r, a.data);
          if (u.length > 1 && Se().indexOf(i) > -1)
            for (var h, d = a.width >> 1, f = a.height >> 1, p = u.length; d >= 1 || f >= 1;) h = 4 == a.width && 4 == a.height ? a.data : new DataView(a.data.buffer, a.data.byteOffset, a.data.byteLength * (Math.max(d, 4) * Math.max(f, 4)) / (a.width * a.height)), D.compressedTexImage2D(D.TEXTURE_2D, p, o, Math.max(d, 1), Math.max(f, 1), 0, h), d >>= 1, f >>= 1, ++p
        } else if (u.length > 0 && n) {
          for (l = 0, c = u.length; l < c; l++) D.texImage2D(D.TEXTURE_2D, l, o, i, r, u[l]);
          e.generateMipmaps = !1
        } else D.texImage2D(D.TEXTURE_2D, 0, o, i, r, e.image);
        e.generateMipmaps && n && D.generateMipmap(D.TEXTURE_2D), e.needsUpdate = !1, e.onUpdate && e.onUpdate()
      }, this.setTexture = function (e, t) {
        D.activeTexture(D.TEXTURE0 + t), e.needsUpdate ? N.uploadTexture(e) : e.__webglTexture ? D.bindTexture(D.TEXTURE_2D, e.__webglTexture) : D.bindTexture(D.TEXTURE_2D, we.__webglTexture)
      }, N.uploadTexture(we), this.initFrameBufferMRT = function (e, t) {
        var n, i = e[0],
          r = !1;
        i && !i.__webglFramebuffer && (void 0 === i.depthBuffer && (i.depthBuffer = !0), void 0 === i.stencilBuffer && (i.stencilBuffer = !0), i.__webglFramebuffer = D.createFramebuffer(), D.bindFramebuffer(D.FRAMEBUFFER, i.__webglFramebuffer), i.shareDepthFrom ? n = i.__webglRenderbuffer = i.shareDepthFrom.__webglRenderbuffer : (n = i.__webglRenderbuffer, i.depthBuffer && !i.stencilBuffer ? (n || (n = i.__webglRenderbuffer = D.createRenderbuffer()), D.bindRenderbuffer(D.RENDERBUFFER, n), D.renderbufferStorage(D.RENDERBUFFER, I ? D.DEPTH_COMPONENT32F : D.DEPTH_COMPONENT16, i.width, i.height)) : i.depthBuffer && i.stencilBuffer && (n || (n = i.__webglRenderbuffer = D.createRenderbuffer()), D.bindRenderbuffer(D.RENDERBUFFER, n), D.renderbufferStorage(D.RENDERBUFFER, I ? D.DEPTH24_STENCIL8 : D.DEPTH_STENCIL, i.width, i.height))), i.depthBuffer && !i.stencilBuffer ? D.framebufferRenderbuffer(D.FRAMEBUFFER, D.DEPTH_ATTACHMENT, D.RENDERBUFFER, n) : i.depthBuffer && i.stencilBuffer && D.framebufferRenderbuffer(D.FRAMEBUFFER, D.DEPTH_STENCIL_ATTACHMENT, D.RENDERBUFFER, n), r = !0);
        var o = V;
        if (D.bindFramebuffer(D.FRAMEBUFFER, i.__webglFramebuffer), function (e, t) {
            var n = e.__webglBoundBuffers;
            if (!n) return !0;
            if (n.length !== t.length) return !0;
            for (var i = 0; i < t.length; i++)
              if (t[i] !== n[i]) return !0;
            return !1
          }(i, e)) {
          var a;
          for (a = 0; a < e.length; a++) {
            var l = e[a];
            l && !l.__webglTexture && Bt(l), D.framebufferTexture2D(D.FRAMEBUFFER, D.COLOR_ATTACHMENT0 + a, D.TEXTURE_2D, l && l.__webglTexture, 0)
          }
          a = e.length;
          for (var c = i.__webglBoundBuffers && i.__webglBoundBuffers.length || a; a < c;) D.framebufferTexture2D(D.FRAMEBUFFER, D.COLOR_ATTACHMENT0 + a, D.TEXTURE_2D, null, 0), a++;
          i.__webglBoundBuffers = e.slice()
        }
        if (this.supportsMRT() && Vt(e), t) {
          var u = D.checkFramebufferStatus(D.FRAMEBUFFER);
          u !== D.FRAMEBUFFER_COMPLETE && (s.log("Can't use multiple render targets. Falling back to two passes. " + u), o === i.__webglFramebuffer && (o = V = null), D.bindFramebuffer(D.FRAMEBUFFER, o), D.deleteFramebuffer(i.__webglFramebuffer), delete i.__webglFramebuffer, t = !1)
        }
        return D.bindFramebuffer(D.FRAMEBUFFER, o), r && (D.bindTexture(D.TEXTURE_2D, null), D.bindRenderbuffer(D.RENDERBUFFER, null), D.bindFramebuffer(D.FRAMEBUFFER, null)), t
      }, this.setRenderTarget = function (e) {
        var t, n, i, r, o, a;
        if (Array.isArray(e)) this.initFrameBufferMRT(e), (t = e[0]).initForMRT = !0;
        else if (e) {
          var s = e.__webglFramebuffer;
          s && V === s && !e.initForMRT || this.initFrameBufferMRT([e]), (t = e).initForMRT = !1
        }!t || Ce ? (i = K, r = Q, o = X, a = Y) : (i = t.width, r = t.height, o = 0, a = 0), (n = t ? t.__webglFramebuffer : null) !== V && (D.bindFramebuffer(D.FRAMEBUFFER, n), D.viewport(o, a, i, r), V = n)
      }, this.verifyMRTWorks = function (e) {
        return !!this.supportsMRT() && this.initFrameBufferMRT(e, !0)
      }, this.readRenderTargetPixels = function (e, t, n, i, r, o) {
        if (e instanceof s.WebGLRenderTarget) {
          if (e.__webglFramebuffer) {
            if (e.format !== s.RGBAFormat && e.format !== s.RGBFormat || e.type !== s.UnsignedByteType) return void s.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not a readable format.");
            var a = !1;
            e.__webglFramebuffer !== V && (D.bindFramebuffer(D.FRAMEBUFFER, e.__webglFramebuffer), a = !0), e.canReadPixels || D.checkFramebufferStatus(D.FRAMEBUFFER) === D.FRAMEBUFFER_COMPLETE ? D.readPixels(t, n, i, r, D.RGBA, D.UNSIGNED_BYTE, o) : s.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete."), a && D.bindFramebuffer(D.FRAMEBUFFER, V)
          }
        } else s.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.")
      }
    }
}, function (e, t, n) {
  "use strict";
  n.r(t), n.d(t, "createGroundShape", (function () {
    return M
  })), n.d(t, "setGroundShapeTransform", (function () {
    return T
  })), n.d(t, "GroundShadow", (function () {
    return C
  }));
  var i, r, o, a = n(36),
    s = n(46),
    l = n(343),
    c = n.n(l),
    u = n(344),
    h = n.n(u),
    d = n(63),
    f = n.n(d),
    p = n(345),
    m = n.n(p),
    g = n(346),
    v = n.n(g),
    y = n(347),
    b = n.n(y),
    _ = n(31),
    x = n(0),
    w = {
      uniforms: {
        cutplanes: {
          type: "v4v",
          value: []
        }
      },
      vertexShader: c.a,
      fragmentShader: h.a
    },
    E = {
      uniforms: {
        tDepth: {
          type: "t",
          value: null
        },
        worldSize: {
          type: "v3",
          value: new x.Vector3(1, 1, 1)
        }
      },
      defines: {},
      vertexShader: f.a,
      fragmentShader: m.a
    },
    A = {
      uniforms: {
        tDepth: {
          type: "t",
          value: null
        }
      },
      defines: {},
      vertexShader: f.a,
      fragmentShader: v.a
    },
    S = {
      uniforms: {
        tDepth: {
          type: "t",
          value: null
        },
        uShadowColor: {
          type: "v4",
          value: new x.Vector4(0, 0, 0, 1)
        }
      },
      vertexShader: f.a,
      fragmentShader: b.a
    };

  function M(e) {
    var t = new x.PlaneBufferGeometry(1, 1);
    if (t.attributes.index.array.reverse) t.attributes.index.array.reverse();
    else
      for (var n, i = t.attributes.index.array, r = Math.floor(i.length / 2), o = 0, a = i.length; o < r; ++o) n = i[o], i[o] = i[a - 1 - o], i[a - 1 - o] = n;
    return new x.Mesh(t, e)
  }

  function T(e, t, n, a, s) {
    i || (i = new x.Matrix4), r || (r = new x.Vector3), o || (o = new x.Vector3), r.subVectors(t, a), i.lookAt(r, t, s), o.copy(a).multiplyScalar(-.5 * n.y).add(t), e.position.copy(o), e.rotation.setFromRotationMatrix(i), e.scale.set(n.z, n.x, n.y)
  }

  function C(e, t) {
    var n, i, r, o, l, c, u, h, d, f, p, m, g, v, y, b, C, P, L, D = e,
      I = !1,
      R = !0,
      O = _.GroundFlags.GROUND_FINISHED,
      k = {
        texSize: 64,
        pixScale: 1,
        blurRadius: 7,
        debug: !1
      };
    if (this.setTransform = (m = new x.Vector3(0, 0, 0), g = new x.Vector3(0, 0, 0), v = new x.Vector3(0, 0, 0), y = new x.Vector3(0, 0, 0), function (e, t, i, o) {
        e.equals(m) && t.equals(g) && i.equals(v) && o.equals(y) || (m.copy(e), g.copy(t), v.copy(i), y.copy(o), this.setDirty(), n.left = -t.z / 2, n.right = t.z / 2, n.top = t.x / 2, n.bottom = -t.x / 2, n.near = 1, n.far = t.y + n.near, n.updateProjectionMatrix(), T(r, e, t, i, o), n.position.addVectors(e, i.clone().multiplyScalar(-t.y / 2 - n.near)), o && n.up.set(o.x, o.y, o.z), n.lookAt(e), k.debug && (p.position.set(e.x, e.y, e.z), p.rotation.set(n.rotation.x, n.rotation.y, n.rotation.z), p.scale.set(t.z, t.x, t.y)), f.uniforms.worldSize.value.copy(t))
      }), this.renderIntoShadow = function (e) {
        if (!e.overrideMaterial || !e.overrideMaterial.transparent) {
          var t = e.overrideMaterial;
          e.overrideMaterial = c, D.render(e, n, o, !1), e.overrideMaterial = t
        }
      }, this.prepareGroundShadow = (C = 0, P = 0, L = 0, function (e, t, n, i) {
        if (!this.enabled || e.isEmpty()) return O = _.GroundFlags.GROUND_FINISHED, n;
        if (b != e.getGeomScenes() && (R = !0), R) this.clear(), R = !1, b = e.getGeomScenes(), C = b.length, P = 0, L = t ? Math.max(Math.ceil(C / 100), t) : C;
        else {
          if (O === _.GroundFlags.GROUND_RENDERED || O === _.GroundFlags.GROUND_FINISHED) return O = _.GroundFlags.GROUND_FINISHED, n;
          0 === t && (L = C)
        }
        var r, o, a;
        n && (r = performance.now(), o = (i = void 0 === i ? 1 : i) * n);
        for (var s = 0; s < L && P < C;) {
          var l = b[P++];
          if (l && (s++, l.forceVisible = !0, this.renderIntoShadow(l), l.forceVisible = !1, n)) {
            var c = performance.now() - r;
            if (o < c) {
              O = _.GroundFlags.GROUND_UNFINISHED, a = n - c;
              break
            }
          }
        }
        return P < C && (O = _.GroundFlags.GROUND_UNFINISHED, a = n ? n - performance.now() + r : 1), void 0 !== a ? a : (this.postprocess(), O = _.GroundFlags.GROUND_RENDERED, n ? n - performance.now() + r : 1)
      }), this.renderShadow = function (e, t) {
        I && (t ? D.render(i, e, t, !1) : D.render(i, e))
      }, this.postprocess = function () {
        d.render(D, l, o), h.render(D, o, l), I = !0
      }, this.clear = function () {
        var e = D.getClearColor().getHex(),
          t = D.getClearAlpha();
        D.setClearColor(0, 0), D.clearTarget(o, !0, !0, !1), D.setClearColor(e, t), D.clearBlend(), I = !1
      }, this.setColor = function (e) {
        u.uniforms.uShadowColor.value.x = e.r, u.uniforms.uShadowColor.value.y = e.g, u.uniforms.uShadowColor.value.z = e.b
      }, this.getColor = function () {
        return new x.Color(u.uniforms.uShadowColor.value.x, u.uniforms.uShadowColor.value.y, u.uniforms.uShadowColor.value.z)
      }, this.setAlpha = function (e) {
        u.uniforms.uShadowColor.value.w = e
      }, this.getAlpha = function () {
        return u.uniforms.uShadowColor.value.w
      }, this.isValid = function () {
        return I
      }, this.getStatus = function () {
        return O
      }, this.setDirty = function () {
        R = !0, O = _.GroundFlags.GROUND_UNFINISHED
      }, this.getDepthMaterial = function () {
        return c
      }, t)
      for (var N in k) k[N] = t[N] || k[N];
    i = new x.Scene, n = new x.OrthographicCamera, (o = new x.WebGLRenderTarget(k.texSize, k.texSize, {
      minFilter: x.LinearFilter,
      magFilter: x.LinearFilter,
      format: x.RGBAFormat,
      stencilBuffer: !1
    })).generateMipmaps = !1, (l = new x.WebGLRenderTarget(k.texSize, k.texSize, {
      minFilter: x.LinearFilter,
      magFilter: x.LinearFilter,
      format: x.RGBAFormat,
      stencilBuffer: !1
    })).generateMipmaps = !1, (c = Object(a.createShaderMaterial)(w)).side = x.DoubleSide, c.blending = x.NoBlending, h = new s.ShaderPass(A, "tDepth"), d = new s.ShaderPass(A, "tDepth"), f = new s.ShaderPass(E, "tDepth"), h.material.defines.KERNEL_SCALE = d.material.defines.KERNEL_SCALE = (k.pixScale / k.texSize).toFixed(4), h.material.defines.KERNEL_RADIUS = d.material.defines.KERNEL_RADIUS = k.blurRadius.toFixed(2), f.material.blending = h.material.blending = d.material.blending = x.NoBlending, f.material.depthWrite = h.material.depthWrite = d.material.depthWrite = !1, f.material.depthTest = h.material.depthTest = d.material.depthTest = !1, h.material.defines.HORIZONTAL = 1, (u = Object(a.createShaderMaterial)(S)).uniforms.tDepth.value = o, u.depthWrite = !1, u.transparent = !0, r = M(u), i.add(r), k.debug && (p = new x.Mesh(new x.BoxGeometry(1, 1, 1), new x.MeshBasicMaterial({
      color: 65280,
      wireframe: !0
    })), i.add(p)), this.setTransform(new x.Vector3(0, 0, 0), new x.Vector3(1, 1, 1), new x.Vector3(0, 1, 0), x.Object3D.DefaultUp)
  }
  C.prototype.constructor = C
}, function (e, t, n) {
  "use strict";
  n.r(t), n.d(t, "SAOShader", (function () {
    return c
  }));
  var i = n(0),
    r = n(30),
    o = n(63),
    a = n.n(o),
    s = n(383),
    l = n.n(s),
    c = {
      uniforms: i.UniformsUtils.merge([r.ShaderChunks.DepthTextureUniforms, {
        size: {
          type: "v2",
          value: new i.Vector2(512, 512)
        },
        resolution: {
          type: "v2",
          value: new i.Vector2(1 / 512, 1 / 512)
        },
        cameraNear: {
          type: "f",
          value: 1
        },
        cameraFar: {
          type: "f",
          value: 100
        },
        radius: {
          type: "f",
          value: 12
        },
        bias: {
          type: "f",
          value: .1
        },
        projScale: {
          type: "f",
          value: 500
        },
        intensity: {
          type: "f",
          value: 1
        },
        tDepth_mip1: {
          type: "t",
          value: null
        },
        tDepth_mip2: {
          type: "t",
          value: null
        },
        tDepth_mip3: {
          type: "t",
          value: null
        },
        tDepth_mip4: {
          type: "t",
          value: null
        },
        tDepth_mip5: {
          type: "t",
          value: null
        }
      }]),
      vertexShader: a.a,
      fragmentShader: l.a
    }
}, function (e, t, n) {
  "use strict";

  function i(e) {
    return function (e) {
      if (Array.isArray(e)) {
        for (var t = 0, n = new Array(e.length); t < e.length; t++) n[t] = e[t];
        return n
      }
    }(e) || function (e) {
      if (Symbol.iterator in Object(e) || "[object Arguments]" === Object.prototype.toString.call(e)) return Array.from(e)
    }(e) || function () {
      throw new TypeError("Invalid attempt to spread non-iterable instance")
    }()
  }

  function r(e, t) {
    return function (e) {
      if (Array.isArray(e)) return e
    }(e) || function (e, t) {
      if (!(Symbol.iterator in Object(e) || "[object Arguments]" === Object.prototype.toString.call(e))) return;
      var n = [],
        i = !0,
        r = !1,
        o = void 0;
      try {
        for (var a, s = e[Symbol.iterator](); !(i = (a = s.next()).done) && (n.push(a.value), !t || n.length !== t); i = !0);
      } catch (e) {
        r = !0, o = e
      } finally {
        try {
          i || null == s.return || s.return()
        } finally {
          if (r) throw o
        }
      }
      return n
    }(e, t) || function () {
      throw new TypeError("Invalid attempt to destructure non-iterable instance")
    }()
  }

  function o(e, t) {
    for (var n = 0; n < t.length; n++) {
      var i = t[n];
      i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(e, i.key, i)
    }
  }
  n.r(t), n.d(t, "GlobalManager", (function () {
    return s
  }));
  var a = Autodesk.Viewing,
    s = function () {
      function e() {
        ! function (e, t) {
          if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
        }(this, e), this._window = {
          inner: null,
          registeredEventListeners: new Map
        }, this._document = {
          inner: null,
          registeredEventListeners: new Map
        }, this._window.inner = a.getGlobal(), this._document.inner = this._window.inner.document, this.addWindowEventListener = c.bind(this._window), this.removeWindowEventListener = u.bind(this._window), this.addDocumentEventListener = c.bind(this._document), this.removeDocumentEventListener = u.bind(this._document)
      }
      var t, n, s;
      return t = e, (n = [{
        key: "getWindow",
        value: function () {
          return this._window.inner
        }
      }, {
        key: "getDocument",
        value: function () {
          return this._document.inner
        }
      }, {
        key: "setWindow",
        value: function (e) {
          if (e && e !== this._window.inner) {
            var t = !0,
              n = !1,
              o = void 0;
            try {
              for (var a, s = this._window.registeredEventListeners.entries()[Symbol.iterator](); !(t = (a = s.next()).done); t = !0) {
                var l = r(a.value, 2),
                  c = l[0],
                  u = l[1],
                  h = !0,
                  d = !1,
                  f = void 0;
                try {
                  for (var p, m = u.entries()[Symbol.iterator](); !(h = (p = m.next()).done); h = !0) {
                    var g, v = r(p.value, 2),
                      y = v[0],
                      b = v[1];
                    e.addEventListener.apply(e, [c, y].concat(i(b))), (g = this._window.inner).removeEventListener.apply(g, [c, y].concat(i(b)))
                  }
                } catch (e) {
                  d = !0, f = e
                } finally {
                  try {
                    h || null == m.return || m.return()
                  } finally {
                    if (d) throw f
                  }
                }
              }
            } catch (e) {
              n = !0, o = e
            } finally {
              try {
                t || null == s.return || s.return()
              } finally {
                if (n) throw o
              }
            }
            var _ = !0,
              x = !1,
              w = void 0;
            try {
              for (var E, A = this._document.registeredEventListeners.entries()[Symbol.iterator](); !(_ = (E = A.next()).done); _ = !0) {
                var S = r(E.value, 2),
                  M = S[0],
                  T = S[1],
                  C = !0,
                  P = !1,
                  L = void 0;
                try {
                  for (var D, I = T.entries()[Symbol.iterator](); !(C = (D = I.next()).done); C = !0) {
                    var R, O, k = r(D.value, 2),
                      N = k[0],
                      F = k[1];
                    (R = e.document).addEventListener.apply(R, [M, N].concat(i(F))), (O = this._document.inner).removeEventListener.apply(O, [M, N].concat(i(F)))
                  }
                } catch (e) {
                  P = !0, L = e
                } finally {
                  try {
                    C || null == I.return || I.return()
                  } finally {
                    if (P) throw L
                  }
                }
              }
            } catch (e) {
              x = !0, w = e
            } finally {
              try {
                _ || null == A.return || A.return()
              } finally {
                if (x) throw w
              }
            }
            this._window.inner = e, this._document.inner = e.document
          }
        }
      }]) && o(t.prototype, n), s && o(t, s), e
    }();

  function l(e) {
    return !!e.opener
  }

  function c(e, t) {
    for (var n, i = arguments.length, r = new Array(i > 2 ? i - 2 : 0), o = 2; o < i; o++) r[o - 2] = arguments[o];
    l(this.inner) || (this.registeredEventListeners.has(e) ? this.registeredEventListeners.get(e).set(t, r) : this.registeredEventListeners.set(e, new Map([
      [t, r]
    ]))), (n = this.inner).addEventListener.apply(n, [e, t].concat(r))
  }

  function u(e, t) {
    var n;
    l(this.inner) || this.registeredEventListeners.has(e) && this.registeredEventListeners.get(e).has(t) && this.registeredEventListeners.get(e).delete(t);
    for (var i = arguments.length, r = new Array(i > 2 ? i - 2 : 0), o = 2; o < i; o++) r[o - 2] = arguments[o];
    (n = this.inner).removeEventListener.apply(n, [e, t].concat(r))
  }
}, function (e, t, n) {
  "use strict";
  n.r(t), n.d(t, "DDSLoader", (function () {
    return r
  }));
  var i = n(0),
    r = function e() {
      this._parser = e.parse
    };
  r.prototype = Object.create(i.CompressedTextureLoader.prototype), r.prototype.constructor = r, r.parse = function (e, t) {
    var n = {
      mipmaps: [],
      width: 0,
      height: 0,
      format: null,
      mipmapCount: 1
    };

    function r(e) {
      return e.charCodeAt(0) + (e.charCodeAt(1) << 8) + (e.charCodeAt(2) << 16) + (e.charCodeAt(3) << 24)
    }

    function o(e, t, n, i) {
      for (var r = n * i * 4, o = new Uint8Array(e, t, r), a = new Uint8Array(r), s = 0, l = 0, c = 0; c < i; c++)
        for (var u = 0; u < n; u++) {
          var h = o[l],
            d = o[++l],
            f = o[++l],
            p = o[++l];
          l++, a[s] = f, a[++s] = d, a[++s] = h, a[++s] = p, s++
        }
      return a
    }
    var a = r("DXT1"),
      s = r("DXT3"),
      l = r("DXT5");
    if (e.byteLength < 124) return console.error("THREE.DDSLoader.parse: File is empty or incomplete."), n;
    var c, u = new Int32Array(e, 0, 31);
    if (542327876 !== u[0]) return console.error("THREE.DDSLoader.parse: Invalid magic number in DDS header."), n;
    if (4 & !u[20]) return console.error("THREE.DDSLoader.parse: Unsupported format, must contain a FourCC code."), n;
    var h, d = u[21],
      f = !1;
    switch (d) {
      case a:
        c = 8, n.format = i.RGB_S3TC_DXT1_Format;
        break;
      case s:
        c = 16, n.format = i.RGBA_S3TC_DXT3_Format;
        break;
      case l:
        c = 16, n.format = i.RGBA_S3TC_DXT5_Format;
        break;
      default:
        if (!(32 == u[22] && 16711680 & u[23] && 65280 & u[24] && 255 & u[25] && 4278190080 & u[26])) return console.error("THREE.DDSLoader.parse: Unsupported FourCC code ", (h = d, String.fromCharCode(255 & h, h >> 8 & 255, h >> 16 & 255, h >> 24 & 255))), n;
        f = !0, c = 64, n.format = i.RGBAFormat
    }
    n.mipmapCount = 1, u[7] > 0 && !1 !== t && (n.mipmapCount = Math.max(1, u[7])), n.isCubemap = !!(512 & u[28]), n.width = u[4], n.height = u[3];
    for (var p = u[1] + 4, m = n.width, g = n.height, v = n.isCubemap ? 6 : 1, y = 0; y < v; y++) {
      for (var b = 0; b < n.mipmapCount; b++) {
        if (f) var _ = (x = o(e, p, m, g)).length;
        else {
          _ = Math.max(4, m) / 4 * Math.max(4, g) / 4 * c;
          var x = new Uint8Array(e, p, _)
        }
        var w = {
          data: x,
          width: m,
          height: g
        };
        n.mipmaps.push(w), p += _, m = Math.max(.5 * m, 1), g = Math.max(.5 * g, 1)
      }
      m = n.width, g = n.height
    }
    return n
  }
}, function (e, t, n) {
  "use strict";
  n.r(t), n.d(t, "HudMessage", (function () {
    return r
  }));
  var i = n(8);

  function r() {}
  r.instances = [], r.displayMessage = function (e, t, n, o, a) {
    var s = e.ownerDocument,
      l = s.defaultView || s.parentWindow;

    function c(e) {
      var t = l.getComputedStyle(e),
        n = parseInt(t["margin-top"]),
        i = parseInt(t["margin-bottom"]);
      return e.getBoundingClientRect().height + n + i
    }

    function u(e, t, n) {
      var i = l.getComputedStyle(e, null);
      if (!Array.isArray(t)) return i[t];
      for (var r = n || {}, o = 0; o < t.length; o++) {
        var a = t[o];
        r[a] = i[a]
      }
      return r
    }
    if (!(r.instances.length > 0)) {
      var h = t.msgTitleKey,
        d = t.msgTitleDefaultValue || h,
        f = t.messageKey,
        p = t.messageDefaultValue || f,
        m = t.buttonText,
        g = t.checkboxChecked || !1,
        v = s.createElement("div");
      v.classList.add("docking-panel"), v.classList.add("hud"), e.appendChild(v);
      var y, b = s.createElement("div");
      b.classList.add("docking-panel-title"), b.classList.add("docking-panel-delimiter-shadow"), b.textContent = i.i18n.translate(h, {
        defaultValue: d
      }), b.setAttribute("data-i18n", h), v.appendChild(b), n && ((y = s.createElement("div")).classList.add("docking-panel-close"), y.addEventListener("click", (function (e) {
        r.dismiss(), n && n(e)
      })), v.appendChild(y));
      var _ = u(b, ["width", "font-size"]),
        x = function (e) {
          var t = e.textContent,
            n = s.createElement("span");
          u(e, ["font-size", "font-weight", "text-transform", "padding", "white-space", "font-family"], n.style), n.textContent = t, n.style.position = "absolute", n.style.top = "10000px", n.style.left = "-10000px", s.body.appendChild(n);
          var i = n.offsetWidth;
          return s.body.removeChild(n), i
        }(b),
        w = parseFloat(_["font-size"]),
        E = y ? parseFloat(u(y, "width")) : 0,
        A = parseFloat(_.width) - E;
      b.style["font-size"] = "".concat(x > A ? A / x * w : w, "px");
      var S = s.createElement("div");
      S.classList.add("hud-client"), S.classList.add("docking-panel-container-solid-color-b"), v.appendChild(S);
      var M = s.createElement("div");
      M.className = "hud-message", M.textContent = i.i18n.translate(f, {
        defaultValue: p
      }), M.setAttribute("data-i18n", p), S.appendChild(M);
      var T = c(M);
      if (o) {
        var C = s.createElement("div");
        C.classList.add("docking-panel-primary-button"), C.classList.add("hud-button"), C.textContent = i.i18n.translate(m, {
          defaultValue: m
        }), C.setAttribute("data-i18n", m), C.addEventListener("click", o), S.appendChild(C), T += c(C)
      }
      if (a) {
        var P = s.createElement("div"),
          L = s.createElement("input");
        L.className = "hud-checkbox", L.type = "checkbox", L.checked = g, P.appendChild(L);
        var D = "Do not show this message again",
          I = s.createElement("label");
        I.setAttribute("for", D), I.setAttribute("data-i18n", D), I.textContent = i.i18n.translate(D, {
          defaultValue: D
        }), P.appendChild(I), L.addEventListener("change", a), S.appendChild(P), T += c(a)
      }
      S.style.height = T + "px", v.style.height = T + c(b) + "px";
      var R = {
        hudMessage: v,
        container: e
      };
      r.instances.push(R)
    }
  }, r.dismiss = function () {
    if (r.instances.length > 0) {
      var e = r.instances.pop();
      return e.hudMessage.style.visibility = "hidden", e.container.removeChild(e.hudMessage), !0
    }
    return !1
  }
}, function (e, t, n) {
  "use strict";
  n.r(t), n.d(t, "VertexBufferReader", (function () {
    return o
  })), n.d(t, "BoundsCallback", (function () {
    return a
  }));
  var i = n(0),
    r = 2 * Math.PI;

  function o(e) {
    this.vb = e.vb.buffer, this.vbf = new Float32Array(this.vb), this.vbi = new Int32Array(this.vb), this.vbs = new Uint16Array(this.vb), this.ib = e.ib, this.stride = e.vbstride, this.vcount = this.vbf.length / this.stride, this.useInstancing = e.numInstances > 0, this.useCompactBuffers = e.unpackXform, this.texData = this.useCompactBuffers && e.tIdColor && e.tIdColor.image && e.tIdColor.image.data && new Uint32Array(e.tIdColor.image.data.buffer)
  }

  function a(e) {
    this.bounds = e, this.point = new i.Vector4, this.point.z = 0, this.point.w = 1
  }
  o.prototype.getDbIdAt = function (e) {
    return this.texData ? this.texData[this.vbs[e * this.stride * 2 + 7]] : this.vbi[e * this.stride + 7]
  }, o.prototype.getColorAt = function (e) {
    return this.texData ? this.texData[this.vbs[e * this.stride * 2 + 6]] : this.vbi[e * this.stride + 6]
  }, o.prototype.getVertexFlagsAt = function (e) {
    return this.texData ? this.vbi[e * this.stride + 4] : this.vbi[e * this.stride + 8]
  }, o.prototype.getLayerIndexAt = function (e) {
    return this.texData ? 65535 & this.vbi[e * this.stride + 5] : 65535 & this.vbi[e * this.stride + 9]
  }, o.prototype.getViewportIndexAt = function (e) {
    return this.texData ? this.vbi[e * this.stride + 5] >> 16 & 65535 : this.vbi[e * this.stride + 9] >> 16 & 65535
  }, o.prototype.decodeLineAt = function (e, t, n, i) {
    if (i.onLineSegment) {
      if (this.useCompactBuffers) var o = this.stride * e * 2,
        a = this.useCompactBuffers.x * this.vbs[o] / 65535 + this.useCompactBuffers.z,
        s = this.useCompactBuffers.y * this.vbs[o + 1] / 65535 + this.useCompactBuffers.w,
        l = this.vbs[o + 2] / 65535 * r - Math.PI,
        c = this.vbs[o + 3] / 65535 * Math.max(this.useCompactBuffers.x, this.useCompactBuffers.y),
        u = this.vbs[o + 4] / 32767 * Math.max(this.useCompactBuffers.x, this.useCompactBuffers.y) * 2;
      else {
        var h = this.stride * e;
        a = this.vbf[h], s = this.vbf[h + 1], l = this.vbf[h + 2] * r - Math.PI, c = this.vbf[h + 3], u = 2 * this.vbf[h + 4]
      }
      var d = a + c * Math.cos(l),
        f = s + c * Math.sin(l);
      i.onLineSegment(a, s, d, f, n, u)
    }
  }, o.prototype.decodeCircularArcAt = function (e, t, n, i) {
    if (i.onCircularArc) {
      if (this.useCompactBuffers) var o = this.stride * e * 2,
        a = this.useCompactBuffers.x * this.vbs[o] / 65535 + this.useCompactBuffers.z,
        s = this.useCompactBuffers.y * this.vbs[o + 1] / 65535 + this.useCompactBuffers.w,
        l = this.vbs[o + 2] / 65535 * r,
        c = this.vbs[o + 3] / 65535 * r,
        u = this.vbs[o + 5] / 65535 * Math.max(this.useCompactBuffers.x, this.useCompactBuffers.y);
      else {
        var h = this.stride * e;
        a = this.vbf[h], s = this.vbf[h + 1], l = this.vbf[h + 2] * r, c = this.vbf[h + 3] * r, u = this.vbf[h + 5]
      }
      i.onCircularArc(a, s, l, c, u, n)
    }
  }, o.prototype.decodeEllipticalArcAt = function (e, t, n, i) {
    if (i.onEllipticalArc) {
      var o = this.stride * e,
        a = this.vbf[o],
        s = this.vbf[o + 1],
        l = this.vbf[o + 2] * r,
        c = this.vbf[o + 3] * r,
        u = this.vbf[o + 5],
        h = this.vbf[o + 10],
        d = this.vbf[o + 11];
      i.onEllipticalArc(a, s, l, c, u, h, d, n)
    }
  }, o.prototype.decodeTexQuadAt = function (e, t, n, i) {
    if (i.onTexQuad) {
      if (this.useCompactBuffers) var o = this.stride * e * 2,
        a = this.useCompactBuffers.x * this.vbs[o] / 65535 + this.useCompactBuffers.z,
        s = this.useCompactBuffers.y * this.vbs[o + 1] / 65535 + this.useCompactBuffers.w,
        l = this.vbs[o + 2] / 65535 * r,
        c = this.vbs[o + 3] / 65535 * Math.max(this.useCompactBuffers.x, this.useCompactBuffers.y),
        u = this.vbs[o + 4] / 65535 * Math.max(this.useCompactBuffers.x, this.useCompactBuffers.y);
      else {
        var h = this.stride * e;
        a = this.vbf[h], s = this.vbf[h + 1], l = this.vbf[h + 2] * r, c = this.vbf[h + 3], u = this.vbf[h + 4]
      }
      i.onTexQuad(a, s, c, u, l, n)
    }
  }, o.prototype.decodeOneTriangleAt = function (e, t, n, i) {
    if (i.onOneTriangle) {
      if (this.useCompactBuffers) var r = this.stride * e * 2,
        o = this.useCompactBuffers.x * this.vbs[r] / 65535 + this.useCompactBuffers.z,
        a = this.useCompactBuffers.y * this.vbs[r + 1] / 65535 + this.useCompactBuffers.w,
        s = this.useCompactBuffers.x * this.vbs[r + 2] / 65535 + this.useCompactBuffers.z,
        l = this.useCompactBuffers.y * this.vbs[r + 3] / 65535 + this.useCompactBuffers.w,
        c = this.useCompactBuffers.x * this.vbs[r + 4] / 65535 + this.useCompactBuffers.z,
        u = this.useCompactBuffers.y * this.vbs[r + 5] / 65535 + this.useCompactBuffers.w;
      else {
        var h = this.stride * e;
        o = this.vbf[h], a = this.vbf[h + 1], s = this.vbf[h + 2], l = this.vbf[h + 3], c = this.vbf[h + 4], u = this.vbf[h + 5]
      }
      i.onOneTriangle(o, a, s, l, c, u, n)
    }
  }, o.prototype.decodeTriangleIndexed = function (e, t, n, i, r, o) {
    if (o.onOneTriangle) {
      if (this.useCompactBuffers) {
        var a = this.stride * e * 2,
          s = this.useCompactBuffers.x * this.vbs[a] / 65535 + this.useCompactBuffers.z,
          l = this.useCompactBuffers.y * this.vbs[a + 1] / 65535 + this.useCompactBuffers.w;
        a = this.stride * t * 2;
        var c = this.useCompactBuffers.x * this.vbs[a] / 65535 + this.useCompactBuffers.z,
          u = this.useCompactBuffers.y * this.vbs[a + 1] / 65535 + this.useCompactBuffers.w;
        a = this.stride * n * 2;
        var h = this.useCompactBuffers.x * this.vbs[a] / 65535 + this.useCompactBuffers.z,
          d = this.useCompactBuffers.y * this.vbs[a + 1] / 65535 + this.useCompactBuffers.w
      } else {
        var f = this.stride * e;
        s = this.vbf[f], l = this.vbf[f + 1];
        f = this.stride * t;
        c = this.vbf[f], u = this.vbf[f + 1];
        f = this.stride * n;
        h = this.vbf[f], d = this.vbf[f + 1]
      }
      o.onOneTriangle(s, l, c, u, h, d, r)
    }
  }, o.prototype.enumGeomsForObject = function (e, t) {
    if (this.useInstancing)
      for (var n = 0; n < this.vcount;) {
        var i = this.getVertexFlagsAt(n) >> 8 & 255,
          r = this.getLayerIndexAt(n),
          o = this.getViewportIndexAt(n);
        if (s = this.getDbIdAt(n) === e) switch (i) {
          case 1:
            this.decodeLineAt(n, r, o, t);
            break;
          case 2:
            this.decodeCircularArcAt(n, r, o, t);
            break;
          case 3:
            this.decodeEllipticalArcAt(n, r, o, t);
            break;
          case 4:
            this.decodeTexQuadAt(n, r, o, t);
            break;
          case 5:
            this.decodeOneTriangleAt(n, r, o, t)
        }
        n += 1
      } else
        for (n = 0; n < this.ib.length;) {
          var a = this.ib[n],
            s = (i = this.getVertexFlagsAt(a) >> 8 & 255, r = this.getLayerIndexAt(a), o = this.getViewportIndexAt(a), this.getDbIdAt(a) === e);
          if (0 === i) s && this.decodeTriangleIndexed(this.ib[n], this.ib[n + 1], this.ib[n + 2], r, o, t), n += 3;
          else {
            if (s) switch (i) {
              case 1:
                this.decodeLineAt(a, r, o, t);
                break;
              case 2:
                this.decodeCircularArcAt(a, r, o, t);
                break;
              case 3:
                this.decodeEllipticalArcAt(a, r, o, t);
                break;
              case 4:
                this.decodeTexQuadAt(a, r, o, t);
                break;
              case 5:
                this.decodeOneTriangleAt(a, r, o, t)
            }
            n += 6
          }
        }
  }, o.prototype.enumGeomsForVisibleLayer = function (e, t) {
    this.enumGeoms((function (t, n, i) {
      return !e || 0 !== n && -1 !== e.indexOf(n)
    }), t)
  }, o.prototype.enumGeoms = function (e, t) {
    if (this.useInstancing)
      for (var n = 0; n < this.vcount;) {
        var i = this.getVertexFlagsAt(n) >> 8 & 255,
          r = this.getLayerIndexAt(n),
          o = this.getViewportIndexAt(n),
          a = this.getDbIdAt(n);
        if (l = !e || e(a, r, o)) switch (i) {
          case 1:
            this.decodeLineAt(n, r, o, t);
            break;
          case 2:
            this.decodeCircularArcAt(n, r, o, t);
            break;
          case 3:
            this.decodeEllipticalArcAt(n, r, o, t);
            break;
          case 4:
            this.decodeTexQuadAt(n, r, o, t);
            break;
          case 5:
            this.decodeOneTriangleAt(n, r, o, t)
        }
        n += 1
      } else
        for (n = 0; n < this.ib.length;) {
          var s = this.ib[n],
            l = (i = this.getVertexFlagsAt(s) >> 8 & 255, r = this.getLayerIndexAt(s), o = this.getViewportIndexAt(s), a = this.getDbIdAt(s), !e || e(a, r, o));
          if (0 === i) l && this.decodeTriangleIndexed(this.ib[n], this.ib[n + 1], this.ib[n + 2], r, o, t), n += 3;
          else {
            if (l) switch (i) {
              case 1:
                this.decodeLineAt(s, r, o, t);
                break;
              case 2:
                this.decodeCircularArcAt(s, r, o, t);
                break;
              case 3:
                this.decodeEllipticalArcAt(s, r, o, t);
                break;
              case 4:
                this.decodeTexQuadAt(s, r, o, t);
                break;
              case 5:
                this.decodeOneTriangleAt(s, r, o, t)
            }
            n += 6
          }
        }
  }, a.prototype.onVertex = function (e, t, n) {
    this.point.x = e, this.point.y = t, this.bounds.expandByPoint(this.point)
  }, a.prototype.onLineSegment = function (e, t, n, i, r) {
    this.onVertex(e, t), this.onVertex(n, i)
  }, a.prototype.onCircularArc = function (e, t, n, i, r, o) {
    this.onEllipticalArc(e, t, n, i, r, r, 0, o)
  }, a.prototype.onEllipticalArc = function (e, t, n, i, r, o, a, s) {
    0 == a ? n <= 0 && i >= 2 * Math.PI - 1e-5 ? this.onTexQuad(e, t, 2 * r, 2 * o, a, s) : (this.point.x = e + Math.cos(n) * r, this.point.y = t + Math.sin(n) * o, this.bounds.expandByPoint(this.point), this.point.x = e + Math.cos(i) * r, this.point.y = t + Math.sin(i) * o, this.bounds.expandByPoint(this.point), n > i && (this.point.x = e + r, this.point.y = t, this.bounds.expandByPoint(this.point), n -= 2 * Math.PI), n < .5 * Math.PI && i > .5 * Math.PI && (this.point.x = e, this.point.y = t + o, this.bounds.expandByPoint(this.point)), n < Math.PI && i > Math.PI && (this.point.x = e - r, this.point.y = t, this.bounds.expandByPoint(this.point)), n < 1.5 * Math.PI && i > 1.5 * Math.PI && (this.point.x = e, this.point.y = t - o, this.bounds.expandByPoint(this.point))) : this.onTexQuad(e, t, 2 * r, 2 * o, a, s)
  }, a.prototype.onTexQuad = function (e, t, n, r, o, a) {
    var s = .5 * n,
      l = .5 * n;
    if (0 == o) this.onVertex(e - s, t - l), this.onVertex(e + s, t + l);
    else {
      var c = new i.Matrix4,
        u = new i.Matrix4;
      c.makeRotationZ(o), u.makeTranslation(e, t, 0), u.multiply(c);
      for (var h = 0; h < 4; h++) this.point.x = h % 2 == 1 ? s : -s, this.point.y = h >= 2 ? l : -l, this.point.applyMatrix4(u), this.bounds.expandByPoint(this.point)
    }
  }, a.prototype.onOneTriangle = function (e, t, n, i, r, o, a) {
    this.onVertex(e, t), this.onVertex(n, i), this.onVertex(r, o)
  }
}, function (e, t, n) {
  "use strict";
  n.r(t), n.d(t, "UnifiedCamera", (function () {
    return r
  }));
  var i = n(0);

  function r(e, t) {
    i.Camera.call(this), this.fov = 45, this.near = .1, this.far = 1e5, this.aspect = e / t, this.left = -e / 2, this.right = e / 2, this.top = t / 2, this.bottom = -t / 2, this.clientWidth = e, this.clientHeight = t, this.target = new i.Vector3(0, 0, -1), this.worldup = new i.Vector3(0, 1, 0), this.orthographicCamera = new i.OrthographicCamera(this.left, this.right, this.top, this.bottom, this.near, this.far), this.perspectiveCamera = new i.PerspectiveCamera(this.fov, this.aspect, this.near, this.far), this.zoom = 1, this.toPerspective()
  }
  r.ORTHO_FOV = 2 * Math.atan(.5) * 180 / Math.PI, r.prototype = Object.create(i.Camera.prototype), r.prototype.clone = function () {
    var e = new r(2 * this.right, 2 * this.top);
    return i.Camera.prototype.clone.call(this, e), e.position.copy(this.position), e.up.copy(this.up), this.target && (e.target = this.target.clone()), this.worldup && (e.worldup = this.worldup.clone()), this.worldUpTransform && (e.worldUpTransform = this.worldUpTransform.clone()), e.left = this.left, e.right = this.right, e.top = this.top, e.bottom = this.bottom, e.near = this.near, e.far = this.far, e.fov = this.fov, e.aspect = this.aspect, e.zoom = this.zoom, e.clientWidth = this.clientWidth, e.clientHeight = this.clientHeight, e.isPerspective = this.isPerspective, this.updateProjectionMatrix(), e
  }, r.prototype.__computeFovPosition = function (e) {
    if (Math.abs(this.fov - e) <= 1e-4) return this.position.clone();
    var t, n, r = this.target.clone().sub(this.position),
      o = r.clone().normalize(),
      a = i.Math.degToRad(this.fov),
      s = i.Math.degToRad(e),
      l = Math.tan(.5 * a) / Math.tan(.5 * s);
    this.pivot ? (t = (new i.Plane).setFromNormalAndCoplanarPoint(o.clone().negate(), this.pivot).distanceToPoint(this.position), n = o.clone().multiplyScalar(t).add(this.position)) : (t = r.length(), n = this.target);
    t *= l;
    var c = o.multiplyScalar(-t);
    return n.clone().add(c)
  }, r.prototype.toPerspective = function () {
    !this.isPerspective && this.saveFov && (this.position.copy(this.__computeFovPosition(this.saveFov)), this.fov = this.saveFov), this.perspectiveCamera.aspect = this.aspect, this.perspectiveCamera.near = this.near, this.perspectiveCamera.far = this.far, this.perspectiveCamera.fov = this.fov / this.zoom, this.perspectiveCamera.updateProjectionMatrix(), this.projectionMatrix = this.perspectiveCamera.projectionMatrix, this.isPerspective = !0
  }, r.prototype.toOrthographic = function () {
    if (this.isPerspective) {
      this.saveFov = this.fov;
      var e = r.ORTHO_FOV;
      this.position.copy(this.__computeFovPosition(e)), this.fov = e
    }
    this.orthoScale = this.target.clone().sub(this.position).length();
    var t = .5 * this.orthoScale,
      n = t * this.aspect;
    this.left = this.orthographicCamera.left = -n, this.right = this.orthographicCamera.right = n, this.top = this.orthographicCamera.top = t, this.bottom = this.orthographicCamera.bottom = -t, this.orthographicCamera.near = this.near, this.orthographicCamera.far = this.far, this.orthographicCamera.updateProjectionMatrix(), this.projectionMatrix = this.orthographicCamera.projectionMatrix, this.isPerspective = !1
  }, r.prototype.updateProjectionMatrix = function () {
    this.isPerspective ? this.toPerspective() : this.toOrthographic()
  }, r.prototype.setSize = function (e, t) {
    this.aspect = e / t, this.left = -e / 2, this.right = e / 2, this.top = t / 2, this.bottom = -t / 2
  }, r.prototype.setFov = function (e) {
    this.fov = e, this.updateProjectionMatrix()
  }, r.prototype.setLens = function (e, t) {
    void 0 === t && (t = 24);
    var n = 2 * i.Math.radToDeg(Math.atan(t / (2 * e)));
    return this.setFov(n), n
  }, r.getViewParamsFromBox = function (e, t, n, r, o, a) {
    var s = a || {},
      l = e.size();
    if (s.target = e.center(), s.position || (s.position = new i.Vector3), s.up || (s.up = new i.Vector3), t) {
      s.isPerspective = !1;
      var c = l.x / l.y,
        u = n;
      s.orthoScale = u > c ? l.y : l.x / u, s.up.set(0, 1, 0), s.position.copy(s.target), s.position.z += s.orthoScale, s.target.y += 1e-6 * l.y
    } else s.isPerspective = !0, s.fov = o, s.up.copy(r), s.position.copy(s.target), s.position.z += 1.5 * Math.max(l.x, l.y, l.z);
    return s
  }, r.prototype.setViewFromBox = function (e, t) {
    r.getViewParamsFromBox(e, t, this.aspect, this.up, this.fov, this), this.updateCameraMatrices()
  }, r.prototype.updateCameraMatrices = function () {
    this.lookAt(this.target), this.updateProjectionMatrix(), this.updateMatrixWorld(), this.matrixWorldInverse.getInverse(this.matrixWorld)
  }, r.prototype.setView = function (e) {
    e.position && this.position.copy(e.position), e.target && this.target.copy(e.target), e.up && this.up.copy(e.up), void 0 !== e.isPerspective && (this.isPerspective = e.isPerspective), void 0 !== e.orthoScale && (this.orthoScale = e.orthoScale), this.updateCameraMatrices()
  }
}, function (e, t, n) {
  "use strict";
  var i, r = {
    DEBUG: !1,
    LIB_VERSION: "2.34.0"
  };
  if ("undefined" == typeof window) {
    var o = {
      hostname: ""
    };
    i = {
      navigator: {
        userAgent: ""
      },
      document: {
        location: o,
        referrer: ""
      },
      screen: {
        width: 0,
        height: 0
      },
      location: o
    }
  } else i = window;
  var a, s, l, c, u, h, d, f, p, m, g, v = Array.prototype,
    y = Function.prototype,
    b = Object.prototype,
    _ = v.slice,
    x = b.toString,
    w = b.hasOwnProperty,
    E = i.console,
    A = i.navigator,
    S = i.document,
    M = i.opera,
    T = i.screen,
    C = A.userAgent,
    P = y.bind,
    L = v.forEach,
    D = v.indexOf,
    I = Array.isArray,
    R = {},
    O = /[a-z0-9][a-z0-9-]+\.[a-z.]{2,6}$/i,
    k = {
      trim: function (e) {
        return e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g, "")
      }
    },
    N = function () {
      if (r.DEBUG && !k.isUndefined(E) && E) try {
        E.log.apply(E, arguments)
      } catch (e) {
        k.each(arguments, (function (e) {
          E.log(e)
        }))
      }
    },
    F = function () {
      if (r.DEBUG && !k.isUndefined(E) && E) {
        var e = ["Mixpanel error:"].concat(k.toArray(arguments));
        try {
          E.error.apply(E, e)
        } catch (t) {
          k.each(e, (function (e) {
            E.error(e)
          }))
        }
      }
    },
    U = function () {
      if (!k.isUndefined(E) && E) {
        var e = ["Mixpanel error:"].concat(k.toArray(arguments));
        try {
          E.error.apply(E, e)
        } catch (t) {
          k.each(e, (function (e) {
            E.error(e)
          }))
        }
      }
    };
  k.bind = function (e, t) {
    var n, i;
    if (P && e.bind === P) return P.apply(e, _.call(arguments, 1));
    if (!k.isFunction(e)) throw new TypeError;
    return n = _.call(arguments, 2), i = function () {
      if (!(this instanceof i)) return e.apply(t, n.concat(_.call(arguments)));
      var r = {};
      r.prototype = e.prototype;
      var o = new r;
      r.prototype = null;
      var a = e.apply(o, n.concat(_.call(arguments)));
      return Object(a) === a ? a : o
    }
  }, k.bind_instance_methods = function (e) {
    for (var t in e) "function" == typeof e[t] && (e[t] = k.bind(e[t], e))
  }, k.each = function (e, t, n) {
    if (null != e)
      if (L && e.forEach === L) e.forEach(t, n);
      else if (e.length === +e.length) {
      for (var i = 0, r = e.length; i < r; i++)
        if (i in e && t.call(n, e[i], i, e) === R) return
    } else
      for (var o in e)
        if (w.call(e, o) && t.call(n, e[o], o, e) === R) return
  }, k.escapeHTML = function (e) {
    var t = e;
    return t && k.isString(t) && (t = t.replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/"/g, "&quot;").replace(/'/g, "&#039;")), t
  }, k.extend = function (e) {
    return k.each(_.call(arguments, 1), (function (t) {
      for (var n in t) void 0 !== t[n] && (e[n] = t[n])
    })), e
  }, k.isArray = I || function (e) {
    return "[object Array]" === x.call(e)
  }, k.isFunction = function (e) {
    try {
      return /^\s*\bfunction\b/.test(e)
    } catch (e) {
      return !1
    }
  }, k.isArguments = function (e) {
    return !(!e || !w.call(e, "callee"))
  }, k.toArray = function (e) {
    return e ? e.toArray ? e.toArray() : k.isArray(e) || k.isArguments(e) ? _.call(e) : k.values(e) : []
  }, k.keys = function (e) {
    var t = [];
    return null === e || k.each(e, (function (e, n) {
      t[t.length] = n
    })), t
  }, k.values = function (e) {
    var t = [];
    return null === e || k.each(e, (function (e) {
      t[t.length] = e
    })), t
  }, k.identity = function (e) {
    return e
  }, k.include = function (e, t) {
    var n = !1;
    return null === e ? n : D && e.indexOf === D ? -1 != e.indexOf(t) : (k.each(e, (function (e) {
      if (n || (n = e === t)) return R
    })), n)
  }, k.includes = function (e, t) {
    return -1 !== e.indexOf(t)
  }, k.inherit = function (e, t) {
    return e.prototype = new t, e.prototype.constructor = e, e.superclass = t.prototype, e
  }, k.isObject = function (e) {
    return e === Object(e) && !k.isArray(e)
  }, k.isEmptyObject = function (e) {
    if (k.isObject(e)) {
      for (var t in e)
        if (w.call(e, t)) return !1;
      return !0
    }
    return !1
  }, k.isUndefined = function (e) {
    return void 0 === e
  }, k.isString = function (e) {
    return "[object String]" == x.call(e)
  }, k.isDate = function (e) {
    return "[object Date]" == x.call(e)
  }, k.isNumber = function (e) {
    return "[object Number]" == x.call(e)
  }, k.isElement = function (e) {
    return !(!e || 1 !== e.nodeType)
  }, k.encodeDates = function (e) {
    return k.each(e, (function (t, n) {
      k.isDate(t) ? e[n] = k.formatDate(t) : k.isObject(t) && (e[n] = k.encodeDates(t))
    })), e
  }, k.timestamp = function () {
    return Date.now = Date.now || function () {
      return +new Date
    }, Date.now()
  }, k.formatDate = function (e) {
    function t(e) {
      return e < 10 ? "0" + e : e
    }
    return e.getUTCFullYear() + "-" + t(e.getUTCMonth() + 1) + "-" + t(e.getUTCDate()) + "T" + t(e.getUTCHours()) + ":" + t(e.getUTCMinutes()) + ":" + t(e.getUTCSeconds())
  }, k.safewrap = function (e) {
    return function () {
      try {
        return e.apply(this, arguments)
      } catch (e) {
        U("Implementation error. Please turn on debug and contact support@mixpanel.com."), r.DEBUG && U(e)
      }
    }
  }, k.safewrap_class = function (e, t) {
    for (var n = 0; n < t.length; n++) e.prototype[t[n]] = k.safewrap(e.prototype[t[n]])
  }, k.safewrap_instance_methods = function (e) {
    for (var t in e) "function" == typeof e[t] && (e[t] = k.safewrap(e[t]))
  }, k.strip_empty_properties = function (e) {
    var t = {};
    return k.each(e, (function (e, n) {
      k.isString(e) && e.length > 0 && (t[n] = e)
    })), t
  }, k.truncate = function (e, t) {
    var n;
    return "string" == typeof e ? n = e.slice(0, t) : k.isArray(e) ? (n = [], k.each(e, (function (e) {
      n.push(k.truncate(e, t))
    }))) : k.isObject(e) ? (n = {}, k.each(e, (function (e, i) {
      n[i] = k.truncate(e, t)
    }))) : n = e, n
  }, k.JSONEncode = function (e) {
    var t = function (e) {
        var t = /[\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
          n = {
            "\b": "\\b",
            "\t": "\\t",
            "\n": "\\n",
            "\f": "\\f",
            "\r": "\\r",
            '"': '\\"',
            "\\": "\\\\"
          };
        return t.lastIndex = 0, t.test(e) ? '"' + e.replace(t, (function (e) {
          var t = n[e];
          return "string" == typeof t ? t : "\\u" + ("0000" + e.charCodeAt(0).toString(16)).slice(-4)
        })) + '"' : '"' + e + '"'
      },
      n = function (e, i) {
        var r = "",
          o = 0,
          a = "",
          s = "",
          l = 0,
          c = r,
          u = [],
          h = i[e];
        switch (h && "object" == typeof h && "function" == typeof h.toJSON && (h = h.toJSON(e)), typeof h) {
          case "string":
            return t(h);
          case "number":
            return isFinite(h) ? String(h) : "null";
          case "boolean":
          case "null":
            return String(h);
          case "object":
            if (!h) return "null";
            if (r += "    ", u = [], "[object Array]" === x.apply(h)) {
              for (l = h.length, o = 0; o < l; o += 1) u[o] = n(o, h) || "null";
              return s = 0 === u.length ? "[]" : r ? "[\n" + r + u.join(",\n" + r) + "\n" + c + "]" : "[" + u.join(",") + "]", r = c, s
            }
            for (a in h) w.call(h, a) && (s = n(a, h)) && u.push(t(a) + (r ? ": " : ":") + s);
            return s = 0 === u.length ? "{}" : r ? "{" + u.join(",") + c + "}" : "{" + u.join(",") + "}", r = c, s
        }
      };
    return n("", {
      "": e
    })
  }, k.JSONDecode = (u = {
    '"': '"',
    "\\": "\\",
    "/": "/",
    b: "\b",
    f: "\f",
    n: "\n",
    r: "\r",
    t: "\t"
  }, h = function (e) {
    var t = new SyntaxError(e);
    throw t.at = a, t.text = l, t
  }, d = function (e) {
    return e && e !== s && h("Expected '" + e + "' instead of '" + s + "'"), s = l.charAt(a), a += 1, s
  }, f = function () {
    var e, t = "";
    for ("-" === s && (t = "-", d("-")); s >= "0" && s <= "9";) t += s, d();
    if ("." === s)
      for (t += "."; d() && s >= "0" && s <= "9";) t += s;
    if ("e" === s || "E" === s)
      for (t += s, d(), "-" !== s && "+" !== s || (t += s, d()); s >= "0" && s <= "9";) t += s, d();
    if (e = +t, isFinite(e)) return e;
    h("Bad number")
  }, p = function () {
    var e, t, n, i = "";
    if ('"' === s)
      for (; d();) {
        if ('"' === s) return d(), i;
        if ("\\" === s)
          if (d(), "u" === s) {
            for (n = 0, t = 0; t < 4 && (e = parseInt(d(), 16), isFinite(e)); t += 1) n = 16 * n + e;
            i += String.fromCharCode(n)
          } else {
            if ("string" != typeof u[s]) break;
            i += u[s]
          }
        else i += s
      }
    h("Bad string")
  }, m = function () {
    for (; s && s <= " ";) d()
  }, c = function () {
    switch (m(), s) {
      case "{":
        return function () {
          var e, t = {};
          if ("{" === s) {
            if (d("{"), m(), "}" === s) return d("}"), t;
            for (; s;) {
              if (e = p(), m(), d(":"), Object.hasOwnProperty.call(t, e) && h('Duplicate key "' + e + '"'), t[e] = c(), m(), "}" === s) return d("}"), t;
              d(","), m()
            }
          }
          h("Bad object")
        }();
      case "[":
        return function () {
          var e = [];
          if ("[" === s) {
            if (d("["), m(), "]" === s) return d("]"), e;
            for (; s;) {
              if (e.push(c()), m(), "]" === s) return d("]"), e;
              d(","), m()
            }
          }
          h("Bad array")
        }();
      case '"':
        return p();
      case "-":
        return f();
      default:
        return s >= "0" && s <= "9" ? f() : function () {
          switch (s) {
            case "t":
              return d("t"), d("r"), d("u"), d("e"), !0;
            case "f":
              return d("f"), d("a"), d("l"), d("s"), d("e"), !1;
            case "n":
              return d("n"), d("u"), d("l"), d("l"), null
          }
          h('Unexpected "' + s + '"')
        }()
    }
  }, function (e) {
    var t;
    return l = e, a = 0, s = " ", t = c(), m(), s && h("Syntax error"), t
  }), k.base64Encode = function (e) {
    var t, n, i, r, o, a = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",
      s = 0,
      l = 0,
      c = "",
      u = [];
    if (!e) return e;
    e = k.utf8Encode(e);
    do {
      t = (o = e.charCodeAt(s++) << 16 | e.charCodeAt(s++) << 8 | e.charCodeAt(s++)) >> 18 & 63, n = o >> 12 & 63, i = o >> 6 & 63, r = 63 & o, u[l++] = a.charAt(t) + a.charAt(n) + a.charAt(i) + a.charAt(r)
    } while (s < e.length);
    switch (c = u.join(""), e.length % 3) {
      case 1:
        c = c.slice(0, -2) + "==";
        break;
      case 2:
        c = c.slice(0, -1) + "="
    }
    return c
  }, k.utf8Encode = function (e) {
    var t, n, i, r, o = "";
    for (t = n = 0, i = (e = (e + "").replace(/\r\n/g, "\n").replace(/\r/g, "\n")).length, r = 0; r < i; r++) {
      var a = e.charCodeAt(r),
        s = null;
      a < 128 ? n++ : s = a > 127 && a < 2048 ? String.fromCharCode(a >> 6 | 192, 63 & a | 128) : String.fromCharCode(a >> 12 | 224, a >> 6 & 63 | 128, 63 & a | 128), null !== s && (n > t && (o += e.substring(t, n)), o += s, t = n = r + 1)
    }
    return n > t && (o += e.substring(t, e.length)), o
  }, k.UUID = (g = function () {
    for (var e = 1 * new Date, t = 0; e == 1 * new Date;) t++;
    return e.toString(16) + t.toString(16)
  }, function () {
    var e = (T.height * T.width).toString(16);
    return g() + "-" + Math.random().toString(16).replace(".", "") + "-" + function () {
      var e, t, n = C,
        i = [],
        r = 0;

      function o(e, t) {
        var n, r = 0;
        for (n = 0; n < t.length; n++) r |= i[n] << 8 * n;
        return e ^ r
      }
      for (e = 0; e < n.length; e++) t = n.charCodeAt(e), i.unshift(255 & t), i.length >= 4 && (r = o(r, i), i = []);
      return i.length > 0 && (r = o(r, i)), r.toString(16)
    }() + "-" + e + "-" + g()
  }), k.isBlockedUA = function (e) {
    return !!/(google web preview|baiduspider|yandexbot|bingbot|googlebot|yahoo! slurp)/i.test(e)
  }, k.HTTPBuildQuery = function (e, t) {
    var n, i, r = [];
    return k.isUndefined(t) && (t = "&"), k.each(e, (function (e, t) {
      n = encodeURIComponent(e.toString()), i = encodeURIComponent(t), r[r.length] = i + "=" + n
    })), r.join(t)
  }, k.getQueryParam = function (e, t) {
    t = t.replace(/[[]/, "\\[").replace(/[\]]/, "\\]");
    var n = new RegExp("[\\?&]" + t + "=([^&#]*)").exec(e);
    if (null === n || n && "string" != typeof n[1] && n[1].length) return "";
    var i = n[1];
    try {
      i = decodeURIComponent(i)
    } catch (e) {
      F("Skipping decoding for malformed query param: " + i)
    }
    return i.replace(/\+/g, " ")
  }, k.getHashParam = function (e, t) {
    var n = e.match(new RegExp(t + "=([^&]*)"));
    return n ? n[1] : null
  }, k.cookie = {
    get: function (e) {
      for (var t = e + "=", n = S.cookie.split(";"), i = 0; i < n.length; i++) {
        for (var r = n[i];
          " " == r.charAt(0);) r = r.substring(1, r.length);
        if (0 === r.indexOf(t)) return decodeURIComponent(r.substring(t.length, r.length))
      }
      return null
    },
    parse: function (e) {
      var t;
      try {
        t = k.JSONDecode(k.cookie.get(e)) || {}
      } catch (e) {}
      return t
    },
    set_seconds: function (e, t, n, i, r) {
      var o = "",
        a = "",
        s = "";
      if (i) {
        var l = S.location.hostname.match(O),
          c = l ? l[0] : "";
        o = c ? "; domain=." + c : ""
      }
      if (n) {
        var u = new Date;
        u.setTime(u.getTime() + 1e3 * n), a = "; expires=" + u.toGMTString()
      }
      r && (s = "; secure"), S.cookie = e + "=" + encodeURIComponent(t) + a + "; path=/" + o + s
    },
    set: function (e, t, n, i, r) {
      var o = "",
        a = "",
        s = "";
      if (i) {
        var l = S.location.hostname.match(O),
          c = l ? l[0] : "";
        o = c ? "; domain=." + c : ""
      }
      if (n) {
        var u = new Date;
        u.setTime(u.getTime() + 24 * n * 60 * 60 * 1e3), a = "; expires=" + u.toGMTString()
      }
      r && (s = "; secure");
      var h = e + "=" + encodeURIComponent(t) + a + "; path=/" + o + s;
      return S.cookie = h, h
    },
    remove: function (e, t) {
      k.cookie.set(e, "", -1, t)
    }
  };
  var V = null;
  k.localStorage = {
    is_supported: function () {
      if (null !== V) return V;
      var e = !0;
      try {
        var t = "__mplssupport__";
        k.localStorage.set(t, "xyz"), "xyz" !== k.localStorage.get(t) && (e = !1), k.localStorage.remove(t)
      } catch (t) {
        e = !1
      }
      return e || F("localStorage unsupported; falling back to cookie store"), V = e, e
    },
    error: function (e) {
      F("localStorage error: " + e)
    },
    get: function (e) {
      try {
        return window.localStorage.getItem(e)
      } catch (e) {
        k.localStorage.error(e)
      }
      return null
    },
    parse: function (e) {
      try {
        return k.JSONDecode(k.localStorage.get(e)) || {}
      } catch (e) {}
      return null
    },
    set: function (e, t) {
      try {
        window.localStorage.setItem(e, t)
      } catch (e) {
        k.localStorage.error(e)
      }
    },
    remove: function (e) {
      try {
        window.localStorage.removeItem(e)
      } catch (e) {
        k.localStorage.error(e)
      }
    }
  }, k.register_event = function () {
    function e(t) {
      return t && (t.preventDefault = e.preventDefault, t.stopPropagation = e.stopPropagation), t
    }
    return e.preventDefault = function () {
        this.returnValue = !1
      }, e.stopPropagation = function () {
        this.cancelBubble = !0
      },
      function (t, n, i, r, o) {
        if (t)
          if (t.addEventListener && !r) t.addEventListener(n, i, !!o);
          else {
            var a = "on" + n,
              s = t[a];
            t[a] = function (t, n, i) {
              return function (r) {
                if (r = r || e(window.event)) {
                  var o, a, s = !0;
                  return k.isFunction(i) && (o = i(r)), a = n.call(t, r), !1 !== o && !1 !== a || (s = !1), s
                }
              }
            }(t, i, s)
          }
        else F("No valid element provided to register_event")
      }
  }();
  var B = new RegExp('^(\\w*)\\[(\\w+)([=~\\|\\^\\$\\*]?)=?"?([^\\]"]*)"?\\]$');

  function z(e) {
    switch (typeof e.className) {
      case "string":
        return e.className;
      case "object":
        return e.className.baseVal || e.getAttribute("class") || "";
      default:
        return ""
    }
  }

  function G(e) {
    return e && 1 === e.nodeType
  }

  function H(e, t) {
    return e && e.tagName && e.tagName.toLowerCase() === t.toLowerCase()
  }

  function W(e) {
    return e && 3 === e.nodeType
  }

  function j(e) {
    for (var t = e; t.parentNode && !H(t, "body"); t = t.parentNode) {
      var n = z(t).split(" ");
      if (k.includes(n, "mp-sensitive") || k.includes(n, "mp-no-track")) return !1
    }
    if (k.includes(z(e).split(" "), "mp-include")) return !0;
    if (H(e, "input") || H(e, "select") || H(e, "textarea") || "true" === e.getAttribute("contenteditable")) return !1;
    var i = e.type || "";
    if ("string" == typeof i) switch (i.toLowerCase()) {
      case "hidden":
      case "password":
        return !1
    }
    var r = e.name || e.id || "";
    if ("string" == typeof r) {
      if (/^cc|cardnum|ccnum|creditcard|csc|cvc|cvv|exp|pass|pwd|routing|seccode|securitycode|securitynum|socialsec|socsec|ssn/i.test(r.replace(/[^a-zA-Z0-9]/g, ""))) return !1
    }
    return !0
  }

  function q(e) {
    if (null === e || k.isUndefined(e)) return !1;
    if ("string" == typeof e) {
      e = k.trim(e);
      if (/^(?:(4[0-9]{12}(?:[0-9]{3})?)|(5[1-5][0-9]{14})|(6(?:011|5[0-9]{2})[0-9]{12})|(3[47][0-9]{13})|(3(?:0[0-5]|[68][0-9])[0-9]{11})|((?:2131|1800|35[0-9]{3})[0-9]{11}))$/.test((e || "").replace(/[- ]/g, ""))) return !1;
      if (/(^\d{3}-?\d{2}-?\d{4}$)/.test(e)) return !1
    }
    return !0
  }
  k.dom_query = function () {
    function e(e) {
      return e.all ? e.all : e.getElementsByTagName("*")
    }
    var t = /[\t\r\n]/g;

    function n(e, n) {
      var i = " " + n + " ";
      return (" " + e.className + " ").replace(t, " ").indexOf(i) >= 0
    }

    function i(t) {
      if (!S.getElementsByTagName) return [];
      var i, r, o, a, s, l, c, u, h, d, f = t.split(" "),
        p = [S];
      for (l = 0; l < f.length; l++)
        if ((i = f[l].replace(/^\s+/, "").replace(/\s+$/, "")).indexOf("#") > -1) {
          o = (r = i.split("#"))[0];
          var m = r[1],
            g = S.getElementById(m);
          if (!g || o && g.nodeName.toLowerCase() != o) return [];
          p = [g]
        } else if (i.indexOf(".") > -1) {
        o = (r = i.split("."))[0];
        var v = r[1];
        for (o || (o = "*"), a = [], s = 0, c = 0; c < p.length; c++)
          for (h = "*" == o ? e(p[c]) : p[c].getElementsByTagName(o), u = 0; u < h.length; u++) a[s++] = h[u];
        for (p = [], d = 0, c = 0; c < a.length; c++) a[c].className && k.isString(a[c].className) && n(a[c], v) && (p[d++] = a[c])
      } else {
        var y = i.match(B);
        if (y) {
          o = y[1];
          var b, _ = y[2],
            x = y[3],
            w = y[4];
          for (o || (o = "*"), a = [], s = 0, c = 0; c < p.length; c++)
            for (h = "*" == o ? e(p[c]) : p[c].getElementsByTagName(o), u = 0; u < h.length; u++) a[s++] = h[u];
          switch (p = [], d = 0, x) {
            case "=":
              b = function (e) {
                return e.getAttribute(_) == w
              };
              break;
            case "~":
              b = function (e) {
                return e.getAttribute(_).match(new RegExp("\\b" + w + "\\b"))
              };
              break;
            case "|":
              b = function (e) {
                return e.getAttribute(_).match(new RegExp("^" + w + "-?"))
              };
              break;
            case "^":
              b = function (e) {
                return 0 === e.getAttribute(_).indexOf(w)
              };
              break;
            case "$":
              b = function (e) {
                return e.getAttribute(_).lastIndexOf(w) == e.getAttribute(_).length - w.length
              };
              break;
            case "*":
              b = function (e) {
                return e.getAttribute(_).indexOf(w) > -1
              };
              break;
            default:
              b = function (e) {
                return e.getAttribute(_)
              }
          }
          for (p = [], d = 0, c = 0; c < a.length; c++) b(a[c]) && (p[d++] = a[c])
        } else {
          for (o = i, a = [], s = 0, c = 0; c < p.length; c++)
            for (h = p[c].getElementsByTagName(o), u = 0; u < h.length; u++) a[s++] = h[u];
          p = a
        }
      }
      return p
    }
    return function (e) {
      return k.isElement(e) ? [e] : k.isObject(e) && !k.isUndefined(e.length) ? e : i.call(this, e)
    }
  }(), k.info = {
    campaignParams: function () {
      var e = "utm_source utm_medium utm_campaign utm_content utm_term".split(" "),
        t = "",
        n = {};
      return k.each(e, (function (e) {
        (t = k.getQueryParam(S.URL, e)).length && (n[e] = t)
      })), n
    },
    searchEngine: function (e) {
      return 0 === e.search("https?://(.*)google.([^/?]*)") ? "google" : 0 === e.search("https?://(.*)bing.com") ? "bing" : 0 === e.search("https?://(.*)yahoo.com") ? "yahoo" : 0 === e.search("https?://(.*)duckduckgo.com") ? "duckduckgo" : null
    },
    searchInfo: function (e) {
      var t = k.info.searchEngine(e),
        n = "yahoo" != t ? "q" : "p",
        i = {};
      if (null !== t) {
        i.$search_engine = t;
        var r = k.getQueryParam(e, n);
        r.length && (i.mp_keyword = r)
      }
      return i
    },
    browser: function (e, t, n) {
      return t = t || "", n || k.includes(e, " OPR/") ? k.includes(e, "Mini") ? "Opera Mini" : "Opera" : /(BlackBerry|PlayBook|BB10)/i.test(e) ? "BlackBerry" : k.includes(e, "IEMobile") || k.includes(e, "WPDesktop") ? "Internet Explorer Mobile" : k.includes(e, "SamsungBrowser/") ? "Samsung Internet" : k.includes(e, "Edge") || k.includes(e, "Edg/") ? "Microsoft Edge" : k.includes(e, "FBIOS") ? "Facebook Mobile" : k.includes(e, "Chrome") ? "Chrome" : k.includes(e, "CriOS") ? "Chrome iOS" : k.includes(e, "UCWEB") || k.includes(e, "UCBrowser") ? "UC Browser" : k.includes(e, "FxiOS") ? "Firefox iOS" : k.includes(t, "Apple") ? k.includes(e, "Mobile") ? "Mobile Safari" : "Safari" : k.includes(e, "Android") ? "Android Mobile" : k.includes(e, "Konqueror") ? "Konqueror" : k.includes(e, "Firefox") ? "Firefox" : k.includes(e, "MSIE") || k.includes(e, "Trident/") ? "Internet Explorer" : k.includes(e, "Gecko") ? "Mozilla" : ""
    },
    browserVersion: function (e, t, n) {
      var i = {
        "Internet Explorer Mobile": /rv:(\d+(\.\d+)?)/,
        "Microsoft Edge": /Edge?\/(\d+(\.\d+)?)/,
        Chrome: /Chrome\/(\d+(\.\d+)?)/,
        "Chrome iOS": /CriOS\/(\d+(\.\d+)?)/,
        "UC Browser": /(UCBrowser|UCWEB)\/(\d+(\.\d+)?)/,
        Safari: /Version\/(\d+(\.\d+)?)/,
        "Mobile Safari": /Version\/(\d+(\.\d+)?)/,
        Opera: /(Opera|OPR)\/(\d+(\.\d+)?)/,
        Firefox: /Firefox\/(\d+(\.\d+)?)/,
        "Firefox iOS": /FxiOS\/(\d+(\.\d+)?)/,
        Konqueror: /Konqueror:(\d+(\.\d+)?)/,
        BlackBerry: /BlackBerry (\d+(\.\d+)?)/,
        "Android Mobile": /android\s(\d+(\.\d+)?)/,
        "Samsung Internet": /SamsungBrowser\/(\d+(\.\d+)?)/,
        "Internet Explorer": /(rv:|MSIE )(\d+(\.\d+)?)/,
        Mozilla: /rv:(\d+(\.\d+)?)/
      } [k.info.browser(e, t, n)];
      if (void 0 === i) return null;
      var r = e.match(i);
      return r ? parseFloat(r[r.length - 2]) : null
    },
    os: function () {
      var e = C;
      return /Windows/i.test(e) ? /Phone/.test(e) || /WPDesktop/.test(e) ? "Windows Phone" : "Windows" : /(iPhone|iPad|iPod)/.test(e) ? "iOS" : /Android/.test(e) ? "Android" : /(BlackBerry|PlayBook|BB10)/i.test(e) ? "BlackBerry" : /Mac/i.test(e) ? "Mac OS X" : /Linux/.test(e) ? "Linux" : /CrOS/.test(e) ? "Chrome OS" : ""
    },
    device: function (e) {
      return /Windows Phone/i.test(e) || /WPDesktop/.test(e) ? "Windows Phone" : /iPad/.test(e) ? "iPad" : /iPod/.test(e) ? "iPod Touch" : /iPhone/.test(e) ? "iPhone" : /(BlackBerry|PlayBook|BB10)/i.test(e) ? "BlackBerry" : /Android/.test(e) ? "Android" : ""
    },
    referringDomain: function (e) {
      var t = e.split("/");
      return t.length >= 3 ? t[2] : ""
    },
    properties: function () {
      return k.extend(k.strip_empty_properties({
        $os: k.info.os(),
        $browser: k.info.browser(C, A.vendor, M),
        $referrer: S.referrer,
        $referring_domain: k.info.referringDomain(S.referrer),
        $device: k.info.device(C)
      }), {
        $current_url: i.location.href,
        $browser_version: k.info.browserVersion(C, A.vendor, M),
        $screen_height: T.height,
        $screen_width: T.width,
        mp_lib: "web",
        $lib_version: r.LIB_VERSION,
        $insert_id: Math.random().toString(36).substring(2, 10) + Math.random().toString(36).substring(2, 10),
        time: k.timestamp() / 1e3
      })
    },
    people_properties: function () {
      return k.extend(k.strip_empty_properties({
        $os: k.info.os(),
        $browser: k.info.browser(C, A.vendor, M)
      }), {
        $browser_version: k.info.browserVersion(C, A.vendor, M)
      })
    },
    pageviewInfo: function (e) {
      return k.strip_empty_properties({
        mp_page: e,
        mp_referrer: S.referrer,
        mp_browser: k.info.browser(C, A.vendor, M),
        mp_platform: k.info.os()
      })
    }
  }, k.toArray = k.toArray, k.isObject = k.isObject, k.JSONEncode = k.JSONEncode, k.JSONDecode = k.JSONDecode, k.isBlockedUA = k.isBlockedUA, k.isEmptyObject = k.isEmptyObject, k.info = k.info, k.info.device = k.info.device, k.info.browser = k.info.browser, k.info.browserVersion = k.info.browserVersion, k.info.properties = k.info.properties;
  var X = {
    _initializedTokens: [],
    _previousElementSibling: function (e) {
      if (e.previousElementSibling) return e.previousElementSibling;
      do {
        e = e.previousSibling
      } while (e && !G(e));
      return e
    },
    _loadScript: function (e, t) {
      var n = document.createElement("script");
      n.type = "text/javascript", n.src = e, n.onload = t;
      var i = document.getElementsByTagName("script");
      i.length > 0 ? i[0].parentNode.insertBefore(n, i[0]) : document.body.appendChild(n)
    },
    _getPropertiesFromElement: function (e) {
      var t = {
        classes: z(e).split(" "),
        tag_name: e.tagName.toLowerCase()
      };
      j(e) && k.each(e.attributes, (function (e) {
        q(e.value) && (t["attr__" + e.name] = e.value)
      }));
      for (var n = 1, i = 1, r = e; r = this._previousElementSibling(r);) n++, r.tagName === e.tagName && i++;
      return t.nth_child = n, t.nth_of_type = i, t
    },
    _getDefaultProperties: function (e) {
      return {
        $event_type: e,
        $ce_version: 1,
        $host: window.location.host,
        $pathname: window.location.pathname
      }
    },
    _extractCustomPropertyValue: function (e) {
      var t = [];
      return k.each(document.querySelectorAll(e.css_selector), (function (e) {
        var n;
        ["input", "select"].indexOf(e.tagName.toLowerCase()) > -1 ? n = e.value : e.textContent && (n = e.textContent), q(n) && t.push(n)
      })), t.join(", ")
    },
    _getCustomProperties: function (e) {
      var t = {};
      return k.each(this._customProperties, (function (n) {
        k.each(n.event_selectors, (function (i) {
          var r = document.querySelectorAll(i);
          k.each(r, (function (i) {
            k.includes(e, i) && j(i) && (t[n.name] = this._extractCustomPropertyValue(n))
          }), this)
        }), this)
      }), this), t
    },
    _getEventTarget: function (e) {
      return void 0 === e.target ? e.srcElement : e.target
    },
    _trackEvent: function (e, t) {
      var n, i, r = this._getEventTarget(e);
      if (W(r) && (r = r.parentNode), function (e, t) {
          if (!e || H(e, "html") || !G(e)) return !1;
          switch (e.tagName.toLowerCase()) {
            case "html":
              return !1;
            case "form":
              return "submit" === t.type;
            case "input":
              return -1 === ["button", "submit"].indexOf(e.getAttribute("type")) ? "change" === t.type : "click" === t.type;
            case "select":
            case "textarea":
              return "change" === t.type;
            default:
              return "click" === t.type
          }
        }(r, e)) {
        for (var o = [r], a = r; a.parentNode && !H(a, "body");) o.push(a.parentNode), a = a.parentNode;
        var s, l, c = [],
          u = !1;
        if (k.each(o, (function (e) {
            var t = j(e);
            "a" === e.tagName.toLowerCase() && (s = e.getAttribute("href"), s = t && q(s) && s);
            var n = z(e).split(" ");
            k.includes(n, "mp-no-track") && (u = !0), c.push(this._getPropertiesFromElement(e))
          }), this), u) return !1;
        var h = (i = "", j(n = r) && n.childNodes && n.childNodes.length && k.each(n.childNodes, (function (e) {
          W(e) && e.textContent && (i += k.trim(e.textContent).split(/(\s+)/).filter(q).join("").replace(/[\r\n]/g, " ").replace(/[ ]+/g, " ").substring(0, 255))
        })), k.trim(i));
        h && h.length && (l = h);
        var d = k.extend(this._getDefaultProperties(e.type), {
          $elements: c,
          $el_attr__href: s,
          $el_text: l
        }, this._getCustomProperties(o));
        return t.track("$web_event", d), !0
      }
    },
    _navigate: function (e) {
      window.location.href = e
    },
    _addDomEventHandlers: function (e) {
      var t = k.bind((function (t) {
        t = t || window.event, this._trackEvent(t, e)
      }), this);
      k.register_event(document, "submit", t, !1, !0), k.register_event(document, "change", t, !1, !0), k.register_event(document, "click", t, !1, !0)
    },
    _customProperties: {},
    init: function (e) {
      //   if (document && document.body) {
      //     var t = e.get_config("token");
      //     if (this._initializedTokens.indexOf(t) > -1) console.log('autotrack already initialized for token "' + t + '"');
      //     else if (this._initializedTokens.push(t), !this._maybeLoadEditor(e)) {
      //       var n = k.bind((function (t) {
      //         t && t.config && !0 === t.config.enable_collect_everything ? (t.custom_properties && (this._customProperties = t.custom_properties), e.track("$web_event", k.extend({
      //           $title: document.title
      //         }, this._getDefaultProperties("pageview"))), this._addDomEventHandlers(e)) : e.__autotrack_enabled = !1
      //       }), this);
      //       e._send_request(e.get_config("api_host") + "/decide/", {
      //         verbose: !0,
      //         version: "1",
      //         lib: "web",
      //         token: t
      //       }, {
      //         method: "GET",
      //         transport: "XHR"
      //       }, e._prepare_callback(n))
      //     }
      //   } else {
      //     console.log("document not ready yet, trying again in 500 milliseconds...");
      //     var i = this;
      //     setTimeout((function () {
      //       i.init(e)
      //     }), 500)
      //   }
    },
    _editorParamsFromHash: function (e, t) {
      var n;
      try {
        var i = k.getHashParam(t, "state");
        i = JSON.parse(decodeURIComponent(i));
        var r = k.getHashParam(t, "expires_in");
        n = {
          accessToken: k.getHashParam(t, "access_token"),
          accessTokenExpiresAt: (new Date).getTime() + 1e3 * Number(r),
          bookmarkletMode: !!i.bookmarkletMode,
          projectId: i.projectId,
          projectOwnerId: i.projectOwnerId,
          projectToken: i.token,
          readOnly: i.readOnly,
          userFlags: i.userFlags,
          userId: i.userId
        }, window.sessionStorage.setItem("editorParams", JSON.stringify(n)), i.desiredHash ? window.location.hash = i.desiredHash : window.history ? history.replaceState("", document.title, window.location.pathname + window.location.search) : window.location.hash = ""
      } catch (e) {
        console.error("Unable to parse data from hash", e)
      }
      return n
    },
    _maybeLoadEditor: function (e) {
      try {
        var t = !1;
        if (k.getHashParam(window.location.hash, "state")) {
          var n = k.getHashParam(window.location.hash, "state");
          t = "mpeditor" === (n = JSON.parse(decodeURIComponent(n))).action
        }
        var i, r = !!window.sessionStorage.getItem("_mpcehash");
        return t ? i = this._editorParamsFromHash(e, window.location.hash) : r ? (i = this._editorParamsFromHash(e, window.sessionStorage.getItem("_mpcehash")), window.sessionStorage.removeItem("_mpcehash")) : i = JSON.parse(window.sessionStorage.getItem("editorParams") || "{}"), !(!i.projectToken || e.get_config("token") !== i.projectToken) && (this._loadEditor(e, i), !0)
      } catch (e) {
        return !1
      }
    },
    _loadEditor: function (e, t) {
      if (!window._mpEditorLoaded) {
        window._mpEditorLoaded = !0;
        var n = e.get_config("app_host") + "/js-bundle/reports/collect-everything/editor.js?_ts=" + (new Date).getTime();
        return this._loadScript(n, (function () {
          window.mp_load_editor(t)
        })), !0
      }
      return !1
    },
    enabledForProject: function (e, t, n) {
      t = k.isUndefined(t) ? 10 : t, n = k.isUndefined(n) ? 10 : n;
      for (var i = 0, r = 0; r < e.length; r++) i += e.charCodeAt(r);
      return i % t < n
    },
    isBrowserSupported: function () {
      return k.isFunction(document.querySelectorAll)
    }
  };
  k.bind_instance_methods(X), k.safewrap_instance_methods(X);
  var Y = function () {};
  Y.prototype.create_properties = function () {}, Y.prototype.event_handler = function () {}, Y.prototype.after_track_handler = function () {}, Y.prototype.init = function (e) {
    return this.mp = e, this
  }, Y.prototype.track = function (e, t, n, i) {
    var r = this,
      o = k.dom_query(e);
    if (0 !== o.length) return k.each(o, (function (e) {
      k.register_event(e, this.override_event, (function (e) {
        var o = {},
          a = r.create_properties(n, this),
          s = r.mp.get_config("track_links_timeout");
        r.event_handler(e, this, o), window.setTimeout(r.track_callback(i, a, o, !0), s), r.mp.track(t, a, r.track_callback(i, a, o))
      }))
    }), this), !0;
    F("The DOM query (" + e + ") returned 0 elements")
  }, Y.prototype.track_callback = function (e, t, n, i) {
    i = i || !1;
    var r = this;
    return function () {
      n.callback_fired || (n.callback_fired = !0, e && !1 === e(i, t) || r.after_track_handler(t, n, i))
    }
  }, Y.prototype.create_properties = function (e, t) {
    return "function" == typeof e ? e(t) : k.extend({}, e)
  };
  var K = function () {
    this.override_event = "click"
  };
  k.inherit(K, Y), K.prototype.create_properties = function (e, t) {
    var n = K.superclass.create_properties.apply(this, arguments);
    return t.href && (n.url = t.href), n
  }, K.prototype.event_handler = function (e, t, n) {
    n.new_tab = 2 === e.which || e.metaKey || e.ctrlKey || "_blank" === t.target, n.href = t.href, n.new_tab || e.preventDefault()
  }, K.prototype.after_track_handler = function (e, t) {
    t.new_tab || setTimeout((function () {
      window.location = t.href
    }), 0)
  };
  var Q = function () {
    this.override_event = "submit"
  };
  k.inherit(Q, Y), Q.prototype.event_handler = function (e, t, n) {
    n.element = t, e.preventDefault()
  }, Q.prototype.after_track_handler = function (e, t) {
    setTimeout((function () {
      t.element.submit()
    }), 0)
  };

  function Z(e, t) {
    le(!0, e, t)
  }

  function J(e, t) {
    le(!1, e, t)
  }

  function $(e, t) {
    return "1" === se(e, t)
  }

  function ee(e, t) {
    return !! function (e) {
      if (e && e.ignoreDnt) return !1;
      var t = e && e.window || i,
        n = t.navigator || {},
        r = !1;
      return k.each([n.doNotTrack, n.msDoNotTrack, t.doNotTrack], (function (e) {
        k.includes([!0, 1, "1", "yes"], e) && (r = !0)
      })), r
    }(t) || "0" === se(e, t)
  }

  function te(e) {
    return ce(e, (function (e) {
      return this.get_config(e)
    }))
  }

  function ne(e) {
    return ce(e, (function (e) {
      return this._get_config(e)
    }))
  }

  function ie(e) {
    return ce(e, (function (e) {
      return this._get_config(e)
    }))
  }

  function re(e, t) {
    oe(t = t || {}).remove(ae(e, t), !!t.crossSubdomainCookie)
  }

  function oe(e) {
    return "localStorage" === (e = e || {}).persistenceType ? k.localStorage : k.cookie
  }

  function ae(e, t) {
    return ((t = t || {}).persistencePrefix || "__mp_opt_in_out_") + e
  }

  function se(e, t) {
    return oe(t).get(ae(e, t))
  }

  function le(e, t, n) {
    k.isString(t) && t.length ? (oe(n = n || {}).set(ae(t, n), e ? 1 : 0, k.isNumber(n.cookieExpiration) ? n.cookieExpiration : null, !!n.crossSubdomainCookie, !!n.secureCookie), n.track && e && n.track(n.trackEventName || "$opt_in", n.trackProperties)) : console.error("gdpr." + (e ? "optIn" : "optOut") + " called with an invalid token")
  }

  function ce(e, t) {
    return function () {
      var n = !1;
      try {
        var i = t.call(this, "token"),
          r = t.call(this, "ignore_dnt"),
          o = t.call(this, "opt_out_tracking_persistence_type"),
          a = t.call(this, "opt_out_tracking_cookie_prefix"),
          s = t.call(this, "window");
        i && (n = ee(i, {
          ignoreDnt: r,
          persistenceType: o,
          persistencePrefix: a,
          window: s
        }))
      } catch (e) {
        console.error("Unexpected error when checking tracking opt-out status: " + e)
      }
      if (!n) return e.apply(this, arguments);
      var l = arguments[arguments.length - 1];
      "function" == typeof l && l(0)
    }
  }
  var ue = {
      set_action: function (e, t) {
        var n = {},
          i = {};
        return k.isObject(e) ? k.each(e, (function (e, t) {
          this._is_reserved_property(t) || (i[t] = e)
        }), this) : i[e] = t, n.$set = i, n
      },
      unset_action: function (e) {
        var t = {},
          n = [];
        return k.isArray(e) || (e = [e]), k.each(e, (function (e) {
          this._is_reserved_property(e) || n.push(e)
        }), this), t.$unset = n, t
      },
      set_once_action: function (e, t) {
        var n = {},
          i = {};
        return k.isObject(e) ? k.each(e, (function (e, t) {
          this._is_reserved_property(t) || (i[t] = e)
        }), this) : i[e] = t, n.$set_once = i, n
      },
      union_action: function (e, t) {
        var n = {},
          i = {};
        return k.isObject(e) ? k.each(e, (function (e, t) {
          this._is_reserved_property(t) || (i[t] = k.isArray(e) ? e : [e])
        }), this) : i[e] = k.isArray(t) ? t : [t], n.$union = i, n
      },
      append_action: function (e, t) {
        var n = {},
          i = {};
        return k.isObject(e) ? k.each(e, (function (e, t) {
          this._is_reserved_property(t) || (i[t] = e)
        }), this) : i[e] = t, n.$append = i, n
      },
      remove_action: function (e, t) {
        var n = {},
          i = {};
        return k.isObject(e) ? k.each(e, (function (e, t) {
          this._is_reserved_property(t) || (i[t] = e)
        }), this) : i[e] = t, n.$remove = i, n
      },
      delete_action: function () {
        var e = {
          $delete: ""
        };
        return e
      }
    },
    he = function () {};
  k.extend(he.prototype, ue), he.prototype._init = function (e, t, n) {
    this._mixpanel = e, this._group_key = t, this._group_id = n
  }, he.prototype.set = ie((function (e, t, n) {
    var i = this.set_action(e, t);
    return k.isObject(e) && (n = t), this._send_request(i, n)
  })), he.prototype.set_once = ie((function (e, t, n) {
    var i = this.set_once_action(e, t);
    return k.isObject(e) && (n = t), this._send_request(i, n)
  })), he.prototype.unset = ie((function (e, t) {
    var n = this.unset_action(e);
    return this._send_request(n, t)
  })), he.prototype.union = ie((function (e, t, n) {
    k.isObject(e) && (n = t);
    var i = this.union_action(e, t);
    return this._send_request(i, n)
  })), he.prototype.delete = ie((function (e) {
    var t = this.delete_action();
    return this._send_request(t, e)
  })), he.prototype.remove = ie((function (e, t, n) {
    var i = this.remove_action(e, t);
    return this._send_request(i, n)
  })), he.prototype._send_request = function (e, t) {
    e.$group_key = this._group_key, e.$group_id = this._group_id, e.$token = this._get_config("token");
    var n = k.encodeDates(e),
      i = k.truncate(n, 255),
      r = k.JSONEncode(n),
      o = k.base64Encode(r);
    return N(e), this._mixpanel._send_request(this._mixpanel.get_config("api_host") + "/groups/", {
      data: o
    }, this._mixpanel._prepare_callback(t, i)), i
  }, he.prototype._is_reserved_property = function (e) {
    return "$group_key" === e || "$group_id" === e
  }, he.prototype._get_config = function (e) {
    return this._mixpanel.get_config(e)
  }, he.prototype.toString = function () {
    return this._mixpanel.toString() + ".group." + this._group_key + "." + this._group_id
  }, he.prototype.remove = he.prototype.remove, he.prototype.set = he.prototype.set, he.prototype.set_once = he.prototype.set_once, he.prototype.union = he.prototype.union, he.prototype.unset = he.prototype.unset, he.prototype.toString = he.prototype.toString;
  var de = ["__mps", "__mpso", "__mpus", "__mpa", "__mpap", "__mpr", "__mpu", "$people_distinct_id", "__alias", "__cmpns", "__timers"],
    fe = function (e) {
      this.props = {}, this.campaign_params_saved = !1, e.persistence_name ? this.name = "mp_" + e.persistence_name : this.name = "mp_" + e.token + "_mixpanel";
      var t = e.persistence;
      "cookie" !== t && "localStorage" !== t && (U("Unknown persistence type " + t + "; falling back to cookie"), t = e.persistence = "cookie"), "localStorage" === t && k.localStorage.is_supported() ? this.storage = k.localStorage : this.storage = k.cookie, this.load(), this.update_config(e), this.upgrade(e), this.save()
    };
  fe.prototype.properties = function () {
    var e = {};
    return k.each(this.props, (function (t, n) {
      k.include(de, n) || (e[n] = t)
    })), e
  }, fe.prototype.load = function () {
    if (!this.disabled) {
      var e = this.storage.parse(this.name);
      e && (this.props = k.extend({}, e))
    }
  }, fe.prototype.upgrade = function (e) {
    var t, n, i = e.upgrade;
    i && (t = "mp_super_properties", "string" == typeof i && (t = i), n = this.storage.parse(t), this.storage.remove(t), this.storage.remove(t, !0), n && (this.props = k.extend(this.props, n.all, n.events))), e.cookie_name || "mixpanel" === e.name || (t = "mp_" + e.token + "_" + e.name, (n = this.storage.parse(t)) && (this.storage.remove(t), this.storage.remove(t, !0), this.register_once(n))), this.storage === k.localStorage && (n = k.cookie.parse(this.name), k.cookie.remove(this.name), k.cookie.remove(this.name, !0), n && this.register_once(n))
  }, fe.prototype.save = function () {
    this.disabled || (this._expire_notification_campaigns(), this.storage.set(this.name, k.JSONEncode(this.props), this.expire_days, this.cross_subdomain, this.secure))
  }, fe.prototype.remove = function () {
    this.storage.remove(this.name, !1), this.storage.remove(this.name, !0)
  }, fe.prototype.clear = function () {
    this.remove(), this.props = {}
  }, fe.prototype.register_once = function (e, t, n) {
    return !!k.isObject(e) && (void 0 === t && (t = "None"), this.expire_days = void 0 === n ? this.default_expiry : n, k.each(e, (function (e, n) {
      this.props.hasOwnProperty(n) && this.props[n] !== t || (this.props[n] = e)
    }), this), this.save(), !0)
  }, fe.prototype.register = function (e, t) {
    return !!k.isObject(e) && (this.expire_days = void 0 === t ? this.default_expiry : t, k.extend(this.props, e), this.save(), !0)
  }, fe.prototype.unregister = function (e) {
    e in this.props && (delete this.props[e], this.save())
  }, fe.prototype._expire_notification_campaigns = k.safewrap((function () {
    var e = this.props.__cmpns,
      t = r.DEBUG ? 6e4 : 36e5;
    if (e) {
      for (var n in e) 1 * new Date - e[n] > t && delete e[n];
      k.isEmptyObject(e) && delete this.props.__cmpns
    }
  })), fe.prototype.update_campaign_params = function () {
    this.campaign_params_saved || (this.register_once(k.info.campaignParams()), this.campaign_params_saved = !0)
  }, fe.prototype.update_search_keyword = function (e) {
    this.register(k.info.searchInfo(e))
  }, fe.prototype.update_referrer_info = function (e) {
    this.register_once({
      $initial_referrer: e || "$direct",
      $initial_referring_domain: k.info.referringDomain(e) || "$direct"
    }, "")
  }, fe.prototype.get_referrer_info = function () {
    return k.strip_empty_properties({
      $initial_referrer: this.props.$initial_referrer,
      $initial_referring_domain: this.props.$initial_referring_domain
    })
  }, fe.prototype.safe_merge = function (e) {
    return k.each(this.props, (function (t, n) {
      n in e || (e[n] = t)
    })), e
  }, fe.prototype.update_config = function (e) {
    this.default_expiry = this.expire_days = e.cookie_expiration, this.set_disabled(e.disable_persistence), this.set_cross_subdomain(e.cross_subdomain_cookie), this.set_secure(e.secure_cookie)
  }, fe.prototype.set_disabled = function (e) {
    this.disabled = e, this.disabled ? this.remove() : this.save()
  }, fe.prototype.set_cross_subdomain = function (e) {
    e !== this.cross_subdomain && (this.cross_subdomain = e, this.remove(), this.save())
  }, fe.prototype.get_cross_subdomain = function () {
    return this.cross_subdomain
  }, fe.prototype.set_secure = function (e) {
    e !== this.secure && (this.secure = !!e, this.remove(), this.save())
  }, fe.prototype._add_to_people_queue = function (e, t) {
    var n = this._get_queue_key(e),
      i = t[e],
      r = this._get_or_create_queue("$set"),
      o = this._get_or_create_queue("$set_once"),
      a = this._get_or_create_queue("$unset"),
      s = this._get_or_create_queue("$add"),
      l = this._get_or_create_queue("$union"),
      c = this._get_or_create_queue("$remove", []),
      u = this._get_or_create_queue("$append", []);
    "__mps" === n ? (k.extend(r, i), this._pop_from_people_queue("$add", i), this._pop_from_people_queue("$union", i), this._pop_from_people_queue("$unset", i)) : "__mpso" === n ? (k.each(i, (function (e, t) {
      t in o || (o[t] = e)
    })), this._pop_from_people_queue("$unset", i)) : "__mpus" === n ? k.each(i, (function (e) {
      k.each([r, o, s, l], (function (t) {
        e in t && delete t[e]
      })), k.each(u, (function (t) {
        e in t && delete t[e]
      })), a[e] = !0
    })) : "__mpa" === n ? (k.each(i, (function (e, t) {
      t in r ? r[t] += e : (t in s || (s[t] = 0), s[t] += e)
    }), this), this._pop_from_people_queue("$unset", i)) : "__mpu" === n ? (k.each(i, (function (e, t) {
      k.isArray(e) && (t in l || (l[t] = []), l[t] = l[t].concat(e))
    })), this._pop_from_people_queue("$unset", i)) : "__mpr" === n ? (c.push(i), this._pop_from_people_queue("$append", i)) : "__mpap" === n && (u.push(i), this._pop_from_people_queue("$unset", i)), N("MIXPANEL PEOPLE REQUEST (QUEUED, PENDING IDENTIFY):"), N(t), this.save()
  }, fe.prototype._pop_from_people_queue = function (e, t) {
    var n = this._get_queue(e);
    k.isUndefined(n) || (k.each(t, (function (t, i) {
      "$append" === e || "$remove" === e ? k.each(n, (function (e) {
        e[i] === t && delete e[i]
      })) : delete n[i]
    }), this), this.save())
  }, fe.prototype._get_queue_key = function (e) {
    return "$set" === e ? "__mps" : "$set_once" === e ? "__mpso" : "$unset" === e ? "__mpus" : "$add" === e ? "__mpa" : "$append" === e ? "__mpap" : "$remove" === e ? "__mpr" : "$union" === e ? "__mpu" : void F("Invalid queue:", e)
  }, fe.prototype._get_queue = function (e) {
    return this.props[this._get_queue_key(e)]
  }, fe.prototype._get_or_create_queue = function (e, t) {
    var n = this._get_queue_key(e);
    return t = k.isUndefined(t) ? {} : t, this.props[n] || (this.props[n] = t)
  }, fe.prototype.set_event_timer = function (e, t) {
    var n = this.props.__timers || {};
    n[e] = t, this.props.__timers = n, this.save()
  }, fe.prototype.remove_event_timer = function (e) {
    var t = (this.props.__timers || {})[e];
    return k.isUndefined(t) || (delete this.props.__timers[e], this.save()), t
  };
  var pe = "in",
    me = "not in",
    ge = "-",
    ve = "*",
    ye = "/",
    be = "%",
    _e = "==",
    xe = "!=",
    we = ">",
    Ee = "<",
    Ae = ">=",
    Se = "<=",
    Me = "defined",
    Te = "not defined";

  function Ce(e) {
    if (null === e) return null;
    switch (typeof e) {
      case "object":
        return k.isDate(e) && e.getTime() >= 0 ? e.getTime() : null;
      case "boolean":
        return Number(e);
      case "number":
        return e;
      case "string":
        return e = Number(e), isNaN(e) ? 0 : e
    }
    return null
  }

  function Pe(e) {
    if (null === e) return !1;
    switch (typeof e) {
      case "boolean":
        return e;
      case "number":
        return 0 !== e;
      case "string":
        return e.length > 0;
      case "object":
        return !!(k.isArray(e) && e.length > 0) || (!!(k.isDate(e) && e.getTime() > 0) || !(!k.isObject(e) || k.isEmptyObject(e)))
    }
    return !1
  }

  function Le(e, t) {
    if (!e.operator || -1 === [_e, xe].indexOf(e.operator) || !e.children || 2 !== e.children.length) throw "Invalid equality operator " + e;
    var n = function (e, t) {
      if (null === e && e === t) return !0;
      if (typeof e == typeof t) switch (typeof e) {
        case "number":
        case "string":
        case "boolean":
          return e === t;
        case "object":
          if (k.isArray(e) && k.isArray(t)) return function (e, t) {
            if (e === t) return !0;
            if (null === e || null === t) return !1;
            if (e.length !== t.length) return !1;
            for (var n = 0; n < e.length; n++)
              if (e[n] !== t[n]) return !1;
            return !0
          }(e, t);
          if (k.isDate(e) && k.isDate(t)) return e.getTime() === t.getTime();
          if (k.isObject(e) && k.isObject(t)) return JSON.stringify(e) === JSON.stringify(t)
      }
      return !1
    }(Re(e.children[0], t), Re(e.children[1], t));
    switch (e.operator) {
      case _e:
        return n;
      case xe:
        return !n
    }
  }

  function De(e, t) {
    if (!e.operator) throw "Invalid operator: operator key missing " + e;
    switch (e.operator) {
      case "and":
        return function (e, t) {
          if (!e.operator || "and" !== e.operator || !e.children || 2 !== e.children.length) throw "Invalid operator: AND " + e;
          return Pe(Re(e.children[0], t)) && Pe(Re(e.children[1], t))
        }(e, t);
      case "or":
        return function (e, t) {
          if (!e.operator || "or" !== e.operator || !e.children || 2 !== e.children.length) throw "Invalid operator: OR " + e;
          return Pe(Re(e.children[0], t)) || Pe(Re(e.children[1], t))
        }(e, t);
      case pe:
      case me:
        return function (e, t) {
          if (!e.operator || -1 === [pe, me].indexOf(e.operator) || !e.children || 2 !== e.children.length) throw "Invalid operator: IN/NOT IN " + e;
          var n = Re(e.children[0], t),
            i = Re(e.children[1], t);
          if (!k.isArray(i) && !k.isString(i)) throw "Invalid operand for operator IN: invalid type" + i;
          var r = i.indexOf(n) > -1;
          return e.operator === me ? !r : r
        }(e, t);
      case "+":
        return function (e, t) {
          if (!e.operator || "+" !== e.operator || !e.children || e.children.length < 2) throw "Invalid operator: PLUS " + e;
          var n = Re(e.children[0], t),
            i = Re(e.children[1], t);
          return "number" == typeof n && "number" == typeof i || "string" == typeof n && "string" == typeof i ? n + i : null
        }(e, t);
      case ge:
      case ve:
      case ye:
      case be:
        return function (e, t) {
          if (!e.operator || -1 === [ge, ve, ye, be].indexOf(e.operator) || !e.children || e.children.length < 2) throw "Invalid arithmetic operator " + e;
          var n = Re(e.children[0], t),
            i = Re(e.children[1], t);
          if ("number" == typeof n && "number" == typeof i) switch (e.operator) {
            case ge:
              return n - i;
            case ve:
              return n * i;
            case ye:
              return 0 !== i ? n / i : null;
            case be:
              return 0 === i ? null : 0 === n ? 0 : n < 0 && i > 0 || n > 0 && i < 0 ? -(Math.floor(n / i) * i - n) : n % i;
            default:
              throw "Unknown operator: " + e.operator
          }
          return null
        }(e, t);
      case _e:
      case xe:
        return Le(e, t);
      case we:
      case Ee:
      case Ae:
      case Se:
        return function (e, t) {
          if (!e.operator || -1 === [we, Ae, Ee, Se].indexOf(e.operator) || !e.children || 2 !== e.children.length) throw "Invalid comparison operator " + e;
          var n = Re(e.children[0], t),
            i = Re(e.children[1], t);
          if (typeof n == typeof i)
            if ("number" == typeof i || k.isDate(i)) switch (n = Ce(n), i = Ce(i), e.operator) {
              case we:
                return n > i;
              case Ae:
                return n >= i;
              case Ee:
                return n < i;
              case Se:
                return n <= i
            } else if ("string" == typeof i) {
              var r = n.localeCompare(i);
              switch (e.operator) {
                case we:
                  return r > 0;
                case Ae:
                  return r >= 0;
                case Ee:
                  return r < 0;
                case Se:
                  return r <= 0
              }
            } return null
        }(e, t);
      case "boolean":
        return function (e, t) {
          if (!e.operator || "boolean" !== e.operator || !e.children || 1 !== e.children.length) throw "Invalid cast operator: boolean " + e;
          return Pe(Re(e.children[0], t))
        }(e, t);
      case "datetime":
        return function (e, t) {
          if (!e.operator || "datetime" !== e.operator || !e.children || 1 !== e.children.length) throw "Invalid cast operator: datetime " + e;
          var n = Re(e.children[0], t);
          if (null === n) return null;
          switch (typeof n) {
            case "number":
            case "string":
              var i = new Date(n);
              return isNaN(i.getTime()) ? null : i;
            case "object":
              if (k.isDate(n)) return n
          }
          return null
        }(e, t);
      case "list":
        return function (e, t) {
          if (!e.operator || "list" !== e.operator || !e.children || 1 !== e.children.length) throw "Invalid cast operator: list " + e;
          var n = Re(e.children[0], t);
          return null === n ? null : k.isArray(n) ? n : null
        }(e, t);
      case "number":
        return function (e, t) {
          if (!e.operator || "number" !== e.operator || !e.children || 1 !== e.children.length) throw "Invalid cast operator: number " + e;
          return Ce(Re(e.children[0], t))
        }(e, t);
      case "string":
        return function (e, t) {
          if (!e.operator || "string" !== e.operator || !e.children || 1 !== e.children.length) throw "Invalid cast operator: string " + e;
          var n = Re(e.children[0], t);
          switch (typeof n) {
            case "object":
              return k.isDate(n) ? n.toJSON() : JSON.stringify(n)
          }
          return String(n)
        }(e, t);
      case Me:
      case Te:
        return function (e, t) {
          if (!e.operator || -1 === [Me, Te].indexOf(e.operator) || !e.children || 1 !== e.children.length) throw "Invalid defined/not defined operator: " + e;
          var n = null !== Re(e.children[0], t);
          return e.operator === Te ? !n : n
        }(e, t);
      case "not":
        return function (e, t) {
          if (!e.operator || "not" !== e.operator || !e.children || 1 !== e.children.length) throw "Invalid not operator: " + e;
          var n = Re(e.children[0], t);
          return null === n || ("boolean" == typeof n ? !n : null)
        }(e, t)
    }
  }

  function Ie(e, t) {
    if (!e.property || !e.value) throw "Invalid operand: missing required keys " + e;
    switch (e.property) {
      case "event":
        return void 0 !== t[e.value] ? t[e.value] : null;
      case "literal":
        return "now" === e.value ? new Date : "object" == typeof e.value ? function (e) {
          var t = e.window;
          if (!t || !t.unit || !t.value) throw "Invalid window: missing required keys " + JSON.stringify(e);
          var n = new Date;
          switch (t.unit) {
            case "hour":
              n.setTime(n.getTime() + -1 * t.value * 60 * 60 * 1e3);
              break;
            case "day":
              n.setTime(n.getTime() + -1 * t.value * 24 * 60 * 60 * 1e3);
              break;
            case "week":
              n.setTime(n.getTime() + -1 * t.value * 7 * 24 * 60 * 60 * 1e3);
              break;
            case "month":
              n.setTime(n.getTime() + -1 * t.value * 30 * 24 * 60 * 60 * 1e3);
              break;
            default:
              throw "Invalid unit: " + t.unit
          }
          return n
        }(e.value) : e.value;
      default:
        throw "Invalid operand: Invalid property type " + e.property
    }
  }

  function Re(e, t) {
    return e.property ? Ie(e, t) : e.operator ? De(e, t) : void 0
  }
  var Oe = function (e, t) {
    k.bind_instance_methods(this), this.mixpanel = t, this.persistence = this.mixpanel.persistence, this.resource_protocol = this.mixpanel.get_config("inapp_protocol"), this.cdn_host = this.mixpanel.get_config("cdn"), this.campaign_id = k.escapeHTML(e.id), this.message_id = k.escapeHTML(e.message_id), this.body = (k.escapeHTML(e.body) || "").replace(/\n/g, "<br/>"), this.cta = k.escapeHTML(e.cta) || "Close", this.notif_type = k.escapeHTML(e.type) || "takeover", this.style = k.escapeHTML(e.style) || "light", this.title = k.escapeHTML(e.title) || "", this.video_width = Oe.VIDEO_WIDTH, this.video_height = Oe.VIDEO_HEIGHT, this.display_triggers = e.display_triggers || [], this.dest_url = e.cta_url || null, this.image_url = e.image_url || null, this.thumb_image_url = e.thumb_image_url || null, this.video_url = e.video_url || null, this.thumb_image_url && 0 === this.thumb_image_url.indexOf("//") && (this.thumb_image_url = this.thumb_image_url.replace("//", this.resource_protocol)), this.clickthrough = !0, this.dest_url || (this.dest_url = "#dismiss", this.clickthrough = !1), this.mini = "mini" === this.notif_type, this.mini || (this.notif_type = "takeover"), this.notif_width = this.mini ? Oe.NOTIF_WIDTH_MINI : Oe.NOTIF_WIDTH, this._set_client_config(), this.imgs_to_preload = this._init_image_html(), this._init_video()
  };
  Oe.ANIM_TIME = 200, Oe.MARKUP_PREFIX = "mixpanel-notification", Oe.BG_OPACITY = .6, Oe.NOTIF_TOP = 25, Oe.NOTIF_START_TOP = 200, Oe.NOTIF_WIDTH = 388, Oe.NOTIF_WIDTH_MINI = 420, Oe.NOTIF_HEIGHT_MINI = 85, Oe.THUMB_BORDER_SIZE = 5, Oe.THUMB_IMG_SIZE = 60, Oe.THUMB_OFFSET = Math.round(Oe.THUMB_IMG_SIZE / 2), Oe.VIDEO_WIDTH = 595, Oe.VIDEO_HEIGHT = 334, Oe.prototype.show = function () {
    var e = this;
    this._set_client_config(), this.body_el ? (this._init_styles(), this._init_notification_el(), this._preload_images(this._attach_and_animate)) : setTimeout((function () {
      e.show()
    }), 300)
  }, Oe.prototype.dismiss = k.safewrap((function () {
    this.marked_as_shown || this._mark_delivery({
      invisible: !0
    });
    var e, t, n, i = this.showing_video ? this._get_el("video") : this._get_notification_display_el();
    this.use_transitions ? (this._remove_class("bg", "visible"), this._add_class(i, "exiting"), setTimeout(this._remove_notification_el, Oe.ANIM_TIME)) : (this.mini ? (e = "right", t = 20, n = -100) : (e = "top", t = Oe.NOTIF_TOP, n = Oe.NOTIF_START_TOP + Oe.NOTIF_TOP), this._animate_els([{
      el: this._get_el("bg"),
      attr: "opacity",
      start: Oe.BG_OPACITY,
      goal: 0
    }, {
      el: i,
      attr: "opacity",
      start: 1,
      goal: 0
    }, {
      el: i,
      attr: e,
      start: t,
      goal: n
    }], Oe.ANIM_TIME, this._remove_notification_el))
  })), Oe.prototype._add_class = k.safewrap((function (e, t) {
    t = Oe.MARKUP_PREFIX + "-" + t, "string" == typeof e && (e = this._get_el(e)), e.className ? ~(" " + e.className + " ").indexOf(" " + t + " ") || (e.className += " " + t) : e.className = t
  })), Oe.prototype._remove_class = k.safewrap((function (e, t) {
    t = Oe.MARKUP_PREFIX + "-" + t, "string" == typeof e && (e = this._get_el(e)), e.className && (e.className = (" " + e.className + " ").replace(" " + t + " ", "").replace(/^[\s\xA0]+/, "").replace(/[\s\xA0]+$/, ""))
  })), Oe.prototype._animate_els = k.safewrap((function (e, t, n, i) {
    var r, o, a, s = this,
      l = !1,
      c = 1 * new Date;
    for (a = c - (i = i || c), r = 0; r < e.length; r++)
      if (void 0 === (o = e[r]).val && (o.val = o.start), o.val !== o.goal) {
        l = !0;
        var u = o.goal - o.start,
          h = o.goal >= o.start ? 1 : -1;
        o.val = o.start + u * a / t, "opacity" !== o.attr && (o.val = Math.round(o.val)), (h > 0 && o.val >= o.goal || h < 0 && o.val <= o.goal) && (o.val = o.goal)
      } if (l) {
      for (r = 0; r < e.length; r++)
        if ((o = e[r]).el) {
          var d = "opacity" === o.attr ? "" : "px";
          o.el.style[o.attr] = String(o.val) + d
        } setTimeout((function () {
        s._animate_els(e, t, n, i)
      }), 10)
    } else n && n()
  })), Oe.prototype._attach_and_animate = k.safewrap((function () {
    var e = this;
    if (!this.shown && !this._get_shown_campaigns()[this.campaign_id]) {
      this.shown = !0, this.body_el.appendChild(this.notification_el), setTimeout((function () {
        var t, n, i, r = e._get_notification_display_el();
        e.use_transitions ? (e.mini || e._add_class("bg", "visible"), e._add_class(r, "visible"), e._mark_as_shown()) : (e.mini ? (t = "right", n = -100, i = 20) : (t = "top", n = Oe.NOTIF_START_TOP + Oe.NOTIF_TOP, i = Oe.NOTIF_TOP), e._animate_els([{
          el: e._get_el("bg"),
          attr: "opacity",
          start: 0,
          goal: Oe.BG_OPACITY
        }, {
          el: r,
          attr: "opacity",
          start: 0,
          goal: 1
        }, {
          el: r,
          attr: t,
          start: n,
          goal: i
        }], Oe.ANIM_TIME, e._mark_as_shown))
      }), 100), k.register_event(e._get_el("cancel"), "click", (function (t) {
        t.preventDefault(), e.dismiss()
      }));
      var t = e._get_el("button") || e._get_el("mini-content");
      k.register_event(t, "click", (function (t) {
        if (t.preventDefault(), e.show_video) e._track_event("$campaign_open", {
          $resource_type: "video"
        }), e._switch_to_video();
        else if (e.dismiss(), e.clickthrough) {
          var n = null;
          e.mixpanel.get_config("inapp_link_new_window") ? window.open(e.dest_url) : n = function () {
            window.location.href = e.dest_url
          }, e._track_event("$campaign_open", {
            $resource_type: "link"
          }, n)
        }
      }))
    }
  })), Oe.prototype._get_el = function (e) {
    return document.getElementById(Oe.MARKUP_PREFIX + "-" + e)
  }, Oe.prototype._get_notification_display_el = function () {
    return this._get_el(this.notif_type)
  }, Oe.prototype._get_shown_campaigns = function () {
    return this.persistence.props.__cmpns || (this.persistence.props.__cmpns = {})
  }, Oe.prototype._matches_event_data = k.safewrap((function (e) {
    for (var t = e.event || "", n = 0; n < this.display_triggers.length; n++) {
      var i = this.display_triggers[n];
      if ("$any_event" === (i.event || "") || t === i.event) {
        if (!i.selector || k.isEmptyObject(i.selector)) return !0;
        if (Re(i.selector, e.properties)) return !0
      }
    }
    return !1
  })), Oe.prototype._browser_lte = function (e, t) {
    return this.browser_versions[e] && this.browser_versions[e] <= t
  }, Oe.prototype._init_image_html = function () {
    var e = [];
    return this.mini ? (this.thumb_image_url = this.thumb_image_url || this.cdn_host + "/site_media/images/icons/notifications/mini-news-dark.png", e.push(this.thumb_image_url)) : (this.image_url ? (e.push(this.image_url), this.img_html = '<img id="img" src="' + this.image_url + '"/>') : this.img_html = "", this.thumb_image_url ? (e.push(this.thumb_image_url), this.thumb_img_html = '<div id="thumbborder-wrapper"><div id="thumbborder"></div></div><img id="thumbnail" src="' + this.thumb_image_url + '" width="' + Oe.THUMB_IMG_SIZE + '" height="' + Oe.THUMB_IMG_SIZE + '"/><div id="thumbspacer"></div>') : this.thumb_img_html = ""), e
  }, Oe.prototype._init_notification_el = function () {
    var e = "",
      t = "",
      n = "",
      i = '<div id="cancel"><div id="cancel-icon"></div></div>';
    if (this.notification_el = document.createElement("div"), this.notification_el.id = Oe.MARKUP_PREFIX + "-wrapper", this.mini) e = '<div id="mini"><div id="mainbox">' + i + '<div id="mini-content"><div id="mini-icon"><div id="mini-icon-img"></div></div><div id="body"><div id="body-text"><div>' + this.body + '</div></div></div></div></div><div id="mini-border"></div></div>';
    else {
      var r = this.clickthrough || this.show_video ? "" : '<div id="button-close"></div>',
        o = this.show_video ? '<div id="button-play"></div>' : "";
      this._browser_lte("ie", 7) && (r = "", o = ""), e = '<div id="takeover">' + this.thumb_img_html + '<div id="mainbox">' + i + '<div id="content">' + this.img_html + '<div id="title">' + this.title + '</div><div id="body">' + this.body + '</div><div id="tagline"><a href="http://mixpanel.com?from=inapp" target="_blank">POWERED BY MIXPANEL</a></div></div><div id="button">' + r + '<a id="button-link" href="' + this.dest_url + '">' + this.cta + "</a>" + o + "</div></div></div>"
    }
    this.youtube_video ? (t = this.resource_protocol + "www.youtube.com/embed/" + this.youtube_video + "?wmode=transparent&showinfo=0&modestbranding=0&rel=0&autoplay=1&loop=0&vq=hd1080", this.yt_custom && (t += "&enablejsapi=1&html5=1&controls=0", n = '<div id="video-controls"><div id="video-progress" class="video-progress-el"><div id="video-progress-total" class="video-progress-el"></div><div id="video-elapsed" class="video-progress-el"></div></div><div id="video-time" class="video-progress-el"></div></div>')) : this.vimeo_video && (t = this.resource_protocol + "player.vimeo.com/video/" + this.vimeo_video + "?autoplay=1&title=0&byline=0&portrait=0"), this.show_video && (this.video_iframe = '<iframe id="' + Oe.MARKUP_PREFIX + '-video-frame" width="' + this.video_width + '" height="' + this.video_height + '"  src="' + t + '" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen="1" scrolling="no"></iframe>', n = '<div id="video-' + (this.flip_animate ? "" : "no") + 'flip"><div id="video"><div id="video-holder"></div>' + n + "</div></div>");
    var a = n + e;
    this.flip_animate && (a = (this.mini ? e : "") + '<div id="flipcontainer"><div id="flipper">' + (this.mini ? n : a) + "</div></div>"), this.notification_el.innerHTML = ('<div id="overlay" class="' + this.notif_type + '"><div id="campaignid-' + this.campaign_id + '"><div id="bgwrapper"><div id="bg"></div>' + a + "</div></div></div>").replace(/class="/g, 'class="' + Oe.MARKUP_PREFIX + "-").replace(/id="/g, 'id="' + Oe.MARKUP_PREFIX + "-")
  }, Oe.prototype._init_styles = function () {
    "dark" === this.style ? this.style_vals = {
      bg: "#1d1f25",
      bg_actions: "#282b32",
      bg_hover: "#3a4147",
      bg_light: "#4a5157",
      border_gray: "#32353c",
      cancel_opacity: "0.4",
      mini_hover: "#2a3137",
      text_title: "#fff",
      text_main: "#9498a3",
      text_tagline: "#464851",
      text_hover: "#ddd"
    } : this.style_vals = {
      bg: "#fff",
      bg_actions: "#e7eaee",
      bg_hover: "#eceff3",
      bg_light: "#f5f5f5",
      border_gray: "#e4ecf2",
      cancel_opacity: "1.0",
      mini_hover: "#fafafa",
      text_title: "#5c6578",
      text_main: "#8b949b",
      text_tagline: "#ced9e6",
      text_hover: "#7c8598"
    };
    var e = "0px 0px 35px 0px rgba(45, 49, 56, 0.7)",
      t = e,
      n = e,
      i = Oe.THUMB_IMG_SIZE + 2 * Oe.THUMB_BORDER_SIZE,
      r = Oe.ANIM_TIME / 1e3 + "s";
    this.mini && (e = "none");
    var o = {};
    o["@media only screen and (max-width: " + (Oe.NOTIF_WIDTH_MINI + 20 - 1) + "px)"] = {
      "#overlay": {
        display: "none"
      }
    };
    var a = {
      ".flipped": {
        transform: "rotateY(180deg)"
      },
      "#overlay": {
        position: "fixed",
        top: "0",
        left: "0",
        width: "100%",
        height: "100%",
        overflow: "auto",
        "text-align": "center",
        "z-index": "10000",
        "font-family": '"Helvetica", "Arial", sans-serif',
        "-webkit-font-smoothing": "antialiased",
        "-moz-osx-font-smoothing": "grayscale"
      },
      "#overlay.mini": {
        height: "0",
        overflow: "visible"
      },
      "#overlay a": {
        width: "initial",
        padding: "0",
        "text-decoration": "none",
        "text-transform": "none",
        color: "inherit"
      },
      "#bgwrapper": {
        position: "relative",
        width: "100%",
        height: "100%"
      },
      "#bg": {
        position: "fixed",
        top: "0",
        left: "0",
        width: "100%",
        height: "100%",
        "min-width": 4 * this.doc_width + "px",
        "min-height": 4 * this.doc_height + "px",
        "background-color": "black",
        opacity: "0.0",
        "-ms-filter": "progid:DXImageTransform.Microsoft.Alpha(Opacity=60)",
        filter: "alpha(opacity=60)",
        transition: "opacity " + r
      },
      "#bg.visible": {
        opacity: Oe.BG_OPACITY
      },
      ".mini #bg": {
        width: "0",
        height: "0",
        "min-width": "0"
      },
      "#flipcontainer": {
        perspective: "1000px",
        position: "absolute",
        width: "100%"
      },
      "#flipper": {
        position: "relative",
        "transform-style": "preserve-3d",
        transition: "0.3s"
      },
      "#takeover": {
        position: "absolute",
        left: "50%",
        width: Oe.NOTIF_WIDTH + "px",
        "margin-left": Math.round(-Oe.NOTIF_WIDTH / 2) + "px",
        "backface-visibility": "hidden",
        transform: "rotateY(0deg)",
        opacity: "0.0",
        top: Oe.NOTIF_START_TOP + "px",
        transition: "opacity " + r + ", top " + r
      },
      "#takeover.visible": {
        opacity: "1.0",
        top: Oe.NOTIF_TOP + "px"
      },
      "#takeover.exiting": {
        opacity: "0.0",
        top: Oe.NOTIF_START_TOP + "px"
      },
      "#thumbspacer": {
        height: Oe.THUMB_OFFSET + "px"
      },
      "#thumbborder-wrapper": {
        position: "absolute",
        top: -Oe.THUMB_BORDER_SIZE + "px",
        left: Oe.NOTIF_WIDTH / 2 - Oe.THUMB_OFFSET - Oe.THUMB_BORDER_SIZE + "px",
        width: i + "px",
        height: i / 2 + "px",
        overflow: "hidden"
      },
      "#thumbborder": {
        position: "absolute",
        width: i + "px",
        height: i + "px",
        "border-radius": i + "px",
        "background-color": this.style_vals.bg_actions,
        opacity: "0.5"
      },
      "#thumbnail": {
        position: "absolute",
        top: "0px",
        left: Oe.NOTIF_WIDTH / 2 - Oe.THUMB_OFFSET + "px",
        width: Oe.THUMB_IMG_SIZE + "px",
        height: Oe.THUMB_IMG_SIZE + "px",
        overflow: "hidden",
        "z-index": "100",
        "border-radius": Oe.THUMB_IMG_SIZE + "px"
      },
      "#mini": {
        position: "absolute",
        right: "20px",
        top: Oe.NOTIF_TOP + "px",
        width: this.notif_width + "px",
        height: 2 * Oe.NOTIF_HEIGHT_MINI + "px",
        "margin-top": 20 - Oe.NOTIF_HEIGHT_MINI + "px",
        "backface-visibility": "hidden",
        opacity: "0.0",
        transform: "rotateX(90deg)",
        transition: "opacity 0.3s, transform 0.3s, right 0.3s"
      },
      "#mini.visible": {
        opacity: "1.0",
        transform: "rotateX(0deg)"
      },
      "#mini.exiting": {
        opacity: "0.0",
        right: "-150px"
      },
      "#mainbox": {
        "border-radius": "4px",
        "box-shadow": e,
        "text-align": "center",
        "background-color": this.style_vals.bg,
        "font-size": "14px",
        color: this.style_vals.text_main
      },
      "#mini #mainbox": {
        height: Oe.NOTIF_HEIGHT_MINI + "px",
        "margin-top": Oe.NOTIF_HEIGHT_MINI + "px",
        "border-radius": "3px",
        transition: "background-color " + r
      },
      "#mini-border": {
        height: Oe.NOTIF_HEIGHT_MINI + 6 + "px",
        width: Oe.NOTIF_WIDTH_MINI + 6 + "px",
        position: "absolute",
        top: "-3px",
        left: "-3px",
        "margin-top": Oe.NOTIF_HEIGHT_MINI + "px",
        "border-radius": "6px",
        opacity: "0.25",
        "background-color": "#fff",
        "z-index": "-1",
        "box-shadow": n
      },
      "#mini-icon": {
        position: "relative",
        display: "inline-block",
        width: "75px",
        height: Oe.NOTIF_HEIGHT_MINI + "px",
        "border-radius": "3px 0 0 3px",
        "background-color": this.style_vals.bg_actions,
        background: "linear-gradient(135deg, " + this.style_vals.bg_light + " 0%, " + this.style_vals.bg_actions + " 100%)",
        transition: "background-color " + r
      },
      "#mini:hover #mini-icon": {
        "background-color": this.style_vals.mini_hover
      },
      "#mini:hover #mainbox": {
        "background-color": this.style_vals.mini_hover
      },
      "#mini-icon-img": {
        position: "absolute",
        "background-image": "url(" + this.thumb_image_url + ")",
        width: "48px",
        height: "48px",
        top: "20px",
        left: "12px"
      },
      "#content": {
        padding: "30px 20px 0px 20px"
      },
      "#mini-content": {
        "text-align": "left",
        height: Oe.NOTIF_HEIGHT_MINI + "px",
        cursor: "pointer"
      },
      "#img": {
        width: "328px",
        "margin-top": "30px",
        "border-radius": "5px"
      },
      "#title": {
        "max-height": "600px",
        overflow: "hidden",
        "word-wrap": "break-word",
        padding: "25px 0px 20px 0px",
        "font-size": "19px",
        "font-weight": "bold",
        color: this.style_vals.text_title
      },
      "#body": {
        "max-height": "600px",
        "margin-bottom": "25px",
        overflow: "hidden",
        "word-wrap": "break-word",
        "line-height": "21px",
        "font-size": "15px",
        "font-weight": "normal",
        "text-align": "left"
      },
      "#mini #body": {
        display: "inline-block",
        "max-width": "250px",
        margin: "0 0 0 30px",
        height: Oe.NOTIF_HEIGHT_MINI + "px",
        "font-size": "16px",
        "letter-spacing": "0.8px",
        color: this.style_vals.text_title
      },
      "#mini #body-text": {
        display: "table",
        height: Oe.NOTIF_HEIGHT_MINI + "px"
      },
      "#mini #body-text div": {
        display: "table-cell",
        "vertical-align": "middle"
      },
      "#tagline": {
        "margin-bottom": "15px",
        "font-size": "10px",
        "font-weight": "600",
        "letter-spacing": "0.8px",
        color: "#ccd7e0",
        "text-align": "left"
      },
      "#tagline a": {
        color: this.style_vals.text_tagline,
        transition: "color " + r
      },
      "#tagline a:hover": {
        color: this.style_vals.text_hover
      },
      "#cancel": {
        position: "absolute",
        right: "0",
        width: "8px",
        height: "8px",
        padding: "10px",
        "border-radius": "20px",
        margin: "12px 12px 0 0",
        "box-sizing": "content-box",
        cursor: "pointer",
        transition: "background-color " + r
      },
      "#mini #cancel": {
        margin: "7px 7px 0 0"
      },
      "#cancel-icon": {
        width: "8px",
        height: "8px",
        overflow: "hidden",
        "background-image": "url(" + this.cdn_host + "/site_media/images/icons/notifications/cancel-x.png)",
        opacity: this.style_vals.cancel_opacity
      },
      "#cancel:hover": {
        "background-color": this.style_vals.bg_hover
      },
      "#button": {
        display: "block",
        height: "60px",
        "line-height": "60px",
        "text-align": "center",
        "background-color": this.style_vals.bg_actions,
        "border-radius": "0 0 4px 4px",
        overflow: "hidden",
        cursor: "pointer",
        transition: "background-color " + r
      },
      "#button-close": {
        display: "inline-block",
        width: "9px",
        height: "60px",
        "margin-right": "8px",
        "vertical-align": "top",
        "background-image": "url(" + this.cdn_host + "/site_media/images/icons/notifications/close-x-" + this.style + ".png)",
        "background-repeat": "no-repeat",
        "background-position": "0px 25px"
      },
      "#button-play": {
        display: "inline-block",
        width: "30px",
        height: "60px",
        "margin-left": "15px",
        "background-image": "url(" + this.cdn_host + "/site_media/images/icons/notifications/play-" + this.style + "-small.png)",
        "background-repeat": "no-repeat",
        "background-position": "0px 15px"
      },
      "a#button-link": {
        display: "inline-block",
        "vertical-align": "top",
        "text-align": "center",
        "font-size": "17px",
        "font-weight": "bold",
        overflow: "hidden",
        "word-wrap": "break-word",
        color: this.style_vals.text_title,
        transition: "color " + r
      },
      "#button:hover": {
        "background-color": this.style_vals.bg_hover,
        color: this.style_vals.text_hover
      },
      "#button:hover a": {
        color: this.style_vals.text_hover
      },
      "#video-noflip": {
        position: "relative",
        top: 2 * -this.video_height + "px"
      },
      "#video-flip": {
        "backface-visibility": "hidden",
        transform: "rotateY(180deg)"
      },
      "#video": {
        position: "absolute",
        width: this.video_width - 1 + "px",
        height: this.video_height + "px",
        top: Oe.NOTIF_TOP + "px",
        "margin-top": "100px",
        left: "50%",
        "margin-left": Math.round(-this.video_width / 2) + "px",
        overflow: "hidden",
        "border-radius": "5px",
        "box-shadow": t,
        transform: "translateZ(1px)",
        transition: "opacity " + r + ", top " + r
      },
      "#video.exiting": {
        opacity: "0.0",
        top: this.video_height + "px"
      },
      "#video-holder": {
        position: "absolute",
        width: this.video_width - 1 + "px",
        height: this.video_height + "px",
        overflow: "hidden",
        "border-radius": "5px"
      },
      "#video-frame": {
        "margin-left": "-1px",
        width: this.video_width + "px"
      },
      "#video-controls": {
        opacity: "0",
        transition: "opacity 0.5s"
      },
      "#video:hover #video-controls": {
        opacity: "1.0"
      },
      "#video .video-progress-el": {
        position: "absolute",
        bottom: "0",
        height: "25px",
        "border-radius": "0 0 0 5px"
      },
      "#video-progress": {
        width: "90%"
      },
      "#video-progress-total": {
        width: "100%",
        "background-color": this.style_vals.bg,
        opacity: "0.7"
      },
      "#video-elapsed": {
        width: "0",
        "background-color": "#6cb6f5",
        opacity: "0.9"
      },
      "#video #video-time": {
        width: "10%",
        right: "0",
        "font-size": "11px",
        "line-height": "25px",
        color: this.style_vals.text_main,
        "background-color": "#666",
        "border-radius": "0 0 5px 0"
      }
    };
    this._browser_lte("ie", 8) && k.extend(a, {
      "* html #overlay": {
        position: "absolute"
      },
      "* html #bg": {
        position: "absolute"
      },
      "html, body": {
        height: "100%"
      }
    }), this._browser_lte("ie", 7) && k.extend(a, {
      "#mini #body": {
        display: "inline",
        zoom: "1",
        border: "1px solid " + this.style_vals.bg_hover
      },
      "#mini #body-text": {
        padding: "20px"
      },
      "#mini #mini-icon": {
        display: "none"
      }
    });
    var s = ["backface-visibility", "border-radius", "box-shadow", "opacity", "perspective", "transform", "transform-style", "transition"],
      l = ["khtml", "moz", "ms", "o", "webkit"];
    for (var c in a)
      for (var u = 0; u < s.length; u++) {
        var h = s[u];
        if (h in a[c])
          for (var d = a[c][h], f = 0; f < l.length; f++) a[c]["-" + l[f] + "-" + h] = d
      }
    var p, m, g, v, y;
    p = o, g = (m = function (e) {
      var t = "";
      for (var n in e) {
        t += "\n" + n.replace(/#/g, "#" + Oe.MARKUP_PREFIX + "-").replace(/\./g, "." + Oe.MARKUP_PREFIX + "-") + " {";
        var i = e[n];
        for (var r in i) t += r + ":" + i[r] + ";";
        t += "}"
      }
      return t
    })(a) + function (e) {
      var t = "";
      for (var n in e) t += "\n" + n + " {" + m(e[n]) + "\n}";
      return t
    }(p), v = document.head || document.getElementsByTagName("head")[0] || document.documentElement, y = document.createElement("style"), v.appendChild(y), y.setAttribute("type", "text/css"), y.styleSheet ? y.styleSheet.cssText = g : y.textContent = g
  }, Oe.prototype._init_video = k.safewrap((function () {
    if (this.video_url) {
      var e = this;
      e.yt_custom = "postMessage" in window, e.dest_url = e.video_url;
      var t = e.video_url.match(/(?:youtube(?:-nocookie)?\.com\/(?:[^/]+\/.+\/|(?:v|e(?:mbed)?)\/|.*[?&]v=)|youtu\.be\/)([^"&?/ ]{11})/i),
        n = e.video_url.match(/vimeo\.com\/.*?(\d+)/i);
      if (t) {
        if (e.show_video = !0, e.youtube_video = t[1], e.yt_custom) {
          window.onYouTubeIframeAPIReady = function () {
            e._get_el("video-frame") && e._yt_video_ready()
          };
          var i = document.createElement("script");
          i.src = e.resource_protocol + "www.youtube.com/iframe_api";
          var r = document.getElementsByTagName("script")[0];
          r.parentNode.insertBefore(i, r)
        }
      } else n && (e.show_video = !0, e.vimeo_video = n[1]);
      (e._browser_lte("ie", 7) || e._browser_lte("firefox", 3)) && (e.show_video = !1, e.clickthrough = !0)
    }
  })), Oe.prototype._mark_as_shown = k.safewrap((function () {
    var e = this;
    k.register_event(e._get_el("bg"), "click", (function () {
      e.dismiss()
    }));
    var t = function (e, t) {
      var n = {};
      return document.defaultView && document.defaultView.getComputedStyle ? n = document.defaultView.getComputedStyle(e, null) : e.currentStyle && (n = e.currentStyle), n[t]
    };
    if (this.campaign_id) {
      var n = this._get_el("overlay");
      n && "hidden" !== t(n, "visibility") && "none" !== t(n, "display") && this._mark_delivery()
    }
  })), Oe.prototype._mark_delivery = k.safewrap((function (e) {
    this.marked_as_shown || (this.marked_as_shown = !0, this.campaign_id && (this._get_shown_campaigns()[this.campaign_id] = 1 * new Date, this.persistence.save()), this._track_event("$campaign_delivery", e), this.mixpanel.people.append({
      $campaigns: this.campaign_id,
      $notifications: {
        campaign_id: this.campaign_id,
        message_id: this.message_id,
        type: "web",
        time: new Date
      }
    }))
  })), Oe.prototype._preload_images = function (e) {
    var t = this;
    if (0 !== this.imgs_to_preload.length) {
      for (var n = 0, i = [], r = function () {
          ++n === t.imgs_to_preload.length && e && (e(), e = null)
        }, o = 0; o < this.imgs_to_preload.length; o++) {
        var a = new Image;
        a.onload = r, a.src = this.imgs_to_preload[o], a.complete && r(), i.push(a)
      }
      this._browser_lte("ie", 7) && setTimeout((function () {
        var t = !0;
        for (o = 0; o < i.length; o++) i[o].complete || (t = !1);
        t && e && (e(), e = null)
      }), 500)
    } else e()
  }, Oe.prototype._remove_notification_el = k.safewrap((function () {
    window.clearInterval(this._video_progress_checker), this.notification_el.style.visibility = "hidden", this.body_el.removeChild(this.notification_el)
  })), Oe.prototype._set_client_config = function () {
    var e = function (e) {
      var t = navigator.userAgent.match(e);
      return t && t[1]
    };
    this.browser_versions = {}, this.browser_versions.chrome = e(/Chrome\/(\d+)/), this.browser_versions.firefox = e(/Firefox\/(\d+)/), this.browser_versions.ie = e(/MSIE (\d+).+/), !this.browser_versions.ie && !window.ActiveXObject && "ActiveXObject" in window && (this.browser_versions.ie = 11), this.body_el = document.body || document.getElementsByTagName("body")[0], this.body_el && (this.doc_width = Math.max(this.body_el.scrollWidth, document.documentElement.scrollWidth, this.body_el.offsetWidth, document.documentElement.offsetWidth, this.body_el.clientWidth, document.documentElement.clientWidth), this.doc_height = Math.max(this.body_el.scrollHeight, document.documentElement.scrollHeight, this.body_el.offsetHeight, document.documentElement.offsetHeight, this.body_el.clientHeight, document.documentElement.clientHeight));
    var t = this.browser_versions.ie,
      n = document.createElement("div").style,
      i = function (e) {
        if (e in n) return !0;
        if (!t)
          for (var i = ["O" + (e = e[0].toUpperCase() + e.slice(1)), "Webkit" + e, "Moz" + e], r = 0; r < i.length; r++)
            if (i[r] in n) return !0;
        return !1
      };
    this.use_transitions = this.body_el && i("transition") && i("transform"), this.flip_animate = (this.browser_versions.chrome >= 33 || this.browser_versions.firefox >= 15) && this.body_el && i("backfaceVisibility") && i("perspective") && i("transform")
  }, Oe.prototype._switch_to_video = k.safewrap((function () {
    var e = this,
      t = [{
        el: e._get_notification_display_el(),
        attr: "opacity",
        start: 1,
        goal: 0
      }, {
        el: e._get_notification_display_el(),
        attr: "top",
        start: Oe.NOTIF_TOP,
        goal: -500
      }, {
        el: e._get_el("video-noflip"),
        attr: "opacity",
        start: 0,
        goal: 1
      }, {
        el: e._get_el("video-noflip"),
        attr: "top",
        start: 2 * -e.video_height,
        goal: 0
      }];
    if (e.mini) {
      var n = e._get_el("bg"),
        i = e._get_el("overlay");
      n.style.width = "100%", n.style.height = "100%", i.style.width = "100%", e._add_class(e._get_notification_display_el(), "exiting"), e._add_class(n, "visible"), t.push({
        el: e._get_el("bg"),
        attr: "opacity",
        start: 0,
        goal: Oe.BG_OPACITY
      })
    }
    e._get_el("video-holder").innerHTML = e.video_iframe;
    var r = function () {
      window.YT && window.YT.loaded && e._yt_video_ready(), e.showing_video = !0, e._get_notification_display_el().style.visibility = "hidden"
    };
    e.flip_animate ? (e._add_class("flipper", "flipped"), setTimeout(r, Oe.ANIM_TIME)) : e._animate_els(t, Oe.ANIM_TIME, r)
  })), Oe.prototype._track_event = function (e, t, n) {
    this.campaign_id ? (t = t || {}, t = k.extend(t, {
      campaign_id: this.campaign_id,
      message_id: this.message_id,
      message_type: "web_inapp",
      message_subtype: this.notif_type
    }), this.mixpanel.track(e, t, n)) : n && n.call()
  }, Oe.prototype._yt_video_ready = k.safewrap((function () {
    var e = this;
    if (!e.video_inited) {
      e.video_inited = !0;
      var t = e._get_el("video-elapsed"),
        n = e._get_el("video-time"),
        i = e._get_el("video-progress");
      new window.YT.Player(Oe.MARKUP_PREFIX + "-video-frame", {
        events: {
          onReady: function (r) {
            var o = r.target,
              a = o.getDuration(),
              s = function (e) {
                return ("00" + e).slice(-2)
              },
              l = function (e) {
                var t = Math.round(a - e),
                  i = Math.floor(t / 60),
                  r = Math.floor(i / 60);
                t -= 60 * i, i -= 60 * r, n.innerHTML = "-" + (r ? r + ":" : "") + s(i) + ":" + s(t)
              };
            l(0), e._video_progress_checker = window.setInterval((function () {
              var e = o.getCurrentTime();
              t.style.width = e / a * 100 + "%", l(e)
            }), 250), k.register_event(i, "click", (function (e) {
              var t = Math.max(0, e.pageX - i.getBoundingClientRect().left);
              o.seekTo(a * t / i.clientWidth, !0)
            }))
          }
        }
      })
    }
  }));
  var ke, Ne, Fe = function () {};
  k.extend(Fe.prototype, ue), Fe.prototype._init = function (e) {
    this._mixpanel = e
  }, Fe.prototype.set = ne((function (e, t, n) {
    var i = this.set_action(e, t);
    return k.isObject(e) && (n = t), this._get_config("save_referrer") && this._mixpanel.persistence.update_referrer_info(document.referrer), i.$set = k.extend({}, k.info.people_properties(), this._mixpanel.persistence.get_referrer_info(), i.$set), this._send_request(i, n)
  })), Fe.prototype.set_once = ne((function (e, t, n) {
    var i = this.set_once_action(e, t);
    return k.isObject(e) && (n = t), this._send_request(i, n)
  })), Fe.prototype.unset = ne((function (e, t) {
    var n = this.unset_action(e);
    return this._send_request(n, t)
  })), Fe.prototype.increment = ne((function (e, t, n) {
    var i = {},
      r = {};
    return k.isObject(e) ? (k.each(e, (function (e, t) {
      if (!this._is_reserved_property(t)) {
        if (isNaN(parseFloat(e))) return void F("Invalid increment value passed to mixpanel.people.increment - must be a number");
        r[t] = e
      }
    }), this), n = t) : (k.isUndefined(t) && (t = 1), r[e] = t), i.$add = r, this._send_request(i, n)
  })), Fe.prototype.append = ne((function (e, t, n) {
    k.isObject(e) && (n = t);
    var i = this.append_action(e, t);
    return this._send_request(i, n)
  })), Fe.prototype.remove = ne((function (e, t, n) {
    k.isObject(e) && (n = t);
    var i = this.remove_action(e, t);
    return this._send_request(i, n)
  })), Fe.prototype.union = ne((function (e, t, n) {
    k.isObject(e) && (n = t);
    var i = this.union_action(e, t);
    return this._send_request(i, n)
  })), Fe.prototype.track_charge = ne((function (e, t, n) {
    if (k.isNumber(e) || (e = parseFloat(e), !isNaN(e))) return this.append("$transactions", k.extend({
      $amount: e
    }, t), n);
    F("Invalid value passed to mixpanel.people.track_charge - must be a number")
  })), Fe.prototype.clear_charges = function (e) {
    return this.set("$transactions", [], e)
  }, Fe.prototype.delete_user = function () {
    if (this._identify_called()) {
      var e = {
        $delete: this._mixpanel.get_distinct_id()
      };
      return this._send_request(e)
    }
    F("mixpanel.people.delete_user() requires you to call identify() first")
  }, Fe.prototype.toString = function () {
    return this._mixpanel.toString() + ".people"
  }, Fe.prototype._send_request = function (e, t) {
    e.$token = this._get_config("token"), e.$distinct_id = this._mixpanel.get_distinct_id();
    var n = this._mixpanel.get_property("$device_id"),
      i = this._mixpanel.get_property("$user_id"),
      r = this._mixpanel.get_property("$had_persisted_distinct_id");
    n && (e.$device_id = n), i && (e.$user_id = i), r && (e.$had_persisted_distinct_id = r);
    var o = k.encodeDates(e),
      a = k.truncate(o, 255),
      s = k.JSONEncode(o),
      l = k.base64Encode(s);
    return this._identify_called() ? (N("MIXPANEL PEOPLE REQUEST:"), N(a), this._mixpanel._send_request(this._get_config("api_host") + "/engage/", {
      data: l
    }, this._mixpanel._prepare_callback(t, a)), a) : (this._enqueue(e), k.isUndefined(t) || (this._get_config("verbose") ? t({
      status: -1,
      error: null
    }) : t(-1)), a)
  }, Fe.prototype._get_config = function (e) {
    return this._mixpanel.get_config(e)
  }, Fe.prototype._identify_called = function () {
    return !0 === this._mixpanel._flags.identify_called
  }, Fe.prototype._enqueue = function (e) {
    "$set" in e ? this._mixpanel.persistence._add_to_people_queue("$set", e) : "$set_once" in e ? this._mixpanel.persistence._add_to_people_queue("$set_once", e) : "$unset" in e ? this._mixpanel.persistence._add_to_people_queue("$unset", e) : "$add" in e ? this._mixpanel.persistence._add_to_people_queue("$add", e) : "$append" in e ? this._mixpanel.persistence._add_to_people_queue("$append", e) : "$remove" in e ? this._mixpanel.persistence._add_to_people_queue("$remove", e) : "$union" in e ? this._mixpanel.persistence._add_to_people_queue("$union", e) : F("Invalid call to _enqueue():", e)
  }, Fe.prototype._flush_one_queue = function (e, t, n, i) {
    var r = this,
      o = k.extend({}, this._mixpanel.persistence._get_queue(e)),
      a = o;
    k.isUndefined(o) || !k.isObject(o) || k.isEmptyObject(o) || (r._mixpanel.persistence._pop_from_people_queue(e, o), i && (a = i(o)), t.call(r, a, (function (t, i) {
      0 === t && r._mixpanel.persistence._add_to_people_queue(e, o), k.isUndefined(n) || n(t, i)
    })))
  }, Fe.prototype._flush = function (e, t, n, i, r, o, a) {
    var s = this,
      l = this._mixpanel.persistence._get_queue("$append"),
      c = this._mixpanel.persistence._get_queue("$remove");
    if (this._flush_one_queue("$set", this.set, e), this._flush_one_queue("$set_once", this.set_once, i), this._flush_one_queue("$unset", this.unset, o, (function (e) {
        return k.keys(e)
      })), this._flush_one_queue("$add", this.increment, t), this._flush_one_queue("$union", this.union, r), !k.isUndefined(l) && k.isArray(l) && l.length) {
      for (var u, h = function (e, t) {
          0 === e && s._mixpanel.persistence._add_to_people_queue("$append", u), k.isUndefined(n) || n(e, t)
        }, d = l.length - 1; d >= 0; d--) u = l.pop(), k.isEmptyObject(u) || s.append(u, h);
      s._mixpanel.persistence.save()
    }
    if (!k.isUndefined(c) && k.isArray(c) && c.length) {
      for (var f, p = function (e, t) {
          0 === e && s._mixpanel.persistence._add_to_people_queue("$remove", f), k.isUndefined(a) || a(e, t)
        }, m = c.length - 1; m >= 0; m--) f = c.pop(), k.isEmptyObject(f) || s.remove(f, p);
      s._mixpanel.persistence.save()
    }
  }, Fe.prototype._is_reserved_property = function (e) {
    return "$distinct_id" === e || "$token" === e || "$device_id" === e || "$user_id" === e || "$had_persisted_distinct_id" === e
  }, Fe.prototype.set = Fe.prototype.set, Fe.prototype.set_once = Fe.prototype.set_once, Fe.prototype.unset = Fe.prototype.unset, Fe.prototype.increment = Fe.prototype.increment, Fe.prototype.append = Fe.prototype.append, Fe.prototype.remove = Fe.prototype.remove, Fe.prototype.union = Fe.prototype.union, Fe.prototype.track_charge = Fe.prototype.track_charge, Fe.prototype.clear_charges = Fe.prototype.clear_charges, Fe.prototype.delete_user = Fe.prototype.delete_user, Fe.prototype.toString = Fe.prototype.toString;
  var Ue = i.XMLHttpRequest && "withCredentials" in new XMLHttpRequest,
    Ve = !Ue && -1 === C.indexOf("MSIE") && -1 === C.indexOf("Mozilla"),
    Be = A.sendBeacon;
  Be && (Be = k.bind(Be, A));
  var ze = {
      api_host: '', // "https://api-js.mixpanel.com",
      api_method: "POST",
      api_transport: "XHR",
      app_host: '', // "https://mixpanel.com",
      autotrack: !0,
      cdn: '', // "https://cdn.mxpnl.com",
      cross_subdomain_cookie: !0,
      persistence: "cookie",
      persistence_name: "",
      cookie_name: "",
      loaded: function () {},
      store_google: !0,
      save_referrer: !0,
      test: !1,
      verbose: !1,
      img: !1,
      track_pageview: !0,
      debug: !1,
      track_links_timeout: 300,
      cookie_expiration: 365,
      upgrade: !1,
      disable_persistence: !1,
      disable_cookie: !1,
      secure_cookie: !1,
      ip: !0,
      opt_out_tracking_by_default: !1,
      opt_out_persistence_by_default: !1,
      opt_out_tracking_persistence_type: "localStorage",
      opt_out_tracking_cookie_prefix: null,
      property_blacklist: [],
      xhr_headers: {},
      inapp_protocol: "//",
      inapp_link_new_window: !1,
      ignore_dnt: !1
    },
    Ge = !1,
    He = function () {},
    We = function (e, t, n) {
      var i, o = "mixpanel" === n ? Ne : Ne[n];
      if (o && 0 === ke) i = o;
      else {
        if (o && !k.isArray(o)) return void F("You have already initialized " + n);
        i = new He
      }
      if (i._cached_groups = {}, i._user_decide_check_complete = !1, i._events_tracked_before_user_decide_check_complete = [], i._init(e, t, n), i.people = new Fe, i.people._init(i), r.DEBUG = r.DEBUG || i.get_config("debug"), i.__autotrack_enabled = i.get_config("autotrack"), i.get_config("autotrack")) {
        X.enabledForProject(i.get_config("token"), 100, 100) ? X.isBrowserSupported() ? X.init(i) : (i.__autotrack_enabled = !1, N("Disabling Automatic Event Collection because this browser is not supported")) : (i.__autotrack_enabled = !1, N("Not in active bucket: disabling Automatic Event Collection."))
      }
      return !k.isUndefined(o) && k.isArray(o) && (i._execute_array.call(i.people, o.people), i._execute_array(o)), i
    };
  He.prototype.init = function (e, t, n) {
    if (k.isUndefined(n)) F("You must name your new library: init(token, config, name)");
    else {
      if ("mixpanel" !== n) {
        var i = We(e, t, n);
        return Ne[n] = i, i._loaded(), i
      }
      F("You must initialize the main mixpanel object right after you include the Mixpanel js snippet")
    }
  }, He.prototype._init = function (e, t, n) {
    this.__loaded = !0, this.config = {}, this._triggered_notifs = [], this.set_config(k.extend({}, ze, t, {
      name: n,
      token: e,
      callback_fn: ("mixpanel" === n ? n : "mixpanel." + n) + "._jsc"
    })), this._jsc = function () {}, this.__dom_loaded_queue = [], this.__request_queue = [], this.__disabled_events = [], this._flags = {
      disable_all_events: !1,
      identify_called: !1
    }, this.persistence = this.cookie = new fe(this.config), this._gdpr_init();
    var i = k.UUID();
    this.get_distinct_id() || this.register_once({
      distinct_id: i,
      $device_id: i
    }, "")
  }, He.prototype._loaded = function () {
    this.get_config("loaded")(this), this.get_config("track_pageview") && this.track_pageview()
  }, He.prototype._dom_loaded = function () {
    k.each(this.__dom_loaded_queue, (function (e) {
      this._track_dom.apply(this, e)
    }), this), this.has_opted_out_tracking() || k.each(this.__request_queue, (function (e) {
      this._send_request.apply(this, e)
    }), this), delete this.__dom_loaded_queue, delete this.__request_queue
  }, He.prototype._track_dom = function (e, t) {
    if (this.get_config("img")) return F("You can't use DOM tracking functions with img = true."), !1;
    if (!Ge) return this.__dom_loaded_queue.push([e, t]), !1;
    var n = (new e).init(this);
    return n.track.apply(n, t)
  }, He.prototype._prepare_callback = function (e, t) {
    if (k.isUndefined(e)) return null;
    if (Ue) {
      return function (n) {
        e(n, t)
      }
    }
    var n = this._jsc,
      i = "" + Math.floor(1e8 * Math.random()),
      r = this.get_config("callback_fn") + "[" + i + "]";
    return n[i] = function (r) {
      delete n[i], e(r, t)
    }, r
  }, He.prototype._send_request = function (e, t, n, i) {
    if (Ve) this.__request_queue.push(arguments);
    else {
      var r = {
          method: this.get_config("api_method"),
          transport: this.get_config("api_transport")
        },
        o = null;
      i || !k.isFunction(n) && "string" != typeof n || (i = n, n = null), n = k.extend(r, n || {}), Ue || (n.method = "GET");
      var a = "POST" === n.method,
        s = Be && a && "sendbeacon" === n.transport.toLowerCase(),
        l = this.get_config("verbose");
      if (t.verbose && (l = !0), this.get_config("test") && (t.test = 1), l && (t.verbose = 1), this.get_config("img") && (t.img = 1), Ue || (i ? t.callback = i : (l || this.get_config("test")) && (t.callback = "(function(){})")), t.ip = this.get_config("ip") ? 1 : 0, t._ = (new Date).getTime().toString(), a && (o = "data=" + t.data, delete t.data), e += "?" + k.HTTPBuildQuery(t), "img" in t) {
        var c = S.createElement("img");
        c.src = e, S.body.appendChild(c)
      } else if (s) try {
        Be(e, o)
      } catch (e) {
        F(e)
      } else if (Ue) try {
        var u = new XMLHttpRequest;
        u.open(n.method, e, !0);
        var h = this.get_config("xhr_headers");
        a && (h["Content-Type"] = "application/x-www-form-urlencoded"), k.each(h, (function (e, t) {
          u.setRequestHeader(t, e)
        })), u.withCredentials = !0, u.onreadystatechange = function () {
          if (4 === u.readyState)
            if (200 === u.status) {
              if (i)
                if (l) {
                  var e;
                  try {
                    e = k.JSONDecode(u.responseText)
                  } catch (e) {
                    return void F(e)
                  }
                  i(e)
                } else i(Number(u.responseText))
            } else {
              var t = "Bad HTTP status: " + u.status + " " + u.statusText;
              F(t), i && i(l ? {
                status: 0,
                error: t
              } : 0)
            }
        }, u.send(o)
      } catch (e) {
        F(e)
      } else {
        var d = S.createElement("script");
        d.type = "text/javascript", d.async = !0, d.defer = !0, d.src = e;
        var f = S.getElementsByTagName("script")[0];
        f.parentNode.insertBefore(d, f)
      }
    }
  }, He.prototype._execute_array = function (e) {
    var t, n = [],
      i = [],
      r = [];
    k.each(e, (function (e) {
      e && (t = e[0], k.isArray(t) ? r.push(e) : "function" == typeof e ? e.call(this) : k.isArray(e) && "alias" === t ? n.push(e) : k.isArray(e) && -1 !== t.indexOf("track") && "function" == typeof this[t] ? r.push(e) : i.push(e))
    }), this);
    var o = function (e, t) {
      k.each(e, (function (e) {
        if (k.isArray(e[0])) {
          var n = t;
          k.each(e, (function (e) {
            n = n[e[0]].apply(n, e.slice(1))
          }))
        } else this[e[0]].apply(this, e.slice(1))
      }), t)
    };
    o(n, this), o(i, this), o(r, this)
  }, He.prototype.push = function (e) {
    this._execute_array([e])
  }, He.prototype.disable = function (e) {
    void 0 === e ? this._flags.disable_all_events = !0 : this.__disabled_events = this.__disabled_events.concat(e)
  }, He.prototype.track = te((function (e, t, n, i) {
    i || "function" != typeof n || (i = n, n = null);
    var r = (n = n || {}).transport;
    if (r && (n.transport = r), "function" != typeof i && (i = function () {}), k.isUndefined(e)) F("No event name provided to mixpanel.track");
    else {
      if (!this._event_is_disabled(e)) {
        (t = t || {}).token = this.get_config("token");
        var o = this.persistence.remove_event_timer(e);
        if (!k.isUndefined(o)) {
          var a = (new Date).getTime() - o;
          t.$duration = parseFloat((a / 1e3).toFixed(3))
        }
        this.persistence.update_search_keyword(S.referrer), this.get_config("store_google") && this.persistence.update_campaign_params(), this.get_config("save_referrer") && this.persistence.update_referrer_info(S.referrer), t = k.extend({}, k.info.properties(), this.persistence.properties(), t);
        var s = this.get_config("property_blacklist");
        k.isArray(s) ? k.each(s, (function (e) {
          delete t[e]
        })) : F("Invalid value for property_blacklist config: " + s);
        var l = {
            event: e,
            properties: t
          },
          c = k.truncate(l, 255),
          u = k.JSONEncode(c),
          h = k.base64Encode(u);
        // return N("MIXPANEL REQUEST:"), N(c), this._send_request(this.get_config("api_host") + "/track/", {
        //   data: h
        // }, n, this._prepare_callback(i, c)), this._check_and_handle_triggered_notifications(l), c

        return N("MIXPANEL REQUEST:"), N(c), '', this._check_and_handle_triggered_notifications(l), c
      }
      i(0)
    }
  })), He.prototype.set_group = te((function (e, t, n) {
    k.isArray(t) || (t = [t]);
    var i = {};
    return i[e] = t, this.register(i), this.people.set(e, t, n)
  })), He.prototype.add_group = te((function (e, t, n) {
    var i = this.get_property(e);
    if (void 0 === i) {
      var r = {};
      r[e] = [t], this.register(r)
    } else -1 === i.indexOf(t) && (i.push(t), this.register(r));
    return this.people.union(e, t, n)
  })), He.prototype.remove_group = te((function (e, t, n) {
    var i = this.get_property(e);
    if (void 0 !== i) {
      var r = i.indexOf(t);
      r > -1 && (i.splice(r, 1), this.register({
        group_key: i
      })), 0 === i.length && this.unregister(e)
    }
    return this.people.remove(e, t, n)
  })), He.prototype.track_with_groups = te((function (e, t, n, i) {
    var r = k.extend({}, t || {});
    return k.each(n, (function (e, t) {
      null != e && (r[t] = e)
    })), this.track(e, r, i)
  })), He.prototype._create_map_key = function (e, t) {
    return e + "_" + JSON.stringify(t)
  }, He.prototype._remove_group_from_cache = function (e, t) {
    delete this._cached_groups[this._create_map_key(e, t)]
  }, He.prototype.get_group = function (e, t) {
    var n = this._create_map_key(e, t),
      i = this._cached_groups[n];
    return void 0 !== i && i._group_key === e && i._group_id === t || ((i = new he)._init(this, e, t), this._cached_groups[n] = i), i
  }, He.prototype.track_pageview = function (e) {
    k.isUndefined(e) && (e = S.location.href), this.track("mp_page_view", k.info.pageviewInfo(e))
  }, He.prototype.track_links = function () {
    return this._track_dom.call(this, K, arguments)
  }, He.prototype.track_forms = function () {
    return this._track_dom.call(this, Q, arguments)
  }, He.prototype.time_event = function (e) {
    k.isUndefined(e) ? F("No event name provided to mixpanel.time_event") : this._event_is_disabled(e) || this.persistence.set_event_timer(e, (new Date).getTime())
  }, He.prototype.register = function (e, t) {
    this.persistence.register(e, t)
  }, He.prototype.register_once = function (e, t, n) {
    this.persistence.register_once(e, t, n)
  }, He.prototype.unregister = function (e) {
    this.persistence.unregister(e)
  }, He.prototype._register_single = function (e, t) {
    var n = {};
    n[e] = t, this.register(n)
  }, He.prototype.identify = function (e, t, n, i, r, o, a, s) {
    var l = this.get_distinct_id();
    if (this.register({
        $user_id: e
      }), !this.get_property("$device_id")) {
      var c = l;
      this.register_once({
        $had_persisted_distinct_id: !0,
        $device_id: c
      }, "")
    }
    e !== l && e !== this.get_property("__alias") && (this.unregister("__alias"), this.register({
      distinct_id: e
    })), this._check_and_handle_notifications(this.get_distinct_id()), this._flags.identify_called = !0, this.people._flush(t, n, i, r, o, a, s), e !== l && this.track("$identify", {
      distinct_id: e,
      $anon_distinct_id: l
    })
  }, He.prototype.reset = function () {
    this.persistence.clear(), this._flags.identify_called = !1;
    var e = k.UUID();
    this.register_once({
      distinct_id: e,
      $device_id: e
    }, "")
  }, He.prototype.get_distinct_id = function () {
    return this.get_property("distinct_id")
  }, He.prototype.alias = function (e, t) {
    if (e === this.get_property("$people_distinct_id")) return U("Attempting to create alias for existing People user - aborting."), -2;
    var n = this;
    return k.isUndefined(t) && (t = this.get_distinct_id()), e !== t ? (this._register_single("__alias", e), this.track("$create_alias", {
      alias: e,
      distinct_id: t
    }, (function () {
      n.identify(e)
    }))) : (F("alias matches current distinct_id - skipping api call."), this.identify(e), -1)
  }, He.prototype.name_tag = function (e) {
    this._register_single("mp_name_tag", e)
  }, He.prototype.set_config = function (e) {
    k.isObject(e) && (k.extend(this.config, e), this.get_config("persistence_name") || (this.config.persistence_name = this.config.cookie_name), this.get_config("disable_persistence") || (this.config.disable_persistence = this.config.disable_cookie), this.persistence && this.persistence.update_config(this.config), r.DEBUG = r.DEBUG || this.get_config("debug"))
  }, He.prototype.get_config = function (e) {
    return this.config[e]
  }, He.prototype.get_property = function (e) {
    return this.persistence.props[e]
  }, He.prototype.toString = function () {
    var e = this.get_config("name");
    return "mixpanel" !== e && (e = "mixpanel." + e), e
  }, He.prototype._event_is_disabled = function (e) {
    return k.isBlockedUA(C) || this._flags.disable_all_events || k.include(this.__disabled_events, e)
  }, He.prototype._check_and_handle_triggered_notifications = te((function (e) {
    if (this._user_decide_check_complete)
      for (var t = this._triggered_notifs, n = 0; n < t.length; n++) {
        if (new Oe(t[n], this)._matches_event_data(e)) return void this._show_notification(t[n])
      } else this._events_tracked_before_user_decide_check_complete.push(e)
  })), He.prototype._check_and_handle_notifications = te((function (e) {
    if (e && !this._flags.identify_called && !this.get_config("disable_notifications")) {
      N("MIXPANEL NOTIFICATION CHECK");
      var t = {
        verbose: !0,
        version: "3",
        lib: "web",
        token: this.get_config("token"),
        distinct_id: e
      };
      this._send_request(this.get_config("api_host") + "/decide/", t, {
        method: "GET",
        transport: "XHR"
      }, this._prepare_callback(k.bind((function (e) {
        if (e.notifications && e.notifications.length > 0) {
          this._triggered_notifs = [];
          var t = [];
          k.each(e.notifications, (function (e) {
            (e.display_triggers && e.display_triggers.length > 0 ? this._triggered_notifs : t).push(e)
          }), this), t.length > 0 && this._show_notification.call(this, t[0])
        }
        this._handle_user_decide_check_complete()
      }), this)))
    }
  })), He.prototype._handle_user_decide_check_complete = function () {
    this._user_decide_check_complete = !0;
    for (var e = this._events_tracked_before_user_decide_check_complete; e.length > 0;) {
      var t = e.shift();
      this._check_and_handle_triggered_notifications(t)
    }
  }, He.prototype._show_notification = function (e) {
    new Oe(e, this).show()
  }, He.prototype._gdpr_init = function () {
    "localStorage" === this.get_config("opt_out_tracking_persistence_type") && k.localStorage.is_supported() && (!this.has_opted_in_tracking() && this.has_opted_in_tracking({
      persistence_type: "cookie"
    }) && this.opt_in_tracking({
      enable_persistence: !1
    }), !this.has_opted_out_tracking() && this.has_opted_out_tracking({
      persistence_type: "cookie"
    }) && this.opt_out_tracking({
      clear_persistence: !1
    }), this.clear_opt_in_out_tracking({
      persistence_type: "cookie",
      enable_persistence: !1
    })), this.has_opted_out_tracking() ? this._gdpr_update_persistence({
      clear_persistence: !0
    }) : this.has_opted_in_tracking() || !this.get_config("opt_out_tracking_by_default") && !k.cookie.get("mp_optout") || (k.cookie.remove("mp_optout"), this.opt_out_tracking({
      clear_persistence: this.get_config("opt_out_persistence_by_default")
    }))
  }, He.prototype._gdpr_update_persistence = function (e) {
    var t;
    if (e && e.clear_persistence) t = !0;
    else {
      if (!e || !e.enable_persistence) return;
      t = !1
    }
    this.get_config("disable_persistence") || this.persistence.disabled === t || this.persistence.set_disabled(t)
  }, He.prototype._gdpr_call_func = function (e, t) {
    return t = k.extend({
      track: k.bind(this.track, this),
      persistence_type: this.get_config("opt_out_tracking_persistence_type"),
      cookie_prefix: this.get_config("opt_out_tracking_cookie_prefix"),
      cookie_expiration: this.get_config("cookie_expiration"),
      cross_subdomain_cookie: this.get_config("cross_subdomain_cookie"),
      secure_cookie: this.get_config("secure_cookie"),
      ignore_dnt: this.get_config("ignore_dnt")
    }, t), k.localStorage.is_supported() || (t.persistence_type = "cookie"), e(this.get_config("token"), {
      track: t.track,
      trackEventName: t.track_event_name,
      trackProperties: t.track_properties,
      persistenceType: t.persistence_type,
      persistencePrefix: t.cookie_prefix,
      cookieExpiration: t.cookie_expiration,
      crossSubdomainCookie: t.cross_subdomain_cookie,
      secureCookie: t.secure_cookie,
      ignoreDnt: t.ignore_dnt
    })
  }, He.prototype.opt_in_tracking = function (e) {
    e = k.extend({
      enable_persistence: !0
    }, e), this._gdpr_call_func(Z, e), this._gdpr_update_persistence(e)
  }, He.prototype.opt_out_tracking = function (e) {
    (e = k.extend({
      clear_persistence: !0,
      delete_user: !0
    }, e)).delete_user && this.people && this.people._identify_called() && (this.people.delete_user(), this.people.clear_charges()), this._gdpr_call_func(J, e), this._gdpr_update_persistence(e)
  }, He.prototype.has_opted_in_tracking = function (e) {
    return this._gdpr_call_func($, e)
  }, He.prototype.has_opted_out_tracking = function (e) {
    return this._gdpr_call_func(ee, e)
  }, He.prototype.clear_opt_in_out_tracking = function (e) {
    e = k.extend({
      enable_persistence: !0
    }, e), this._gdpr_call_func(re, e), this._gdpr_update_persistence(e)
  }, He.prototype.init = He.prototype.init, He.prototype.reset = He.prototype.reset, He.prototype.disable = He.prototype.disable, He.prototype.time_event = He.prototype.time_event, He.prototype.track = He.prototype.track, He.prototype.track_links = He.prototype.track_links, He.prototype.track_forms = He.prototype.track_forms, He.prototype.track_pageview = He.prototype.track_pageview, He.prototype.register = He.prototype.register, He.prototype.register_once = He.prototype.register_once, He.prototype.unregister = He.prototype.unregister, He.prototype.identify = He.prototype.identify, He.prototype.alias = He.prototype.alias, He.prototype.name_tag = He.prototype.name_tag, He.prototype.set_config = He.prototype.set_config, He.prototype.get_config = He.prototype.get_config, He.prototype.get_property = He.prototype.get_property, He.prototype.get_distinct_id = He.prototype.get_distinct_id, He.prototype.toString = He.prototype.toString, He.prototype._check_and_handle_notifications = He.prototype._check_and_handle_notifications, He.prototype._handle_user_decide_check_complete = He.prototype._handle_user_decide_check_complete, He.prototype._show_notification = He.prototype._show_notification, He.prototype.opt_out_tracking = He.prototype.opt_out_tracking, He.prototype.opt_in_tracking = He.prototype.opt_in_tracking, He.prototype.has_opted_out_tracking = He.prototype.has_opted_out_tracking, He.prototype.has_opted_in_tracking = He.prototype.has_opted_in_tracking, He.prototype.clear_opt_in_out_tracking = He.prototype.clear_opt_in_out_tracking, He.prototype.get_group = He.prototype.get_group, He.prototype.set_group = He.prototype.set_group, He.prototype.add_group = He.prototype.add_group, He.prototype.remove_group = He.prototype.remove_group, He.prototype.track_with_groups = He.prototype.track_with_groups, fe.prototype.properties = fe.prototype.properties, fe.prototype.update_search_keyword = fe.prototype.update_search_keyword, fe.prototype.update_referrer_info = fe.prototype.update_referrer_info, fe.prototype.get_cross_subdomain = fe.prototype.get_cross_subdomain, fe.prototype.clear = fe.prototype.clear, k.safewrap_class(He, ["identify", "_check_and_handle_notifications", "_show_notification"]);
  var je = {},
    qe = function () {
      Ne.init = function (e, t, n) {
        if (n) return Ne[n] || (Ne[n] = je[n] = We(e, t, n), Ne[n]._loaded()), Ne[n];
        var r = Ne;
        je.mixpanel ? r = je.mixpanel : e && ((r = We(e, t, "mixpanel"))._loaded(), je.mixpanel = r), Ne = r, 1 === ke && (i.mixpanel = Ne), k.each(je, (function (e, t) {
          "mixpanel" !== t && (Ne[t] = e)
        })), Ne._ = k
      }
    };
  var Xe = (ke = 0, Ne = new He, qe(), Ne.init(), function () {
    function e() {
      e.done || (e.done = !0, Ge = !0, Ve = !1, k.each(je, (function (e) {
        e._dom_loaded()
      })))
    }
    if (S.addEventListener) "complete" === S.readyState ? e() : S.addEventListener("DOMContentLoaded", e, !1);
    else if (S.attachEvent) {
      S.attachEvent("onreadystatechange", e);
      var t = !1;
      try {
        t = null === i.frameElement
      } catch (e) {}
      S.documentElement.doScroll && t && function t() {
        try {
          S.documentElement.doScroll("left")
        } catch (e) {
          return void setTimeout(t, 1)
        }
        e()
      }()
    }
    k.register_event(i, "load", e, !0)
  }(), Ne);
  e.exports = Xe
}, function (e, t) {
  var n;
  n = function () {
    return this
  }();
  try {
    n = n || new Function("return this")()
  } catch (e) {
    "object" == typeof window && (n = window)
  }
  e.exports = n
}, function (e, t, n) {
  var i = n(14),
    r = n(80),
    o = "".split;
  e.exports = i((function () {
    return !Object("z").propertyIsEnumerable(0)
  })) ? function (e) {
    return "String" == r(e) ? o.call(e, "") : Object(e)
  } : Object
}, function (e, t) {
  var n = 0,
    i = Math.random();
  e.exports = function (e) {
    return "Symbol(" + String(void 0 === e ? "" : e) + ")_" + (++n + i).toString(36)
  }
}, function (e, t) {
  e.exports = {}
}, function (e, t, n) {
  var i = n(76),
    r = n(27),
    o = n(112),
    a = function (e) {
      return function (t, n, a) {
        var s, l = i(t),
          c = r(l.length),
          u = o(a, c);
        if (e && n != n) {
          for (; c > u;)
            if ((s = l[u++]) != s) return !0
        } else
          for (; c > u; u++)
            if ((e || u in l) && l[u] === n) return e || u || 0;
        return !e && -1
      }
    };
  e.exports = {
    includes: a(!0),
    indexOf: a(!1)
  }
}, function (e, t, n) {
  var i = n(14),
    r = /#|\.prototype\./,
    o = function (e, t) {
      var n = s[a(e)];
      return n == c || n != l && ("function" == typeof t ? i(t) : !!t)
    },
    a = o.normalize = function (e) {
      return String(e).replace(r, ".").toLowerCase()
    },
    s = o.data = {},
    l = o.NATIVE = "N",
    c = o.POLYFILL = "P";
  e.exports = o
}, function (e, t, n) {
  var i = n(288),
    r = n(212);
  e.exports = Object.keys || function (e) {
    return i(e, r)
  }
}, function (e, t, n) {
  var i = n(22),
    r = n(137),
    o = n(25)("species");
  e.exports = function (e, t) {
    var n;
    return r(e) && ("function" != typeof (n = e.constructor) || n !== Array && !r(n.prototype) ? i(n) && null === (n = n[o]) && (n = void 0) : n = void 0), new(void 0 === n ? Array : n)(0 === t ? 0 : t)
  }
}, function (e, t, n) {
  var i = n(14),
    r = n(25),
    o = n(215),
    a = r("species");
  e.exports = function (e) {
    return o >= 51 || !i((function () {
      var t = [];
      return (t.constructor = {})[a] = function () {
        return {
          foo: 1
        }
      }, 1 !== t[e](Boolean).foo
    }))
  }
}, function (e, t) {
  e.exports = {}
}, function (e, t, n) {
  var i = n(162),
    r = n(160),
    o = n(25)("iterator");
  e.exports = function (e) {
    if (null != e) return e[o] || e["@@iterator"] || r[i(e)]
  }
}, function (e, t, n) {
  var i = n(219),
    r = n(80),
    o = n(25)("toStringTag"),
    a = "Arguments" == r(function () {
      return arguments
    }());
  e.exports = i ? r : function (e) {
    var t, n, i;
    return void 0 === e ? "Undefined" : null === e ? "Null" : "string" == typeof (n = function (e, t) {
      try {
        return e[t]
      } catch (e) {}
    }(t = Object(e), o)) ? n : a ? r(t) : "Object" == (i = r(t)) && "function" == typeof t.callee ? "Arguments" : i
  }
}, function (e, t, n) {
  "use strict";
  var i = n(299).IteratorPrototype,
    r = n(85),
    o = n(99),
    a = n(91),
    s = n(160),
    l = function () {
      return this
    };
  e.exports = function (e, t, n) {
    var c = t + " Iterator";
    return e.prototype = r(i, {
      next: o(1, n)
    }), a(e, c, !1, !0), s[c] = l, e
  }
}, function (e, t, n) {
  var i = n(14);
  e.exports = !i((function () {
    return Object.isExtensible(Object.preventExtensions({}))
  }))
}, function (e, t, n) {
  "use strict";
  var i = n(20),
    r = function (e) {
      var t, n;
      this.promise = new e((function (e, i) {
        if (void 0 !== t || void 0 !== n) throw TypeError("Bad Promise constructor");
        t = e, n = i
      })), this.resolve = i(t), this.reject = i(n)
    };
  e.exports.f = function (e) {
    return new r(e)
  }
}, function (e, t, n) {
  var i = n(22),
    r = n(80),
    o = n(25)("match");
  e.exports = function (e) {
    var t;
    return i(e) && (void 0 !== (t = e[o]) ? !!t : "RegExp" == r(e))
  }
}, function (e, t, n) {
  var i = n(7),
    r = n(161);
  e.exports = function (e) {
    var t = r(e);
    if ("function" != typeof t) throw TypeError(String(e) + " is not iterable");
    return i(t.call(e))
  }
}, function (e, t, n) {
  var i;

  function r(e) {
    return (r = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (e) {
      return typeof e
    } : function (e) {
      return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
    })(e)
  }
  /*! Hammer.JS - v2.0.8 - 2016-04-23
   * http://hammerjs.github.io/
   *
   * Copyright (c) 2016 Jorik Tangelder;
   * Licensed under the MIT license */
  ! function (o, a, s, l) {
    "use strict";
    var c = ["", "webkit", "Moz", "MS", "ms", "o"],
      u = a.createElement("div"),
      h = Math.round,
      d = Math.abs,
      f = Date.now;

    function p(e, t, n) {
      return setTimeout(w(e, n), t)
    }

    function m(e, t, n) {
      return !!Array.isArray(e) && (g(e, n[t], n), !0)
    }

    function g(e, t, n) {
      var i;
      if (e)
        if (e.forEach) e.forEach(t, n);
        else if (void 0 !== e.length)
        for (i = 0; i < e.length;) t.call(n, e[i], i, e), i++;
      else
        for (i in e) e.hasOwnProperty(i) && t.call(n, e[i], i, e)
    }

    function v(e, t, n) {
      var i = "DEPRECATED METHOD: " + t + "\n" + n + " AT \n";
      return function () {
        var t = new Error("get-stack-trace"),
          n = t && t.stack ? t.stack.replace(/^[^\(]+?[\n$]/gm, "").replace(/^\s+at\s+/gm, "").replace(/^Object.<anonymous>\s*\(/gm, "{anonymous}()@") : "Unknown Stack Trace",
          r = o.console && (o.console.warn || o.console.log);
        return r && r.call(o.console, i, n), e.apply(this, arguments)
      }
    }
    var y = function (e) {
        if (null == e) throw new TypeError("Cannot convert undefined or null to object");
        for (var t = Object(e), n = 1; n < arguments.length; n++) {
          var i = arguments[n];
          if (null != i)
            for (var r in i) i.hasOwnProperty(r) && (t[r] = Array.isArray(i[r]) ? i[r].slice(0) : i[r])
        }
        return t
      },
      b = v((function (e, t, n) {
        for (var i = Object.keys(t), r = 0; r < i.length;)(!n || n && void 0 === e[i[r]]) && (e[i[r]] = t[i[r]]), r++;
        return e
      }), "extend", "Use `assign`."),
      _ = v((function (e, t) {
        return b(e, t, !0)
      }), "merge", "Use `assign`.");

    function x(e, t, n) {
      var i, r = t.prototype;
      (i = e.prototype = Object.create(r)).constructor = e, i._super = r, n && y(i, n)
    }

    function w(e, t) {
      return function () {
        return e.apply(t, arguments)
      }
    }

    function E(e, t) {
      return "function" == r(e) ? e.apply(t && t[0] || void 0, t) : e
    }

    function A(e, t) {
      return void 0 === e ? t : e
    }

    function S(e, t, n) {
      g(P(t), (function (t) {
        e.addEventListener(t, n, !1)
      }))
    }

    function M(e, t, n) {
      g(P(t), (function (t) {
        e.removeEventListener(t, n, !1)
      }))
    }

    function T(e, t) {
      for (; e;) {
        if (e == t) return !0;
        e = e.parentNode
      }
      return !1
    }

    function C(e, t) {
      return e.indexOf(t) > -1
    }

    function P(e) {
      return e.trim().split(/\s+/g)
    }

    function L(e, t, n) {
      if (e.indexOf && !n) return e.indexOf(t);
      for (var i = 0; i < e.length;) {
        if (n && e[i][n] == t || !n && e[i] === t) return i;
        i++
      }
      return -1
    }

    function D(e) {
      return Array.prototype.slice.call(e, 0)
    }

    function I(e, t, n) {
      for (var i = [], r = [], o = 0; o < e.length;) {
        var a = t ? e[o][t] : e[o];
        L(r, a) < 0 && i.push(e[o]), r[o] = a, o++
      }
      return n && (i = t ? i.sort((function (e, n) {
        return e[t] > n[t]
      })) : i.sort()), i
    }

    function R(e, t) {
      for (var n, i, r = t[0].toUpperCase() + t.slice(1), o = 0; o < c.length;) {
        if ((i = (n = c[o]) ? n + r : t) in e) return i;
        o++
      }
    }
    var O = 1;

    function k(e) {
      var t = e.ownerDocument || e;
      return t.defaultView || t.parentWindow || o
    }
    var N = "ontouchstart" in o,
      F = void 0 !== R(o, "PointerEvent"),
      U = N && /mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),
      V = ["x", "y"],
      B = ["clientX", "clientY"];

    function z(e, t) {
      var n = this;
      this.manager = e, this.callback = t, this.element = e.element, this.target = e.options.inputTarget, this.domHandler = function (t) {
        E(e.options.enable, [e]) && n.handler(t)
      }, this.init()
    }

    function G(e, t, n) {
      var i = n.pointers.length,
        r = n.changedPointers.length,
        o = 1 & t && i - r == 0,
        a = 12 & t && i - r == 0;
      n.isFirst = !!o, n.isFinal = !!a, o && (e.session = {}), n.eventType = t,
        function (e, t) {
          var n = e.session,
            i = t.pointers,
            r = i.length;
          n.firstInput || (n.firstInput = H(t));
          r > 1 && !n.firstMultiple ? n.firstMultiple = H(t) : 1 === r && (n.firstMultiple = !1);
          var o = n.firstInput,
            a = n.firstMultiple,
            s = a ? a.center : o.center,
            l = t.center = W(i);
          t.timeStamp = f(), t.deltaTime = t.timeStamp - o.timeStamp, t.angle = Y(s, l), t.distance = X(s, l),
            function (e, t) {
              var n = t.center,
                i = e.offsetDelta || {},
                r = e.prevDelta || {},
                o = e.prevInput || {};
              1 !== t.eventType && 4 !== o.eventType || (r = e.prevDelta = {
                x: o.deltaX || 0,
                y: o.deltaY || 0
              }, i = e.offsetDelta = {
                x: n.x,
                y: n.y
              });
              t.deltaX = r.x + (n.x - i.x), t.deltaY = r.y + (n.y - i.y)
            }(n, t), t.offsetDirection = q(t.deltaX, t.deltaY);
          var c = j(t.deltaTime, t.deltaX, t.deltaY);
          t.overallVelocityX = c.x, t.overallVelocityY = c.y, t.overallVelocity = d(c.x) > d(c.y) ? c.x : c.y, t.scale = a ? (u = a.pointers, h = i, X(h[0], h[1], B) / X(u[0], u[1], B)) : 1, t.rotation = a ? function (e, t) {
              return Y(t[1], t[0], B) - Y(e[1], e[0], B)
            }(a.pointers, i) : 0, t.maxPointers = n.prevInput ? t.pointers.length > n.prevInput.maxPointers ? t.pointers.length : n.prevInput.maxPointers : t.pointers.length,
            function (e, t) {
              var n, i, r, o, a = e.lastInterval || t,
                s = t.timeStamp - a.timeStamp;
              if (8 != t.eventType && (s > 25 || void 0 === a.velocity)) {
                var l = t.deltaX - a.deltaX,
                  c = t.deltaY - a.deltaY,
                  u = j(s, l, c);
                i = u.x, r = u.y, n = d(u.x) > d(u.y) ? u.x : u.y, o = q(l, c), e.lastInterval = t
              } else n = a.velocity, i = a.velocityX, r = a.velocityY, o = a.direction;
              t.velocity = n, t.velocityX = i, t.velocityY = r, t.direction = o
            }(n, t);
          var u, h;
          var p = e.element;
          T(t.srcEvent.target, p) && (p = t.srcEvent.target);
          t.target = p
        }(e, n), e.emit("hammer.input", n), e.recognize(n), e.session.prevInput = n
    }

    function H(e) {
      for (var t = [], n = 0; n < e.pointers.length;) t[n] = {
        clientX: h(e.pointers[n].clientX),
        clientY: h(e.pointers[n].clientY)
      }, n++;
      return {
        timeStamp: f(),
        pointers: t,
        center: W(t),
        deltaX: e.deltaX,
        deltaY: e.deltaY
      }
    }

    function W(e) {
      var t = e.length;
      if (1 === t) return {
        x: h(e[0].clientX),
        y: h(e[0].clientY)
      };
      for (var n = 0, i = 0, r = 0; r < t;) n += e[r].clientX, i += e[r].clientY, r++;
      return {
        x: h(n / t),
        y: h(i / t)
      }
    }

    function j(e, t, n) {
      return {
        x: t / e || 0,
        y: n / e || 0
      }
    }

    function q(e, t) {
      return e === t ? 1 : d(e) >= d(t) ? e < 0 ? 2 : 4 : t < 0 ? 8 : 16
    }

    function X(e, t, n) {
      n || (n = V);
      var i = t[n[0]] - e[n[0]],
        r = t[n[1]] - e[n[1]];
      return Math.sqrt(i * i + r * r)
    }

    function Y(e, t, n) {
      n || (n = V);
      var i = t[n[0]] - e[n[0]],
        r = t[n[1]] - e[n[1]];
      return 180 * Math.atan2(r, i) / Math.PI
    }
    z.prototype = {
      handler: function () {},
      init: function () {
        this.evEl && S(this.element, this.evEl, this.domHandler), this.evTarget && S(this.target, this.evTarget, this.domHandler), this.evWin && S(k(this.element), this.evWin, this.domHandler)
      },
      destroy: function () {
        this.evEl && M(this.element, this.evEl, this.domHandler), this.evTarget && M(this.target, this.evTarget, this.domHandler), this.evWin && M(k(this.element), this.evWin, this.domHandler)
      }
    };
    var K = {
      mousedown: 1,
      mousemove: 2,
      mouseup: 4
    };

    function Q() {
      this.evEl = "mousedown", this.evWin = "mousemove mouseup", this.pressed = !1, z.apply(this, arguments)
    }
    x(Q, z, {
      handler: function (e) {
        var t = K[e.type];
        1 & t && 0 === e.button && (this.pressed = !0), 2 & t && 1 !== e.which && (t = 4), this.pressed && (4 & t && (this.pressed = !1), this.callback(this.manager, t, {
          pointers: [e],
          changedPointers: [e],
          pointerType: "mouse",
          srcEvent: e
        }))
      }
    });
    var Z = {
        pointerdown: 1,
        pointermove: 2,
        pointerup: 4,
        pointercancel: 8,
        pointerout: 8
      },
      J = {
        2: "touch",
        3: "pen",
        4: "mouse",
        5: "kinect"
      },
      $ = "pointerdown",
      ee = "pointermove pointerup pointercancel";

    function te() {
      this.evEl = $, this.evWin = ee, z.apply(this, arguments), this.store = this.manager.session.pointerEvents = []
    }
    o.MSPointerEvent && !o.PointerEvent && ($ = "MSPointerDown", ee = "MSPointerMove MSPointerUp MSPointerCancel"), x(te, z, {
      handler: function (e) {
        var t = this.store,
          n = !1,
          i = e.type.toLowerCase().replace("ms", ""),
          r = Z[i],
          o = J[e.pointerType] || e.pointerType,
          a = "touch" === o,
          s = "mouse" === o,
          l = L(t, e.pointerId, "pointerId");
        1 & r && (0 === e.button || a) ? l < 0 && (t.push(e), l = t.length - 1) : 12 & r && (n = !0), l < 0 || (t[l] = e, s && !this.manager.options.handlePointerEventMouse || this.callback(this.manager, r, {
          pointers: t,
          changedPointers: [e],
          pointerType: o,
          srcEvent: e
        }), n && t.splice(l, 1))
      }
    });
    var ne = {
      touchstart: 1,
      touchmove: 2,
      touchend: 4,
      touchcancel: 8
    };

    function ie() {
      this.evTarget = "touchstart", this.evWin = "touchstart touchmove touchend touchcancel", this.started = !1, z.apply(this, arguments)
    }

    function re(e, t) {
      var n = D(e.touches),
        i = D(e.changedTouches);
      return 12 & t && (n = I(n.concat(i), "identifier", !0)), [n, i]
    }
    x(ie, z, {
      handler: function (e) {
        var t = ne[e.type];
        if (1 === t && (this.started = !0), this.started) {
          var n = re.call(this, e, t);
          12 & t && n[0].length - n[1].length == 0 && (this.started = !1), this.callback(this.manager, t, {
            pointers: n[0],
            changedPointers: n[1],
            pointerType: "touch",
            srcEvent: e
          })
        }
      }
    });
    var oe = {
      touchstart: 1,
      touchmove: 2,
      touchend: 4,
      touchcancel: 8
    };

    function ae() {
      this.evTarget = "touchstart touchmove touchend touchcancel", this.targetIds = {}, z.apply(this, arguments)
    }

    function se(e, t) {
      var n = D(e.touches),
        i = this.targetIds;
      if (3 & t && 1 === n.length) return i[n[0].identifier] = !0, [n, n];
      var r, o, a = D(e.changedTouches),
        s = [],
        l = this.target;
      if (o = n.filter((function (e) {
          return T(e.target, l)
        })), 1 === t)
        for (r = 0; r < o.length;) i[o[r].identifier] = !0, r++;
      for (r = 0; r < a.length;) i[a[r].identifier] && s.push(a[r]), 12 & t && delete i[a[r].identifier], r++;
      return s.length ? [I(o.concat(s), "identifier", !0), s] : void 0
    }
    x(ae, z, {
      handler: function (e) {
        var t = oe[e.type],
          n = se.call(this, e, t);
        n && this.callback(this.manager, t, {
          pointers: n[0],
          changedPointers: n[1],
          pointerType: "touch",
          srcEvent: e
        })
      }
    });

    function le() {
      z.apply(this, arguments);
      var e = w(this.handler, this);
      this.touch = new ae(this.manager, e), this.mouse = new Q(this.manager, e), this.primaryTouch = null, this.lastTouches = []
    }

    function ce(e, t) {
      1 & e ? (this.primaryTouch = t.changedPointers[0].identifier, ue.call(this, t)) : 12 & e && ue.call(this, t)
    }

    function ue(e) {
      var t = e.changedPointers[0];
      if (t.identifier === this.primaryTouch) {
        var n = {
          x: t.clientX,
          y: t.clientY
        };
        this.lastTouches.push(n);
        var i = this.lastTouches;
        setTimeout((function () {
          var e = i.indexOf(n);
          e > -1 && i.splice(e, 1)
        }), 2500)
      }
    }

    function he(e) {
      for (var t = e.srcEvent.clientX, n = e.srcEvent.clientY, i = 0; i < this.lastTouches.length; i++) {
        var r = this.lastTouches[i],
          o = Math.abs(t - r.x),
          a = Math.abs(n - r.y);
        if (o <= 25 && a <= 25) return !0
      }
      return !1
    }
    x(le, z, {
      handler: function (e, t, n) {
        var i = "touch" == n.pointerType,
          r = "mouse" == n.pointerType;
        if (!(r && n.sourceCapabilities && n.sourceCapabilities.firesTouchEvents)) {
          if (i) ce.call(this, t, n);
          else if (r && he.call(this, n)) return;
          this.callback(e, t, n)
        }
      },
      destroy: function () {
        this.touch.destroy(), this.mouse.destroy()
      }
    });
    var de = R(u.style, "touchAction"),
      fe = void 0 !== de,
      pe = function () {
        if (!fe) return !1;
        var e = {},
          t = o.CSS && o.CSS.supports;
        return ["auto", "manipulation", "pan-y", "pan-x", "pan-x pan-y", "none"].forEach((function (n) {
          e[n] = !t || o.CSS.supports("touch-action", n)
        })), e
      }();

    function me(e, t) {
      this.manager = e, this.set(t)
    }
    me.prototype = {
      set: function (e) {
        "compute" == e && (e = this.compute()), fe && this.manager.element.style && pe[e] && (this.manager.element.style[de] = e), this.actions = e.toLowerCase().trim()
      },
      update: function () {
        this.set(this.manager.options.touchAction)
      },
      compute: function () {
        var e = [];
        return g(this.manager.recognizers, (function (t) {
            E(t.options.enable, [t]) && (e = e.concat(t.getTouchAction()))
          })),
          function (e) {
            if (C(e, "none")) return "none";
            var t = C(e, "pan-x"),
              n = C(e, "pan-y");
            if (t && n) return "none";
            if (t || n) return t ? "pan-x" : "pan-y";
            if (C(e, "manipulation")) return "manipulation";
            return "auto"
          }(e.join(" "))
      },
      preventDefaults: function (e) {
        var t = e.srcEvent,
          n = e.offsetDirection;
        if (this.manager.session.prevented) t.preventDefault();
        else {
          var i = this.actions,
            r = C(i, "none") && !pe.none,
            o = C(i, "pan-y") && !pe["pan-y"],
            a = C(i, "pan-x") && !pe["pan-x"];
          if (r) {
            var s = 1 === e.pointers.length,
              l = e.distance < 2,
              c = e.deltaTime < 250;
            if (s && l && c) return
          }
          if (!a || !o) return r || o && 6 & n || a && 24 & n ? this.preventSrc(t) : void 0
        }
      },
      preventSrc: function (e) {
        this.manager.session.prevented = !0, e.preventDefault()
      }
    };

    function ge(e) {
      this.options = y({}, this.defaults, e || {}), this.id = O++, this.manager = null, this.options.enable = A(this.options.enable, !0), this.state = 1, this.simultaneous = {}, this.requireFail = []
    }

    function ve(e) {
      return 16 & e ? "cancel" : 8 & e ? "end" : 4 & e ? "move" : 2 & e ? "start" : ""
    }

    function ye(e) {
      return 16 == e ? "down" : 8 == e ? "up" : 2 == e ? "left" : 4 == e ? "right" : ""
    }

    function be(e, t) {
      var n = t.manager;
      return n ? n.get(e) : e
    }

    function _e() {
      ge.apply(this, arguments)
    }

    function xe() {
      _e.apply(this, arguments), this.pX = null, this.pY = null
    }

    function we() {
      _e.apply(this, arguments)
    }

    function Ee() {
      ge.apply(this, arguments), this._timer = null, this._input = null
    }

    function Ae() {
      _e.apply(this, arguments)
    }

    function Se() {
      _e.apply(this, arguments)
    }

    function Me() {
      ge.apply(this, arguments), this.pTime = !1, this.pCenter = !1, this._timer = null, this._input = null, this.count = 0
    }

    function Te(e, t) {
      return (t = t || {}).recognizers = A(t.recognizers, Te.defaults.preset), new Ce(e, t)
    }
    ge.prototype = {
      defaults: {},
      set: function (e) {
        return y(this.options, e), this.manager && this.manager.touchAction.update(), this
      },
      recognizeWith: function (e) {
        if (m(e, "recognizeWith", this)) return this;
        var t = this.simultaneous;
        return t[(e = be(e, this)).id] || (t[e.id] = e, e.recognizeWith(this)), this
      },
      dropRecognizeWith: function (e) {
        return m(e, "dropRecognizeWith", this) || (e = be(e, this), delete this.simultaneous[e.id]), this
      },
      requireFailure: function (e) {
        if (m(e, "requireFailure", this)) return this;
        var t = this.requireFail;
        return -1 === L(t, e = be(e, this)) && (t.push(e), e.requireFailure(this)), this
      },
      dropRequireFailure: function (e) {
        if (m(e, "dropRequireFailure", this)) return this;
        e = be(e, this);
        var t = L(this.requireFail, e);
        return t > -1 && this.requireFail.splice(t, 1), this
      },
      hasRequireFailures: function () {
        return this.requireFail.length > 0
      },
      canRecognizeWith: function (e) {
        return !!this.simultaneous[e.id]
      },
      emit: function (e) {
        var t = this,
          n = this.state;

        function i(n) {
          t.manager.emit(n, e)
        }
        n < 8 && i(t.options.event + ve(n)), i(t.options.event), e.additionalEvent && i(e.additionalEvent), n >= 8 && i(t.options.event + ve(n))
      },
      tryEmit: function (e) {
        if (this.canEmit()) return this.emit(e);
        this.state = 32
      },
      canEmit: function () {
        for (var e = 0; e < this.requireFail.length;) {
          if (!(33 & this.requireFail[e].state)) return !1;
          e++
        }
        return !0
      },
      recognize: function (e) {
        var t = y({}, e);
        if (!E(this.options.enable, [this, t])) return this.reset(), void(this.state = 32);
        56 & this.state && (this.state = 1), this.state = this.process(t), 30 & this.state && this.tryEmit(t)
      },
      process: function (e) {},
      getTouchAction: function () {},
      reset: function () {}
    }, x(_e, ge, {
      defaults: {
        pointers: 1
      },
      attrTest: function (e) {
        var t = this.options.pointers;
        return 0 === t || e.pointers.length === t
      },
      process: function (e) {
        var t = this.state,
          n = e.eventType,
          i = 6 & t,
          r = this.attrTest(e);
        return i && (8 & n || !r) ? 16 | t : i || r ? 4 & n ? 8 | t : 2 & t ? 4 | t : 2 : 32
      }
    }), x(xe, _e, {
      defaults: {
        event: "pan",
        threshold: 10,
        pointers: 1,
        direction: 30
      },
      getTouchAction: function () {
        var e = this.options.direction,
          t = [];
        return 6 & e && t.push("pan-y"), 24 & e && t.push("pan-x"), t
      },
      directionTest: function (e) {
        var t = this.options,
          n = !0,
          i = e.distance,
          r = e.direction,
          o = e.deltaX,
          a = e.deltaY;
        return r & t.direction || (6 & t.direction ? (r = 0 === o ? 1 : o < 0 ? 2 : 4, n = o != this.pX, i = Math.abs(e.deltaX)) : (r = 0 === a ? 1 : a < 0 ? 8 : 16, n = a != this.pY, i = Math.abs(e.deltaY))), e.direction = r, n && i > t.threshold && r & t.direction
      },
      attrTest: function (e) {
        return _e.prototype.attrTest.call(this, e) && (2 & this.state || !(2 & this.state) && this.directionTest(e))
      },
      emit: function (e) {
        this.pX = e.deltaX, this.pY = e.deltaY;
        var t = ye(e.direction);
        t && (e.additionalEvent = this.options.event + t), this._super.emit.call(this, e)
      }
    }), x(we, _e, {
      defaults: {
        event: "pinch",
        threshold: 0,
        pointers: 2
      },
      getTouchAction: function () {
        return ["none"]
      },
      attrTest: function (e) {
        return this._super.attrTest.call(this, e) && (Math.abs(e.scale - 1) > this.options.threshold || 2 & this.state)
      },
      emit: function (e) {
        if (1 !== e.scale) {
          var t = e.scale < 1 ? "in" : "out";
          e.additionalEvent = this.options.event + t
        }
        this._super.emit.call(this, e)
      }
    }), x(Ee, ge, {
      defaults: {
        event: "press",
        pointers: 1,
        time: 251,
        threshold: 9
      },
      getTouchAction: function () {
        return ["auto"]
      },
      process: function (e) {
        var t = this.options,
          n = e.pointers.length === t.pointers,
          i = e.distance < t.threshold,
          r = e.deltaTime > t.time;
        if (this._input = e, !i || !n || 12 & e.eventType && !r) this.reset();
        else if (1 & e.eventType) this.reset(), this._timer = p((function () {
          this.state = 8, this.tryEmit()
        }), t.time, this);
        else if (4 & e.eventType) return 8;
        return 32
      },
      reset: function () {
        clearTimeout(this._timer)
      },
      emit: function (e) {
        8 === this.state && (e && 4 & e.eventType ? this.manager.emit(this.options.event + "up", e) : (this._input.timeStamp = f(), this.manager.emit(this.options.event, this._input)))
      }
    }), x(Ae, _e, {
      defaults: {
        event: "rotate",
        threshold: 0,
        pointers: 2
      },
      getTouchAction: function () {
        return ["none"]
      },
      attrTest: function (e) {
        return this._super.attrTest.call(this, e) && (Math.abs(e.rotation) > this.options.threshold || 2 & this.state)
      }
    }), x(Se, _e, {
      defaults: {
        event: "swipe",
        threshold: 10,
        velocity: .3,
        direction: 30,
        pointers: 1
      },
      getTouchAction: function () {
        return xe.prototype.getTouchAction.call(this)
      },
      attrTest: function (e) {
        var t, n = this.options.direction;
        return 30 & n ? t = e.overallVelocity : 6 & n ? t = e.overallVelocityX : 24 & n && (t = e.overallVelocityY), this._super.attrTest.call(this, e) && n & e.offsetDirection && e.distance > this.options.threshold && e.maxPointers == this.options.pointers && d(t) > this.options.velocity && 4 & e.eventType
      },
      emit: function (e) {
        var t = ye(e.offsetDirection);
        t && this.manager.emit(this.options.event + t, e), this.manager.emit(this.options.event, e)
      }
    }), x(Me, ge, {
      defaults: {
        event: "tap",
        pointers: 1,
        taps: 1,
        interval: 300,
        time: 250,
        threshold: 9,
        posThreshold: 10
      },
      getTouchAction: function () {
        return ["manipulation"]
      },
      process: function (e) {
        var t = this.options,
          n = e.pointers.length === t.pointers,
          i = e.distance < t.threshold,
          r = e.deltaTime < t.time;
        if (this.reset(), 1 & e.eventType && 0 === this.count) return this.failTimeout();
        if (i && r && n) {
          if (4 != e.eventType) return this.failTimeout();
          var o = !this.pTime || e.timeStamp - this.pTime < t.interval,
            a = !this.pCenter || X(this.pCenter, e.center) < t.posThreshold;
          if (this.pTime = e.timeStamp, this.pCenter = e.center, a && o ? this.count += 1 : this.count = 1, this._input = e, 0 === this.count % t.taps) return this.hasRequireFailures() ? (this._timer = p((function () {
            this.state = 8, this.tryEmit()
          }), t.interval, this), 2) : 8
        }
        return 32
      },
      failTimeout: function () {
        return this._timer = p((function () {
          this.state = 32
        }), this.options.interval, this), 32
      },
      reset: function () {
        clearTimeout(this._timer)
      },
      emit: function () {
        8 == this.state && (this._input.tapCount = this.count, this.manager.emit(this.options.event, this._input))
      }
    }), Te.VERSION = "2.0.8", Te.defaults = {
      domEvents: !1,
      touchAction: "compute",
      enable: !0,
      handlePointerEventMouse: !0,
      inputTarget: null,
      inputClass: null,
      preset: [
        [Ae, {
          enable: !1
        }],
        [we, {
            enable: !1
          },
          ["rotate"]
        ],
        [Se, {
          direction: 6
        }],
        [xe, {
            direction: 6
          },
          ["swipe"]
        ],
        [Me],
        [Me, {
            event: "doubletap",
            taps: 2
          },
          ["tap"]
        ],
        [Ee]
      ],
      cssProps: {
        userSelect: "none",
        touchSelect: "none",
        touchCallout: "none",
        contentZooming: "none",
        userDrag: "none",
        tapHighlightColor: "rgba(0,0,0,0)"
      }
    };

    function Ce(e, t) {
      var n;
      this.options = y({}, Te.defaults, t || {}), this.options.inputTarget = this.options.inputTarget || e, this.handlers = {}, this.session = {}, this.recognizers = [], this.oldCssProps = {}, this.element = e, this.input = new((n = this).options.inputClass || (F ? te : U ? ae : N ? le : Q))(n, G), this.touchAction = new me(this, this.options.touchAction), Pe(this, !0), g(this.options.recognizers, (function (e) {
        var t = this.add(new e[0](e[1]));
        e[2] && t.recognizeWith(e[2]), e[3] && t.requireFailure(e[3])
      }), this)
    }

    function Pe(e, t) {
      var n, i = e.element;
      i.style && (g(e.options.cssProps, (function (r, o) {
        n = R(i.style, o), t ? (e.oldCssProps[n] = i.style[n], i.style[n] = r) : i.style[n] = e.oldCssProps[n] || ""
      })), t || (e.oldCssProps = {}))
    }
    Ce.prototype = {
      set: function (e) {
        return y(this.options, e), e.touchAction && this.touchAction.update(), e.inputTarget && (this.input.destroy(), this.input.target = e.inputTarget, this.input.init()), this
      },
      stop: function (e) {
        this.session.stopped = e ? 2 : 1
      },
      recognize: function (e) {
        var t = this.session;
        if (!t.stopped) {
          var n;
          this.touchAction.preventDefaults(e);
          var i = this.recognizers,
            r = t.curRecognizer;
          (!r || r && 8 & r.state) && (r = t.curRecognizer = null);
          for (var o = 0; o < i.length;) n = i[o], 2 === t.stopped || r && n != r && !n.canRecognizeWith(r) ? n.reset() : n.recognize(e), !r && 14 & n.state && (r = t.curRecognizer = n), o++
        }
      },
      get: function (e) {
        if (e instanceof ge) return e;
        for (var t = this.recognizers, n = 0; n < t.length; n++)
          if (t[n].options.event == e) return t[n];
        return null
      },
      add: function (e) {
        if (m(e, "add", this)) return this;
        var t = this.get(e.options.event);
        return t && this.remove(t), this.recognizers.push(e), e.manager = this, this.touchAction.update(), e
      },
      remove: function (e) {
        if (m(e, "remove", this)) return this;
        if (e = this.get(e)) {
          var t = this.recognizers,
            n = L(t, e); - 1 !== n && (t.splice(n, 1), this.touchAction.update())
        }
        return this
      },
      on: function (e, t) {
        if (void 0 !== e && void 0 !== t) {
          var n = this.handlers;
          return g(P(e), (function (e) {
            n[e] = n[e] || [], n[e].push(t)
          })), this
        }
      },
      off: function (e, t) {
        if (void 0 !== e) {
          var n = this.handlers;
          return g(P(e), (function (e) {
            t ? n[e] && n[e].splice(L(n[e], t), 1) : delete n[e]
          })), this
        }
      },
      emit: function (e, t) {
        this.options.domEvents && function (e, t) {
          var n = a.createEvent("Event");
          n.initEvent(e, !0, !0), n.gesture = t, t.target.dispatchEvent(n)
        }(e, t);
        var n = this.handlers[e] && this.handlers[e].slice();
        if (n && n.length) {
          t.type = e, t.preventDefault = function () {
            t.srcEvent.preventDefault()
          }, t.stopPropagation = function () {
            t.srcEvent.stopPropagation()
          };
          for (var i = 0; i < n.length;) n[i](t), i++
        }
      },
      destroy: function () {
        this.element && Pe(this, !1), this.handlers = {}, this.session = {}, this.input.destroy(), this.element = null
      }
    }, y(Te, {
      INPUT_START: 1,
      INPUT_MOVE: 2,
      INPUT_END: 4,
      INPUT_CANCEL: 8,
      STATE_POSSIBLE: 1,
      STATE_BEGAN: 2,
      STATE_CHANGED: 4,
      STATE_ENDED: 8,
      STATE_RECOGNIZED: 8,
      STATE_CANCELLED: 16,
      STATE_FAILED: 32,
      DIRECTION_NONE: 1,
      DIRECTION_LEFT: 2,
      DIRECTION_RIGHT: 4,
      DIRECTION_UP: 8,
      DIRECTION_DOWN: 16,
      DIRECTION_HORIZONTAL: 6,
      DIRECTION_VERTICAL: 24,
      DIRECTION_ALL: 30,
      Manager: Ce,
      Input: z,
      TouchAction: me,
      TouchInput: ae,
      MouseInput: Q,
      PointerEventInput: te,
      TouchMouseInput: le,
      SingleTouchInput: ie,
      Recognizer: ge,
      AttrRecognizer: _e,
      Tap: Me,
      Pan: xe,
      Swipe: Se,
      Pinch: we,
      Rotate: Ae,
      Press: Ee,
      on: S,
      off: M,
      each: g,
      merge: _,
      extend: b,
      assign: y,
      inherit: x,
      bindFn: w,
      prefixed: R
    }), (void 0 !== o ? o : "undefined" != typeof self ? self : {}).Hammer = Te, void 0 === (i = function () {
      return Te
    }.call(t, n, t, e)) || (e.exports = i)
  }(window, document)
}, function (e, t) {}, function (e, t, n) {
  "use strict";
  n.r(t), n.d(t, "Lang", (function () {
    return i
  }));
  var i = new function () {
    this.names = [{
      symbol: "en",
      label: "English"
    }, {
      symbol: "zh-HANS",
      label: "Chinese Simplified"
    }, {
      symbol: "zh-HANT",
      label: "Chinese Traditional"
    }, {
      symbol: "ja",
      label: "Japanese"
    }, {
      symbol: "cs",
      label: "Czech"
    }, {
      symbol: "ko",
      label: "Korean"
    }, {
      symbol: "pl",
      label: "Polish"
    }, {
      symbol: "ru",
      label: "Russian"
    }, {
      symbol: "fr",
      label: "French"
    }, {
      symbol: "fr-CA",
      label: "Canadian French"
    }, {
      symbol: "de",
      label: "German"
    }, {
      symbol: "it",
      label: "Italian"
    }, {
      symbol: "nl",
      label: "Dutch"
    }, {
      symbol: "es",
      label: "Spanish"
    }, {
      symbol: "pt-BR",
      label: "Portuguese Brazil"
    }, {
      symbol: "tr",
      label: "Turkish"
    }, {
      symbol: "sv",
      label: "Swedish"
    }, {
      symbol: "da",
      label: "Danish"
    }], this.isSupported = function (e) {
      for (var t = 0; t < this.names.length; ++t)
        if (this.names[t].symbol === e) return !0;
      return !1
    }, this.getSupported = function (e) {
      var t = e.split("-");
      return e = t.length > 1 ? t[0].toLowerCase() + "-" + t[1].toUpperCase() : t[0].toLowerCase(), this.isSupported(e) || (e = e.indexOf("zh-CN") > -1 ? "zh-HANS" : e.indexOf("zh-TW") > -1 ? "zh-HANT" : t.length > 1 && this.isSupported(t[0].toLowerCase()) ? t[0] : "en"), e
    }, this.getLanguages = function () {
      return this.names.slice()
    }
  }
}, function (e, t, n) {
  "use strict";
  n.r(t), n.d(t, "CreateCubeMapFromColors", (function () {
    return a
  })), n.d(t, "DecodeEnvMap", (function () {
    return f
  }));
  var i = n(0),
    r = n(178),
    o = n(1);

  function a(e, t) {
    for (var n = 255 * e.x, r = 255 * e.y, o = 255 * e.z, a = 255 * t.x, s = 255 * t.y, l = 255 * t.z, c = new Uint8Array(16), u = new Uint8Array(16), h = new Uint8Array(16), d = 0; d < 4; d++) c[4 * d] = n, c[4 * d + 1] = r, c[4 * d + 2] = o, c[4 * d + 3] = 255, u[4 * d] = a, u[4 * d + 1] = s, u[4 * d + 2] = l, u[4 * d + 3] = 255, d > 1 ? (h[4 * d] = n, h[4 * d + 1] = r, h[4 * d + 2] = o, h[4 * d + 3] = 255) : (h[4 * d] = a, h[4 * d + 1] = s, h[4 * d + 2] = l, h[4 * d + 3] = 255);
    var f = new i.DataTexture(h, 2, 2, i.RGBAFormat),
      p = new i.DataTexture(h, 2, 2, i.RGBAFormat),
      m = new i.DataTexture(u, 2, 2, i.RGBAFormat),
      g = new i.DataTexture(c, 2, 2, i.RGBAFormat),
      v = new i.DataTexture(h, 2, 2, i.RGBAFormat),
      y = new i.DataTexture(h, 2, 2, i.RGBAFormat),
      b = new i.Texture(null, i.CubeReflectionMapping, i.RepeatWrapping, i.RepeatWrapping, i.LinearFilter, i.LinearFilter, i.RGBAFormat);
    return b.image = [p, f, g, m, y, v], b.needsUpdate = !0, b
  }
  var s = [6.0014, -2.7008, -1.7996, -1.332, 3.1029, -5.7721, .3008, -1.0882, 5.6268];

  function l(e, t) {
    var n = 255 * t[2] + t[3],
      i = Math.pow(2, (n - 127) / 2),
      r = i / t[1],
      o = t[0] * r,
      a = s[0] * o + s[3] * i + s[6] * r,
      l = s[1] * o + s[4] * i + s[7] * r,
      c = s[2] * o + s[5] * i + s[8] * r;
    a < 0 && (a = 0), l < 0 && (l = 0), c < 0 && (c = 0), e[0] = a, e[1] = l, e[2] = c
  }

  function c(e, t, n) {
    var i = .0625 * Math.sqrt(t[0] * n),
      r = .0625 * Math.sqrt(t[1] * n),
      o = .0625 * Math.sqrt(t[2] * n),
      a = Math.max(Math.max(i, r), Math.max(o, 1e-6));
    a > 1 && (a = 1);
    var s = Math.ceil(255 * a) / 255;
    i > 1 && (i = 1), r > 1 && (r = 1), o > 1 && (o = 1), e[3] = s;
    var l = 1 / s;
    e[0] = i * l, e[1] = r * l, e[2] = o * l
  }

  function u(e, t, n) {
    var i = Math.sqrt(t[0] * n),
      r = Math.sqrt(t[1] * n),
      o = Math.sqrt(t[2] * n);
    i > 65504 && (i = 65504), r > 65504 && (r = 65504), o > 65504 && (o = 65504), e[0] = i, e[1] = r, e[2] = o
  }
  var h = new Float32Array(4),
    d = new Float32Array(4);

  function f(e, t, n, a) {
    if (e.LogLuv) {
      for (var s = Math.pow(2, t), f = Array.isArray(e.image) ? e.image : [e.image], p = 0; p < f.length; p++)
        for (var m = f[p], g = 0; g < m.mipmaps.length; g++) {
          var v, y = m.mipmaps[g],
            b = y.data;
          n ? (v = new Uint16Array(b.length / 4 * 3), y.data = v) : v = b.buffer;
          for (var _ = 0, x = 0; x < b.length; x += 4) h[0] = b[x] / 255, h[1] = b[x + 1] / 255, h[2] = b[x + 2] / 255, h[3] = b[x + 3] / 255, l(d, h), n ? (u(h, d, s), v[_++] = Object(r.FloatToHalf)(h[0]), v[_++] = Object(r.FloatToHalf)(h[1]), v[_++] = Object(r.FloatToHalf)(h[2])) : (c(h, d, s), b[x] = Math.round(255 * h[0]), b[x + 1] = Math.round(255 * h[1]), b[x + 2] = Math.round(255 * h[2]), b[x + 3] = Math.round(255 * h[3]))
        }
      e.LogLuv = !1, n ? (e.type = i.HalfFloatType, e.format = i.RGBFormat, e.RGBM = !1, e.GammaEncoded = !0) : e.RGBM = !0, a && a(e)
    } else o.logger.warn("Environment map expected to be in LogLuv format.")
  }
}, function (e, t, n) {
  "use strict";
  n.r(t), n.d(t, "ViewerState", (function () {
    return s
  }));
  var i = n(1),
    r = n(23),
    o = n(64);

  function a(e) {
    return (a = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (e) {
      return typeof e
    } : function (e) {
      return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
    })(e)
  }

  function s(e) {
    this.getVisibleModel = function (t) {
      for (var n = e.getVisibleModels(), i = 0; i < n.length; ++i) {
        var r = n[i];
        if (this.getSeedUrn(r) === t) return r
      }
    }, this.createObjectSets = function (t) {
      var n = t.objectSet;
      Array.isArray(n) || (t.objectSet = n = []);
      for (var i = e.getVisibleModels(), r = 0; r < i.length; r++) {
        var o = i[r],
          a = this.getSeedUrn(o),
          s = this.getSelectedNodes(o);
        n[r] = {
          id: s,
          idType: "lmv"
        }, i.length > 1 && (n[r].seedUrn = a), o.is2d() ? (n[r].isolated = this.getVisibleLayers2d(o), n[r].allLayers = this.areAllLayersVisible(o), n[r].hidden = []) : (n[r].isolated = e.getIsolatedNodes(o), n[r].hidden = e.getHiddenNodes(o), n[r].explodeScale = e.getExplodeScale())
      }
    }, this.getState = function (t) {
      var n = e.navigation,
        i = {};
      i.seedURN = this.getSeedUrn(), this.createObjectSets(i);
      var r = i.viewport;
      r || (r = i.viewport = {});
      var o = n.getCamera().isPerspective;
      r.name = "", r.eye = n.getPosition().toArray(), r.target = n.getTarget().toArray(), r.up = n.getCameraUpVector().toArray(), r.worldUpVector = n.getWorldUpVector().toArray(), r.pivotPoint = n.getPivotPoint().toArray(), r.distanceToOrbit = n.getPivotPlaneDistance(), r.aspectRatio = this.getAspectRatio(), r.projection = o ? "perspective" : "orthographic", r.isOrthographic = !o, o ? r.fieldOfView = n.getVerticalFov() : r.orthographicHeight = this.getOrthographicHeight();
      var a = i.renderOptions;
      if (a || (a = i.renderOptions = {}), a.environment = this.getEnvironmentName(), a.ambientOcclusion = {
          enabled: e.impl.renderer().getAOEnabled(),
          radius: e.impl.renderer().getAORadius(),
          intensity: e.impl.renderer().getAOIntensity()
        }, a.toneMap = {
          method: e.impl.renderer().getToneMapMethod(),
          exposure: e.impl.renderer().getExposureBias(),
          lightMultiplier: this.getToneMapIntensity()
        }, a.appearance = {
          ghostHidden: e.impl.showGhosting,
          ambientShadow: e.prefs.ambientShadows,
          antiAliasing: e.impl.renderer().settings.antialias,
          progressiveDisplay: e.prefs.progressiveRendering,
          swapBlackAndWhite: e.prefs.swapBlackAndWhite,
          displayLines: e.prefs.lineRendering,
          displayPoints: e.prefs.pointRendering
        }, e.model && !e.model.is2d())
        for (var s = i.cutplanes = [], l = e.impl.getCutPlaneSet("__set_view"), c = 0; c < l.length; c++) s.push(l[c].toArray());
      for (var u in e.loadedExtensions) {
        var h = e.loadedExtensions[u];
        h.getState && h.getState(i)
      }
      return t && !0 !== t && this.applyFilter(i, t), i
    }, this.restoreObjectSet = function (t) {
      var n = t.objectSet;
      if (Array.isArray(n) && 0 !== n.length) {
        for (var i = [], r = [], o = [], a = e.model, s = 0; s < n.length; ++s) {
          var l = n[s];
          if ("lmv" === l.idType) {
            var c = l.seedUrn;
            if (!c || (a = this.getVisibleModel(c))) {
              var u = l.id;
              if (u && (u = this.toIntArray(u), o.push({
                  model: a,
                  ids: u
                })), a.is2d()) {
                var h = l.isolated;
                if (Array.isArray(h) && h.length > 0) {
                  e.setLayerVisible(null, !1);
                  for (var d = 0; d < h.length; ++d) h[d] = parseInt(h[d]);
                  e.impl.setLayerVisible(h, !0)
                } else l.allLayers || e.setLayerVisible(null, !1)
              } else {
                var f = l.isolated || [],
                  p = l.hidden || [];
                f = this.toIntArray(f), i.push({
                  model: a,
                  ids: f
                }), 0 === f.length && p.length > 0 && (p = this.toIntArray(p), r.push({
                  model: a,
                  ids: p
                }))
              }
              if ("explodeScale" in l) {
                var m = parseFloat(l.explodeScale);
                e.explode && e.explode(m)
              }
            }
          }
        }
        o.length > 0 && e.impl.selector.setAggregateSelection(o), i.length > 0 && e.impl.visibilityManager.aggregateIsolate(i, {
          hideLoadedModels: !1
        }), r.length > 0 && e.impl.visibilityManager.aggregateHide(r)
      }
    }, this.restoreState = function (t, n, r) {
      if (!t) return i.logger.warn("restoreState has no viewer state to restore from."), !1;
      if (!e || !e.model) return i.logger.warn("restoreState has no viewer or model to restore."), !1;
      n && !0 !== n && (t = JSON.parse(JSON.stringify(t)), this.applyFilter(t, n));
      var o = e.navigation,
        a = !e.model.is2d();
      this.restoreObjectSet(t);
      var s = t.viewport;
      if (s) {
        var l = this.getVector3FromArray(s.eye, o.getPosition()),
          c = this.getVector3FromArray(s.up, o.getCameraUpVector()),
          u = this.getVector3FromArray(s.target, o.getTarget()),
          h = "fieldOfView" in s ? parseFloat(s.fieldOfView) : o.getVerticalFov(),
          d = this.getVector3FromArray(s.worldUpVector, null);
        if (!d) {
          var f = e.model ? e.model.getUpVector() : null;
          d = f ? (new THREE.Vector3).fromArray(f) : new THREE.Vector3(0, 1, 0)
        }
        var p = this.getVector3FromArray(s.pivotPoint, o.getPivotPoint()),
          m = o.getCamera().isPerspective;
        "isOrthographic" in s && (m = !s.isOrthographic);
        var g = this.getOrthographicHeight();
        "orthographicHeight" in s && (g = Number(s.orthographicHeight));
        var v = {
          position: l,
          target: u,
          up: c,
          worldup: d,
          aspect: e.impl.camera.aspect,
          fov: h,
          orthoScale: g,
          isPerspective: m,
          pivot: p
        };
        this.restoreCameraState(v, r)
      }
      var y = t.renderOptions;
      if (y) {
        var b = e.impl.renderer(),
          _ = e.prefs,
          x = _.ambientShadows,
          w = _.antialiasing,
          E = y.ambientOcclusion;
        if (E) {
          "enabled" in E && (x = E.enabled);
          var A = "radius" in E ? E.radius : null,
            S = "intensity" in E ? E.intensity : null;
          null !== A && null !== S && (A === b.getAORadius() && S === b.getAOIntensity() || (b.setAOOptions(A, S), b.composeFinalFrame()))
        }
        if ("environment" in y) {
          var M = this.getLightPresetIndex(y.environment); - 1 !== M && M !== _.get("lightPreset") && a && e.setLightPreset(M)
        }
        var T = y.toneMap;
        if (T) {
          var C = !1,
            P = "exposure" in T ? T.exposure : null,
            L = "lightMultiplier" in T ? T.lightMultiplier : null;
          null !== P && P !== b.getExposureBias() && (b.setTonemapExposureBias(P), C = !0), null !== L && e.impl.dir_light1 && L !== this.getToneMapIntensity() && (e.impl.dir_light1.intensity = Math.pow(2, L), C = !0), C && e.impl.invalidate(!0)
        }
        var D = y.appearance;
        D && ("antiAliasing" in D && (w = D.antiAliasing), "progressiveDisplay" in D && D.progressiveDisplay !== _.get("progressiveRendering") && e.setProgressiveRendering(D.progressiveDisplay), "swapBlackAndWhite" in D && D.swapBlackAndWhite !== _.get("swapBlackAndWhite") && e.setSwapBlackAndWhite(D.swapBlackAndWhite), "ghostHidden" in D && D.ghostHidden !== _.get("ghosting") && a && e.setGhosting(D.ghostHidden), "displayLines" in D && D.displayLines !== _.get("lineRendering") && e.hideLines(!D.displayLines), "displayPoints" in D && D.displayPoints !== _.get("pointRendering") && e.hidePoints(!D.displayPoints)), a && x !== _.ambientShadows && w !== _.antialiasing && e.setQualityLevel(x, w)
      }
      if (Array.isArray(t.cutplanes) && e.model && a) {
        for (var I = [], R = 0; R < t.cutplanes.length; R++) {
          var O = t.cutplanes[R];
          Array.isArray(O) && O.length >= 4 && I.push(new THREE.Vector4(O[0], O[1], O[2], O[3]))
        }! function (t, n) {
          if (!!e.getExtension("Autodesk.AEC.LevelsExtension") && void 0 === t.floorGuid) {
            var i = n.length;
            if (3 === i || 8 === i) {
              var r = n[i - 2],
                o = n[i - 1];
              0 === r.x && 0 === r.y && -1 === r.z && 0 === o.x && 0 === o.y && 1 === o.z && n.splice(-2, 2)
            }
          }
        }(t, I), e.impl.setCutPlaneSet("__set_view", I)
      }
      for (var k in e.loadedExtensions) {
        var N = e.loadedExtensions[k];
        N.restoreState && N.restoreState(t, r)
      }
      return !0
    }, this.getEnvironmentName = function () {
      var t = r.LightPresets[e.impl.currentLightPreset()];
      return t ? t.name : "none"
    }, this.restoreCameraState = function (t, n) {
      e.impl.adjustOrthoCamera(t);
      var i = e.navigation;
      n ? (t.isPerspective ? i.toPerspective() : i.toOrthographic(), i.setCameraUpVector(t.up), i.setWorldUpVector(t.worldup), i.setView(t.position, t.target), i.setPivotPoint(t.pivot), i.setVerticalFov(t.fov, !1), e.impl.syncCamera(!0)) : (e.impl.camera.isPerspective = t.isPerspective, i.setRequestTransitionWithUp(!0, t.position, t.target, t.fov, t.up, t.worldup, t.pivot))
    }, this.areEqual = function (e, t, n) {
      function i(e, t) {
        if (t = t || [], (e = e || []).length !== t.length) return !1;
        for (var n = 0; n < e.length; ++n)
          if (e[n] !== t[n]) return !1;
        return !0
      }

      function r(e, t, n) {
        return t = t || [], (e = e || []).length === t.length && (0 !== e.length && (o(e[0], t[0], n) || o(e[1], t[1], n) || o(e[2], t[2], n)))
      }

      function o(e, t, n) {
        var i = e ? parseFloat(e) : null,
          r = e ? parseFloat(t) : null,
          o = a(i),
          s = a(r);
        return "number" === o && "number" === s ? Math.abs(e - t) < n : (e = e || null) === (t = t || null)
      }
      var s = e,
        l = t;
      if (n && !0 !== n && (s = this.applyFilter(s, n), l = this.applyFilter(l, n)), s.seedURN !== l.seedURN) return !1;
      var c = s.objectSet || [],
        u = l.objectSet || [];
      if (c.length !== u.length) return !1;
      var h = c[0] || {},
        d = u[0] || {};
      if (!(h.idType === d.idType && o(h.explodeScale, d.explodeScale, 1e-9) && i(h.id, d.id) && i(h.isolated, d.isolated) && i(h.hidden, d.hidden))) return !1;
      var f = s.viewport || {},
        p = l.viewport || {};
      return !!(f.name === p.name && f.projection === p.projection && f.isOrthographic === p.isOrthographic && o(f.distanceToOrbit, p.distanceToOrbit, 1e-9) && o(f.fieldOfView, p.fieldOfView, 1e-9) && o(f.orthographicHeight, p.orthographicHeight, 1e-9) && r(f.eye, p.eye, 1e-9) && r(f.target, p.target, 1e-9) && r(f.up, p.up, 1e-9) && r(f.worldUpVector, p.worldUpVector, 1e-9) && r(f.pivotPoint, p.pivotPoint, 1e-9))
    }, this.toIntArray = function (e) {
      var t = [];
      if (Array.isArray(e))
        for (var n = 0, i = e.length; n < i; ++n) t.push(parseInt(e[n]));
      return t
    }, this.getVector3FromArray = function (e, t) {
      return e instanceof Array && e.length > 2 ? (e[0] = parseFloat(e[0]), e[1] = parseFloat(e[1]), e[2] = parseFloat(e[2]), (new THREE.Vector3).fromArray(e)) : t
    }, this.getSelectedNodes = function (t) {
      return (t = t || e.model).selector ? t.selector.getSelection() : []
    }, this.getVisibleLayers2d = function (t) {
      return t && t !== e.model ? (i.logger.warn("[getVisibleLayers2d] multiple models not yet supported."), []) : e.impl.getVisibleLayerIndices()
    }, this.areAllLayersVisible = function (t) {
      return t && t !== e.model ? (i.logger.warn("[areAllLayersVisible] multiple models not yet supported."), !0) : e.impl.layers.allLayersVisible()
    }, this.getAspectRatio = function () {
      var t = e.navigation.getScreenViewport();
      return t.width / t.height
    }, this.getOrthographicHeight = function () {
      var t = e.navigation.getCamera();
      return t.isPerspective ? 0 : Math.abs(2 * t.orthographicCamera.top)
    }, this.getSeedUrn = function (t) {
      return (t = t || e.model) && t.loader && t.loader.svfUrn || ""
    }, this.getToneMapIntensity = function () {
      var t = 0;
      return e.impl.dir_light1 && (t = 0 != e.impl.dir_light1.intensity ? Math.log(e.impl.dir_light1.intensity) / Math.log(2) : -1e-20), t
    }, this.getLightPresetIndex = function (e) {
      for (var t = 0; t < r.LightPresets.length; t++)
        if (r.LightPresets[t].name === e) return t;
      return -1
    }, this.applyFilter = function (e, t) {
      if (!0 !== t)
        for (var n in e)
          if (e.hasOwnProperty(n)) {
            var r = t[n];
            void 0 === r ? delete e[n] : "boolean" == typeof r ? !1 === r && delete e[n] : r instanceof Object ? e[n] instanceof Object ? this.applyFilter(e[n], t[n]) : i.logger.warn("[applyFilter] A - Invalid filter Object for key [" + n + "]") : i.logger.warn("[applyFilter] B - Invalid filter value for key [" + n + "]")
          }
    }, this.normalizeCoordinates = function (t) {
      var n = t.viewport;
      if (n) {
        if (n.normalized) return void i.logger.warn("invalid normalization of state.viewport. Ignoring command.");
        if (n.normalized = !0, l(n, o.SceneMath.getNormalizingMatrix(e.model)), "orthographicHeight" in n) {
          var r = e.model.myData.bbox,
            a = r.max.y - r.min.y,
            s = n.orthographicHeight / a;
          n.orthographicHeight = s
        }
      }
    }, this.denormalizeCoordinates = function (t) {
      var n = t.viewport;
      if (n) {
        if (!n.normalized) return void i.logger.warn("invalid denormalization of state.viewport. Ignoring command.");
        delete n.normalized;
        var r = o.SceneMath.getNormalizingMatrix(e.model);
        if (l(n, (new THREE.Matrix4).getInverse(r)), "orthographicHeight" in n) {
          var a = e.model.myData.bbox,
            s = a.max.y - a.min.y,
            c = n.orthographicHeight * s;
          n.orthographicHeight = c
        }
      }
    }
  }

  function l(e, t) {
    var n = new THREE.Vector3(e.eye[0], e.eye[1], e.eye[2]),
      i = new THREE.Vector3(e.pivotPoint[0], e.pivotPoint[1], e.pivotPoint[2]),
      r = new THREE.Vector3(e.target[0], e.target[1], e.target[2]);
    n.applyMatrix4(t), i.applyMatrix4(t), r.applyMatrix4(t), e.eye[0] = n.x, e.eye[1] = n.y, e.eye[2] = n.z, e.pivotPoint[0] = i.x, e.pivotPoint[1] = i.y, e.pivotPoint[2] = i.z, e.target[0] = r.x, e.target[1] = r.y, e.target[2] = r.z
  }
  s.prototype.constructor = s
}, function (e, t, n) {
  "use strict";
  n.r(t), n.d(t, "ScreenShot", (function () {
    return _
  }));
  var i = n(44),
    r = n(53),
    o = n(116),
    a = n(3),
    s = n(72),
    l = n(10),
    c = n(64),
    u = n(28),
    h = n(0),
    d = n(2);
  var f = function (e, t, n, f, p) {
      for (var m = p.getMaterials(), g = p.glrenderer(), v = p.renderer(), y = p.modelQueue(), b = [], _ = (f = f || {}).models || y.getModels(), x = 0; x < _.length; x++) {
        var w = _[x].getIterator();
        if (w && w.getGeomScenes)
          for (var E = w.getGeomScenes(), A = 0; A < E.length; A++) {
            var S = E[A];
            S && b.push(S)
          }
      }
      var M = f.camera || p.camera;
      M === p.camera && (M = M.clone()), M.clientWidth = e, M.clientHeight = t;
      var T = new r.FrustumIntersector,
        C = f.excludeCutPlanes ? [] : m.getCutPlanes();
      T.reset(M, C), T.areaCullThreshold = i.PIXEL_CULLING_THRESHOLD, g.pushViewport();
      var P, L = g.getPixelRatio();
      g.setPixelRatio(1), f.renderContext ? P = f.renderContext : (P = new o.RenderContext).init(g, e, t, {
        offscreen: !0
      }), m.addOverrideMaterial("normalsMaterial_screenshot", P.getDepthMaterial()), m.addOverrideMaterial("edgeMaterial_screenshot", P.getEdgeMaterial());
      var D = f.renderConfig || v.getConfig();
      P.applyConfig(D), P.beginScene(p.scene, M, p.noLights, !0), g.popViewport(), g.setPixelRatio(L);
      for (var I = 0, R = void 0, O = {
          stop: function () {
            R && (Object(a.getGlobal)().clearTimeout(R), B())
          },
          finished: function () {
            return !!R
          }
        }, k = -1, N = [], F = 0; F < _.length; F++) {
        var U = _[F];
        if (U.getData().isLeaflet) {
          var V = U.getIterator();
          N.push({
            iter: V,
            viewId: V.registerView(),
            ready: !1
          })
        }
      }
      var B = function () {
          N.forEach((function (e) {
            return e.iter.unregisterView(e.viewId)
          })), N.length = 0
        },
        z = f.fragOptions,
        G = z ? [] : void 0,
        H = function (e) {
          if (!!z && e instanceof s.RenderBatch) {
            var t = e.frags;
            e.forEachNoMesh((function (e, n) {
              G[n] = t.vizflags[e];
              var i = z.isFragOff && z.isFragOff(e);
              void 0 !== i && t.setFlagFragment(e, l.MeshFlags.MESH_HIDE, i);
              var r = z.isFragVisible && z.isFragVisible(e);
              void 0 !== r && t.setFlagFragment(e, l.MeshFlags.MESH_VISIBLE, r)
            }))
          }
        },
        W = function (e) {
          if (!!z && e instanceof s.RenderBatch) {
            var t = e.frags;
            e.forEachNoMesh((function (e, n) {
              var i = G[n],
                r = !!(i & l.MeshFlags.MESH_HIDE),
                o = !!(i & l.MeshFlags.MESH_VISIBLE);
              t.setFlagFragment(e, l.MeshFlags.MESH_HIDE, r), t.setFlagFragment(e, l.MeshFlags.MESH_VISIBLE, o)
            }))
          }
        },
        j = function () {
          var e = void 0;
          if (f.models) {
            e = new h.Box3;
            for (var t = 0; t < _.length; t++) {
              var n = _[t];
              e.union(n.getBoundingBox())
            }
          } else e = p.getVisibleBounds();
          var i = f.hasOwnProperty("is2d") ? f.is2d : p.is2d,
            r = P.settings.deviceHeight,
            o = f.excludeCutPlanes ? void 0 : m.getCutPlanesRaw(),
            a = o && o[0],
            s = _[0] && _[0].getBoundingBox();
          return c.SceneMath.getPixelsPerUnit(M, i, e, r, a, s)
        }(),
        q = [],
        X = null,
        Y = function (e) {
          f.excludeThemingColors && e instanceof s.RenderBatch && (e.frags.is2d || (X = e.frags.db2ThemingColor, e.frags.db2ThemingColor = q))
        },
        K = function (e) {
          X && (e.frags.db2ThemingColor = X, X = null)
        },
        Q = new h.Vector4(0, 0, -1, -1e20),
        Z = [],
        J = null;
      return function i() {
        if (! function () {
            for (var e = !0, t = 0; t < N.length; t++) {
              var n = N[t];
              n.ready || (n.ready = n.iter.reset(T, M, n.viewId)), e = e && n.ready
            }
            if (e = e || f.dontWaitForLeafletTiles)
              for (var i = 0; i < N.length; i++) {
                var r = N[i],
                  o = r.iter.getScene(r.viewId);
                b.push(o)
              }
            return e
          }()) R = Object(a.getGlobal)().setTimeout(i, 0);
        else {
          var r = performance.now();
          g.pushViewport();
          var o = g.getPixelRatio();
          g.setPixelRatio(1), g.setViewport(0, 0, e, t);
          var l = p.getPixelsPerUnit(p.camera, p.getVisibleBounds());
          for (m.updatePixelScale(j, e, t), f.excludeCutPlanes && function () {
              var e = (J = m.getCutPlanes()).length;
              if (Z.length !== e) {
                Z.length = e;
                for (var t = 0; t < e; t++) Z[t] = Q
              }
              v.toggleTwoSided(m.setCutPlanes(Z))
            }(), f.beforeRender && f.beforeRender(); I < b.length;) {
            var c = b[I];
            H(c), Y(c), c instanceof s.RenderBatch && c.applyVisibility(u.RenderFlags.RENDER_NORMAL, T);
            var h = {
              type: d.RENDER_SCENE_PART,
              scene: c,
              wantColor: !0,
              wantSAO: !0,
              wantID: !1,
              context: P
            };
            if (p.api.dispatchEvent(h), h.preventDefault || (P.renderScenePart(c, !0, !0, !1, !1), (c.frags && !c.frags.areAllVisible() || z) && (c instanceof s.RenderBatch && c.applyVisibility(u.RenderFlags.RENDER_HIDDEN, T), v.setEdgeColor(p.edgeColorGhosted), c.overrideMaterial = p.fadeMaterial, P.renderScenePart(c, !0, !0, !1, !1), v.setEdgeColor(p.edgeColorMain), c.overrideMaterial = null)), K(c), W(c), I++, performance.now() - r > 20) break
          }
          if (g.popViewport(), g.setPixelRatio(o), m.updatePixelScale(l, v.settings.deviceWidth, v.settings.deviceHeight), f.excludeCutPlanes && v.toggleTwoSided(m.setCutPlanes(J)), f.afterRender && f.afterRender(), I === b.length ? function () {
              B();
              var e = P.getColorTarget();
              ((D.aoEnabled || D.antialias) && (D.aoEnabled && P.computeSSAO(), e = P.getNamedTarget("overlay"), P.getBlendPass().uniforms.tOverlay.value = null, P.setOffscreenTarget(e), P.presentBuffer()), f.returnAsTarget) ? n(P, e, M): P.targetToCanvas(e).canvas.toBlob((function (e) {
                var t = Object(a.getGlobal)().URL.createObjectURL(e);
                n && n(t)
              }))
            }() : R = Object(a.getGlobal)().setTimeout(i, 0), f.onProgress) {
            var y = Math.floor(100 * I / b.length);
            y !== k && (k = y, f.onProgress(y))
          }
        }
      }(), O
    },
    p = function (e, t, n, i, r) {
      var o = r.fullPage,
        s = r.bounds,
        l = r.getCropBounds,
        c = r.margin,
        u = r.overlayRenderer,
        h = r.overlayRendererExtraOptions;
      o && (s = e.impl.getVisibleBounds());
      var d = e.impl.getCanvasBoundingClientRect().width,
        p = e.navigation.getCamera();
      s && (p = b(e, s, c));
      var m = g(e, p);
      try {
        if (o) {
          var y = m.size(),
            _ = d / Math.max(y.x, y.y);
          t = Math.floor(t * _), n = Math.floor(n * _)
        }
        var x = function (r) {
            if (o) {
              var c = t / d;
              m.min.x *= c, m.min.y *= c, m.max.x *= c, m.max.y *= c, v(r, m, i)
            } else if (l) {
              var u = l(e, p, s);
              v(r, u, i)
            } else r.toBlob((function (e) {
              var r = Object(a.getGlobal)().URL.createObjectURL(e);
              i(r, t, n)
            }))
          },
          w = e.impl.selector.getSelection();
        return e.clearSelection(), f(t, n, (function (i, r, o) {
          if (e.impl.selector.setSelection(w), u) {
            u(e, {
              width: t,
              height: n,
              ctx: i,
              target: r,
              screenshotCamera: o,
              onRenderDone: x
            }, h)
          } else {
            var a = i.targetToCanvas(r).canvas;
            x(a)
          }
        }), {
          returnAsTarget: !0,
          camera: p
        }, e.impl)
      } catch (e) {
        console.error("getScreenShot error: " + e), i(null)
      }
    },
    m = function (e) {
      var t = e.impl.getVisibleBounds();
      if (e.model.hasPageShadow()) {
        t = t.clone();
        var n = e.model.getMetadata("page_dimensions", "page_width");
        t.max.x -= .0075 * n, t.min.y += .0075 * n
      }
      return t
    },
    g = function (e, t) {
      var n = m(e),
        i = e.worldToClient(n.min, t),
        r = e.worldToClient(n.max, t);
      return (new h.Box3).setFromPoints([i, r])
    },
    v = function (e, t, n) {
      var i = Object(a.getGlobal)().document.createElement("canvas"),
        r = i.getContext("2d"),
        o = t.size(),
        s = Math.min(Math.floor(o.x), e.width),
        l = Math.min(Math.floor(o.y), e.height);
      i.width = s, i.height = l;
      var c = Math.max(Math.floor(t.min.x), 0),
        u = Math.max(Math.floor(t.min.y), 0),
        h = s,
        d = l;
      r.drawImage(e, c, u, h, d, 0, 0, s, l), i.toBlob((function (e) {
        var t = Object(a.getGlobal)().URL.createObjectURL(e);
        n(t, s, l)
      }), "image/png")
    },
    y = function (e, t, n, i) {
      var r = Object(a.getGlobal)().document.createElement("canvas"),
        o = r.getContext("2d"),
        s = new Image;
      r.width = t, r.height = n, s.src = e, s.onload = function () {
        o.drawImage(s, 0, 0, t, n);
        var e = r.toDataURL("image/png");
        i(e)
      }
    },
    b = function (e, t, n) {
      n = n || e.navigation.FIT_TO_VIEW_HORIZONTAL_MARGIN;
      var i = {
        horizontal: e.navigation.FIT_TO_VIEW_HORIZONTAL_MARGIN,
        vertical: e.navigation.FIT_TO_VIEW_VERTICAL_MARGIN
      };
      e.navigation.FIT_TO_VIEW_HORIZONTAL_MARGIN = n, e.navigation.FIT_TO_VIEW_VERTICAL_MARGIN = n;
      var r = e.getState({
        viewport: !0
      });
      e.navigation.fitBounds(!0, t, !1);
      var o = e.navigation.getCamera().clone();
      return e.restoreState(r, void 0, !0), e.navigation.FIT_TO_VIEW_HORIZONTAL_MARGIN = i.horizontal, e.navigation.FIT_TO_VIEW_VERTICAL_MARGIN = i.vertical, e.impl.updateNearFarValues(o, t), o
    },
    _ = {
      getScreenShotLegacy: function (e, t, n, i, r) {
        var o = e.impl,
          s = o.renderer(),
          l = s.settings.logicalWidth,
          c = s.settings.logicalHeight,
          u = o.progressiveRender,
          f = o.glrenderer().getPixelRatio();
        t && n || (t = l, n = c), o.progressiveRender = !1, o.resize(t / f, n / f, !0), o.tick(performance.now());
        var p = new h.WebGLRenderTarget(t, n, {
          minFilter: h.LinearFilter,
          magFilter: h.LinearFilter,
          format: h.RGBFormat,
          type: h.UnsignedByteType
        });

        function m() {
          var e = s.targetToCanvas(p || s.getColorTarget());

          function t() {
            o.progressiveRender = u, o.resize(l, c, !0), e.canvas.toBlob((function (e) {
              var t = Object(a.getGlobal)().URL.createObjectURL(e);
              i ? i(t) : Object(a.getGlobal)().open(t)
            }), "image/png")
          }
          p && (p.dispose(), p = void 0, o.glrenderer().setRenderTarget(null)), r ? r(e.ctx, t) : t()
        }
        if (s.setOffscreenTarget(p), s.presentBuffer(), s.setOffscreenTarget(null), e.model.getData().isLeaflet) {
          var g = function () {
              v = !0, o.progressiveRender = u, o.resize(l, c, !0)
            },
            v = !1;
          e.addEventListener(d.CANCEL_LEAFLET_SCREENSHOT, g, {
            once: !0
          }), o.invalidate(!0), e.model.getIterator().callWhenRefined((function () {
            v || (e.removeEventListener(d.CANCEL_LEAFLET_SCREENSHOT, g), m())
          }))
        } else m();
        p && p.dispose()
      },
      getScreenShot: f,
      getScreenShotWithBounds: p,
      getScreenShotAtScreenSize: function (e, t, n) {
        var i = e.impl.getCanvasBoundingClientRect(),
          r = Math.floor(i.width),
          o = Math.floor(i.height);
        p(e, r, o, (function (e, n, i) {
          e ? y(e, n, i, (function (e) {
            t(e, n, i)
          })) : t(null)
        }), n)
      },
      getSceneWorldBounds: m,
      getSceneClientBounds: g,
      cropImage: v,
      blobToImage: y,
      makeBoundsSquare: function (e) {
        var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 0,
          n = e.size(),
          i = Math.max(n.x, n.y, t);
        e.expandByVector(new h.Vector3((i - n.x) / 2, (i - n.y) / 2, 0))
      },
      getCameraWithFitBounds: b
    }
}, function (e, t, n) {
  "use strict";
  n.r(t), n.d(t, "GeomMergeTask", (function () {
    return r
  })), n.d(t, "writeIdToBuffer", (function () {
    return a
  }));
  var i = 1;

  function r() {
    this.vb = null, this.vbstride = 0, this.posOffset = 0, this.normalOffset = 0, this.matrices = null, this.ranges = null, this.dbIds = null, this.id = i++
  }

  function o(e) {
    e.x = .5 * (1 + Math.atan2(e.y, e.x) / Math.PI), e.y = .5 * (1 + e.z), e.z = 0
  }

  function a(e, t, n) {
    t[n++] = 255 & e, t[n++] = e >> 8 & 255, t[n++] = e >> 16 & 255, t[n] = 0
  }
  var s = function (e, t, n, i, r, a, s) {
    for (var l, c, u, h, d, f, p, m = e.posOffset, g = i; g < r; g++) {
      var v = g * e.vbstride + m;
      s.set(e.vb[v], e.vb[v + 1], e.vb[v + 2]), s.applyMatrix4(n), e.vb[v] = s.x, e.vb[v + 1] = s.y, e.vb[v + 2] = s.z
    }
    if (-1 !== e.normalOffset) {
      var y = 2 * e.vbstride,
        b = 2 * e.normalOffset,
        _ = function (e, t) {
          return t.copy(e), t[12] = 0, t[13] = 0, t[14] = 0, t.getInverse(t).transpose()
        }(n, a);
      for (g = i; g < r; g++) {
        var x = g * y + b;
        s.set(t[x], t[x + 1], 0), s.divideScalar(65535), c = void 0, u = void 0, h = void 0, d = void 0, f = void 0, p = void 0, c = 2 * (l = s).x - 1, u = 2 * l.y - 1, h = Math.sin(c * Math.PI), d = Math.cos(c * Math.PI), f = Math.sqrt(1 - u * u), p = u, l.x = d * f, l.y = h * f, l.z = p, s.applyMatrix4(_), s.normalize(), o(s), s.multiplyScalar(65535), t[x] = s.x, t[x + 1] = s.y
      }
    }
  };

  function l(e, t, n) {
    for (var i = 16 * e, r = 0; r < 16; r++) n.elements[r] = t[r + i]
  }
  r.prototype.run = function (e, t) {
    for (var n = this.vb, i = n.length / this.vbstride, r = e.clone(), o = new Uint8Array(3 * i), c = -1 !== this.normalOffset ? new Uint16Array(n.buffer, n.byteOffset, 2 * n.length) : null, u = this.ranges, h = this.matrices, d = u.length - 1, f = 0; f < d; f++) {
      var p = u[f],
        m = u[f + 1];
      l(f, h, e), s(this, c, e, p, m, r, t);
      for (var g = 3 * p, v = m - p, y = this.dbIds[f], b = 0; b < v; b++) a(y, o, g), g += 3
    }
    return {
      taskId: this.id,
      vb: this.vb,
      vertexIds: o
    }
  }
}, function (e, t, n) {
  "use strict";
  n.r(t), n.d(t, "InstanceBufferBuilder", (function () {
    return l
  }));
  var i = n(95),
    r = n(174),
    o = n(87),
    a = n(1),
    s = n(0);

  function l(e, t) {
    var n = Object(o.createBufferGeometry)();
    n.ib = e.ib, n.vb = e.vb, n.iblines = e.iblines, Object(i.copyVertexFormat)(e, n), Object(i.copyPrimitiveProps)(e, n);
    this.offsets = new Float32Array(3 * t), this.rotations = new Float32Array(4 * t), this.scalings = new Float32Array(3 * t), this.ids = new Uint8Array(3 * t);
    var l = new s.Vector3,
      c = new s.Quaternion,
      u = new s.Vector3,
      h = new s.Matrix4,
      d = 0,
      f = t;
    this.addInstance = function (e, t) {
      return d >= f ? (a.logger.warn("Instance buffer is already full."), !1) : (e.decompose(l, c, u), !! function (e, t, n, i) {
        h.compose(t, n, i);
        for (var r = e.elements, o = h.elements, a = 0; a < 16; a++) {
          var s = r[a],
            l = o[a];
          if (Math.abs(l - s) > 1e-5) return !1
        }
        return !0
      }(e, l, c, u) && (this.offsets[3 * d] = l.x, this.offsets[3 * d + 1] = l.y, this.offsets[3 * d + 2] = l.z, this.rotations[4 * d] = c.x, this.rotations[4 * d + 1] = c.y, this.rotations[4 * d + 2] = c.z, this.rotations[4 * d + 3] = c.w, this.scalings[3 * d] = u.x, this.scalings[3 * d + 1] = u.y, this.scalings[3 * d + 2] = u.z, Object(r.writeIdToBuffer)(t, this.ids, 3 * d), d++, !0))
    }, this.finish = function () {
      if (0 == d) return null;
      d < f && (this.offsets = new Float32Array(this.offsets.buffer, 0, 3 * d), this.rotations = new Float32Array(this.rotations.buffer, 0, 4 * d), this.scalings = new Float32Array(this.scalings.buffer, 0, 3 * d), this.ids = new Uint8Array(this.ids.buffer, 0, 3 * d));
      var e = new s.BufferAttribute(this.offsets, 3),
        t = new s.BufferAttribute(this.rotations, 4),
        i = new s.BufferAttribute(this.scalings, 3),
        r = new s.BufferAttribute(this.ids, 3);
      return r.normalize = !0, r.bytesPerItem = 1, e.divisor = 1, t.divisor = 1, i.divisor = 1, r.divisor = 1, n.addAttribute("instOffset", e), n.addAttribute("instRotation", t), n.addAttribute("instScaling", i), n.addAttribute("id", r), n.numInstances = d, n.byteSize = n.vb.byteLength + n.ib.byteLength + this.offsets.byteLength + this.rotations.byteLength + this.scalings.byteLength, n
    }
  }
}, function (e, t, n) {
  "use strict";
  n.r(t), n.d(t, "TexQuadConfig", (function () {
    return d
  })), n.d(t, "ModelIteratorTexQuad", (function () {
    return f
  }));
  var i = n(3),
    r = n(83),
    o = n(262),
    a = n(26),
    s = n(135),
    l = n(0),
    c = n(1),
    u = Object(i.getGlobal)().document,
    h = function (e, t) {
      this.timeStamps = e, this.mesh = t, this.state = 0
    };

  function d() {
    this.urlPattern = null, this.tileSize = null, this.maxLevel = null, this.skippedLevels = [], this.textureLoader = null, this.texWidth = 0, this.texHeight = 0, this.maxActiveTiles = Object(i.isMobileDevice)() ? 0 : 400, this.cacheSize = Object(i.isMobileDevice)() ? 0 : 150, this.onRootLoaded = null, this.levelOffset = 0, this.pixelRatio = 1, this.getRootTileSize = function () {
      return 1 * (this.tileSize << this.maxLevel)
    }, this.getQuadWidth = function () {
      return this.scale * this.texWidth / this.getRootTileSize()
    }, this.getQuadHeight = function () {
      return this.scale * this.texHeight / this.getRootTileSize()
    }, this.getPageToModelTransform = function (e, t) {
      var n = e / this.getQuadWidth(),
        i = t / this.getQuadHeight();
      return new a.LmvMatrix4(!0).set(n, 0, 0, 0, 0, i, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1)
    }, this.getBBox = function () {
      var e = this.getQuadWidth(),
        t = this.getQuadHeight();
      if (this.fitPaperSize) return new l.Box3(new l.Vector3, new l.Vector3(e, t, 0));
      var n = 1 - t;
      return new l.Box3(new l.Vector3(0, n, 0), new l.Vector3(e, 1, 0))
    }, this.valid = function () {
      return "string" == typeof this.urlPattern && this.urlPattern.length > 0 && "number" == typeof this.tileSize && this.tileSize > 0 && "number" == typeof this.maxLevel && this.maxLevel > 0 && "number" == typeof this.texWidth && this.texWidth > 0 && "number" == typeof this.texHeight && this.texHeight > 0
    }, this.initForSimpleImage = function (e) {
      this.urlPattern = decodeURIComponent(e), this.maxLevel = 0, this.levelOffset = 0, this.scale = 1, this.tileSize = -1, this.texWidth = -1, this.texHeight = -1, this.isSimpleImage = !0
    }, this.isLevelPresent = function (e) {
      return !this.skippedLevels[e]
    }, this.initFromLoadOptions = function (e, t, n) {
      var i, r, o, a, s;
      this.urlPattern = decodeURIComponent(e), this.textureLoader = n, t && (this.tileSize = t.tileSize, this.maxLevel = (i = t.texWidth, r = t.texHeight, o = t.tileSize, a = Math.ceil(Math.log2(i)), s = Math.ceil(Math.log2(r)), Math.max(a, s) - Math.log2(o)), this.texWidth = t.texWidth, this.texHeight = t.texHeight, this.levelOffset = t.levelOffset, this.zips = t.zips, this.fitPaperSize = t.fitPaperSize, this.paperHeight = t.paperHeight, this.scale = this.fitPaperSize ? t.paperWidth * this.getRootTileSize() / this.texWidth : 1, this.skippedLevels = function (e) {
        var t = [];
        if (e.zips) {
          n = (n = (n = (n = e.urlPattern.replace(/[-\/\\^$*+?.()|[\]{}]/g, "\\$&")).replace(/\\{x\\}/, "[0-9]+")).replace(/\\{y\\}/, "[0-9]+")).replace(/\\{z\\}/, "([0-9]+)");
          var n = new RegExp("^" + n + "$");
          t.length = e.maxLevel + 1, t.fill(!0);
          var i = 0;
          e.zips.forEach((function (r) {
            Object.keys(r.fileTable).forEach((function (r) {
              var o = n.exec(r);
              if (o && o[1]) {
                var a = parseInt(o[1]) - e.levelOffset;
                a >= 0 && a <= e.maxLevel && (t[a] = !1, ++i)
              }
            }))
          })), 0 === i && (t.length = 0, c.logger.info("No leaflet levels found - assume all are present"))
        }
        return t
      }(this), "number" == typeof t.maxLevel && function (e, t, n) {
        for (; n > 0 && e.skippedLevels[n];) --n;
        var i = t - n;
        i > 0 && (e.texWidth >>= i, e.texHeight >>= i, e.maxLevel = n)
      }(this, this.maxLevel, t.maxLevel), this.maxActiveTiles = t.maxActiveTiles || this.maxActiveTiles, this.cacheSize = t.cacheSize || this.cacheSize)
    }
  }

  function f(e, t) {
    this.isModelIteratorTexQuad = !0;
    var n = e,
      i = 1,
      a = e.getBBox(),
      c = [],
      d = t,
      f = [],
      p = [],
      m = [];
    this.registerView = function () {
      var e = c.indexOf(void 0); - 1 === e && (e = c.length);
      var t = new l.Scene;
      return t.skipIdTarget = !0, c[e] = t, m[e] = 0, f[e] = !0, e
    }, this.registerView();
    var g = 0,
      v = 0,
      y = !1,
      b = [],
      _ = null,
      x = !1,
      w = new s.a;

    function E(e) {
      var t = n.maxLevel - e;
      return n.texWidth >> t
    }

    function A(e) {
      var t = n.maxLevel - e;
      return n.texHeight >> t
    }

    function S(e) {
      var t = E(e.level),
        i = A(e.level),
        r = e.x * n.tileSize,
        o = e.y * n.tileSize;
      return r >= t || o >= i
    }

    function M(e) {
      var t = E(e.level),
        i = A(e.level),
        r = e.x * n.tileSize,
        o = e.y * n.tileSize,
        a = Math.max(0, Math.min(n.tileSize, t - r)),
        s = Math.max(0, Math.min(n.tileSize, i - o)),
        c = 1 * n.tileSize;
      return new l.Vector2(a / c, s / c)
    }

    function T(e) {
      return n.scale / (1 << e)
    }

    function C(e, t) {
      return T(e.level) * e.x * t
    }

    function P(e, t) {
      var i = T(e.level);
      return (n.fitPaperSize ? n.paperHeight : 1) - (e.y + 1) * i * t
    }

    function L(e) {
      return p[Object(r.tile2Index)(e)]
    }

    function D(e) {
      var t = L(e);
      return t instanceof h && 2 == t.state
    }

    function I(e, t, n, i) {
      var r;
      if (t) _ || (_ = w.createQuadGeom()), r = _;
      else {
        var o = function (e, t) {
          for (var n = e.getParent(); n;) {
            var i = L(n),
              r = i && 2 == i.state;
            if (r && t && i.mesh.material.map.needsUpdate && n.level > 0 && (r = !1), r) break;
            n = n.getParent()
          }
          return n
        }(e);
        t = k(o).material;
        var a = function (e, t) {
          var n = 1 << e.level - t.level,
            i = 1 / n,
            r = i,
            o = M(t);
          i /= o.x, r /= o.y;
          var a = t.x * n,
            l = t.y * n,
            c = e.x - a,
            u = e.y - l,
            h = M(e);
          c *= i, u = 1 - (u *= r) - r * h.y;
          var d = new s.b;
          return d.offsetX = c, d.offsetY = u, d.scaleX = i * h.x, d.scaleY = r * h.y, d
        }(e, o);
        r = w.acquireQuadGeom(a)
      }
      var c = new l.Mesh(r, t);
      c.tile = e;
      var u = T(e.level),
        h = M(e),
        d = (1 - h.y) * u * i,
        f = C(e, i),
        p = P(e, i);
      return c.position.set(f, p + d, 0), c.scale.set(u * h.x * i, u * h.y * i, 1), c
    }
    this.setAggressivePrefetching = function (e) {
      x = e
    }, this.getScene = function (e) {
      return c[e = e || 0]
    }, this.nextBatch = function (e) {
      return f[e = e || 0] ? null : (f[e] = !0, c[0])
    }, this.getSceneCount = function () {
      return 1
    }, this.done = function (e) {
      return f[e || 0]
    }, this.rayCast = function (e, t) {
      return null
    }, this.getVisibleBounds = function (e, t) {
      e && e.copy(a), t && t.copy(a)
    };
    var R = this;

    function O(t) {
      var o = Object(r.tile2Index)(t),
        s = p[o];
      if (!s || 0 == s.state) {
        s || (s = new h(m.slice()), p[o] = s), s.state = 1;
        var c = function (e) {
            var t = n.levelOffset ? n.levelOffset : 0;
            return n.urlPattern.replace("{x}", e.x).replace("{y}", e.y).replace("{z}", e.level + t)
          }(t),
          f = function (r) {
            if (R && r) {
              0 == n.maxLevel && (-1 == n.texWidth && (n.texWidth = r.image.width), -1 == n.texHeight && (n.texHeight = r.image.height), -1 == n.tileSize && (n.tileSize = Math.max(r.image.width, r.image.height)), a = e.getBBox()),
                function (e) {
                  for (var t = e.image, n = 1;
                    (n *= 2) < t.width;);
                  for (var i = 1;
                    (i *= 2) < t.height;);
                  if (n !== t.width || i !== t.height) {
                    var r = u.createElement("canvas");
                    r.width = n, r.height = i;
                    var o = r.getContext("2d");
                    o.drawImage(t, 0, 0);
                    var a, s, l = o.getImageData(0, 0, n, i),
                      c = new Uint32Array(l.data.buffer, 0, n * i);
                    if (t.height < i) {
                      var h = t.height * n;
                      for (a = t.height; a < i; ++a, h += n)
                        for (s = 0; s < t.width; ++s) c[h + s] = c[h + s - n]
                    }
                    if (t.width < n) {
                      var d = 0;
                      for (a = 0; a < i; ++a, d += n)
                        for (s = t.width; s < n; ++s) c[d + s] = c[d + s - 1]
                    }
                    o.putImageData(l, 0, 0), e.image = r, e.flipY && e.offset.set(0, 1 - t.height / i), e.repeat.set(t.width / n, t.height / i)
                  }
                }(r), r.minFilter = l.LinearMipMapLinearFilter, r.magFilter = l.LinearFilter;
              var o = new l.MeshBasicMaterial({
                color: 4294967295
              });
              o.map = r, o.name = c, o.tile = t, o.disableEnvMap = !0, -1 !== c.toLowerCase().indexOf(".png") && (o.transparent = !0, o.alphaTest = .01), d.addMaterial(o.name, o, !0);
              var h = I(t, o, 0, i);
              s.mesh = h, s.state = 2, v--, y = !0;
              var f = r && r.image ? r.image.src : null;
              f && l.Cache && l.Cache.get(f) && l.Cache.remove(f), 0 == t.level && n.onRootLoaded && n.onRootLoaded()
            }
          };
        v++, n.textureLoader(c, (function (e, t) {
          f(e)
        }), (function (e) {
          n.onDone(e, null), console.error(e)
        }))
      }
    }

    function k(e) {
      var t = Object(r.tile2Index)(e),
        n = p[t];
      return n && 2 == n.state ? n.mesh : null
    }

    function N(e, t, n) {
      var i = C(e, n),
        r = P(e, n);
      t.set(i, r, 0)
    }

    function F(e, t, n) {
      var i = T(e.level),
        r = C(e, n) + i,
        o = P(e, n) + i;
      t.set(r, o, 0)
    }
    this.requestRootTile = function () {
      O(new r.TileCoords(0, 0, 0))
    };
    var U, V, B, z = (U = new l.Vector3, V = new l.Vector3, B = new l.Box3, function (e, t, n) {
        return N(e, U, n), F(e, V, n), B.set(U, V), t.intersectsBox(B) > 0
      }),
      G = function () {
        var e = new l.Vector3,
          t = new l.Vector3;
        return function (n, i, r, o) {
          var a = T(n.level);
          N(n, e, o), F(n, t, o);
          var s, l, c, u, h = (l = e, c = t, (u = (s = r).clone()).max(l), u.min(c), u.distanceToSquared(s));
          return (z(n, i, o) ? 100 : 1) * (a * a) / (h = Math.max(h, 1e-4))
        }
      }(),
      H = function () {
        var e = new l.Vector3,
          t = new l.Vector3;
        return function (n, i, r, o, a, s) {
          N(n, e, s), F(n, t, s);
          var c = function (e, t, n, i) {
            var r = e.clone();
            return r.max(n), r.min(i), r.sub(e).dot(t)
          }(i, r, e, t);
          return .5 * ((t.x - e.x) / (Math.tan(l.Math.degToRad(o / 2)) * c)) * a
        }
      }();

    function W(e, t) {
      this.tile = e, this.prio = t
    }

    function j(e, t) {
      return e.prio > t.prio
    }

    function q(e, t) {
      var n = p[Object(r.tile2Index)(e)];
      n && n.timeStamps[t] !== m[t] && (n.timeStamps[t] = m[t], g++)
    }

    function X(e, t, n) {
      e.sort((function (e, i) {
        var r = G(e, t, n);
        return G(i, t, n) - r
      }));
      for (var i = 0, r = 0; r < e.length; r++) {
        var o = L(e[r]);
        if (!o || 1 != o.state) {
          if (v >= 5) break;
          O(e[r]), i++
        }
      }
      return i
    }

    function Y(e) {
      if (e && e.mesh && e.mesh.material) {
        var t = e.mesh.material;
        d.removeMaterial(t.name), t.map.dispose(), t.map.needsUpdate = !0;
        t.dispatchEvent({
          type: "dispose"
        }), t.needsUpdate = !0
      }
    }

    function K(e) {
      for (var t = 0; t < m.length; t++) {
        if (!!c[t] && e.timeStamps[t] === m[t]) return !0
      }
      return !1
    }
    this.dispose = function () {
      var e;
      for (e in p) Y(p[e]);
      _ && (_.dispose(), _.needsUpdate = !0), w.dispose()
    }, this.dtor = function () {
      this.dispose(), R = null, d = null
    }, this.reset = function (e, t, a) {
      var s, l, u = (a = a || 0) > 0,
        h = c[a];
      for (s = 0; s < h.children.length; s++) {
        h.children[s].dispatchEvent({
          type: "removed"
        })
      }
      if (h.children.length = 0, m[a]++, g = 0, w.reset(), !D(new r.TileCoords(0, 0, 0))) return f[a] = !0, !1;
      var d = new o.SortedList(j),
        _ = new r.TileCoords(0, 0, 0),
        E = G(_, e, t.position);
      d.add(new W(_, E));
      for (var A = t.getWorldDirection(), M = 0 | t.clientHeight * n.pixelRatio, T = [], C = [], P = []; d.size() > 0;) {
        if (l = d.get(0).tile, d.removeAt(0), !S(l)) {
          var L = !0;
          l.level == n.maxLevel && (L = !1), H(l, t.position, A, t.fov, M, i) < n.tileSize && n.isLevelPresent(l.level) && (L = !1);
          var R = z(l, e, i);
          if (R && (!D(l) && n.isLevelPresent(l.level) && P.push(l), q(l, a)), !R && T.length + C.length > n.maxActiveTiles && (L = !1), L)
            for (var O = 0; O < 4; O++) {
              var N = l.getChild(O);
              E = G(N, e, t.position, i), d.add(new W(N, E))
            } else R ? T.push(l) : C.push(l)
        }
      }
      var F = 0;
      y = !1;
      var U = !0;
      for (s = 0; s < T.length; ++s) {
        var V = k(l = T[s]);
        V && V.material.map.needsUpdate && !x && (F < 5 || u ? F++ : (V = I(l, null, 0, i), y = !0, U = !1)), V || (V = I(l, null, 0, i), U = !1), h.add(V)
      }
      f[a] = !1;
      var B = X(P, e, t.position);
      g += v;
      var Q = [];
      for (s = 0; s < C.length && !(g >= n.maxActiveTiles); s++)
        if (D(l = C[s]))
          for (var Z = 0; Z <= l.level; Z++) {
            if (q(l.getParentAtLevel(Z), a), g > n.maxActiveTiles) break
          } else Q.push(l), g++;
      if (B += X(Q, e, t.position), x) {
        for (Q = [], s = 0; s < T.length; ++s)
          if ((l = T[s]).level != n.maxLevel && n.isLevelPresent(l.level + 1))
            for (O = 0; O < 4; O++) {
              !S(N = l.getChild(O)) && z(N, e, i) && (D(N) || (Q.push(N), g++))
            }
        B += X(Q, e, t.position)
      }
      if (u || function (e, t, i) {
          var o = Object.keys(p),
            a = o.length,
            s = e - (n.cacheSize - a);
          if (!(s <= 0)) {
            o.sort((function (e, n) {
              var o = p[e].timeStamps[0],
                a = p[n].timeStamps[0];
              if (o != a) return o - a;
              var s = Object(r.index2Tile)(e),
                l = Object(r.index2Tile)(n);
              return G(s, t, i) - G(l, t, i)
            }));
            for (var l = Math.min(s, o.length), c = 0; c < l; c++) {
              var u = o[c];
              if (0 !== Object(r.index2Tile)(u).level) {
                var h = p[u];
                if (2 == h.state) {
                  if (K(h)) break;
                  Y(h), delete p[u]
                }
              }
            }
          }
        }(B, e, t.position), U && b.length > 0) {
        var J = b.splice(0, b.length);
        setTimeout((function () {
          for (var e = 0; e < J.length; e++) J[e](a)
        }), 1)
      }
      return U
    }, this.callWhenRefined = function (e) {
      b.push(e)
    }, this.update = function () {
      return y
    }, this.setDpiScale = function (e) {
      i = e
    }, this.getDpiScale = function () {
      return i
    }, this.unregisterView = function (e) {
      c[e] = void 0, m[e] = void 0, f[e] = void 0;
      for (var t = c.length; t > 0 && !c[t - 1];) t--;
      c.length = t, m.length = t, f.length = t
    }
  }
}, function (e, t, n) {
  "use strict";
  n.r(t);
  var i = n(75),
    r = n(2),
    o = n(1),
    a = n(23),
    s = n(8),
    l = n(3),
    c = n(127),
    u = n(12);

  function h(e, t) {
    for (var n = 0; n < t.length; n++) {
      var i = t[n];
      i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(e, i.key, i)
    }
  }
  var d = function () {
    function e(t, n) {
      ! function (e, t) {
        if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
      }(this, e), this._width = t || 60, this._height = n || 60
    }
    var t, n, i;
    return t = e, (n = [{
      key: "createThumbnail",
      value: function (e, t) {
        var n = this;
        return new Promise((function (t) {
          var i = n.getDocument().createElement("canvas");
          i.width = n._width, i.height = n._height;
          var r = i.getContext("2d"),
            o = r.createLinearGradient(0, 0, 0, i.height),
            a = e.bgColorGradient,
            s = f(a[0], a[1], a[2]),
            l = f(a[3], a[4], a[5]);
          o.addColorStop(0, s), o.addColorStop(1, l), r.fillStyle = o, r.fillRect(0, 0, i.width, i.height), i.toBlob((function (e) {
            var n = URL.createObjectURL(e);
            t(n)
          }))
        }))
      }
    }]) && h(t.prototype, n), i && h(t, i), e
  }();

  function f(e, t, n) {
    return e = parseInt(e), t = parseInt(t), n = parseInt(n), "#" + p(e) + p(t) + p(n)
  }

  function p(e) {
    if (0 === e) return "00";
    for (var t = "", n = e > 255 ? 255 : e; 0 !== n;) {
      var i = n % 16;
      n = n / 16 | 0, t = m[i.toString()] + t
    }
    return t.length > 1 ? t : "0" + t
  }
  u.GlobalManagerMixin.call(d.prototype);
  var m = {
    0: "0",
    1: "1",
    2: "2",
    3: "3",
    4: "4",
    5: "5",
    6: "6",
    7: "7",
    8: "8",
    9: "9",
    10: "A",
    11: "B",
    12: "C",
    13: "D",
    14: "E",
    15: "F"
  };
  n.d(t, "ViewerSettingTab", (function () {
    return v
  })), n.d(t, "ViewerSettingsPanel", (function () {
    return b
  }));
  Autodesk.Viewing;
  var g = Autodesk.Viewing.Private,
    v = {
      Navigation: "navigationtab",
      Configuration: "performancetab",
      Appearance: "appearance",
      Environment: "environment"
    },
    y = 0;

  function b(e, t) {
    this.viewer = e, this.is3dMode = !t.is2d(), this.visible = !1, this._externalButtonIds = [], this._externalButtonsLabel = null, i.SettingsPanel.call(this, e.container, "ViewerSettingsPanel" + e.id + "-" + y++, "Settings", {
      width: 400,
      addFooter: !1,
      heightAdjustment: 110
    }), this.container.classList.add("viewer-settings-panel"), this.setGlobalManager(e.globalManager), this.addTab(v.Configuration, "Configuration", {
      className: "performance"
    }), this.addTab(v.Navigation, "Navigation", {
      className: "navigation"
    }), this.addTab(v.Appearance, "Appearance", {
      className: "appearance"
    }), this.is3dMode && this.addTab(v.Environment, "Environment", {
      className: "environment"
    }), this.is3dMode || this.container.classList.add("for-2d-model"), this.createRestoreDefaultSettingsButton(), this.modelPreferenceCount = 0, this.createNavigationPanel(), this.createConfigurationPanel(), this.createAppearancePanel(), this.modelPreferenceCount && o.logger.log("Model locked (" + this.modelPreferenceCount + ") render settings in UI."), this.selectTab(v.Configuration), this.footer = this.createFooter(), this.createVersionLabel(this.footer), this.syncUI = this.syncUI.bind(this), e.addEventListener(r.RESTORE_DEFAULT_SETTINGS_EVENT, this.syncUI), e.addEventListener(r.VIEWER_STATE_RESTORED_EVENT, this.syncUI)
  }

  function _(e, t, n) {
    e.createThumbnail(n).then((function (e) {
      t.src = e, t.onload = function () {
        URL.revokeObjectURL(e)
      }
    }))
  }
  b.prototype = Object.create(i.SettingsPanel.prototype), b.prototype.constructor = b, c.ViewerPanelMixin.call(b.prototype), b.prototype.uninitialize = function () {
    this.viewer && (this._onBgEnvironmentChange && this._onBgEnvironmentReset && (this.viewer.prefs.removeListeners(g.Prefs3D.LIGHT_PRESET, this._onBgEnvironmentChange, this._onBgEnvironmentReset), this._onBgEnvironmentChange = null, this._onBgEnvironmentReset = null), this.viewer.removeEventListener(r.RESTORE_DEFAULT_SETTINGS_EVENT, this.syncUI), this.viewer.removeEventListener(r.VIEWER_STATE_RESTORED_EVENT, this.syncUI)), this.viewer = null, i.SettingsPanel.prototype.uninitialize.call(this), this.envSelect = null
  }, b.prototype.setVisible = function (e) {
    this.visible = e, i.SettingsPanel.prototype.setVisible.call(this, e), e && this.sizeToContent(), e && this.createEnvironmentPanel()
  }, b.prototype.addCheckbox = function (e, t, n, r, o, a) {
    var s = this.viewer,
      l = s.prefs[a];
    r = "boolean" == typeof l ? l : r;
    var c = i.SettingsPanel.prototype.addCheckbox.call(this, e, t, r, (function (e) {
        a && s.prefs.set(a, e), o(e)
      }), n),
      u = this.getControl(c);
    return u.saveKey = a, a ? s.prefs.addListeners(a, (function (e) {
      u.setValue(e)
    }), (function (e) {
      u.setValue(e), o(e)
    })) : u.sliderRow.classList.add("logical-group"), s.prefs.hasTag(a, "no-storage") && (u.sliderRow.classList.add("no-storage"), this.modelPreferenceCount++), c
  }, b.prototype.addDropDownMenu = function (e, t, n, r, o, a, s, l) {
    var c = this.viewer;
    s && (o = r.indexOf(c.prefs[s]));
    var u = i.SettingsPanel.prototype.addDropDownMenu.call(this, e, t, n, o, (function (e) {
        s && c.prefs.set(s, r[e.detail.value]), a && a(e)
      }), l),
      h = this.getControl(u);
    return s ? c.prefs.addListeners(s, (function (e) {
      h.setSelectedIndex(r.indexOf(e))
    }), (function (e) {
      h.setSelectedIndex(r.indexOf(e)), a && a(e)
    })) : h.sliderRow.classList.add("logical-group"), c.prefs.hasTag(s, "no-storage") && (h.sliderRow.classList.add("no-storage"), this.modelPreferenceCount++), u
  }, b.prototype.addSliderV2 = function (e, t, n, r, o, a, s, l, c) {
    var u = this.viewer,
      h = u.prefs[c];
    a = "number" == typeof h ? h : a, c && !u.prefs.hasOwnProperty(c) && u.prefs.add(c, a, ["2d", "3d"]);
    var d = i.SettingsPanel.prototype.addSliderV2.call(this, e, t, n, r, o, a, (function (e) {
        var t = "number" == typeof e ? e : Number(e.detail.value);
        c && u.prefs.set(c, t), s(t)
      }), l),
      f = this.getControl(d[1]);
    return f.saveKey = c, c ? u.prefs.addListeners(c, (function (e) {
      f.setValue(e)
    }), (function (e) {
      f.setValue(e), s(e)
    })) : f.sliderRow.classList.add("logical-group"), u.prefs.hasTag(c, "no-storage") && (f.sliderRow.classList.add("no-storage"), this.modelPreferenceCount++), d
  }, b.prototype.addGrid = function (e, t, n, i, r, o) {
    var a = this,
      l = t,
      c = this.getDocument(),
      u = c.createElement("div");
    u.classList.add("environments-container"), l.appendChild(u);
    var h = c.createElement("div");
    h.classList.add("environments-lighting-table"), u.appendChild(h);
    var f = new d(42, 26);
    f.setGlobalManager(this.viewer.globalManager);
    for (var p = 0; p < n.length; p++) {
      var m = n[p],
        g = c.createElement("div");
      g.classList.add("settings-environment-cell"), g.index = p;
      var v = c.createElement("img");
      v.classList.add("settings-environment-image"), _(f, v, m), g.appendChild(v);
      var y = c.createElement("span");
      y.textContent = s.i18n.translate(m.name), y.classList.add("settings-environment-name"), y.setAttribute("data-i18n", m.name), g.appendChild(y), g.addEventListener("click", (function () {
        r(this.index)
      })), h.appendChild(g)
    }
    return this._onBgEnvironmentChange = function () {
      a.updateEnvironmentSelection()
    }, this._onBgEnvironmentReset = function () {
      r(a.viewer.prefs.lightPreset), a.updateEnvironmentSelection()
    }, this.viewer.prefs.addListeners(o, this._onBgEnvironmentChange, this._onBgEnvironmentReset), this.updateEnvironmentSelection(), h
  }, b.prototype.updateEnvironmentSelection = function () {
    if (this.is3dMode && this.envTabCreated)
      for (var e = this.viewer.prefs.lightPreset, t = this.gridTable.querySelectorAll(".settings-environment-cell"), n = 0; n < t.length; n++) t[n].index === e ? t[n].classList.add("border-select") : t[n].classList.remove("border-select")
  }, b.prototype.removeCheckbox = function (e) {
    return this.viewer.prefs.removeListeners(e.saveKey), this.removeEventListener(e, "change", e.changeListener), i.SettingsPanel.prototype.removeCheckbox.call(this, e)
  }, b.prototype.createNavigationPanel = function () {
    var e = this.viewer,
      t = v.Navigation,
      n = e.toolController.getTool("dolly");

    function i() {
      return this.addSliderV2(t, "Drag Speed", "Changes sensitivity of mouse movement with the zoom tool", 5, 300, n.getDollyDragScale(), (function (e) {
        n.setDollyDragScale(e)
      }), {
        step: 5
      }, "zoomDragSpeed")[1]
    }

    function r() {
      return this.addSliderV2(t, "Scroll Speed", "Changes sensitivity of the mouse scroll wheel when zooming", .1, 3, n.getDollyScrollScale(), (function (e) {
        n.setDollyScrollScale(e)
      }), {
        step: .1
      }, "zoomScrollSpeed")[1]
    }
    this.is3dMode && (this.addLabel(t, "ViewCube"), this.addCheckbox(t, "Show ViewCube", "Toggles availability of the ViewCube navigation control", !0, (function (t) {
      e.getExtension("Autodesk.ViewCubeUi", (function (e) {
        e.displayViewCube(t)
      }))
    }), "viewCube"), Object(l.isMobileDevice)() || this.addCheckbox(t, "ViewCube acts on pivot", "When enabled, the ViewCube orbits the view around the active pivot point When disabled, it orbits around the center of the view", !1, (function (t) {
      e.setUsePivotAlways(t)
    }), "alwaysUsePivot"), this.addLabel(t, "Orbit"), this.addCheckbox(t, "Fusion style orbit", "Enables Fusion-style orbit overlay and gives the ability to lock orbit axis", !1, (function (t) {
      t ? e.loadExtension("Autodesk.Viewing.FusionOrbit", null) : e.unloadExtension("Autodesk.Viewing.FusionOrbit", null)
    }), "fusionOrbit"), this.addCheckbox(t, "Orbit past world poles", "Allows view rotation to continue past the model’s North Pole", !0, (function (t) {
      e.setOrbitPastWorldPoles(t)
    }), "orbitPastWorldPoles"), this.addLabel(t, "Zoom"), Object(l.isMobileDevice)() || (this.addCheckbox(t, "Zoom towards pivot", "When disabled, zooming operations are centered at the current cursor location", !1, (function (t) {
      e.setZoomTowardsPivot(t)
    }), "zoomTowardsPivot"), this.addCheckbox(t, "Reverse mouse zoom direction", "Toggles direction of zooming in and out", !1, (function (t) {
      e.setReverseZoomDirection(t)
    }), "reverseMouseZoomDir"), this.scrollSpeed = r.call(this)), this.dragSpeed = i.call(this), this.addLabel(t, "Mouse"), Object(l.isMobileDevice)() || (this.addCheckbox(t, "Left handed mouse setup", "Swaps the buttons on the mouse", !1, (function (t) {
      e.setUseLeftHandedInput(t)
    }), "leftHandedMouseSetup"), this.addCheckbox(t, "Set pivot with left mouse button", "Change left-click behavior to set new pivot point (overrides select object)", !1, (function (t) {
      e.setClickToSetCOI(t)
    }), "clickToSetCOI")), this.addCheckbox(t, "Open properties on select", "Always show properties upon selecting object", !0, (function (t) {
      e.prefs.set("openPropertiesOnSelect", t)
    }), "openPropertiesOnSelect")), this.is3dMode || (this.addLabel(t, "Zoom"), this.addCheckbox(t, "Reverse mouse zoom direction", "Toggles direction of zooming in and out", !1, (function (t) {
      e.setReverseZoomDirection(t)
    }), "reverseMouseZoomDir"), Object(l.isMobileDevice)() || (this.scrollSpeed = r.call(this)), this.dragSpeed = i.call(this), this.addLabel(t, "Mouse"), this.addCheckbox(t, "Open properties on select", "Always show properties upon selecting object", !0, (function (t) {
      e.prefs.set("openPropertiesOnSelect", t)
    }), "openPropertiesOnSelect"), Object(l.isMobileDevice)() || this.addCheckbox(t, "Left handed mouse setup", "Swaps the buttons on the mouse", !1, (function (t) {
      e.setUseLeftHandedInput(t)
    }), "leftHandedMouseSetup"))
  }, b.prototype.addConfigButton = function (e, t) {
    var n = this;
    if (!t) throw new Error("Must register a function callback.");
    this._externalButtonsLabel || (this._externalButtonsLabel = this.addLabel(v.Configuration, "More"));
    var i = this.addButton(v.Configuration, e);
    return this.getControl(i).setOnClick((function () {
      n.setVisible(!1), t()
    })), this._externalButtonIds.push(i), i
  }, b.prototype.removeConfigButton = function (e) {
    var t = this._externalButtonIds.indexOf(e);
    if (-1 === t) return !1;
    var n = this.getControl(e);
    return !!n && (this.removeControl(n), this._externalButtonIds.splice(t, 1), 0 === this._externalButtonIds.length && null !== this._externalButtonsLabel && (this._externalButtonsLabel.removeFromParent(), this._externalButtonsLabel = null), !0)
  }, b.prototype.createConfigurationPanel = function () {
    var e = this.viewer,
      t = v.Configuration;
    this.tablesContainer.childNodes[0];
    this.is3dMode && (this.addLabel(t, "Performance Optimization"), this.optimizeNavigationhkBoxId = this.addCheckbox(t, "Smooth navigation", "Provides faster response(but degrades quality) while navigating", Object(l.isMobileDevice)(), (function (t) {
      e.setOptimizeNavigation(t)
    }), "optimizeNavigation"), this.progressiveRenderChkBoxId = this.addCheckbox(t, "Progressive display", "Shows incremental updates of the view and allows for more responsive interaction with the model (some elements may flicker) This improves perceived waiting time", !0, (function (t) {
      e.setProgressiveRendering(t)
    }), "progressiveRendering"), this.addLabel(t, "Display"), this.ghosthiddenChkBoxId = this.addCheckbox(t, "Ghost hidden objects", "Leave hidden objects slightly visible", !0, (function (t) {
      e.setGhosting(t)
    }), "ghosting"), this.displayLinesId = this.addCheckbox(t, "Display Lines", "Toggles display of line objects", !0, (function (t) {
      e.hideLines(!t)
    }), "lineRendering"), this.displayPointsId = this.addCheckbox(t, "Display Points", "Toggles display of point objects", !0, (function (t) {
      e.hidePoints(!t)
    }), "pointRendering"), this.displayEdgesId = this.addCheckbox(t, "Display edges", "Shows outline of model surfaces", !1, (function (t) {
      e.setDisplayEdges(t)
    }), "edgeRendering"), this._addSelectionModeOption()), this.is3dMode || (this.addLabel(t, "Performance Optimization"), this.progressiveRenderChkBoxId = this.addCheckbox(t, "Progressive display", "Shows incremental updates of the view and allows for more responsive interaction with the model (some elements may flicker) This improves perceived waiting time", !0, (function (t) {
      e.setProgressiveRendering(t)
    }), "progressiveRendering"))
  }, b.prototype._addSelectionModeOption = function () {
    var e = v.Configuration;
    this.addLabel(e, "Selection");
    var t = [],
      n = [],
      i = 0;
    for (var r in Autodesk.Viewing.SelectionMode) t[i] = r, n[i] = Autodesk.Viewing.SelectionMode[r], i++;
    var o = t.map((function (e) {
      return e.split("_").map((function (e) {
        return e.charAt(0) + e.slice(1).toLowerCase()
      })).join(" ")
    }));
    this.selectionModeId = this.addDropDownMenu(e, "Selection Mode", o, n, null, null, g.Prefs3D.SELECTION_MODE)
  }, b.prototype.createAppearancePanel = function () {
    var e = this.viewer,
      t = v.Appearance;
    this.tablesContainer.childNodes[2];
    this.is3dMode && (this.addLabel(t, "Visual Quality Optimization"), this.antialiasingChkBoxId = this.addCheckbox(t, "Anti-aliasing", "Remove jagged edges from lines", !0, (function (t) {
      e.setQualityLevel(e.prefs.ambientShadows, t)
    }), "antialiasing"), this.ambientshadowsChkBoxId = this.addCheckbox(t, "Ambient shadows", "Improve shading of occluded surfaces", !0, (function (t) {
      e.setQualityLevel(t, e.prefs.antialiasing)
    }), "ambientShadows"), this.groundShadowChkBoxId = this.addCheckbox(t, "Ground shadow", "Add simulated ground surface shadows", !0, (function (t) {
      e.setGroundShadow(t)
    }), "groundShadow"), this.groundReflectionChkBoxId = this.addCheckbox(t, "Ground reflection", "Add simulated ground surface reflections", !1, (function (t) {
      e.setGroundReflection(t)
    }), "groundReflection")), this.is3dMode || (this.addLabel(t, "Existing behavior"), this.swapBlackAndWhiteChkBoxId = this.addCheckbox(t, "2D Sheet Color", "Switch sheet color white to black", !0, (function (t) {
      e.setSwapBlackAndWhite(t)
    }), "swapBlackAndWhite"), this.loadingAnimationChkBoxId = this.addCheckbox(t, "Loading Animation", "Animate lines during loading", !0, (function (t) {
      e.prefs.set(g.Prefs2D.LOADING_ANIMATION, t)
    }), "loadingAnimation"))
  }, b.prototype.createEnvironmentPanel = function () {
    if (this.is3dMode && !this.envTabCreated) {
      this.envTabCreated = !0;
      var e = this.viewer,
        t = v.Environment,
        n = this.tablesContainer.childNodes[3];
      this.gridTable = n, this.addLabel(t, "Environment"), this.envMapBackgroundChkBoxId = this.addCheckbox(t, "Environment Image Visible", "Shows lighting environment as background", !0, function (t) {
        e.setEnvMapBackground(t)
      }.bind(this), "envMapBackground");
      var i = n.tBodies[0].insertRow(-1).insertCell(0),
        r = this.getDocument();
      this.caption = r.createElement("div"), this.caption.setAttribute("data-i18n", "Environments and Lighting Selection"), this.caption.textContent = s.i18n.translate("Environments and Lighting Selection"), this.caption.classList.add("settings-row-title"), i.appendChild(this.caption), i.colSpan = "3", this.envSelect = this.addGrid("Environments and Lighting Selection", n, a.LightPresets, e.impl.currentLightPreset(), (function (t) {
        e.setLightPreset(t)
      }), g.Prefs3D.LIGHT_PRESET), this.envSelect.classList.add("with-environment")
    }
  }, b.prototype.createVersionLabel = function (e) {
    if (e) {
      var t = this.getDocument();
      this.versionDiv = t.createElement("div"), this.versionDiv.textContent = function () {
        var e = LMV_VIEWER_VERSION;
        "@" === LMV_VIEWER_VERSION.charAt(0) && (e = "0.0.0");
        return "v" + e
      }(), this.versionDiv.className = "docking-panel-version-label", e.appendChild(this.versionDiv)
    }
  }, b.prototype.createRestoreDefaultSettingsButton = function () {
    var e = this.viewer,
      t = this.getDocument();
    this.restoreDiv = t.createElement("div"), this.restoreDiv.classList.add("docking-panel-container-solid-color-b"), this.restoreDiv.classList.add("restore-defaults-container"), this.restoreButton = t.createElement("div"), this.restoreButton.className = "docking-panel-tertiary-button", this.restoreButton.setAttribute("data-i18n", "Restore all default settings"), this.restoreButton.textContent = Autodesk.Viewing.i18n.translate("Restore all default settings"), this.restoreDiv.appendChild(this.restoreButton), this.addEventListener(this.restoreDiv, "touchstart", l.touchStartToClick), this.addEventListener(this.restoreDiv, "click", (function () {
      e.restoreDefaultSettings()
    }), !1), this.scrollContainer.appendChild(this.restoreDiv)
  }, b.prototype.selectTab = function (e) {
    i.SettingsPanel.prototype.selectTab.call(this, e), this.sizeToContent()
  }, b.prototype.sizeToContent = function () {
    i.SettingsPanel.prototype.sizeToContent.call(this, this.viewer.container)
  }, b.prototype.onViewerResize = function (e, t, n, i, r, o) {
    this.sizeToContent()
  }, b.prototype.syncUI = function () {
    var e = this.viewer,
      t = this.viewer.prefs;
    this.setControlValue(this.antialiasingChkBoxId, t.antialiasing), this.setControlValue(this.ambientshadowsChkBoxId, t.ambientShadows), this.setControlValue(this.groundShadowChkBoxId, t.groundShadow), this.setControlValue(this.groundReflectionChkBoxId, t.groundReflection), this.setControlValue(this.envMapBackgroundChkBoxId, e.impl.isEnvMapBackground()), this.setControlValue(this.progressiveRenderChkBoxId, t.progressiveRendering), this.setControlValue(this.swapBlackAndWhiteChkBoxId, t.swapBlackAndWhite), this.setControlValue(this.loadingAnimationChkBoxId, t.loadingAnimation), this.setControlValue(this.ghosthiddenChkBoxId, t.ghosting), this.setControlValue(this.displayLinesId, t.lineRendering), this.setControlValue(this.displayPointsId, t.pointRendering), this.setControlValue(this.displayEdgesId, t.edgeRendering), this.setControlValue(this.scrollSpeed, t.zoomScrollSpeed), this.setControlValue(this.dragSpeed, t.zoomDragSpeed), this.updateEnvironmentSelection()
  }, b.prototype.setControlValue = function (e, t) {
    var n = this.getControl(e);
    n && n.setValue(t)
  }
}, function (e, t, n) {
  "use strict";
  n.r(t), n.d(t, "FloatToHalf", (function () {
    return s
  })), n.d(t, "HalfToFloat", (function () {
    return l
  })), n.d(t, "HALF_INT_MAX", (function () {
    return c
  })), n.d(t, "IntToHalf", (function () {
    return u
  })), n.d(t, "HalfToInt", (function () {
    return h
  })), n.d(t, "HalfTest", (function () {
    return d
  }));
  var i = new Float32Array(1),
    r = new Uint32Array(i.buffer),
    o = new Uint16Array(1),
    a = new Uint16Array(1),
    s = function (e) {
      i[0] = e;
      var t = r[0],
        n = 0;
      if (0 == (2147483647 & t)) a[n++] = t >> 16;
      else {
        var s = 2147483648 & t,
          l = 2139095040 & t,
          c = 8388607 & t;
        if (0 === l) a[n++] = s >> 16;
        else if (2139095040 == l) a[n++] = 0 === c ? s >> 16 | 31744 : 65024;
        else {
          var u, h, d = s >> 16,
            f = (0 | l >> 23) - 127 + 15;
          f >= 31 ? a[n++] = s >> 16 | 31744 : f <= 0 ? (14 - f > 24 ? u = 0 : (u = (c |= 8388608) >> 14 - f, o[0] = u, u = o[0], c >> 13 - f & 1 && (u += 1)), a[n++] = d | u) : (h = f << 10, o[0] = h, h = o[0], u = c >> 13, o[0] = u, u = o[0], a[n++] = 4096 & c ? 1 + (d | h | u) : d | h | u)
        }
      }
      return a[0]
    },
    l = function (e) {
      var t, n = 65535 & e;
      if (0 == (32767 & n)) t = n << 16;
      else {
        var o = 32768 & n,
          a = 31744 & n,
          s = 1023 & n;
        if (0 === a) {
          var l = -1;
          do {
            l++, s <<= 1
          } while (0 == (1024 & s));
          var c = o << 16,
            u = (a << 16 >> 26) - 15 + 127 - l,
            h = u << 23,
            d = (1023 & s) << 13;
          t = c | h | d
        } else t = 31744 == a ? 0 === s ? o << 16 | 2139095040 : 4290772992 : (c = o << 16) | (h = (u = (a << 16 >> 26) - 15 + 127) << 23) | (d = s << 13)
      }
      return r[0] = t, i[0]
    },
    c = 59390,
    u = function (e) {
      if (e > c - 1 || e < 0) return console.log("out of range"), s(NaN);
      if (0 === e) return 0;
      var t = !1;
      e > c / 2 - 1 && (t = !0, e -= c / 2 - 1);
      var n = 0 | Math.abs(e / 1024),
        i = Math.pow(2, n - 13),
        r = i + (e - 1024 * n) * i / 1024;
      return t && (r = -r), s(r)
    },
    h = function (e) {
      if (0 === e) return 0;
      var t = l(e),
        n = !1;
      t < 0 && (n = !0, t = -t);
      var i = 0 | Math.floor(Math.log(t) / Math.log(2)),
        r = Math.pow(2, i),
        o = (t - r) / r * 1024 + 1024 * (i + 13);
      return n && (o += c / 2 - 1), o
    },
    d = function () {
      for (var e = [-1 / 255, -.17, -75, -1789, -.005], t = 0; t < e.length; t++) console.log("input", e[t], "encoded", s(e[t]), "decoded", l(s(e[t])));
      for (t = 0; t < c; t++) {
        var n = h(u(t));
        n !== t && console.log("Roundtrip failed for", t, n)
      }
    }
}, function (e, t, n) {
  "use strict";
  n.r(t), n.d(t, "InitParametersSetting", (function () {
    return z
  })), n.d(t, "createRenderer", (function () {
    return G
  })), n.d(t, "Viewer3DImpl", (function () {
    return H
  }));
  var i = n(3),
    r = n(173),
    o = n(54),
    a = n(253),
    s = n(116),
    l = n(106),
    c = n(254),
    u = n(255),
    h = n(23),
    d = n(143),
    f = n(73),
    p = n(1),
    m = n(45),
    g = n(142),
    v = n(28),
    y = n(70),
    b = n(31),
    _ = n(130),
    x = n(236),
    w = n(256),
    E = n(125),
    A = n(171),
    S = n(16),
    M = n(144),
    T = n(126),
    C = n(148),
    P = n(0),
    L = n(149),
    D = n(2),
    I = n(107),
    R = n(89),
    O = n(66),
    k = n(64),
    N = n(12),
    F = n(5),
    U = null,
    V = Object(i.getGlobal)().ENABLE_DEBUG,
    B = Object(i.getGlobal)().ENABLE_DEBUG_RCS,
    z = {
      canvas: null,
      antialias: !1,
      alpha: !1,
      premultipliedAlpha: !1,
      preserveDrawingBuffer: !0,
      stencil: !1,
      depth: !1
    };

  function G(e) {
    var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {};
    if (!Object(i.isNodeJS)()) {
      var n = Object.assign({}, z, t);
      n.canvas = e;
      var r = new g.WebGLRenderer(n);
      return r.context ? (r.autoClear = !1, r.sortObjects = !1, r) : null
    }
  }

  function H(e, t) {
    var n = this,
      g = this;
    this.setGlobalManager(t.globalManager);
    var N, z, H, W, j, q, X, Y, K, Q, Z, J, $, ee = 1e3 / 15,
      te = 1e3 / 30,
      ne = 1,
      ie = -1,
      re = -1,
      oe = null,
      ae = "y",
      se = null,
      le = null,
      ce = null,
      ue = !1,
      he = !1,
      de = !1,
      fe = {
        type: D.PROGRESS_UPDATE_EVENT,
        state: o.ProgressState.LOADING,
        percent: 0
      },
      pe = !1,
      me = !1,
      ge = !1,
      ve = 0,
      ye = 0,
      be = 1e3 / 60,
      _e = 0,
      xe = !0,
      we = !1,
      Ee = !1,
      Ae = null,
      Se = null;
    this.edgeColorMain = new P.Vector4(0, 0, 0, .3), this.edgeColorGhosted = new P.Vector4(0, 0, 0, .1);
    var Me, Te, Ce, Pe = Object(i.getGlobal)(),
      Le = function (e) {
        var t = e.model;
        n.canvas && t && t.getData() && t.getData().stdSurfMats && t.getData().stdSurfMats.materials && n.api.loadExtension("Autodesk.StandardSurface").then((function (e) {
          e && e.processModel(t)
        }))
      },
      De = function (e) {
        return e.model.modelRootLoaded = !0
      },
      Ie = {},
      Re = "",
      Oe = !0;

    function ke(e) {
      var t = Me.phase,
        n = t == v.RenderFlags.RENDER_NORMAL,
        i = Y.settings.idbuffer && t != v.RenderFlags.RENDER_HIDDEN,
        r = t == v.RenderFlags.RENDER_HIDDEN ? g.edgeColorGhosted : g.edgeColorMain;
      Y.setEdgeColor(r), t == v.RenderFlags.RENDER_HIDDEN ? e.overrideMaterial = g.fadeMaterial : t == v.RenderFlags.RENDER_HIGHLIGHTED && (e.overrideMaterial = g.highlightMaterial);
      var o = {
        type: D.RENDER_SCENE_PART,
        scene: e,
        wantColor: !0,
        wantSAO: n,
        wantID: i,
        context: Y
      };
      g.api.dispatchEvent(o), o.preventDefault || Y.renderScenePart(e, !0, n, i), e.overrideMaterial = null
    }

    function Ne(e) {
      H && (g.canvasBoundingclientRectDirty = !0, g.camera.aspect = W / j, g.camera.clientWidth = W, g.camera.clientHeight = j, Y.setSize(W, j), g.controls.handleResize(), J && J.setSize(W, j), g.invalidate(!0, !0, !0), H = !1, e || g.api.dispatchEvent({
        type: D.VIEWER_RESIZE_EVENT,
        width: W,
        height: j
      }))
    }

    function Fe() {
      var e;
      if ((Z.enabled || J) && !g.is2d && (e = g.model && !g.model.isLoadDone() ? g.model.getData().bbox : g.getVisibleBounds(!0, !1))) {
        var t = g.camera,
          n = e.clone(),
          i = new P.Vector3(1, 0, 0),
          r = le.clone();
        t.worldUpTransform && (n.applyMatrix4(t.worldUpTransform), i.applyMatrix4(t.worldUpTransform), r.applyMatrix4(t.worldUpTransform)), n.min.y -= .005 * (n.max.y - n.min.y), K && K.expandByGroundShadow(n, r);
        var o = n.size(),
          a = n.center();
        if (K || (o.x *= 1.25, o.z *= 1.25, o.x = o.z = Math.max(o.x, o.z)), t.worldUpTransform) {
          var s = (new P.Matrix4).getInverse(t.worldUpTransform);
          a.applyMatrix4(s)
        }
        if (Z.setTransform(a, o, t.worldup, i), J) {
          var l = (new P.Vector3).subVectors(a, t.worldup.clone().multiplyScalar(o.y / 2));
          J.setTransform(l, t.worldup, o)
        }
        K && K.setGroundShadowTransform(a, o, t.worldup, i)
      }
    }

    function Ue() {
      K && (K.state = y.SHADOWMAP_NEEDS_UPDATE)
    }
    e && (this.interval = setInterval((function () {
      xe || _e < 60 || g.track({
        name: "fps",
        value: Number(g.fps().toFixed(2)),
        aggregate: "last"
      })
    }), 3e4)), this.api = t, this.canvas = e, this.loader = null, this.canvasBoundingclientRectDirty = !0, this.nearRadius = 0, this.defaultLoadingAnimationDuration = 300, this.lastTime2dGeometryCreated = 0, this.initialize = function () {
      var t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {};
      if (N = new P.Vector3(0, 1, 0), $ = new a.RenderScene, (X = t.glrenderer || G(e, t.webglInitParams)) || Object(i.isNodeJS)()) {
        X && (this.onWebGLcontextLost = this.onWebGLcontextLost.bind(this), X.webglcontextlost = this.onWebGLcontextLost, X.refCount++), (Y = t.renderer || new s.RenderContext).init(X, e ? e.clientWidth : 0, e ? e.clientHeight : 0, {
          useIdBufferSelection: t.useIdBufferSelection
        }), (q = t.materialManager || new l.MaterialManager(X)).refCount++, (Te = t.geomCache) && (Te.addViewer(this.api), Te.refCount++), this.camera = new L.UnifiedCamera(e ? e.clientWidth : 512, e ? e.clientHeight : 512), this.lightsOn = !1, this.lights = [], this.no_lights = [], Ae = (new P.Color).setRGB(1, 1, 1), Se = (new P.Color).setRGB(1, 1, 1), this.cameraChangedEvent = {
          type: D.CAMERA_CHANGE_EVENT,
          camera: this.camera
        }, se = new P.Vector3(1, 1, 1), le = (new P.Vector3).copy(se), ce = new P.Vector3(-1, 0, 1), this.scene = new P.Scene, this.sceneAfter = new P.Scene, this.sceneAfter.sortObjects = !1, this.overlayScenes = {}, mt(), this.createOverlayScene("selection", this.selectionMaterialBase, this.selectionMaterialTop), this.createOverlayScene("selection_points", null, null), this.selectionMeshes = {}, this.fadeMaterial = new P.MeshPhongMaterial({
          color: 16777215,
          opacity: .1,
          reflectivity: 0,
          transparent: !0,
          depthWrite: !1
        }), this.fadeMaterial.packedNormals = !0, q.addInstancingSupport(this.fadeMaterial), q.addMaterial("__fadeMaterial__", this.fadeMaterial, !0), this.setSelectionColor(6724095), q.togglePolygonOffset(!0), Y.setDepthMaterialOffset(q.getPolygonOffsetOn(), q.getPolygonOffsetFactor(), q.getPolygonOffsetUnits()), this.progressiveRender = !0, this.swapBlackAndWhite = !1, this.targetFrameBudget = te, this.frameDisplayRate = 5, Object(i.isMobileDevice)() && (ee *= 2, te *= 2, this.targetFrameBudget /= 2, this.frameDisplayRate /= 2), this.interruptBudget = 1e10, this.controls = {
          update: function (e) {
            this.camera.lookAt(this.camera.target), this.camera.updateProjectionMatrix(), this.camera.dirty = !1
          },
          handleResize: function () {},
          recordHomeView: function () {},
          uninitialize: function () {},
          isToolActivated: function () {
            return !1
          }
        }, this.selector = new c.MultiModelSelector(this), this.visibilityManager = new u.MultiModelVisibilityManager(this), this.showGhosting = !0, this.showOverlaysWhileMoving = !0, this.skipAOWhenMoving = !1, this.keyFrameAnimator = null, this.zoomBoundsChanged = !0;
        var n = h.LightPresets[h.DefaultLightPreset].bgColorGradient;
        this.setClearColors(n[0], n[1], n[2], n[3], n[4], n[5]), (Z = new d.GroundShadow(X)).enabled = !0, Me = new Ye, q.addMaterialNonHDR("groundShadowDepthMaterial", Z.getDepthMaterial()), q.addOverrideMaterial("normalsMaterial", Y.getDepthMaterial()), q.addOverrideMaterial("edgeMaterial", Y.getEdgeMaterial()), Y.beginScene(this.scene, this.camera, this.noLights, !0), Y.composeFinalFrame(!0, i.isIE11), this.api.addEventListener(D.MODEL_ROOT_LOADED_EVENT, Le), this.api.addEventListener(D.MODEL_ROOT_LOADED_EVENT, De)
      }
    }, this.renderGroundShadow = function (e) {
      K ? K.state == y.SHADOWMAP_VALID && K.renderGroundShadow(g.camera, e || Y.getColorTarget()) : (Z.renderShadow(g.camera, e || Y.getColorTarget()), Z.rendered = !0)
    };
    var Ve, Be, ze, Ge = 0,
      He = 1,
      We = 2,
      je = 4,
      qe = 8,
      Xe = 15;

    function Ye() {
      this.highResTimeStamp = -1, this.screenDrawn = Ge, this.screenHasChanged = !1, this.frameBudget = 0, this.frameRemaining = 0, this.phase = v.RenderFlags.RENDER_NORMAL, this.signalProgressByRendering = !1, this.tickCount = 0, this.beginFrameAvg = 0, this.lastBeginFrameTimeStamp = 0, this.RENDERMODE_FULL = 0, this.RENDERMODE_PROGRESSIVE = 1, this.RENDERMODE_SILENT = 2, this.renderType = this.RENDERMODE_FULL, this.INITIAL_GROUND_SHADOW = .2, this.cmdListActive = !1, this.cmdIndex = 0, this.continueExecution = !0, this.encounteredAlwaysDo = !1, this.finishedFullRender = !0, this.groundShadowInPost = !1, this.drawOverlay = !1, this.cmdIsOpen = !1, this.allocArraySize = 0, this.cmdListLength = 0, this.cmdList = [], this.paramList = [], this.CMD_NORMAL_SEQUENCE = 0, this.CMD_DO_AFTER = 1, this.CMD_ALWAYS_DO = 2, this.isActive = function () {
        return this.cmdListActive
      }, this.setFrame = function (e) {
        this.frameBudget = e
      }, this.beginCommandSet = function () {
        this.cmdListActive = !0, this.cmdIndex = 0, this.cmdListLength = 0, this.encounteredAlwaysDo = !1, this.tickCount = 0, this.screenDrawn = Ge, this.screenHasChanged = !1
      }, this.endCommandSet = function () {
        this.cmdIsOpen && (this.cmdIsOpen = !1, this.cmdListLength++)
      }, this._internalSetParam = function (e, t) {
        this.paramList[this.cmdIndex][e] = t
      }, this.addCommand = function (e, t) {
        for (this.cmdIsOpen && this.cmdListLength++, this.cmdIsOpen = !0; this.allocArraySize <= this.cmdListLength;) this.cmdList[this.cmdListLength] = {}, this.paramList[this.cmdListLength] = {}, this.allocArraySize++;
        return this.cmdList[this.cmdListLength] = e, this.paramList[this.cmdListLength].executionLevel = t || this.CMD_NORMAL_SEQUENCE, this.encounteredAlwaysDo = this.encounteredAlwaysDo || t === this.CMD_ALWAYS_DO, this.cmdListLength
      }, this.setParam = function (e, t) {
        this.cmdIsOpen ? this.paramList[this.cmdListLength][e] = t : V && p.logger.error("ERROR: cannot set param when no command is open!")
      }, this.getParam = function (e) {
        return V && void 0 === this.paramList[this.cmdIndex][e] && p.logger.error("ERROR: parameter " + e + " was never set for this command! Go fix it."), this.paramList[this.cmdIndex][e]
      }, this.executeCommandList = function () {
        if (Me.cmdListActive) {
          var e;
          if (this.tickCount > 0 && (Me.lastBeginFrameTimeStamp = 0), this.frameRemaining = this.frameBudget, V && this.cmdIsOpen && p.logger.error("ERROR: should call endCommandSet before executing"), this.continueExecution = !0, B && (0 === this.tickCount && console.log("==================="), console.log("Running commands for " + (Me.renderType === Me.RENDERMODE_PROGRESSIVE ? "progressive" : Me.renderType === Me.RENDERMODE_FULL ? "full" : "silent") + " render, for tick count " + this.tickCount)), this.encounteredAlwaysDo)
            for (var t = 0; t < this.cmdIndex;) this.paramList[t].executionLevel >= Me.CMD_ALWAYS_DO && (B && console.log("  ALWAYS DO command " + t + ": " + this.cmdList[t].name), this.cmdList[t]()), t++;
          for (; this.cmdIndex < this.cmdListLength;)(this.continueExecution || this.paramList[this.cmdIndex].executionLevel >= Me.CMD_DO_AFTER) && (B && console.log("  command " + this.cmdIndex + ": " + this.cmdList[this.cmdIndex].name + " and " + Me.frameRemaining + " frame budget remaining"), this.cmdList[this.cmdIndex]() && (B && console.log("  >>> out of tick time with " + Me.frameRemaining), e = this.cmdIndex, this.continueExecution = !1)), this.cmdIndex++;
          return this.continueExecution ? this.cmdListActive = !1 : this.cmdIndex = e, this.tickCount++, !this.continueExecution
        }
        return Me.lastBeginFrameTimeStamp = 0, !0
      }
    }

    function Ke() {
      if (Me.renderType === Me.RENDERMODE_PROGRESSIVE)
        if (Me.getParam("GenerateGroundShadow.afterBeauty")) {
          if (Me.frameRemaining = Z.prepareGroundShadow(g.modelQueue(), 0, Me.frameRemaining), Z.getStatus() == b.GroundFlags.GROUND_RENDERED) {
            if (Me.getParam("GenerateGroundShadow.signalRedraw")) return g.requestSilentRender(), B && console.log(" $$$$ SIGNAL FULL GROUND SHADOW REDRAW"), !0;
            Me.groundShadowInPost = !0
          }
        } else 0 === Me.tickCount && Z.prepareGroundShadow(g.modelQueue(), 10);
      else Me.frameRemaining = Z.prepareGroundShadow(g.modelQueue(), 0, Me.frameRemaining);
      return Me.frameRemaining < 0 && Z.getStatus() === b.GroundFlags.GROUND_UNFINISHED
    }

    function Qe() {
      return Z.getStatus() !== b.GroundFlags.GROUND_UNFINISHED && g.renderGroundShadow(), !1
    }

    function Ze() {
      return Me.renderType === Me.RENDERMODE_PROGRESSIVE ? Me.getParam("GenerateGroundReflection.afterBeauty") ? (Me.frameRemaining = J.prepareGroundReflection(Z, g, !1, 0, Me.frameRemaining), J.getStatus() == b.GroundFlags.GROUND_RENDERED && (Me.screenDrawn |= qe, Me.groundShadowInPost && q.hasTransparentMaterial() && g.requestDeferredSilentRender())) : 0 === Me.tickCount && J.prepareGroundReflection(Z, g, !0, 10) : Me.frameRemaining = J.prepareGroundReflection(Z, g, !1, 0, Me.frameRemaining), Me.frameRemaining < 0 && J.getStatus() === b.GroundFlags.GROUND_UNFINISHED
    }

    function Je() {
      if (K.state === y.SHADOWMAP_NEEDS_UPDATE) Me.frameRemaining = K.startUpdate($, Me.frameRemaining, g.camera, le, q);
      else if (K.state == y.SHADOWMAP_INCOMPLETE && (Me.frameRemaining = K.continueUpdate($, Me.frameRemaining, q), K.state == y.SHADOWMAP_VALID)) return g.requestSilentRender(), B && console.log(" $$$$ SIGNAL FULL SHADOW MAP REDRAW"), !0;
      return Me.frameRemaining < 0 && K.state !== y.SHADOWMAP_VALID
    }

    function $e() {
      K.state = y.SHADOWMAP_NEEDS_UPDATE
    }

    function et() {
      if (Me.signalProgressByRendering && g.signalProgress(0, o.ProgressState.RENDERING), Me.renderType === Me.RENDERMODE_PROGRESSIVE) {
        if (Me.lastBeginFrameTimeStamp > 0) {
          var e = Me.highResTimeStamp - Me.lastBeginFrameTimeStamp;
          Me.beginFrameAvg = .75 * Me.beginFrameAvg + .25 * e
        }
        Me.lastBeginFrameTimeStamp = Me.highResTimeStamp, Me.beginFrameAvg < te && Me.frameBudget < ee ? (g.targetFrameBudget += 1, g.targetFrameBudget > ee && (g.targetFrameBudget = ee)) : Me.beginFrameAvg > te && Me.frameBudget > ne && (g.targetFrameBudget *= .75 + .25 * te / Me.beginFrameAvg, g.targetFrameBudget < ne && (g.targetFrameBudget = ne))
      }
      g.skipCameraUpdate || g.updateCameraMatrices();
      var t = Me.getParam("BeginScene.clear");
      return Y.beginScene(g.scene, g.camera, g.lightsOn ? g.lights : g.no_lights, t), t && (Me.screenDrawn |= We), Me.getParam("BeginScene.signalCameraChanged") && g.api.dispatchEvent(g.cameraChangedEvent), !1
    }

    function tt() {
      return Me.phase = Me.getParam("BeginPhase.phase"), B && console.log("     render phase is now " + Me.phase), $.reset(g.camera, Me.phase, Me.getParam("BeginPhase.moved"), q.getCutPlanes()), !1
    }

    function nt() {
      return $.isEmpty() || $.isDone() || (Me.screenDrawn |= He, Me.frameRemaining = $.renderSome(ke, Me.frameRemaining), Me.signalProgressByRendering && (g.signalProgress(100 * $.getRenderProgress(), o.ProgressState.RENDERING), B && console.log("  %%% percent done " + 100 * $.getRenderProgress()))), !$.isDone()
    }

    function it() {
      return Me.phase = v.RenderFlags.RENDER_FINISHED, Y.renderScenePart(g.sceneAfter, !0, !0, !0), !1
    }

    function rt() {
      return Me.phase = v.RenderFlags.RENDER_FINISHED, !1
    }

    function ot() {
      g.signalProgress(100, o.ProgressState.RENDERING)
    }

    function at() {
      return g.isOverlayDirty() && (g.clearOverlayDirtyFlag(), Me.drawOverlay = !0), Me.drawOverlay && (!$.isEmpty() && $.isDone() || g.showOverlaysWhileMoving ? (g.renderOverlays(), Me.screenDrawn |= je) : (Y.clearAllOverlays(), Me.drawOverlay = !1)), !1
    }

    function st() {
      Me.screenDrawn |= Xe
    }

    function lt() {
      if (Me.screenDrawn && (Me.phase === v.RenderFlags.RENDER_FINISHED || Me.tickCount % g.frameDisplayRate == 0)) {
        var e = !Me.getParam("PostAndPresent.performAO") || (Me.screenDrawn & (We | He)) == We;
        Y.composeFinalFrame(e), Me.screenHasChanged = !0, Me.screenDrawn = Ge, t = Me.highResTimeStamp, _e++, ye <= t && ye > 0 && (be = .8 * be + .2 * (t - ye)), g.fpsCallback && g.fpsCallback(g.fps()), g.api.dispatchEvent({
          type: D.RENDER_PRESENTED_EVENT
        })
      }
      var t;
      return !1
    }

    function ct() {
      return V && !1 === Y.getAOEnabled() && p.logger.error("AO should be on at this point!"), Y.setAOEnabled(!1), !1
    }

    function ut() {
      return V && !0 === Y.getAOEnabled() && p.logger.error("AO should be off at this point!"), Y.setAOEnabled(!0), !1
    }

    function ht() {
      return g.requestSilentRender(), !1
    }

    function dt() {
      return Me.finishedFullRender = !0, !1
    }
    this.tick = function (e) {
      Me.highResTimeStamp = e = e || 0, X.updateTimestamp(e);
      var t = q.updateMaterials();
      g.invalidate(t.needsClear, t.needsRender, t.overlayDirty);
      var n = function (e) {
          if (g.keyFrameAnimator) {
            var t = ye > 0 ? (e - ye) / 1e3 : 0,
              n = g.keyFrameAnimator.update(t);
            if (n && (g.sceneUpdated(!0), n & g.keyFrameAnimator.UPDATE_CAMERA)) return !0
          }
          return !1
        }(e),
        i = g.controls.update(e),
        r = $ && $.update(e),
        o = i || n || Q || r;
      Q = !1;
      var a = H;
      Ne(), ue = ue || o;
      var s = !1;
      (de = de || o) ? function (e) {
        for (var t in g.selectionMeshes) {
          var n = g.selectionMeshes[t];
          if (n.model) {
            var i = n.model.getFragmentList();
            n.geometry === i.getGeometry(n.fragId) && i.getWorldMatrix(n.fragId, n.matrix)
          }
        }
      }() : Y.overlayUpdate() && !de && (de = s = !0), this.isLoadingAnimationEnabled() && ye - g.lastTime2dGeometryCreated <= X.getLoadingAnimationDuration() && (he = !0);
      var l = g.model && g.model.loader && g.model.loader.pagingProxy && g.model.loader.pagingProxy.getMemoryInfo();
      Me.signalProgressByRendering = g.model && g.model.isLoadDone() && !g.model.getData().isLeaflet && !l, pe && (Fe(), Z.setDirty(), pe = !1, 1) && (ue = !0);
      var c = ue,
        u = $.frameResumePossible();
      if (ue = ue || !u, ge = ge || me && !Me.cmdListActive, ue || he || de || ge)
        if (Me.drawOverlay = de, ue || he || ge) {
          var h, d = c ? _.ResetFlags.RESET_RELOAD : _.ResetFlags.RESET_NORMAL;
          ue || he ? (g.progressiveRender ? (Me.renderType = Me.RENDERMODE_PROGRESSIVE, h = g.targetFrameBudget) : (Me.renderType = Me.RENDERMODE_FULL, h = g.interruptBudget), ue && (me = ge = !1)) : (Me.renderType = Me.RENDERMODE_SILENT, h = g.targetFrameBudget, ue = !0, d = _.ResetFlags.RESET_REDRAW, me = ge = !1), Me.setFrame(h), Me.finishedFullRender = !1, Me.beginCommandSet();
          var f = Z.enabled && !g.is2d && !xe,
            p = !!J && !g.is2d && !xe,
            m = o || a,
            b = o && g.skipAOWhenMoving && Y.getAOEnabled();
          Me.addCommand(et), Me.setParam("BeginScene.signalCameraChanged", m), Me.setParam("BeginScene.clear", ue), b && Me.addCommand(ct, Me.CMD_ALWAYS_DO), $ && (K && K.state !== y.SHADOWMAP_VALID && Me.addCommand(Je), f && (Me.addCommand(Ke), Me.setParam("GenerateGroundShadow.afterBeauty", !1), Me.setParam("GenerateGroundShadow.signalRedraw", !1)), p ? (J.setDirty(), Me.addCommand(Ze), Me.setParam("GenerateGroundReflection.afterBeauty", !1)) : f && ue && Me.addCommand(Qe), $.hasHighlighted() && (Me.addCommand(tt), Me.setParam("BeginPhase.phase", v.RenderFlags.RENDER_HIGHLIGHTED), Me.setParam("BeginPhase.moved", d), d = !1, Me.addCommand(nt)), Me.addCommand(tt), Me.setParam("BeginPhase.phase", v.RenderFlags.RENDER_NORMAL), Me.setParam("BeginPhase.moved", d), d = !1, Me.addCommand(nt), !$.areAllVisible() && g.showGhosting ? (p && Me.renderType === Me.RENDERMODE_PROGRESSIVE || (Me.addCommand(tt), Me.setParam("BeginPhase.phase", v.RenderFlags.RENDER_HIDDEN), Me.setParam("BeginPhase.moved", d), Me.addCommand(nt)), Me.addCommand(it)) : Me.addCommand(it), Me.signalProgressByRendering && Me.addCommand(ot)), Me.addCommand(at, Me.renderType === Me.RENDERMODE_PROGRESSIVE ? Me.CMD_DO_AFTER : Me.CMD_NORMAL_SEQUENCE), Me.addCommand(lt, Me.renderType === Me.RENDERMODE_PROGRESSIVE ? Me.CMD_DO_AFTER : Me.CMD_NORMAL_SEQUENCE), Me.setParam("PostAndPresent.performAO", Y.getAOEnabled() && !b), Me.renderType === Me.RENDERMODE_PROGRESSIVE && $ && (K && K.state !== y.SHADOWMAP_VALID && (Me.addCommand($e), Me.addCommand(Je)), f && (Me.addCommand(Ke), Me.setParam("GenerateGroundShadow.afterBeauty", !0), Me.setParam("GenerateGroundShadow.signalRedraw", !p), Me.signalProgressByRendering && Me.addCommand(ot)), p && (Me.groundShadowInPost = !1, Me.addCommand(Ze), Me.setParam("GenerateGroundReflection.afterBeauty", !0), !$.areAllVisible() && g.showGhosting && (Me.addCommand(tt), Me.setParam("BeginPhase.phase", v.RenderFlags.RENDER_HIDDEN), Me.setParam("BeginPhase.moved", d), Me.addCommand(nt)), Me.addCommand(rt), Me.addCommand(lt), Me.setParam("PostAndPresent.performAO", Y.getAOEnabled() && !b), Me.signalProgressByRendering && Me.addCommand(ot))), b && (Me.addCommand(ut, Me.CMD_ALWAYS_DO), Me.addCommand(ht)), Me.addCommand(dt), Me.endCommandSet(), ue = !1, he = !1, de = !1
        } else Me.finishedFullRender && (Me.beginCommandSet(), B && console.log("=====\nOVERLAY DIRTY"), s ? Me.addCommand(st) : Me.addCommand(at, !0), Me.addCommand(lt, !0), Me.setParam("PostAndPresent.performAO", Y.getAOEnabled()), Me.endCommandSet(), de = !1);
      Ce = Me.cmdListActive, g.onBeforeRender && g.onBeforeRender(Ce), Me.executeCommandList(), Ce !== Oe && (g.api.dispatchEvent({
        type: D.FINAL_FRAME_RENDERED_CHANGED_EVENT,
        value: {
          finalFrame: !Ce
        }
      }), Oe = Ce), ye = Me.highResTimeStamp
    }, this.setLmvDisplay = function (e) {
      Pe = e
    }, this.run = function () {
      z = 0, setTimeout((function () {
        ! function e(t) {
          z = Pe.requestAnimationFrame(e), g.tick(t)
        }()
      }), 1)
    }, this.stop = function () {
      g.getWindow().cancelAnimationFrame(z)
    }, this.toggleProgressive = function (e) {
      this.progressiveRender = e, ue = !0
    }, this.updateClearColors = function () {
      var e = this.clearColorTop;
      if (this.is2d && this.swapBlackAndWhite) {
        var t = 1 === e.x && 1 === e.y && 1 === e.z,
          n = 0 === e.x && 0 === e.y && 0 === e.z;
        t ? e = new P.Color(0, 0, 0) : n && (e = new P.Color(1, 1, 1))
      }
      Y.setClearColors(e, this.clearColorBottom)
    }, this.toggleSwapBlackAndWhite = function (e) {
      this.swapBlackAndWhite = e, this.updateClearColors(), ue = !0
    }, this.toggleGrayscale = function (e) {
      q.setGrayscale(e), ue = !0
    }, this.toggleGhosting = function (e) {
      this.showGhosting = e, ue = !0
    }, this.toggleOverlaysWhileMoving = function (e) {
      this.showOverlaysWhileMoving = e
    }, this.togglePostProcess = function (e, t) {
      Y.initPostPipeline(e, t), this.fireRenderOptionChanged(), ue = !0
    }, this.toggleGroundShadow = function (e) {
      Z.enabled !== e && (Z.enabled = e, Z.clear(), e && Z.setDirty(), Fe(), this.fireRenderOptionChanged(), this.invalidate(!0, !1, !1))
    }, this.isGroundShadowEnabled = function () {
      return Z && Z.enabled
    }, this.setGroundShadowColor = function (e) {
      Z.enabled && (Z.setColor(e), this.invalidate(!0, !1, !1))
    }, this.setGroundShadowAlpha = function (e) {
      Z.enabled && (Z.setAlpha(e), this.invalidate(!0, !1, !1))
    }, this.toggleGroundReflection = function (e) {
      e && J || !e && !J || (e ? ((J = new x.GroundReflection(X, this.canvas.clientWidth, this.canvas.clientHeight, {
        clearPass: Y.getClearPass()
      })).setClearColors(this.clearColorTop, this.clearColorBottom, Object(i.isMobileDevice)()), J.toggleEnvMapBackground(we), J.setEnvRotation(Y.getEnvRotation()), Fe()) : (J.cleanup(), J = void 0), this.fireRenderOptionChanged(), this.invalidate(!0, !1, !1))
    }, this.setGroundReflectionColor = function (e) {
      J && (J.setColor(e), this.invalidate(!0, !1, !1))
    }, this.setGroundReflectionAlpha = function (e) {
      J && (J.setAlpha(e), this.invalidate(!0, !1, !1))
    }, this.toggleEnvMapBackground = function (e) {
      we = e, Y.toggleEnvMapBackground(e), J && J.toggleEnvMapBackground(e), this.invalidate(!0, !0, !1)
    }, this.isEnvMapBackground = function () {
      return we
    }, this.setOptimizeNavigation = function (e) {
      this.skipAOWhenMoving = e
    }, this.renderOverlays = function () {
      ! function () {
        for (var e in g.selectionMeshes) {
          var t = g.selectionMeshes[e];
          t.model && t.model.isConsolidated() && t.model.updateRenderProxy(t, t.fragId)
        }
      }();
      var e, t = this.lightsOn;
      t || this.toggleLights(!0, !0), this.dir_light1 && (e = this.dir_light1.intensity, this.dir_light1.intensity = 1), Y.renderOverlays(this.overlayScenes, this.lightsOn ? this.lights : this.no_lights), t || this.toggleLights(!1, !0), this.dir_light1 && (this.dir_light1.intensity = e)
    }, this.setLayerVisible = function (e, t) {
      this.layers.setLayerVisible(e, t)
    }, this.isLayerVisible = function (e) {
      return this.layers.isLayerVisible(e)
    }, this.getVisibleLayerIndices = function () {
      return this.layers.getVisibleLayerIndices()
    }, this.setNearRadius = function (e, t) {
      this.nearRadius !== e && (this.nearRadius = e, t && this.invalidate(!0))
    }, this.getNearRadius = function () {
      return this.nearRadius
    }, this.updateNearFarValues = function (e, t) {
      if (ze || (Ve = new P.Matrix4, Be = new P.Matrix4, ze = new P.Box3), Ve.compose(e.position, e.quaternion, e.scale), Be.getInverse(Ve), ze.copy(t), J) {
        var n = new P.Vector3;
        n.multiplyVectors(ze.max, e.worldup);
        var i = new P.Vector3;
        i.multiplyVectors(ze.min, e.worldup), n.sub(i), n.x >= 0 ? ze.min.x -= n.x : ze.max.x -= n.x, n.y >= 0 ? ze.min.y -= n.y : ze.max.y -= n.y, n.z >= 0 ? ze.min.z -= n.z : ze.max.z -= n.z
      }
      K && K.groundShapeBox && ze.union(K.groundShapeBox), ze.applyMatrix4(Be);
      var r = 1e-5 * (ze.max.z - ze.min.z),
        o = .5 * (ze.max.y - ze.min.y),
        a = -(ze.max.z + r) - o,
        s = -(ze.min.z - r) + o;
      e.isPerspective && (this.nearRadius > 0 ? (a = Math.max(a, Math.min(this.nearRadius, 1e-4 * Math.abs(s - a))), s = Math.min(s, 1e4 * a)) : (a = Math.max(a, Math.min(1, 1e-4 * Math.abs(s - a))), s < 0 && (s = 1e-4), a = Math.max(a, 1e-5 * s))), s = Math.max(s, a), e.near = a, e.far = s, e.updateProjectionMatrix(), e.updateMatrixWorld(), e.matrixWorldInverse.getInverse(e.matrixWorld)
    }, this.getPixelsPerUnit = function (e, t) {
      var n = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : this.model,
        i = Y.settings.deviceHeight,
        r = n.is2d(),
        o = q.getCutPlanesRaw(),
        a = o[0],
        s = n.getBoundingBox();
      return k.SceneMath.getPixelsPerUnit(e, r, t, i, a, s)
    }, this.updateCameraMatrices = function () {
      var e = this.camera;
      e.worldup && this.setWorldUp(e.worldup);
      var t = this.getVisibleBounds(!0, de);
      if (this.updateNearFarValues(e, t), this.model) {
        var n = this.getPixelsPerUnit(e, t);
        this.model.is2d() ? (q.updatePixelScale(n, Y.settings.deviceWidth, Y.settings.deviceHeight), q.updateSwapBlackAndWhite(this.swapBlackAndWhite)) : q.updatePixelScale(n, Y.settings.deviceWidth, Y.settings.deviceHeight)
      }
    }, this.initLights = function () {
      this.dir_light1 = new P.DirectionalLight(Ae, 1), this.dir_light1.position.copy(ce), this.amb_light = new P.AmbientLight(Se), this.lights = [this.dir_light1, this.amb_light], this.camera.add(this.dir_light1), this.camera.add(this.dir_light1.target), Ee = !0
    };

    function ft(e) {
      return q._getMaterialHash(e, "selection2d")
    }

    function pt() {
      if (!Object(i.isMobileDevice)()) {
        var e = $.getModels().length,
          t = Y.mrtFlags();
        if (e > 1 && t.mrtIdBuffer < 2) Y.setIdTargetCount(2) && q.toggleMRTSetting(Y.mrtFlags())
      }
    }
    this.toggleLights = function (e, t) {
      this.amb_light && (this.lightsOn = e, function (e, t, n, i) {
        var r = h.LightPresets[ie],
          o = r && r.ambientColor,
          a = r && r.directLightColor;
        o = o || Se.toArray(), a = a || Ae.toArray(), n ? (i && e ? e.color.setRGB(.5 * a[0], .5 * a[1], .5 * a[2]) : e && e.color.setRGB(o[0], o[1], o[2]), t && t.color.setRGB(a[0], a[1], a[2])) : e && i && e.color.setRGB(o[0], o[1], o[2])
      }(this.amb_light, this.dir_light1, e, t))
    }, this.syncCamera = function (e) {
      this.camera.updateCameraMatrices(), e && this.setWorldUp(this.api.navigation.getWorldUpVector()), Q = !0
    }, this.getModelCamera = function (e) {
      if (e) {
        var t = e.getDefaultCamera();
        return t || L.UnifiedCamera.getViewParamsFromBox(e.getBoundingBox(), e.is2d(), this.camera.aspect, this.camera.up, this.camera.fov)
      }
    }, this.setViewFromFile = function (e, t) {
      if (e) {
        var n = this.getModelCamera(e),
          i = e.getMetadata("navigation hint", "value", null),
          r = this.controls.isToolActivated("freeorbit") || t && "Freeorbit" === i;
        this.setViewFromCamera(n, t, r)
      }
    }, this.adjustOrthoCamera = function (e) {
      if (!e.isPerspective && this.model) {
        var t = this.model.getBoundingBox(),
          n = t.size(),
          i = e.target.clone().sub(e.position),
          r = i.length();
        if (r > 1e3 * n.length()) {
          var o = e.position.distanceTo(t.center());
          e.target.copy(e.position).add(i.normalize().multiplyScalar(o))
        } else {
          if (Math.abs(r - e.orthoScale) / r > 1e-5) p.logger.warn("Ortho scale does not match eye-target distance. One of them is likely wrong, but which one?"), !(0 === e.fov && 1 === e.orthoScale) && e.position.copy(e.target).add(i.normalize().multiplyScalar(-e.orthoScale))
        }
      }
    }, this.setViewFromCamera = function (e, t, n) {
      this.adjustOrthoCamera(e);
      var i, r = this.model ? this.model.getUpVector() : null;
      i = r ? (new P.Vector3).fromArray(r) : n ? e.up.clone() : I.Navigation.snapToAxis(e.up.clone()), n ? this.api.prefs && this.api.prefs.set("fusionOrbitConstrained", i.equals(e.up)) : e.up = i;
      var o = this.api.navigation;
      if (o) {
        var a = this.camera;
        if (t) a.up.copy(e.up), a.position.copy(e.position), a.target.copy(e.target), e.isPerspective ? a.fov = e.fov : (a.saveFov = e.fov, a.fov = L.UnifiedCamera.ORTHO_FOV), a.isPerspective = e.isPerspective, a.orthoScale = e.orthoScale, a.dirty = !0, o.setWorldUpVector(n ? i : a.up), o.setView(a.position, a.target), o.setPivotPoint(a.target), this.syncCamera(!0);
        else if (a.isPerspective = e.isPerspective, e.isPerspective || (a.saveFov = e.fov, e.fov = L.UnifiedCamera.ORTHO_FOV), n) o.setRequestTransitionWithUp(!0, e.position, e.target, e.fov, e.up, i);
        else {
          var s = this.model.getData().bbox;
          if (!s.containsPoint(e.target)) {
            var l = s.center().distanceTo(e.position),
              c = e.target.clone().sub(e.position).normalize().multiplyScalar(l);
            e.target.copy(e.position.clone().add(c))
          }
          var u = o.computeOrthogonalUp(e.position, e.target);
          o.setRequestTransitionWithUp(!0, e.position, e.target, e.fov, u, i)
        }
      }
      Q = !0
    }, this.getViewArrayFromCamera = function (e) {
      var t, n = e || {
          x: 0,
          y: 0,
          z: 0
        },
        i = this.camera,
        r = this.model.getUpVector();
      t = r ? (new P.Vector3).fromArray(r) : I.Navigation.snapToAxis(i.up.clone());
      var o = this.api.navigation.getPivotPoint();
      return [i.position.x + n.x, i.position.y + n.y, i.position.z + n.z, o.x + n.x, o.y + n.y, o.z + n.z, t.x, t.y, t.z, i.aspect, P.Math.degToRad(i.fov), i.orthoScale, i.isPerspective ? 0 : 1]
    }, this.setViewFromViewBox = function (e, t, n, i) {
      if (e.is2d()) {
        var r = {},
          o = e.getBoundingBox(),
          a = {
            width: t[2] - t[0],
            height: t[3] - t[1]
          };
        a.aspect = a.width / a.height, a.centerX = t[0] + a.width / 2, a.centerY = t[1] + a.height / 2;
        var s = this.camera.aspect;
        s > a.aspect ? r.orthoScale = a.height : r.orthoScale = a.width / s, r.isPerspective = !1, r.position = new P.Vector3(a.centerX, a.centerY, o.center().z + r.orthoScale), r.target = new P.Vector3(a.centerX, a.centerY, o.center().z), r.target.y += 1e-6 * a.height, r.up = new P.Vector3(0, 0, 1), this.setViewFromCamera(r, i, !1)
      }
    }, this.setWorldUp = function (e) {
      if (!N.equals(e)) {
        N.copy(e);
        var t = Math.abs(e.x);
        ae = "x", Math.abs(e.y) > t && (ae = "y", t = Math.abs(e.y)), Math.abs(e.z) > t && (ae = "z");
        var n, i, r, o, a = new P.Vector3(0, 1, 0);
        g.camera.worldUpTransform = (n = a, i = e, r = (new P.Vector3).crossVectors(i, n).normalize(), o = Math.acos(n.dot(i)), (new P.Matrix4).makeRotationAxis(r, o)), this.sceneUpdated(!1)
      }
    }, this.addModel = function (e, t) {
      if (e) {
        var n = !!this.model,
          i = e.is2d();
        if (this.model || e.getData().underlayRaster || (this.model = e, Y.setUnitScale(e.getUnitScale())), this.layers || (this.layers = new w.ModelLayers(this)), e.getData().underlayRaster || this.layers.addModel(e, !0), $.addModel(e), this.selector.addModel(e), this.visibilityManager.addModel(e), this.api.fireEvent({
            type: D.MODEL_ADDED_EVENT,
            model: e,
            preserveTools: t,
            isOverlay: n
          }), this._setModelPreferences(e), i) {
          var r = e.getData();
          r.layerCount && q.initLayersTexture(r.layerCount, r.layersMap, e.id);
          var o = q.create2DMaterial(null, {}, !0, !1, (function () {
              g.invalidate(!1, !0, !1)
            })),
            a = q.findMaterial(null, o);
          if (n || (this.is2d && Y.exit2DMode(), Y.enter2DMode(a, this.matman().get2dSelectionColor())), !n) {
            this.is2d || this.saveLightPreset(), this.is2d = !0, this.setLightPreset(h.DefaultLightPreset2d);
            var s = e.getData();
            if (s.hidePaper) {
              var l = s.bgColor,
                c = l >> 16 & 255,
                u = l >> 8 & 255,
                d = 255 & l;
              this.setClearColors(c, u, d, c, u, d)
            }
          }
        } else !n && this.is2d && (this.is2d = void 0, Y.exit2DMode());
        this.updateClearColors(), this.setupLighting(e), pt(), this.fireRenderOptionChanged(), this.invalidate(!0)
      }
    }, this._setModelPreferences = function (e) {
      e.hideLines(!this.api.prefs.lineRendering), e.hidePoints(!this.api.prefs.pointRendering), e.selector.setSelectionMode(this.api.prefs.get(F.Prefs3D.SELECTION_MODE))
    }, this.setupLighting = function (e) {
      e = e || this.model, Object(i.isNodeJS)() || !e || e.is2d() || (this.setLightPresetFromFile(e) || (re >= 0 ? (this.setLightPreset(re, !0, oe), re = -1, oe = null) : this.setLightPreset(ie, !1)), this.setAOHeuristics(e))
    }, this.getSvfMaterialId = function (e) {
      return this.model.getFragmentList().getSvfMaterialId(e)
    }, this.getMaterials = function () {
      return q
    }, this.setupMesh = function (e, t, n, i) {
      var r = {
        geometry: t,
        matrix: i,
        isLine: t.isLines,
        isWideLine: t.isWideLines,
        isPoint: t.isPoints,
        is2d: t.is2d
      };
      return n && (r.material = this.matman().setupMaterial(e, t, n)), e.is2d() && (r.geometry.creationTime = ye, this.lastTime2dGeometryCreated = ye), r
    }, this.init2dSelection = function (e) {
      var t = ft(e);
      if (!this.overlayScenes[t]) {
        var n = q.initSelectionTexture(e.getData().maxObjectNumber, e.id),
          i = q.create2DMaterial(e, {}, !1, n, (function () {
            g.invalidate(!1, !0, !1)
          })),
          r = q.findMaterial(e, i);
        this.createOverlayScene(t, r)
      }
    }, this.onLoadComplete = function (e) {
      xe = !1, this.signalProgress(100, o.ProgressState.LOADING), this.modelVisible(e.id) && ((Z && Z.enabled || J) && this.sceneUpdated(!1, !0), this.invalidate(!!J, !0, !1)), this.is2d && e.is2d() && this.init2dSelection(e);
      var t = e.getGeometryList();
      t && t.printStats(), e.hasGeometry() ? q.hasTransparentMaterial() && this.requestSilentRender() : p.logger.warn("Loaded model has no geometry."), this.handleInitialVisibility(e), this.api.dispatchEvent({
        type: D.GEOMETRY_LOADED_EVENT,
        model: e
      })
    }, this.onTextureLoadComplete = function (e) {
      this.api.dispatchEvent({
        type: D.TEXTURES_LOADED_EVENT,
        model: e
      }), this.requestSilentRender()
    }, this.signalProgress = function (e, t, n) {
      fe.percent === e && fe.state === t && n && fe.model && fe.model.id === n.id || (fe.percent = e, fe.state = t, n && (fe.model = n), this.api.dispatchEvent(fe))
    }, this.resize = function (e, t, n) {
      H = !0, W = e, j = t, n && Ne(!0)
    }, this.unloadModel = function (e, t) {
      (this.removeModel(e) || $.removeHiddenModel(e)) && (t || (e.dtor(this.glrenderer()), q.cleanup(e), e.loader && (e.loader.dtor(), e.loader = null)), e.is2d() && this.overlayScenes[e.id] && this.removeOverlayScene(ft(e)), this.api.dispatchEvent({
        type: D.MODEL_UNLOADED_EVENT,
        model: e
      }))
    }, this._reserveLoadingFile = function () {
      this.loaders || (this.loaders = []);
      var e = {
        dtor: function () {}
      };
      return this.loaders.push(e), e
    }, this._hasLoadingFile = function () {
      return this.loaders && this.loaders.length > 0
    }, this._addLoadingFile = function (e, t) {
      if (this.loaders) {
        var n = this.loaders.indexOf(e);
        n >= 0 && (this.loaders[n] = t)
      }
    }, this._removeLoadingFile = function (e) {
      if (this.loaders) {
        var t = this.loaders.indexOf(e);
        t >= 0 && this.loaders.splice(t, 1)
      }
    }, this.removeModel = function (e) {
      return !!$.removeModel(e) && (this.keyFrameAnimator && (this.keyFrameAnimator.destroy(), this.keyFrameAnimator = null), this.selector.removeModel(e), this.visibilityManager.removeModel(e), this.layers.removeModel(e), e === this.model && (this.model = null, $.isEmpty() || (this.model = $.getModels()[0])), pt(), this.invalidate(!0, !0, !0), this.api.fireEvent({
        type: D.MODEL_REMOVED_EVENT,
        model: e
      }), !0)
    }, this.cancelLoad = function (e) {
      if (this.loaders)
        for (var t = 0; t < this.loaders.length; t++) {
          var n = this.loaders[t];
          if (n.currentLoadPath === e) {
            n.dtor(), this.loaders.splice(t, 1);
            break
          }
        }
    }, this.unloadCurrentModel = function () {
      this.model && (this.is2d ? (this.is2d = void 0, this.removeOverlayScene(ft(this.model)), Y.exit2DMode()) : re = ie, Y.beginScene(this.scene, this.camera, this.lightsOn ? this.lights : this.no_lights, !0), Y.composeFinalFrame(!0)), this.loaders && (this.loaders.forEach((function (e) {
        e.dtor()
      })), this.loaders = []);
      for (var e = $.getModels(), t = e.length - 1; t >= 0; t--) this.unloadModel(e[t]);
      this.model = null
    };
    var mt = function () {
      var e, t, n;
      g.selectionMaterialBase = new P.MeshPhongMaterial({
        specular: 526344,
        ambient: 0,
        opacity: 1,
        transparent: !1
      }), g.selectionMaterialTop = new P.MeshPhongMaterial({
        specular: 526344,
        ambient: 0,
        opacity: .15,
        transparent: !0
      }), g.selectionMaterialTop.packedNormals = !0, g.selectionMaterialBase.packedNormals = !0, e = "selection", t = g.selectionMaterialBase, n = g.selectionMaterialTop, t.depthWrite = !1, t.depthTest = !0, t.side = P.DoubleSide, n.depthWrite = !1, n.depthTest = !0, n.side = P.DoubleSide, q.addInstancingSupport(t), q.addInstancingSupport(n), g.createOverlayScene(e, t, n), g.highlightMaterial = new P.MeshPhongMaterial({
        specular: 526344,
        ambient: 0,
        opacity: 1,
        transparent: !1
      }), g.highlightMaterial.packedNormals = !0, q.addInstancingSupport(g.highlightMaterial), q.addMaterial("__highlightMaterial__", g.highlightMaterial, !0)
    };
    this.createOverlayScene = function (e, t, n, i) {
      t && q.addOverrideMaterial(e + "_pre", t), n && q.addOverrideMaterial(e + "_post", n);
      var r = new P.Scene;
      r.__lights = this.scene.__lights, this.overlayScenes[e] = {
        scene: r,
        camera: i,
        materialName: e,
        materialPre: t,
        materialPost: n
      }
    }, this.removeOverlayScene = function (e) {
      if (this.overlayScenes[e]) {
        var t = this.overlayScenes[e];
        t.materialPre && q.removeMaterial(t.materialName + "_pre"), t.materialPost && q.removeMaterial(t.materialName + "_post"), delete this.overlayScenes[e], this.invalidate(!1, !1, !0)
      }
    }, this.addOverlay = function (e, t) {
      this.overlayScenes[e] && (this.overlayScenes[e].scene.add(t), this.invalidate(!1, !1, !0))
    }, this.addMultipleOverlays = function (e, t) {
      for (var n in t) t.hasOwnProperty(n) && this.addOverlay(e, t[n])
    }, this.removeOverlay = function (e, t) {
      this.overlayScenes[e] && (this.overlayScenes[e].scene.remove(t), this.invalidate(!1, !1, !0))
    }, this.removeMultipleOverlays = function (e, t) {
      for (var n in t) t.hasOwnProperty(n) && this.removeOverlay(e, t[n])
    }, this.clearOverlay = function (e) {
      if (this.overlayScenes[e]) {
        var t, n, i = this.overlayScenes[e].scene;
        for (n = i.children.length - 1; n >= 0; --n)(t = i.children[n]) && i.remove(t);
        this.invalidate(!1, !1, !0)
      }
    }, this.setClearColors = function (e, t, n, r, o, a) {
      this.clearColorTop = new P.Vector3(e / 255, t / 255, n / 255), this.clearColorBottom = new P.Vector3(r / 255, o / 255, a / 255), this.updateClearColors(), J && J.setClearColors(this.clearColorTop, this.clearColorBottom, Object(i.isMobileDevice)()), ue = !0, this.fireRenderOptionChanged()
    }, this.setClearAlpha = function (e) {
      Y.setClearAlpha(e)
    };
    var gt = new P.Box3;

    function vt(e, t) {
      t.updateMatrixWorld(!0), t.traverse((function (t) {
        var n = t.geometry,
          i = t.model && "number" == typeof t.fragId;
        if (!i || n.boundingBox) void 0 !== n && t.visible && (n.boundingBox || n.computeBoundingBox(), gt.copy(n.boundingBox), gt.applyMatrix4(t.matrixWorld), e.union(gt));
        else {
          var r = i && t.model.getFragmentList();
          r && (r.getWorldBounds(t.fragId, gt), e.union(gt))
        }
      }))
    }
    var yt, bt = new P.Box3;

    function _t(e, t, n, i) {
      var r = e.getFragmentList().getVizmesh(t);
      new C.VertexBufferReader(r.geometry).enumGeomsForVisibleLayer(n, i)
    }

    function xt(e, t, n, i) {
      var r = e.getFragmentList().getVizmesh(t);
      new C.VertexBufferReader(r.geometry).enumGeomsForObject(n, i)
    }
    this.getVisibleBounds = function (e, t) {
      var n = new P.Box3;
      return $.isEmpty() || (vt(n, this.scene), n = $.getVisibleBounds(e).union(n), t && (n = function () {
        var e = g.overlayScenes;
        for (var t in e) e.hasOwnProperty(t) && vt(bt, e[t].scene);
        return vt(bt, g.scene), vt(bt, g.sceneAfter), bt
      }().union(n))), n
    }, this.getFitBounds = function (e) {
      var t;
      return e || null === this.selector || (t = this.selector.getSelectionBounds()), t && !t.empty() || (t = this.getVisibleBounds()), t
    }, this.getRenderProxy = function (e, t) {
      return e.getFragmentList().getVizmesh(t)
    }, this.getLayersRoot = function () {
      return this.layers.getRoot()
    }, this.getFragmentProxy = function (e, t) {
      return new E.FragmentPointer(e.getFragmentList(), t)
    }, this.getRenderProxyCount = function (e) {
      return e.getFragmentList().getCount()
    }, this.getRenderProxyDbIds = function (e, t) {
      return e.getFragmentList().getDbIds(t)
    }, this.isWholeModelVisible = function (e) {
      return !$ || $.areAllVisible()
    }, this.isNodeVisible = function (e, t) {
      return this.visibilityManager.isNodeVisible(t, e)
    }, this.highlightObjectNode = function (e, t, n, i) {
      t = e.reverseMapDbId(t), e.is2d() && (q.highlightObject2D(t, n, e.id), this.invalidate(!1, !1, !0)), this.renderer().setDbIdForEdgeDetection(n && !i ? t : 0, n ? e.id : 0);
      var r = this,
        o = e.getData().instanceTree;
      if (o && !e.is2d()) o.enumNodeFragments(t, (function (t) {
        r.highlightFragment(e, t, n, i)
      }), !1);
      else {
        var a = t;
        if (e.is2d() && (a = e.getData().fragments.dbId2fragId[t]), Array.isArray(a))
          for (var s = 0; s < a.length; s++) r.highlightFragment(e, a[s], n, i);
        else r.highlightFragment(e, a, n, i)
      }
    }, this.highlightFragment = function (e, t, n, i) {
      var r = this.getRenderProxy(e, t);
      if (r) {
        var o = !i || r.is2d || r.isPoint || r.themingColor,
          a = e.id + ":" + t;
        if (o) {
          var s = "selection";
          if (e.is2d() && (s = ft(e)), r.isPoint && (s += "_points"), n)
            if (r.is2d && this.selectionMeshes.hasOwnProperty(a)) ++this.selectionMeshes[a]._lmv_highlightCount;
            else {
              var l;
              if (!r || !r.geometry) return;
              if (r.isPoint) {
                var c = r.material.clone();
                c.color = this.selectionMaterialBase.color, c.needsUpdate = !0, l = new P.Mesh(r.geometry, c)
              } else l = new P.Mesh(r.geometry, r.material);
              l.matrix.copy(r.matrixWorld), l.matrixAutoUpdate = !1, l.matrixWorldNeedsUpdate = !0, l.frustumCulled = !1, l.model = e, l.fragId = t, l._lmv_highlightCount = 1, this.addOverlay(s, l), this.selectionMeshes[a] = l
            }
          else if (this.selectionMeshes.hasOwnProperty(a)) {
            var u = this.selectionMeshes[a];
            --u._lmv_highlightCount <= 0 && (this.removeOverlay(s, u), delete this.selectionMeshes[a])
          }
        }
        o && n || e.setHighlighted(t, n) && this.invalidate(!0)
      }
    }, this.explode = function (e) {
      return (e = Number(e)) != ve && (ve = e, this.refreshExplode(), this.api.dispatchEvent({
        type: D.EXPLODE_CHANGE_EVENT,
        scale: e
      }), !0)
    }, this.refreshExplode = function () {
      $.explode(ve), this.sceneUpdated(!0)
    }, this.getExplodeScale = function () {
      return ve
    }, this.lockExplode = function (e, t, n) {
      var i = (n = n || this.model).getData().instanceTree;
      if (!i) return !1;
      var r, o = function (e, n) {
        return i.enumNodeChildren(n, (function (n) {
          e = i.lockNodeExplode(n, t) || e
        }), !0), e
      };
      return (r = Array.isArray(e) ? e.reduce(o, !1) : o(!1, e)) && ve > 0 && ($.explode(ve), this.sceneUpdated(!0)), r
    }, this.isExplodeLocked = function (e, t) {
      var n = (t = t || this.model).getData().instanceTree;
      return n && n.isNodeExplodeLocked(e)
    }, this.setGhostingBrightness = function (e) {
      var t = new P.Color(e ? 1052688 : 16777215);

      function n(e) {
        e.color = t
      }
      n(this.fadeMaterial), this.fadeMaterial.variants && this.fadeMaterial.variants.forEach(n)
    }, this.loadCubeMapFromColors = function (e, t) {
      var n = Object(A.CreateCubeMapFromColors)(e, t);
      return n.isBgColor = !0, q.setReflectionMap(n), n
    }, this.loadCubeMap = function (e, t) {
      this._reflectionMapPath = e;
      return m.TextureLoader.loadCubeMap(e, t, (function (t) {
        e === g._reflectionMapPath && q && (q.setReflectionMap(t), g.invalidate(!0), t ? h.LightPresets[ie].useIrradianceAsBackground || Y.setCubeMap(t) : g.loadCubeMapFromColors(g.clearColorTop, g.clearColorBottom))
      }))
    }, this.loadIrradianceMap = function (e, t) {
      this._irradianceMapPath = e;
      return m.TextureLoader.loadCubeMap(e, t, (function (t) {
        e === g._irradianceMapPath && q && (q.setIrradianceMap(t), g.invalidate(!0), h.LightPresets[ie].useIrradianceAsBackground && Y.setCubeMap(t))
      }))
    }, this.setLightPreset = function (e, t, n) {
      if (Object(i.isNodeJS)() && (e = 0), Ee || this.initLights(), ie !== e || t) {
        if ((e < 0 || h.LightPresets.length <= e) && (e = h.DefaultLightPreset), ie = e, $.isEmpty()) return re = ie, void(oe = n);
        var r = h.LightPresets[e],
          o = r.bgColorGradient;
        if (o || (o = h.BackgroundPresets.Custom), this.setClearColors(o[0], o[1], o[2], o[3], o[4], o[5]), void 0 !== r.useIrradianceAsBackground && (this.api.prefs.hasTag("envMapBackground", "ignore-producer") ? p.logger.debug("setLightPreset(): envMapBackground is locked. No changes.") : (this.api.prefs.tag("no-storage", "envMapBackground"), this.api.setEnvMapBackground(r.useIrradianceAsBackground))), r.path) {
          var a = "res/environments/" + r.path,
            s = Object(S.getResourceUrl)(a + "_mipdrop." + (r.type || "") + ".dds"),
            l = Object(S.getResourceUrl)(a + "_irr." + (r.type || "") + ".dds");
          this.loadIrradianceMap(l, r.E_bias), this.loadCubeMap(s, r.E_bias), q.setEnvExposure(-r.E_bias), Y.setEnvExposure(-r.E_bias), this.setTonemapExposureBias(r.E_bias), this.setTonemapMethod(r.tonemap), this.setGhostingBrightness(r.darkerFade)
        } else {
          var c = this.loadCubeMapFromColors(this.clearColorTop, this.clearColorBottom);
          Y.setCubeMap(c), q.setIrradianceMap(null), q.setEnvExposure(-r.E_bias || 0), Y.setEnvExposure(-r.E_bias || 0), this.setTonemapExposureBias(r.E_bias || 0), this.setTonemapMethod(r.tonemap || 0), this.setGhostingBrightness(r.darkerFade), Y.toggleEnvMapBackground(we), this.invalidate(!0)
        }
        var u = M.SAOShader.uniforms.radius.value,
          d = M.SAOShader.uniforms.intensity.value;
        r.hasOwnProperty("saoRadius") && (u = r.saoRadius), r.hasOwnProperty("saoIntensity") && (d = r.saoIntensity), Y.setAOOptions(u, d);
        var f = 1;
        null !== r.lightMultiplier && void 0 !== r.lightMultiplier && (f = r.lightMultiplier), le.copy(se), r.lightDirection && le.fromArray(r.lightDirection).negate(), K && Ue(), this.dir_light1 && (this.dir_light1.intensity = f, r.lightDirection ? this.dir_light1.position.set(-r.lightDirection[0], -r.lightDirection[1], -r.lightDirection[2]) : this.dir_light1.position.copy(ce)), q.setEnvRotation(r.rotation || 0), Y.setEnvRotation(r.rotation || 0), J && J.setEnvRotation(r.rotation || 0), this.toggleLights(0 !== f), this.invalidate(!0, !1, !0), this.fireRenderOptionChanged(), n && n()
      } else n && n()
    }, this.setLightPresetFromFile = function (e) {
      if (!e || e.is2d()) return !1;
      var t, n = e.getMetadata("renderEnvironmentGroundReflection", "value", null);
      t = this.api.prefs.hasTag(F.Prefs3D.GROUND_REFLECTION, "ignore-producer"), null === n || t || (this.api.prefs.tag("no-storage", F.Prefs3D.GROUND_REFLECTION), this.api.setGroundReflection(n));
      var r = e.getMetadata("renderEnvironmentGroundShadow", "value", null);
      t = this.api.prefs.hasTag(F.Prefs3D.GROUND_SHADOW, "ignore-producer"), null === r || t || (this.api.prefs.tag("no-storage", F.Prefs3D.GROUND_SHADOW), this.api.setGroundShadow(r));
      var o = e.getMetadata("renderEnvironmentAmbientShadows", "value", null);
      t = this.api.prefs.hasTag(F.Prefs3D.AMBIENT_SHADOWS, "ignore-producer"), null === o || t || (this.api.prefs.tag("no-storage", F.Prefs3D.AMBIENT_SHADOWS), this.api.setQualityLevel(o, Y.getAntialiasing()));
      var a = e.getMetadata("renderEnvironmentDisplayLines", "value", null);
      t = this.api.prefs.hasTag(F.Prefs3D.LINE_RENDERING, "ignore-producer"), null === a || t || (this.api.prefs.tag("no-storage", F.Prefs3D.LINE_RENDERING), this.api.hideLines(!a));
      var s = e.getMetadata("renderEnvironmentDisplayPoints", "value", null);
      t = this.api.prefs.hasTag(F.Prefs.POINT_RENDERING, "ignore-producer"), null === s || t || (this.api.prefs.tag("no-storage", F.Prefs.POINT_RENDERING), this.api.hidePoints(!s));
      var l = e.getMetadata("renderEnvironmentDisplayEdges", "value", null);
      t = this.api.prefs.hasTag(F.Prefs3D.EDGE_RENDERING, "ignore-producer"), null === l || t || (this.api.prefs.tag("no-storage", F.Prefs3D.EDGE_RENDERING), this.api.setDisplayEdges(!Object(i.isMobileDevice)() && !!l));
      var c = e.getMetadata("renderEnvironmentStyle", "value", null),
        u = h.LightPresets.filter((function (e) {
          return e.name === c
        }))[0];
      if (t = this.api.prefs.hasTag(F.Prefs3D.LIGHT_PRESET, "ignore-producer"), u && !t) {
        this.api.prefs.tag("no-storage", F.Prefs3D.LIGHT_PRESET);
        var d = U;
        d || (d = U = {}, h.LightPresets.push(d)), Object(h.copyLightPreset)(u, d), d.name = "(Custom: Model defined)";
        var f = e.getMetadata("renderEnvironmentExposureBias", "value", null),
          p = e.getMetadata("renderEnvironmentExposureBase", "value", null);
        null !== f && null !== p && (d.E_bias = f + p);
        var m = e.getMetadata("renderEnvironmentBackgroundColor", "value", null);
        t = this.api.prefs.hasTag(F.Prefs.BACKGROUND_COLOR_PRESET, "ignore-producer"), m && !t && (d.bgColorGradient = [255 * m[0], 255 * m[1], 255 * m[2], 255 * m[0], 255 * m[1], 255 * m[2]]);
        var g = e.getMetadata("renderEnvironmentRotation", "value", null);
        null !== g && (d.rotation = g);
        var v = h.LightPresets.indexOf(d);
        this.setLightPreset(v, !0)
      }
      var y = e.getMetadata("renderEnvironmentBackgroundFromEnvironment", "value", null);
      return t = this.api.prefs.hasTag(F.Prefs3D.ENV_MAP_BACKGROUND, "ignore-producer"), null === y || t || (this.api.prefs.tag("no-storage", F.Prefs3D.ENV_MAP_BACKGROUND), this.api.setEnvMapBackground(y)), u
    }, this.setLightPresetForAec = function () {
      for (var e = Object(i.getGlobal)().DefaultLightPresetAec || "Boardwalk", t = -1, n = 0; n < h.LightPresets.length; n++)
        if (h.LightPresets[n].name === e) {
          t = n;
          break
        } return t >= 0 && (this.api.prefs.hasTag("lightPreset", "ignore-producer") ? p.logger.debug("setLightPresetForAec(): lightPreset is locked. No changes.") : (this.api.prefs.tag("no-storage", "lightPreset"), this.setLightPreset(t, !0, function () {
        this.api.prefs.tag("ignore-producer", "envMapBackground")
      }.bind(this)), this.saveLightPreset())), this.api.prefs.hasTag("edgeRendering", "ignore-producer") ? p.logger.debug("setLightPresetForAec(): edgeRendering is locked. No changes.") : (this.api.prefs.tag("no-storage", "edgeRendering"), this.api.setDisplayEdges(!Object(i.isMobileDevice)())), !0
    }, this.setAOHeuristics = function (e) {
      var t = e.getUnitScale(),
        n = e.getMetadata("renderEnvironmentAmbientShadows", "radius", void 0),
        i = e.getMetadata("renderEnvironmentAmbientShadows", "intensity", void 0),
        r = e.getMetadata("renderEnvironmentAmbientShadows", "opacity", void 0);
      if (void 0 !== n || void 0 !== i || void 0 !== r) Y.setAOOptions(n / t, i, r);
      else if (e.isAEC()) {
        t > .3 ? Y.setAOOptions(4 / t, 1, .625) : Y.setAOOptions(.25 / t, 1, .625)
      } else {
        var o = e.getData().bbox.size().length();
        Y.setAOOptions(Math.min(10, .05 * o))
      }
    }, this.setTonemapMethod = function (e) {
      e != Y.getToneMapMethod() && (Y.setTonemapMethod(e), q.setTonemapMethod(e), this.fireRenderOptionChanged(), this.invalidate(!0))
    }, this.setTonemapExposureBias = function (e) {
      e != Y.getExposureBias() && (Y.setTonemapExposureBias(e), q.setTonemapExposureBias(e), this.fireRenderOptionChanged(), this.invalidate(!0))
    }, this.setRenderingPrefsFor2D = function (e) {
      if (!Object(i.isNodeJS)()) {
        var t = !e && !!this.api.prefs.envMapBackground;
        this.toggleEnvMapBackground(t)
      }
    }, this.dtor = function () {
      g.getWindow().cancelAnimationFrame(z), this.api.removeEventListener(D.MODEL_ROOT_LOADED_EVENT, Le), this.api.removeEventListener(D.MODEL_ROOT_LOADED_EVENT, De), this.unloadCurrentModel(), this.controls = null, this.canvas = null, clearInterval(this.interval), this.loader = null, this.selector.dtor(), this.selector = null, this.model = null, this.layers = null, this.visibilityManager = null, Te && (Te.refCount--, Te.removeViewer(this.api), 0 === Te.refCount && Te.dtor(), Te = null), $ = null, Y = null, q.refCount--, 0 === q.refCount && q.dtor(), q = null, X && (X.refCount--, 0 === X.refCount && (X.webglcontextlost = null, X.domElement = null, X.context = null), X = null)
    }, this.hideLines = function (e) {
      $ && !$.isEmpty() && ($.hideLines(e), this.sceneUpdated(!0))
    }, this.hidePoints = function (e) {
      $ && !$.isEmpty() && ($.hidePoints(e), this.sceneUpdated(!0))
    }, this.setDisplayEdges = function (e) {
      Y.toggleEdges(e);
      var t = e;
      e || (t = !(!this.model || !this.model.getData().hasLines)), q.togglePolygonOffset(t), Y.setDepthMaterialOffset(q.getPolygonOffsetOn(), q.getPolygonOffsetFactor(), q.getPolygonOffsetUnits()), this.invalidate(!0)
    }, this.getAllCutPlanes = function () {
      var e = void 0;
      for (var t in Ie) {
        var n = Ie[t];
        n && n.length && (e = e ? t === Re ? n.concat(e) : e.concat(n) : n)
      }
      return e
    }, this.updateCutPlanes = function () {
      var e = this.getAllCutPlanes();
      this.setCutPlanes(e)
    }, this.setCutPlaneSet = function (e, t) {
      var n = !(arguments.length > 2 && void 0 !== arguments[2]) || arguments[2];
      if (Ie[e] = t ? t.slice() : void 0, n) this.updateCutPlanes();
      else {
        var i = this.getAllCutPlanes();
        this.setCutPlanesInScene(i)
      }
    }, this.setCutPlaneSetFor2DRendering = function (e) {
      Re = e, this.updateCutPlanes()
    }, this.getCutPlaneSet = function (e) {
      return Ie[e] || []
    }, this.getCutPlaneSets = function () {
      var e = [];
      for (var t in Ie) {
        var n = Ie[t];
        n && n.length && e.push(t)
      }
      return e
    }, this.getCutPlanes = function () {
      return q.getCutPlanes()
    }, this.setCutPlanesInScene = function (e) {
      Y.toggleTwoSided(q.setCutPlanes(e)), this.sceneUpdated()
    }, this.setCutPlanes = function (e) {
      this.setCutPlanesInScene(e), this.api.dispatchEvent({
        type: D.CUTPLANES_CHANGE_EVENT,
        planes: e
      })
    }, this.fireRenderOptionChanged = function () {
      q.toggleMRTSetting(Y.mrtFlags()), this.api.dispatchEvent({
        type: D.RENDER_OPTION_CHANGED_EVENT
      })
    }, this.viewportToRay = function (e, t) {
      var n = this.camera;
      e.z = -1;
      var i = new P.Vector3(e.x, e.y, 1);
      return e = e.unproject(n), (i = i.unproject(n)).sub(e).normalize(), t || (t = new P.Ray), t.set(n.isPerspective ? n.position : e, i), t
    }, this.rayIntersect = function (e, t, n, i, r) {
      for (var o = $.rayIntersect(e.origin, e.direction, t, n, i, r), a = [this.scene, this.sceneAfter], s = 0; s < a.length; s++) {
        var l = a[s];
        if (l.children.length) {
          var c = new P.Raycaster(e.origin, e.direction, this.camera.near, this.camera.far);
          vt(bt, l), c.linePrecision = Math.min(1, .5 * bt.size().length() * .001);
          var u = r || [];
          T.VBIntersector.intersectObject(l, c, u, !0), u.length && (!o || u[0].distance < o.distance) && (o = u[0])
        }
      }
      return o ? (void 0 === o.dbId && void 0 !== o.fragId && (o.dbId = o.model.getFragmentList().getDbIds(o.fragId), o.model.getData().instanceTree || (o.dbId = o.fragId)), o.intersectPoint = o.point, o) : null
    }, this.castRayViewport = function (e, t, n, i, r) {
      return yt = yt || new P.Ray, $ ? (this.viewportToRay(e, yt), this.rayIntersect(yt, t, n, i, r)) : {}
    }, this.getCanvasBoundingClientRect = function () {
      return this.canvasBoundingclientRectDirty && (this.canvasBoundingclientRectDirty = !1, this.boundingClientRect = this.canvas.getBoundingClientRect()), this.boundingClientRect
    }, this.clientToViewport = function (e, t) {
      var n = this.getCanvasBoundingClientRect();
      return new P.Vector3((e + .5) / n.width * 2 - 1, -(t + .5) / n.height * 2 + 1, 1)
    }, this.viewportToClient = function (e, t) {
      var n = this.getCanvasBoundingClientRect();
      return new P.Vector3(.5 * (e + 1) * n.width - .5, -.5 * (t - 1) * n.height - .5, 0)
    }, this.castRay = function (e, t, n) {
      return this.castRayViewport(this.clientToViewport(e, t), n)
    }, this.intersectGroundViewport = function (e) {
      var t = "z";
      this.is2d || (t = ae);
      var n = this.model && this.model.getBoundingBox();
      return k.SceneMath.intersectGroundViewport(e, this.camera, t, n)
    }, this.intersectGround = function (e, t) {
      return this.intersectGroundViewport(this.clientToViewport(e, t))
    }, this._2dHitTestViewport = function (e, t, n) {
      var i = [0, 0],
        r = Y.idAtPixels(e.x, e.y, t, i);
      if (r < n) return null;
      var o = $.findModel(i[1]) || this.model;
      if (!o) return null;
      var a = this.intersectGroundViewport(e),
        s = o.getData().fragments,
        l = s ? s.dbId2fragId[r] : -1;
      return {
        intersectPoint: a,
        dbId: o.remapDbId(r),
        fragId: l,
        model: o
      }
    }, this.hitTestViewport = function (e, t, n, r, o) {
      var a;
      if (g.is2d) {
        var s = Object(i.isMobileDevice)() ? 45 : 5;
        a = this._2dHitTestViewport(e, s, 1)
      } else a = this.castRayViewport(e, t, n, r, o);
      return a
    }, this.hitTest = function (e, t, n, i) {
      return g.hitTestViewport(this.clientToViewport(e, t), n, i)
    }, this.snappingHitTestViewport = function (e, t) {
      var n;
      if (this.model && this.model.getData().isLeaflet) n = {
        intersectPoint: this.intersectGroundViewport(e)
      };
      else if (g.is2d) {
        var r = Object(i.isMobileDevice)() ? 45 : 17;
        n = this._2dHitTestViewport(e, r, 0)
      } else {
        var o = Y.idAtPixel(e.x, e.y);
        n = this.castRayViewport(e, t, o > 0 ? [o] : null)
      }
      return n
    }, this.snappingHitTest = function (e, t, n) {
      return this.snappingHitTestViewport(this.clientToViewport(e, t), n)
    }, this.clearHighlight = function () {
      Y.rolloverObjectId(-1), this.invalidate(!1, !1, !0)
    }, this.rolloverObjectViewport = function (e) {
      if (!this.model || !this.model.getData().isLeaflet) {
        var t = Y.idAtPixel(e.x, e.y);
        this.selector && this.selector.isNodeSelectionLocked(t, this.model) ? this.clearHighlight() : Y.rolloverObjectViewport(e.x, e.y) && this.invalidate(!1, !1, !0)
      }
    }, this.rolloverObject = function (e, t) {
      this.selector.highlightPaused || this.selector.highlightDisabled || this.rolloverObjectViewport(this.clientToViewport(e, t))
    }, this.pauseHighlight = function (e) {
      this.selector.highlightPaused = e, e && this.clearHighlight()
    }, this.disableHighlight = function (e) {
      this.selector.highlightDisabled = e, e && this.clearHighlight()
    }, this.disableSelection = function (e) {
      this.selector.selectionDisabled = e
    }, this.cancelLeafletScreenshot = function () {
      g.api.dispatchEvent({
        type: D.CANCEL_LEAFLET_SCREENSHOT
      })
    }, this.getScreenShotProgressive = function (e, t, n, i) {
      return r.ScreenShot.getScreenShot(e, t, n, i, this)
    }, this.modelQueue = function () {
      return $
    }, this.glrenderer = function () {
      return X
    }, this.renderer = function () {
      return Y
    }, this.geomCache = function () {
      return Te || (Te = new f.OtgResourceCache(g.api)).refCount++, Te
    }, this.shadowMaps = function () {
      return K
    }, this.worldUp = function () {
      return N
    }, this.worldUpName = function () {
      return ae
    }, this.setUserRenderContext = function (e, t) {
      Y = e || new s.RenderContext, t || (Y.init(X, this.canvas.clientWidth, this.canvas.clientHeight), Y.setClearColors(this.clearColorTop, this.clearColorBottom)), this.invalidate(!0), this.sceneUpdated(!1)
    }, this.setUserGroundShadow = function (e) {
      var t = Z;
      return Z = e, t
    }, this.invalidate = function (e, t, n) {
      ue = e || ue, he = t || he, de = n || de
    }, this.isOverlayDirty = function () {
      return de
    }, this.clearOverlayDirtyFlag = function () {
      de = !1
    }, this.sceneUpdated = function (e, t) {
      this.invalidate(!t, !1, !t), $ && e && ($.invalidateVisibleBounds(), this.zoomBoundsChanged = !0), pe = !0, Ue()
    }, this.requestSilentRender = function () {
      me = ge = !0
    }, this.requestDeferredSilentRender = function () {
      me = !0
    }, this.currentLightPreset = function () {
      return ie
    }, this.saveLightPreset = function () {
      re = ie
    }, this.matman = function () {
      return q
    }, this.fps = function () {
      return 1e3 / be
    }, this.setFPSTargets = function (e, t, n) {
      ee = 1e3 / n, ne = 1, te = 1e3 / t, this.targetFrameBudget = Object(i.isMobileDevice)() ? te / 4 : te
    }, this.track = function (e) {
      p.logger.track(e)
    }, this.worldToClient = function (e) {
      var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : this.camera,
        n = new P.Vector4(e.x, e.y, e.z, 1);
      return n.applyMatrix4(t.matrixWorldInverse), n.applyMatrix4(t.projectionMatrix), n.w > 0 && (n.x /= n.w, n.y /= n.w, n.z /= n.w), this.viewportToClient(n.x, n.y)
    }, this.clientToWorld = function (e, t, n) {
      var i = null,
        r = this.model,
        o = r.getData();
      if (r.is2d()) {
        var a = this.intersectGround(e, t);
        if (a) {
          a.z = 0;
          var s = o.bbox;
          (o.hidePaper || s.containsPoint(a)) && (i = {
            point: a,
            model: r
          })
        }
      } else(i = this.hitTest(e, t, n)) && (i.point = i.intersectPoint);
      return i
    }, this.set2dSelectionColor = function (e, t) {
      this.matman().set2dSelectionColor(e, t), this.invalidate(!1, !1, !0)
    }, this.setSelectionColor = function (e, t) {
      t = t || R.SelectionType.MIXED;
      var n = new P.Color(e);
      n.multiplyScalar(.5);
      var i = function t(i) {
        i.color.set(e), i.emissive.set(n), i.variants && i.variants.forEach(t)
      };
      switch (t) {
        default:
        case R.SelectionType.MIXED:
          i(this.selectionMaterialBase), i(this.selectionMaterialTop), Y.setSelectionColor(e), i(this.highlightMaterial), this.invalidate(!0);
          break;
        case R.SelectionType.REGULAR:
          i(this.highlightMaterial), this.invalidate(!0);
          break;
        case R.SelectionType.OVERLAYED:
          i(this.selectionMaterialBase), i(this.selectionMaterialTop), Y.setSelectionColor(e), this.invalidate(!1, !1, !0)
      }
    }, this.updateViewportId = function (e) {
      q.updateViewportId(e), this.invalidate(!0)
    }, this.findModel = function (e, t) {
      var n;
      n = "number" == typeof e ? function (t) {
        return t.id == e
      } : e instanceof O.BubbleNode ? function (t) {
        return t.getDocumentNode() == e
      } : e;
      var i = $.getModels().find(n);
      return t && !i && (i = $.getHiddenModels().find(n)), i
    }, this.getFrameRate = function () {
      return this.frameDisplayRate
    }, this.setFrameRate = function (e) {
      this.frameDisplayRate = e < 1 ? 1 : e
    }, this.setShadowLightDirection = function (e) {
      le.copy(e), Ue(), this.invalidate(!0, !1, !1), Fe()
    }, this.getShadowLightDirection = function (e) {
      var t = e || new P.Vector3;
      return t.copy(le), t
    }, this.toggleShadows = function (e) {
      !!K != !!e && (e ? K = new y.ShadowMaps(X) : (K.cleanup(q), K = null), Fe(), this.invalidate(!0, !0, !1))
    }, this.showTransparencyWhenMoving = function (e) {
      $.enableNonResumableFrames = e
    }, this.fitToView = function (e, t) {
      (t = !!t, 0 === e.length) && (e = $.getModels().map((function (e) {
        return {
          model: e,
          selection: []
        }
      })));
      for (var n = 0, i = 0; i < e.length; ++i) {
        var r = e[i].model;
        if (!r) return !1;
        r.is2d() ? n++ : 0
      }
      return !!(n === e.length ? this._fitToView2d(e, t) : this._fitToView3d(e, t)) && (1 === $.getModels().length && this.api.dispatchEvent({
        type: D.FIT_TO_VIEW_EVENT,
        nodeIdArray: e[0].selection,
        immediate: t,
        model: e[0].model
      }), this.api.dispatchEvent({
        type: D.AGGREGATE_FIT_TO_VIEW_EVENT,
        selection: e,
        immediate: t
      }), !0)
    }, this._fitToView2d = function (e, t) {
      e.length > 1 && p.logger.warn("fitToView() doesn't support multiple 2D models. Using the first one...");
      var n = e[0].model,
        i = e[0].selection,
        r = new P.Box3,
        o = new C.BoundsCallback(r);
      if (i && 0 !== i.length) this.computeSelectionBounds(i, n, o);
      else if (this.api.anyLayerHidden())
        for (var a = n.getData().fragments, s = this.getVisibleLayerIndices(), l = 0; l < a.length; l++) _t(n, l, s, o);
      else r = this.getFitBounds(!0);
      return !r.empty() && (this.api.navigation.fitBounds(t, r), !0)
    }, this.computeSelectionBounds = function (e, t, n) {
      if (!n) {
        var i = new P.Box3;
        n = new C.BoundsCallback(i)
      }
      for (var r = t.getData().fragments.dbId2fragId, o = 0; o < e.length; o++) {
        var a = t.reverseMapDbId(e[o]),
          s = r[a];
        if (Array.isArray(s))
          for (var l = 0; l < s.length; l++) xt(t, s[l], a, n);
        else "number" == typeof s && xt(t, s, a, n)
      }
      return n.bounds
    }, this.get3DBounds = function (e) {
      for (var t = !1, n = 0; n < e.length; ++n)
        if (e[n].selection.length > 0) {
          t = !0;
          break
        } var i = new P.Box3,
        r = new P.Box3;
      if (t)
        for (var o = 0; o < e.length; ++o) {
          var a = e[o].selection;
          if (0 !== a.length) {
            var s = e[o].model,
              l = s.getInstanceTree(),
              c = s.getFragmentList();
            if (l)
              for (var u = 0; u < a.length; ++u) {
                var h = parseInt(a[u]);
                l.enumNodeFragments(h, (function (e) {
                  c.getWorldBounds(e, r), i.union(r)
                }), !0)
              }
          }
        } else i.union(this.getVisibleBounds(!1, !1));
      return i
    }, this._fitToView3d = function (e, t) {
      var n = this.get3DBounds(e);
      return !n.empty() && (this.api.navigation.fitBounds(t, n), !0)
    }, this.onWebGLcontextLost = function (e) {
      this.api.fireEvent({
        type: D.WEBGL_CONTEXT_LOST_EVENT
      })
    }, this.modelVisible = function (e) {
      return !!$.findModel(e)
    }, this.handleInitialVisibility = function (e) {
      var t = this.api;
      e.getObjectTree((function (n) {
        var i = e.getFragmentList();
        if (!i.areAllVisible()) {
          var r = [];
          n && (n.enumNodeChildren(e.getRootId(), (function (e) {
            n.enumNodeFragments(e, (function (e) {
              return i.isFragVisible(e)
            }), !0) || r.push(e)
          }), !0), r.length && t.hide(r, e))
        }
      }))
    }, this._signalNoMeshes = function () {
      $.isEmpty() && (this._geometryAvailable = 0)
    }, this._signalMeshAvailable = function () {
      0 === this._geometryAvailable && (this._geometryAvailable = 1, this.api.fireEvent({
        type: D.RENDER_FIRST_PIXEL
      }))
    }, this.hasModels = function () {
      return !$.isEmpty()
    }, this.onLoadingAnimationChanged = function (e) {
      X.setLoadingAnimationDuration(e ? this.defaultLoadingAnimationDuration : -1), this.invalidate(!1, !0, !1)
    }, this.isLoadingAnimationEnabled = function () {
      return this.api.prefs.get(F.Prefs2D.LOADING_ANIMATION) && (!this.model || this.model.is2d())
    }
  }
  H.prototype.constructor = H, N.GlobalManagerMixin.call(H.prototype)
}, function (e, t, n) {
  "use strict";
  var i = {}.propertyIsEnumerable,
    r = Object.getOwnPropertyDescriptor,
    o = r && !i.call({
      1: 2
    }, 1);
  t.f = o ? function (e) {
    var t = r(this, e);
    return !!t && t.enumerable
  } : i
}, function (e, t, n) {
  var i = n(182),
    r = n(153),
    o = i("keys");
  e.exports = function (e) {
    return o[e] || (o[e] = r(e))
  }
}, function (e, t, n) {
  var i = n(15),
    r = n(284);
  (e.exports = function (e, t) {
    return r[e] || (r[e] = void 0 !== t ? t : {})
  })("versions", []).push({
    version: "3.6.4",
    mode: i ? "pure" : "global",
    copyright: "© 2020 Denis Pushkarev (zloirock.ru)"
  })
}, function (e, t, n) {
  var i = n(25)("iterator"),
    r = !1;
  try {
    var o = 0,
      a = {
        next: function () {
          return {
            done: !!o++
          }
        },
        return: function () {
          r = !0
        }
      };
    a[i] = function () {
      return this
    }, Array.from(a, (function () {
      throw 2
    }))
  } catch (e) {}
  e.exports = function (e, t) {
    if (!t && !r) return !1;
    var n = !1;
    try {
      var o = {};
      o[i] = function () {
        return {
          next: function () {
            return {
              done: n = !0
            }
          }
        }
      }, e(o)
    } catch (e) {}
    return n
  }
}, function (e, t, n) {
  "use strict";
  var i = n(76),
    r = n(92),
    o = n(160),
    a = n(51),
    s = n(220),
    l = a.set,
    c = a.getterFor("Array Iterator");
  e.exports = s(Array, "Array", (function (e, t) {
    l(this, {
      type: "Array Iterator",
      target: i(e),
      index: 0,
      kind: t
    })
  }), (function () {
    var e = c(this),
      t = e.target,
      n = e.kind,
      i = e.index++;
    return !t || i >= t.length ? (e.target = void 0, {
      value: void 0,
      done: !0
    }) : "keys" == n ? {
      value: i,
      done: !1
    } : "values" == n ? {
      value: t[i],
      done: !1
    } : {
      value: [i, t[i]],
      done: !1
    }
  }), "values"), o.Arguments = o.Array, r("keys"), r("values"), r("entries")
}, function (e, t, n) {
  var i = n(20),
    r = n(34),
    o = n(152),
    a = n(27),
    s = function (e) {
      return function (t, n, s, l) {
        i(n);
        var c = r(t),
          u = o(c),
          h = a(c.length),
          d = e ? h - 1 : 0,
          f = e ? -1 : 1;
        if (s < 2)
          for (;;) {
            if (d in u) {
              l = u[d], d += f;
              break
            }
            if (d += f, e ? d < 0 : h <= d) throw TypeError("Reduce of empty array with no initial value")
          }
        for (; e ? d >= 0 : h > d; d += f) d in u && (l = n(l, u[d], d, c));
        return l
      }
    };
  e.exports = {
    left: s(!1),
    right: s(!0)
  }
}, function (e, t, n) {
  "use strict";
  var i = n(17),
    r = n(24),
    o = n(222),
    a = n(56),
    s = n(121),
    l = n(14),
    c = n(101),
    u = n(77),
    h = n(27),
    d = n(302),
    f = n(450),
    p = n(69),
    m = n(113),
    g = n(118).f,
    v = n(32).f,
    y = n(217),
    b = n(91),
    _ = n(51),
    x = _.get,
    w = _.set,
    E = i.ArrayBuffer,
    A = E,
    S = i.DataView,
    M = S && S.prototype,
    T = Object.prototype,
    C = i.RangeError,
    P = f.pack,
    L = f.unpack,
    D = function (e) {
      return [255 & e]
    },
    I = function (e) {
      return [255 & e, e >> 8 & 255]
    },
    R = function (e) {
      return [255 & e, e >> 8 & 255, e >> 16 & 255, e >> 24 & 255]
    },
    O = function (e) {
      return e[3] << 24 | e[2] << 16 | e[1] << 8 | e[0]
    },
    k = function (e) {
      return P(e, 23, 4)
    },
    N = function (e) {
      return P(e, 52, 8)
    },
    F = function (e, t) {
      v(e.prototype, t, {
        get: function () {
          return x(this)[t]
        }
      })
    },
    U = function (e, t, n, i) {
      var r = d(n),
        o = x(e);
      if (r + t > o.byteLength) throw C("Wrong index");
      var a = x(o.buffer).bytes,
        s = r + o.byteOffset,
        l = a.slice(s, s + t);
      return i ? l : l.reverse()
    },
    V = function (e, t, n, i, r, o) {
      var a = d(n),
        s = x(e);
      if (a + t > s.byteLength) throw C("Wrong index");
      for (var l = x(s.buffer).bytes, c = a + s.byteOffset, u = i(+r), h = 0; h < t; h++) l[c + h] = u[o ? h : t - h - 1]
    };
  if (o) {
    if (!l((function () {
        E(1)
      })) || !l((function () {
        new E(-1)
      })) || l((function () {
        return new E, new E(1.5), new E(NaN), "ArrayBuffer" != E.name
      }))) {
      for (var B, z = (A = function (e) {
          return c(this, A), new E(d(e))
        }).prototype = E.prototype, G = g(E), H = 0; G.length > H;)(B = G[H++]) in A || a(A, B, E[B]);
      z.constructor = A
    }
    m && p(M) !== T && m(M, T);
    var W = new S(new A(2)),
      j = M.setInt8;
    W.setInt8(0, 2147483648), W.setInt8(1, 2147483649), !W.getInt8(0) && W.getInt8(1) || s(M, {
      setInt8: function (e, t) {
        j.call(this, e, t << 24 >> 24)
      },
      setUint8: function (e, t) {
        j.call(this, e, t << 24 >> 24)
      }
    }, {
      unsafe: !0
    })
  } else A = function (e) {
    c(this, A, "ArrayBuffer");
    var t = d(e);
    w(this, {
      bytes: y.call(new Array(t), 0),
      byteLength: t
    }), r || (this.byteLength = t)
  }, S = function (e, t, n) {
    c(this, S, "DataView"), c(e, A, "DataView");
    var i = x(e).byteLength,
      o = u(t);
    if (o < 0 || o > i) throw C("Wrong offset");
    if (o + (n = void 0 === n ? i - o : h(n)) > i) throw C("Wrong length");
    w(this, {
      buffer: e,
      byteLength: n,
      byteOffset: o
    }), r || (this.buffer = e, this.byteLength = n, this.byteOffset = o)
  }, r && (F(A, "byteLength"), F(S, "buffer"), F(S, "byteLength"), F(S, "byteOffset")), s(S.prototype, {
    getInt8: function (e) {
      return U(this, 1, e)[0] << 24 >> 24
    },
    getUint8: function (e) {
      return U(this, 1, e)[0]
    },
    getInt16: function (e) {
      var t = U(this, 2, e, arguments.length > 1 ? arguments[1] : void 0);
      return (t[1] << 8 | t[0]) << 16 >> 16
    },
    getUint16: function (e) {
      var t = U(this, 2, e, arguments.length > 1 ? arguments[1] : void 0);
      return t[1] << 8 | t[0]
    },
    getInt32: function (e) {
      return O(U(this, 4, e, arguments.length > 1 ? arguments[1] : void 0))
    },
    getUint32: function (e) {
      return O(U(this, 4, e, arguments.length > 1 ? arguments[1] : void 0)) >>> 0
    },
    getFloat32: function (e) {
      return L(U(this, 4, e, arguments.length > 1 ? arguments[1] : void 0), 23)
    },
    getFloat64: function (e) {
      return L(U(this, 8, e, arguments.length > 1 ? arguments[1] : void 0), 52)
    },
    setInt8: function (e, t) {
      V(this, 1, e, D, t)
    },
    setUint8: function (e, t) {
      V(this, 1, e, D, t)
    },
    setInt16: function (e, t) {
      V(this, 2, e, I, t, arguments.length > 2 ? arguments[2] : void 0)
    },
    setUint16: function (e, t) {
      V(this, 2, e, I, t, arguments.length > 2 ? arguments[2] : void 0)
    },
    setInt32: function (e, t) {
      V(this, 4, e, R, t, arguments.length > 2 ? arguments[2] : void 0)
    },
    setUint32: function (e, t) {
      V(this, 4, e, R, t, arguments.length > 2 ? arguments[2] : void 0)
    },
    setFloat32: function (e, t) {
      V(this, 4, e, k, t, arguments.length > 2 ? arguments[2] : void 0)
    },
    setFloat64: function (e, t) {
      V(this, 8, e, N, t, arguments.length > 2 ? arguments[2] : void 0)
    }
  });
  b(A, "ArrayBuffer"), b(S, "DataView"), e.exports = {
    ArrayBuffer: A,
    DataView: S
  }
}, function (e, t, n) {
  "use strict";
  var i = n(4),
    r = n(17),
    o = n(156),
    a = n(68),
    s = n(122),
    l = n(19),
    c = n(101),
    u = n(22),
    h = n(14),
    d = n(183),
    f = n(91),
    p = n(188);
  e.exports = function (e, t, n) {
    var m = -1 !== e.indexOf("Map"),
      g = -1 !== e.indexOf("Weak"),
      v = m ? "set" : "add",
      y = r[e],
      b = y && y.prototype,
      _ = y,
      x = {},
      w = function (e) {
        var t = b[e];
        a(b, e, "add" == e ? function (e) {
          return t.call(this, 0 === e ? 0 : e), this
        } : "delete" == e ? function (e) {
          return !(g && !u(e)) && t.call(this, 0 === e ? 0 : e)
        } : "get" == e ? function (e) {
          return g && !u(e) ? void 0 : t.call(this, 0 === e ? 0 : e)
        } : "has" == e ? function (e) {
          return !(g && !u(e)) && t.call(this, 0 === e ? 0 : e)
        } : function (e, n) {
          return t.call(this, 0 === e ? 0 : e, n), this
        })
      };
    if (o(e, "function" != typeof y || !(g || b.forEach && !h((function () {
        (new y).entries().next()
      }))))) _ = n.getConstructor(t, e, m, v), s.REQUIRED = !0;
    else if (o(e, !0)) {
      var E = new _,
        A = E[v](g ? {} : -0, 1) != E,
        S = h((function () {
          E.has(1)
        })),
        M = d((function (e) {
          new y(e)
        })),
        T = !g && h((function () {
          for (var e = new y, t = 5; t--;) e[v](t, t);
          return !e.has(-0)
        }));
      M || ((_ = t((function (t, n) {
        c(t, _, e);
        var i = p(new y, t, _);
        return null != n && l(n, i[v], i, m), i
      }))).prototype = b, b.constructor = _), (S || T) && (w("delete"), w("has"), m && w("get")), (T || A) && w(v), g && b.clear && delete b.clear
    }
    return x[e] = _, i({
      global: !0,
      forced: _ != y
    }, x), f(_, e), g || n.setStrong(_, e, m), _
  }
}, function (e, t, n) {
  var i = n(22),
    r = n(113);
  e.exports = function (e, t, n) {
    var o, a;
    return r && "function" == typeof (o = t.constructor) && o !== n && i(a = o.prototype) && a !== n.prototype && r(e, a), e
  }
}, function (e, t) {
  var n = Math.expm1,
    i = Math.exp;
  e.exports = !n || n(10) > 22025.465794806718 || n(10) < 22025.465794806718 || -2e-17 != n(-2e-17) ? function (e) {
    return 0 == (e = +e) ? e : e > -1e-6 && e < 1e-6 ? e + e * e / 2 : i(e) - 1
  } : n
}, function (e, t) {
  e.exports = "\t\n\v\f\r                　\u2028\u2029\ufeff"
}, function (e, t, n) {
  "use strict";
  var i = n(15),
    r = n(17),
    o = n(14);
  e.exports = i || !o((function () {
    var e = Math.random();
    __defineSetter__.call(null, e, (function () {})), delete r[e]
  }))
}, function (e, t) {
  e.exports = function (e) {
    try {
      return {
        error: !1,
        value: e()
      }
    } catch (e) {
      return {
        error: !0,
        value: e
      }
    }
  }
}, function (e, t, n) {
  "use strict";
  var i, r, o = n(139),
    a = n(229),
    s = RegExp.prototype.exec,
    l = String.prototype.replace,
    c = s,
    u = (i = /a/, r = /b*/g, s.call(i, "a"), s.call(r, "a"), 0 !== i.lastIndex || 0 !== r.lastIndex),
    h = a.UNSUPPORTED_Y || a.BROKEN_CARET,
    d = void 0 !== /()??/.exec("")[1];
  (u || d || h) && (c = function (e) {
    var t, n, i, r, a = this,
      c = h && a.sticky,
      f = o.call(a),
      p = a.source,
      m = 0,
      g = e;
    return c && (-1 === (f = f.replace("y", "")).indexOf("g") && (f += "g"), g = String(e).slice(a.lastIndex), a.lastIndex > 0 && (!a.multiline || a.multiline && "\n" !== e[a.lastIndex - 1]) && (p = "(?: " + p + ")", g = " " + g, m++), n = new RegExp("^(?:" + p + ")", f)), d && (n = new RegExp("^" + p + "$(?!\\s)", f)), u && (t = a.lastIndex), i = s.call(c ? n : a, g), c ? i ? (i.input = i.input.slice(m), i[0] = i[0].slice(m), i.index = a.lastIndex, a.lastIndex += i[0].length) : a.lastIndex = 0 : u && i && (a.lastIndex = a.global ? i.index + i[0].length : t), d && i && i.length > 1 && l.call(i[0], n, (function () {
      for (r = 1; r < arguments.length - 2; r++) void 0 === arguments[r] && (i[r] = void 0)
    })), i
  }), e.exports = c
}, function (e, t, n) {
  "use strict";
  n(318);
  var i = n(68),
    r = n(14),
    o = n(25),
    a = n(193),
    s = n(56),
    l = o("species"),
    c = !r((function () {
      var e = /./;
      return e.exec = function () {
        var e = [];
        return e.groups = {
          a: "7"
        }, e
      }, "7" !== "".replace(e, "$<a>")
    })),
    u = "$0" === "a".replace(/./, "$0"),
    h = o("replace"),
    d = !!/./ [h] && "" === /./ [h]("a", "$0"),
    f = !r((function () {
      var e = /(?:)/,
        t = e.exec;
      e.exec = function () {
        return t.apply(this, arguments)
      };
      var n = "ab".split(e);
      return 2 !== n.length || "a" !== n[0] || "b" !== n[1]
    }));
  e.exports = function (e, t, n, h) {
    var p = o(e),
      m = !r((function () {
        var t = {};
        return t[p] = function () {
          return 7
        }, 7 != "" [e](t)
      })),
      g = m && !r((function () {
        var t = !1,
          n = /a/;
        return "split" === e && ((n = {}).constructor = {}, n.constructor[l] = function () {
          return n
        }, n.flags = "", n[p] = /./ [p]), n.exec = function () {
          return t = !0, null
        }, n[p](""), !t
      }));
    if (!m || !g || "replace" === e && (!c || !u || d) || "split" === e && !f) {
      var v = /./ [p],
        y = n(p, "" [e], (function (e, t, n, i, r) {
          return t.exec === a ? m && !r ? {
            done: !0,
            value: v.call(t, n, i)
          } : {
            done: !0,
            value: e.call(n, t, i)
          } : {
            done: !1
          }
        }), {
          REPLACE_KEEPS_$0: u,
          REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE: d
        }),
        b = y[0],
        _ = y[1];
      i(String.prototype, e, b), i(RegExp.prototype, p, 2 == t ? function (e, t) {
        return _.call(e, this, t)
      } : function (e) {
        return _.call(e, this)
      })
    }
    h && s(RegExp.prototype[p], "sham", !0)
  }
}, function (e, t, n) {
  "use strict";
  var i = n(140).charAt;
  e.exports = function (e, t, n) {
    return t + (n ? i(e, t).length : 1)
  }
}, function (e, t, n) {
  var i = n(80),
    r = n(193);
  e.exports = function (e, t) {
    var n = e.exec;
    if ("function" == typeof n) {
      var o = n.call(e, t);
      if ("object" != typeof o) throw TypeError("RegExp exec method returned something other than an Object or null");
      return o
    }
    if ("RegExp" !== i(e)) throw TypeError("RegExp#exec called on incompatible receiver");
    return r.call(e, t)
  }
}, function (e, t, n) {
  "use strict";
  var i = n(7),
    r = n(20);
  e.exports = function () {
    for (var e, t = i(this), n = r(t.delete), o = !0, a = 0, s = arguments.length; a < s; a++) e = n.call(t, arguments[a]), o = o && e;
    return !!o
  }
}, function (e, t, n) {
  "use strict";
  var i = n(20),
    r = n(41),
    o = n(19);
  e.exports = function (e) {
    var t, n, a, s, l = arguments.length,
      c = l > 1 ? arguments[1] : void 0;
    return i(this), (t = void 0 !== c) && i(c), null == e ? new this : (n = [], t ? (a = 0, s = r(c, l > 2 ? arguments[2] : void 0, 2), o(e, (function (e) {
      n.push(s(e, a++))
    }))) : o(e, n.push, n), new this(n))
  }
}, function (e, t, n) {
  "use strict";
  e.exports = function () {
    for (var e = arguments.length, t = new Array(e); e--;) t[e] = arguments[e];
    return new this(t)
  }
}, function (e, t, n) {
  "use strict";
  n.r(t), n.d(t, "RenderModel", (function () {
    return v
  }));
  var i = n(44),
    r = n(240),
    o = n(125),
    a = n(72),
    s = n(258),
    l = n(259),
    c = n(260),
    u = n(261),
    h = n(126),
    d = n(0),
    f = n(10),
    p = n(28),
    m = n(1);
  var g = 1;

  function v() {
    var e = new d.Box3,
      t = new d.Box3,
      n = new d.Box3;
    this.visibleBoundsDirty = !1, this.enforceBvh = !1;
    var v = 0;
    this.id = g++;
    var y = null,
      b = null,
      _ = null,
      x = null,
      w = null,
      E = null,
      A = null,
      S = 0,
      M = null,
      T = p.RenderFlags.RENDER_NORMAL,
      C = !1;
    this.getGeometryList = function () {
      return y
    }, this.getFragmentList = function () {
      return b
    }, this.getModelId = function () {
      return this.id
    }, this.RenderBatch = a.RenderBatch, this.initialize = function () {
      var n = this.getData(),
        a = n.numGeoms || 0,
        s = ! function (e, t, n) {
          return !(e && e - 3 * t * 2 <= i.GPU_MEMORY_LIMIT && n < i.GPU_OBJECT_LIMIT)
        }(n.packFileTotalSize, n.primitiveCount, a);
      y = new r.GeometryList(a, this.is2d(), s, this.isOTG()), b = new o.FragmentList(this);
      var l = this.getBoundingBox();
      l && (e.copy(l), t.copy(l)), w = _ = new c.ModelIteratorLinear(this)
    }, this.getIterator = function () {
      return w
    }, this.initFromCustomIterator = function (e) {
      w = e, this.visibleBoundsDirty = !0
    }, this.dtor = function (e) {
      b && b.dispose(e), w && w.dtor && (w.dtor(), _ = null), E && E.dispose()
    }, this.activateFragment = function (i, r, o) {
      b && (b.setMesh(i, r, o), w.addFragment(i), b.getWorldBounds(i, n), e.union(n), t.union(n))
    }, this.setFragment = function (i, r, o) {
      return void 0 === i && (i = this.getFragmentList().getNextAvailableFragmentId()), b.setMesh(i, r, !0, o), _ && _.addFragment(i), x && !b.fragmentsHaveBeenAdded() && x.addFragment(i), b.getWorldBounds(i, n), e.union(n), t.union(n), i
    }, this.setBVH = function (e, t, n) {
      (w = x = new u.ModelIteratorBVH).initialize(this, e, t, n)
    }, this.resetIterator = function (e, t, n) {
      return C = !1, x && !b.fragmentsHaveBeenAdded() && (C = !0), C ? w = x : _ && (w = _), S = 0, T = n, M = t, w.reset(t, e), E && E.reset(), w
    }, this.nextBatch = function () {
      for (;;) {
        var e = w.nextBatch();
        if (S++, !e) return null;
        if (E && e instanceof a.RenderBatch && (e = E.consolidateNextBatch(e, M, T)), e.modelId = this.id, e instanceof d.Scene) return e;
        if (!this.applyVisibility(e, T, M)) return e
      }
    }, this.applyVisibility = function (e, t, n) {
      var i = e.applyVisibility(t, n);
      return i || this.is2d() || (e.sortObjects && !this.getFragmentList().useThreeMesh ? e.sortByDepth(n) : e.sortDone || e.sortByMaterial()), i
    }, this.getVisibleBounds = function (n) {
      return this.visibleBoundsDirty && (e.makeEmpty(), t.makeEmpty(), w.getVisibleBounds(e, t, n), this.visibleBoundsDirty = !1), n ? t : e
    }, this.rayIntersect = function (e, t, n, i) {
      this.visibleBoundsDirty && this.getVisibleBounds();
      var r, o = [];
      if (n && n.length > 0) {
        var a = this.getInstanceTree(),
          s = [];
        if (a)
          for (r = 0; r < n.length; r++) a.enumNodeFragments(n[r], (function (e) {
            s.push(e)
          }), !0);
        else s = n;
        if (s.length > 2) w.rayCast(e, o, n);
        else
          for (r = 0; r < s.length; r++) {
            var l = b.getVizmesh(s[r]);
            if (l) {
              var c = h.VBIntersector.rayCast(l, e, o);
              c && o.push(c)
            }
          }
      } else w.rayCast(e, o);
      if (!o.length) return null;
      o.sort((function (e, t) {
        return e.distance - t.distance
      }));
      var u = !!i;
      for (i = i || [], r = 0; r < o.length; r++) {
        var f = o[r].fragId;
        if (!this.is2d())
          if (this.isFragVisible(f)) {
            var p = b.getMaterial(f);
            if (t && p.transparent) continue;
            var m = o[r],
              g = !1,
              v = m.point;
            if (p && p.cutplanes)
              for (var y = 0; y < p.cutplanes.length; y++) g = g || p.cutplanes[y].dot(new d.Vector4(v.x, v.y, v.z, 1)) > 1e-6;
            if (g || i.push(m), m.model = this, !u && i.length > 0) break
          }
      }
      var _ = i[0] || null;
      return _ && (_.model = this), _
    }, this.setHighlighted = function (e, t) {
      if (!b) return !1;
      var n = b.setFlagFragment(e, f.MeshFlags.MESH_HIGHLIGHTED, t);
      return n && (t ? v++ : v--), n
    }, this.setVisibility = function (e, t) {
      b && (b.setVisibility(e, t), this.visibleBoundsDirty = !0)
    }, this.setAllVisibility = function (e) {
      b && (b.setAllVisibility(e), this.visibleBoundsDirty = !0)
    }, this.hideLines = function (e) {
      b && b.hideLines(e)
    }, this.hidePoints = function (e) {
      b && b.hidePoints(e)
    }, this.hasHighlighted = function () {
      return !!v
    }, this.isFragVisible = function (e) {
      return b.isFragVisible(e)
    }, this.areAllVisible = function () {
      return !b || b.areAllVisible()
    }, this.getGeomScenes = function () {
      return w.getGeomScenes()
    }, this.getRenderProgress = function () {
      var e = S / w.getSceneCount();
      return e > 1 ? 1 : e
    }, this.update = function (e) {
      return !(!w || !w.update) && w.update(e)
    }, this.setThemingColor = function (e, t, n) {
      if (e = this.reverseMapDbId(e), b) {
        var i = this.getInstanceTree();
        n && i ? i.enumNodeChildren(e, (function (e) {
          b.setThemingColor(e, t)
        }), !0) : b.setThemingColor(e, t)
      } else m.logger.warn("Theming colors are not supported by this model type.")
    }, this.clearThemingColors = function () {
      b && b.clearThemingColors()
    }, this.getLeaflet = function () {
      return w.isModelIteratorTexQuad ? w : null
    }, this.consolidate = function (e, t, n) {
      var i = Object(s.consolidateFragmentList)(this, e, t, n, A);
      E = new l.ConsolidationIterator(b, i), A = i.consolidationMap
    }, this.unconsolidate = function () {
      E && (E.dispose(), E = null)
    }, this.isConsolidated = function () {
      return !!E
    }, this.getConsolidation = function () {
      return E ? E.getConsolidation() : null
    }, this.setDbIdRemap = function (e) {
      this.is2d && (this.idRemap = e)
    }, this.remapDbId = function (e) {
      return this.idRemap && e > 0 && e < this.idRemap.length ? this.idRemap[e] : e
    }, this.reverseMapDbId = function (e) {
      if (!this.idRemap || e <= 0) return e;
      if (!this.reverseMap) {
        this.reverseMap = {};
        for (var t = 0; t < this.idRemap.length; t++) this.reverseMap[this.idRemap[t]] = t
      }
      return this.reverseMap[e]
    }, this.updateRenderProxy = function (e, t) {
      E && E.updateRenderProxy(e, t)
    }, this.skipOpaqueShapes = function () {
      w && w.skipOpaqueShapes && w.skipOpaqueShapes()
    }, this.invalidateBBoxes = function () {
      this.visibleBoundsDirty = !0
    }, this.setInnerAttributes = function (i) {
      this.id = i._id, e = i._visibleBounds, t = i._visibleBoundsWithHidden, n = i._tmpBox, this.enforceBvh = i._enforceBvh, v = i._numHighlighted, y = i._geoms, b = i._frags, _ = i._linearIterator, x = i._bvhIterator, w = i._iterator, E = i._consolidationIterator, A = i._consolidationMap, S = i._renderCounter, M = i._frustum, T = i._drawMode, C = i._bvhOn
    }, this.getInnerAttributes = function () {
      return {
        _id: this.id,
        _visibleBounds: e,
        _visibleBoundsWithHidden: t,
        _tmpBox: n,
        _enforceBvh: this.enforceBvh,
        _numHighlighted: v,
        _geoms: y,
        _frags: b,
        _linearIterator: _,
        _bvhIterator: x,
        _iterator: w,
        _consolidationIterator: E,
        _consolidationMap: A,
        _renderCounter: S,
        _frustum: M,
        _drawMode: T,
        _bvhOn: C
      }
    }
  }
}, function (e, t, n) {
  "use strict";
  n.d(t, "a", (function () {
    return u
  }));
  var i = n(0),
    r = n(338),
    o = n.n(r),
    a = n(339),
    s = n.n(a),
    l = n(46),
    c = {
      uniforms: {
        tDiffuse: {
          type: "t",
          value: null
        },
        uColor: {
          type: "v4",
          value: new i.Vector4(1, 1, 1, 1)
        }
      },
      vertexShader: o.a,
      fragmentShader: s.a
    },
    u = function (e, t, n, r, o) {
      var a, s, u, h = e,
        d = t,
        f = n || 3,
        p = r || 1,
        m = o.hasAlpha || !1,
        g = o.blending || !1,
        v = o.flipUV || !1;
      this.render = function (e, t, n) {
        a.render(e, u, n), s.render(e, t, u)
      }, this.setSize = function (e, t) {
        this.cleanup(), h = e, d = t, (u = new i.WebGLRenderTarget(e, t, {
          minFilter: i.LinearFilter,
          magFilter: i.LinearFilter,
          format: void 0 !== o.format ? o.format : i.RGBAFormat,
          type: void 0 !== o.type ? o.type : i.UnsignedByteType,
          stencilBuffer: !1
        })).generateMipmaps = !1, a.material.defines.KERNEL_SCALE_H = s.material.defines.KERNEL_SCALE_H = (p / h).toFixed(4), a.material.defines.KERNEL_SCALE_V = s.material.defines.KERNEL_SCALE_V = (p / d).toFixed(4), a.material.needsUpdate = s.material.needsUpdate = !0
      }, this.cleanup = function () {
        u && u.dispose()
      }, this.setColor = function (e) {
        s.material.uniforms.uColor.value.x = e.r, s.material.uniforms.uColor.value.y = e.g, s.material.uniforms.uColor.value.z = e.b
      }, this.setAlpha = function (e) {
        s.material.uniforms.uColor.value.w = e
      }, a = new l.ShaderPass(c), s = new l.ShaderPass(c), this.setSize(e, t), a.material.blending = s.material.blending = i.NoBlending, a.material.depthWrite = s.material.depthWrite = !1, a.material.depthTest = s.material.depthTest = !1, a.material.defines.HORIZONTAL = 1, a.material.defines.KERNEL_RADIUS = s.material.defines.KERNEL_RADIUS = f.toFixed(1), g && (s.material.transparent = !0, s.material.blending = i.NormalBlending), m && (a.material.defines.HAS_ALPHA = s.material.defines.HAS_ALPHA = ""), v && (a.material.defines.FLIP_UV = "")
    }
}, function (e, t, n) {
  "use strict";
  n.d(t, "a", (function () {
    return l
  }));
  var i = n(0),
    r = n(340),
    o = n.n(r),
    a = n(341),
    s = n.n(a),
    l = {
      uniforms: {
        color1: {
          type: "v3",
          value: new i.Vector3(41 / 255, 76 / 255, 120 / 255)
        },
        color2: {
          type: "v3",
          value: new i.Vector3(1 / 255, 2 / 255, 3 / 255)
        },
        opacity: {
          type: "f",
          value: 1
        },
        envMap: {
          type: "t",
          value: null
        },
        envRotationSin: {
          type: "f",
          value: 0
        },
        envRotationCos: {
          type: "f",
          value: 1
        },
        exposureBias: {
          type: "f",
          value: 1
        },
        envMapExposure: {
          type: "f",
          value: 1
        },
        uCamDir: {
          type: "v3",
          value: new i.Vector3
        },
        uCamUp: {
          type: "v3",
          value: new i.Vector3
        },
        uResolution: {
          type: "v2",
          value: new i.Vector2(600, 400)
        },
        uHalfFovTan: {
          type: "f",
          value: .5
        },
        envMapBackground: {
          type: "i",
          value: 0
        }
      },
      vertexShader: o.a,
      fragmentShader: s.a
    }
}, function (e, t, n) {
  "use strict";
  n.r(t), n.d(t, "WebGLShader", (function () {
    return r
  }));
  var i = n(0);

  function r(e, t, n) {
    var r = e.createShader(t);
    return e.shaderSource(r, n), e.compileShader(r), "undefined" != typeof DEBUG_SHADERS && DEBUG_SHADERS && (!1 === e.getShaderParameter(r, e.COMPILE_STATUS) && i.error("THREE.WebGLShader: Shader couldn't compile."), "" !== e.getShaderInfoLog(r) && i.warn("THREE.WebGLShader: gl.getShaderInfoLog()", e.getShaderInfoLog(r), function (e) {
      for (var t = e.split("\n"), n = 0; n < t.length; n++) t[n] = n + 1 + ": " + t[n];
      return t.join("\n")
    }(n))), r
  }
}, function (e, t, n) {
  "use strict";
  n.d(t, "a", (function () {
    return l
  }));
  var i = n(0);

  function r(e, t) {
    for (var n = 0; n < t.length; n++) {
      var i = t[n];
      i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(e, i.key, i)
    }
  }
  var o = new i.Vector3,
    a = new Float32Array(6),
    s = "hierarchy",
    l = function () {
      function e() {
        ! function (e, t) {
          if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
        }(this, e)
      }
      var t, n, i;
      return t = e, i = [{
        key: "setStrategy",
        value: function (e) {
          if (s !== e) return s = e, !0
        }
      }, {
        key: "getStrategy",
        value: function () {
          return s
        }
      }, {
        key: "explode",
        value: function (e, t) {
          var n = e.getData().instanceTree,
            i = e.getFragmentList(),
            r = e.getVisibleBounds(!0).center();
          "hierarchy" === s && n && 0 !== t ? function (e, t, n, i) {
            var r = (n *= 2) * (e.maxDepth - 1) + 1;
            1 === e.maxDepth && (r = n);
            var s = 0 | r,
              l = r - s;
            ! function i(r, c, u, h, d, f, p, m) {
              var g = 2 * n;
              c == s && (g *= l), e.getNodeBox(r, a);
              var v = .5 * (a[0] + a[3]),
                y = .5 * (a[1] + a[4]),
                b = .5 * (a[2] + a[5]);
              c > 0 && c <= s && (f += (v - u) * g, p += (y - h) * g, m += (b - d) * g), e.isNodeExplodeLocked(r) && (f = p = m = 0), e.enumNodeChildren(r, (function (e) {
                i(e, c + 1, v, y, b, f, p, m)
              }), !1), o.x = f, o.y = p, o.z = m, e.enumNodeFragments(r, (function (e) {
                t.updateAnimTransform(e, null, null, o)
              }), !1)
            }(e.getRootId(), 0, i.x, i.y, i.z, 0, 0, 0)
          }(n, i, t, r) : function (e, t, n, i) {
            var r, a, s = e.fragments.boxes;
            e.useThreeMesh ? r = e.vizmeshes : a = e.fragments.fragId2dbId;
            for (var l = 0, c = e.getCount(); l < c; l++)
              if (0 == n || t && t.isNodeExplodeLocked(r ? r[l] && r[l].dbId : a[l])) e.updateAnimTransform(l);
              else {
                var u = 6 * l,
                  h = .5 * (s[u] + s[u + 3]),
                  d = .5 * (s[u + 1] + s[u + 4]),
                  f = .5 * (s[u + 2] + s[u + 5]);
                o.x = n * (h - i.x), o.y = n * (d - i.y), o.z = n * (f - i.z), e.updateAnimTransform(l, null, null, o)
              }
          }(i, n, t, r)
        }
      }], (n = null) && r(t.prototype, n), i && r(t, i), e
    }()
}, function (e, t, n) {
  "use strict";
  n.r(t), n.d(t, "ObjectContextMenu", (function () {
    return o
  }));
  var i = n(272),
    r = n(12);

  function o(e) {
    this.viewer = e, this.setGlobalManager(e.globalManager), this.contextMenu = new i.ContextMenu(e)
  }
  o.prototype.constructor = o, r.GlobalManagerMixin.call(o.prototype), o.prototype.show = function (e) {
    var t = this.viewer.getSelectionCount(),
      n = this.viewer.getSelectionVisibility(),
      i = this.viewer.impl.getCanvasBoundingClientRect(),
      r = {
        event: e,
        numSelected: t,
        hasSelected: 0 < t,
        hasVisible: n.hasVisible,
        hasHidden: n.hasHidden,
        canvasX: e.clientX - i.left,
        canvasY: e.clientY - i.top
      },
      o = this.buildMenu(e, r);
    this.viewer.runContextMenuCallbacks(o, r), o && 0 < o.length && this.contextMenu.show(e, o)
  }, o.prototype.hide = function () {
    return this.contextMenu.hide()
  }, o.prototype.buildMenu = function (e, t) {
    return null
  }
}, function (e, t, n) {
  "use strict";
  n.r(t), n.d(t, "ComboButton", (function () {
    return a
  }));
  var i = n(11),
    r = n(97),
    o = n(16);

  function a(e, t) {
    i.Button.call(this, e, t), this.arrowButton = new i.Button(e + "arrow"), this.arrowButton.addClass("adsk-button-arrow"), this.arrowButton.removeClass("adsk-button"), this.subMenu = new r.RadioButtonGroup(e + "SubMenu"), this.subMenu.addClass("toolbar-vertical-group"), this.subMenu.setVisible(!1), this.container.insertBefore(this.subMenu.container, this.container.firstChild), this.container.insertBefore(this.arrowButton.container, this.container.firstChild);
    var n = this;
    this.arrowButton.onClick = function (e) {
      n.subMenu.setVisible(!n.subMenu.isVisible())
    }, this.toggleFlyoutVisible = function () {
      n.subMenu.setVisible(!n.subMenu.isVisible())
    }, this.onClick = function (e) {
      n.subMenu.setVisible(!n.subMenu.isVisible())
    }, this.subMenuActiveButtonChangedHandler = function (e) {
      e.isActiveButton ? (n.setIcon(e.target.getActiveButton().iconClass), n.setToolTip(e.target.getActiveButton().getToolTip()), n.setState(i.Button.State.ACTIVE), n.onClick = e.button.onClick) : n.setState(i.Button.State.INACTIVE)
    }, this.subMenu.addEventListener(r.RadioButtonGroup.Event.ACTIVE_BUTTON_CHANGED, this.subMenuActiveButtonChangedHandler);
    var a = Object(o.stringToDOM)('<div class="clickoff" style="position:fixed; top:0; left:0; width:100vw; height:100vh;"></div>');
    this.subMenu.container.insertBefore(a, this.subMenu.container.firstChild), a.addEventListener("click", (function (e) {
      n.subMenu.setVisible(!1), e.stopPropagation()
    }))
  }
  a.prototype = Object.create(i.Button.prototype), a.prototype.constructor = a, a.prototype.addControl = function (e) {
    this.subMenu.addControl(e), e.addEventListener(i.Button.Event.CLICK, this.toggleFlyoutVisible)
  }, a.prototype.removeControl = function (e) {
    e.removeEventListener(i.Button.Event.CLICK, this.toggleFlyoutVisible)
  }, a.prototype.setState = function (e) {
    if (e === i.Button.State.INACTIVE) {
      var t = this.subMenu.getActiveButton();
      t && t.setState(i.Button.State.INACTIVE)
    }
    i.Button.prototype.setState.call(this, e)
  }, a.prototype.saveAsDefault = function () {
    this.defaultState = {}, this._toolTipElement && this._toolTipElement.getAttribute("tooltipText") && (this.defaultState.tooltip = this._toolTipElement.getAttribute("tooltipText")), this.defaultState.icon = this.iconClass, this.defaultState.onClick = this.onClick
  }, a.prototype.restoreDefault = function () {
    this.defaultState && (this.defaultState.tooltip && this.setToolTip(this.defaultState.tooltip), this.defaultState.icon && this.setIcon(this.defaultState.icon), this.onClick = this.defaultState.onClick, this.setState(i.Button.State.INACTIVE))
  }
}, function (e, t) {
  for (var n = new Array(256), i = 0; i < 256; i++) {
    var r = i.toString(16);
    1 === r.length && (r = "0" + r), n[i] = r
  }
  var o = new Array(20);
  var a = new Array(10);

  function s(e) {
    for (var t = 10 === e.length ? o : [], i = 0; i < e.length; i++) {
      var r = e.charCodeAt(i);
      t[2 * i] = n[255 & r], t[2 * i + 1] = n[r >> 8 & 255]
    }
    return t.join("")
  }

  function l(e) {
    return e >= 48 && e <= 57 ? e - 48 : e >= 65 && e <= 70 ? e - 55 : e >= 97 && e <= 102 ? e - 87 : 0
  }
  e.exports = {
    getHexStringPacked: function (e, t, n) {
      for (var i = 20 === n ? a : [], r = 0; r < n; r += 2) {
        var o = e[t + r],
          s = e[t + r + 1];
        i[r / 2] = s << 8 | o
      }
      return String.fromCharCode.apply(null, i)
    },
    unpackHexString: s,
    hexToBin: function (e, t, n) {
      for (var i = 10 === e.length ? s(e) : e, r = n, o = 0; o < i.length; o += 2) {
        var a = l(i.charCodeAt(o)),
          c = l(i.charCodeAt(o + 1));
        t[r++] = a << 4 | c
      }
    }
  }
}, function (e, t, n) {
  var i = n(17),
    r = n(22),
    o = i.document,
    a = r(o) && r(o.createElement);
  e.exports = function (e) {
    return a ? o.createElement(e) : {}
  }
}, function (e, t, n) {
  var i = n(17),
    r = n(56);
  e.exports = function (e, t) {
    try {
      r(i, e, t)
    } catch (n) {
      i[e] = t
    }
    return t
  }
}, function (e, t, n) {
  var i = n(284),
    r = Function.toString;
  "function" != typeof i.inspectSource && (i.inspectSource = function (e) {
    return r.call(e)
  }), e.exports = i.inspectSource
}, function (e, t, n) {
  var i = n(38),
    r = n(118),
    o = n(213),
    a = n(7);
  e.exports = i("Reflect", "ownKeys") || function (e) {
    var t = r.f(a(e)),
      n = o.f;
    return n ? t.concat(n(e)) : t
  }
}, function (e, t) {
  e.exports = ["constructor", "hasOwnProperty", "isPrototypeOf", "propertyIsEnumerable", "toLocaleString", "toString", "valueOf"]
}, function (e, t) {
  t.f = Object.getOwnPropertySymbols
}, function (e, t, n) {
  var i = n(14);
  e.exports = !!Object.getOwnPropertySymbols && !i((function () {
    return !String(Symbol())
  }))
}, function (e, t, n) {
  var i, r, o = n(17),
    a = n(216),
    s = o.process,
    l = s && s.versions,
    c = l && l.v8;
  c ? r = (i = c.split("."))[0] + i[1] : a && (!(i = a.match(/Edge\/(\d+)/)) || i[1] >= 74) && (i = a.match(/Chrome\/(\d+)/)) && (r = i[1]), e.exports = r && +r
}, function (e, t, n) {
  var i = n(38);
  e.exports = i("navigator", "userAgent") || ""
}, function (e, t, n) {
  "use strict";
  var i = n(34),
    r = n(112),
    o = n(27);
  e.exports = function (e) {
    for (var t = i(this), n = o(t.length), a = arguments.length, s = r(a > 1 ? arguments[1] : void 0, n), l = a > 2 ? arguments[2] : void 0, c = void 0 === l ? n : r(l, n); c > s;) t[s++] = e;
    return t
  }
}, function (e, t, n) {
  var i = n(25),
    r = n(160),
    o = i("iterator"),
    a = Array.prototype;
  e.exports = function (e) {
    return void 0 !== e && (r.Array === e || a[o] === e)
  }
}, function (e, t, n) {
  var i = {};
  i[n(25)("toStringTag")] = "z", e.exports = "[object z]" === String(i)
}, function (e, t, n) {
  "use strict";
  var i = n(4),
    r = n(163),
    o = n(69),
    a = n(113),
    s = n(91),
    l = n(56),
    c = n(68),
    u = n(25),
    h = n(15),
    d = n(160),
    f = n(299),
    p = f.IteratorPrototype,
    m = f.BUGGY_SAFARI_ITERATORS,
    g = u("iterator"),
    v = function () {
      return this
    };
  e.exports = function (e, t, n, u, f, y, b) {
    r(n, t, u);
    var _, x, w, E = function (e) {
        if (e === f && C) return C;
        if (!m && e in M) return M[e];
        switch (e) {
          case "keys":
          case "values":
          case "entries":
            return function () {
              return new n(this, e)
            }
        }
        return function () {
          return new n(this)
        }
      },
      A = t + " Iterator",
      S = !1,
      M = e.prototype,
      T = M[g] || M["@@iterator"] || f && M[f],
      C = !m && T || E(f),
      P = "Array" == t && M.entries || T;
    if (P && (_ = o(P.call(new e)), p !== Object.prototype && _.next && (h || o(_) === p || (a ? a(_, p) : "function" != typeof _[g] && l(_, g, v)), s(_, A, !0, !0), h && (d[A] = v))), "values" == f && T && "values" !== T.name && (S = !0, C = function () {
        return T.call(this)
      }), h && !b || M[g] === C || l(M, g, C), d[t] = C, f)
      if (x = {
          values: E("values"),
          keys: y ? C : E("keys"),
          entries: E("entries")
        }, b)
        for (w in x) !m && !S && w in M || c(M, w, x[w]);
      else i({
        target: t,
        proto: !0,
        forced: m || S
      }, x);
    return x
  }
}, function (e, t, n) {
  var i = n(14);
  e.exports = !i((function () {
    function e() {}
    return e.prototype.constructor = null, Object.getPrototypeOf(new e) !== e.prototype
  }))
}, function (e, t) {
  e.exports = "undefined" != typeof ArrayBuffer && "undefined" != typeof DataView
}, function (e, t, n) {
  var i = n(27),
    r = n(224),
    o = n(55),
    a = Math.ceil,
    s = function (e) {
      return function (t, n, s) {
        var l, c, u = String(o(t)),
          h = u.length,
          d = void 0 === s ? " " : String(s),
          f = i(n);
        return f <= h || "" == d ? u : (l = f - h, (c = r.call(d, a(l / d.length))).length > l && (c = c.slice(0, l)), e ? u + c : c + u)
      }
    };
  e.exports = {
    start: s(!1),
    end: s(!0)
  }
}, function (e, t, n) {
  "use strict";
  var i = n(77),
    r = n(55);
  e.exports = "".repeat || function (e) {
    var t = String(r(this)),
      n = "",
      o = i(e);
    if (o < 0 || o == 1 / 0) throw RangeError("Wrong number of repetitions");
    for (; o > 0;
      (o >>>= 1) && (t += t)) 1 & o && (n += t);
    return n
  }
}, function (e, t, n) {
  "use strict";
  var i = n(187),
    r = n(303);
  e.exports = i("Map", (function (e) {
    return function () {
      return e(this, arguments.length ? arguments[0] : void 0)
    }
  }), r)
}, function (e, t) {
  e.exports = Math.sign || function (e) {
    return 0 == (e = +e) || e != e ? e : e < 0 ? -1 : 1
  }
}, function (e, t, n) {
  var i = n(17),
    r = n(138).trim,
    o = n(190),
    a = i.parseInt,
    s = /^[+-]?0[Xx]/,
    l = 8 !== a(o + "08") || 22 !== a(o + "0x16");
  e.exports = l ? function (e, t) {
    var n = r(String(e));
    return a(n, t >>> 0 || (s.test(n) ? 16 : 10))
  } : a
}, function (e, t, n) {
  var i, r, o, a = n(17),
    s = n(14),
    l = n(80),
    c = n(41),
    u = n(291),
    h = n(208),
    d = n(314),
    f = a.location,
    p = a.setImmediate,
    m = a.clearImmediate,
    g = a.process,
    v = a.MessageChannel,
    y = a.Dispatch,
    b = 0,
    _ = {},
    x = function (e) {
      if (_.hasOwnProperty(e)) {
        var t = _[e];
        delete _[e], t()
      }
    },
    w = function (e) {
      return function () {
        x(e)
      }
    },
    E = function (e) {
      x(e.data)
    },
    A = function (e) {
      a.postMessage(e + "", f.protocol + "//" + f.host)
    };
  p && m || (p = function (e) {
    for (var t = [], n = 1; arguments.length > n;) t.push(arguments[n++]);
    return _[++b] = function () {
      ("function" == typeof e ? e : Function(e)).apply(void 0, t)
    }, i(b), b
  }, m = function (e) {
    delete _[e]
  }, "process" == l(g) ? i = function (e) {
    g.nextTick(w(e))
  } : y && y.now ? i = function (e) {
    y.now(w(e))
  } : v && !d ? (o = (r = new v).port2, r.port1.onmessage = E, i = c(o.postMessage, o, 1)) : !a.addEventListener || "function" != typeof postMessage || a.importScripts || s(A) ? i = "onreadystatechange" in h("script") ? function (e) {
    u.appendChild(h("script")).onreadystatechange = function () {
      u.removeChild(this), x(e)
    }
  } : function (e) {
    setTimeout(w(e), 0)
  } : (i = A, a.addEventListener("message", E, !1))), e.exports = {
    set: p,
    clear: m
  }
}, function (e, t, n) {
  "use strict";
  var i = n(14);

  function r(e, t) {
    return RegExp(e, t)
  }
  t.UNSUPPORTED_Y = i((function () {
    var e = r("a", "y");
    return e.lastIndex = 2, null != e.exec("abcd")
  })), t.BROKEN_CARET = i((function () {
    var e = r("^r", "gy");
    return e.lastIndex = 2, null != e.exec("str")
  }))
}, function (e, t, n) {
  var i = n(166);
  e.exports = function (e) {
    if (i(e)) throw TypeError("The method doesn't accept regular expressions");
    return e
  }
}, function (e, t, n) {
  var i = n(25)("match");
  e.exports = function (e) {
    var t = /./;
    try {
      "/./" [e](t)
    } catch (n) {
      try {
        return t[i] = !1, "/./" [e](t)
      } catch (e) {}
    }
    return !1
  }
}, function (e, t, n) {
  var i = n(14),
    r = n(190);
  e.exports = function (e) {
    return i((function () {
      return !!r[e]() || "​᠎" != "​᠎" [e]() || r[e].name !== e
    }))
  }
}, function (e, t, n) {
  var i = n(17),
    r = n(14),
    o = n(183),
    a = n(29).NATIVE_ARRAY_BUFFER_VIEWS,
    s = i.ArrayBuffer,
    l = i.Int8Array;
  e.exports = !a || !r((function () {
    l(1)
  })) || !r((function () {
    new l(-1)
  })) || !o((function (e) {
    new l, new l(null), new l(1.5), new l(e)
  }), !0) || r((function () {
    return 1 !== new l(new s(2), 1, void 0).length
  }))
}, function (e, t, n) {
  "use strict";
  var i, r = n(17),
    o = n(121),
    a = n(122),
    s = n(187),
    l = n(324),
    c = n(22),
    u = n(51).enforce,
    h = n(285),
    d = !r.ActiveXObject && "ActiveXObject" in r,
    f = Object.isExtensible,
    p = function (e) {
      return function () {
        return e(this, arguments.length ? arguments[0] : void 0)
      }
    },
    m = e.exports = s("WeakMap", p, l);
  if (h && d) {
    i = l.getConstructor(p, "WeakMap", !0), a.REQUIRED = !0;
    var g = m.prototype,
      v = g.delete,
      y = g.has,
      b = g.get,
      _ = g.set;
    o(g, {
      delete: function (e) {
        if (c(e) && !f(e)) {
          var t = u(this);
          return t.frozen || (t.frozen = new i), v.call(this, e) || t.frozen.delete(e)
        }
        return v.call(this, e)
      },
      has: function (e) {
        if (c(e) && !f(e)) {
          var t = u(this);
          return t.frozen || (t.frozen = new i), y.call(this, e) || t.frozen.has(e)
        }
        return y.call(this, e)
      },
      get: function (e) {
        if (c(e) && !f(e)) {
          var t = u(this);
          return t.frozen || (t.frozen = new i), y.call(this, e) ? b.call(this, e) : t.frozen.get(e)
        }
        return b.call(this, e)
      },
      set: function (e, t) {
        if (c(e) && !f(e)) {
          var n = u(this);
          n.frozen || (n.frozen = new i), y.call(this, e) ? _.call(this, e, t) : n.frozen.set(e, t)
        } else _.call(this, e, t);
        return this
      }
    })
  }
}, function (e, t, n) {
  "use strict";
  e.exports = {
    2: "need dictionary",
    1: "stream end",
    0: "",
    "-1": "file error",
    "-2": "stream error",
    "-3": "data error",
    "-4": "insufficient memory",
    "-5": "buffer error",
    "-6": "incompatible version"
  }
}, function (e, t, n) {
  "use strict";
  n.r(t), n.d(t, "GroundReflection", (function () {
    return f
  }));
  var i = n(46),
    r = n(201),
    o = n(202),
    a = n(63),
    s = n.n(a),
    l = n(342),
    c = n.n(l),
    u = n(31),
    h = n(0),
    d = {
      uniforms: {
        tDiffuse: {
          type: "t",
          value: null
        }
      },
      vertexShader: s.a,
      fragmentShader: c.a
    },
    f = function (e, t, n, a) {
      var s, l, c, f, p, m, g = e,
        v = g.getContext(),
        y = t || 512,
        b = n || 512,
        _ = !1,
        x = new h.Color(0, 0, 0),
        w = !1,
        E = !1;
      this.inTarget = void 0, this.outTarget = void 0;
      var A, S, M, T, C = !0,
        P = u.GroundFlags.GROUND_UNFINISHED,
        L = {
          color: new h.Color(1, 1, 1),
          alpha: .3,
          texScale: .5,
          blurRadius: 2,
          blurTexScale: .5,
          fadeAngle: Math.PI / 18
        };
      if (this.setTransform = function (e, t, n) {
          f = e, c.normal = t, c.constant = -e.dot(t)
        }, this.cleanup = function () {
          s && s.cleanup(), this.inTarget && this.inTarget.dispose(), this.outTarget && this.outTarget.dispose()
        }, this.setSize = function (e, t) {
          y = e, b = t, this.cleanup(), this.inTarget = new h.WebGLRenderTarget(y * L.texScale, b * L.texScale, {
            magFilter: h.LinearFilter,
            minFilter: h.LinearFilter,
            format: h.RGBAFormat,
            stencilBuffer: !1
          }), this.inTarget.generateMipmaps = !1, this.outTarget = new h.WebGLRenderTarget(y * L.texScale, b * L.texScale, {
            magFilter: h.LinearFilter,
            minFilter: h.LinearFilter,
            format: h.RGBAFormat,
            stencilBuffer: !1
          }), this.outTarget.generateMipmaps = !1, s ? s.setSize(y * L.texScale * L.blurTexScale, b * L.texScale * L.blurTexScale) : s = new r.a(y * L.texScale * L.blurTexScale, b * L.texScale * L.blurTexScale, L.blurRadius, 1, {
            hasAlpha: !0,
            blending: !0,
            flipUV: !0
          })
        }, this.updateCamera = function (e) {
          var t;
          t = e.isPerspective ? f.clone() : e.target.clone();
          var n = e.position.clone().sub(t).normalize(),
            i = Math.PI / 2 - n.angleTo(c.normal);
          if (!(_ = i < 0)) {
            if (L.fadeAngle > 0) {
              var r = Math.min(L.fadeAngle, i) / L.fadeAngle;
              s.setAlpha(r * L.alpha)
            }
            var o, a, l, u = (a = (o = c).normal, l = o.constant, (new h.Matrix4).set(1 - 2 * a.x * a.x, -2 * a.y * a.x, -2 * a.x * a.z, -2 * l * a.x, -2 * a.x * a.y, 1 - 2 * a.y * a.y, -2 * a.y * a.z, -2 * l * a.y, -2 * a.x * a.z, -2 * a.y * a.z, 1 - 2 * a.z * a.z, -2 * l * a.z, 0, 0, 0, 1));
            (p = e.clone()).applyMatrix(u), p.projectionMatrix.elements[5] *= -1, p.matrixWorldNeedsUpdate = !0, e.worldUpTransform ? p.worldUpTransform = e.worldUpTransform.clone() : p.worldUpTransform = new h.Matrix4
          }
        }, this.renderIntoReflection = function (e) {
          _ || g.render(e, p, this.inTarget)
        }, this.prepareGroundReflection = (S = 0, M = 0, T = 0, function (e, t, n, i, r, o) {
          var a, s, l, c = t.modelQueue();
          if (P !== u.GroundFlags.GROUND_UNFINISHED || c.isEmpty()) return P = u.GroundFlags.GROUND_FINISHED, r;
          if (A != c.getGeomScenes() && (C = !0), C) {
            if (C = !1, this.updateCamera(t.camera), this.isGroundCulled()) return P = u.GroundFlags.GROUND_FINISHED, r;
            this.clear(), A = c.getGeomScenes(), S = A.length, M = 0, T = i ? Math.max(Math.ceil(S / 100), i) : S, P = u.GroundFlags.GROUND_UNFINISHED
          } else {
            if (P !== u.GroundFlags.GROUND_UNFINISHED) return P = u.GroundFlags.GROUND_FINISHED, r;
            0 === i && (T = S)
          }
          r && (a = performance.now(), s = (o = void 0 === o ? 1 : o) * r);
          for (var h = 0; h < T && M < S;) {
            var d = A[M++];
            if (d && (h++, d.forceVisible = !0, this.renderIntoReflection(d), d.forceVisible = !1, r)) {
              var f = performance.now() - a;
              if (s < f && M < S) {
                P = u.GroundFlags.GROUND_UNFINISHED, l = r - f;
                break
              }
            }
          }
          return M < S && (P = u.GroundFlags.GROUND_UNFINISHED, l = r ? r - performance.now() + a : 1), void 0 === l || n ? (this.postprocess(t.camera, t.matman()), e && e.enabled && t.renderGroundShadow(this.outTarget), this.renderReflection(t.camera, t.renderer().getColorTarget()), void 0 === l && (P = u.GroundFlags.GROUND_RENDERED), r ? r - performance.now() + a : 1) : l
        }), this.renderReflection = function (e, t) {
          _ || (v.depthRange(.999999, 1), l.render(g, t, this.outTarget), v.depthRange(0, 1))
        }, this.toggleEnvMapBackground = function (e) {
          E = e, m.uniforms.envMapBackground.value = e
        }, this.postprocess = function (e) {
          _ || (w || E ? (m.uniforms.uCamDir.value = e.worldUpTransform ? e.getWorldDirection().clone().applyMatrix4(e.worldUpTransform) : e.getWorldDirection(), m.uniforms.uCamUp.value = e.worldUpTransform ? e.up.clone().applyMatrix4(e.worldUpTransform) : e.up, m.uniforms.uResolution.value.set(y, b), m.uniforms.uHalfFovTan.value = Math.tan(h.Math.degToRad(.5 * e.fov)), m.render(g, this.outTarget), g.clearTarget(this.outTarget, !1, !0, !1)) : (g.setClearColor(x, 1), g.clearTarget(this.outTarget, !0, !0, !1)), s.render(g, this.outTarget, this.inTarget))
        }, this.clear = function () {
          g.setClearColor(x, 0), g.clearTarget(this.inTarget, !0, !0, !1), g.clearBlend()
        }, this.setClearColors = function (e, t, n) {
          t ? (x.setRGB(.5 * (e.x + t.x), .5 * (e.y + t.y), .5 * (e.z + t.z)), w = !e.equals(t) && !n) : (x.copy(e), w = !1), w && (m.uniforms.color1.value.copy(e), m.uniforms.color2.value.copy(t))
        }, this.setEnvRotation = function (e) {
          m.material.envRotationSin = Math.sin(e), m.material.envRotationCos = Math.cos(e)
        }, this.isGroundCulled = function () {
          return _
        }, this.getStatus = function () {
          return P
        }, this.setDirty = function () {
          C = !0, P = u.GroundFlags.GROUND_UNFINISHED
        }, this.setColor = function (e) {
          s.setColor(L.color), L.color.set(e)
        }, this.setAlpha = function (e) {
          s.setAlpha(L.alpha), L.alpha = e
        }, a)
        for (var D in L) L[D] = void 0 !== a[D] ? a[D] : L[D];
      (l = new i.ShaderPass(d)).material.blending = h.NoBlending, l.material.depthTest = !0, l.material.depthWrite = !1, l.scene.position.z = -.999999, a.clearPass ? m = a.clearPass : ((m = new i.ShaderPass(o.a)).material.blending = h.NoBlending, m.material.depthWrite = !1, m.material.depthTest = !1), this.setSize(y, b), s.setAlpha(L.color), s.setAlpha(L.alpha), c = new h.Plane(new h.Vector3(0, 1, 0), 0), f = new h.Vector3(0, 0, 0)
    }
}, function (e, t, n) {
  "use strict";

  function i(e) {
    return (i = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (e) {
      return typeof e
    } : function (e) {
      return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
    })(e)
  }

  function r(e, t) {
    return !t || "object" !== i(t) && "function" != typeof t ? function (e) {
      if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
      return e
    }(e) : t
  }

  function o(e) {
    return (o = Object.setPrototypeOf ? Object.getPrototypeOf : function (e) {
      return e.__proto__ || Object.getPrototypeOf(e)
    })(e)
  }

  function a(e, t) {
    return (a = Object.setPrototypeOf || function (e, t) {
      return e.__proto__ = t, e
    })(e, t)
  }

  function s(e, t) {
    if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
  }

  function l(e, t) {
    for (var n = 0; n < t.length; n++) {
      var i = t[n];
      i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(e, i.key, i)
    }
  }

  function c(e, t, n) {
    return t && l(e.prototype, t), n && l(e, n), e
  }
  n.r(t), n.d(t, "RenderContextPostProcessExtension", (function () {
    return u
  })), n.d(t, "RenderContextPostProcessManager", (function () {
    return h
  }));
  var u = function () {
      function e(t) {
        s(this, e), this.renderContext = t
      }
      return c(e, [{
        key: "load",
        value: function () {}
      }, {
        key: "unload",
        value: function () {
          this.renderContext = void 0
        }
      }, {
        key: "render",
        value: function (e, t, n) {}
      }, {
        key: "updateUniformValue",
        value: function (e, t, n) {}
      }, {
        key: "changeResolution",
        value: function (e, t) {}
      }, {
        key: "setMaterialNeedsUpdate",
        value: function () {}
      }, {
        key: "postProcessEdgesOn",
        value: function () {}
      }, {
        key: "getRenderOptionClass",
        value: function () {}
      }]), e
    }(),
    h = function (e) {
      function t() {
        return s(this, t), r(this, o(t).apply(this, arguments))
      }
      return function (e, t) {
        if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function");
        e.prototype = Object.create(t && t.prototype, {
          constructor: {
            value: e,
            writable: !0,
            configurable: !0
          }
        }), t && a(e, t)
      }(t, e), c(t, [{
        key: "registerPostProcessingExtension",
        value: function (e) {
          this.extension = e
        }
      }, {
        key: "removePostProcessingExtension",
        value: function () {
          this.extension && (this.extension.unload(), this.extension = void 0)
        }
      }, {
        key: "getRenderOptionClass",
        value: function () {
          if (this.extension) return this.extension.getRenderOptionClass()
        }
      }, {
        key: "preloadPostProcessStyle",
        value: function (e) {
          this.extension && this.extension.preloadPostProcessStyle(e)
        }
      }, {
        key: "setPostProcessParameter",
        value: function (e, t) {
          this.extension && this.extension.setPostProcessParameter(e, t)
        }
      }, {
        key: "render",
        value: function (e, t, n) {
          this.extension && this.extension.render(e, t, n)
        }
      }, {
        key: "updateUniformValue",
        value: function (e, t, n) {
          this.extension && this.extension.updateUniformValue(e, t, n)
        }
      }, {
        key: "changeResolution",
        value: function (e, t) {
          this.extension && this.extension.changeResolution(e, t)
        }
      }, {
        key: "setMaterialNeedsUpdate",
        value: function () {
          this.extension && this.extension.setMaterialNeedsUpdate()
        }
      }, {
        key: "postProcessEdgesOn",
        value: function () {
          if (this.extension) return this.extension.postProcessEdgesOn()
        }
      }]), t
    }(u)
}, function (e, t, n) {
  "use strict";
  n.r(t), n.d(t, "LineStyleDefs", (function () {
    return r
  })), n.d(t, "createLinePatternTextureData", (function () {
    return o
  })), n.d(t, "createLinePatternTextureFromDefs", (function () {
    return a
  })), n.d(t, "createLinePatternTexture", (function () {
    return s
  })), n.d(t, "createLinePatternForDef", (function () {
    return l
  }));
  var i = n(0),
    r = [{
      id: "SOLID",
      name: "Solid",
      ascii_art: "_______________________________________",
      def: [1]
    }, {
      id: "BORDER",
      name: "Border",
      ascii_art: "__ __ . __ __ . __ __ . __ __ . __ __ .",
      def: [.5, -.25, .5, -.25, 0, -.25]
    }, {
      id: "BORDER2",
      name: "Border (.5x)",
      ascii_art: "__ __ . __ __ . __ __ . __ __ . __ __ .",
      def: [.25, -.125, .25, -.125, 0, -.125]
    }, {
      id: "BORDERX2",
      name: "Border (2x)",
      ascii_art: "____  ____  .  ____  ____  .  ___",
      def: [1, -.5, 1, -.5, 0, -.5]
    }, {
      id: "CENTER",
      name: "Center",
      ascii_art: "____ _ ____ _ ____ _ ____ _ ____ _ ____",
      def: [1.25, -.25, .25, -.25]
    }, {
      id: "CENTER2",
      name: "Center (.5x)",
      ascii_art: "___ _ ___ _ ___ _ ___ _ ___ _ ___",
      def: [.75, -.125, .125, -.125]
    }, {
      id: "CENTERX2",
      name: "Center (2x)",
      ascii_art: "________  __  ________  __  _____",
      def: [2.5, -.5, .5, -.5]
    }, {
      id: "DASHDOT",
      name: "Dash dot",
      ascii_art: "__ . __ . __ . __ . __ . __ . __ . __",
      def: [.5, -.25, 0, -.25]
    }, {
      id: "DASHDOT2",
      name: "Dash dot (.5x)",
      ascii_art: "_._._._._._._._._._._._._._._.",
      def: [.25, -.125, 0, -.125]
    }, {
      id: "DASHDOTX2",
      name: "Dash dot (2x)",
      ascii_art: "____  .  ____  .  ____  .  ___",
      def: [1, -.5, 0, -.5]
    }, {
      id: "DASHED",
      name: "Dashed",
      ascii_art: "__ __ __ __ __ __ __ __ __ __ __ __ __ _",
      def: [.5, -.25]
    }, {
      id: "DASHED2",
      name: "Dashed (.5x)",
      ascii_art: "_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _",
      def: [.25, -.125]
    }, {
      id: "DASHEDX2",
      name: "Dashed (2x)",
      ascii_art: "____  ____  ____  ____  ____  ___",
      def: [1, -.5]
    }, {
      id: "DIVIDE",
      name: "Divide",
      ascii_art: "____ . . ____ . . ____ . . ____ . . ____",
      def: [.5, -.25, 0, -.25, 0, -.25]
    }, {
      id: "DIVIDE2",
      name: "Divide (.5x)",
      ascii_art: "__..__..__..__..__..__..__..__.._",
      def: [.25, -.125, 0, -.125, 0, -.125]
    }, {
      id: "DIVIDEX2",
      name: "Divide (2x)",
      ascii_art: "________  .  .  ________  .  .  _",
      def: [1, -.5, 0, -.5, 0, -.5]
    }, {
      id: "DOT",
      name: "Dot",
      ascii_art: ". . . . . . . . . . . . . . . . . . . . . . . .",
      def: [0, -.25]
    }, {
      id: "DOT2",
      name: "Dot (.5x)",
      ascii_art: "........................................",
      def: [0, -.125]
    }, {
      id: "DOTX2",
      name: "Dot (2x)",
      ascii_art: ".  .  .  .  .  .  .  .  .  .  .  .  .  .",
      def: [0, -.5]
    }, {
      id: "HIDDEN",
      name: "Hidden",
      ascii_art: "__ __ __ __ __ __ __ __ __ __ __ __ __ __",
      def: [.25, -.125]
    }, {
      id: "HIDDEN2",
      name: "Hidden (.5x)",
      ascii_art: "_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _",
      def: [.125, -.0625]
    }, {
      id: "HIDDENX2",
      name: "Hidden (2x)",
      ascii_art: "____ ____ ____ ____ ____ ____ ____",
      def: [.5, -.25]
    }, {
      id: "PHANTOM",
      name: "Phantom",
      ascii_art: "______  __  __  ______  __  __  ______",
      def: [1.25, -.25, .25, -.25, .25, -.25]
    }, {
      id: "PHANTOM2",
      name: "Phantom (.5x)",
      ascii_art: "___ _ _ ___ _ _ ___ _ _ ___ _ _",
      def: [.625, -.125, .125, -.125, .125, -.125]
    }, {
      id: "PHANTOMX2",
      name: "Phantom (2x)",
      ascii_art: "____________    ____    ____   _",
      def: [2.5, -.5, .5, -.5, .5, -.5]
    }, {
      id: "ACAD_ISO02W100",
      name: "ISO dash",
      ascii_art: "__ __ __ __ __ __ __ __ __ __ __ __ __",
      def: [12, -3],
      pen_width: 1,
      unit: "mm"
    }, {
      id: "ACAD_ISO03W100",
      name: "ISO dash space",
      ascii_art: "__    __    __    __    __    __",
      def: [12, -18],
      pen_width: 1,
      unit: "mm"
    }, {
      id: "ACAD_ISO04W100",
      name: "ISO long-dash dot",
      ascii_art: "____ . ____ . ____ . ____ . _",
      def: [24, -3, .5, -3],
      pen_width: 1,
      unit: "mm"
    }, {
      id: "ACAD_ISO05W100",
      name: "ISO long-dash double-dot",
      ascii_art: "____ .. ____ .. ____ .",
      def: [24, -3, .5, -3, .5, -3],
      pen_width: 1,
      unit: "mm"
    }, {
      id: "ACAD_ISO06W100",
      name: "ISO long-dash triple-dot",
      ascii_art: "____ ... ____ ... ____",
      def: [24, -3, .5, -3, .5, -3, .5, -3],
      pen_width: 1,
      unit: "mm"
    }, {
      id: "ACAD_ISO07W100",
      name: "ISO dot",
      ascii_art: ". . . . . . . . . . . . . . . . . . . .",
      def: [.5, -3],
      pen_width: 1,
      unit: "mm"
    }, {
      id: "ACAD_ISO08W100",
      name: "ISO long-dash short-dash",
      ascii_art: "____ __ ____ __ ____ _",
      def: [24, -3, 6, -3],
      pen_width: 1,
      unit: "mm"
    }, {
      id: "ACAD_ISO09W100",
      name: "ISO long-dash double-short-dash",
      ascii_art: "____ __ __ ____",
      def: [24, -3, 6, -3, 6, -3],
      pen_width: 1,
      unit: "mm"
    }, {
      id: "ACAD_ISO10W100",
      name: "ISO dash dot",
      ascii_art: "__ . __ . __ . __ . __ . __ . __ . ",
      def: [12, -3, .5, -3],
      pen_width: 1,
      unit: "mm"
    }, {
      id: "ACAD_ISO11W100",
      name: "ISO double-dash dot",
      ascii_art: "__ __ . __ __ . __ __ . __ _",
      def: [12, -3, 12, -3, .5, -3],
      pen_width: 1,
      unit: "mm"
    }, {
      id: "ACAD_ISO12W100",
      name: "ISO dash double-dot",
      ascii_art: "__ . . __ . . __ . . __ . .",
      def: [12, -3, .5, -3, .5, -3],
      pen_width: 1,
      unit: "mm"
    }, {
      id: "ACAD_ISO13W100",
      name: "ISO double-dash double-dot",
      ascii_art: "__ __ . . __ __ . . _",
      def: [12, -3, 12, -3, .5, -3, .5, -3],
      pen_width: 1,
      unit: "mm"
    }, {
      id: "ACAD_ISO14W100",
      name: "ISO dash triple-dot",
      ascii_art: "__ . . . __ . . . __ . . . _",
      def: [12, -3, .5, -3, .5, -3, .5, -3],
      pen_width: 1,
      unit: "mm"
    }, {
      id: "ACAD_ISO15W100",
      name: "ISO double-dash triple-dot",
      ascii_art: "__ __ . . . __ __ . .",
      def: [12, -3, 12, -3, .5, -3, .5, -3, .5, -3],
      pen_width: 1,
      unit: "mm"
    }, {
      id: "FENCELINE1",
      name: "Fenceline circle",
      ascii_art: "----0-----0----0-----0----0-----0--",
      def: [.25, -.1, ["CIRC1", "ltypeshp.shx", "x=-.1", "s=.1"], -.1, 1]
    }, {
      id: "FENCELINE2",
      name: "Fenceline square",
      ascii_art: "----[]-----[]----[]-----[]----[]---",
      def: [.25, -.1, ["BOX", "ltypeshp.shx", "x=-.1", "s=.1"], -.1, 1]
    }, {
      id: "TRACKS",
      name: "Tracks",
      ascii_art: "-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-",
      def: [.15, ["TRACK1", "ltypeshp.shx", "s=.25"], .15]
    }, {
      id: "BATTING",
      name: "Batting",
      ascii_art: "SSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSS",
      def: [1e-4, -.1, ["BAT", "ltypeshp.shx", "x=-.1", "s=.1"], -.2, ["BAT", "ltypeshp.shx", "r=180", "x=.1", "s=.1"], -.1]
    }, {
      id: "HOT_WATER_SUPPLY",
      name: "Hot water supply",
      ascii_art: "---- HW ---- HW ---- HW ----",
      def: [.5, -.2, ["HW", "STANDARD", "S=.1", "R=0.0", "X=-0.1", "Y=-.05"], -.2]
    }, {
      id: "GAS_LINE",
      name: "Gas line",
      ascii_art: "----GAS----GAS----GAS----GAS----GAS----GAS--",
      def: [.5, -.2, ["GAS", "STANDARD", "S=.1", "R=0.0", "X=-0.1", "Y=-.05"], -.25]
    }, {
      id: "ZIGZAG",
      name: "Zig zag",
      ascii_art: "/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/",
      def: [1e-4, -.2, ["ZIG", "ltypeshp.shx", "x=-.2", "s=.2"], -.4, ["ZIG", "ltypeshp.shx", "r=180", "x=.2", "s=.2"], -.2]
    }],
    o = function (e, t) {
      for (var n = e + 3, r = t, o = 1; o < n;) o *= 2;
      for (n = o, o = 1; o < r;) o *= 2;
      r = o;
      var a = new Uint8Array(n * r),
        s = new i.DataTexture(a, n, r, i.LuminanceFormat, i.UnsignedByteType, i.UVMapping, i.ClampToEdgeWrapping, i.ClampToEdgeWrapping, i.NearestFilter, i.NearestFilter, 0);
      return s.generateMipmaps = !1, s.flipY = !1, s.needsUpdate = !0, {
        tex: a,
        pw: n,
        ph: r,
        lineStyleTex: s
      }
    },
    a = function (e) {
      for (var t = e.length, n = 0, i = 0; i < t; i++) {
        var r = e[i];
        r.def.length > n && (n = r.def.length)
      }
      for (var a = o(n, t), s = a.tex, c = a.pw, u = a.lineStyleTex, h = 0; h < t; h++) {
        var d = e[h];
        l(d, s, h, c)
      }
      return u
    },
    s = function () {
      return a(r)
    },
    l = function (e, t, n, i) {
      for (var r = arguments.length > 4 && void 0 !== arguments[4] ? arguments[4] : 96, o = n * i, a = e.unit && "mm" == e.unit ? 1 / 25.4 : 1, s = e.pen_width || 0, l = e.def, c = 0, u = 0; u < l.length; u++) {
        var h = Math.abs(l[u]),
          d = h <= .5 * s;
        d && (h = 0);
        var f = 0 | h * r * a;
        c += f, t[o + u + 2] = f || 1
      }
      t[o] = c % 256, t[o + 1] = c / 256, t[o + l.length + 2] = 0
    }
}, function (e, t, n) {
  "use strict";
  n.r(t), n.d(t, "GetPrismMapUniforms", (function () {
    return r
  })), n.d(t, "GetPrismBumpMapUniforms", (function () {
    return o
  }));
  var i = n(0);

  function r(e) {
    var t = e + "_texMatrix",
      n = e + "_invert",
      r = {};
    return r[e] = {
      type: "t",
      value: null
    }, r[t] = {
      type: "m3",
      value: new i.Matrix3
    }, r[n] = {
      type: "i",
      value: 0
    }, r
  }

  function o(e) {
    var t = e + "_texMatrix",
      n = e + "_bumpScale",
      r = e + "_bumpmapType",
      o = {};
    return o[e] = {
      type: "t",
      value: null
    }, o[t] = {
      type: "m3",
      value: new i.Matrix3
    }, o[n] = {
      type: "v2",
      value: new i.Vector2(1, 1)
    }, o[r] = {
      type: "i",
      value: 0
    }, o
  }
}, function (e, t, n) {
  "use strict";
  n.r(t), n.d(t, "GeometryList", (function () {
    return a
  }));
  var i = n(44),
    r = n(3),
    o = n(0);

  function a(e, t, n, i) {
    this.geoms = [null], this.numGeomsInMemory = 0, this.geomMemory = 0, this.gpuMeshMemory = 0, this.gpuNumMeshes = 0, this.geomPolyCount = 0, this.instancePolyCount = 0, this.is2d = t, this.geomBoxes = i ? null : new Float32Array(6 * Math.max(1, e + 1)), this.numObjects = e, this.disableStreaming = !!n
  }
  a.prototype.getGeometry = function (e) {
    return this.geoms[e]
  }, a.prototype.chooseMemoryType = function (e, t, n, r) {
    var o = i.GPU_MEMORY_LIMIT,
      a = 2 * o,
      s = i.GPU_OBJECT_LIMIT;
    if (0 === o) return e.streamingDraw = !0, void(e.streamingIndex = !0);
    if (this.disableStreaming || r < o && n < s) e.streamingDraw = !1, e.streamingIndex = !1;
    else if (r >= a) e.streamingDraw = !0, e.streamingIndex = !0;
    else {
      (this.is2d ? 100001 : e.byteSize * (t || 1)) < 1e5 && (e.streamingDraw = !0, e.streamingIndex = !0)
    }
  }, a.prototype.addGeometry = function (e, t, n) {
    this.chooseMemoryType(e, t, this.gpuNumMeshes, this.gpuMeshMemory);
    var a = e.byteSize + i.GEOMETRY_OVERHEAD;
    if (e.streamingDraw || (Object(r.isMobileDevice)() && (a += e.byteSize), this.gpuMeshMemory += e.byteSize, this.gpuNumMeshes += 1), this.numGeomsInMemory++, (void 0 === n || n <= 0) && (n = this.geoms.length), this.geoms[n] = e, this.geomBoxes) {
      var s = this.geomBoxes.length / 6 | 0;
      if (s < this.geoms.length) {
        var l = 3 * this.geoms.length / 2 | 0,
          c = new Float32Array(6 * l);
        c.set(this.geomBoxes);
        var u = new o.Box3;
        for (u.makeEmpty(); s < l;) c[6 * s] = u.min.x, c[6 * s + 1] = u.min.y, c[6 * s + 2] = u.min.z, c[6 * s + 3] = u.max.x, c[6 * s + 4] = u.max.y, c[6 * s++ + 5] = u.max.z;
        this.geomBoxes = c
      }
      var h = e.boundingBox;
      h ? (this.geomBoxes[6 * n] = h.min.x, this.geomBoxes[6 * n + 1] = h.min.y, this.geomBoxes[6 * n + 2] = h.min.z, this.geomBoxes[6 * n + 3] = h.max.x, this.geomBoxes[6 * n + 4] = h.max.y, this.geomBoxes[6 * n + 5] = h.max.z) : (e.hash || console.error("Mesh without bbox and without hash should not be."), this.geomBoxes[6 * n] = -.5, this.geomBoxes[6 * n + 1] = -.5, this.geomBoxes[6 * n + 2] = -.5, this.geomBoxes[6 * n + 3] = .5, this.geomBoxes[6 * n + 4] = .5, this.geomBoxes[6 * n + 5] = .5)
    }
    i.memoryOptimizedLoading && !this.is2d && (e.boundingBox = null, e.boundingSphere = null), this.geomMemory += a;
    var d, f = e.attributes.index && e.attributes.index.array || e.ib,
      p = e.isLines ? 2 : 3;
    return d = f ? f.length / p : e.vb ? e.vb.length / (p * e.stride) : e.attributes.position.length / (3 * p), this.geomPolyCount += d, this.instancePolyCount += d * (t || 1), e.polyCount = d, e.instanceCount = t || 1, e.svfid = n, n
  }, a.prototype.removeGeometry = function (e, t) {
    var n = this.getGeometry(e);
    if (!n) return 0;
    var o = n.byteSize + i.GEOMETRY_OVERHEAD;
    return t && t.deallocateGeometry(n), n.streamingDraw || (Object(r.isMobileDevice)() && (o += n.byteSize), this.gpuMeshMemory -= n.byteSize, this.gpuNumMeshes -= 1), this.geoms[e] = null, this.geomMemory -= o, this.numGeomsInMemory--, this.geomPolyCount -= n.polyCount, this.instancePolyCount -= n.instanceCount * n.polyCount, o
  }, a.prototype.getModelBox = function (e, t) {
    if (this.geomBoxes)
      if (0 === e || this.geomBoxes.length / 6 <= e) t.makeEmpty();
      else {
        var n = 6 * e,
          i = this.geomBoxes;
        t.min.x = i[n], t.min.y = i[n + 1], t.min.z = i[n + 2], t.max.x = i[n + 3], t.max.y = i[n + 4], t.max.z = i[n + 5]
      }
    else e >= 1 && e <= this.numObjects ? (t.min.x = -.5, t.min.y = -.5, t.min.z = -.5, t.max.x = .5, t.max.y = .5, t.max.z = .5) : t.makeEmpty()
  }, a.prototype.dispose = function (e) {
    if (e)
      for (var t = 0, n = this.geoms.length; t < n; t++) this.geoms[t] && e.deallocateGeometry(this.geoms[t])
  }, a.prototype.printStats = function () {
    o.log("Total geometry size: " + this.geomMemory / 1048576 + " MB"), o.log("Number of meshes: " + (this.geoms.length - 1)), o.log("Num Meshes on GPU: " + this.gpuNumMeshes), o.log("Net GPU geom memory used: " + this.gpuMeshMemory)
  }
}, function (e, t, n) {
  "use strict";
  n.r(t), n.d(t, "Preferences", (function () {
    return o
  }));
  var i = n(2),
    r = n(1);

  function o(e, t) {
    this.setGlobalManager(e.globalManager);
    var n = this.getWindow();
    "string" == typeof t && (t = {
      prefix: t
    }), t || (t = {}), t.prefix || (t.prefix = "Autodesk.Viewing.Preferences."), t.hasOwnProperty("localStorage") || (t.localStorage = !0);
    var o = {},
      a = {},
      s = {},
      l = t.localStorage && function () {
        var e = t.prefix + "test";
        try {
          var i = n.localStorage;
          return i.setItem(e, "1"), i.removeItem(e), !0
        } catch (e) {
          return !1
        }
      }(),
      c = this;

    function u(e, i) {
      if (l) {
        if (c.hasTag(e, "no-storage")) return;
        var r = t.prefix + e;
        return void 0 !== i ? n.localStorage[r] = i : i = n.localStorage[r], i
      }
    }

    function h(e, t) {
      if ("string" == typeof e && "function" != typeof c[e]) {
        var n = u(e),
          i = !1;
        if (void 0 !== n) try {
          n = JSON.parse(n), i = !0
        } catch (e) {}
        c[e] = i ? n : t, s[e] = {}
      } else r.logger.log("Preferences: invalid name=" + e)
    }

    function d(e) {
      l && (e = t.prefix + e, delete localStorage[e])
    }
    e.addEventListener(i.PREF_CHANGED_EVENT, (function (e) {
      var t = a[e.name];
      t && t.forEach((function (t) {
        var n = t.changed;
        n && "function" == typeof n && n(e.value)
      }))
    })), e.addEventListener(i.PREF_RESET_EVENT, (function (e) {
      var t = a[e.name];
      t && t.forEach((function (t) {
        var n = t.reset;
        n && "function" == typeof n && n(e.value)
      }))
    })), this.load = function (e) {
      for (var t in o = e) o.hasOwnProperty(t) && h(t, o[t])
    }, this.addTags = function (e, t) {
      if (!t || !e) return !1;
      t = Array.isArray(t) ? t : [t];
      for (var n = 0; n < t.length; ++n) this.tag(t[n], e);
      return !0
    }, this.tag = function (e, t) {
      if (e) {
        t ? Array.isArray(t) || (t = [t]) : t = Object.keys(o);
        for (var n = 0; n < t.length; ++n) s[t[n]] && (s[t[n]][e] = !0)
      }
    }, this.untag = function (e, t) {
      if (e) {
        t ? Array.isArray(t) || (t = [t]) : t = Object.keys(o);
        for (var n = 0; n < t.length; ++n) s[t[n]] && (s[t[n]][e] = !1)
      }
    }, this.hasTag = function (e, t) {
      var n = s[e];
      return !!n && !0 === n[t]
    }, this.add = function (t, n, a, s) {
      return !o.hasOwnProperty(t) || s ? (this.setDefault(t, n), h(t, n), this.addTags(t, a), s && e.dispatchEvent({
        type: i.PREF_CHANGED_EVENT,
        name: t,
        value: this.get(t)
      }), !0) : (r.logger.log("Preferences: " + t + " already exists"), !1)
    }, this.setDefault = function (e, t) {
      e && !isNaN(t) && (o[e] = t)
    }, this.remove = function (e, t) {
      return !!o.hasOwnProperty(e) && (delete o[e], delete s[e], delete this[e], t && d(e), !0)
    }, this.clearWebStorage = function () {
      if (l) {
        var e = n.localStorage;
        for (var i in e) e.hasOwnProperty(i) && -1 !== i.indexOf(t.prefix) && delete localStorage[i]
      }
    }, this.reset = function (t, n) {
      for (var r in t && void 0 === n && (n = !0), o)
        if (o.hasOwnProperty(r)) {
          if (t) {
            var a = !!s[r][t];
            if (n && !a || !n && a) continue
          }
          this.set(r, o[r], !1) && e.dispatchEvent({
            type: i.PREF_RESET_EVENT,
            name: r,
            value: this[r]
          }), d(r)
        }
    }, this.get = function (e) {
      return this[e]
    }, this.set = function (t, n, r) {
      return this[t] !== n && (this[t] = n, u(t, n), (void 0 === r || r) && e.dispatchEvent({
        type: i.PREF_CHANGED_EVENT,
        name: t,
        value: n
      }), !0)
    }, this.dispatchEvent = function (t) {
      var n = this.get(t),
        r = i.PREF_CHANGED_EVENT;
      e.dispatchEvent({
        type: r,
        name: t,
        value: n
      })
    }, this.addListeners = function (e, t, n) {
      a[e] || (a[e] = []), n || (n = t), a[e].push({
        changed: t,
        reset: n
      })
    }, this.removeListeners = function (e, t, n) {
      if (void 0 !== a[e])
        if (t || n) {
          n || (n = t);
          for (var i = 0; i < a[e].length; ++i)
            if (a[e][i].changed === t && a[e][i].reset === n) {
              a[e].splice(i, 1);
              break
            }
        } else delete a[e]
    }, this.clearListeners = function () {
      a = {}
    }, this.setUseLocalStorage = function (e) {
      l = !!e
    }
  }
  n(12).GlobalManagerMixin.call(o.prototype)
}, function (e, t, n) {
  "use strict";
  n.r(t), n.d(t, "ProfileManager", (function () {
    return a
  }));
  var i = n(1),
    r = n(88);

  function o(e, t) {
    for (var n = 0; n < t.length; n++) {
      var i = t[n];
      i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(e, i.key, i)
    }
  }
  var a = function () {
    function e() {
      ! function (e, t) {
        if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
      }(this, e), this.registered = {};
      var t = Autodesk.Viewing.ProfileSettings;
      this.PROFILE_DEFAULT = new r.Profile(t.Default), this.registerProfile("default", this.PROFILE_DEFAULT), this.PROFILE_AEC = new r.Profile(t.AEC), this.registerProfile("rvt", this.PROFILE_AEC), this.registerProfile("ifc", this.PROFILE_AEC), this.PROFILE_NAVIS = new r.Profile(t.Navis), this.registerProfile("nwc", this.PROFILE_NAVIS), this.registerProfile("nwd", this.PROFILE_NAVIS), this.PROFILE_FLUENT = new r.Profile(t.Fluent), this.registerProfile("fluent", this.PROFILE_FLUENT)
    }
    var t, n, a;
    return t = e, (n = [{
      key: "registerProfile",
      value: function (e, t) {
        t ? (e = e || "default", this.registered[e] = t instanceof r.Profile ? t : new r.Profile(t)) : i.logger.log("ProfileManager: missing profileSettings when registering a profile.")
      }
    }, {
      key: "unregisterProfile",
      value: function (e) {
        e ? delete this.registered[e] : i.logger.log("ProfileManager: missing fileExt when unregistering a profile.")
      }
    }, {
      key: "getProfiles",
      value: function () {
        return Object.assign({}, this.registered)
      }
    }, {
      key: "getProfileOrDefault",
      value: function (e) {
        if (!e) return i.logger.log("ProfileManager: missing fileExt for getProfile. Returning the default Profile."), this.registered.default;
        var t = this.registered[e];
        return t || (i.logger.log("ProfileManager: No profile registered for ".concat(e, ". Returning the default Profile.")), this.registered.default)
      }
    }]) && o(t.prototype, n), a && o(t, a), e
  }()
}, function (e, t, n) {
  "use strict";
  n.r(t), n.d(t, "HotkeyManager", (function () {
    return i
  }));
  n(43);

  function i() {
    var e = [],
      t = [],
      n = [],
      i = [],
      r = ["hotkeys"];

    function o(e, t) {
      return e - t
    }

    function a() {
      var e, r = t.join();
      for (e = 0; e < i.length;) i[e].keys === r ? i.splice(e, 1) : e++;
      for (e = 0; e < n.length;) n[e].keys !== r ? n.splice(e, 1) : e++
    }

    function s(r, o) {
      var s = t.join(),
        l = t.slice(0),
        c = t.indexOf(o);
      c > -1 && t.splice(c, 1);
      var u = t.join(),
        h = t.slice(0);
      a();
      var d, f = [],
        p = [];
      for (c = e.length - 1; c >= 0; c--)(d = e[c]).keys === s && d.onRelease ? f.unshift(d) : d.keys === u && d.onPress && p.unshift(d);
      for (c = f.length - 1; c >= 0 && !(d = f[c]).onRelease(l); c--) d.options.tryUntilSuccess && i.unshift(d);
      for (c = p.length - 1; c >= 0 && !(d = p[c]).onPress(h); c--) d.options.tryUntilSuccess && n.unshift(d)
    }
    return {
      pushHotkeys: function (t, n, i) {
        if (e.some((function (e) {
            return e.id === t
          }))) return !1;
        for (var r = 0; r < n.length; r++) e.push({
          id: t,
          keys: n[r].keycodes.sort(o).join(),
          onPress: n[r].onPress,
          onRelease: n[r].onRelease,
          options: i || {}
        });
        return !0
      },
      popHotkeys: function (t) {
        for (var n = !1, i = e.length - 1; i >= 0; i--) e[i].id === t && (e.splice(i, 1), n = !0);
        return n
      },
      handleKeyDown: function (r, o) {
        if (-1 === t.indexOf(o)) {
          for (var s = t.join(), l = t.slice(0), c = 0; c < t.length && t[c] < o;) c++;
          t.splice(c, 0, o);
          var u = t.join(),
            h = t.slice(0);
          a();
          var d, f = [],
            p = [];
          for (c = e.length - 1; c >= 0; c--)(d = e[c]).keys === s && d.onRelease ? f.unshift(d) : d.keys === u && d.onPress && p.unshift(d);
          for (c = f.length - 1; c >= 0 && !(d = f[c]).onRelease(l); c--) d.options.tryUntilSuccess && i.unshift(d);
          for (c = p.length - 1; c >= 0 && !(d = p[c]).onPress(h); c--) d.options.tryUntilSuccess && n.unshift(d)
        }
      },
      handleKeyUp: s,
      handleBlur: function () {
        for (var e = t.length - 1; e >= 0; e--) s(0, t[e])
      },
      getName: function () {
        return r[0]
      },
      getNames: function () {
        return r
      },
      activate: function () {},
      deactivate: function () {},
      update: function () {
        var e, t;
        for (t = 0; t < i.length;) !0 === (e = i[t]).onRelease(e.keys.split()) ? i.splice(t, 1) : t++;
        for (t = 0; t < n.length;) !0 === (e = n[t]).onPress(e.keys.split()) ? n.splice(t, 1) : t++;
        return !1
      }
    }
  }
}, function (e, t, n) {
  "use strict";
  n.r(t), n.d(t, "ToolController", (function () {
    return l
  }));
  var i = n(3),
    r = n(1),
    o = n(2),
    a = n(43),
    s = n(12);

  function l(e, t, n, s, c) {
    this.setGlobalManager(t.globalManager), this.domElement = t.canvasWrap, this.selector = e.selector, this.autocam = n, this.lastClickX = -1, this.lastClickY = -1, this.scrollInputEnabled = !0;
    var u = -1 !== navigator.userAgent.search("Mac OS"),
      h = -1 !== navigator.userAgent.search("Firefox"),
      d = -1 !== navigator.userAgent.search("Chrome"),
      f = -1 !== navigator.userAgent.search("Safari") && !d,
      p = {},
      m = [],
      g = !1,
      v = -1,
      y = -1,
      b = !1,
      _ = null,
      x = !1,
      w = {},
      E = this;

    function A(e) {
      return e.getPriority instanceof Function && e.getPriority() || 0
    }

    function S(e, n) {
      return t.navigation.getUseLeftHandedInput() && 0 === e || h && 1 === e || u && !f && 0 === e && n.ctrlKey
    }
    this.__registerToolByName = function (e, t) {
      p[t] = e
    }, this.registerTool = function (e) {
      var t = e.getNames();
      if (!t || 0 === t.length) return r.logger.warn("Cannot register tool with no name."), !1;
      for (var n = !1, i = 0; i < t.length; ++i) "default" !== t[i] && (this.__registerToolByName(e, t[i]), n = !0);
      return e.utilities = s, e.controller = this, e.register && e.register(), n
    }, this.deregisterTool = function (e) {
      this.deactivateTool(e.getName());
      var t = e.getNames();
      if (!t || 0 === t.length) return !1;
      for (var n = t.length; --n >= 0;) this.__deregisterToolName(t[n]);
      return e.deregister && e.deregister(), e.utilities = null, e.controller = null, !0
    }, this.__deregisterToolName = function (e) {
      e in p && (! function (e) {
        for (var t = m.length; --t >= 0;) m[t].activeName === e && (p[e].deactivate(e), m.splice(t, 1))
      }(e), delete p[e])
    }, this.getTool = function (e) {
      return p[e]
    }, this.getActiveToolName = function () {
      var e = m.length;
      return e > 0 ? m[e - 1].activeName : "default"
    }, this.getActiveTool = function () {
      var e = m.length;
      return e > 0 ? m[e - 1] : p.default
    }, this.isToolActivated = function (e) {
      for (var t = 0; t < m.length; t++)
        if (m[t].activeName === e) return !0;
      return !1
    }, this.setToolActiveName = function (e) {
      var t = p[e];
      t && (t.activeName = e)
    }, this.rearrangeByPriorities = function () {
      m.sort((function (e, t) {
        return A(e) - A(t)
      }))
    }, this.activateTool = function (e) {
      if (g) return !1;
      var n = p[e];
      if (n) {
        void 0 === n.count && (n.count = 0);
        var i = null;
        m.length && "intercept" === m[m.length - 1].activeName && (i = m.pop());
        for (var a = 0, s = 0; s < m.length; s++) m[s] === n && n.count++, A(m[s]) <= A(n) && (a = s + 1);
        return n.activeName = e, 0 === n.count && (n.count++, m.splice(a, 0, n)), n.activate(e, t), i && m.push(i), t.dispatchEvent({
          type: o.TOOL_CHANGE_EVENT,
          toolName: e,
          tool: n,
          active: !0
        }), !0
      }
      return r.logger.warn("activateTool not found: " + e), !1
    }, this.deactivateTool = function (e) {
      if (g) return !1;
      for (var n = m.length; --n >= 0;)
        if (m[n].activeName === e) {
          var i = p[e];
          return 1 === i.count && m.splice(n, 1), i.count--, i.deactivate(e), t.dispatchEvent({
            type: o.TOOL_CHANGE_EVENT,
            toolName: e,
            tool: i,
            active: !1
          }), !0
        } return r.logger.warn("deactivateTool not found: " + e), !1
    }, this.getToolNames = function () {
      return Object.keys(p)
    }, this.setDefaultTool = function (e) {
      var t = this.getDefaultTool();
      return !(!e || e === t) && (this.__registerToolByName(e, "default"), t && t.deactivate("default"), e.activate("default"), !0)
    }, this.getDefaultTool = function () {
      return p.default
    }, this.setDefaultTool(c), this.setIsLocked = function (e) {
      var t = g;
      return g = !!e, t
    }, this.getIsLocked = function () {
      return g
    }, this.__checkCursor = function () {
      for (var e = null, n = m.length; --n >= 0;) {
        var i = m[n];
        if (i.getCursor && (e = i.getCursor())) break
      }
      e || (e = "auto"), _ != e && (t.canvas.style.cursor = e, _ = e)
    }, this.update = function (e) {
      this.__checkCursor();
      var n = !1;
      s && s.update() && (n = !0);
      for (var i = m.length; --i >= 0;) {
        var r = m[i];
        r.update && r.update(e) && (n = !0)
      }
      if (t.navigation.getCamera().dirty ? (t.navigation.updateCamera(), n = !0, this.cameraUpdated = !0) : this.cameraUpdated = !1, n) t.navigation.updateCamera(), this.moveDelay = Date.now() + 150;
      else if (0 !== this.moveDelay) {
        this.moveDelay - Date.now() > 0 ? n = !0 : this.moveDelay = 0
      }
      return n
    }, this.__clientToCanvasCoords = function (t, n, i) {
      var r = e.getCanvasBoundingClientRect(),
        o = r.width,
        a = r.height,
        s = t.clientX - r.left,
        l = t.clientY - r.top;
      t.canvasX = s, t.canvasY = l, t.normalizedX = s / o * 2 - 1, t.normalizedY = (a - l) / a * 2 - 1, n && n.set(s / o, l / a, 0), i && i.set(s, l)
    }, this.__invokeStack = function (e, t, n) {
      for (var i = m.length; --i >= 0;) {
        var r = m[i];
        if (r && r[e] && r[e](t, n)) return !0
      }
      var o = this.getDefaultTool();
      return !(!o[e] || !o[e](t, n))
    }, this.distributeEvent = function (e, t, n) {
      return this.__invokeStack(e, t, n)
    }, this.handleResize = function () {
      t.navigation.setScreenViewport(t.container.getBoundingClientRect());
      for (var e = m.length; --e >= 0;) {
        var n = m[e];
        n.handleResize && n.handleResize()
      }
    }, this.handleSingleClick = function (e) {
      var t = this.applyButtonMappings(e);
      this.lastClickX = e.clientX, this.lastClickY = e.clientY, this.__invokeStack("handleSingleClick", e, t) && (e.preventDefault(), e.stopPropagation())
    }, this.handleDoubleClick = function (e) {
      var t = this.applyButtonMappings(e);
      this.__invokeStack("handleDoubleClick", e, t) && (e.preventDefault(), e.stopPropagation())
    }, this.handleSingleTap = function (e) {
      this.lastClickX = e.canvasX, this.lastClickY = e.canvasY, this.__invokeStack("handleSingleTap", e) && (e.preventDefault(), e.stopPropagation())
    }, this.handleDoubleTap = function (e) {
      this.lastClickX = e.canvasX, this.lastClickY = e.canvasY, this.__invokeStack("handleDoubleTap", e) && (e.preventDefault(), e.stopPropagation())
    }, this.handleWheelInput = function (e, t) {
      this.__invokeStack("handleWheelInput", e, t) && (t.preventDefault(), t.stopPropagation())
    }, this.applyButtonMappings = function (e) {
      var n = e.button;
      return "buttons" in e && (e.firefoxSpoof ? n = 0 : !b || 1 & e.buttons ? 2 === n && 1 & e.buttons && (n = 0, e.firefoxSpoof = b = !0) : (e.firefoxSpoof = !0, b = !1, n = 0)), t.navigation.getUseLeftHandedInput() && (n = 0 === n ? 2 : 2 === n ? 0 : n), n
    }, this.applyKeyMappings = function (e) {
      switch (e.keyCode) {
        case a.KeyCode.LCOMMAND:
        case a.KeyCode.RCOMMAND:
        case a.KeyCode.COMMANDMOZ:
          return a.KeyCode.CONTROL;
        case a.KeyCode.EQUALSMOZ:
          return a.KeyCode.EQUALS;
        case a.KeyCode.DASHMOZNEW:
        case a.KeyCode.DASHMOZ:
          return a.KeyCode.DASH
      }
      return e.keyCode
    }, this.handleKeyDown = function (e) {
      var t = this.applyKeyMappings(e);
      t && this.__invokeStack("handleKeyDown", e, t) && (e.preventDefault(), e.stopPropagation())
    }, this.handleKeyUp = function (e) {
      var t = this.applyKeyMappings(e);
      t && this.__invokeStack("handleKeyUp", e, t) && (e.preventDefault(), e.stopPropagation())
    }, this.handleButtonDown = function (e, t) {
      this.__invokeStack("handleButtonDown", e, t) && (e.preventDefault(), e.stopPropagation())
    }, this.handleButtonUp = function (e, t) {
      this.__invokeStack("handleButtonUp", e, t) && (e.preventDefault(), e.stopPropagation())
    }, this.handleMouseMove = function (e) {
      this.__invokeStack("handleMouseMove", e) && (e.preventDefault(), e.stopPropagation())
    }, this.handleBlur = function (e) {
      this.__invokeStack("handleBlur", e) && (e.preventDefault(), e.stopPropagation())
    }, this.keydown = function (e) {
      if (!l._lastTouchedElement || E.domElement.contains(l._lastTouchedElement)) {
        var t = E.getDocument();
        if (!(t.activeElement instanceof HTMLInputElement || t.activeElement instanceof HTMLTextAreaElement || t.activeElement instanceof HTMLSelectElement)) {
          if (t.activeElement) {
            var n = t.activeElement.getAttribute("contenteditable");
            if ("true" === n || "" === n) return
          }
          E.handleKeyDown(e)
        }
      }
    }, this.keyup = function (e) {
      E.handleKeyUp(e)
    }, this.mousedown = function (e) {
      var t = E.getDocument();
      i.isIE11 && Object(i.inFullscreen)(t) || t.activeElement && t.activeElement.blur && t.activeElement.blur(), E.__clientToCanvasCoords(e);
      var n = E.applyButtonMappings(e);
      if (E.handleButtonDown(e, n), v = e.canvasX, y = e.canvasY, S(n, e)) {
        var r = w,
          o = void 0 !== r.time && e.timeStamp - r.time < 500,
          a = void 0 !== r.x && void 0 !== r.y && Math.abs(r.x - e.canvasX) <= 2 && Math.abs(r.y - e.canvasY) <= 2;
        (!o || !a || r.clickCount && 2 <= r.clickCount) && (r.clickCount = 0), r.clickCount ? 1 === r.clickCount && (r.clickCount = 2) : (r.clickCount = 1, r.x = e.canvasX, r.y = e.canvasY, r.time = e.timeStamp)
      }
      E.addDocumentEventListener("mouseup", (function e(t) {
        E.applyButtonMappings(t) === n && (E.removeDocumentEventListener("mouseup", e), E.mouseup(t))
      }), !1), E.registerWindowMouseMove()
    }, this.mousemove = function (e) {
      E.__clientToCanvasCoords(e);
      var t = v - e.canvasX,
        n = y - e.canvasY;
      (Math.abs(t) > 2 || Math.abs(n) > 2) && (v = -1, y = -1), E.handleMouseMove(e)
    }, this.mouseup = function (e) {
      E.__clientToCanvasCoords(e);
      var t = E.applyButtonMappings(e);
      E.handleButtonUp(e, t);
      var n = v - e.canvasX,
        i = y - e.canvasY;
      if (v = -1, y = -1, Math.abs(n) <= 2 && Math.abs(i) <= 2 && E.handleSingleClick(e), S(t, e)) {
        var r = w;
        2 === r.clickCount && (E.handleDoubleClick(e), r.clickCount = 0, r.x = void 0, r.y = void 0, r.time = void 0)
      }
      E.unregisterWindowMouseMove()
    }, this.doubleclick = function (e) {
      E.__clientToCanvasCoords(e), v = e.canvasX, y = e.canvasY, E.handleDoubleClick(e)
    }, this.mousewheel = function (e) {
      if (E.scrollInputEnabled) {
        E.__clientToCanvasCoords(e);
        var t = 0;
        if (e.wheelDelta) t = e.wheelDelta / 40;
        else if (e.detail) t = -e.detail;
        else if (e.deltaY) {
          var n = h ? 1 : 40;
          t = -e.deltaY / n
        }
        E.handleWheelInput(t, e)
      }
    }, this.blur = function (e) {
      E.handleBlur(e)
    }, this.mouseover = function (e) {
      l._lastTouchedElement = e.target
    }, this.registerWindowMouseMove = function () {
      E.addWindowEventListener("mousemove", E.mousemove), E.addWindowEventListener("mouseover", E.mouseover), E.domElement.removeEventListener("mousemove", E.mousemove), E.domElement.removeEventListener("mouseover", E.mouseover)
    }, this.unregisterWindowMouseMove = function () {
      E.removeWindowEventListener("mousemove", E.mousemove), E.removeWindowEventListener("mouseover", E.mouseover), E.domElement.addEventListener("mousemove", E.mousemove), E.domElement.addEventListener("mouseover", E.mouseover)
    }, this.enableMouseButtons = function (e) {
      e && !x ? (this.domElement.addEventListener("mousedown", this.mousedown), this.domElement.addEventListener("dblclick", this.doubleclick), this.domElement.addEventListener("mousemove", this.mousemove), this.domElement.addEventListener("mouseover", this.mouseover)) : !e && x && (this.domElement.removeEventListener("mousedown", this.mousedown), this.domElement.removeEventListener("dblclick", this.doubleclick), this.domElement.removeEventListener("mousemove", this.mousemove), this.domElement.removeEventListener("mouseover", this.mouseover));
      var t = x;
      return x = e, t
    }, this.domElement.addEventListener("mousewheel", this.mousewheel, !1), this.domElement.addEventListener("DOMMouseScroll", this.mousewheel, !1), E.addWindowEventListener("keydown", this.keydown, !1), E.addWindowEventListener("keyup", this.keyup, !1), E.addWindowEventListener("blur", this.blur, !1), this.uninitialize = function () {
      for (x && (this.domElement.removeEventListener("mousemove", this.mousemove), this.domElement.removeEventListener("mouseover", this.mouseover), this.removeWindowEventListener("mousemove", E.mousemove), this.removeWindowEventListener("mouseover", E.mouseover)), E.removeWindowEventListener("keydown", this.keydown), E.removeWindowEventListener("keyup", this.keyup), E.removeWindowEventListener("blur", this.blur), this.domElement = null, this.selector = null, this.autocam = null; m.length > 0;) this.deactivateTool(m[m.length - 1].activeName);
      p = null, m = null, E = null, s = null, t = null, e = null, l._lastTouchedElement = null
    }, this.set2DMode = function (e) {}, this.setAutocam = function (e) {}, this.syncCamera = function () {}, this.recordHomeView = function () {
      var e = t.navigation.getCamera();
      n.sync(e), n.setHomeViewFrom(e)
    }, this.setMouseWheelInputEnabled = function (e) {
      this.scrollInputEnabled = e
    }
  }
  Object.defineProperty(l, "_lastTouchedElement", {
    value: null,
    writable: !0
  }), s.GlobalManagerMixin.call(l.prototype)
}, function (e, t, n) {
  "use strict";
  n.r(t), n.d(t, "ViewingUtilities", (function () {
    return r
  }));
  var i = n(0);

  function r(e, t, n) {
    this.autocam = t, this.viewerImpl = e, this.setGlobalManager(this.viewerImpl.globalManager);
    var r = n.getCamera(),
      o = {},
      a = {};
    var s = new function (e) {
      var t = .6,
        n = 0,
        r = new i.SphereGeometry(1),
        o = new i.MeshPhongMaterial({
          color: 32512,
          ambient: 32512,
          opacity: t,
          transparent: !0
        }),
        a = new i.Mesh(r, o),
        s = e,
        l = 1;
      s.createOverlayScene("pivot"), a.visible = !1, this.shown = function () {
        return a.visible
      }, this.show = function (e, i, r) {
        a.scale.x = i * l, a.scale.y = i * l, a.scale.z = i * l, a.position.set(e.x, e.y, e.z), o.opacity = t, a.visible = !0, s.addOverlay("pivot", a), s.invalidate(!1, !1, !0), n = r ? Date.now() + 500 : 0
      }, this.hide = function () {
        a.visible && (a.visible = !1, s.removeOverlay("pivot", a), s.invalidate(!1, !1, !0), n = 0)
      }, this.fade = function () {
        if (n > 0) {
          var e = n - Date.now();
          if (e <= 0) return this.hide(), !0;
          var i = e / 500 * t;
          return o.opacity = i, !0
        }
        return !1
      }, this.fading = function () {
        return n > 0
      }, this.setSize = function (e) {
        l = e
      }, this.setColor = function (e, n) {
        o.color = new i.Color(e), void 0 !== n && (t = n, o.opacity = t)
      }
    }(this.viewerImpl);
    this.transitionView = function (e, i, o, a, s, l, c) {
      s = s || n.getWorldUpVector();
      var u = l ? function (e, t, n) {
        var i = t.clone().sub(e);
        if (0 === i.lengthSq()) return i.copy(n);
        var r = i.clone().cross(n);
        return 0 === r.lengthSq() && (n.z > n.y ? i.y -= 1e-4 : i.z -= 1e-4, r.crossVectors(i, n)), r.cross(i).normalize()
      }(e, i, s) : a;
      u || (u = r.up);
      var h = {
        position: e,
        center: i,
        pivot: c = c || i,
        fov: o,
        up: u,
        worldUp: s,
        isOrtho: !1 === r.isPerspective
      };
      t.goToView(h)
    }, this.goHome = function () {
      this.viewerImpl.track({
        name: "navigation/home",
        aggregate: "count"
      }), t.goHome()
    }, this.getHitPoint = function (e, t) {
      var i = this.viewerImpl.hitTestViewport(n.screenToViewport(e, t), !1);
      return i ? i.intersectPoint : null
    }, this.activatePivot = function (e) {
      if (this.viewerImpl.model && !this.viewerImpl.model.is2d()) {
        var t = r.isPerspective ? n.getPivotPlaneDistance() : n.getEyeVector().length(),
          o = n.getVerticalFov(),
          a = 2 * t * Math.tan(i.Math.degToRad(.5 * o)),
          l = n.getScreenViewport(),
          c = this.getWindow().devicePixelRatio || 1,
          u = 5 * a / (l.height * c);
        s.show(n.getPivotPoint(), u, e)
      }
    }, this.pivotActive = function (e, t) {
      t = t || !1, (e = e && !n.getIs2D()) || !s.shown() ? e && this.activatePivot(t) : s.hide()
    }, this.pivotUpdate = function () {
      s.shown() && s.fade() && this.viewerImpl.invalidate(!1, !1, !0)
    }, this.setPivotPoint = function (e, t, i) {
      n.setPivotPoint(e), t || n.setTarget(e), i && n.setPivotSetFlag(!0), this.setTemporaryPivot(null), n.getIs2D() || s.shown() && this.activatePivot(s.fading())
    }, this.savePivot = function (e) {
      e || (e = "default"), o[e] = n.getPivotPoint(), a[e] = n.getPivotSetFlag()
    }, this.restorePivot = function (e) {
      if (e || (e = "default"), o[e]) {
        var t = a[e];
        this.setPivotPoint(o[e], !0, t), t || n.setPivotSetFlag(!1), delete o[e], delete a[e]
      }
    }, this.setTemporaryPivot = function (e) {
      if (e) {
        var t = n.getPivotPoint(),
          i = n.getPivotSetFlag();
        this.setPivotPoint(e, !0, i), o.TEMP = t, a.TEMP = i
      } else delete o.TEMP, delete a.TEMP
    }, this.removeTemporaryPivot = function () {
      this.restorePivot("TEMP")
    }, this.setPivotSize = function (e) {
      s.setSize(e)
    }, this.setPivotColor = function (e, t) {
      s.setColor(e, t)
    }, this.getBoundingBox = function (e) {
      return this.viewerImpl.getFitBounds(e)
    }, this.fitToView = function (e) {
      this.viewerImpl.track({
        name: "navigation/fit",
        aggregate: "count"
      }), this.viewerImpl.fitToView(this.viewerImpl.selector.getAggregateSelection(), e), this.activatePivot(!0)
    }, this.update = function () {
      n.getRequestFitToView() && !n.getTransitionActive() && (n.setRequestFitToView(!1), this.fitToView()), n.getRequestHomeView() && !n.getTransitionActive() && (n.setRequestHomeView(!1), this.goHome());
      var e = n.getRequestTransition();
      return e && !n.getTransitionActive() && (n.setRequestTransition(!1), this.transitionView(e.position, e.coi, e.fov, e.up, e.worldUp, e.reorient, e.pivot)), !1
    }
  }
  n(12).GlobalManagerMixin.call(r.prototype)
}, function (e, t, n) {
  "use strict";
  n.r(t), n.d(t, "DefaultHandler", (function () {
    return i
  }));
  n(0);

  function i(e, t, n) {
    this.clickConfig = null, this.getNames = function () {
      return ["default"]
    }, this.getName = function () {
      return this.getNames()[0]
    }, this.setClickBehavior = function (e) {
      this.clickConfig = e
    }, this.getClickBehavior = function () {
      return this.clickConfig
    }, this.activate = function (e) {}, this.deactivate = function (e) {}, this.handleAction = function (t, i) {
      for (var r = 0; r < t.length; ++r) switch (t[r]) {
        case "selectOnly":
          e.selector && i && e.selector.setSelection([i.dbId], i.model);
          break;
        case "deselectAll":
          e.selector && e.selector.setSelection([]);
          break;
        case "selectToggle":
          e.selector && i && e.selector.toggleSelection(i.dbId, i.model);
          break;
        case "isolate":
          i && e.isolate(i.dbId);
          break;
        case "showAll":
          e.showAll();
          break;
        case "setCOI":
          i && i.intersectPoint && (n.setPivotPoint(i.intersectPoint, !0, !0), n.pivotActive(!0, !0));
          break;
        case "hide":
          i && e.hide(i.dbId);
          break;
        case "show":
          i && e.show(i.dbId);
          break;
        case "toggleVisibility":
          i && e.toggleVisibility(i.dbId);
          break;
        case "focus":
          e.selector && (i ? e.selector.setSelection([i.dbId], i.model) : e.selector.setSelection([]), n.fitToView())
      }
    }, this.handleSingleClick = function (t, i) {
      var r = t.ctrlKey || t.metaKey,
        o = t.shiftKey,
        a = t.altKey;
      if (0 === i) {
        var s = e.clientToViewport(t.canvasX, t.canvasY),
          l = "click";
        r && (l += "Ctrl"), o && (l += "Shift"), a && (l += "Alt");
        var c = (u = e.hitTestViewport(s, !1)) ? "onObject" : "offObject";
        if (this.clickConfig && this.clickConfig[l] && this.clickConfig[l][c]) return this.handleAction(this.clickConfig[l][c], u), !0
      } else if (1 === i && o && !a && !r) {
        var u;
        s = e.clientToViewport(t.canvasX, t.canvasY);
        if ((u = e.hitTestViewport(s, !1)) && u.intersectPoint) return n.setPivotPoint(u.intersectPoint, !0, !0), n.pivotActive(!0, !0), !0
      }
      return !1
    }, this.handleDoubleClick = function (i, r) {
      if (e.selector && 0 === r) {
        var o = e.clientToViewport(i.canvasX, i.canvasY),
          a = e.hitTestViewport(o, !1);
        return a ? e.selector.setSelection([a.dbId], a.model) : e.selector.clearSelection(), n.fitToView(), !0
      }
      return 1 === r && (t.fitBounds(!1, n.getBoundingBox(!0)), t.setPivotSetFlag(!1), !0)
    }, this.handleSingleTap = function (n) {
      if (n.clientX = n.pointers[0].clientX, n.clientY = n.pointers[0].clientY, e.api.triggerSingleTapCallback(n), n.hasOwnProperty("pointers") && 2 === n.pointers.length) return t.setRequestHomeView(!0), !0;
      if (e.selector) {
        var i = e.clientToViewport(n.canvasX, n.canvasY),
          r = e.hitTestViewport(i, !1);
        return r ? (e.selector.setSelection([r.dbId], r.model), e.api.triggerSelectionChanged([r.dbId])) : (e.selector.clearSelection(), e.api.triggerSelectionChanged(null)), !0
      }
      return !1
    }, this.handleDoubleTap = function (t) {
      t.clientX = t.pointers[0].clientX, t.clientY = t.pointers[0].clientY, e.api.triggerDoubleTapCallback(t);
      var i = this.handleSingleTap(t, 0);
      return n.fitToView(), i
    }, this.handlePressHold = function (t) {
      return "press" === t.type && (t.clientX = t.pointers[0].clientX, t.clientY = t.pointers[0].clientY, e.api.triggerContextMenu(t))
    }, this.handleGesture = function (t) {
      return !!t.type.contains("swipe") && (t.clientX = t.pointers[0].clientX, t.clientY = t.pointers[0].clientY, e.api.triggerSwipeCallback(t))
    }
  }
}, function (e, t, n) {
  "use strict";
  n.r(t), n.d(t, "InstanceTree", (function () {
    return o
  }));
  var i = n(109),
    r = n(1);

  function o(e, t, n) {
    this.nodeAccess = e, this.maxDepth = n, this.objectCount = t, this.numHidden = 0, this.numOff = 0, this.fragList = null
  }
  o.prototype.setFlagNode = function (e, t, n) {
    var i = this.nodeAccess.getNodeFlags(e);
    return !!(i & t) != n && (n ? this.nodeAccess.setNodeFlags(e, i | t) : this.nodeAccess.setNodeFlags(e, i & ~t), !0)
  }, o.prototype.setFlagGlobal = function (e, t) {
    var n = this.nodeAccess,
      i = 0,
      r = n.numNodes;
    if (t)
      for (; i < r; i++) n.setNodeFlags(i, n.getNodeFlags(i) | e);
    else
      for (var o = ~e; i < r; i++) n.setNodeFlags(i, n.getNodeFlags(i) & o)
  }, o.prototype.setNodeOff = function (e, t) {
    var n = this.setFlagNode(e, 1073741824, t);
    return n && (t ? this.numOff++ : this.numOff--), n
  }, o.prototype.isNodeOff = function (e) {
    return !!(1073741824 & this.nodeAccess.getNodeFlags(e))
  }, o.prototype.setNodeHidden = function (e, t) {
    var n = this.setFlagNode(e, 2147483648, t);
    return n && (t ? this.numHidden++ : this.numHidden--), n
  }, o.prototype.isNodeHidden = function (e) {
    return !!(2147483648 & this.nodeAccess.getNodeFlags(e))
  }, o.prototype.lockNodeSelection = function (e, t) {
    return this.setFlagNode(e, 16384, t)
  }, o.prototype.isNodeSelectionLocked = function (e) {
    return !!(16384 & this.nodeAccess.getNodeFlags(e))
  }, o.prototype.lockNodeVisible = function (e, t) {
    return this.setFlagNode(e, 4096, t)
  }, o.prototype.isNodeVisibleLocked = function (e) {
    return !!(4096 & this.nodeAccess.getNodeFlags(e))
  }, o.prototype.isNodeExplodeLocked = function (e) {
    return !!(8192 & this.nodeAccess.getNodeFlags(e))
  }, o.prototype.lockNodeExplode = function (e, t) {
    return this.setFlagNode(e, 8192, t)
  }, o.prototype.getNodeType = function (e) {
    return 7 & this.nodeAccess.getNodeFlags(e)
  }, o.prototype.isNodeSelectable = function (e) {
    return !(536870912 & this.nodeAccess.getNodeFlags(e))
  }, o.prototype.getNodeParentId = function (e) {
    return this.nodeAccess.getParentId(e)
  }, o.prototype.getRootId = function () {
    return this.nodeAccess.rootId
  }, o.prototype.getNodeName = function (e, t) {
    return this.nodeAccess.name(e, t)
  }, o.prototype.getChildCount = function (e) {
    return this.nodeAccess.getNumChildren(e)
  };
  var a = new Array(6);
  o.prototype.getNodeBox = function (e, t) {
    if (this.nodeAccess.nodeBoxes) this.nodeAccess.getNodeBox(e, t);
    else {
      var n = this.fragList;
      if (n) return t[0] = t[1] = t[2] = 1 / 0, t[3] = t[4] = t[5] = -1 / 0, void this.enumNodeFragments(e, (function (e) {
        n.getOriginalWorldBounds(e, a), t[0] = Math.min(t[0], a[0]), t[1] = Math.min(t[1], a[1]), t[2] = Math.min(t[2], a[2]), t[3] = Math.max(t[3], a[3]), t[4] = Math.max(t[4], a[4]), t[5] = Math.max(t[5], a[5])
      }), !0);
      r.logger.error("getNodeBox() requires fragBoxes or nodeBoxes")
    }
  }, o.prototype.getNodeIndex = function (e) {
    return this.nodeAccess.getIndex(e)
  }, o.prototype.enumNodeFragments = function (e, t, n) {
    var i;
    "number" == typeof e ? i = e : e && (i = e.dbId);
    var r = this;
    return function e(i) {
      var o = r.nodeAccess.enumNodeFragments(i, t);
      return o || (n && (o = r.enumNodeChildren(i, (function (t) {
        return e(t)
      }))) ? o : void 0)
    }(i)
  }, o.prototype.enumNodeChildren = function (e, t, n) {
    var i;
    "number" == typeof e ? i = e : e && (i = e.dbId);
    var r = this;
    if (n && t(i)) return i;
    return function e(i) {
      var o = r.nodeAccess.enumNodeChildren(i, (function (i) {
        return t(i) ? i : n ? e(i) : void 0
      }));
      if (o) return o
    }(i)
  }, o.prototype.findNodeForSelection = function (e, t) {
    if (t === i.SelectionMode.LEAF_OBJECT) return e;
    var n, r, o = e;
    if (t === i.SelectionMode.FIRST_OBJECT) {
      var a = [];
      for (n = e; n;) a.push(n), n = this.getNodeParentId(n);
      for (var s = a.length - 1; s >= 0; s--)
        if (5 !== (r = this.getNodeType(a[s])) && 2 !== r && 3 !== r) {
          o = a[s];
          break
        }
    } else if (t === i.SelectionMode.LAST_OBJECT)
      for (n = e; n;) {
        if (4 === (r = this.getNodeType(n))) {
          o = n;
          break
        }
        n = this.getNodeParentId(n)
      }
    return o
  }, o.prototype.setFragmentList = function (e) {
    this.fragList = e
  }
}, function (e, t, n) {
  "use strict";
  n.r(t), n.d(t, "FlatStringStorage", (function () {
    return o
  })), n.d(t, "InstanceTreeStorage", (function () {
    return a
  })), n.d(t, "InstanceTreeAccess", (function () {
    return l
  }));
  var i = n(96);

  function r(e, t) {
    for (var n = 0; n < t.length; n++) {
      var i = t[n];
      i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(e, i.key, i)
    }
  }
  var o = function () {
    function e(t) {
      ! function (e, t) {
        if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
      }(this, e), t ? (this.buf = t.buf, this.idx = t.idx, this.next = t.next) : (this.buf = new Uint8Array(256), this.next = 0, this.idx = [0])
    }
    var t, n, o;
    return t = e, (n = [{
      key: "allocate",
      value: function (e) {
        if (this.buf.length - this.next < e) {
          var t = Math.max(3 * this.buf.length / 2, this.buf.length + e),
            n = new Uint8Array(t);
          n.set(this.buf), this.buf = n
        }
      }
    }, {
      key: "add",
      value: function (e) {
        if (null == e) return 0;
        if (!e.length) return this.idx.push(this.next), this.idx.length - 1;
        var t = Object(i.b)(e, null);
        return this.allocate(t), this.next += Object(i.b)(e, this.buf, this.next), this.idx.push(this.next), this.idx.length - 1
      }
    }, {
      key: "get",
      value: function (e) {
        if (e) {
          var t = this.idx[e - 1],
            n = this.idx[e];
          return t === n ? "" : Object(i.d)(this.buf, t, n - t)
        }
      }
    }, {
      key: "flatten",
      value: function () {
        this.idx = s(this.idx)
      }
    }]) && r(t.prototype, n), o && r(t, o), e
  }();

  function a(e, t) {
    this.nodes = [], this.nextNode = 0, this.children = [], this.nextChild = 0, this.dbIdToIndex = {}, this.names = [], this.s2i = {}, this.strings = new o, this.nameSuffixes = [], this.getIndex(0)
  }

  function s(e) {
    var t = new Int32Array(e.length);
    return t.set(e), t
  }

  function l(e, t, n) {
    this.nodes = e.nodes, this.children = e.children, this.dbIdToIndex = e.dbIdToIndex, this.names = e.names, this.nameSuffixes = e.nameSuffixes, this.strings = new o(e.strings), this.rootId = t, this.numNodes = this.nodes.length / 5, this.visibleIds = null, this.nodeBoxes = n
  }
  a.prototype.getIndex = function (e) {
    var t = this.dbIdToIndex[e];
    if (t) return t;
    t = this.nextNode++, this.nodes.push(e);
    for (var n = 1; n < 5; n++) this.nodes.push(0);
    return this.dbIdToIndex[e] = t, t
  }, a.prototype.setNode = function (e, t, n, i, r, o) {
    var a, s = this.getIndex(e),
      l = 5 * s,
      c = r.length,
      u = o && o.length;
    for (u && (c += o.length), this.nodes[l + 1] = t, this.nodes[l + 2] = this.nextChild, this.nodes[l + 3] = u ? -c : c, this.nodes[l + 4] = i, a = 0; a < r.length; a++) this.children[this.nextChild++] = this.getIndex(r[a]);
    if (u)
      for (a = 0; a < o.length; a++) this.children[this.nextChild++] = -o[a] - 1;
    this.nextChild > this.children.length && console.error("Child index out of bounds -- should not happen"), this.processName(s, n)
  }, a.prototype.processName = function (e, t) {
    var n, i, r = -1,
      o = -1;
    if (t && (o = t.lastIndexOf("]"), -1 !== (r = t.lastIndexOf("[")) && -1 !== o || (r = t.lastIndexOf(":"), o = t.length)), r >= 0 && o > r) {
      n = t.slice(0, r + 1);
      var a = t.slice(r + 1, o);
      (i = parseInt(a, 10)) && i + "" === a || (n = t, i = 0)
    } else n = t, i = 0;
    var s = this.s2i[n];
    void 0 === s && (s = this.strings.add(n), this.s2i[n] = s), this.names[e] = s, this.nameSuffixes[e] = i
  }, a.prototype.flatten = function (e, t, n, i, r, o) {
    this.nodes = s(this.nodes), this.children = s(this.children), this.names = s(this.names), this.nameSuffixes = s(this.nameSuffixes), this.strings.flatten(), this.s2i = null
  }, l.prototype.getNumNodes = function () {
    return this.numNodes
  }, l.prototype.getIndex = function (e) {
    return this.dbIdToIndex[e]
  }, l.prototype.name = function (e, t) {
    var n, i = this.dbIdToIndex[e],
      r = this.strings.get(this.names[i]),
      o = this.nameSuffixes[i];
    o ? n = "[" === r.charAt(r.length - 1) ? r + o + "]" : r + o : n = r;
    return t && (this.childCounts || this.computeChildCounts(), this.childCounts[e] > 0 && (n += " (" + this.childCounts[e] + ")")), n
  }, l.prototype.getParentId = function (e) {
    var t = this.dbIdToIndex[e];
    return this.nodes[5 * t + 1]
  }, l.prototype.getNodeFlags = function (e) {
    var t = this.dbIdToIndex[e];
    return this.nodes[5 * t + 4]
  }, l.prototype.setNodeFlags = function (e, t) {
    var n = this.dbIdToIndex[e];
    n && (this.nodes[5 * n + 4] = t)
  }, l.prototype.getNumChildren = function (e) {
    var t = this.dbIdToIndex[e],
      n = this.nodes[5 * t + 3];
    if (n >= 0) return n;
    var i = this.nodes[5 * t + 2];
    n = Math.abs(n);
    for (var r = 0, o = 0; o < n; o++) {
      if (this.children[i + o] < 0) break;
      r++
    }
    return r
  }, l.prototype.getNumFragments = function (e) {
    var t = this.dbIdToIndex[e],
      n = this.nodes[5 * t + 3];
    if (n >= 0) return 0;
    for (var i = this.nodes[5 * t + 2], r = 0, o = (n = Math.abs(n)) - 1; o >= 0; o--) {
      if (this.children[i + o] >= 0) break;
      r++
    }
    return r
  }, l.prototype.getNodeBox = function (e, t) {
    for (var n = 6 * this.getIndex(e), i = 0; i < 6; i++) t[i] = this.nodeBoxes[n + i]
  }, l.prototype.getVisibleIds = function () {
    return this.visibleIds || (this.visibleIds = Object.keys(this.dbIdToIndex).map((function (e) {
      return parseInt(e)
    }))), this.visibleIds
  }, l.prototype.enumNodeChildren = function (e, t) {
    var n = this.dbIdToIndex[e],
      i = this.nodes[5 * n + 2],
      r = this.nodes[5 * n + 3];
    r = Math.abs(r);
    for (var o = 0; o < r; o++) {
      var a = this.children[i + o];
      if (a < 0) break;
      if (t(this.nodes[5 * a + 0], e, n)) return e
    }
  }, l.prototype.enumNodeFragments = function (e, t) {
    var n = this.dbIdToIndex[e],
      i = this.nodes[5 * n + 2],
      r = this.nodes[5 * n + 3];
    if (r < 0) {
      r = -r;
      for (var o = 0; o < r; o++) {
        var a = this.children[i + o];
        if (!(a > 0) && t(-a - 1, e, n)) return e
      }
    }
  }, l.prototype.computeBoxes = function (e) {
    this.nodeBoxes || (this.nodeBoxes = new Float32Array(6 * this.numNodes));
    var t = this,
      n = t.getIndex(t.rootId),
      i = t.nodeBoxes;

    function r(e, n, r) {
      var o = t.getIndex(e);
      a(e, o);
      for (var s = 6 * r, l = 6 * o, c = 0; c < 3; c++) i[s + c] > i[l + c] && (i[s + c] = i[l + c]), i[s + c + 3] < i[l + c + 3] && (i[s + c + 3] = i[l + c + 3])
    }

    function o(t, n, r) {
      for (var o = 6 * t, a = 6 * r, s = 0; s < 3; s++) i[a + s] > e[o + s] && (i[a + s] = e[o + s]), i[a + s + 3] < e[o + s + 3] && (i[a + s + 3] = e[o + s + 3])
    }

    function a(e, n) {
      var a = 6 * n;
      i[a] = i[a + 1] = i[a + 2] = 1 / 0, i[a + 3] = i[a + 4] = i[a + 5] = -1 / 0, t.getNumChildren(e) && t.enumNodeChildren(e, r, !0), t.getNumFragments(e) && t.enumNodeFragments(e, o)
    }
    a(t.rootId, n)
  }, l.prototype.computeChildCounts = function () {
    this.childCounts || (this.childCounts = new Uint32Array(this.numNodes));
    var e = this,
      t = (e.getIndex(e.rootId), e.childCounts);

    function n(n, r, o) {
      var a = i(n, e.getIndex(n));
      t[r] += a
    }

    function i(i, r) {
      var o = 0;
      return 4 === e.getNodeFlags(i) ? o = 1 : (e.getNumChildren(i) && e.enumNodeChildren(i, n, !0), e.getNumFragments(i) && (o = 1)), o + t[i]
    }
    i(e.rootId)
  }
}, function (e, t, n) {
  "use strict";
  n.r(t), n.d(t, "LiveReviewClient", (function () {
    return l
  })), n.d(t, "InteractionInterceptor", (function () {
    return c
  })), n.d(t, "ViewTransceiver", (function () {
    return u
  }));
  var i = n(42),
    r = n(250),
    o = n(172),
    a = n(2),
    s = n(12);

  function l(e) {
    this.viewer = e, this.setGlobalManager(e.globalManager), this.messageClient = null, this.presenceChannelId = null, this.viewtx = null, this.interceptor = null
  }

  function c(e) {
    this.getNames = function () {
      return ["intercept"]
    }, this.getName = function () {
      return "intercept"
    }, this.activate = function (e) {}, this.deactivate = function (e) {}, this.update = function (e) {
      return !1
    }, this.handleSingleClick = function (e, t) {
      return !1
    }, this.handleDoubleClick = function (e, t) {
      return !1
    }, this.handleSingleTap = function (e) {
      return !1
    }, this.handleDoubleTap = function (e, t) {
      return !1
    }, this.handleKeyDown = function (e, t) {
      return !1
    }, this.handleKeyUp = function (e, t) {
      return !1
    }, this.handleWheelInput = function (t) {
      return e.takeControl(), !1
    }, this.handleButtonDown = function (t, n) {
      return e.takeControl(), !1
    }, this.handleButtonUp = function (e, t) {
      return !1
    }, this.handleMouseMove = function (t) {
      return e.updatePointer(t), !1
    }, this.handleGesture = function (t) {
      return e.takeControl(), !1
    }, this.handleBlur = function (e) {
      return !1
    }, this.handleResize = function () {}
  }

  function u(e) {
    var t, n, i = this,
      r = this.viewer = null,
      s = !1,
      l = !1,
      c = !1,
      u = this.client = e,
      h = new THREE.Ray,
      d = null,
      f = !1;
    this.channelId = null;
    var p = {
      seedURN: !1,
      objectSet: !0,
      viewport: !1,
      cutplanes: !0,
      renderOptions: {
        environment: !1,
        ambientOcclusion: !1,
        toneMap: {
          exposure: !1
        },
        appearance: !1
      }
    };

    function m(e) {
      s = !0;
      var t = JSON.parse(e.data.msg);
      n.restoreState(t), r.impl.invalidate(!0, !1, !0), s = !1
    }

    function g(e) {
      return Math.round(1e3 * e) / 1e3
    }

    function v(e) {
      for (var t = 0; t < e.length; t++) e[t] = g(e[t])
    }

    function y(e) {
      var n = e.data.msg;
      !0 === n[1] || c || (n[0] != t && (t = n[0], e.data.lastInControl = n[0], i.dispatchEvent({
        type: "controlChange",
        channelId: i.channelId,
        data: e.data
      })), l = !1, r.navigation.setView((new THREE.Vector3).set(n[2], n[3], n[4]), (new THREE.Vector3).set(n[5], n[6], n[7])), r.navigation.setCameraUpVector((new THREE.Vector3).set(n[8], n[9], n[10])))
    }

    function b(n) {
      if (l || c) {
        var r = n.camera,
          o = [r.position.x, r.position.y, r.position.z, r.target.x, r.target.y, r.target.z, r.up.x, r.up.y, r.up.z];
        v(o), o.unshift(c), o.unshift(e.getLocalId()), u.sendMessage("camera", o, i.channelId), t != o[0] && (t = o[0], i.dispatchEvent({
          type: "controlChange",
          channelId: i.channelId,
          data: {
            lastInControl: t
          }
        }))
      }
    }

    function _(e, t, n) {
      var o = i.getDocument();
      e && !d && (d = o.createElement("div")).classList.add("collabPointer"), e && !f ? (r.container.appendChild(d), f = !0) : !e && f && (r.container.removeChild(d), f = !1), e && (d.style.left = t - 6 + "px", d.style.top = n - 6 + "px")
    }

    function x(e) {
      if (!l && !c) {
        var t = e.data.msg;
        h.origin.set(t[1], t[2], t[3]), h.direction.set(t[4], t[5], t[6]);
        var n = h.at(r.getCamera().near);
        n.project(r.getCamera()), _(!0, (n = r.impl.viewportToClient(n.x, n.y)).x, n.y)
      }
    }

    function w(t) {
      if (!s) {
        var r = n.getState(p);
        e.sendMessage("state", JSON.stringify(r), i.channelId)
      }
    }
    this.takeControl = function () {
      l = !0, _(!1)
    }, this.updatePointer = function (t) {
      ! function (t) {
        if (l) {
          var n = r.impl.clientToViewport(t.canvasX, t.canvasY);
          r.impl.viewportToRay(n, h);
          var o = [h.origin.x, h.origin.y, h.origin.z, h.direction.x, h.direction.y, h.direction.z];
          v(o), o.unshift(e.getLocalId()), u.sendMessage("pointer", o, i.channelId)
        }
      }(t)
    }, this.connectCamera = function (e) {
      c = !e
    }, this.attach = function (e, t) {
      r && this.detach(), this.viewer = r = e, n = new o.ViewerState(r), u.addEventListener("cameraChange", y), u.addEventListener("pointerMove", x), r.hasEventListener(a.CAMERA_CHANGE_EVENT, b) || r.addEventListener(a.CAMERA_CHANGE_EVENT, b), t || (u.addEventListener("viewerState", m), r.hasEventListener(a.SELECTION_CHANGED_EVENT, w) || (r.addEventListener(a.SELECTION_CHANGED_EVENT, w), r.addEventListener(a.ISOLATE_EVENT, w), r.addEventListener(a.HIDE_EVENT, w), r.addEventListener(a.SHOW_EVENT, w), r.addEventListener(a.EXPLODE_CHANGE_EVENT, w), r.addEventListener(a.LAYER_VISIBILITY_CHANGED_EVENT, w), r.addEventListener(a.CUTPLANES_CHANGE_EVENT, w)))
    }, this.detach = function () {
      _(!1), u && (u.removeEventListener("cameraChange", y), u.removeEventListener("viewerState", m)), r && (r.removeEventListener(a.CAMERA_CHANGE_EVENT, b), r.removeEventListener(a.SELECTION_CHANGED_EVENT, w), r.removeEventListener(a.ISOLATE_EVENT, w), r.removeEventListener(a.HIDE_EVENT, w), r.removeEventListener(a.SHOW_EVENT, w), r.removeEventListener(a.EXPLODE_CHANGE_EVENT, w), r.removeEventListener(a.LAYER_VISIBILITY_CHANGED_EVENT, w), r.removeEventListener(a.CUTPLANES_CHANGE_EVENT, w), this.viewer = r = null, n = null)
    }
  }
  s.GlobalManagerMixin.call(l.prototype), l.prototype.destroy = function () {
    this.leaveLiveReviewSession()
  }, l.prototype.joinLiveReviewSession = function (e) {
    this.messageClient || (this.messageClient = r.MessageClient.GetInstance()), this.presenceChannelId || (this.presenceChannelId = this.getWindow().location.host), this.messageClient.isConnected() || this.messageClient.connect(e), this.viewtx || (this.viewtx = new u(this.messageClient), this.viewtx.setGlobalManager(this.globalManager)), this.viewtx.channelId = e, this.viewtx.attach(this.viewer), this.messageClient.join(this.viewtx.channelId), this.interceptor || (this.interceptor = new c(this.viewtx)), this.viewer.toolController.registerTool(this.interceptor), this.viewer.toolController.activateTool(this.interceptor.getName())
  }, l.prototype.leaveLiveReviewSession = function () {
    this.viewtx && this.viewtx.detach(this.viewer), this.messageClient && this.messageClient.disconnect(), this.interceptor && this.viewer.toolController.deactivateTool(this.interceptor.getName()), this.viewtx = null, this.messageClient = null, this.interceptor = null
  }, u.prototype.constructor = u, i.EventDispatcher.prototype.apply(u.prototype), s.GlobalManagerMixin.call(u.prototype)
}, function (e, t, n) {
  "use strict";
  n.r(t), n.d(t, "setUserName", (function () {
    return c
  })), n.d(t, "MessageClient", (function () {
    return u
  }));
  var i, r = n(1),
    o = n(42),
    a = n(6),
    s = n(94),
    l = (n(3), {
      userName: ""
    });

  function c(e) {
    l.userName = e
  }

  function u(e, t) {
    var n, o = {
        camera: "cameraChange",
        pointer: "pointerMove",
        joystick: "joystick",
        state: "viewerState",
        txt: "chatReceived",
        joinok: "userListChange",
        sessionId: "connectSucceeded",
        joined: "userListChange",
        left: "userListChange",
        private: "privateMessage",
        join_error: "socketError"
      },
      a = null,
      s = Array.isArray(e) ? e : [e],
      c = 0,
      u = {},
      h = {},
      d = this;

    function f() {
      return l.userName && l.userName.length ? l.userName : a ? a.slice(0, 5) : "Unknown"
    }

    function p(e) {
      switch (e.type) {
        case "txt":
          ! function (e) {
            if (0 == e.msg.indexOf("/nick ")) {
              var t = d.getUserById(e.from, e.roomId),
                n = e.msg.slice(6);
              if (n.length && (t.name = n, t.id == a)) {
                var i = Autodesk.Viewing.i18n.translate("you");
                t.name += " (" + i + ")"
              }
              d.dispatchEvent({
                type: "userListChange",
                data: e,
                channelId: e.roomId
              })
            }
          }(e);
          break;
        case "joinok":
          ! function (e) {
            var t = h[e.roomId];
            r.logger.info("joined channel " + e.roomId), e.users && e.users.length ? t.users = e.users : t.users = [];
            for (var n = 0; n < t.users.length; n++) t.users[n].name && t.users[n].name.length || (t.users[n].name = t.users[n].id.slice(0, 5));
            var i = f(),
              o = Autodesk.Viewing.i18n.translate("you"),
              s = {
                id: a,
                name: i + " (" + o + ")",
                isSelf: !0,
                status: 0
              };
            t.userSet[a] || (t.users.push(s), t.userSet[a] = s);
            0 != s.id.indexOf(i) && d.sendChatMessage("/nick " + i, e.roomId)
          }(e);
          break;
        case "join_error":
          break;
        case "sessionId":
          r.logger.info("Connect successful, your id is: " + e.id), a = e.id;
          break;
        case "joined":
          e.userStatus = "joined",
            function (e) {
              e.user.name && e.user.name.length || (e.user.name = e.user.id.slice(0, 5));
              if (e.roomId) {
                var t = h[e.roomId];
                t ? (t.users.push(e.user), r.logger.info(e.user + " joined room " + e.roomId)) : r.logger.warn("Channel " + e.roomId + " does not exist for socket " + a)
              }
            }(e);
          break;
        case "left":
          e.userStatus = "left",
            function (e) {
              for (var t in r.logger.info(e.user + " left room " + e.room), h) {
                for (var n = h[t].users, i = -1, o = 0; o < n.length; o++)
                  if (n[o].id == e.user) {
                    i = o;
                    break
                  } - 1 != i && n.splice(i, 1), delete h[t].userSet[e.user]
              }
            }(e);
          break;
        case "camera":
        case "pointer":
          break;
        default:
          r.logger.log(e)
      }
      var t = e.roomId,
        n = {
          type: o[e.type],
          data: e,
          channelId: t
        };
      d.dispatchEvent(n)
    }

    function m(e) {
      c < s.length ? (r.logger.info("Connect failed, trying another server..."), n.disconnect(), n = null, c++, d.connect(d.sessionID)) : d.dispatchEvent({
        type: "socketError",
        data: e
      })
    }

    function g(e) {
      d.dispatchEvent({
        type: "socketError",
        data: e
      })
    }

    function v(e) {
      for (var t in c = 0, u) d.join(t)
    }
    this.connect = function (e) {
      if (!n) return void 0 !== window.WebSocket && (i || (i = "undefined" != typeof lmv_io ? lmv_io : io), this.sessionID = e, (n = i.connect(s[c] + "?sessionID=" + e, {
        path: t,
        forceNew: !0
      })).on("connect", v), n.on("message", p), n.on("connect_error", m), n.on("error", g), !0)
    }, this.join = function (e) {
      n && n.connected ? (delete u[e], h[e] = {
        id: e,
        users: [],
        userSet: {}
      }, n.emit("join", {
        roomId: e,
        name: f()
      })) : u[e] = 1
    }, this.disconnect = function () {
      n && (n.disconnect(), n = null, h = {}, a = null)
    }, this.sendMessage = function (e, t, i) {
      var r = {
        type: e,
        from: a,
        msg: t,
        roomId: i
      };
      n.emit("message", r)
    }, this.sendPrivateMessage = function (e, t) {
      var i = {
        type: "private",
        target: e,
        from: a,
        msg: t
      };
      n.emit("message", i)
    }, this.sendChatMessage = function (e, t) {
      var i = {
        type: "txt",
        from: a,
        msg: e,
        roomId: t
      };
      n.emit("message", i), p(i)
    }, this.getUserById = function (e, t) {
      for (var n = h[t].users, i = 0; i < n.length; i++)
        if (n[i].id == e) return n[i];
      return null
    }, this.getLocalId = function () {
      return a
    }, this.getChannelInfo = function (e) {
      return h[e]
    }, this.isConnected = function () {
      return n
    }
  }
  u.prototype.constructor = u, o.EventDispatcher.prototype.apply(u.prototype);
  var h = {};
  u.GetInstance = function (e, t) {
    e || (e = s.EnvironmentConfigurations[Object(a.getEnv)()].LMV.RTC), Array.isArray(e) || (e = [e]);
    var n = h[e[0]];
    return n || (n = new u(e, t), h[e[0]] = n, n)
  }
}, function (e, t, n) {
  "use strict";
  n.r(t), n.d(t, "OrbitDollyPanTool", (function () {
    return a
  }));
  var i = n(2),
    r = n(12),
    o = n(5);

  function a(e, t, n) {
    var r = this;
    this.setGlobalManager(t.globalManager);
    var a, s, l = this,
      c = n && n.hasOwnProperty("dollyDragScale") ? n.dollyDragScale : 100,
      u = -1 != navigator.userAgent.search("Mac OS"),
      h = n && n.disablePinchRotation,
      d = t.navigation,
      f = d.getCamera(),
      p = ["orbit", "freeorbit", "dolly", "pan"],
      m = p[0],
      g = [m],
      v = m,
      y = null,
      b = 1,
      _ = 0,
      x = 0,
      w = 0,
      E = 0,
      A = !0,
      S = !1,
      M = null,
      T = !1,
      C = 33,
      P = 34,
      L = 37,
      D = 38,
      I = 39,
      R = 40,
      O = 48,
      k = 187,
      N = 189,
      F = -5,
      U = new THREE.Vector3,
      V = new THREE.Vector3,
      B = new THREE.Vector2,
      z = new THREE.Vector2,
      G = new THREE.Vector2,
      H = new THREE.Vector2,
      W = new THREE.Vector3,
      j = new THREE.Vector3,
      q = new THREE.Vector3,
      X = new THREE.Vector3,
      Y = new THREE.Vector3,
      K = new THREE.Vector3,
      Q = new THREE.Vector3,
      Z = new THREE.Vector3,
      J = new THREE.Vector3,
      $ = new THREE.Quaternion,
      ee = new THREE.Plane,
      te = [!1, !1, !1, !1, !1, !1],
      ne = {
        SHIFT: 0,
        ALT: 0,
        CONTROL: 0,
        SPACE: 0
      };
    this.active = !1;
    var ie, re = function (t) {
        e.renderer().rolloverObjectId(0, null, 0)
      },
      oe = n && n.hasOwnProperty("dollyScrollScale") ? n.dollyScrollScale : .6,
      ae = 1,
      se = 5,
      le = .025;

    function ce(e, t) {
      var n = l.getWindow(),
        i = 0,
        r = 0,
        o = n.innerWidth,
        a = n.innerHeight;
      Z.set((e - .5 * o - i) / (.5 * o), (.5 * a + r - t) / (.5 * a), 0);
      var s = Z.length();
      return s > 1 ? Z.normalize() : Z.z = Math.sqrt(1 - s * s), X.copy(f.position).sub(f.pivot), K.copy(f.up).setLength(Z.y), K.add(Q.copy(f.up).cross(X).setLength(Z.x)), K.add(X.setLength(Z.z)), K
    }
    this.getNames = function () {
      return p
    }, this.getName = function () {
      return p[0]
    }, this.activate = function (n) {
      this.active = !0, g.push(n), v = n, A = t.prefs.get(o.Prefs3D.ENABLE_CUSTOM_ORBIT_TOOL_CURSOR), t.prefs.addListeners(o.Prefs3D.ENABLE_CUSTOM_ORBIT_TOOL_CURSOR, this._onPrefCursor), e.canvas.addEventListener("mouseout", re), t.addEventListener(i.ESCAPE_EVENT, this.handleBlur)
    }, this.deactivate = function (n) {
      this.active = !1, t.prefs.removeListeners(o.Prefs3D.ENABLE_CUSTOM_ORBIT_TOOL_CURSOR, this._onPrefCursor);
      var r = g.length - 1;
      r > 0 && g[r] === n && (g.pop(), v = g[r - 1]), e.canvas.removeEventListener("mouseout", re), t.removeEventListener(i.ESCAPE_EVENT, this.handleBlur)
    }, this.isActive = function () {
      return this.active
    }, this.adjustDollyLookSpeed = function (e) {
      0 === e ? (le = .025, se = 5) : ((le *= e > 0 ? 1.1 : .9) < 1e-6 && (le = 1e-6), (se *= e > 0 ? 1.1 : .9) < 1e-6 && (se = 1e-6))
    }, this.getDollySpeed = function (e, t) {
      var n;
      if (!d.getZoomTowardsPivot() && !d.getWheelSetsPivot() || f.isPerspective) {
        var i = d.getEyeVector(),
          r = d.getPosition();
        o = e.clone().sub(r).dot(i.normalize()) * le;
        n = Math.abs(o) < .01 ? o < 0 ? -.01 : .01 : o
      } else {
        var o = f.orthoScale * le;
        n = Math.abs(o) < 5e-4 && t ? 0 : o
      }
      return n
    }, this.getDollyScrollScale = function () {
      return oe
    }, this.setDollyScrollScale = function (e) {
      oe = e
    }, this.getDollyDragScale = function () {
      return c
    }, this.setDollyDragScale = function (e) {
      c = e
    }, this.getLookSpeed = function () {
      return se
    }, this.coiIsActive = function () {
      return d.getPivotSetFlag() && d.isPointVisible(d.getPivotPoint())
    }, this.adjustSpeed = function (e) {
      this.adjustDollyLookSpeed(e), this.utilities.autocam && (this.utilities.autocam.orbitMultiplier = this.getLookSpeed())
    }, this.getTriggeredMode = function () {
      return 1 === F && ne.SHIFT ? g[1] : (e = ne, 2 === F && e.SHIFT && !e.ALT && !e.CONTROL || 2 === F && e.ALT && !e.SHIFT && !e.CONTROL || "dolly" === v && !e.ALT && "pinch" !== y || 0 !== W.z ? function () {
        var e = ne;
        return !(e.CONTROL || e.ALT || e.SHIFT || 2 !== F && 1 !== F)
      }() ? "pan" : "dolly" : function () {
        var e = ne;
        return 2 === F && !e.SHIFT && !(e.ALT ^ e.CONTROL) || 2 === F && e.SHIFT && e.CONTROL || 1 === F && !e.SHIFT && !e.CONTROL || 1 === F && e.ALT || 1 === F && e.CONTROL && !e.ALT || 0 === F && e.SHIFT && !e.CONTROL && !e.ALT || "pan" === v && 1 !== F && !e.ALT && !("pinch" === y) || e.SPACE
      }() ? "pan" : "pan" === y || "pinch" === y ? "dollypan" : v);
      var e
    }, this.initTracking = function (e, t) {
      var n;
      if (f.isPerspective) {
        n = .5 * (f.near + f.far);
        var i = this.utilities.getHitPoint(e, t),
          r = d.getPosition();
        if (i && i.sub) {
          var o = i.sub(r),
            a = d.getEyeVector().normalize();
          n = Math.abs(a.dot(o))
        } else {
          if (d.getPivotSetFlag() && d.isPointVisible(d.getPivotPoint())) {
            var s = d.getPivotPlaneDistance();
            s > .01 && (n = s)
          }
        }
      } else n = d.getEyeVector().length();
      ae = n
    }, this.initOrbit = function () {
      this.utilities.setTemporaryPivot(f.isPerspective && d.getPivotPoint().sub(d.getPosition()).dot(d.getEyeVector()) <= 0 ? d.getTarget() : null)
    }, this.getActiveMode = function () {
      return m
    }, this.getCursor = function () {
      if (!A) return null;
      switch (m) {
        case "freeorbit":
        case "orbit":
          return "url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAMAAADXqc3KAAAAt1BMVEUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD///8AAAAzMzP6+vri4uISEhKKioqtra2dnZ2EhIR9fX10dHRkZGQdHR3t7e3Hx8e5ubm1tbWoqKhWVlZKSko4ODgICAjv7+/o6OjMzMyxsbFOTk4pKSkXFxcEBAT29vbW1tZ6enpISEgLCwvhzeX+AAAAGXRSTlMANRO0nHRJHfnskIxQRKh89syDVwTWZjEJxPFEswAAAOFJREFUKM+1j+lygkAQhIflEAJe0Rw9u4CCeKKoSTTX+z9XoMJWWeX+ssrvZ3f19DQ5zOw/0DUMQPlmQ72bE2adBp8/Rp3CQUi3ILx+bxj4fjDs9T1Bmo6bbPPN8aDU4bjJt4nb+de789kSFyxn826jW3ICLNZZKU8nWWbrBTCRVm04U8TpjquRFf1Go0d7l8aYOrUR7FGEFr1S9LGymwthgX2gE/Kl0cHPOtF2xOWZ5QpIC93RflW4InkDoPRXesd5LJIMQPzV7tCMa7f6BvhJL79AVDmYTNQ1NhnxbI/uwB8H5Bjd4zQPBAAAAABJRU5ErkJggg==), auto";
        case "dolly":
          return "url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAMAAADXqc3KAAAAgVBMVEUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD///8mJiYAAADNzc2/v7+fn59paWlPT08MDAwICAj6+vqpqak7Ozv29vby8vLp6em2traAgIBkZGRZWVlAQEAaGhpISEgkS7tbAAAAFHRSTlMAOvhpZD8mkQWegMy9qY1YVE01EYiqlE0AAADZSURBVCjPbY9ZloMgEAAbEbfsmRZZXbJn7n/AAX2RQVN/VD26AXLOeZLDGo6IbfI9tHq8cdxuj1HwvgCoaiHqKoRk+M3hB9jueUW8PnfsE/bJ3vms7nCkq7NoE3s99AXxoh8vFoXCpknrn5faAuJCenT0xPkYqnxQFJaU0gdZrsKm8aHZrAIffBj40mc1jsTfIJRWegq6opTMvlfqLqYg7kr1ZB7jFgeaMC59N//8O4WZ1IiPF8b5wMHcJn8zB4g4mc77zpxgAbMSUVoGK4iV0hL4wrksz+H0Bw5+E+HrniDQAAAAAElFTkSuQmCC), auto";
        case "pan":
          return "url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAMAAADXqc3KAAABHVBMVEUAAABPTk4AAAAAAAAJCQkRERE0MzQQEBAODg4QEBB4d3dbWlo9PDw/Pj4vLy8sLCwZGBgWFhYcHBwKCgoSEhIAAAAKCgoICAgKCgoQEBAODg4EBAQICAgPDw8REREMDAx2dnY0NDQvLy9QUFAaGhomJSYjIyM7OjokJCQNDA0mJiYNDQ0AAAAUFBQJCQkQEBAEBAQNDQ0PDw8VFRX///+amJkAAAD5+fnz8/PKycn9/f339vbi4eLR0dDNzMyAgIB8e3xycHH7+/vw7+/o6OjX1ta7urq4t7iwsLCnp6eioqKbmppva21OTk74+Pjl5eXc3Nzb29vLy8vDw8PDwsKrqqqdnZ2WlpaSkpKTkZKMiouEg4NkZGRISEgxLzBpgbsEAAAANHRSTlMA+fiQXgngKSYG/vX17uvBuqackpCNg3BpUkpAPBwTDvj18+vl0s/NwrOwoZZ+TDg4NBkBGrzX8QAAAP5JREFUKM99j9Vuw0AQRdeuKZyGkyZNmbnXDLHDVGb8/8/oy7paK1bO0+oc7WiGnGiaxq+QRTQAOh8f9Jv4H/Ge8PZPrCdlvkxfYluUT2WyyCq3mZ7unwlKVLcqOzA/Mf71j0TWJ/Ym6rPeca05Ni4iIevYc7yoUD2zQFhq71BdI9nvBeBabFDSPe8DswlUc1Riw3VxbH0NHBUPQ0jrbDnPYDjALQBMq9E7nkC5y7VDKTZlUg8Q0lmjvl74zlYErgvKa42GPKf3/a0kQmYCDY1SYMDosqMoiWrGwz/uAbNvc/fNon4kXRKGq+PUo2Mb96afV0iUxqGU2s4VBbKUP65NL/LKF+7ZAAAAAElFTkSuQmCC), auto"
      }
      return null
    }, this.getMotionDelta = function (e, t) {
      var n = d && d.getReverseZoomDirection() ? -1.5 : 1.5;
      u && (n *= -1), te[0] && (V.x += .01, G.x += 20), te[1] && (V.x -= .01, G.x -= 20), te[2] && (V.y += .01, G.y += 20), te[3] && (V.y -= .01, G.y -= 20), te[4] && (V.z += n), te[5] && (V.z -= n);
      var i = V.x - U.x,
        r = V.y - U.y,
        o = V.z - U.z;
      Math.abs(i) < .001 && (i = 0), Math.abs(r) < .001 && (r = 0), Math.abs(o) < .001 && (o = 0), e.set(i, r, o), t && t.set(G.x - z.x, G.y - z.y)
    }, this.stepMotionDelta = function (e, t) {
      t ? (U.x += .6 * e.x, U.y += .6 * e.y, U.z += .6 * e.z) : U.copy(V), z.copy(G)
    }, this.getFitBounds = function () {
      return this.utilities.viewerImpl.zoomBoundsChanged && (ie = this.utilities.viewerImpl.getVisibleBounds(!0), this.utilities.viewerImpl.zoomBoundsChanged = !1), ie
    }, this.update = function () {
      var e, n = !1,
        i = !1;
      this.getMotionDelta(W, H);
      var r = W.x,
        o = W.y,
        l = W.z;
      if (S || this.checkInteractionMode(), (S = F > -1) && this.controller.setIsLocked(!0), 0 !== r || 0 !== o || 0 !== l) {
        switch (m) {
          case "orbit":
            this.utilities.autocam && this.utilities.autocam.startState && (H.x = -H.x, M && this.utilities.autocam.orbit(G, M, H.multiplyScalar(2), this.utilities.autocam.startState));
            break;
          case "freeorbit":
            ! function () {
              if (d.isActionEnabled("orbit")) {
                X.subVectors(f.position, f.pivot), Y.subVectors(f.position, f.target);
                var e = Y.length();
                Y.normalize();
                var t = Math.acos(j.dot(q) / j.length() / q.length());
                t && (t *= 2, J.crossVectors(j, q).normalize(), $.setFromAxisAngle(J, -t), X.applyQuaternion($), f.up.applyQuaternion($), q.applyQuaternion($), Y.applyQuaternion($), j.copy(q)), f.position.addVectors(f.pivot, X), f.target.subVectors(f.position, Y.multiplyScalar(e)), f.dirty = !0
              }
            }();
            break;
          case "dolly":
            var u, g = new THREE.Vector2;
            l *= oe, F >= 0 ? (o = -o, l = Math.abs(r) > Math.abs(o) ? r : o, d.getReverseZoomDirection() && (l *= -1), l *= c, r = 0, o = 0, g = d.viewportToScreen(0, 0)) : (e = d.getScreenViewport(), a && s ? (g.x = a / e.width, g.y = s / e.height) : g = d.viewportToScreen(0, 0)), !d.getIs2D() && d.getZoomTowardsPivot() ? this.coiIsActive() ? u = d.getPivotPoint() : (g = d.viewportToScreen(0, 0), u = d.getWorldPoint(g.x, g.y)) : u = d.getWorldPoint(g.x, g.y), d.dollyFromPoint(l * this.getDollySpeed(u, l < 0), u, this.getFitBounds());
            break;
          case "pan":
            d.panRelative(-r, o, ae);
            break;
          case "dollypan":
            0 === r && 0 === o || d.panRelative(-r, o, ae), e = d.getScreenViewport(), u = d.getWorldPoint(a / e.width, s / e.height);
            var v = d.getPosition(),
              E = d.getIs2D() ? v.sub(u).length() : ae,
              A = (_ / x - 1) * E;
            d.dollyFromPoint(A, u, this.getFitBounds());
            var C = new THREE.Vector3,
              P = new THREE.Quaternion,
              L = d.getCameraUpVector(),
              D = C.copy(f.position).sub(f.target).normalize();
            P.setFromAxisAngle(D, 1.2 * w), L.applyQuaternion(P), d.getIs2D() || h && ("pinch" === y || "pan" === y) || d.setCameraUpVector(L), _ = x, b, ae = E + A
        }
        i = !0
      }
      return this.stepMotionDelta(W, "pan" !== m && "dollypan" !== m), -1 === F && Math.abs(l) < .01 && (this.interactionEnd(-1), V.z = 0, U.z = 0, n = !0, i = !0), (ne.SHIFT || ne.ALT) && -1 !== p.indexOf(t.getActiveNavigationTool()) && (i = !0), !T && (n || F > -5) && (F > -1 && (U.copy(V), this.utilities.removeTemporaryPivot()), this.utilities.autocam.endInteraction(), F = -5, S && this.controller.setIsLocked(!1), S = !1, M = null, y = null), i ? this.utilities.pivotActive(d.getPivotSetFlag(), F <= -1) : this.utilities.pivotUpdate(), f.dirty
    }, this.checkInteractionMode = function () {
      var e = this.getTriggeredMode();
      e !== m && ("pan" === (m = e) && F > -1 || "dollypan" === m) && this.initTracking(U.x, U.y)
    }, this.interactionStart = function (e, t) {
      (t || e > F) && (F = e, T = !0, e > -1 && ("pan" === m && this.initTracking(U.x, U.y), "orbit" === m && this.initOrbit()), !d.getSelectionSetsPivot() && this.utilities.pivotActive(d.getPivotSetFlag(), -1 === e), this.utilities.autocam && (this.utilities.autocam.sync(f), this.utilities.autocam.startInteraction(z.x, z.y), M = z.clone()))
    }, this.interactionCheck = function () {
      (te[0] || te[1] || te[2] || te[3] || te[4] || te[5] || ne.SHIFT || ne.CONTROL || ne.ALT || ne.SPACE) && this.interactionStart(-4, !0)
    }, this.interactionEnd = function (e) {
      e === F && (-1 !== e && this.utilities.pivotActive(!1), T = !1)
    }, this.isInteractionActive = function () {
      return T
    }, this.handleWheelInput = function (t, n) {
      if (a = n.canvasX, s = n.canvasY, this.isDragging) return !1;
      if (d.getIs2D()) {
        var i = d.getScreenViewport(),
          r = e.intersectGround(a + i.width, s + i.height);
        this.utilities.setPivotPoint(r, !0, !0)
      } else if (d.getWheelSetsPivot()) {
        var o = e.hitTest(a, s, !0);
        if (o && o.intersectPoint) this.utilities.setPivotPoint(o.intersectPoint, !0, !0);
        else {
          var l = d.getPivotPoint(),
            c = d.getEyeVector().normalize(),
            u = -l.dot(c),
            h = e.viewportToRay(e.clientToViewport(a, s));
          ee.set(c, u);
          var f = h.intersectPlane(ee);
          this.utilities.setPivotPoint(f, !0, !0)
        }
      }
      return d.getReverseZoomDirection() && (t *= -1), V.z += t, 0 != t && this.interactionStart(-1), !0
    }, this.resetKeys = function () {
      this.autoMove(-1, !1), ne.SHIFT = 0, ne.CONTROL = 0, ne.ALT = 0, ne.SPACE = 0
    }, this.autoMove = function (e, t) {
      t && this.isDragging || (e < 0 ? te[0] = te[1] = te[2] = te[3] = te[4] = te[5] = t : te[e] = t, t || this.interactionEnd(-4), this.interactionCheck())
    }, this.updateModifierState = function (e) {
      ne.CONTROL = u && e.metaKey || e.ctrlKey ? 1 : 0, ne.SHIFT = e.shiftKey ? 1 : 0, ne.ALT = e.altKey ? 1 : 0
    }, this.handleKeyDown = function (e, t) {
      this.updateModifierState(e);
      var n = !1;
      switch (t) {
        case k:
          this.adjustSpeed(1), n = !0;
          break;
        case N:
          this.adjustSpeed(-1), n = !0;
          break;
        case O:
          this.adjustSpeed(0), n = !0;
          break;
        case L:
          this.autoMove(0, !0), n = !0;
          break;
        case I:
          this.autoMove(1, !0), n = !0;
          break;
        case C:
          this.autoMove(2, !0), n = !0;
          break;
        case P:
          this.autoMove(3, !0), n = !0;
          break;
        case D:
          this.autoMove(4, !0), n = !0;
          break;
        case R:
          this.autoMove(5, !0), n = !0;
          break;
        default:
          return !1
      }
      return this.isDragging || this.interactionStart(-4), n
    }, this.handleKeyUp = function (e, t) {
      this.updateModifierState(e);
      var n = !1;
      switch (t) {
        case L:
          this.autoMove(0, !1), n = !0;
          break;
        case I:
          this.autoMove(1, !1), n = !0;
          break;
        case C:
          this.autoMove(2, !1), n = !0;
          break;
        case P:
          this.autoMove(3, !1), n = !0;
          break;
        case D:
          this.autoMove(4, !1), n = !0;
          break;
        case R:
          this.autoMove(5, !1), n = !0;
          break;
        default:
          return !1
      }
      return n && (this.interactionEnd(-4), T || this.interactionCheck()), n
    }, this.handleDollyPan = function (e) {
      a = e.canvasX, s = e.canvasY;
      var t = d.getScreenViewport();
      G.x = a, G.y = s, V.x = G.x / t.width, V.y = G.y / t.height, x = function (e) {
        var t = e.pointers[1].clientX - e.pointers[0].clientX,
          n = e.pointers[1].clientY - e.pointers[0].clientY;
        return Math.sqrt(t * t + n * n)
      }(e);
      var n, i, r = THREE.Math.degToRad(e.rotation);
      w = r - E, Math.abs(w) > 1 && (w = 0), E = r, n = e.type, i = "start", -1 !== n.indexOf(i, n.length - i.length) && (_ = x, 1, w = 0, E = r), b = e.scale
    }, this.handleGesture = function (e) {
      switch (e.type) {
        case "dragstart":
          return y = "drag", this.handleButtonDown(e, 0);
        case "dragmove":
          return "drag" !== y && (this.handleButtonDown(e, 0), y = "drag"), this.handleMouseMove(e);
        case "dragend":
          return "drag" === y && (this.handleButtonUp(e, 0), y = null, !0);
        case "panstart":
          return y = "pan", this.handlePanStart(e), this.handleDollyPan(e), !0;
        case "panmove":
          return "pan" !== y && (y = "pan", this.handlePanStart(e)), this.handleDollyPan(e);
        case "panend":
          return "pan" === y && (this.isDragging = !1, this.handleDollyPan(e), this.interactionEnd(3), !0);
        case "pinchstart":
          return this.isDragging = !0, y = "pinch", U.x = .5 * (e.normalizedX + 1), U.y = 1 - .5 * (e.normalizedY + 1), B.set(e.canvasX, e.canvasY), z.set(e.canvasX, e.canvasY), S = !1, this.interactionStart(3), this.handleDollyPan(e), !0;
        case "pinchmove":
          return "pinch" === y && this.handleDollyPan(e);
        case "pinchend":
          return "pinch" === y && (this.isDragging = !1, this.handleDollyPan(e), this.interactionEnd(3), !0)
      }
      return !1
    }, this.handleButtonDown = function (e, t) {
      return this.updateModifierState(e), U.x = .5 * (e.normalizedX + 1), U.y = 1 - .5 * (e.normalizedY + 1), z.set(e.canvasX, e.canvasY), V.copy(U), G.copy(z), j.copy(ce(e.canvasX, e.canvasY)), q.copy(j), a = e.canvasX, s = e.canvasY, this.isDragging = !0, this.interactionStart(t), !0
    }, this.handlePanStart = function (e) {
      return this.isDragging = !0, U.x = .5 * (e.normalizedX + 1), U.y = 1 - .5 * (e.normalizedY + 1), B.set(e.canvasX, e.canvasY), z.set(e.canvasX, e.canvasY), this.interactionStart(3), !0
    }, this.handleButtonUp = function (e, t) {
      return this.updateModifierState(e), V.x = .5 * (e.normalizedX + 1), V.y = 1 - .5 * (e.normalizedY + 1), G.set(e.canvasX, e.canvasY), q.copy(ce(e.canvasX, e.canvasY)), j.copy(q), a = e.canvasX, s = e.canvasY, this.interactionEnd(t), this.isDragging = !1, !0
    }, this.handleMouseMove = function (t) {
      return this.updateModifierState(t), this.isDragging ? (V.x = .5 * (t.normalizedX + 1), V.y = 1 - .5 * (t.normalizedY + 1), G.set(t.canvasX, t.canvasY), q.copy(ce(t.canvasX, t.canvasY)), a = t.canvasX, s = t.canvasY, !0) : (U.x = .5 * (t.normalizedX + 1), U.y = 1 - .5 * (t.normalizedY + 1), z.set(t.canvasX, t.canvasY), V.x = U.x, V.y = U.y, G.copy(z), a = t.canvasX, s = t.canvasY, t.target === e.canvas && e.rolloverObject(a, s), !1)
    }, this.handleBlur = function (e) {
      r.resetKeys(), r.interactionEnd(F)
    }, this._onPrefCursor = function (e) {
      A = e
    }.bind(this)
  }
  r.GlobalManagerMixin.call(a.prototype)
}, function (e, t, n) {
  "use strict";
  n.r(t), n.d(t, "Autocam", (function () {
    return l
  }));
  var i = n(0),
    r = n(8),
    o = n(12),
    a = Number.MIN_VALUE || 3e-308;

  function s(e) {
    Math.abs(e.x) < 1e-12 && Math.abs(e.y) < 1e-12 ? e.set(0, 0, e.z > 0 ? 1 : -1) : Math.abs(e.y) < 1e-12 && Math.abs(e.z) < 1e-12 ? e.set(e.x > 0 ? 1 : -1, 0, 0) : Math.abs(e.z) < 1e-12 && Math.abs(e.x) < 1e-12 && e.set(0, e.y > 0 ? 1 : -1, 0)
  }

  function l(e, t, n) {
    var o = this,
      l = null,
      c = !1;
    this.cube = null, this.camera = e, this.renderer = "WEBGL", this.startState = {}, this.navApi = t, this.orthographicFaces = !1, this.canvas = n, this.cameraChangedCallback = function () {}, this.pivotDisplayCallback = function () {}, this.transitionCompletedCallback = function () {};
    var u, h = Date.now(),
      d = !1;

    function f(t) {
      c = !0, e.target.copy(o.center), e.pivot.copy(o.pivot), e.worldup ? e.worldup.copy(o.sceneUpDirection) : e.up.copy(o.sceneUpDirection), o.cameraChangedCallback(t), c = !1
    }
    this.recordTime = !0, this.dtor = function () {
      this.cube = null, this.cameraChangedCallback = null, this.pivotDisplayCallback = null, this.transitionCompletedCallback = null, this.canvas = null, this.recordTime = !1
    }, this.registerCallbackCameraChanged = function (e) {
      this.cameraChangedCallback = e
    }, this.registerCallbackPivotDisplay = function (e) {
      this.pivotDisplayCallback = e
    }, this.registerCallbackTransitionCompleted = function (e) {
      this.transitionCompletedCallback = e
    }, this.showPivot = function (e) {
      this.pivotDisplayCallback(e)
    }, this.setWorldUpVector = function (e) {
      c || e && e.lengthSq() > 0 && !e.normalize().equals(this.sceneUpDirection) && (this.sceneUpDirection.copy(e), this.sceneFrontDirection.copy(this.getWorldFrontVector()), this.cubeFront.copy(this.sceneFrontDirection).cross(this.sceneUpDirection).normalize(), this.cube && requestAnimationFrame(this.cube.render))
    }, this.getWorldUpVector = function () {
      return this.sceneUpDirection.clone()
    }, this.getWorldRightVector = function () {
      var e = this.sceneUpDirection.clone();
      return Math.abs(e.z) <= Math.abs(e.y) ? e.set(e.y, -e.x, 0) : e.z >= 0 ? e.set(e.z, 0, -e.x) : e.set(-e.z, 0, e.x), e.normalize()
    }, this.getWorldFrontVector = function () {
      return this.getWorldUpVector().cross(this.getWorldRightVector()).normalize()
    }, this.goToView = function (e) {
      if (this.navApi.isActionEnabled("gotoview")) {
        var t = {
          position: e.position.clone(),
          up: e.up.clone(),
          center: e.center.clone(),
          pivot: e.pivot.clone(),
          fov: e.fov,
          worldUp: e.worldUp.clone(),
          isOrtho: e.isOrtho
        };
        o.elapsedTime = 0, this.animateTransition(t)
      }
    }, this.getCurrentView = function () {
      return {
        position: e.position.clone(),
        up: e.up.clone(),
        center: this.center.clone(),
        pivot: this.pivot.clone(),
        fov: e.fov,
        worldUp: this.sceneUpDirection.clone(),
        isOrtho: !1 === e.isPerspective
      }
    }, this.setCurrentViewAsHome = function (e) {
      e ? (this.navApi.setRequestFitToView(!0), d = !0) : this.homeVector = this.getCurrentView()
    }, this.setHomeViewFrom = function (e) {
      var t = e.pivot ? e.pivot : this.center,
        n = e.target ? e.target : this.pivot,
        i = e.worldup ? e.worldup : this.sceneUpDirection;
      this.homeVector = {
        position: e.position.clone(),
        up: e.up.clone(),
        center: n.clone(),
        pivot: t.clone(),
        fov: e.fov,
        worldUp: i.clone(),
        isOrtho: !1 === e.isPerspective
      }, this.originalHomeVector = {
        position: e.position.clone(),
        up: e.up.clone(),
        center: n.clone(),
        pivot: t.clone(),
        fov: e.fov,
        worldUp: i.clone(),
        worldFront: this.sceneFrontDirection.clone(),
        isOrtho: !1 === e.isPerspective
      }
    }, this.toPerspective = function () {
      e.isPerspective || (e.toPerspective(), f(!1))
    }, this.toOrthographic = function () {
      e.isPerspective && (e.toOrthographic(), f(!1))
    }, this.setOrthographicFaces = function (e) {
      this.orthographicFaces = e
    }, this.setViewType = function (e, t) {
      switch (e) {
        case 1:
          return this.setOrthographicFaces(!1), this.toOrthographic(), !0;
        case 2:
          return this.setOrthographicFaces(!1), this.toPerspective(), !0;
        case 3:
          return this.setOrthographicFaces(!0), void 0 === t && (t = this.isFaceView()), t ? this.toOrthographic() : this.toPerspective(), !0;
        default:
          return !1
      }
    }, this.goHome = function () {
      this.navApi.isActionEnabled("gotoview") && (this.navApi.setPivotSetFlag(!1), this.goToView(this.homeVector))
    }, this.resetHome = function () {
      this.homeVector.position.copy(this.originalHomeVector.position), this.homeVector.up.copy(this.originalHomeVector.up), this.homeVector.center.copy(this.originalHomeVector.center), this.homeVector.pivot.copy(this.originalHomeVector.pivot), this.homeVector.fov = this.originalHomeVector.fov, this.homeVector.worldUp.copy(this.originalHomeVector.worldUp), this.homeVector.isOrtho = this.originalHomeVector.isOrtho, this.goHome()
    }, this.getView = function () {
      return this.center.clone().sub(e.position)
    }, this.setCameraUp = function (t) {
      var n = this.dir.clone(),
        i = n.cross(t).normalize();
      0 === i.lengthSq() && (n.copy(this.dir), t.z > t.y ? n.y += 1e-4 : n.z += 1e-4, i = n.cross(t).normalize()), e.up.copy(i).cross(this.dir).normalize()
    };
    var p, m, g, v, b = this;
    ! function e() {
      b.recordTime && requestAnimationFrame(e);
      var t = Date.now();
      u = t - h, h = t
    }(), this.ortho = !1, this.center = e.target ? e.target.clone() : new i.Vector3(0, 0, 0), this.pivot = e.pivot ? e.pivot.clone() : this.center.clone(), this.sceneUpDirection = e.worldup ? e.worldup.clone() : e.up.clone(), this.sceneFrontDirection = this.getWorldFrontVector(), this.dir = this.getView(), this.setCameraUp(e.up), this.saveCenter = this.center.clone(), this.savePivot = this.pivot.clone(), this.saveEye = e.position.clone(), this.saveUp = e.up.clone(), this.cubeFront = this.sceneFrontDirection.clone().cross(this.sceneUpDirection).normalize(), this.setHomeViewFrom(e);
    var _, w, E = new i.Quaternion,
      A = new i.Quaternion,
      S = new i.Quaternion,
      M = new i.Quaternion;
    this.userPanSpeed = .5, this.userLookSpeed = 2, this.userHeightSpeed = 5, this.walkMultiplier = 1, this.userZoomSpeed = 1.015, this.orbitMultiplier = 5, this.currentlyAnimating = !1, e.keepSceneUpright = !0, this.preserveOrbitUpDirection = !0, this.alignOrbitUpDirection = !0, this.constrainOrbitHorizontal = !1, this.constrainOrbitVertical = !1, this.doCustomOrbit = !1, this.snapOrbitDeadZone = .045, this.snapOrbitThresholdH = this.snapOrbitThresholdV = i.Math.degToRad(15), this.snapOrbitAccelerationAX = this.snapOrbitAccelerationAY = 1.5, this.snapOrbitAccelerationBX = this.snapOrbitAccelerationBY = 2, this.snapOrbitAccelerationPointX = this.snapOrbitAccelerationPointY = .5, this.combined = !1, this.useSnap = !1, this.lockDeltaX = 0, this.lockedX = !1, this.lastSnapRotateX = 0, this.lockDeltaY = 0, this.lockedY = !1, this.lastSnapRotateY = 0, this.lastSnapDir = new i.Vector3(0, 0, 0), this.topLimit = !1, this.bottomLimit = !1, this.minSceneBound = 0, this.maxSceneBound = 0;
    var T, C, P = {
      destinationPercent: 1,
      duration: 1,
      zoomToFitScene: !0,
      useOffAxis: !1
    };
    this.shotParams = P, this.zoomDelta = new i.Vector2;
    var L;

    function D(e, t, n) {
      if (e <= t) return 0;
      if (e >= n) return 1;
      var i = (e - t) / (n - t);
      return .5 * (Math.sin((i - .5) * Math.PI) + 1)
    }

    function I(e) {
      return Math.round(10 * e) / 10
    }

    function R(e, t) {
      var n = new i.Vector2(0, 0),
        r = o.getWindow();
      return n.x = e / r.innerWidth, n.y = t / r.innerHeight, n
    }

    function O(e, t, n) {
      var i, r, a, s;
      i = r = a = s = 0;
      var l = 0,
        c = null,
        u = null,
        h = o.snapOrbitDeadZone,
        d = o.orbitMultiplier;
      return "h" == e ? (i = o.snapOrbitThresholdH, r = o.snapOrbitAccelerationAX, a = o.snapOrbitAccelerationBX, s = 1 - o.snapOrbitAccelerationPointX, u = o.lockDeltaX, c = o.lockedX) : (i = o.snapOrbitThresholdV, r = o.snapOrbitAccelerationAY, a = o.snapOrbitAccelerationBY, s = 1 - o.snapOrbitAccelerationPointY, u = o.lockDeltaY, c = o.lockedY), c ? (u += n) < -h ? (l = (u + h) * d * 1 / a, c = !1) : u > h && (l = (u - h) * d * 1 / a, c = !1) : (l = Math.abs(t) > i ? n * d : Math.abs(t) > s * i ? n * t > 0 ? n * d * r : n * d * 1 / r : n * t > 0 ? n * d * a : n * d * 1 / a) * t > 0 && Math.abs(l) > Math.abs(t) && (this.lockDeltaX = this.lockDeltaY = 0, c = !0, l = t), l
    }

    function k() {
      return o.combined
    }

    function N(e, t) {
      var n = !1,
        i = o.getWindow(),
        r = i.innerWidth,
        a = e.x % r,
        s = i.innerHeight,
        l = e.y % s,
        c = a > 0 ? a - t.x : r + a - t.x,
        u = l > 0 ? l - t.y : s + l - t.y;
      return Math.abs(c) < 30 && Math.abs(u) < 30 && (n = !0), n
    }

    function F(e, t, n) {
      var r = o.getWindow();
      if (!L || !e) {
        if (e) {
          var a = new i.Vector2,
            s = t.x,
            l = t.y;
          ! function (e, t, n) {
            var i = o.getWindow();
            n.x = (e.x - t.x) / i.innerWidth, e.x = t.x + (e.x - t.x) % i.innerWidth, n.y = (e.y - t.y) / i.innerHeight, e.y = t.y + (e.y - t.y) % i.innerHeight
          }(t, n, a), r.innerWidth * a.x, r.innerHeight * a.y, s < n.x ? s -= 60 : s += 60, l < n.y ? l -= 60 : l += 60
        }
        L = e
      }
    }

    function U(e) {
      var t = Math.pow(e, 2);
      e < 0 && (t = -t);
      var n = R(0, t),
        i = .01 * (o.maxSceneBound - o.minSceneBound);
      n.y *= i;
      var r = o.userHeightSpeed * n.y;
      return r = function (e, t, n) {
        if (0 === t) return 0;
        var i = e,
          r = o.saveEye.clone().sub(worldUp.clone().multiplyScalar(n + i)),
          a = o.saveEye.clone().sub(worldUp.clone().multiplyScalar(n)),
          s = 0,
          l = (o.maxSceneBound - o.minSceneBound) / 1e3;
        o.topLimit && t > 0 ? (s = o.maxSceneBound - l, o.topLimit = !1) : o.bottomLimit && t < 0 ? (s = o.minSceneBound + l, o.bottomLimit = !1) : s = r.dot(worldUp);
        var c = a.dot(worldUp);
        return s < o.minSceneBound ? c < o.minSceneBound && (o.bottomLimit = !0, i = 0) : s > o.maxSceneBound && c > o.maxSceneBound && (o.topLimit = !0, i = 0), i
      }(r, e, o.m_amount)
    }

    function V(e) {
      var t = o.sceneFrontDirection.clone().cross(o.sceneUpDirection),
        n = Math.abs(Math.abs(e.dot(o.sceneUpDirection)) - 1),
        i = Math.abs(Math.abs(e.dot(o.sceneFrontDirection)) - 1),
        r = Math.abs(Math.abs(e.dot(t)) - 1);
      return n < 1e-5 || i < 1e-5 || r < 1e-5
    }
    this.viewCubeMenuOpen = !1, this.menuSize = new i.Vector2(0, 0), this.menuOrigin = new i.Vector2(0, 0), e.lookAt(this.center), this.setCube = function (e) {
      this.cube = e
    }, this.sync = function (t) {
      t.isPerspective !== e.isPerspective && (t.isPerspective ? e.toPerspective() : (e.toOrthographic(), t.saveFov && (e.saveFov = t.saveFov))), e.fov = t.fov, e.position.copy(t.position), t.target && (this.center.copy(t.target), e.target.copy(t.target)), t.pivot && (this.pivot.copy(t.pivot), e.pivot.copy(t.pivot)), this.dir.copy(this.center).sub(e.position), this.setCameraUp(t.up);
      var n = t.worldup ? t.worldup : t.up;
      n.distanceToSquared(this.sceneUpDirection) > 1e-4 && this.setWorldUpVector(n), d && !this.navApi.getTransitionActive() && (d = !1, this.setCurrentViewAsHome(!1)), this.cube && requestAnimationFrame(this.cube.render)
    }, this.refresh = function () {
      this.cube && this.cube.refreshCube()
    }, i.Matrix3.prototype.makeRotationFromQuaternion = function (e) {
      var t = this.elements,
        n = e.x,
        i = e.y,
        r = e.z,
        o = e.w,
        a = n + n,
        s = i + i,
        l = r + r,
        c = n * a,
        u = n * s,
        h = n * l,
        d = i * s,
        f = i * l,
        p = r * l,
        m = o * a,
        g = o * s,
        v = o * l;
      return t[0] = 1 - (d + p), t[3] = u - v, t[6] = h + g, t[1] = u + v, t[4] = 1 - (c + p), t[7] = f - m, t[2] = h - g, t[5] = f + m, t[8] = 1 - (c + d), this
    }, i.Quaternion.prototype.setFromRotationMatrix3 = function (e) {
      var t, n = e.elements,
        i = n[0],
        r = n[3],
        o = n[6],
        a = n[1],
        s = n[4],
        l = n[7],
        c = n[2],
        u = n[5],
        h = n[8],
        d = i + s + h;
      return d > 0 ? (t = .5 / Math.sqrt(d + 1), this.w = .25 / t, this.x = (u - l) * t, this.y = (o - c) * t, this.z = (a - r) * t) : i > s && i > h ? (t = 2 * Math.sqrt(1 + i - s - h), this.w = (u - l) / t, this.x = .25 * t, this.y = (r + a) / t, this.z = (o + c) / t) : s > h ? (t = 2 * Math.sqrt(1 + s - i - h), this.w = (o - c) / t, this.x = (r + a) / t, this.y = .25 * t, this.z = (l + u) / t) : (t = 2 * Math.sqrt(1 + h - i - s), this.w = (a - r) / t, this.x = (o + c) / t, this.y = (l + u) / t, this.z = .25 * t), this
    }, i.Quaternion.prototype.rotate = function (e) {
      var t = (new i.Matrix4).makeRotationFromQuaternion(this).elements,
        n = (new i.Matrix3).set(t[0], t[1], t[2], t[4], t[5], t[6], t[8], t[9], t[10]);
      return e.applyMatrix3(n)
    }, this.animateTransition = function (t) {
      if (t) {
        var n = !1,
          i = 0;
        if (this.setCameraOrtho(t.isOrtho), o.elapsedTime >= P.duration) return i = 1, o.center.copy(t.center), o.pivot.copy(t.pivot), e.position.copy(t.position), e.up.copy(t.up), e.target.copy(t.center), t.isOrtho || (e.fov = t.fov), e.dirty = !0, (n = !t.worldUp.equals(this.sceneUpDirection)) && this.setWorldUpVector(t.worldUp), this.currentlyAnimating = !1, f(n), this.showPivot(!1), this.cube && requestAnimationFrame(this.cube.render), this.navApi.setTransitionActive(!1), void this.transitionCompletedCallback();
        this.currentlyAnimating = !0, this.showPivot(!0), this.navApi.setTransitionActive(!0);
        var r = P.destinationPercent,
          a = 1 - (i = D(o.elapsedTime / P.duration, 0, r));
        o.elapsedTime += u / 500;
        var s = o.center.clone().multiplyScalar(a).add(t.center.clone().multiplyScalar(i)),
          l = e.position.clone().multiplyScalar(a).add(t.position.clone().multiplyScalar(i)),
          c = e.up.clone().multiplyScalar(a).add(t.up.clone().multiplyScalar(i)),
          h = e.pivot.clone().multiplyScalar(a).add(t.pivot.clone().multiplyScalar(i)),
          d = this.sceneUpDirection.clone().multiplyScalar(a).add(t.worldUp.clone().multiplyScalar(i)),
          p = e.fov * a + t.fov * i;
        o.center.copy(s), o.pivot.copy(h), e.position.copy(l), e.up.copy(c), e.target.copy(s), t.isOrtho || (e.fov = p), e.dirty = !0, (n = d.distanceToSquared(this.sceneUpDirection) > 1e-4) && this.setWorldUpVector(d), e.lookAt(o.center), f(n), this.cube && requestAnimationFrame(this.cube.render), requestAnimationFrame((function () {
          o.animateTransition(t)
        }))
      }
    }, this.sphericallyInterpolateTransition = function (t) {
      var n, r, a, s, l = 0;
      if (this.currentlyAnimating = !0, this.navApi.setTransitionActive(!0), o.elapsedTime >= P.duration) l = 1, this.currentlyAnimating = !1;
      else {
        var c = P.destinationPercent;
        l = D(o.elapsedTime / P.duration, 0, c), o.elapsedTime += u / 500
      }
      if (1 === l) r = C.position, n = C.center, a = C.up;
      else {
        var h = new i.Matrix3,
          d = E.clone();
        d.slerp(A, l), h.makeRotationFromQuaternion(d);
        var p = _ * (1 - (s = l)) + w * s,
          m = h.elements;
        r = (n = T.center.clone().multiplyScalar(1 - l).add(C.center.clone().multiplyScalar(l))).clone().sub(new i.Vector3(m[0], m[1], m[2]).multiplyScalar(p)), a = new i.Vector3(m[3], m[4], m[5])
      }
      o.center.copy(n), e.position.copy(r), e.up.copy(a), o.navApi.getUsePivotAlways() || o.pivot.copy(n), e.lookAt(o.center), !0 === this.currentlyAnimating ? (this.showPivot(!0), requestAnimationFrame((function () {
        o.sphericallyInterpolateTransition(t)
      }))) : (this.navApi.setTransitionActive(!1), this.showPivot(!1), this.orthographicFaces && this.isFaceView() && this.setCameraOrtho(!0), t && t()), f(!1), this.cube && requestAnimationFrame(this.cube.render)
    }, this.getOrientation = function () {
      if (this.cube) {
        var t = I(e.up.x),
          n = I(e.up.y),
          i = I(e.up.z),
          r = this.sceneFrontDirection.clone(),
          o = this.sceneUpDirection.clone(),
          a = this.sceneFrontDirection.clone().cross(this.sceneUpDirection).normalize();
        r.x = I(r.x), r.y = I(r.y), r.z = I(r.z), o.x = I(o.x), o.y = I(o.y), o.z = I(o.z), a.x = I(a.x), a.y = I(a.y), a.z = I(a.z);
        var s = a.clone().multiplyScalar(-1),
          l = o.clone().multiplyScalar(-1),
          c = r.clone().multiplyScalar(-1);
        switch (this.cube.currentFace) {
          case "front":
            if (o.x == t && o.y == n && o.z == i) return "up";
            if (l.x == t && l.y == n && l.z == i) return "down";
            if (a.x == t && a.y == n && a.z == i) return "right";
            if (s.x == t && s.y == n && s.z == i) return "left";
            break;
          case "right":
            if (o.x == t && o.y == n && o.z == i) return "up";
            if (l.x == t && l.y == n && l.z == i) return "down";
            if (c.x == t && c.y == n && c.z == i) return "left";
            if (r.x == t && r.y == n && r.z == i) return "right";
            break;
          case "left":
            if (o.x == t && o.y == n && o.z == i) return "up";
            if (l.x == t && l.y == n && l.z == i) return "down";
            if (r.x == t && r.y == n && r.z == i) return "left";
            if (c.x == t && c.y == n && c.z == i) return "right";
            break;
          case "back":
            if (o.x == t && o.y == n && o.z == i) return "up";
            if (l.x == t && l.y == n && l.z == i) return "down";
            if (s.x == t && s.y == n && s.z == i) return "right";
            if (a.x == t && a.y == n && a.z == i) return "left";
            break;
          case "top":
            if (c.x == t && c.y == n && c.z == i) return "down";
            if (r.x == t && r.y == n && r.z == i) return "up";
            if (a.x == t && a.y == n && a.z == i) return "right";
            if (s.x == t && s.y == n && s.z == i) return "left";
            break;
          case "bottom":
            if (r.x == t && r.y == n && r.z == i) return "down";
            if (c.x == t && c.y == n && c.z == i) return "up";
            if (a.x == t && a.y == n && a.z == i) return "right";
            if (s.x == t && s.y == n && s.z == i) return "left"
        }
      }
    }, this.setCameraOrtho = function (t) {
      t && e.isPerspective && e.toOrthographic(), t || e.isPerspective || e.toPerspective()
    }, this.resetOrientation = function () {
      this.cube && this.cube.showCompass(this.cube.prevRenderCompass), this.setCameraOrtho(this.originalHomeVector.isOrtho), this.sceneUpDirection.copy(this.originalHomeVector.worldUp), this.sceneFrontDirection.copy(this.originalHomeVector.worldFront), this.cubeFront.copy(this.sceneFrontDirection).cross(this.sceneUpDirection).normalize(), this.setCameraUp(this.sceneUpDirection), f(!0)
    }, this.setCurrentViewAsFront = function () {
      this.cube && (this.cube.currentFace = "front", this.cube.showCompass(!1)), this.sceneUpDirection.copy(e.up.clone()), s(this.sceneUpDirection), this.sceneFrontDirection.copy(this.getView()).normalize(), s(this.sceneFrontDirection), this.cubeFront.copy(this.sceneFrontDirection).cross(this.sceneUpDirection).normalize(), s(this.cubeFront), this.orthographicFaces && this.setCameraOrtho(!0), f(!0)
    }, this.setCurrentViewAsTop = function () {
      this.cube && (this.cube.currentFace = "top", this.cube.showCompass(!1)), this.sceneUpDirection.copy(this.getView()).multiplyScalar(-1).normalize(), s(this.sceneUpDirection), this.sceneFrontDirection.copy(e.up), s(this.sceneFrontDirection), this.cubeFront.copy(this.sceneFrontDirection).cross(this.sceneUpDirection).normalize(), s(this.cubeFront), f(!0)
    }, this.calculateCubeTransform = function (t) {
      var n = this.sceneUpDirection.clone(),
        r = this.sceneFrontDirection.clone(),
        s = this.sceneFrontDirection.clone().cross(this.sceneUpDirection).normalize();
      (T = e.clone()).center = o.center.clone(), T.pivot = o.pivot.clone(), (C = e.clone()).center = o.center.clone(), C.pivot = o.pivot.clone();
      var l = new i.Vector3(0, 0, 0);
      t.indexOf("back") >= 0 && (l = l.add(r)), t.indexOf("front") >= 0 && (l = l.sub(r)), t.indexOf("top") >= 0 && (l = l.add(n)), t.indexOf("bottom") >= 0 && (l = l.sub(n)), t.indexOf("right") >= 0 && (l = l.add(s)), t.indexOf("left") >= 0 && (l = l.sub(s));
      var c = n,
        u = l.clone().normalize();
      if (1 - Math.abs(u.dot(n)) < a)
        for (var h = this.getView().normalize(), d = [r.clone(), r.clone().negate(), s.clone(), s.clone().negate()], f = u.dot(n) > 0 ? 1 : -1, p = h.clone().add(e.up.clone().multiplyScalar(f)).normalize(), m = -2, g = 0; g < 4; g++) {
          var v = p.dot(d[g]);
          v > m && (m = v, c = d[g].multiplyScalar(f))
        }
      w = _ = this.getView().length(), C.position.copy(C.center.clone().add(l.multiplyScalar(w / l.length()))), C.up.copy(c);
      var y = T.center.clone().sub(T.position).normalize(),
        b = y.clone().cross(T.up).normalize(),
        x = b.clone().cross(y).normalize(),
        P = new i.Matrix3;
      P.set(y.x, x.x, b.x, y.y, x.y, b.y, y.z, x.z, b.z), E.setFromRotationMatrix3(P), x = (b = (y = C.center.clone().sub(C.position).normalize()).clone().cross(C.up).normalize()).clone().cross(y).normalize(), P.set(y.x, x.x, b.x, y.y, x.y, b.y, y.z, x.z, b.z), S.setFromAxisAngle(y, 0), M.setFromAxisAngle(x, 0), A.setFromRotationMatrix3(P), A.multiply(S).multiply(M).normalize()
    }, this.drawDropdownMenu = function (e, t, n, i, o, a, s) {
      var c = 0,
        u = this.getDocument();
      if (l) a.appendChild(l);
      else {
        (l = u.createElement("div")).className = "dropDownMenu", l.style.top = "100px", l.style.left = "-400px";
        for (var h = 0, d = 0, f = 0; f < e.length; f++) {
          var p;
          if (null === e[f])(p = u.createElement("li")).style.height = "1px", h += 1, p.style.backgroundColor = "#E0E0E0";
          else {
            var m = r.i18n.translate(e[f]);
            if (d = m.length > d ? m.length : d, n[f]) {
              p = u.createElement("div");
              var g = u.createElement("input"),
                v = u.createElement("label");
              g.type = "radio", g.className = "dropDownMenuCheck", v.innerHTML = m, v.className = "dropDownMenuCheckText", p.appendChild(g), p.appendChild(v), p.className = "dropDownMenuCheckbox"
            } else(p = u.createElement("li")).textContent = m, p.className = t[f] ? "dropDownMenuItem" : "dropDownMenuItemDisabled";
            p.id = "menuItem" + c, c++, h += 25, p.setAttribute("data-i18n", e[f])
          }
          l.appendChild(p)
        }
        a.appendChild(l), l.style.minWidth = Math.max(256, 7.4 * d) + "px";
        var y = l.getBoundingClientRect().width;
        this.menuSize.x = y, this.menuSize.y = h
      }
      c = 0;
      for (f = 0; f < e.length; f++)
        if (null !== e[f]) {
          if (n[f]) {
            var b = "menuItem" + c,
              _ = u.getElementById(b);
            _ && (_.children[0].checked = n[f]())
          }
          c++
        } var x = o - 15,
        w = i + 1,
        E = this.canvas.getBoundingClientRect();
      w + this.menuSize.x > E.right && (w = i - this.menuSize.x - 1), x + this.menuSize.y > E.bottom && (x = E.bottom - this.menuSize.y), x -= s.y, w -= s.x, l.style.top = x + "px", l.style.left = w + "px", this.menuOrigin.x = w, this.menuOrigin.y = x
    }, this.removeDropdownMenu = function (e) {
      e.removeChild(l)
    }, this.isFaceView = function () {
      return V(this.center.clone().sub(e.position).normalize()) && V(e.up)
    }, this.startInteraction = function (e, t) {
      this.startCursor = new i.Vector2(e, t), this.startState = {
        saveCenter: this.center.clone(),
        saveEye: this.camera.position.clone(),
        savePivot: this.pivot.clone(),
        saveUp: this.camera.up.clone()
      }, this.lockDeltaX = 0, this.lockedX = !1, this.lastSnapRotateX = 0, this.lockDeltaY = 0, this.lockedY = !1, this.lastSnapRotateY = 0, this.lastSnapDir = new i.Vector3(0, 0, 0), this.navApi.setTransitionActive(!0)
    }, this.orbit = function (t, n, r, a) {
      if (this.navApi.isActionEnabled("orbit") && !0 !== this.currentlyAnimating) {
        var s = "wheel";
        if (o.orthographicFaces && !e.isPerspective && (e.toPerspective(), a && a.saveEye.copy(this.camera.position)), a && (s = "cube"), "cube" == s ? (this.saveCenter.copy(a.saveCenter), this.saveEye.copy(a.saveEye), this.savePivot.copy(a.savePivot), this.saveUp.copy(a.saveUp), this.useSnap = !0, this.doCustomOrbit = !0) : (this.saveCenter.copy(this.center), this.savePivot.copy(this.pivot), this.saveEye.copy(e.position), this.saveUp.copy(e.up), this.useSnap = !1, this.doCustomOrbit = !1), k() && null == m && (m = this.saveCenter.clone(), p = this.saveEye.clone(), v = this.savePivot.clone(), g = this.saveUp.clone()), this.preserveOrbitUpDirection) {
          var l = R(t.x - n.x, t.y - n.y),
            c = R(r.x, r.y),
            u = this.sceneUpDirection.clone(),
            h = this.sceneFrontDirection.clone(),
            d = this.sceneFrontDirection.clone().cross(this.sceneUpDirection).normalize(),
            y = k() ? v : this.savePivot,
            b = k() ? p : this.saveEye,
            _ = k() ? m : this.saveCenter,
            x = k() ? g : this.saveUp,
            w = y.clone().sub(b).normalize(),
            E = _.clone().sub(b).normalize(),
            A = E.clone().cross(x),
            S = b.clone().sub(y).length(),
            M = b.clone().sub(_).length(),
            T = w.clone().multiplyScalar(-1),
            C = E.clone().multiplyScalar(-1),
            P = A,
            L = x.clone();
          if (!this.constrainOrbitHorizontal) {
            u.dot(this.saveUp) < -.009 && (l.x = -l.x, c.x = -c.x);
            var D = 0;
            D = k() ? c.x * this.orbitMultiplier : this.useSnap ? this.lastSnapRotateX + O("h", 0, -c.x) : l.x * this.orbitMultiplier, this.lastSnapRotateX = D;
            var I = (new i.Quaternion).setFromAxisAngle(u, -D);
            T.applyQuaternion(I), C.applyQuaternion(I), P.applyQuaternion(I), L.applyQuaternion(I)
          }
          if (!this.constrainOrbitVertical) {
            var N = h.clone().multiplyScalar(h.dot(P)),
              F = d.clone().multiplyScalar(d.dot(P)),
              U = N.clone().add(F);
            U.clone().normalize();
            var V = 0;
            if (k()) V = c.y * this.orbitMultiplier;
            else {
              var B = O("v", 0, c.y);
              V = this.useSnap ? this.lastSnapRotateY + B : l.y * this.orbitMultiplier
            }
            var z = (new i.Quaternion).setFromAxisAngle(U, -V);
            if (this.navApi.getOrbitPastWorldPoles()) T.applyQuaternion(z).normalize(), C.applyQuaternion(z).normalize(), L.applyQuaternion(z).normalize();
            else {
              var G = L.clone();
              if (G.applyQuaternion(z).normalize(), u.dot(G) < 0) {
                var H = C.clone();
                H.applyQuaternion(z).normalize();
                var W = H.angleTo(u);
                Math.abs(W) > .5 * Math.PI && (W -= W > 0 ? Math.PI : -Math.PI), V -= W, z.setFromAxisAngle(U, -V), T.applyQuaternion(z).normalize(), C.applyQuaternion(z).normalize(), L.applyQuaternion(z).normalize()
              } else T.applyQuaternion(z).normalize(), C.applyQuaternion(z).normalize(), L.applyQuaternion(z).normalize()
            }
            this.lastSnapRotateY = V
          }
          var j = T.multiplyScalar(S).add(y);
          e.position.copy(j), e.up.copy(L), this.center.copy(j), this.center.sub(C.multiplyScalar(M)), k() && (m.copy(this.center), p.copy(e.position), v.copy(this.pivot), g.copy(e.up))
        }
        e.lookAt(this.center), f(!1)
      }
    }, this.endInteraction = function () {
      this.navApi.setTransitionActive(!1)
    }, this.look = function (t) {
      if (this.navApi.isActionEnabled("walk")) {
        var n = R(t.x, t.y),
          r = this.userLookSpeed,
          o = this.getView(),
          a = e.up,
          s = o.clone().cross(a).normalize(),
          l = this.sceneUpDirection.clone(),
          c = n.clone();
        c.x *= Math.PI, c.y *= Math.PI / e.aspect, c.multiplyScalar(r);
        var u = (new i.Quaternion).setFromAxisAngle(s, -c.y);
        if (e.keepSceneUpright && !this.navApi.getOrbitPastWorldPoles()) {
          var h = a.clone();
          if (h.applyQuaternion(u).normalize(), h.dot(l) < 0) {
            var d = o.clone();
            d.applyQuaternion(u);
            var p = d.angleTo(l);
            Math.abs(p) > .5 * Math.PI && (p -= p > 0 ? Math.PI : -Math.PI), c.y -= p, u.setFromAxisAngle(s, -c.y)
          }
        }
        o = u.clone().rotate(o), (a = u.clone().rotate(a)).normalize();
        var m = e.keepSceneUpright ? l : a,
          g = (new i.Quaternion).setFromAxisAngle(m, -c.x);
        o = g.clone().rotate(o), a = g.clone().rotate(a), this.center.copy(o.add(e.position)), e.up.copy(a), e.lookAt(this.center), f(!1)
      }
    }, this.pan = function (t) {
      if (this.navApi.isActionEnabled("pan")) {
        t = R(t.x, t.y);
        var n = this.getView(),
          r = e.up.clone().cross(n),
          o = n.clone().cross(r);
        r.normalize(), o.normalize(), n.normalize();
        var a = this.pivot.clone().sub(e.position),
          s = n.clone().dot(a),
          l = s * (Math.tan(i.Math.degToRad(e.leftFov)) + Math.tan(i.Math.degToRad(e.rightFov))),
          c = s * (Math.tan(i.Math.degToRad(e.topFov)) + Math.tan(i.Math.degToRad(e.bottomFov))),
          u = t.x * Math.abs(l),
          h = t.y * Math.abs(c),
          d = new i.Vector3,
          p = r.clone().multiplyScalar(u),
          m = o.clone().multiplyScalar(h);
        d = p.clone().add(m).clone().multiplyScalar(this.userPanSpeed), e.position.add(d), this.center.add(d), e.lookAt(this.center), f(!1)
      }
    }, this.zoom = function (t) {
      if (this.navApi.isActionEnabled("zoom")) {
        var n = this.userZoomSpeed,
          i = Number.MAX_VALUE,
          r = t.x + t.y,
          a = Math.pow(n, r),
          s = this.pivot.clone().sub(this.pivot.clone().sub(this.saveEye).clone().multiplyScalar(a)),
          l = s.clone().add(o.D.clone().multiplyScalar(o.D.clone().dot(this.pivot.clone().sub(s).clone())));
        if (!(a >= i)) {
          if (r > 0) {
            Math.pow(n, r - 0);
            if (r < 0) return void 0;
            e.position.copy(s), this.center.copy(l);
            var c = s.clone().sub(this.saveEye).dot(o.D);
            c > i ? (e.position.copy(this.saveEye.sub(o.D).clone().multiplyScalar(i)), i > 0 ? -1 : 0) : -c / i
          } else e.position.copy(s), this.center.copy(l);
          e.lookAt(this.center), f(!1)
        }
      }
    }, this.walk = function (t, n, r, o, s) {
      if (this.navApi.isActionEnabled("walk")) {
        var l = this.sceneUpDirection.clone(),
          c = this.sceneFrontDirection.clone(),
          u = this.sceneFrontDirection.clone().cross(this.sceneUpDirection);
        N(t, n) ? (wheel.cursorImage("SWWalk"), F(!0, t, n), x = n.x, y = n.y) : F(!1, t, n), x = t.x, y = t.y;
        var h = R(x - n.x, y - n.y),
          d = -h.x,
          p = -h.y,
          m = d < 0 ? -1 : 1,
          g = p < 0 ? -1 : 1,
          v = Math.abs(d),
          b = Math.abs(p),
          _ = new i.Vector2(30, 30);
        _ = R(_.x, _.y), v = N(t, n) ? 0 : Math.abs(d) - _.x, b = N(t, n) ? 0 : Math.abs(p) - _.y;
        b /= .25;
        var w = (v = (v /= .25) < 1 ? D(v, 0, 1) : Math.pow(v, 1)) > 0 ? v * m : 0,
          E = (b = b < 1 ? D(b, 0, 1) : Math.pow(b, 1)) > 0 ? b * g : 0,
          A = this.getView(),
          S = A.length();
        A.normalize(), A.clone().cross(e.up).normalize();
        var M = u.clone().multiplyScalar(u.clone().dot(A)),
          T = c.clone().multiplyScalar(c.clone().dot(A)).clone().add(M);
        T = T.clone().length() > a ? T.normalize() : e.up;
        var C = E * (1 * this.walkMultiplier),
          P = T,
          L = Math.cos(.65);
        1 != L && (l.clone().dot(e.up) < -a && l.clone().dot(A) < -L || l.clone().dot(e.up) > a && l.clone().dot(A) > L) && (P = -P);
        var I = -w * this.walkMultiplier * .05,
          O = e.up;
        (l.clone().dot(e.up) < -a || Math.abs(l.clone().dot(e.up)) < a && l.clone().dot(A) > a) && (I = -I), O = l;
        var k = (new i.Quaternion).setFromAxisAngle(O, I);
        k.normalize(), (A = k.clone().rotate(A)).normalize(), e.up.copy(k.clone().rotate(e.up)), e.up.normalize(), e.position.add(P.clone().multiplyScalar(C)), this.center.copy(e.position.clone().add(A.clone().multiplyScalar(S))), (P = l).normalize(), 0 === C && (C = .01), e.lookAt(this.center), f(!1)
      }
    }, this.updown = function (t) {
      if (!this.navApi.getIsLocked()) {
        var n = U(t);
        o.m_amount += n;
        var r = new i.Vector3(0, 1, 0),
          a = o.saveEye.clone().sub(r.clone().multiplyScalar(o.m_amount)),
          s = a.clone().dot(r);
        e.position.copy(a), s < o.minSceneBound && e.position.add(r.clone().multiplyScalar(o.minSceneBound - s)), s > o.maxSceneBound && e.position.add(r.clone().multiplyScalar(o.maxSceneBound - s)), this.center.copy(e.position.clone().add(o.saveCenter.clone().sub(o.saveEye))), e.lookAt(this.center), f(!1)
      }
    }
  }
  o.GlobalManagerMixin.call(l.prototype)
}, function (e, t, n) {
  "use strict";
  n.r(t), n.d(t, "RenderScene", (function () {
    return c
  }));
  var i = n(44),
    r = n(53),
    o = n(0),
    a = n(28),
    s = n(130),
    l = n(204);

  function c() {
    var e = !1,
      t = !1,
      n = [],
      c = [],
      u = [],
      h = new o.Box3,
      d = [],
      f = new r.FrustumIntersector,
      p = new o.Raycaster,
      m = performance;
    this.enableNonResumableFrames = !1, this.budgetForTransparent = .1;
    var g = !1,
      v = [],
      y = null;

    function b(e, t) {
      for (var n = 0; n < e.length; n++) {
        var i = e[n];
        if (i && i.id === t) return i
      }
      return null
    }

    function _(e, t) {
      void 0 === e.avgFrameTime ? e.avgFrameTime = t : e.avgFrameTime = .8 * e.avgFrameTime + .2 * t
    }
    this.frustum = function () {
      return f
    }, this.findModel = function (e) {
      return b(n, e)
    }, this.findHiddenModel = function (e) {
      return b(d, e)
    }, this.addModel = function (e) {
      n.push(e), c.length = n.length, u.length = n.length, this.recomputeLinePrecision()
    }, this.removeModel = function (e) {
      var t = n.indexOf(e);
      return t >= 0 && n.splice(t, 1), c.length = n.length, u.length = n.length, this.recomputeLinePrecision(), t >= 0
    }, this.addHiddenModel = function (e) {
      var t = d.indexOf(e);
      return t < 0 && d.push(e), t < 0
    }, this.removeHiddenModel = function (e) {
      var t = d.indexOf(e);
      return t >= 0 && d.splice(t, 1), t >= 0
    }, this.isEmpty = function () {
      return 0 === n.length
    }, this.needsRender = function () {
      return e
    }, this.resetNeedsRender = function () {
      e = !1
    }, this.recomputeLinePrecision = function () {
      for (var e = 1, t = 0, i = n.length; t < i; ++t) {
        var r = n[t].getData().bbox,
          a = .001 * o.Box3.prototype.getBoundingSphere.call(r).radius;
        e = Math.min(e, a)
      }
      p.linePrecision = e
    }, this.frameResumePossible = function () {
      return !g
    }, this.renderSome = function (e, i) {
      for (var r, o, a = m.now(), s = this.budgetForTransparent * i;;) {
        for (var l = 0, u = null, h = 0; h < c.length; h++) {
          var d = c[h];
          if (o = n[h], d || (c[h] = d = o.nextBatch()), g && i < s) d && !d.sortObjects && (o.skipOpaqueShapes(), d = o.nextBatch());
          null !== d && (u || (l = h, u = d), d.renderImportance > u.renderImportance && (l = h, u = d))
        }
        if (!u) {
          t = !0;
          break
        }
        if (c[l] = n[l].nextBatch(), u.sortObjects && g) v.push(u), i -= void 0 === u.avgFrameTime ? .05 : u.avgFrameTime;
        else {
          e(u), u.hasOwnProperty("drawEnd") && (u.drawEnd = u.lastItem);
          var f = (r = m.now()) - a;
          a = r, _(u, f), i -= u.avgFrameTime
        }
        f = (r = m.now()) - a;
        if (a = r, _(u, f), (i -= u.avgFrameTime) <= 0) break
      }
      return v.length > 0 && (! function (e, t, n) {
        var i, r;
        for (i = 0; i < e.length; i++) {
          var o = (r = e[i]).boundingBox || r.getBoundingBox();
          r.cameraDistance = o.distanceToPoint(t.position)
        }
        e.sort((function (e, t) {
          return t.cameraDistance - e.cameraDistance
        }));
        var a = performance.now();
        for (i = 0; i < e.length; i++) {
          n(r = e[i]);
          var s = performance.now(),
            l = s - a;
          a = s, _(r, l)
        }
      }(v, y, e), v.length = 0), i
    }, this.reset = function (e, r, o, l) {
      if (t = !1, this.resetNeedsRender(), f.reset(e, l), f.areaCullThreshold = i.PIXEL_CULLING_THRESHOLD, n.length) {
        g = this.enableNonResumableFrames && o == s.ResetFlags.RESET_RELOAD && r === a.RenderFlags.RENDER_NORMAL, y = e;
        for (var h = 0; h < n.length; h++) n[h].resetIterator(e, f, r, o), c[h] = n[h].nextBatch(), u[h] = null
      }
    }, this.isDone = function () {
      return t || this.isEmpty()
    }, this.setAllVisibility = function (e) {
      for (var t = 0; t < n.length; t++) n[t].setAllVisibility(e)
    }, this.hideLines = function (e) {
      for (var t = 0; t < n.length; t++) n[t].hideLines(e)
    }, this.hidePoints = function (e) {
      for (var t = 0; t < n.length; t++) n[t].hidePoints(e)
    }, this.hasHighlighted = function () {
      for (var e = 0; e < n.length; e++)
        if (n[e].hasHighlighted()) return !0;
      return !1
    }, this.areAllVisible = function () {
      for (var e = 0; e < n.length; e++)
        if (!n[e].areAllVisible()) return !1;
      return !0
    }, this.areAll2D = function () {
      for (var e = 0; e < n.length; e++)
        if (!n[e].is2d()) return !1;
      return !0
    }, this.areAll3D = function () {
      for (var e = 0; e < n.length; e++)
        if (!n[e].is3d()) return !1;
      return !0
    }, this.invalidateVisibleBounds = function () {
      for (var e = 0; e < n.length; e++) n[e].visibleBoundsDirty = !0
    }, this.getVisibleBounds = function (e) {
      if (1 === n.length) return n[0].getVisibleBounds(e);
      h.makeEmpty();
      for (var t = 0; t < n.length; t++) h.union(n[t].getVisibleBounds(e));
      return h
    }, this.rayIntersect = function (e, t, i, r, o, a) {
      var s;
      if (p.set(e, t), n.length > 1) {
        var l = [];
        if (o)
          for (s = 0; s < o.length; s++) {
            if (h = this.findModel(o[s])) {
              var c = r && r[s];
              (u = h.rayIntersect(p, i, c)) && l.push(u)
            }
          } else
            for (s = 0; s < n.length; s++) {
              var u;
              if (!n[s].is2d())(u = n[s].rayIntersect(p, i, r, a)) && l.push(u)
            }
        return l.length ? (l.sort((function (e, t) {
          return e.distance - t.distance
        })), l[0]) : null
      }
      if (!n.length || n[0].is2d()) return null;
      var h = n[0];
      return o && -1 === o.indexOf(h.id) ? null : h.rayIntersect(p, i, r, a)
    }, this.getRenderProgress = function () {
      return n[0].getRenderProgress()
    }, this.getModels = function () {
      return n
    }, this.getHiddenModels = function () {
      return d
    }, this.getFragmentList = function () {
      return n[0].getFragmentList()
    }, this.getGeometryList = function () {
      return n[0].getGeometryList()
    }, this.getSceneCount = function () {
      return n[0].getSceneCount()
    }, this.getGeomScenes = function () {
      return n[0].getGeomScenes()
    }, this.explode = function (e) {
      if (n.length) {
        for (var t = 0; t < n.length; t++) {
          var i = n[t];
          l.a.explode(i, e)
        }
        this.invalidateVisibleBounds()
      }
    }, this.update = function (e) {
      for (var t = !1, i = 0; i < n.length; i++) {
        var r = n[i];
        t = t || r.update(e)
      }
      return t
    }, this.hideModel = function (e) {
      for (var t = 0; t < n.length; t++) {
        var i = n[t];
        if (i && i.id === e) return this.removeModel(i), d.push(i), !0
      }
      return !1
    }, this.showModel = function (e) {
      for (var t = 0; t < d.length; ++t) {
        var n = d[t];
        if (n && n.id === e) return this.addModel(n), d.splice(t, 1), !0
      }
      return !1
    }
  }
}, function (e, t, n) {
  "use strict";
  n.r(t), n.d(t, "Selector", (function () {
    return c
  })), n.d(t, "MultiModelSelector", (function () {
    return u
  }));
  var i = n(109),
    r = n(89),
    o = n(9),
    a = n(1),
    s = n(2),
    l = n(0);

  function c(e, t) {
    var n = this;
    this.selectedObjectIds = {}, this.selectionCount = 0, this.selectionMode = i.SelectionMode.LEAF_OBJECT, this.lockedNodes = [];
    var s = {};

    function c() {
      return t.getData().instanceTree
    }

    function u(n) {
      var i = c();
      if (s[n] > 0) s[n]--, 0 == s[n] && e.highlightObjectNode(t, n, !1);
      else if (s[n] < 0) throw "Selection State machine broken. Negatively selected object!";
      i && i.enumNodeChildren(n, (function (e) {
        u(e)
      }), !1)
    }

    function h(n, i, o) {
      var a = c();
      if (s[n]) s[n]++;
      else {
        switch (o) {
          default:
          case r.SelectionType.MIXED:
            e.highlightObjectNode(t, n, !0, i);
            break;
          case r.SelectionType.REGULAR:
            e.highlightObjectNode(t, n, !0, !0);
            break;
          case r.SelectionType.OVERLAYED:
            e.highlightObjectNode(t, n, !0, !1)
        }
        s[n] = 1
      }
      a && a.enumNodeChildren(n, (function (e) {
        h(e, !0, o)
      }), !1)
    }

    function d(e) {
      if (void 0 !== e && n.selectedObjectIds[e]) return !0
    }

    function f(e, t) {
      if (!n.isNodeSelectionLocked(e)) {
        var i = c();
        if (t = t || r.SelectionType.MIXED, !i || (e = i.findNodeForSelection(e, n.selectionMode), i.isNodeSelectable(e))) d(e) || (n.selectedObjectIds[e] = t, n.selectionCount++, h(e, !1, t))
      }
    }

    function p(e) {
      d(e) && (u(e), n.selectedObjectIds[e] = 0, n.selectionCount--)
    }
    this.getInstanceTree = c, this.hasSelection = function () {
      return n.selectionCount > 0
    }, this.getSelectionLength = function () {
      return n.selectionCount
    }, this.getSelection = function () {
      var e = [],
        t = n.selectedObjectIds;
      for (var i in t)
        if (t[i]) {
          var r = parseInt(i);
          e.push(r)
        } return e
    }, this.isSelected = function (e) {
      return d(e)
    }, this.clearNodeSelection = function (e) {
      return void 0 !== e && 0 !== this.selectionCount && (u(e), delete n.selectedObjectIds[e], !0)
    }, this.clearSelection = function (e) {
      if (this.selectionCount > 0) {
        var t = n.selectedObjectIds;
        for (var i in t) {
          var r = parseInt(i);
          void 0 !== r && u(r)
        }
        return n.selectedObjectIds = {}, n.selectionCount = 0, !0
      }
    }, this.deselectInvisible = function () {
      var i = !1,
        r = n.selectedObjectIds,
        o = e.visibilityManager;
      for (var a in r) {
        var s = parseInt(a);
        s && !o.isNodeVisible(t, s) && (p(s), i = !0)
      }
      return i
    }, this.toggleSelection = function (e, t) {
      e ? d(e) ? p(e) : f(e, t) : a.logger.error("Attempting to select node 0.", Object(o.errorCodeString)(o.ErrorCodes.VIEWER_INTERNAL_ERROR))
    }, this.setSelectionMode = function (e) {
      this.clearSelection(!0), this.selectionMode = e
    }, this.isNodeSelectionLocked = function (e) {
      if (-1 === e) return !1;
      var t = c();
      return t ? t.isNodeSelectionLocked(e) : -1 !== n.lockedNodes.indexOf(e)
    }, this.lockSelection = function (e, t) {
      var i = c();

      function r(e, t) {
        if (e && -1 !== e)
          if (t) - 1 === n.lockedNodes.indexOf(e) && (n.lockedNodes.push(e), n.clearNodeSelection(e));
          else {
            var i = n.lockedNodes.indexOf(e);
            n.lockedNodes.splice(i, 1)
          }
      }
      e = Array.isArray(e) ? e : [e], i ? e.forEach((function (e) {
        i.enumNodeChildren(e, (function (e) {
          i.lockNodeSelection(e, !1), r(e, t), t && i.lockNodeSelection(e, t)
        }), !0)
      })) : e.forEach((function (e) {
        r(e, t)
      }))
    }, this.setSelection = function (e, t) {
      if (! function (e) {
          if (n.selectionCount !== e.length) return !1;
          for (var t = 0; t < e.length; t++)
            if (!d(e[t])) return !1;
          return !0
        }(e) && (this.clearSelection(!0), null != e && 0 !== e.length))
        for (var i = 0; i < e.length; i++) f(e[i], t)
    }, this.getSelectionBounds = function () {
      var e = new l.Box3,
        i = new l.Box3,
        r = c();
      if (r) {
        var o = t.getFragmentList(),
          a = n.selectedObjectIds;
        for (var s in a) {
          var u = parseInt(s);
          r.enumNodeFragments(u, (function (t) {
            o.getWorldBounds(t, i), e.union(i)
          }), !0)
        }
      }
      return e
    }, this.getSelectionVisibility = function () {
      var e = !1,
        i = !1,
        r = n.selectedObjectIds;
      for (var o in r) {
        var a = parseInt(o);
        if (a) {
          var s = c();
          if (s && s.isNodeHidden(a) ? i = !0 : e = !0, e && i) break
        }
      }
      return {
        hasVisible: e,
        hasHidden: i,
        model: t
      }
    }, this.update2DSelectionHighlighting = function () {
      if (t.isLoadDone()) {
        var e = t.getPropertyDb();
        if (!e || e.isLoadDone()) {
          s = {};
          for (var i = n.getSelection(), r = 0; r < i.length; r++) {
            var o = i[r];
            h(o, !1, n.selectedObjectIds[o])
          }
        }
      }
    }, this.dtor = function () {
      this.selectedObjectIds = null
    }
  }

  function u(e) {
    var t = [];

    function n() {
      t.length > 1 && a.logger.warn("This selection call does not yet support multiple models.")
    }

    function i() {
      for (var n, i = [], r = 0; r < t.length; r++) {
        var o = [],
          a = [],
          l = t[r].selector.selectedObjectIds,
          c = t[r].selector.getInstanceTree();
        for (var u in l)
          if (l[u]) {
            var h = parseInt(u);
            h && (o.push(h), c && c.enumNodeFragments(h, (function (e) {
              a.push(e)
            }), !1))
          } o.length && i.push({
          fragIdsArray: a,
          dbIdArray: o,
          nodeArray: o,
          model: t[r]
        })
      }
      1 === t.length && (n = {
        type: s.SELECTION_CHANGED_EVENT,
        fragIdsArray: i[0] ? i[0].fragIdsArray : [],
        dbIdArray: i[0] ? i[0].dbIdArray : [],
        nodeArray: i[0] ? i[0].dbIdArray : [],
        model: t[0]
      }, e.api.dispatchEvent(n)), n = {
        type: s.AGGREGATE_SELECTION_CHANGED_EVENT,
        selections: i
      }, e.api.dispatchEvent(n)
    }

    function r() {
      for (var e = !1, n = 0; n < t.length; n++) e = t[n].selector.deselectInvisible() || e;
      e && i()
    }

    function o(e) {
      e.model.is2d() && e.model.selector && e.model.selector.update2DSelectionHighlighting()
    }
    this.highlightDisabled = !1, this.highlightPaused = !1, this.selectionDisabled = !1, this.addModel = function (n) {
      -1 == t.indexOf(n) && (n.selector = new c(e, n), t.push(n))
    }, this.removeModel = function (e) {
      var n = t.indexOf(e);
      e.selector.getSelection();
      e.selector.clearSelection(), e.selector = null, t.splice(n, 1)
    }, this.hasSelection = function () {
      for (var e = 0; e < t.length; e++)
        if (t[e].selector.hasSelection()) return !0;
      return !1
    }, this.getSelectionLength = function () {
      for (var e = 0, n = 0; n < t.length; n++) e += t[n].selector.getSelectionLength();
      return e
    }, this.getSelection = function () {
      return n(), t.length > 1 && a.logger.warn("Use getAggregateSelection instead of getSelection when there are multiple models in the scene."), t[0] ? t[0].selector.getSelection() : []
    }, this.getAggregateSelection = function () {
      for (var e = [], n = 0; n < t.length; n++) {
        var i = t[n].selector.getSelection();
        i && i.length && e.push({
          model: t[n],
          selection: i
        })
      }
      return e
    }, this.clearSelection = function (e) {
      for (var n, r = 0; r < t.length; r++) t[r].selector.clearSelection(e) && (n = !0);
      !e && n && i()
    }, this.toggleSelection = function (e, r, o) {
      this.selectionDisabled || (r || (n(), r = t[0]), r.selector.toggleSelection(e, o), i())
    }, this.setSelectionMode = function (e) {
      for (var n = 0; n < t.length; n++) t[n].selector.setSelectionMode(e)
    }, this.isNodeSelectionLocked = function (e, i) {
      return i || (n(), i = t[0]), i && i.selector.isNodeSelectionLocked(e)
    }, this.lockSelection = function (e, i, r) {
      r || (n(), r = t[0]), r && r.selector.lockSelection(e, i)
    }, this.unlockSelection = function (e, i) {
      var r = this;
      e || i ? (i || (n(), i = t[0]), e = e || i.selector.lockedNodes.slice(), this.lockSelection(e, !1, i)) : t.forEach((function (e) {
        var t = e.selector.lockedNodes.slice();
        r.lockSelection(t, !1, e)
      }))
    }, this.setSelection = function (e, r, o) {
      if (!this.selectionDisabled) {
        if (e && 0 !== e.length) {
          if (r)
            for (var a = 0; a < t.length; a++) t[a] !== r && t[a].selector.clearSelection();
          else n(), r = t[0];
          r.selector.setSelection(e, o)
        } else this.clearSelection(!0);
        i()
      }
    }, this.setAggregateSelection = function (e) {
      if (!this.selectionDisabled) {
        if (e && 0 !== e.length)
          for (var t = 0; t < e.length; ++t) {
            var n = e[t].model,
              r = e[t].ids,
              o = e[t].selectionType;
            n.selector.setSelection(r, o)
          } else this.clearSelection(!0);
        i()
      }
    }, this.getSelectionBounds = function () {
      if (1 == t.length) return t[0].selector.getSelectionBounds();
      for (var e = new l.Box3, n = 0; n < t.length; n++) {
        var i = t[n].selector.getSelectionBounds();
        e.union(i)
      }
      return e
    }, this.getSelectionVisibility = function () {
      for (var e = {
          hasVisible: !1,
          hasHidden: !1,
          details: []
        }, n = 0; n < t.length; n++) {
        var i = t[n].selector.getSelectionVisibility();
        e.hasVisible = e.hasVisible || i.hasVisible, e.hasHidden = e.hasHidden || i.hasHidden, e.details.push(i)
      }
      return e
    }, this.dtor = function () {
      for (var e = 0; e < t.length; e++) t[e].selector.dtor()
    }, e.api.addEventListener(s.ISOLATE_EVENT, (function (e) {
      r()
    })), e.api.addEventListener(s.HIDE_EVENT, (function (e) {
      r()
    })), e.api.addEventListener(s.GEOMETRY_LOADED_EVENT, o), e.api.addEventListener(s.OBJECT_TREE_CREATED_EVENT, o), e.api.addEventListener(s.OBJECT_TREE_UNAVAILABLE_EVENT, o)
  }
}, function (e, t, n) {
  "use strict";
  n.r(t), n.d(t, "VisibilityManager", (function () {
    return a
  })), n.d(t, "MultiModelVisibilityManager", (function () {
    return s
  }));
  var i = n(1),
    r = n(2);

  function o(e) {
    return (o = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (e) {
      return typeof e
    } : function (e) {
      return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
    })(e)
  }

  function a(e, t) {
    this.viewerImpl = e, this.model = t, this.isolatedNodes = [], this.hiddenNodes = []
  }

  function s(e) {
    this.viewerImpl = e, this.models = []
  }

  function l(e) {
    var t = e.getAggregateIsolatedNodes();
    if (1 === e.models.length) {
      var n = {
        type: r.ISOLATE_EVENT,
        nodeIdArray: t.length ? t[0].ids : [],
        model: e.models[0]
      };
      e.viewerImpl.api.dispatchEvent(n)
    }
    n = {
      type: r.AGGREGATE_ISOLATION_CHANGED_EVENT,
      isolation: t
    };
    e.viewerImpl.api.dispatchEvent(n)
  }
  a.prototype.getInstanceTree = function () {
    return this.model ? this.model.getData().instanceTree : null
  }, a.prototype.getIsolatedNodes = function () {
    return this.isolatedNodes.slice(0)
  }, a.prototype.getHiddenNodes = function () {
    return this.hiddenNodes.slice(0)
  }, a.prototype.setAllVisibility = function (e) {
    var t = this.model ? this.model.getRootId() : null;
    t && this.setVisibilityOnNode(t, e), this.model.getData().is2d && this.model.setAllVisibility(e)
  }, a.prototype.isNodeVisible = function (e) {
    var t = this.getInstanceTree();
    return t ? !t.isNodeHidden(e) : -1 == this.hiddenNodes.indexOf(e) && (0 == this.isolatedNodes.length || -1 != this.isolatedNodes.indexOf(e))
  }, a.prototype.isolate = function (e) {
    var t = this.getInstanceTree(),
      n = t ? t.getRootId() : null,
      i = "number" == typeof e && e === n || "object" == o(e) && e.dbId === n;
    e && !i ? this.isolateMultiple(Array.isArray(e) ? e : [e]) : this.isolateNone()
  }, a.prototype.isolateNone = function () {
    this.model.setAllVisibility(!0), this.viewerImpl.sceneUpdated(!0), this.setAllVisibility(!0), this.hiddenNodes = [], this.isolatedNodes = [], this.viewerImpl.invalidate(!0)
  }, a.prototype.isolateMultiple = function (e) {
    if (e && 0 != e.length) {
      this.model.getData().is2d || (this.model.setAllVisibility(!1), this.viewerImpl.sceneUpdated(!0)), this.setAllVisibility(!1), this.isolatedNodes = e.slice(0), this.hiddenNodes = [];
      for (var t = 0; t < e.length; t++) this.setVisibilityOnNode(e[t], !0)
    } else this.isolateNone();
    this.viewerImpl.invalidate(!0)
  }, a.prototype.hide = function (e) {
    var t, n = !(arguments.length > 1 && void 0 !== arguments[1]) || arguments[1];
    if (Array.isArray(e)) {
      for (var i = 0; i < e.length; ++i) this.setVisibilityOnNode(e[i], !1);
      e.length > 0 && (t = {
        type: r.HIDE_EVENT,
        nodeIdArray: e,
        model: this.model
      })
    } else this.setVisibilityOnNode(e, !1), t = {
      type: r.HIDE_EVENT,
      nodeIdArray: [e],
      model: this.model
    };
    t && n && this.viewerImpl.api.dispatchEvent(t)
  }, a.prototype.show = function (e) {
    var t;
    if (Array.isArray(e)) {
      for (var n = 0; n < e.length; ++n) this.setVisibilityOnNode(e[n], !0);
      e.length > 0 && (t = {
        type: r.SHOW_EVENT,
        nodeIdArray: e,
        model: this.model
      })
    } else this.setVisibilityOnNode(e, !0), t = {
      type: r.SHOW_EVENT,
      nodeIdArray: [e],
      model: this.model
    };
    t && this.viewerImpl.api.dispatchEvent(t)
  }, a.prototype.toggleVisibility = function (e) {
    var t = this.getInstanceTree().isNodeHidden(e);
    this.setVisibilityOnNode(e, t);
    var n = {
      type: t ? r.SHOW_EVENT : r.HIDE_EVENT,
      nodeIdArray: [e],
      model: this.model
    };
    this.viewerImpl.api.dispatchEvent(n)
  }, a.prototype.setVisibilityOnNode = function (e, t) {
    var n = this.viewerImpl,
      i = this.model,
      r = this.getInstanceTree(),
      o = !t,
      a = i.getData().is2d;
    this.viewerImpl.matman();
    r ? r.enumNodeChildren(e, (function (e) {
      var n = r.isNodeVisibleLocked(e);
      if (r.setNodeHidden(e, o && !n), a) {
        var s = i.reverseMapDbId(e);
        i.getFragmentList().setObject2DGhosted(s, !t && !n)
      } else r.enumNodeFragments(e, (function (e) {
        i.setVisibility(e, t || n)
      }), !1)
    }), !0) : a ? i.getFragmentList().setObject2DGhosted(e, !t) : i.setVisibility(e, t), n.sceneUpdated(!0), this.updateNodeVisibilityTracking(e, t)
  }, a.prototype.updateNodeVisibilityTracking = function (e, t) {
    var n = t;
    if (this.isolatedNodes.length > 0) {
      var i = this.isolatedNodes.indexOf(e);
      n && -1 === i ? this.isolatedNodes.push(e) : n || -1 === i || (this.isolatedNodes.splice(i, 1), 0 === this.isolatedNodes.length && (this.hiddenNodes = [this.model.getRootId()]))
    } else {
      var r = this.hiddenNodes.indexOf(e);
      n || -1 !== r ? n && -1 !== r && this.hiddenNodes.splice(r, 1) : this.hiddenNodes.push(e)
    }
    var o = this.getInstanceTree();
    o && o.root && o.root.dbId === e && (t ? (this.isolatedNodes = [], this.hiddenNodes = []) : (this.isolatedNodes = [], this.hiddenNodes = [e]))
  }, a.prototype.toggleNodeVisibleLocked = function (e) {
    var t = this.getInstanceTree().isNodeVisbileLocked(e);
    this.lockNodeVisible(e, !t)
  }, a.prototype.lockNodeVisible = function (e, t) {
    var n = this,
      i = this.viewerImpl,
      r = this.model,
      o = this.getInstanceTree(),
      a = r.getData().is2d;
    if (o) {
      var s = function (e) {
        o.enumNodeChildren(e, (function (e) {
          if (o.lockNodeVisible(e, t), t)
            if (o.setNodeHidden(e, !1), a) {
              var n = r.reverseMapDbId(e);
              r.getFragmentList().setObject2DGhosted(n, !1)
            } else o.enumNodeFragments(e, (function (e) {
              r.setVisibility(e, !0)
            }), !1)
        }), !0), t && (i.sceneUpdated(!0), n.updateNodeVisibilityTracking(e, t))
      };
      Array.isArray(e) ? e.forEach(s) : s(e)
    }
  }, a.prototype.isNodeVisibleLocked = function (e) {
    var t = this.getInstanceTree();
    return t && t.isNodeVisibleLocked(e)
  }, a.prototype.setNodeOff = function (e, t, n, i) {
    var r, o, a = this.viewerImpl,
      s = this.model,
      l = this.getInstanceTree(),
      c = s.getData().is2d;
    if (!l) return c ? s.getFragmentList().setObject2DVisible(e, !t) : s.getFragmentList().setFragOff(e, t), void a.sceneUpdated(!0);
    if (n && i)
      if (c)
        for (var u = 0; u < n.length; ++u) {
          r = n[u], l.setNodeOff(r, t);
          var h = s.reverseMapDbId(r);
          s.getFragmentList().setObject2DVisible(h, !t)
        } else {
          for (var d = 0; d < n.length; ++d) r = n[d], l.setNodeOff(r, t);
          for (var f = 0; f < i.length; ++f) o = i[f], s.getFragmentList().setFragOff(o, t)
        } else l.enumNodeChildren(e, (function (e) {
          if (l.setNodeOff(e, t), c) {
            var n = s.reverseMapDbId(e);
            s.getFragmentList().setObject2DVisible(n, !t)
          } else l.enumNodeFragments(e, (function (e) {
            s.getFragmentList().setFragOff(e, t)
          }), !1)
        }), !0);
    a.sceneUpdated(!0)
  }, s.prototype.addModel = function (e) {
    -1 == this.models.indexOf(e) && (e.visibilityManager = new a(this.viewerImpl, e), this.models.push(e))
  }, s.prototype.removeModel = function (e) {
    var t = this.models.indexOf(e);
    e.visibilityManager.isolateNone(), e.visibilityManager = null, this.models.splice(t, 1)
  }, s.prototype.warn = function () {
    this.models.length > 1 && i.logger.warn("This selection call does not yet support multiple models.")
  }, s.prototype.getAggregateIsolatedNodes = function () {
    for (var e = [], t = this.models, n = 0; n < t.length; n++) {
      var i = t[n].visibilityManager.getIsolatedNodes();
      i && i.length && e.push({
        model: t[n],
        ids: i
      })
    }
    return e
  }, s.prototype.getIsolatedNodes = function (e) {
    return e || (this.warn(), e = this.models[0]), e.visibilityManager.getIsolatedNodes()
  }, s.prototype.getAggregateHiddenNodes = function () {
    for (var e = [], t = this.models, n = 0; n < t.length; n++) {
      var i = t[n].visibilityManager.getHiddenNodes();
      i && i.length && e.push({
        model: t[n],
        ids: i
      })
    }
    return e
  }, s.prototype.getHiddenNodes = function (e) {
    return e || (this.warn(), e = this.models[0]), e.visibilityManager.getHiddenNodes()
  }, s.prototype.isNodeVisible = function (e, t) {
    return e || (this.warn(), e = this.models[0]), e.visibilityManager.isNodeVisible(t)
  }, s.prototype.isolate = function (e, t) {
    t || (this.warn(), t = this.models[0]), t.visibilityManager.isolate(e), l(this)
  }, s.prototype.aggregateIsolate = function (e, t) {
    if (e && 0 !== e.length) {
      var n = this.models.concat();
      for (s = 0; s < e.length; ++s) {
        var i = e[s].model,
          r = e[s].ids || e[s].selection,
          o = n.indexOf(i);
        n.splice(o, 1), i.visibilityManager.isolate(r)
      }
      for (var a = !t || void 0 !== t.hideLoadedModels && t.hideLoadedModels; n.length && a;) n.pop().visibilityManager.setAllVisibility(!1)
    } else
      for (var s = 0; s < this.models.length; ++s) this.models[s].visibilityManager.isolateNone();
    l(this)
  }, s.prototype.hide = function (e, t) {
    t || (this.warn(), t = this.models[0]), t.visibilityManager.hide(e)
  }, s.prototype.aggregateHide = function (e) {
    if (e && 0 !== e.length) {
      for (var t = 0; t < e.length; ++t) {
        var n = e[t].model,
          i = e[t].ids || e[t].selection;
        n.visibilityManager.hide(i, 1 === this.models.length)
      }
      var o = this.getAggregateHiddenNodes(),
        a = {
          type: r.AGGREGATE_HIDDEN_CHANGED_EVENT,
          hidden: o
        };
      this.viewerImpl.api.dispatchEvent(a)
    }
  }, s.prototype.show = function (e, t) {
    t || (this.warn(), t = this.models[0]), t.visibilityManager.show(e)
  }, s.prototype.toggleVisibility = function (e, t) {
    t || (this.warn(), t = this.models[0]), t.visibilityManager.toggleVisibility(e)
  }, s.prototype.setVisibilityOnNode = function (e, t, n) {
    n || (this.warn(), n = this.models[0]), n.visibilityManager.setVisibilityOnNode(e, t)
  }, s.prototype.toggleVisibleLocked = function (e, t) {
    t || (this.warn(), t = this.models[0]), t.visibilityManager.toggleVisibleLocked(e)
  }, s.prototype.lockNodeVisible = function (e, t, n) {
    n || (this.warn(), n = this.models[0]), n.visibilityManager.lockNodeVisible(e, t)
  }, s.prototype.isNodeVisibleLocked = function (e, t) {
    return t || (this.warn(), t = this.models[0]), t.visibilityManager.isNodeVisibleLocked(e, t)
  }, s.prototype.setNodeOff = function (e, t, n, i, r) {
    n || (this.warn(), n = this.models[0]), n.visibilityManager.setNodeOff(e, t, i, r)
  }
}, function (e, t, n) {
  "use strict";
  n.r(t), n.d(t, "ModelLayers", (function () {
    return a
  }));
  var i = n(1),
    r = n(2),
    o = {
      name: "root",
      id: "root",
      isLayer: !1,
      children: [],
      childCount: 0
    };

  function a(e) {
    this.viewer = e, this.matman = e.matman(), this.model = null, this.root = null, this.initialized = !1, this.layerToIndex = {}, this.indexToLayer = [null], this.nodeToLayer = []
  }
  var s = a.prototype;

  function l(e) {
    var t = e.getData(),
      n = o;
    return t && t.layersRoot && (n = t.layersRoot), Promise.resolve(n)
  }

  function c(e) {
    if (e.getData().loadOptions.skipPropertyDb) return Promise.resolve(null);
    var t = e.getPropertyDb();
    return !t || e.getData().loadOptions.disable3DModelLayers ? Promise.resolve(o) : t.findLayers()
  }

  function u(e, t) {
    var n = e.model,
      i = e.indexToLayer;
    if (n.is2d()) {
      if (!n.getData().layerCount) return;
      var r = [];
      for (var o in e.layerToIndex) r.push(e.layerToIndex[o]);
      e.matman.setLayerVisible(r, t, n.id), e.viewer.invalidate(!0)
    } else {
      var a = [],
        s = t ? e.viewer.visibilityManager.show : e.viewer.visibilityManager.hide;
      h(e, (function (e, r) {
        i[r].visible !== t && (a.push(e), 1024 === a.length && (s(a, n), a.length = 0))
      })), a.length > 0 && s(a, n)
    }
    for (var l = i.length, c = 1; c < l; ++c) {
      var u = i[c];
      u && (u.visible = t)
    }
  }

  function h(e, t) {
    var n = e.nodeToLayer;
    if (n && n.length) {
      var i = e.model.getData().instanceTree.nodeAccess;
      for (var r in i.dbIdToIndex) {
        var o = n[i.dbIdToIndex[r]] || 0;
        0 !== o && t(0 | r, o)
      }
    }
  }

  function d(e, t) {
    return "number" == typeof t ? t : e.layerToIndex[t.name || t] || 0
  }

  function f(e) {
    return !e.layer.isLayer
  }

  function p(e) {
    if (!e) return [];
    var t = [],
      n = 0;
    ! function e(t, n) {
      for (var i = 0; i < t.length; ++i) {
        var r = t[i];
        n(r), r.children && e(r.children, n)
      }
    }(e, (function (e) {
      t.push(e), e.isLayer && (n = Math.max(n, 0 | e.index))
    }));
    for (var i = 0; i < t.length; ++i) t[i].isLayer || (t[i].index = ++n);
    return t
  }
  s.addModel = function (e) {
    var t = arguments.length > 1 && void 0 !== arguments[1] && arguments[1];
    if (!this.initialized && (e.is2d() || !t)) {
      var n = function (t) {
          var n = this.model.getData().instanceTree;
          if (t) {
            t.children = t.children || [];
            var r = p(t.children);
            t.childCount = r.length, this.indexToLayer = new Array(t.childCount + 1), this.indexToLayer[0] = null;
            for (var o = 0; o < t.childCount; ++o) {
              var a = r[o],
                s = null == a.visible || a.visible;
              this.layerToIndex[a.name] = a.index, this.indexToLayer[a.index] = {
                layer: a,
                visible: s
              }
            }
            if (!this.model.is2d() && 0 !== t.childCount) {
              this.nodeToLayer = t.childCount <= 256 ? new Uint8Array(n.nodeAccess.getNumNodes()) : new Uint16Array(n.nodeAccess.getNumNodes());
              var l = function (e) {
                  if (this.model) {
                    var t = this.model.getData().instanceTree;
                    for (var n in e)
                      if (e.hasOwnProperty(n))
                        for (var i = this.layerToIndex[n], r = e[n], o = 0, a = r.length; o < a; ++o) {
                          var s = t.nodeAccess.getIndex(r[o]);
                          this.nodeToLayer[s] = i
                        }
                  }
                }.bind(this),
                c = function () {
                  i.logger.warn("ModelLayers error: coudn't get layers from property database.")
                }.bind(this);
              e.getLayerToNodeIdMapping(l, c)
            }
          }
        }.bind(this),
        a = function (t) {
          this.root = t, this.initialized = !0, this.activateLayerState("Initial"), this.viewer.api.dispatchEvent({
            type: r.MODEL_LAYERS_LOADED_EVENT,
            model: e,
            root: t
          })
        }.bind(this);
      this.model = e, (e.is2d() ? l(e) : c(e)).then((function (e) {
        n(e), a(e)
      })).catch((function (e) {
        i.logger.warn(e), a(o)
      }))
    }
  }, s.removeModel = function (e) {
    this.model === e && (this.model = null, this.root = null, this.initialized = !1, this.layerToIndex = {}, this.indexToLayer = [null], this.nodeToLayer = [])
  }, s.getRoot = function () {
    return this.initialized || i.logger.warn("Autodesk.Viewing.ModelLayers.getRoot couldn't peform action, layers are still being loaded"), this.root
  }, s.showAllLayers = function () {
    this.initialized ? u(this, !0) : i.logger.warn("Autodesk.Viewing.ModelLayers.showAllLayers couldn't peform action, layers are still being loaded")
  }, s.hideAllLayers = function () {
    this.initialized ? u(this, !1) : i.logger.warn("Autodesk.Viewing.ModelLayers.hideAllLayers couldn't peform action, layers are still being loaded")
  }, s.isLayerVisible = function (e) {
    if (!this.initialized) return i.logger.warn("Autodesk.Viewing.ModelLayers.isLayerVisible couldn't peform action, layers are still being loaded"), !1;
    var t = d(this, e),
      n = this.indexToLayer[t];
    if (f(n)) {
      for (var r = n.layer.children, o = 0; o < r.length; ++o) {
        var a = r[o].index;
        if (this.indexToLayer[a].visible) return !0
      }
      return !1
    }
    return n.visible
  }, s.setLayerVisible = function (e, t) {
    if (this.initialized) {
      for (var n = Array.isArray(e) ? e : [e], r = (n = e.map(function (e) {
          return d(this, e)
        }.bind(this))).length, o = 0; o < r; ++o) {
        var a = n[o],
          s = this.indexToLayer[a];
        if (f(s)) s.layer.children.forEach((function (e) {
          n.push(e.index)
        }))
      }
      var l = this.model,
        c = this.indexToLayer;
      if (l.is2d()) this.matman.setLayerVisible(n, t, l.id), this.viewer.invalidate(!0);
      else {
        var u = c.map((function (e) {
            return !(null !== e && -1 !== n.indexOf(e.layer.index) && e.visible !== t)
          })),
          p = [],
          m = t ? this.viewer.visibilityManager.show : this.viewer.visibilityManager.hide;
        h(this, (function (e, t) {
          u[t] || (p.push(e), 1024 === p.length && (m(p, l), p.length = 0))
        })), p.length > 0 && m(p, l)
      }
      var g = n.length;
      for (o = 0; o < g; ++o) {
        var v = this.indexToLayer[n[o]];
        v && (v.visible = t)
      }
    } else i.logger.warn("Autodesk.Viewing.ModelLayers.setLayersVisible couldn't peform action, layers are still being loaded")
  }, s.getVisibleLayerIndices = function () {
    if (!this.initialized) return i.logger.warn("Autodesk.Viewing.ModelLayers.getVisibleLayerIndices couldn't peform action, layers are still being loaded"), [];
    for (var e = [], t = this.indexToLayer, n = t.length, r = 1; r < n; ++r) {
      var o = t[r];
      o && o.visible && !f(o) && e.push(o.layer.index)
    }
    return e
  }, s.allLayersVisible = function () {
    if (!this.initialized) return !0;
    for (var e = this.indexToLayer, t = e.length, n = 1; n < t; ++n) {
      var i = e[n];
      if (i && !i.visible) return !1
    }
    return !0
  }, s.activateLayerState = function (e) {
    if (this.initialized && this.model) {
      var t = this.model.getData().metadata,
        n = t ? t.layer_states : null;
      if (!this.model.is3d() && n && e) {
        var r;
        for (r = 0; r < n.length && n[r].name !== e; r++);
        if (r < n.length) {
          var o = n[r].visible_layers,
            a = {};
          if (o && 0 < o.length)
            for (var s = 0; s < o.length; s++) a[o[s]] = 1;
          var l = [],
            c = [];
          for (var u in t.layers) {
            var h = t.layers[u].name;
            u |= 0, 1 === a[h] ? l.push(u) : c.push(u)
          }
          this.setLayerVisible(l, !0), this.setLayerVisible(c, !1)
        }
      }
    } else i.logger.warn("Autodesk.Viewing.ModelLayers.activateLayerState couldn't peform action, layers are still being loaded")
  }, s.getLayerStates = function () {
    function e(e, t) {
      var n = Object.getOwnPropertyNames(e),
        i = Object.getOwnPropertyNames(t);
      if (n.length !== i.length) return !1;
      for (var r = 0; r < n.length; ++r) {
        var o = n[r];
        if (e[o] !== t[o]) return !1
      }
      return !0
    }
    if (!this.initialized) return i.logger.warn("Autodesk.Viewing.ModelLayers.getLayerStates couldn't peform action, layers are still being loaded"), null;
    var t, n = this.model,
      r = n ? n.getData().metadata : null,
      o = r ? r.layers : null,
      a = r ? r.layer_states : null;
    if (this.model.is3d() || !o || !a) return null;
    var s = {},
      l = {};
    for (var c in o)
      if (o.hasOwnProperty(c)) {
        var u = parseInt(c),
          h = o[c];
        s[t = "string" == typeof h ? h : h.name] = !0, this.isLayerVisible(u) && (l[t] = !0)
      } for (var d = [], f = 0; f < a.length; ++f) {
      var p = a[f],
        m = p.visible_layers,
        g = {};
      if (!p.hidden) {
        if (m && 0 < m.length)
          for (var v = 0; v < m.length; ++v) t = m[v], s.hasOwnProperty(t) && (g[t] = !0);
        d.push({
          name: p.name,
          description: p.description,
          active: e(l, g)
        })
      }
    }
    return 0 < d.length ? d : null
  }
}, function (e, t, n) {
  "use strict";

  function i(e, t) {
    for (var n = 0; n < t.length; n++) {
      var i = t[n];
      i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(e, i.key, i)
    }
  }
  n.r(t), n.d(t, "OverlayManager", (function () {
    return r
  }));
  var r = function () {
    function e(t) {
      ! function (e, t) {
        if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
      }(this, e), this.impl = t
    }
    var t, n, r;
    return t = e, (n = [{
      key: "dtor",
      value: function () {
        this.impl = null
      }
    }, {
      key: "addScene",
      value: function (e) {
        return !!e && (this.impl.overlayScenes.hasOwnProperty(e) || this.impl.createOverlayScene(e), !0)
      }
    }, {
      key: "removeScene",
      value: function (e) {
        return !!e && (this.impl.removeOverlayScene(e), !0)
      }
    }, {
      key: "clearScene",
      value: function (e) {
        this.impl.clearOverlay(e)
      }
    }, {
      key: "hasScene",
      value: function (e) {
        return !!e && this.impl.overlayScenes.hasOwnProperty(e)
      }
    }, {
      key: "addMesh",
      value: function (e, t) {
        return !!(e && t && this.impl.overlayScenes.hasOwnProperty(t)) && (e = Array.isArray(e) ? e : [e], this.impl.addMultipleOverlays(t, e), !0)
      }
    }, {
      key: "removeMesh",
      value: function (e, t) {
        return !!(e && t && this.impl.overlayScenes.hasOwnProperty(t)) && (e = Array.isArray(e) ? e : [e], this.impl.removeMultipleOverlays(t, e), !0)
      }
    }, {
      key: "hasMesh",
      value: function (e, t) {
        var n = this.impl.overlayScenes[t];
        if (!n) return !1;
        for (var i = n.scene.children, r = 0, o = i.length; r < o; ++r)
          if (i[r] === e) return !0;
        return !1
      }
    }]) && i(t.prototype, n), r && i(t, r), e
  }()
}, function (e, t, n) {
  "use strict";
  n.r(t), n.d(t, "consolidateFragmentList", (function () {
    return c
  }));
  var i = n(95),
    r = n(175),
    o = n(106),
    a = n(0);
  var s, l = (s = null, function (e, t, n, i, l, c) {
    var u = e.getFragmentList();
    s || (s = new a.Matrix4);
    var h = n[i],
      d = u.getGeometry(h),
      f = u.getMaterial(h),
      p = l - i;
    if (1 != p) {
      for (var m = l - 1, g = new r.InstanceBufferBuilder(d, p), v = i; v <= m; v++) {
        var y = n[v];
        u.getOriginalWorldMatrix(y, s);
        var b = u.fragments.fragId2dbId[y];
        if (!g.addInstance(s, b)) {
          var _ = n[m];
          n[m] = y, n[v] = _, --v, --m
        }
      }
      var x = g.finish();
      if (x) {
        var w = t.getMaterialVariant(f, o.MATERIAL_VARIANT.INSTANCED, e);
        c.addContainerMesh(x, w, n, i, p), c.meshes[c.meshes.length - 1].rangeStart = i
      }
      for (v = m + 1; v < l; v++) y = n[v], c.addSingleFragment(u, y)
    } else c.addSingleFragment(u, h)
  });

  function c(e, t, n, r, o) {
    var s = e.getFragmentList(),
      c = r.supportsInstancedArrays();
    n = n || 100 << 20;
    var u = function (e) {
      for (var t = e.getCount(), n = [], i = 0; i < t; i++) {
        var r = e.getGeometryId(i),
          o = 0 | n[r];
        n[r] = o + 1
      }
      return n
    }(s);
    if (!o) {
      var h = function (e, t) {
        function n(n, i) {
          var r = e.getGeometry(n),
            o = e.getGeometry(i),
            a = e.getGeometryId(n),
            s = e.getGeometryId(i),
            l = t[a],
            c = t[s],
            u = l * r.byteSize,
            h = c * o.byteSize;
          return u != h ? u - h : r.id != o.id ? r.id - o.id : e.getMaterialId(n) - e.getMaterialId(i)
        }
        for (var i = 0, r = e.getCount(), o = new Int32Array(r), a = 0; a < r; a++) e.getGeometry(a) && (o[i] = a, i++);
        if (i < r && (o = new Int32Array(o.buffer, o.byteOffset, i)), o.sort) o.sort(n);
        else {
          var s = new Array(r);
          for (a = 0; a < r; a++) s[a] = o[a];
          for (s.sort(n), a = 0; a < o.length; a++) o[a] = s[a]
        }
        return o
      }(s, u);
      o = function (e, t, n, r) {
        for (var o = new a.Box3, s = new i.ConsolidationBuilder, l = 0; l < n.length && !(s.costs >= r); l++) {
          var c = n[l];
          e.getWorldBounds(c, o);
          var u = e.getGeometry(c),
            h = e.getMaterial(c);
          s.addGeom(u, h, o, c)
        }
        return s.createConsolidationMap(n, l)
      }(s, 0, h, n)
    }
    var d = o.buildConsolidation(s, t, e),
      f = o.fragOrder,
      p = o.numConsolidated;
    if (c) ! function (e, t, n, i, r) {
      var o = e.getFragmentList();
      if (!(i >= n.length)) {
        for (var a = i, s = -1, c = -1, u = i; u < n.length; u++) {
          var h = n[u],
            d = o.getGeometryId(h),
            f = o.getMaterialId(h);
          d == s && f == c || (u != i && l(e, t, n, a, u, r), a = u, s = d, c = f)
        }
        l(e, t, n, a, n.length, r)
      }
    }(e, t, f, p, d);
    else
      for (var m = p; m < f.length; m++) {
        var g = f[m];
        d.addSingleFragment(s, g)
      }! function (e, t, n, i) {
        for (var r = e.geoms, o = [], a = 0, s = 0, l = 0; l < t.meshes.length; l++) {
          var c = t.meshes[l],
            u = c.geometry;
          u.byteSize || (u.byteSize = (u.vb.byteLength || 0) + (u.ib.byteLength || 0));
          var h = Number.isInteger(c.fragId);
          r.chooseMemoryType(u, u.numInstances, a, s), u.streamingDraw || (s += u.byteSize, a += 1, h || (u.discardAfterUpload = !0)), h && (o[u.id] = !0)
        }
        for (l = 1; l < r.geoms.length; l++)
          if ((u = r.geoms[l]) && !o[l]) {
            var d = n[l];
            r.chooseMemoryType(u, d, a, s), u.streamingDraw && i.deallocateGeometry(u), u.streamingDraw || (s += u.byteSize, a += 1)
          }
      }(s, d, u, r);
    var v = e.getModelId();
    for (m = 0; m < d.meshes.length; m++) {
      d.meshes[m].modelId = v
    }
    return d
  }
}, function (e, t, n) {
  "use strict";
  n.r(t), n.d(t, "ConsolidationIterator", (function () {
    return l
  }));
  var i = n(95),
    r = n(175),
    o = n(0),
    a = n(10),
    s = n(1);

  function l(e, t) {
    var n = e,
      l = t,
      c = [],
      u = !1,
      h = [],
      d = [],
      f = new o.Matrix4,
      p = new o.Box3;
    this.getConsolidation = function () {
      return l
    }, this.reset = function () {
      c.length = null, d.length = 0;
      var e = n.getCount(),
        t = a.MeshFlags.MESH_MOVED,
        i = a.MeshFlags.MESH_VISIBLE,
        r = i | a.MeshFlags.MESH_HIDE | a.MeshFlags.MESH_HIGHLIGHTED,
        o = n.vizflags,
        s = l.fragId2MeshIndex;
      l.meshes;
      u = !1;
      for (var h = n.db2ThemingColor.length > 0, f = 0; f < e; f++) {
        var p, m = o[f];
        if (m & t) {
          u = !0;
          break
        }
        if (h) {
          var g = n.fragments.fragId2dbId[f];
          p = n.db2ThemingColor[g]
        }
        var v = s[f];
        d[v] = d[v] || !!(p || m & r ^ i)
      }
    }, this.dispose = function () {
      for (var e = {
          type: "dispose"
        }, t = {
          type: "removed"
        }, n = 0; n < l.meshes.length; n++) {
        var i = l.meshes[n],
          r = i.geometry;
        r && (i.dispatchEvent(t), r.dispatchEvent(e), r.needsUpdate = !0)
      }
    }, this.consolidateNextBatch = function (e, t, i) {
      var r = e.nodeIndex;
      if (u || void 0 === r) return e;
      if (l.inProgress) return e;
      for (var a = function (e) {
          h[e] || (h[e] = new o.Scene);
          var t = h[e];
          return t.children.length = 0, t
        }(r), f = e.start; f < e.lastItem; f++) {
        var m, g = e.indices ? e.indices[f] : f,
          v = l.fragId2MeshIndex[g];
        if (-1 === v) {
          if (!n.getGeometry(g)) continue;
          return s.logger.warn("Warning: Missing fragment in consolidation. Consolidation disabled."), e
        }
        if (!c[v] && (n.getWorldBounds(g, p), t.intersectsBox(p) && (c[v] = !0, (m = l.applyAttributes(v, n, i, d[v])).visible))) {
          var y = m && m.geometry,
            b = y && (y.isLines || y.isWideLines),
            _ = y && y.isPoints;
          n.linesHidden && b || n.pointsHidden && _ || a.children.push(m)
        }
      }
      return a.boundingBox || (a.boundingBox = new o.Box3), e.getBoundingBox(a.boundingBox), a.renderImportance = e.renderImportance, a.sortObjects = e.sortObjects, a
    };
    var m = 1,
      g = 2,
      v = 3;

    function y(e) {
      return e.numInstances ? g : e.attributes.id ? m : v
    }
    this.updateRenderProxy = function (e, t) {
      if (e.geometry && e.geometry.attributes) {
        var o = function (e) {
          if (u) return v;
          var t = l.fragId2MeshIndex[e];
          return y(l.meshes[t].geometry)
        }(t);
        if (y(e.geometry) != o) {
          var a = n.getGeometry(t),
            s = l.fragId2MeshIndex[t],
            c = l.meshes[s];
          if (o === v) e.geometry = a, e.material = n.getMaterial(t), n.getWorldMatrix(t, e.matrix);
          else if (o === g) {
            n.getWorldMatrix(t, f);
            var h = n.fragments.fragId2dbId[t],
              d = new r.InstanceBufferBuilder(a, 1);
            d.addInstance(f, h), e.geometry = d.finish(), e.material = c.material, e.matrix.identity()
          } else n.getWorldMatrix(t, f), n.getWorldBounds(t, p), h = n.fragments.fragId2dbId[t], e.geometry = Object(i.mergeGeometries)([a], f.elements, [h], p), e.material = c.material, e.matrix.identity();
          e.dispatchEvent({
            type: "removed"
          })
        }
      }
    }
  }
}, function (e, t, n) {
  "use strict";
  n.r(t), n.d(t, "ModelIteratorLinear", (function () {
    return o
  }));
  n(72);
  var i = n(3);

  function r(e, t) {
    for (var n = 0; n < t.length; n++) {
      var i = t[n];
      i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(e, i.key, i)
    }
  }
  var o = function () {
    function e(t) {
      var n, r;
      ! function (e, t) {
        if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
      }(this, e), this._frags = t.getFragmentList(), this._RenderBatch = t.RenderBatch, this._model = t, this._fillLast = this._model.is2d(), this._fragsPerScene = (n = t.is2d(), r = 500, n && (r /= 6), Object(i.isMobileDevice)() && (r /= 3), (r = Math.floor(r)) > 0 ? r : 500), this._fragOrder = [], this._geomScenes = [];
      var o = this._frags.getCount();
      this._currentScene = 0;
      for (var a = new Int32Array(o), s = 0; s < o; s++) a[s] = s;
      this.setFragmentOrder(a, o)
    }
    var t, n, o;
    return t = e, (n = [{
      key: "setFragmentOrder",
      value: function (e, t) {
        this._fragCount = t, this._fragOrder[0] = e;
        var n = Math.floor((this._fragCount + this._fragsPerScene - 1) / this._fragsPerScene);
        this._geomScenes.length = n;
        for (var i = 0; i < n; i++) {
          var r = i * this._fragsPerScene,
            o = this._geomScenes[i] = new this._RenderBatch(this._frags, this._fragOrder, r, this._fragsPerScene),
            a = r + this._fragsPerScene;
          a > this._fragCount && (a = this._fragCount), o.lastItem = a
        }
      }
    }, {
      key: "addFragment",
      value: function (e) {
        if (this._fragOrder[0].length <= e) {
          var t = 2 * this._fragOrder[0].length;
          t <= e && (t = e + 1);
          var n = new Int32Array(t);
          n.set(this._fragOrder[0]), this._fragOrder[0] = n, this.visibleBoundsDirty = !0
        }
        this._fragOrder[0][e] = e;
        var i = Math.floor(e / this._fragsPerScene);
        if (this._geomScenes) {
          var r = this._geomScenes[i];
          r || (this._geomScenes[i] = r = new this._RenderBatch(this._frags, this._fragOrder, i * this._fragsPerScene, this._fragsPerScene)), r && r.onFragmentAdded(e)
        }
      }
    }, {
      key: "reset",
      value: function (e, t) {
        if (this._currentScene = 0, this._fillLast && this._geomScenes[0] && (this._geomScenes[0].drawEnd = 0), this._resetVisStatus) {
          for (var n = this._geomScenes, i = n.length, r = 0; r < i; ++r) {
            var o = n[r];
            o && o.resetVisStatus && o.resetVisStatus()
          }
          this._resetVisStatus = !1
        }
      }
    }, {
      key: "getSceneCount",
      value: function () {
        return this._geomScenes.length
      }
    }, {
      key: "getGeomScenes",
      value: function () {
        return this._geomScenes
      }
    }, {
      key: "resetVisStatus",
      value: function () {
        this._resetVisStatus = !0
      }
    }, {
      key: "done",
      value: function () {
        return !(this._fillLast && !this._model.isLoadDone()) && this._currentScene >= this._geomScenes.length - 1 && (!(e = this._geomScenes[this._currentScene]) || e.drawStart >= e.lastItem);
        var e
      }
    }, {
      key: "nextBatch",
      value: function () {
        if (this._currentScene >= this.getSceneCount()) return null;
        var e = this._geomScenes[this._currentScene];
        if (this._fillLast) {
          if (e.lastItem >= e.start + e.count && (++this._currentScene, this._geomScenes[this._currentScene] && (this._geomScenes[this._currentScene].drawEnd = this._geomScenes[this._currentScene].start)), e.drawStart = e.drawEnd, e.drawEnd = e.lastItem, e.hasOwnProperty("drawStart") && e.lastItem <= e.drawStart) return null
        } else ++this._currentScene;
        return e.renderImportance = 1e20, e
      }
    }, {
      key: "getVisibleBounds",
      value: function (e, t) {
        for (var n = this.getSceneCount(), i = 0; i < n; i++) {
          this._geomScenes[i].calculateBounds();
          var r = this._geomScenes[i].getBoundingBox();
          e.union(r), t.union(r), t.union(this._geomScenes[i].getBoundingBoxHidden())
        }
      }
    }, {
      key: "rayCast",
      value: function (e, t, n) {
        for (var i = this.getSceneCount(), r = 0; r < i; r++) this._geomScenes[r].raycast(e, t, n)
      }
    }]) && r(t.prototype, n), o && r(t, o), e
  }()
}, function (e, t, n) {
  "use strict";
  n.r(t), n.d(t, "ModelIteratorBVH", (function () {
    return o
  }));
  var i = n(53),
    r = n(0);

  function o() {
    var e, t, n, o, a, s = null,
      l = null,
      c = null,
      u = null,
      h = null,
      d = null,
      f = !0,
      p = !1,
      m = !1,
      g = new r.Box3,
      v = new r.Box3,
      y = !1,
      b = !0;

    function _(e) {
      var i = d[e],
        r = n;
      for (1; r > t && d[h[r - 1]] > i;) h[r] = h[r - 1], r--;
      h[r] = e, n++
    }

    function x(e) {
      var t = s.getLeftChild(e); - 1 !== t && (x(t), x(t + 1)), g.makeEmpty(), -1 !== t && (s.getBoxThree(t, v), g.union(v), s.getBoxThree(t + 1, v), g.union(v)), s.getPrimCount(e) && (g.union(c[e].getBoundingBox()), g.union(c[e].getBoundingBoxHidden())), s.setBoxThree(e, g)
    }
    this.initialize = function (t, n, i, r) {
      e = t.getFragmentList(), a = t.RenderBatch, r && r.hasOwnProperty("prioritize_screen_size") && (f = r.prioritize_screen_size), l = i, c = new Array(n.nodeCount), u = new Int8Array(n.nodeCount), s = n, h = new Int32Array(n.nodeCount + 1), d = new Float32Array(n.nodeCount);
      for (var o = 0; o < n.nodeCount; o++) {
        var p = n.getPrimCount(o);
        p && (c[o] = new a(e, l, n.getPrimStart(o), p), c[o].lastItem = c[o].start + p, c[o].numAdded = p, c[o].nodeIndex = o, 8 & n.getFlags(o) && (c[o].sortObjects = !0), n.getBoxArray(o, c[o].bboxes))
      }
    }, this.addFragment = function (e, t) {}, this.reset = function (e) {
      if (o = e, t = 0, n = 0, u[0] = u[1] = i.FrustumIntersector.CONTAINMENT_UNKNOWN, h[n++] = 0, p = !1, m = !1, y = !1, b) {
        for (var r = c, a = r.length, s = 0; s < a; ++s) {
          var l = r[s];
          l && l.resetVisStatus && l.resetVisStatus()
        }
        b = !1
      }
    }, this.nextBatch = function () {
      for (m || p || t !== n || (h[n++] = 1, p = !0); t !== n;) {
        var e = h[--n],
          r = u[e];
        if (r !== i.FrustumIntersector.CONTAINS && (s.getBoxThree(e, g), r = o.intersectsBox(g)), r !== i.FrustumIntersector.OUTSIDE) {
          var a, l, v = s.getLeftChild(e);
          if (-1 !== v) {
            var b = s.getFlags(e),
              x = o.viewDir[3 & b] < 0 ? 1 : 0,
              w = b >> 2 & 1,
              E = b >> 3 & 1,
              A = 0,
              S = 0;
            f && !p ? (a = v + w, l = v + 1 - w, s.getBoxThree(a, g), d[a] = A = o.projectedBoxArea(g, r === i.FrustumIntersector.CONTAINS), s.getBoxThree(l, g), d[l] = S = o.projectedBoxArea(g, r === i.FrustumIntersector.CONTAINS), u[a] = u[l] = r, A > 0 && _(a), S > 0 && _(l)) : (1 ^ x ^ E && (w = 1 - w), a = v + w, l = v + 1 - w, h[n++] = a, d[a] = -1, h[n++] = l, d[l] = -1, u[a] = u[l] = r)
          }
          if (0 !== s.getPrimCount(e)) {
            var M = c[e];
            return M.renderImportance = o.projectedBoxArea(M.getBoundingBox(), r === i.FrustumIntersector.CONTAINS), M
          }
        }
        p || m || t !== n || (h[n++] = 1, p = !0)
      }
      return y = !0, null
    }, this.skipOpaqueShapes = function () {
      p || m || (t = 0, n = 0, h[n++] = 1, m = !0)
    }, this.getVisibleBounds = function (e, t) {
      for (var n = 0; n < c.length; n++) {
        var i = c[n];
        if (i) {
          i.calculateBounds();
          var r = i.getBoundingBox();
          e.union(r), t.union(r), t.union(i.getBoundingBoxHidden())
        }
      }
      x(0), x(1)
    }, this.rayCast = function (e, t, n) {
      for (var i = [1, 0], o = new r.Vector3; i.length;) {
        var a = i.pop();
        if (s.getBoxThree(a, g), g.expandByScalar(.5), null !== e.ray.intersectBox(g, o)) {
          var l = s.getLeftChild(a);
          if (-1 !== l && (i.push(l), i.push(l + 1)), 0 !== s.getPrimCount(a)) c[a].raycast(e, t, n)
        }
      }
    }, this.getSceneCount = function () {
      return c.length
    }, this.getGeomScenes = function () {
      return c
    }, this.done = function () {
      return y
    }, this.resetVisStatus = function () {
      b = !0
    }
  }
}, function (e, t, n) {
  "use strict";

  function i(e) {
    var t = e || function (e, t) {
        return e < t
      },
      n = [],
      i = [];
    this.add = function (e) {
      var r = function e(r, o, a) {
        if (o || (o = 0), a || (a = i.length), o >= a) return a;
        if (a === o + 1) {
          var s = n[i[o]];
          return t(s, r) ? a : o
        }
        var l = parseInt(o + (a - o) / 2),
          c = n[i[l - 1]];
        return t(r, c) ? e(r, o, l) : t(c, r) ? e(r, l, a) : l - 1
      }(e);
      if (r == i.length) return n.push(e), void i.push(n.length - 1);
      n.push(e), i.splice(r, 0, n.length - 1)
    }, this.size = function () {
      return i.length
    }, this.get = function (e) {
      return n[i[e]]
    }, this.removeAt = function (e) {
      var t = i[e];
      n[t] = void 0, i.splice(e, 1)
    }, this.toString = function () {
      for (var e = "", t = 0, n = this.size(); t < n; ++t) e += this.get(t), t < n - 1 && (e += ", ");
      return e
    }
  }
  n.r(t), n.d(t, "SortedList", (function () {
    return i
  }))
}, function (e, t, n) {
  "use strict";
  n.r(t), n.d(t, "Document", (function () {
    return f
  }));
  var i = n(66),
    r = n(9),
    o = n(6),
    a = n(18),
    s = n(3),
    l = n(1),
    c = n(94),
    u = n(16),
    h = Object(s.getGlobal)(),
    d = h;

  function f(e, t, n) {
    this.myPath = t, this.myData = e, e && (this.docRoot = new i.BubbleNode(e), this.docRoot.setDocument(this)), this.myNumViews = {}, this.acmSessionId = n;
    var r = this;
    this.docRoot.traverse((function (e) {
      if (e.isViewPreset()) {
        var t = e.findParentGeom2Dor3D(),
          n = r.myNumViews[t.guid()] || 0;
        r.myNumViews[t.guid()] = n + 1
      }
    })), 0 === this.docRoot.findAllViewables().length && l.logger.error("Document contains no viewables.")
  }
  f.load = function (e, t, n, i) {
    var s, l, u = f.getDocumentPath(e),
      d = o.endpoint.getApiFlavor() === o.endpoint.ENDPOINT_API_FLUENT;

    function p(e) {
      d && (s = s ? e.urn + "," + s : e.urn);
      var i = new f(e, u, s);
      if (i.getRoot().search({
          type: "geometry"
        }).length > 0) l = i.getGlobalMessages(), t && t(i, l);
      else if (n) {
        l = i.getGlobalMessages();
        var o = r.ErrorCodes.BAD_DATA_NO_VIEWABLE_CONTENT;
        n(o, "No viewable content", l)
      }
    }

    function m(e, t, i) {
      if (401 === e && void 0 === h.LMV_THIRD_PARTY_COOKIE) h.LMV_THIRD_PARTY_COOKIE = !1, Object(c.refreshRequestHeader)(c.token.accessToken), g();
      else if (n) {
        var o = "Error: " + e + " (" + t + ")",
          a = Object(r.getErrorCode)(e);
        n(a, o, e, t, i)
      }
    }

    function g() {
      var e = !i || d && !i["x-ads-acm-scopes"];
      s || e ? a.ViewingService.getManifest(o.endpoint.initLoadContext(), u, p, m) : (i.oauth2AccessToken || (i.oauth2AccessToken = c.token.accessToken), a.ViewingService.getACMSession(o.endpoint.getApiEndpoint(), i, (function (e) {
        var t = {
          queryParams: (s = e) ? "acmsession=" + s : ""
        };
        o.endpoint.setAcmSession(s), a.ViewingService.getManifest(o.endpoint.initLoadContext(t), u, p, m)
      }), n))
    }
    g()
  }, f.getDocumentPath = function (e) {
    if (-1 === e.indexOf("urn:")) {
      if (-1 !== e.indexOf("://")) return e;
      var t = e;
      return "undefined" != typeof window ? (0 !== t.indexOf("/") && (t = "/" + t), d.location.protocol + "//" + d.location.host + t) : t
    }
    return e
  }, f.requestThumbnailWithSecurity = function (e, t) {
    var n = {
        responseType: "blob",
        skipAssetCallback: !0,
        size: e.width,
        guid: e.guid
      },
      i = "urn:" + e.urn;
    a.ViewingService.getThumbnail(o.endpoint.initLoadContext(), i, (function (e) {
      t(null, e)
    }), (function () {
      t("error", null)
    }), n)
  }, f.prototype.getFullPath = function (e) {
    if (!e) return e;
    var t = e;
    if (Object(o.isOffline)()) - 1 == t.indexOf(Object(o.getOfflineResourcePrefix)()) && (t = decodeURIComponent(Object(o.getOfflineResourcePrefix)()) + t.substr(t.indexOf("/")));
    else if (0 === e.indexOf("urn")) {
      0 === e.indexOf("urn:adsk.fluent") || o.endpoint.getApiFlavor() !== o.endpoint.ENDPOINT_API_FLUENT ? (t = o.endpoint.getItemApi(null, e), o.endpoint.ENDPOINT_API_MODEL_DERIVATIVE_V2 === o.endpoint.getApiFlavor() && (t = decodeURIComponent(t))) : t = o.endpoint.getItemApi(o.endpoint.getApiEndpoint(), e, "derivativeV2")
    } else 0 === e.indexOf("$file$") && (t = this.myPath.replace("/bubble.json", "") + e.replace("$file$", ""));
    return t
  }, f.prototype.getThumbnailOptions = function (e, t, n) {
    var i = t || 200,
      r = n || 200;
    return {
      urn: this.myData.urn,
      width: i,
      height: r,
      guid: e.guid,
      acmsession: this.acmSessionId
    }
  }, f.prototype.getThumbnailPath = function (e, t, n) {
    var i = this.getThumbnailOptions(e, t, n),
      r = o.endpoint.getThumbnailApi(null, i.urn) + "?guid=" + i.guid + "&width=" + i.width + "&height=" + i.height;
    i.acmsession && (r += "&acmsession=" + i.acmsession);
    var a = o.endpoint.getQueryParams();
    return a && (r += "&" + a), r
  }, f.prototype.getLeafletZipParams = function (e, t) {
    for (var n, i, r = t.search({
        role: "leaflet-zip"
      }, !1), o = 0; o < r.length; o++) {
      i = {};
      var a = (n = r[o]._raw()).urn;
      i.urnZip = this.getFullPath(a), i.centralDirOffset = n.central_dir_offset, i.centralDirLength = n.central_dir_length, i.centralDirEntries = n.central_dir_entries, i.zipMaxLevel = n.max_level - e.levelOffset, i.loadFromZip = !!(i.urnZip && i.centralDirOffset && i.centralDirLength && i.centralDirEntries), i.fileTable = {}, e.zips || (e.zips = []), e.zips.push(i)
    }
    e.zips.sort((function (e, t) {
      return e.zipMaxLevel - t.zipMaxLevel
    }))
  }, f.prototype.getLeafletParams = function (e, t, n) {
    e.tileSize = n.tileSize ? n.tileSize : 512, e.texWidth = n.resolution[0], e.texHeight = n.resolution[1], e.paperWidth = n.paperWidth, e.paperHeight = n.paperHeight, e.paperUnits = n.paperUnits, e.urlPattern = n.urn, e.mime = n.mime, e.isLeaflet = !0, e.levelOffset = function (e) {
      for (var t = 1, n = 0, i = 0; i < 20; i++) {
        if ((t *= 2) > e) return n;
        n++
      }
      return l.logger.log("unexpected leaflet tileSize"), 0
    }(e.tileSize), this.getLeafletZipParams(e, t), e.loadFromZip = e.zips && e.zips[0].loadFromZip, e.zips && Object(o.isOffline)() && Object(s.isMobileDevice)() && (e.zips = e.zips.slice(0, 1), e.maxLevel = e.zips[0].zipMaxLevel)
  }, f.prototype.derivePdfUrnHack = function (e, t) {
    var n = e.parent.children.slice();
    n.sort((function (e, t) {
      return e._raw().order - t._raw().order
    }));
    var r = (n.length <= 75 ? n[n.length - 1] : n[74]).search(i.BubbleNode.GEOMETRY_F2D_NODE)[0];
    if (r) {
      var o = r.urn().indexOf("/"),
        a = r.urn().slice(0, o),
        s = e._raw().order,
        l = 0 | s % 75,
        c = 1 + (0 | s / 75),
        u = a + "/output/".concat(l, "/").concat(l, ".pdf");
      return t.page = c, t.isPdf = !0, console.log("pdf path", u), u
    }
    return null
  }, f.prototype.getViewableUrn = function (e, t) {
    var n;
    if (e instanceof i.BubbleNode) n = e;
    else {
      var r = this.docRoot.search(e);
      n = r.length > 0 ? r[0] : new i.BubbleNode(e)
    }
    if (n.isGeometry()) {
      if (n.is3D()) return n.getViewableRootPath();
      if (n.is2D()) {
        var o = n.data.totalRasterPixels;
        "number" != typeof o && (o = 1 / 0);
        var a = o < 1 << 20,
          l = "true" === Object(u.getParameterByName)("vectorPdf") || Object(s.getGlobal)().LMV_VECTOR_PDF || this.myData && this.myData.isVectorPDF,
          c = "false" === Object(u.getParameterByName)("vectorPdf") || Object(s.getGlobal)().LMV_RASTER_PDF;
        l ? a = !0 : c && (a = !1);
        var h = n.search(i.BubbleNode.PDF_PAGE_NODE),
          d = n.search(i.BubbleNode.LEAFLET_NODE);
        if (a && d.length > 0 && t && (this.getLeafletParams(t, n, d[0]._raw()), t.tempRasterPath = d[0].urn()), a && h.length) return t.isPdf = !0, t.page = h[0].data.page || 1, h[0].urn();
        if (d.length > 0 && t) {
          if (l) {
            var f = this.derivePdfUrnHack(n, t);
            if (f) return f
          }
          return this.getLeafletParams(t, n, d[0]._raw()), d[0].urn()
        }
        var p = n.search(i.BubbleNode.IMAGE_NODE);
        if (p.length) return p[0].urn();
        var m = n.search(i.BubbleNode.GEOMETRY_F2D_NODE);
        if (m.length) return m[0].urn()
      }
    } else if (n.isViewPreset()) {
      var g = this.getViewGeometry(n, !0);
      if (g) return this.getViewableUrn(g, t)
    }
    return ""
  }, f.prototype.getViewablePath = function (e, t) {
    var n = this.getViewableUrn(e, t);
    return n ? this.getFullPath(n) : ""
  }, f.prototype.downloadAecModelData = function (e) {
    var t = this.docRoot.findViewableParent(),
      n = t && t.data.aec_model_data;
    if (n) return e && e(n), Promise.resolve(n);
    var i = this.docRoot.search({
      role: "Autodesk.AEC.ModelData"
    })[0];
    if (!i) return e && e(), Promise.resolve(null);
    var r = {};
    this.acmSessionId && (r.queryParams = "acmsession=" + this.acmSessionId);
    var s = i.getViewableRootPath(),
      l = this.getFullPath(s);
    return new Promise((function (t) {
      var n = function (n) {
        i.findViewableParent().data.aec_model_data = n, e && e(n), t(n)
      };
      a.ViewingService.getItem(o.endpoint.initLoadContext(r), l, (function (e) {
        return n(e)
      }), (function () {
        return n()
      }), {
        responseType: "json"
      })
    }))
  }, f.getAecModelData = function (e) {
    if (Array.isArray(e)) {
      var t = new Map,
        n = e.map((function (e) {
          var n = e.getDocument(),
            i = t.get(n);
          if (i) return i;
          var r = n.downloadAecModelData();
          return t[n] = r, r
        }));
      return Promise.all(n)
    }
    return e.getDocument().downloadAecModelData()
  }, f.prototype.getRoot = function () {
    return this.docRoot
  }, f.prototype.getPath = function () {
    return this.myPath
  }, f.prototype.getViewGeometry = function (e) {
    return e.findParentGeom2Dor3D()
  }, f.prototype.getNumViews = function (e) {
    var t = e.guid;
    return e instanceof i.BubbleNode && (t = e.guid()), this.myNumViews[t] || 0
  }, f.prototype.getMessages = function (e, t) {
    var n = [];
    if (!e) return n;
    for (var i = e; i && (!t || i.parent);) i._raw().messages && (n = n.concat(i._raw().messages)), i = i.parent;
    return n
  }, f.prototype.getGlobalMessages = function () {
    var e = [],
      t = 0,
      n = 0;
    this.getRoot().traverse((function (i) {
      var r = i._raw().messages || [];
      r.filter((function (e) {
        return "error" === e.type
      })).length > 0 && (t += 1), "inprogress" === i._raw().status && (n += 1), e = e.concat(r)
    }));
    var i = "translated";
    i = t > 0 ? "failed" : i, i = n > 0 ? "processing" : i;
    for (var r = e.length; r--; e[r].$translation = i);
    return e
  }
}, function (e, t, n) {
  "use strict";
  n.r(t), n.d(t, "SnapResult", (function () {
    return r
  }));
  var i = n(21);

  function r() {
    this.clear()
  }
  r.prototype.clear = function () {
    this.geomType = null, this.modelId = null, this.snapNode = null, this.geomVertex = null, this.geomEdge = null, this.geomFace = null, this.radius = null, this.intersectPoint = null, this.faceNormal = null, this.viewportIndex2d = null, this.circularArcCenter = null, this.circularArcRadius = null, this.fromTopology = !1, this.isPerpendicular = !1, this.snapPoint = null
  }, r.prototype.copyTo = function (e) {
    e.modelId = this.modelId, e.snapNode = this.snapNode, e.geomVertex = this.geomVertex, e.geomFace = this.geomFace, e.geomEdge = this.geomEdge, e.radius = this.radius, e.geomType = this.geomType, e.intersectPoint = this.intersectPoint, e.faceNormal = this.faceNormal, e.viewportIndex2d = this.viewportIndex2d, e.circularArcCenter = this.circularArcCenter, e.circularArcRadius = this.circularArcRadius, e.fromTopology = this.fromTopology, e.isPerpendicular = this.isPerpendicular, e.snapPoint = this.snapPoint
  }, r.prototype.clone = function () {
    var e = new r;
    return this.copyTo(e), e
  }, r.prototype.isEmpty = function () {
    return !this.getGeometry()
  };
  var o = null,
    a = null,
    s = null,
    l = function (e, t) {
      return a = a || new THREE.Vector3, s = s || new THREE.Vector3, a.set(0, 0, 0), s.set(e, 0, 0), a.applyMatrix4(t), s.applyMatrix4(t), a.distanceTo(s)
    };
  r.prototype.applyMatrix4 = function (e) {
    if (this.geomEdge && this.geomEdge.applyMatrix(e), this.geomFace && this.geomFace.applyMatrix(e), this.geomVertex && this.geomVertex.applyMatrix4(e), this.intersectPoint && this.intersectPoint.applyMatrix4(e), this.circularArcCenter && this.circularArcCenter.applyMatrix4(e), this.snapPoint && this.snapPoint.applyMatrix4(e), this.faceNormal) {
      o = o || new THREE.Matrix4;
      var t = tempMatrix().getNormalMatrix(e);
      this.faceNormal.applyMatrix4(t)
    }
    this.radius = l(this.radius, e), this.circularArcRadius = l(this.circularArcRadius, e)
  }, r.prototype.getFace = function () {
    return this.geomFace
  }, r.prototype.getEdge = function () {
    return this.geomEdge
  }, r.prototype.getVertex = function () {
    return this.geomVertex
  }, r.prototype.getGeometry = function () {
    switch (this.geomType) {
      case i.SnapType.SNAP_VERTEX:
      case i.SnapType.SNAP_MIDPOINT:
      case i.SnapType.SNAP_INTERSECTION:
      case i.SnapType.SNAP_CIRCLE_CENTER:
      case i.SnapType.RASTER_PIXEL:
        return this.geomVertex;
      case i.SnapType.SNAP_EDGE:
        return this.geomEdge;
      case i.SnapType.SNAP_FACE:
        return this.geomFace;
      case i.SnapType.SNAP_CIRCULARARC:
      case i.SnapType.SNAP_CURVEDEDGE:
        return this.geomEdge;
      case i.SnapType.SNAP_CURVEDFACE:
        return this.geomFace
    }
    return null
  }, r.prototype.setGeometry = function (e, t) {
    switch (e) {
      case i.SnapType.SNAP_VERTEX:
      case i.SnapType.SNAP_MIDPOINT:
      case i.SnapType.SNAP_INTERSECTION:
      case i.SnapType.SNAP_CIRCLE_CENTER:
      case i.SnapType.RASTER_PIXEL:
        this.geomVertex = t;
        break;
      case i.SnapType.SNAP_EDGE:
        this.geomEdge = t;
        break;
      case i.SnapType.SNAP_FACE:
        this.geomFace = t;
        break;
      case i.SnapType.SNAP_CIRCULARARC:
      case i.SnapType.SNAP_CURVEDEDGE:
        this.geomEdge = t;
        break;
      case i.SnapType.SNAP_CURVEDFACE:
        this.geomFace = t;
        break;
      default:
        return
    }
    this.geomType = e
  }
}, function (e, t, n) {
  "use strict";
  n.r(t), n.d(t, "MeshAnimation", (function () {
    return d
  }));
  var i, r, o, a, s, l, c = n(0),
    u = n(59),
    h = n(39);

  function d(e, t, n) {
    h.Animation.call(this, e, t, n), this.localMatrix = new c.Matrix4, this.root.getAnimTransform(), this.relativeTransform = !t.custom || !t.custom.transform || "abs" !== t.custom.transform
  }
  d.prototype = Object.create(h.Animation.prototype), d.prototype.constructor = d, d.prototype.keyTypes = ["pos", "rot", "scl"], d.prototype.defaultKey = {
    pos: 0,
    rot: 0,
    scl: 0
  }, d.prototype.update = (i = [], r = new c.Vector3, o = new c.Vector3, a = new c.Quaternion, s = new c.Matrix4, l = new c.Matrix4, function (e) {
    if (!1 !== this.isPlaying && (this.currentTime += e * this.timeScale, this.resetIfLooped(), !this.isPlayingOutOfRange()))
      for (var t = 0, n = this.hierarchy.length; t < n; t++) {
        for (var d = this.hierarchy[t], f = d.animationCache[this.data.name], p = 0; p < this.keyTypes.length; p++) {
          var m = this.keyTypes[p],
            g = f.prevKey[m],
            v = f.nextKey[m];
          if (v.time <= this.currentTime || g.time >= this.currentTime) {
            for (g = this.data.hierarchy[t].keys[0], v = this.getNextKeyWith(m, t, 1); v.time < this.currentTime && v.index > g.index;) g = v, v = this.getNextKeyWith(m, t, v.index + 1);
            f.prevKey[m] = g, f.nextKey[m] = v
          }
          var y = g[m],
            b = v[m];
          if (v.time !== g.time && void 0 !== y && void 0 !== b) {
            var _ = (this.currentTime - g.time) / (v.time - g.time);
            if (_ < 0 && (_ = 0), _ > 1 && (_ = 1), "pos" === m)
              if (this.interpolationType === u.a.LINEAR) o.x = y[0] + (b[0] - y[0]) * _, o.y = y[1] + (b[1] - y[1]) * _, o.z = y[2] + (b[2] - y[2]) * _, d.position.copy(o);
              else {
                i[0] = this.getPrevKeyWith("pos", t, g.index - 1).pos, i[1] = y, i[2] = b, i[3] = this.getNextKeyWith("pos", t, v.index + 1).pos, _ = .33 * _ + .33;
                var x = Object(h.interpolateCatmullRom)(i, _);
                if (o.x = x[0], o.y = x[1], o.z = x[2], d.position.copy(o), this.interpolationType === u.a.CATMULLROM_FORWARD) {
                  var w = Object(h.interpolateCatmullRom)(i, 1.01 * _);
                  r.set(w[0], w[1], w[2]), r.sub(vector), r.y = 0, r.normalize();
                  var E = Math.atan2(r.x, r.z);
                  d.rotation.set(0, E, 0)
                }
              }
            else "rot" === m ? (c.Quaternion.slerp(y, b, a, _), d.quaternion.copy(a)) : "scl" === m && (o.x = y[0] + (b[0] - y[0]) * _, o.y = y[1] + (b[1] - y[1]) * _, o.z = y[2] + (b[2] - y[2]) * _, d.scale.copy(o))
          }
        }
        if (!this.relativeTransform) {
          var A = s.compose(d.position, d.quaternion, d.scale),
            S = l;
          d.getOriginalWorldMatrix(S), S.getInverse(S), s.multiplyMatrices(A, S).decompose(d.position, d.quaternion, d.scale)
        }
        d.updateAnimTransform()
      }
  })
}, function (e, t, n) {
  "use strict";

  function i(e) {
    var t = ["hottouch"],
      n = {
        SHIFT: 0,
        ALT: 0,
        CONTROL: 0
      },
      i = null,
      r = null,
      o = !1,
      a = !1,
      s = null,
      l = 16,
      c = 17,
      u = 18;
    this.active = !1, this.getNames = function () {
      return t
    }, this.getName = function () {
      return t[0]
    }, this.activate = function (e) {
      this.active = !0
    }, this.deactivate = function (e) {
      this.active = !1
    }, this.isActive = function () {
      return this.active
    }, this.__checkStart = function () {
      s && (this.controller.distributeEvent("handleGesture", s), s = null)
    }, this.update = function () {
      if (this.controller.getIsLocked()) return !1;
      var t = e.getActiveNavigationTool(),
        n = !1 === o && !0 === a;
      if (n || !0 === o && !1 === a) {
        var s = n ? "worldup" : "fov";
        if (t === s) return !1;
        if (t === i) return e.setActiveNavigationTool(s), i = s, this.__checkStart(), !1;
        r = t, e.setActiveNavigationTool(s), i = s, this.__checkStart()
      } else i && (e.setActiveNavigationTool(r), i = null, r = null);
      return !1
    }, this.resetKeys = function () {
      n.SHIFT = 0, n.CONTROL = 0, n.ALT = 0
    }, this.updateModifierState = function (e) {
      n.CONTROL = e.ctrlKey ? 1 : 0, n.SHIFT = e.shiftKey ? 1 : 0, n.ALT = e.altKey ? 1 : 0
    }, this.handleGesture = function (t) {
      if (t === s) return !1;
      switch (t.type) {
        case "drag3start":
          e.navigation.isActionEnabled("fov") && (s = t, o = !0);
          break;
        case "drag3move":
          break;
        case "drag3end":
          o = !1;
          break;
        case "rotatestart":
          e.navigation.isActionEnabled("roll") && (s = t, a = !0);
          break;
        case "rotatemove":
          break;
        case "rotateend":
          a = !1
      }
      return !1
    }, this.handleKeyDown = function (e, t) {
      switch (this.updateModifierState(e), t) {
        case l:
          n.SHIFT = 1;
          break;
        case c:
          n.CONTROL = 1;
          break;
        case u:
          n.ALT = 1
      }
      return !1
    }, this.handleKeyUp = function (e, t) {
      switch (this.updateModifierState(e), t) {
        case l:
          n.SHIFT = 0;
          break;
        case c:
          n.CONTROL = 0;
          break;
        case u:
          n.ALT = 0
      }
      return !1
    }, this.handleButtonDown = function (e, t) {
      return this.updateModifierState(e), !1
    }, this.handleButtonUp = function (e, t) {
      return this.updateModifierState(e), !1
    }, this.handleMouseMove = function (e) {
      return this.updateModifierState(e), !1
    }, this.handleBlur = function (e) {
      return this.resetKeys(), !1
    }
  }
  n.r(t), n.d(t, "HotGestureTool", (function () {
    return i
  }))
}, function (e, t, n) {
  "use strict";
  n.r(t), n.d(t, "FovTool", (function () {
    return r
  }));
  var i = n(0);

  function r(e) {
    var t = e.navigation,
      n = t.getCamera(),
      r = ["fov"],
      o = !1,
      a = 0,
      s = null,
      l = null,
      c = !1,
      u = 0,
      h = -5,
      d = new i.Vector3,
      f = new i.Vector3,
      p = new i.Vector3,
      m = null;

    function g(e) {
      return e < 0 && e > -3 ? -3 : e > 0 && e < 3 ? 3 : e
    }
    this.getNames = function () {
      return r
    }, this.getName = function () {
      return r[0]
    }, this.activate = function (e) {
      u = 0
    }, this.deactivate = function (e) {
      h = -5
    }, this.getCursor = function () {
      return 0 !== u && -5 === h ? null : "url(data:image/x-icon;base64,AAACAAEAGBgAAAAAAACICQAAFgAAACgAAAAYAAAAMAAAAAEAIAAAAAAAYAkAABMLAAATCwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAlgAAAP8AAAD/AAAAlgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAACEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA////////////AAAA/wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAnAwMD/yEhIf8AAABmAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA////////////AAAA/wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAGknJyf/goKC/8/Pz/8aGhr/AAAALQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA////////////AAAA/wAAAAAAAAAAAAAAAAAAAAAAAABTFBQU/2lpaf/MzMz///////////+Wlpb/AAAAlgAAAAAAAAAAAAAAAAAAAAAAAAAKAAAAAAAAAAAAAAAAAAAAlgAAAP8AAAD/AAAAlgAAAAAAAAAAAAAAOAAAAKFTU1P/t7e3////////////8PDw////////////AQEB/wAAAAEAAAAAAAAAFAAAAH0KCgr/AAAAYwAAAAAAAAAAAAAAlgAAAP8AAAD/AAAAlgAAAAAAAAAjCwsL/6Ghof/t7e3///////Dw8P9MTEz/LS0t//Pz8///////Ghoa/wAAABoAAAANDQ0N/319ff+rq6v/Y2Nj/wAAAK8AAABGAAAA////////////AAAA/wAAAF0hISH/jIyM////////////sLCw/xEREf8AAACHAAAArKysrP//////V1dX/wAAAFcAAABSUlJS//f39///////8PDw/6+vr/86Ojr/LS0t////////////FRUV/1xcXP/Gxsb/+Pj4//Hx8f9MTEz/AAAAsAAAAEcAAAAAAAAAZ2dnZ///////pKSk/wAAAKQAAACtra2t///////////////////////m5ub/kZGR/wAAAP8AAAD/q6ur//Hx8f//////vb29/x0dHf8AAACIAAAAAAAAAAAAAAAAAAAAOjo6Ov//////5+fn/wAAAOcAAADd3d3d////////////////////////////+/v7/9bW1v/i4uL//v7+//Pz8/9hYWH/AAAAvQAAAFQAAAAAAAAAAAAAAAAAAAAAAAAAJycnJ//6+vr//////wMDA/8AAADv7+/v/////////////////////////////////////////////////7y8vP8ODg7/AAAAKwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAJiYmJv/6+vr//////wkJCf8AAADv7+/v//////////////////////////////////f39//9/f3//////+np6f+UlJT/GBgY/wAAAH0AAAACAAAAAAAAAAAAAAAAAAAAKSkpKf///////v7+/w0NDf8AAADd3d3d////////////////////////////29vb/39/f/+Xl5f/5+fn////////////5ubm/1RUVP8CAgL/AAAAPwAAAAAAAAAAAAAAOTk5Of//////8PDw/wgICP8AAAChoaGh/////////////////+np6f+YmJj/QkJC/wAAAP8AAAD/UFBQ/7e3t//39/f///////////+oqKj/EBAQ/wAAAIgAAAAAAAAAZ2dnZ///////29vb/wEBAf8AAAA4NTU1/9zc3P/t7e3/tbW1/01NTf8AAACYAAAA////////////AwMD/wsLC/9oaGj/y8vL////////////8fHx/zg4OP8AAACWAAAApaWlpf//////n5+f/wAAAJ8AAAAAAAAAczg4OP9LS0v/EhIS/wAAAE0AAAAAAAAA////////////FRUV/wAAABUAAABoJSUl/4GBgf/i4uL///////////9+fn7/Pz8///b29v//////SkpK/wAAAEoAAAAAAAAAAAAAADgAAABLAAAAEgAAAAAAAAAAAAAAlgAAAP8AAAD/AAAAlgAAAAAAAAAAAAAAJQAAAIE8PDz/np6e//z8/P/////////////////8/Pz/CQkJ/wAAAAkAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAlgAAAP8AAAD/AAAAlgAAAAAAAAAAAAAAAAAAAAAAAAA8DAwM/09PT/+7u7v///////////+QkJD/AAAAkwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA////////////Dw8P/wAAAA8AAAAAAAAAAAAAAAAAAAAAAAAADAAAAFIYGBj/aGho/729vf8WFhb/AAAAJwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA////////////FRUV/wAAABUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAYAQEB/w8PD/8AAABUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA////////////DAwM/wAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAA8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAlgAAAP8AAAD/AAAAlgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD///8x/h/nO/4fw1D+HwFy/h4BRu4YAHOGEABkAAAAXAAAIFwAAOBnAAHgIAAD4GUAAOB4AABgXAAAIGMAAABtggAAVMYYAHT+HgE7/g8BcP4Pw2/+D+dc/h//XP///2c=), auto"
    }, this.getMotionDelta = function (e) {
      var t = f.x - d.x,
        n = f.y - d.y,
        i = f.z - d.z;
      Math.abs(t) < .001 && (t = 0), Math.abs(n) < .001 && (n = 0), Math.abs(i) < .001 && (i = 0), e.set(t, n, i)
    }, this.stepMotionDelta = function (e, t) {
      t ? (d.x += .6 * e.x, d.y += .6 * e.y, d.z += .6 * e.z) : d.copy(f)
    }, this.getAccumulatedWheelDelta = function () {
      var e = Date.now(),
        t = 0;
      return l && e - l > 100 ? (t = g(a), a = 0, s = null, l = null, c = !1) : s && e - s > 100 && (c ? Math.abs(a) >= 3 && (t = a, a = 0) : (t = g(a), c = !0, a = 0)), t
    }, this.update = function () {
      var e = !1,
        i = h > -5;
      if (h > -5) {
        this.controller.setIsLocked(!0), this.getMotionDelta(p);
        var r = p.x,
          a = p.y,
          s = p.z;
        if (0 !== r || 0 !== a || 0 !== s)
          if (i = !0, h >= 0) a = -a, 0 !== (s = Math.abs(r) > Math.abs(a) ? r : a) && (s *= -1, t.setVerticalFov(t.getVerticalFov() * (1 + s), !0));
          else {
            var l = this.getAccumulatedWheelDelta() / 3;
            0 !== l && t.setFocalLength(t.getFocalLength() + l, !0)
          } this.stepMotionDelta(p, !0), -1 === h && Math.abs(s) < 1e-5 && (this.interactionEnd(-1), e = !0)
      }
      return i ? this.utilities.pivotActive(t.getPivotSetFlag(), !0) : this.utilities.pivotUpdate(), !o && (e || h > -5) && (h > -1 && d.copy(f), h = -5, this.controller.setIsLocked(!1)), n.dirty
    }, this.interactionStart = function (e, n) {
      (n || e > h) && (h = e, o = !0), t.toPerspective()
    }, this.interactionEnd = function (e) {
      e === h && (-1 !== e && this.utilities.pivotActive(!1), o = !1)
    }, this.handleWheelInput = function (e) {
      if (h > -1) return !1;
      t.getReverseZoomDirection() && (e *= -1), f.z += e, a += e;
      var n = Date.now();
      return s || (s = n), l = n, 0 != e && this.interactionStart(-1), !0
    }, this.handleGesture = function (e) {
      switch (e.type) {
        case "dragstart":
          return this.handleButtonDown(e, 0);
        case "dragmove":
          return this.handleMouseMove(e);
        case "dragend":
          return this.handleButtonUp(e, 0);
        case "drag3start":
          return m = "drag", this.handleButtonDown(e, 0);
        case "drag3move":
          return "drag" === m && this.handleMouseMove(e);
        case "drag3end":
          return "drag" === m && this.handleButtonUp(e, 0), m = null, !1
      }
      return !1
    }, this.handleButtonDown = function (e, t) {
      return u += 1 << t, 2 !== t && (d.x = .5 * (e.normalizedX + 1), d.y = 1 - .5 * (e.normalizedY + 1), f.copy(d), this.interactionStart(t), !0)
    }, this.handleButtonUp = function (e, t) {
      return u -= 1 << t, 2 !== t && (f.x = .5 * (e.normalizedX + 1), f.y = 1 - .5 * (e.normalizedY + 1), this.interactionEnd(t), !0)
    }, this.handleMouseMove = function (e) {
      return f.x = .5 * (e.normalizedX + 1), f.y = 1 - .5 * (e.normalizedY + 1), h > -1
    }, this.handleBlur = function (e) {
      return this.interactionEnd(h), !1
    }
  }
}, function (e, t, n) {
  "use strict";
  n.r(t), n.d(t, "WorldUpTool", (function () {
    return o
  }));
  var i = n(0),
    r = n(2);

  function o(e, t) {
    var n, o = t.navigation,
      a = o.getCamera(),
      s = ["worldup"],
      l = this,
      c = (n = new i.Vector3, function (e, t, r, o) {
        var a = new i.Vector3(e, t, r),
          s = o.dot(a);
        return n.copy(o), n.multiplyScalar(s), a.sub(n)
      });
    var u = 2 * Math.PI,
      h = 1e-5,
      d = !1,
      f = !1,
      p = !1,
      m = new function (e, t) {
        var n = 2 * Math.tan(i.Math.degToRad(15)),
          r = new i.MeshPhongMaterial({
            color: 12303291,
            ambient: 12303291,
            opacity: .5,
            transparent: !0,
            depthTest: !1,
            depthWrite: !1
          }),
          a = new i.Vector3,
          s = new i.Vector3,
          l = new i.Quaternion,
          d = new i.PerspectiveCamera(30, t.aspect, t.near, t.far),
          f = t,
          p = 1,
          m = 1,
          g = null,
          v = null,
          y = null,
          b = null,
          _ = null,
          x = null,
          w = null,
          E = null,
          A = null,
          S = new Array(6),
          M = 0,
          T = !1,
          C = !0,
          P = 0,
          L = 5 * Math.PI / 180,
          D = 7 * Math.PI / 180,
          I = 1;

        function R(e, t) {
          var n = Math.abs(e - t);
          return n > u ? n : Math.min(u - n, n)
        }

        function O(e, t) {
          var n = U(e);
          return n.distanceToSquared(t) < h || (s.set(-t.x, -t.y, -t.z), n.distanceToSquared(s) < h)
        }

        function k(e) {
          return e > u ? e : e <= 0 ? e + Math.PI : e - Math.PI
        }

        function N(e, t, n) {
          var i, r = e.clone().normalize(),
            o = new Array(3),
            a = new Array(6);
          o[0] = c(1, 0, 0, r), o[1] = c(0, 1, 0, r), o[2] = c(0, 0, 1, r);
          var u = t.clone().cross(r).normalize();
          for (i = 0; i < 3; ++i) {
            var h = o[i];
            a[i] = h.length(), a[i] < .1 ? S[i] = 1e3 : (h.multiplyScalar(1 / a[i]), S[i] = Math.atan2(u.dot(h), t.dot(h)))
          }
          for (S[3] = k(S[0]), S[4] = k(S[1]), S[5] = k(S[2]), a[3] = a[0], a[4] = a[1], a[5] = a[2], function (e, t) {
              for (var n = L + D + 2 * Math.PI / 180, i = 0; i < 6; ++i)
                if (1e3 !== S[i])
                  for (var r = i + 1; r < 6; ++r) {
                    if (1e3 !== S[r])
                      if (R(S[i], S[r]) < n) {
                        if (e[i] < e[r] && !O(i, t) || O(r, t)) {
                          S[i] = 1e3;
                          break
                        }
                        S[r] = 1e3
                      }
                  }
            }(a, n), i = 0; i < 6; ++i)
            if (1e3 !== S[i]) {
              var d = s.set(0, 0, 1);
              l.setFromAxisAngle(d, S[i]);
              var f = s.set(0, .54, 0);
              f.applyQuaternion(l), E[i].position.copy(f), E[i].visible = !0
            } else E[i].visible = !1
        }

        function F(e, t, n, a, s) {
          return x || (x = function () {
            x = new i.Object3D;
            var e = new i.RingGeometry(.5 - .01 * p, .5, 60),
              t = new i.Mesh(e, r);
            v = t;
            var n = .007 * p,
              o = new i.BoxGeometry(.93, n, n),
              a = new i.BoxGeometry(n, .93, n),
              s = new i.BoxGeometry(n, n, .93);
            y = new i.Mesh(o, r), b = new i.Mesh(a, r), _ = new i.Mesh(s, r), x.add(y), x.add(b), x.add(_), w = new i.Mesh(new i.CircleGeometry(.005), r), x.add(w), E = new Array(6), A = new Array(6);
            for (var l = 0; l < 6; ++l) {
              var c = .005 * p,
                u = .0025 * p;
              E[l] = new i.Mesh(new i.CircleGeometry(c, 16), r), A[l] = new i.Mesh(new i.CircleGeometry(u, 16), r), A[l].visible = !1, E[l].add(A[l]), t.add(E[l])
            }
            return x.add(t), x
          }()), o.orient(v, t, d.position, a), N(n, s, a), x.scale.x = e, x.scale.y = e, x.scale.z = e, x.position.copy(t), x
        }

        function U(e) {
          if (a.set(0, 0, 0), e >= 0) {
            var t = e >= 3 ? -1 : 1;
            0 === (e %= 3) && (a.x = t), 1 === e && (a.y = t), 2 === e && (a.z = t)
          }
          return T && a.multiplyScalar(-1), a
        }

        function V(e, t) {
          for (var n = R(S[0], e), i = 0, r = 1; r < 6; ++r) {
            var o = R(S[r], e);
            o < n && (n = o, i = r)
          }
          return n, n < t ? i : -1
        }

        function B(e) {
          o.setWorldUpVector(e, !0)
        }

        function z(e) {
          if (0 !== e) {
            var t = 30 * Math.PI / 180,
              n = s.copy(d.position).sub(g).normalize();
            l.setFromAxisAngle(n, e);
            var i = o.getWorldUpVector(),
              r = Math.abs(n.angleTo(i));
            (r < t || Math.PI - r < t) && i.copy(o.getCameraUpVector()), i.applyQuaternion(l), B(i)
          }
        }

        function G(e, t, n, i) {
          return e < t && U(n).distanceToSquared(i) < h
        }

        function H(e, t) {
          e.dot(t) < 0 && (t = t.clone().multiplyScalar(-1)), o.orient(w, g, d.position, t), w.position.copy(t.multiplyScalar(.495));
          for (var n = !1, i = C ? D : L, r = 0; r < 6; ++r) {
            var a = R(S[r], M),
              s = G(a, i, r, e);
            s && (n = !0);
            var l = s ? 4 : 3 * (1 - 3 * a / Math.PI);
            l < 1 && (l = 1), l *= p, A[r].visible = s;
            var c = E[r];
            c.scale.x = l, c.scale.y = l, c.scale.z = l
          }
          return y.visible = n, b.visible = n, _.visible = n, n
        }

        function W(e) {
          (M += e) > Math.PI ? M -= u : M <= -Math.PI && (M = u + M);
          var t = function () {
            if (!C) {
              var e = V(M, L);
              if (e >= 0) return 0, C = !0, M = S[e], U(e)
            }
            return !1
          }();
          if (t) P = M, B(t);
          else if (function () {
              if (C) {
                if (V(M, D) < 0) return C = !1, !0;
                0
              }
              return !1
            }()) {
            z(M - P), P = 0
          } else {
            if (C) return !1;
            z(e)
          }
          return !0
        }
        e.createOverlayScene("roll", null, null, d), this.updateRollCamera = function (e, t) {
          d.position.copy(f.position), d.quaternion.copy(f.quaternion), d.up.copy(f.up), d.aspect = f.aspect, e && t && (d.near = t - e, d.far = t + e), d.updateProjectionMatrix()
        }, this.isSnapped = function () {
          return C
        }, this.resize = function () {
          var e = I * n,
            t = e * f.aspect,
            i = (f.aspect < 1 ? t : e) * m;
          x.scale.x = i, x.scale.y = i, x.scale.z = i
        }, this.start = function (t, n) {
          this.updateHUD(t, n), e.addOverlay("roll", x)
        }, this.updateHUD = function (e, t) {
          g = e, t < .35 ? t = .35 : t > .8 && (t = .8), m = t, p = .8 / t;
          var i = a.copy(e).sub(f.position),
            r = (I = i.length()) * n,
            s = r * f.aspect,
            l = (f.aspect < 1 ? s : r) * t;
          this.updateRollCamera(l, I);
          var c = o.getWorldUpVector(),
            u = o.getCameraUpVector();
          F(l, e, i, c, u), M = 0, P = 0;
          var h = c.dot(u);
          T = h < 0, C = H(c, u)
        }, this.handleRoll = function (e, t, n) {
          if (this.updateRollCamera(), H(o.getWorldUpVector(), o.getCameraUpVector()), 0 !== e || 0 !== t) {
            var i = n.x - e - .5,
              r = n.y - t - .5,
              a = n.x - .5,
              s = n.y - .5;
            return W(Math.atan2(s, a) - Math.atan2(r, i))
          }
          return !1
        }, this.handleRollTouch = function (e) {
          this.updateRollCamera(), H(o.getWorldUpVector(), o.getCameraUpVector());
          var t = e - M;
          return Math.abs(t) > .001 && W(t)
        }, this.end = function () {
          e.removeOverlay("roll", x)
        }
      }(e, a),
      g = new i.Vector3,
      v = new i.Vector3,
      y = new i.Vector3,
      b = null,
      _ = 0;
    this.getNames = function () {
      return s
    }, this.getName = function () {
      return s[0]
    }, this.activate = function (e) {
      t.addEventListener(r.CAMERA_CHANGE_EVENT, this.handleCameraChange), p = !1
    }, this.deactivate = function (e) {
      m.end(), t.removeEventListener(r.CAMERA_CHANGE_EVENT, this.handleCameraChange), this.utilities.restorePivot(), b = null, d = !1, p = !1
    }, this.getCursor = function () {
      return "auto"
    }, this.getMotionDelta = function (e) {
      var t = v.x - g.x,
        n = v.y - g.y,
        i = v.z - g.z;
      Math.abs(t) < .001 && (t = 0), Math.abs(n) < .001 && (n = 0), Math.abs(i) < .001 && (i = 0), e.set(t, n, i)
    }, this.stepMotionDelta = function () {
      g.copy(v)
    }, this.update = function () {
      if (!p) {
        var e = o.getEyeVector(),
          t = .5 * (a.near + a.far);
        e.normalize().multiplyScalar(t);
        var n = e.add(a.position);
        this.utilities.savePivot(), this.utilities.setPivotPoint(n, !0, !0), this.utilities.pivotActive(!0);
        m.start(n, .65), p = !0
      }
      var i = f;
      this.getMotionDelta(y);
      var r = y.x,
        s = y.y,
        l = y.z;
      return (f || "roll" === b || d && (0 !== r || 0 !== s || 0 !== l)) && (f = "roll" === b ? m.handleRollTouch(_) : m.handleRoll(r, s, v)), this.stepMotionDelta(), a.dirty && (i = !0), i
    }, this.handleResize = function () {
      m.resize(), f = !0
    }, this.handleGesture = function (e) {
      switch (e.type) {
        case "dragstart":
          return b = "drag", this.handleButtonDown(e, 0);
        case "dragmove":
          return this.handleMouseMove(e);
        case "dragend":
          return b = null, this.handleButtonUp(e, 0);
        case "rotatestart":
          return t.removeEventListener(r.CAMERA_CHANGE_EVENT, this.handleCameraChange), b = "roll", _ = i.Math.degToRad(e.rotation), {
              x: .5 * (e.normalizedX + 1),
              y: 1 - .5 * (e.normalizedY + 1)
            },
            function (e) {
              var t = e.pointers[1].clientX - e.pointers[0].clientX,
                n = e.pointers[1].clientY - e.pointers[0].clientY,
                i = Math.sqrt(t * t + n * n),
                r = o.getScreenViewport();
              return i / Math.min(r.width, r.height)
            }(e), !0;
        case "rotatemove":
          return _ = i.Math.degToRad(e.rotation), "roll" === b;
        case "rotateend":
          return t.addEventListener(r.CAMERA_CHANGE_EVENT, this.handleCameraChange), _ = i.Math.degToRad(e.rotation), b = null, !1
      }
      return !1
    }, this.handleWheelInput = function (e) {
      return !0
    }, this.handleCameraChange = function () {
      var e = o.getEyeVector(),
        t = .5 * (a.near + a.far);
      e.normalize().multiplyScalar(t);
      var n = e.add(a.position);
      m.updateHUD(n, .65)
    }, this.handleButtonDown = function (e, n) {
      return g.x = .5 * (e.normalizedX + 1), g.y = 1 - .5 * (e.normalizedY + 1), v.copy(g), d = !0, b = null, this.controller.setIsLocked(!0), t.removeEventListener(r.CAMERA_CHANGE_EVENT, l.handleCameraChange), !0
    }, this.handleButtonUp = function (e, n) {
      return v.x = .5 * (e.normalizedX + 1), v.y = 1 - .5 * (e.normalizedY + 1), d = !1, f = !0, this.controller.setIsLocked(!1), t.addEventListener(r.CAMERA_CHANGE_EVENT, l.handleCameraChange), !0
    }, this.handleMouseMove = function (e) {
      return v.x = .5 * (e.normalizedX + 1), v.y = 1 - .5 * (e.normalizedY + 1), !0
    }, this.handleBlur = function (e) {
      return d = !1, b = null, !1
    }
  }
}, function (e, t, n) {
  "use strict";
  n.r(t), n.d(t, "LoadingSpinner", (function () {
    return r
  }));
  var i = n(8);

  function r(e) {
    this.parentDiv = e;
    var t = this.getDocument();
    this.container = t.createElement("div"), this.container.innerHTML = ['<div class="path">', '<svg width="100%" height="100%" viewBox="0 0 100 100" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">', '<path d="M2.5,50a47.5,47.5 0 1,0 95,0a47.5,47.5 0 1,0 -95,0" vector-effect="non-scaling-stroke"/>', '<path d="M 2.5 50 A 47.5 47.5 0 0 1 47.5 2.5" vector-effect="non-scaling-stroke"/>', "</svg>", "</div>", '<div class="message" data-i18n="Spinner Loading">LOADING</div>'].join(""), this.container.className = "loading-spinner"
  }
  n(12).GlobalManagerMixin.call(r.prototype), r.prototype.addClass = function (e) {
    this.container.classList.add(e)
  }, r.prototype.attachToDom = function () {
    return !this.container.parentNode && (i.i18n.localize(this.container), this.parentDiv.appendChild(this.container), !0)
  }, r.prototype.removeFromDom = function () {
    return !!this.container.parentNode && (this.container.parentNode.removeChild(this.container), !0)
  }, r.prototype.setVisible = function (e) {
    e ? this.attachToDom() : this.removeFromDom()
  }
}, function (e, t, n) {
  "use strict";
  n.r(t), n.d(t, "Tree", (function () {
    return s
  }));
  var i = n(3),
    r = n(108),
    o = n(12),
    a = n(168);

  function s(e, t, n, i) {
    this.myDelegate = e, this.mySelectedNodes = [], this.myOptions = i || {}, this.parentContainer = n;
    this.groupClassName = this.myOptions.groupClassName || "expanded", this.leafClassName = this.myOptions.leafClassName || "expanded", this.selectedClassName = this.myOptions.selectedClassName || "selected", this.myGroupNodes = [], this.nodeToElement = {}, this.nodeIdToNode = {};
    var r = this.myRootContainer = this.createHtmlElement_(n, "div", "treeview"),
      o = this.rootElem = this.createElement_(t, r, i, 0);
    this.setInputHandlers_(), i && i.excludeRoot && o.classList.add("exclude")
  }
  s.prototype.constructor = s, o.GlobalManagerMixin.call(s.prototype), s.prototype.destroy = function () {
    this.myDelegate = null, this.parentContainer && (this.parentContainer.removeChild(this.myRootContainer), this.myRootContainer = null, this.parentContainer = null)
  }, s.prototype.show = function (e) {
    var t = this.myRootContainer;
    t.style.display = e ? "block" : "none"
  }, s.prototype.getRootContainer = function () {
    return this.myRootContainer
  }, s.prototype.getElementForNode = function (e) {
    return "number" != typeof e && "string" != typeof e && (e = this.myDelegate.getTreeNodeId(e)), this.nodeToElement[e]
  }, s.prototype.delegate = function () {
    return this.myDelegate
  }, s.prototype.isCollapsed = function (e) {
    return this.hasClass(e, "collapsed")
  }, s.prototype.setCollapsed = function (e, t, n) {
    t ? (this.addClass(e, "collapsed", n), this.removeClass(e, "expanded", n)) : (this.addClass(e, "expanded", n), this.removeClass(e, "collapsed", n))
  }, s.prototype.setAllCollapsed = function (e) {
    var t, n;
    e ? (t = function (e) {
      return e.classList.contains("expanded")
    }, n = function (e) {
      e.classList.add("collapsed"), e.classList.remove("expanded")
    }) : (t = function (e) {
      return e.classList.contains("collapsed")
    }, n = function (e) {
      e.classList.add("expanded"), e.classList.remove("collapsed")
    });
    for (var i = 0; i < this.myGroupNodes.length; ++i) {
      var r = this.myGroupNodes[i];
      t(r) && n(r)
    }
  }, s.prototype.addToSelection = function (e) {
    var t = this;

    function n(e) {
      return -1 === t.mySelectedNodes.indexOf(e) && (t.mySelectedNodes.push(e), !0)
    }
    for (var i = e.length, r = 0; r < i; ++r) {
      var o = e[r];
      n(o) && this.addClass(o, this.selectedClassName)
    }
  }, s.prototype.removeFromSelection = function (e) {
    var t = this;

    function n(e) {
      var n = t.mySelectedNodes.indexOf(e);
      return -1 !== n && (t.mySelectedNodes.splice(n, 1), !0)
    }
    for (var i = e.length - 1; i >= 0; --i) {
      var r = e[i];
      n(r) && this.removeClass(r, this.selectedClassName)
    }
  }, s.prototype.setSelection = function (e) {
    return this.removeFromSelection(this.mySelectedNodes), this.addToSelection(e), this.mySelectedNodes
  }, s.prototype.getSelection = function () {
    return this.mySelectedNodes.concat()
  }, s.prototype.clearSelection = function () {
    this.removeFromSelection(this.mySelectedNodes)
  }, s.prototype.isSelected = function (e) {
    return this.hasClass(e, this.selectedClassName)
  }, s.prototype.scrollTo = function (e) {
    var t = this.getElementForNode(e);
    if (t) {
      var n = t.offsetTop;
      for (t = t.parentNode; t && t != this.myRootContainer;) n += t.offsetTop, t = t.parentNode;
      var i = this.myRootContainer.parentNode;
      this.myDelegate.getScrollContainer() && (i = this.myDelegate.getScrollContainer()), i.scrollTop = n
    }
  }, s.prototype.addClass = function (e, t, n) {
    var i = this.getElementForNode(e);
    if (i) {
      if (n) {
        i = i.parentNode;
        for (var r = this.myOptions.excludeRoot ? this.rootElem : this.myRootContainer; i && i !== r;) i.classList.add(t), i = i.parentNode
      } else i.classList.add(t);
      return !0
    }
    return !1
  }, s.prototype.removeClass = function (e, t, n) {
    var i = this.getElementForNode(e);
    if (i) {
      if (n) {
        i = i.parentNode;
        for (var r = this.myOptions.excludeRoot ? this.rootElem : this.myRootContainer; i && i !== r;) i.classList.remove(t), i = i.parentNode
      } else i.classList.remove(t);
      return !0
    }
    return !1
  }, s.prototype.hasClass = function (e, t) {
    return this.getElementForNode(e).classList.contains(t)
  }, s.prototype.clear = function () {
    for (var e = this.myRootContainer; e.hasChildNodes();) e.removeChild(e.lastChild);
    this.nodeToElement = {}, this.nodeIdToNode = {}
  }, s.prototype.createElement_ = function (e, t, n, i) {
    if (null == e) return null;
    if (!this.myDelegate.shouldCreateTreeNode(e)) return null;
    var r, o = this;

    function a(t, r, a, s) {
      var l = o.createHtmlElement_(t, r, a),
        c = o.myDelegate.getTreeNodeId(s);
      l.setAttribute("lmv-nodeId", c);
      var u = o.createHtmlElement_(l, "lmvheader"),
        h = o.createHtmlElement_(u, "icon");
      return h.addEventListener("mousedown", (function (e) {
        e.stopPropagation(), e.preventDefault()
      }), !1), h.addEventListener("click", (function (t) {
        o.myDelegate.onTreeNodeIconClick(o, e, t), t.stopPropagation(), t.preventDefault()
      }), !1), o.myDelegate.createTreeNode(e, u, n, r, i), l
    }
    var s = this.myDelegate.getTreeNodeId(e);
    if (o.myDelegate.isTreeNodeGroup(e)) {
      r = a(t, "group", o.groupClassName, e), o.nodeToElement[s] = r, o.nodeIdToNode[s] = e;
      var l = o.myOptions.excludeRoot ? 1 : 0;
      i == l && (r.style.left = "0px"), o.myGroupNodes.push(r), o.myDelegate.forEachChild(e, (function (e) {
        o.createElement_(e, r, n, i + 1)
      }))
    } else {
      r = a(t, "leaf", o.leafClassName, e), o.nodeToElement[s] = r, o.nodeIdToNode[s] = e;
      l = o.myOptions.excludeRoot ? 1 : 0;
      i == l && (r.style.marginLeft = "0px")
    }
    var c = o.myDelegate.getTreeNodeClass(e);
    return c && r.classList.add(c), r
  }, s.prototype.setInputHandlers_ = function () {
    var e = this,
      t = this.myRootContainer,
      n = function (n) {
        var i = null,
          r = !1;
        do {
          n && n !== t ? n.hasAttribute("lmv-nodeId") ? (i = n, r = !0) : n = n.parentElement : (i = null, r = !0)
        } while (!r);
        if (i) {
          var o = i.getAttribute("lmv-nodeId");
          return e.nodeIdToNode[o] || null
        }
        return null
      };
    Object(i.isTouchDevice)() && (this.hammer = new a.Manager(t, {
      recognizers: [r.GestureRecognizers.doubletap, r.GestureRecognizers.press],
      handlePointerEventMouse: !1,
      inputClass: i.isIE11 ? a.PointerEventInput : a.TouchInput
    }), this.hammer.on("doubletap", (function (t) {
      var i = n(t.target);
      null !== i && e.myDelegate.onTreeNodeDoubleClick(e, i, t)
    })), this.hammer.on("press", (function (t) {
      var i = n(t.target);
      null !== i && e.myDelegate.onTreeNodeRightClick(e, i, t)
    }))), t.addEventListener("click", (function (t) {
      var i = n(t.target);
      null !== i && (e.myDelegate.onTreeNodeClick(e, i, t), t.stopPropagation(), t.target.classList.contains("propertyLink") || t.preventDefault())
    }), !1), t.addEventListener("dblclick", (function (t) {
      var i = n(t.target);
      null !== i && (e.myDelegate.onTreeNodeDoubleClick(e, i, t), t.stopPropagation(), t.preventDefault())
    }), !1), t.addEventListener("contextmenu", (function (t) {
      var i = n(t.target);
      null !== i && (e.myDelegate.onTreeNodeRightClick(e, i, t), t.stopPropagation(), t.preventDefault())
    }), !1), t.addEventListener("mouseover", (function (t) {
      var i = n(t.target);
      null !== i && (e.myDelegate.onTreeNodeHover(e, i, t), t.stopPropagation(), t.preventDefault())
    }), !1), t.addEventListener("mouseout", (function (t) {
      var i = t.toElement || t.relatedTarget;
      if (n(t.target) != n(i)) {
        e.myDelegate.onTreeNodeHover(e, -1, t), t.stopPropagation(), t.preventDefault()
      }
    }), !1)
  }, s.prototype.createHtmlElement_ = function (e, t, n) {
    var i = this.getDocument().createElement(t);
    return e.appendChild(i), n && (i.className = n), i
  }, s.prototype.iterate = function (e, t) {
    if (null != e && this.myDelegate.shouldCreateTreeNode(e)) {
      var n = this.getElementForNode(e);
      if (n) {
        t(e, n);
        var i = this;
        this.myDelegate.forEachChild(e, (function (e) {
          i.iterate(e, t)
        }))
      }
    }
  }
}, function (e, t, n) {
  "use strict";
  n.r(t), n.d(t, "TreeOnDemand", (function () {
    return c
  }));
  var i = n(3),
    r = n(108),
    o = n(269),
    a = n(8),
    s = n(12),
    l = n(168);

  function c(e, t) {
    this.dirty = !1, this.nextFrameId = 0, this.scrollY = 0, this.delegates = [], this.idToDelegate = {}, this.options = t;
    var n = this.getDocument();
    this.rootContainer = n.createElement("div"), this.rootContainer.classList.add("docking-panel-container-gradient"), this.rootContainer.classList.add("treeview"), this.rootContainer.classList.add("on-demand"), e.appendChild(this.rootContainer), this.paddingDiv = n.createElement("div"), this.paddingDiv.style.border = 0, this.paddingDiv.style.margin = 0, this.paddingDiv.style.padding = 0, this.sizedDiv = e.parentNode, this.nodeCssTable = [
      [],
      ["group"],
      ["leaf"]
    ], this.cssStringToNodeCssTable = {
      "": 0,
      group: 1,
      leaf: 2
    }, this.nodeIndexToNodeCssTables = {};
    for (var a = [], s = 0; s < 150; ++s) {
      var c = b(n);
      a[s] = c
    }
    this.elementsPool = a, this.elementsUsed = 0, this.spinner = new o.LoadingSpinner(e), this.spinner.setGlobalManager(this.globalManager), this.spinner.addClass("tree-loading-spinner");
    var u = Object(i.isTouchDevice)();
    u && (this.hammer = new l.Manager(this.rootContainer, {
      recognizers: [r.GestureRecognizers.doubletap, r.GestureRecognizers.press],
      handlePointerEventMouse: !1,
      inputClass: i.isIE11 ? l.PointerEventInput : l.TouchInput
    }));
    for (s = 0; s < 150; ++s) {
      c = a[s];
      u && (this.hammer.on("doubletap", _.bind(this)), this.hammer.on("press", x.bind(this))), c.addEventListener("click", w.bind(this)), c.addEventListener("dblclick", E.bind(this)), c.addEventListener("contextmenu", A.bind(this)), c.icon.addEventListener("click", S.bind(this)), c.icon.addEventListener("mousedown", M.bind(this))
    }
    f(this)
  }
  var u = c.prototype;

  function h(e) {
    if (e.dirty = !1, function (e) {
        for (var t = e.elementsUsed, n = e.elementsPool, i = 0; i < t; ++i) {
          var r = n[i];
          r.setAttribute("lmv-nodeId", ""), r.className = "";
          for (var o = r.header, a = o.childNodes.length - 1, s = 0; s < a; ++s) o.removeChild(o.lastChild)
        }
        e.clear()
      }(e), e.displayNoProperties(!1), 0 !== e.delegates.length)
      if (1 === e.delegates.length && e.delegates[0].isLoading()) e.spinner.setVisible(!0);
      else {
        if (1 === e.delegates.length && e.delegates[0].isNotAvailable()) return e.spinner.setVisible(!1), void e.displayNoProperties(!0);
        e.spinner.setVisible(!1),
          function (e) {
            var t = e.rootContainer,
              n = function (e) {
                return {
                  width: 0 | e.sizedDiv.clientWidth,
                  height: 0 | e.sizedDiv.clientHeight
                }
              }(e).height,
              i = 0,
              r = 0,
              o = !0;
            t.appendChild(e.paddingDiv);
            var a = e.delegates.slice(0),
              s = e.isExcludeRoot();
            for (; a.length;) {
              var l = a.shift(),
                c = l.modelDiv;
              t.appendChild(c);
              for (var u = [l.getRootId()], h = {
                  curr: s ? -1 : 0,
                  popIds: []
                }; u.length && o;) {
                if (i > e.scrollY + n + 300) {
                  o = !1;
                  break
                }
                if (e.elementsUsed === e.elementsPool.length) {
                  o = !1;
                  break
                }
                var f = u.shift(),
                  p = -1 === h.curr ? 0 : l.getTreeNodeClientHeight(f),
                  m = i + p;
                if (p > 0 && m + 300 >= e.scrollY) {
                  var g = e.elementsPool[e.elementsUsed++];
                  g.setAttribute("lmv-nodeId", f), l.createTreeNode(f, g.header);
                  var y = l.getTreeNodeClass(f);
                  y && g.classList.add(y);
                  var b = v(e, l, f);
                  if (b)
                    for (var _ = b.length, x = 0; x < _; ++x) g.classList.add(b[x]);
                  var w = l.getTreeNodeDepthOffset(f, h.curr);
                  g.header.style.paddingLeft = w + "px", c.appendChild(g)
                }
                if (m + 300 < e.scrollY && (r = m), i = m, (S = d(e, l, f, 0 === p)) && S.length > 0) {
                  h.curr++;
                  for (var E = S[S.length - 1], A = h.popIds.length - 1; A >= 0 && h.popIds[A] === f;) h.popIds[A--] = E;
                  h.popIds.push(E), u = S.concat(u)
                }
                for (; h.popIds.length > 0 && f === h.popIds[h.popIds.length - 1];) h.popIds.pop(), h.curr--
              }
              for (e.paddingDiv.style.height = r + "px"; u.length;) {
                var S;
                f = u.shift(), p = -1 === h.curr ? 0 : l.getTreeNodeClientHeight(f);
                i = m = i + p, (S = d(e, l, f)) && S.length && (u = S.concat(u))
              }
            }
            t.style.height = i + "px"
          }(e)
      }
    else e.spinner.setVisible(!1)
  }

  function d(e, t, n, i) {
    if (!t.isTreeNodeGroup(n)) return null;
    if (!i && e.isCollapsed(t, n)) return null;
    var r = [];
    return t.forEachChild(n, (function (e) {
      r.push(e)
    })), r
  }

  function f(e, t) {
    e.dirty && !t || (t ? h(e) : (e.dirty = !0, e.nextFrameId = requestAnimationFrame((function () {
      h(e)
    }))))
  }

  function p(e, t) {
    return "number" != typeof t && "string" != typeof t ? e.threeDelegate.getTreeNodeId(0 | t) : t
  }

  function m(e, t) {
    for (var n = null; t && t !== e.rootContainer;) {
      if (t.hasAttribute("lmv-nodeId")) {
        n = t;
        break
      }
      t = t.parentElement
    }
    if (!n) return null;
    var i = n.getAttribute("lmv-nodeId");
    return parseFloat(i)
  }

  function g(e, t) {
    for (var n = null; t && t !== e.rootContainer;) {
      if (t.hasAttribute("lmv-modelId")) {
        n = t;
        break
      }
      t = t.parentElement
    }
    if (!n) return null;
    var i = n.getAttribute("lmv-modelId");
    return parseInt(i)
  }

  function v(e, t, n) {
    if (t.isControlId(n)) return t.getControlIdCss(n);
    var i = t.getTreeNodeIndex(n);
    return e.nodeCssTable[e.nodeIndexToNodeCssTables[t.model.id][i]]
  }

  function y(e, t, n, i) {
    var r = i.join(" "),
      o = e.cssStringToNodeCssTable[r] || e.nodeCssTable.length;
    o === e.nodeCssTable.length && (e.nodeCssTable.push(i), e.cssStringToNodeCssTable[r] = o);
    var a = t.getTreeNodeIndex(n);
    e.nodeIndexToNodeCssTables[t.model.id][a] = o
  }

  function b(e, t, n) {
    var i = e.createElement("lmvheader"),
      r = e.createElement("icon");
    i.appendChild(r);
    var o = e.createElement("div");
    return o.header = i, o.icon = r, o.appendChild(i), o
  }

  function _(e) {
    var t = m(this, e.target);
    if (t) {
      var n = g(this, e.target),
        i = this.getDelegate(n);
      i && i.onTreeNodeDoubleClick(this, t, e)
    }
  }

  function x(e) {
    var t = m(this, e.target);
    if (t) {
      var n = g(this, e.target),
        i = this.getDelegate(n);
      i && i.onTreeNodeRightClick(this, t, e)
    }
  }

  function w(e) {
    if (!e.target.classList.contains("group") && !e.target.classList.contains("leaf")) {
      var t = m(this, e.target);
      if (t) {
        var n = g(this, e.target),
          i = this.getDelegate(n);
        i && (i.onTreeNodeClick(this, t, e), e.stopPropagation(), e.preventDefault())
      }
    }
  }

  function E(e) {
    if (!e.target.classList.contains("group") && !e.target.classList.contains("leaf")) {
      var t = m(this, e.target);
      if (t) {
        var n = g(this, e.target),
          i = this.getDelegate(n);
        i && (i.onTreeNodeDoubleClick(this, t, e), e.stopPropagation(), e.preventDefault())
      }
    }
  }

  function A(e) {
    if (!e.target.classList.contains("group") && !e.target.classList.contains("leaf")) {
      var t = m(this, e.target);
      if (t) {
        var n = g(this, e.target),
          i = this.getDelegate(n);
        i && (i.onTreeNodeRightClick(this, t, e), e.stopPropagation(), e.preventDefault())
      }
    }
  }

  function S(e) {
    var t = m(this, e.target);
    if (t) {
      var n = g(this, e.target),
        i = this.getDelegate(n);
      i && (i.onTreeNodeIconClick(this, t, e), e.stopPropagation(), e.preventDefault())
    }
  }

  function M(e) {
    e.stopPropagation(), e.preventDefault()
  }
  u.constructor = c, s.GlobalManagerMixin.call(u), u.pushDelegate = function (e) {
    this.delegates.push(e), this.idToDelegate[e.model.id] = e, f(this)
  }, u.removeDelegate = function (e) {
    for (var t = 0; t < this.delegates.length; ++t) {
      if (this.delegates[t].model.id === e) return this.delegates.splice(t, 1), delete this.idToDelegate[e], delete this.nodeIndexToNodeCssTables[e], f(this), !0
    }
    return !1
  }, u.setInstanceTree = function (e, t) {
    if (e.setInstanceTree(t), f(this), t) {
      var n = new Uint8Array(e.getTreeNodeCount()),
        i = e.instanceTree.getRootId();
      e.forEachChild(i, (function (t) {
        var i = e.getTreeNodeIndex(t);
        n[i] = e.isTreeNodeGroup(t) ? 1 : 2
      }), !0);
      var r = e.model.id;
      this.nodeIndexToNodeCssTables[r] = n;
      var o = 0,
        a = 0;
      t.enumNodeChildren(i, (function (e) {
        a || (o = e), a++
      })), this.setAllCollapsed(e, !0);
      var s = this.options.excludeRoot,
        l = this.options.startCollapsed;
      s ? (this.setCollapsed(e, i, !1), l || this.setCollapsed(e, o, !1)) : l || this.setCollapsed(e, e.rootId, !1), f(this, !0)
    }
  }, u.show = function (e) {
    this.rootContainer.style.display = block
  }, u.getRootContainer = function () {
    return this.rootContainer
  }, u.getDelegate = function (e) {
    return this.idToDelegate[parseInt(e)]
  }, u.isCollapsed = function (e, t) {
    var n = v(this, e, t);
    return n && -1 !== n.indexOf("collapsed")
  }, u.setCollapsed = function (e, t, n, i) {
    n ? (this.addClass(e, t, "collapsed", i), this.removeClass(e, t, "expanded", i)) : (this.addClass(e, t, "expanded", i), this.removeClass(e, t, "collapsed", i))
  }, u.setAllCollapsed = function (e, t) {
    var n = function (t) {
        this.addClass(e, t, "collapsed", !1), this.removeClass(e, t, "expanded", !1)
      }.bind(this),
      i = e.instanceTree.getRootId();
    this.iterate(e, i, (function (t) {
      return e.isTreeNodeGroup(t) && n(t), !0
    }))
  }, u.addToSelection = function (e, t) {
    for (var n = t.length, i = 0; i < n; ++i) this.addClass(e, t[i], "selected", !1);
    f(this)
  }, u.removeFromSelection = function (e, t) {
    for (var n = t.length, i = 0; i < n; ++i) this.removeClass(e, t[i], "selected", !1);
    f(this)
  }, u.setSelection = function (e, t) {
    return this.clearSelection(e), this.addToSelection(e, t), this.selectedNodes
  }, u.clearSelection = function (e) {
    var t = [],
      n = function (n) {
        var i = v(this, e, n);
        i && -1 !== i.indexOf("selected") && (t[0] = n, this.removeFromSelection(e, t))
      }.bind(this),
      i = e.instanceTree.getRootId();
    e.forEachChild(i, n, !0)
  }, u.isSelected = function (e) {
    var t = v(this, delegate, e);
    return t && -1 !== t.indexOf("selected")
  }, u.scrollTo = function (e, t) {
    var n = this.getDelegate(t.id);
    if (!n || !n.isNotAvailable()) {
      var i = !1,
        r = [],
        o = function (t, n) {
          if (!(i = i || e === t)) {
            r.push(n.getTreeNodeClientHeight(t));
            var a = r.length,
              s = n.isTreeNodeGroup(t) && -1 !== v(this, n, t).indexOf("expanded");
            n.forEachChild(t, (function (e) {
              o(e, n)
            })), s || i || r.length > a && r.splice(a)
          }
        }.bind(this);
      this.setCollapsed(n, e, !1, !0);
      var a = n.getRootId();
      if (o(a, n), !i) return -1;
      for (var s = 0, l = r.length, c = this.isExcludeRoot() ? 1 : 0; c < l; ++c) s += r[c];
      if (1 === this.delegates.length) return f(this, !0), s;
      for (c = 0; c < this.delegates.length; ++c) {
        var u = this.delegates[c];
        if (u === n) break;
        r = [], e = -1, i = !1, a = u.getRootId(), o(a, u), l = r.length;
        for (var h = 0, d = 0; d < l; ++d) h += r[d];
        s += h
      }
      return f(this, !0), s
    }
  }, u.addClass = function (e, t, n, i) {
    function r(t, n, i) {
      var r = v(t, e, n);
      r && (-1 === r.indexOf(i) && ((r = r.slice(0)).push(i), r.sort(), y(t, e, n, r)))
    }
    if (i)
      for (var o = e.getTreeNodeParentId(p(this, t)); o;) r(this, o, n), o = e.getTreeNodeParentId(o);
    else r(this, t, n);
    return f(this), !0
  }, u.removeClass = function (e, t, n, i) {
    function r(t, n, i) {
      var r = v(t, e, n);
      if (r) {
        var o = r.indexOf(i); - 1 !== o && ((r = r.slice(0)).splice(o, 1), y(t, e, n, r))
      }
    }
    if (i)
      for (var o = e.getTreeNodeParentId(p(this, t)); o;) r(this, o, n), o = e.getTreeNodeParentId(o);
    else r(this, t, n);
    return f(this), !0
  }, u.hasClass = function (e, t) {
    return 1 !== v(this, delegate, e).indexOf(t)
  }, u.clear = function () {
    for (var e, t = this.rootContainer; e = t.lastChild;) t.removeChild(e);
    for (var n = 0; n < this.delegates.length; ++n) this.delegates[n].clean();
    this.elementsUsed = 0
  }, u.iterate = function (e, t, n) {
    null != t && e.shouldCreateTreeNode(t) && n(t) && e.forEachChild(t, function (t) {
      this.iterate(e, t, n)
    }.bind(this))
  }, u.forEachDelegate = function (e) {
    for (var t = 0; t < this.delegates.length; ++t) e(this.delegates[t])
  }, u.destroy = function () {
    this.clear(), cancelAnimationFrame(this.nextFrameId), this.rootContainer.parentNode.removeChild(this.rootContainer), this.rootContainer = null, this.rootId = -1, this.nodeCssTable = null, this.nodeIndexToNodeCssTables = null, this.cssStringToNodeCssTable = null, this.elementsPool = null, this.elementsUsed = -1, this.scrollY = -1, this.hammer && (this.hammer.destroy(), this.hammer = null)
  }, u.setScroll = function (e) {
    Math.abs(this.scrollY - e) > 300 && (this.scrollY = e, f(this))
  }, u.displayNoProperties = function (e) {
    var t = this.getDocument();
    if (e) {
      if (!this.divNoProps) {
        this.divNoProps = t.createElement("div");
        var n = "Model Browser is not available";
        this.divNoProps.innerText = a.i18n.translate(n), this.divNoProps.setAttribute("data-i18n", n), this.divNoProps.classList.add("lmv-no-properties")
      }
      if (!this.divNoProps.parentNode) this.rootContainer.parentNode.appendChild(this.divNoProps)
    } else this.divNoProps && this.divNoProps.parentNode && this.divNoProps.parentNode.removeChild(this.divNoProps)
  }, u.isExcludeRoot = function () {
    return 1 === this.delegates.length && this.options.excludeRoot
  }, u.getDelegateCount = function () {
    return this.delegates.length
  }
}, function (e, t, n) {
  "use strict";
  n.r(t), n.d(t, "ContextMenu", (function () {
    return l
  }));
  var i = n(3),
    r = n(1),
    o = n(8),
    a = n(12),
    s = n(129);

  function l(e) {
    this.viewer = e, this.setGlobalManager(e.globalManager), this.menus = [], this.container = null, this.open = !1, this._onDOMevent = this._onDOMevent.bind(this)
  }
  l.prototype.constructor = l, a.GlobalManagerMixin.call(l.prototype), l.prototype.show = function (e, t) {
    var n = this.viewer.container.getBoundingClientRect();
    Array.isArray(e.changedPointers) && e.changedPointers.length > 0 && (e.clientX = e.changedPointers[0].clientX, e.clientY = e.changedPointers[0].clientY);
    var i = e.clientX - n.left,
      r = e.clientY - n.top;
    this.open || (this.showMenu(t, i, r), this.open = !0)
  }, l.prototype.showMenu = function (e, t, n) {
    var o, a = [],
      s = this.getDocument(),
      l = s.createElement("div");
    l.style.left = "0", l.style.top = "0", l.style.width = "100%", l.style.height = "100%", l.style.position = "absolute", l.style.zIndex = "10";
    var c = s.createElement("div");
    c.classList.add("menu"), c.classList.add("docking-panel"), c.classList.add("docking-panel-container-solid-color-a"), l.appendChild(c), this.viewer.container.appendChild(l), this.container = l, this.menus.push(c);
    for (var u = 0; u < e.length; ++u) {
      var h = e[u],
        d = h.title,
        f = h.target,
        p = h.icon,
        m = h.shortcut;
      o = this.createMenuItem(d, p, m), c.appendChild(o), "function" == typeof f ? this.addCallbackToMenuItem(o, f) : Array.isArray(f) ? a.push({
        menuItem: o,
        target: f
      }) : r.logger.warn("Invalid context menu option:", d, f)
    }
    var g = c.getBoundingClientRect(),
      v = g.width,
      y = g.height,
      b = this.viewer.container.getBoundingClientRect(),
      _ = b.width,
      x = b.height,
      w = Object(i.isTouchDevice)() && !this.viewer.navigation.getUseLeftHandedInput();
    for (w && (t -= v), t < 0 && (t = 0), _ < t + v && (t = _ - v) < 0 && (t = 0), n < 0 && (n = 0), x < n + y && (n = x - y) < 0 && (n = 0), c.style.top = Math.round(n) + "px", c.style.left = Math.round(t) + "px", u = 0; u < a.length; ++u) {
      var E = a[u];
      g = (o = E.menuItem).getBoundingClientRect(), t = Math.round((w ? g.left : g.right) - b.left), n = Math.round(g.top - b.top), this.addSubmenuCallbackToMenuItem(o, E.target, t, n)
    }
    this.container.addEventListener("touchend", this._onDOMevent), this.container.addEventListener("mousedown", this._onDOMevent), this.container.addEventListener("mouseup", this._onDOMevent)
  }, l.prototype._onDOMevent = function (e) {
    switch (e.type) {
      case "touchend":
        this._isContextMenu(e) || this.hide();
        break;
      case "mousedown":
        this._startX = e.clientX, this._startY = e.clientY;
        break;
      case "mouseup":
        this._isContextMenu(e) || (this.hide(), s.EventUtils.isRightClick(e) && e.clientX === this._startX && e.clientY === this._startY && this.viewer.triggerContextMenu(e))
    }
  }, l.prototype.createMenuItem = function (e, t, n) {
    var i = this.getDocument().createElement("div");
    return i.className = "menu-item", n = n || "", this.setMenuItemIcon(i, t), this.setMenuItemText(i, e), this.setMenuItemShortcut(i, n), i
  }, l.prototype.setMenuItemIcon = function (e, t) {
    var n = this.getDocument().createElement("div");
    n.classList.add("menu-item-icon"), t && n.classList.add(t), e.appendChild(n)
  }, l.prototype.setMenuItemText = function (e, t) {
    var n = this.getDocument().createElement("div");
    n.classList.add("menu-item-text"), n.setAttribute("data-i18n", t), n.textContent = o.i18n.translate(t), e.appendChild(n)
  }, l.prototype.setMenuItemShortcut = function (e, t) {
    var n = this.getDocument().createElement("div");
    n.classList.add("menu-item-shortcut"), n.textContent = t, e.appendChild(n)
  }, l.prototype.addCallbackToMenuItem = function (e, t) {
    var n = this;
    e.addEventListener("click", (function (e) {
      return n.hide(), t(), e.preventDefault(), !1
    }), !1)
  }, l.prototype.addSubmenuCallbackToMenuItem = function (e, t, n, i) {
    var r = this;
    e.addEventListener("click", (function () {
      r.showMenu(t, n, i)
    }), !1)
  }, l.prototype.hide = function () {
    return !!this.open && (this.menus = [], this.open = !1, this.container.removeEventListener("touchend", this._onDOMevent), this.container.removeEventListener("mousedown", this._onDOMevent), this.container.removeEventListener("mouseup", this._onDOMevent), this.container.parentNode.removeChild(this.container), this.container = null, !0)
  }, l.prototype._isContextMenu = function (e) {
    for (var t = this.menus[0], n = e.target; n !== this.container;) {
      if (n === t) return !0;
      n = n.parentNode
    }
    return !1
  }
}, function (e, t, n) {
  "use strict";

  function i(e) {
    var t = e.ownerDocument;
    this.bg = t.createElement("div"), this.bg.className = "progressbg", this.fg = t.createElement("div"), this.fg.className = "progressfg", this.bg.appendChild(this.fg), e.appendChild(this.bg), this.lastValue = -1, this.fg.style.width = "0%"
  }
  n.r(t), n.d(t, "ProgressBar", (function () {
    return i
  })), i.prototype.setPercent = function (e) {
    e != this.lastValue && (this.lastValue = e, e >= 99 ? this.bg.style.visibility = "hidden" : (this.bg.style.visibility = "visible", this.fg.style.width = e + "%"))
  }, i.prototype.setStyle = function (e) {
    !this.fg.classList.contains(e) && this.fg.classList.add(e)
  }, i.prototype.removeStyle = function (e) {
    this.fg.classList.contains(e) && this.fg.classList.remove(e)
  }
}, function (e, t, n) {
  "use strict";
  n.r(t), n.d(t, "ToolBar", (function () {
    return o
  }));
  var i = n(49),
    r = n(37);

  function o(e, t) {
    i.ControlGroup.call(this, e, t), this.removeClass("adsk-control-group"), this.addClass("adsk-toolbar"), t && t.alignVertically && this.addClass("adsk-toolbar-vertical")
  }
  o.Event = {
    VISIBILITY_CHANGED: r.Control.Event.VISIBILITY_CHANGED,
    COLLAPSED_CHANGED: r.Control.Event.COLLAPSED_CHANGED,
    CONTROL_ADDED: i.ControlGroup.Event.CONTROL_ADDED,
    CONTROL_REMOVED: i.ControlGroup.Event.CONTROL_REMOVED,
    SIZE_CHANGED: i.ControlGroup.Event.SIZE_CHANGED
  }, o.prototype = Object.create(i.ControlGroup.prototype), o.prototype.constructor = o
}, function (e, t, n) {
  "use strict";
  n.r(t), n.d(t, "RenderOptionsPanel", (function () {
    return l
  }));
  var i = n(48),
    r = n(2),
    o = n(3),
    a = n(33),
    s = n(23);

  function l(e) {
    var t = this;
    this.viewer = e, this.setGlobalManager(e.globalManager), i.DockingPanel.call(this, e.container, "RenderOptionsPanel", "Rendering Options");
    var n = this.getDocument();
    this.table = n.createElement("table"), this.table.className = "adsk-lmv-tftable", this.tbody = n.createElement("tbody"), this.table.appendChild(this.tbody), this.createScrollContainer({
      heightAdjustment: 70
    }), this.scrollContainer.appendChild(this.table), this.container.style.width = "320px", this.container.style.top = "260px", this.container.style.left = "220px", this.container.style.height = "460px", this.container.dockRight = !0, this.saoToggle = new a.OptionCheckbox("AO Enabled", this.tbody, !0), this.saoToggle.setGlobalManager(this.globalManager), this.addEventListener(this.saoToggle, "change", (function (n) {
      var i = t.saoToggle.checked;
      e.prefs.set("ambientShadows", i), e.setQualityLevel(i, e.impl.renderer().settings.antialias)
    })), this.saoRadius = new a.OptionSlider("AO Radius", 0, 200, this.tbody), this.saoRadius.setGlobalManager(this.globalManager), this.saoRadius.setValue(10), this.saoRadius.sliderElement.step = this.saoRadius.stepperElement.step = .01, this.addEventListener(this.saoRadius, "change", (function (n) {
      e.impl.renderer().setAOOptions(parseFloat(t.saoRadius.value), parseFloat(t.saoIntensity.value)), e.impl.renderer().composeFinalFrame()
    })), this.saoIntensity = new a.OptionSlider("AO Intensity", 0, 3, this.tbody), this.saoIntensity.setGlobalManager(this.globalManager), this.saoIntensity.setValue(.4), this.saoIntensity.sliderElement.step = this.saoIntensity.stepperElement.step = .01, this.addEventListener(this.saoIntensity, "change", (function (n) {
      e.impl.renderer().setAOOptions(parseFloat(t.saoRadius.value), parseFloat(t.saoIntensity.value)), e.impl.renderer().composeFinalFrame()
    })), this.groundShadowAlpha = new a.OptionSlider("Shadow Alpha", 0, 2, this.tbody), this.groundShadowAlpha.setGlobalManager(this.globalManager), this.groundShadowAlpha.setValue(1), this.groundShadowAlpha.sliderElement.step = this.groundShadowAlpha.stepperElement.step = .1, this.addEventListener(this.groundShadowAlpha, "change", (function (n) {
      e.setGroundShadowAlpha(parseFloat(t.groundShadowAlpha.value))
    })), this.groundShadowColor = new a.OptionCheckbox("Shadow Color", this.tbody), this.groundShadowColor.setGlobalManager(this.globalManager), o.isIE11 || (this.groundShadowColor.checkElement.value = "#000000", this.groundShadowColor.checkElement.type = "color"), this.addEventListener(this.groundShadowColor, "change", (function (n) {
      var i = t.groundShadowColor.checkElement.value;
      e.setGroundShadowColor(new THREE.Color(parseInt(i.substr(1, 7), 16)))
    })), this.groundReflectionAlpha = new a.OptionSlider("Reflection Alpha", 0, 2, this.tbody), this.groundReflectionAlpha.setGlobalManager(this.globalManager), this.groundReflectionAlpha.setValue(1), this.groundReflectionAlpha.sliderElement.step = this.groundReflectionAlpha.stepperElement.step = .1, this.addEventListener(this.groundReflectionAlpha, "change", (function (n) {
      e.setGroundReflectionAlpha(parseFloat(t.groundReflectionAlpha.value))
    })), this.groundReflectionColor = new a.OptionCheckbox("Reflection Color", this.tbody), this.groundReflectionColor.setGlobalManager(this.globalManager), o.isIE11 || (this.groundReflectionColor.checkElement.value = "#000000", this.groundReflectionColor.checkElement.type = "color"), this.addEventListener(this.groundReflectionColor, "change", (function (n) {
      var i = t.groundReflectionColor.checkElement.value;
      e.setGroundReflectionColor(new THREE.Color(parseInt(i.substr(1, 7), 16)))
    }));
    for (var l = [], c = 0; c < s.LightPresets.length; c++) l.push(s.LightPresets[c].name);
    this.envSelect = new a.OptionDropDown("Environment", this.tbody, l, e.impl.currentLightPreset()), this.envSelect.setGlobalManager(this.globalManager), this.addEventListener(this.envSelect, "change", (function (n) {
      var i = t.envSelect.selectedIndex;
      e.setLightPreset(i)
    }));
    var u = e.impl.renderer().getToneMapMethod();
    this.toneMapMethod = new a.OptionDropDown("Tonemap Method", this.tbody, ["None", "Canon-Lum", "Canon-RGB"], u), this.toneMapMethod.setGlobalManager(this.globalManager), this.addEventListener(this.toneMapMethod, "change", (function () {
      var n = t.toneMapMethod.selectedIndex;
      e.impl.setTonemapMethod(n)
    })), this.exposureBias = new a.OptionSlider("Exposure Bias", -30, 30, this.tbody), this.exposureBias.setGlobalManager(this.globalManager), this.exposureBias.setValue(e.impl.renderer().getExposureBias()), this.exposureBias.sliderElement.step = this.exposureBias.stepperElement.step = .1, this.addEventListener(this.exposureBias, "change", (function (n) {
      e.impl.setTonemapExposureBias(t.exposureBias.value, t.whiteScale.value)
    })), this.exposureBias.setDisabled(0 == u), this.whiteScale = new a.OptionSlider("Light Intensity", -5, 20, this.tbody), this.whiteScale.setGlobalManager(this.globalManager);
    var h = 0;
    e.impl.dir_light1 && (h = 0 != e.impl.dir_light1.intensity ? Math.log(e.impl.dir_light1.intensity) / Math.log(2) : -1e-20), this.whiteScale.setValue(h), this.whiteScale.sliderElement.step = this.whiteScale.stepperElement.step = .1, this.addEventListener(this.whiteScale, "change", (function (n) {
      e.impl.dir_light1.intensity = Math.pow(2, t.whiteScale.value), e.impl.setTonemapExposureBias(t.exposureBias.value, t.whiteScale.value)
    })), this.fovAngle = new a.OptionSlider("FOV-degrees", 6.88, 100, this.tbody), this.fovAngle.setGlobalManager(this.globalManager), this.fovAngle.setValue(e.getFOV()), this.addEventListener(this.fovAngle, "change", (function (n) {
      e.setFOV(parseFloat(t.fovAngle.value))
    })), this.frameRate = new a.OptionSlider("Frame rate:", 1, 100, this.tbody), this.frameRate.setGlobalManager(this.globalManager), this.frameRate.setValue(e.impl.getFrameRate()), this.frameRate.sliderElement.step = this.frameRate.stepperElement.step = 1, this.addEventListener(this.frameRate, "change", (function (n) {
      e.impl.setFrameRate(t.frameRate.value)
    })), this.addEventListener(this.viewer, r.CAMERA_CHANGE_EVENT, (function (n) {
      var i = parseFloat(t.fovAngle.value),
        r = e.getFOV();
      i != r && t.fovAngle.setValue(r)
    })), this.addEventListener(this.viewer, r.RENDER_OPTION_CHANGED_EVENT, (function (e) {
      t.syncUI()
    })), this.addEventListener(this.viewer, r.VIEWER_STATE_RESTORED_EVENT, (function (e) {
      t.syncUI()
    })), this.addVisibilityListener((function (e) {
      e && t.resizeToContent()
    }))
  }
  l.prototype = Object.create(i.DockingPanel.prototype), l.prototype.constructor = l, l.prototype.getContentSize = function () {
    return {
      height: this.table.clientHeight + 75,
      width: this.table.clientWidth
    }
  }, l.prototype.syncUI = function () {
    var e = this.viewer.impl,
      t = 0;
    e.dir_light1 && (t = 0 != e.dir_light1.intensity ? Math.log(e.dir_light1.intensity) / Math.log(2) : -1e-20), this.whiteScale.setValue(t), this.exposureBias.setValue(e.renderer().getExposureBias());
    var n = e.renderer().getToneMapMethod();
    this.toneMapMethod.setSelectedIndex(n), this.envSelect.setSelectedIndex(e.currentLightPreset()), this.exposureBias.setDisabled(0 == n), this.saoToggle.setValue(e.renderer().getAOEnabled()), this.saoRadius.setDisabled(!e.renderer().getAOEnabled()), this.saoIntensity.setDisabled(!e.renderer().getAOEnabled()), this.saoRadius.setValue(e.renderer().getAORadius()), this.saoIntensity.setValue(e.renderer().getAOIntensity()), this.groundShadowAlpha.setDisabled(!this.viewer.prefs.get("groundShadow")), this.groundShadowColor.setDisabled(!this.viewer.prefs.get("groundShadow")), this.groundReflectionAlpha.setDisabled(!this.viewer.prefs.get("groundReflection")), this.groundReflectionColor.setDisabled(!this.viewer.prefs.get("groundReflection")), this.fovAngle.setValue(this.viewer.getFOV())
  }, l.prototype.uninitialize = function () {
    i.DockingPanel.prototype.uninitialize.call(this), this.table = null, this.tbody = null, this.saoToggle = null, this.saoRadius = null, this.saoIntensity = null, this.groundShadowAlpha = null, this.envSelect = null, this.toneMapMethod = null, this.exposureBias = null, this.whiteScale = null, this.fovAngle = null, this.viewer = null
  }
}, function (e, t, n) {
  "use strict";
  n.r(t), n.d(t, "ViewerModelStructurePanel", (function () {
    return u
  }));
  var i = n(111),
    r = n(2),
    o = n(133),
    a = n(278),
    s = n(1),
    l = n(127),
    c = {
      click: {
        onObject: ["isolate"]
      },
      clickShift: {
        onObject: ["toggleMultipleOverlayedSelection"]
      },
      clickCtrl: {
        onObject: ["toggleVisibility"]
      }
    };

  function u(e, t, n) {
    this.viewer = e, this.visible = !1, this._trackNodeClick = !0, (n = n || {}).defaultTitle = "Model", n.excludeRoot = void 0 === n.excludeRoot || n.excludeRoot, n.startCollapsed = void 0 !== n.startCollapsed && n.startCollapsed, n.scrollEaseCurve = n.scrollEaseCurve || [0, 0, .29, 1], n.scrollEaseSpeed = void 0 !== n.scrollEaseSpeed ? n.scrollEaseSpeed : .003, n.addFooter = void 0 === n.addFooter || n.addFooter, this.clickConfig = n && n.docStructureConfig ? n.docStructureConfig : c, this.isMac = -1 !== navigator.userAgent.search("Mac OS"), n.hideSearch ? (n.heightAdjustment = 70, i.ModelStructurePanel.call(this, e.container, e.container.id + "ViewerModelStructurePanel", t, n), this.scrollContainer.classList.add("no-search")) : (n.heightAdjustment = 104, i.ModelStructurePanel.call(this, e.container, e.container.id + "ViewerModelStructurePanel", t, n), this.searchbox = new a.Searchbox(e.container.id + "ViewerModelStructurePanel-Searchbox", e, {
      excludeRoot: n.excludeRoot,
      searchFunction: h.bind(this)
    }), this.searchbox.setGlobalManager(this.globalManager), this.searchbox.addEventListener(o.a, function (e) {
      var t = e.id,
        n = this.viewer.impl.findModel(e.modelId);
      this.viewer.isolate(t, n)
    }.bind(this)), this.container.appendChild(this.searchbox.container)), this.setGlobalManager(e.globalManager), this._ignoreScroll = !1, this.selectedNodes = {}, this.onViewerSelect = this.onViewerSelect.bind(this), this.onViewerIsolate = this.onViewerIsolate.bind(this), this.onViewerHide = this.onViewerHide.bind(this), this.onViewerShow = this.onViewerShow.bind(this)
  }

  function h(e) {
    var t = this.tree,
      n = e.toLowerCase(),
      i = [];
    return t.forEachDelegate((function (e) {
      var r = e.getRootId(),
        o = [];
      t.iterate(e, r, (function (t) {
        var i = e.instanceTree && e.instanceTree.getNodeName(t);
        return i && -1 !== i.toLowerCase().indexOf(n) && o.push(t), !0
      })), i.push({
        ids: o,
        delegate: e
      })
    })), i
  }
  u.prototype = Object.create(i.ModelStructurePanel.prototype), u.prototype.constructor = u, l.ViewerPanelMixin.call(u.prototype), u.prototype.uninitialize = function () {
    this.viewer && (this.viewer.removeEventListener(r.AGGREGATE_SELECTION_CHANGED_EVENT, this.onViewerSelect), this.viewer.removeEventListener(r.AGGREGATE_ISOLATION_CHANGED_EVENT, this.onViewerIsolate), this.viewer.removeEventListener(r.HIDE_EVENT, this.onViewerHide), this.viewer.removeEventListener(r.SHOW_EVENT, this.onViewerShow), this.viewer = null), this.searchResults && (this.searchResults.uninitialize(), this.searchResults = null), i.ModelStructurePanel.prototype.uninitialize.call(this)
  }, u.prototype.resizeToContent = function () {
    var e = this.scrollContainer,
      t = this.tree ? this.tree.getRootContainer() : null;
    if (e && t) {
      var n = "calc(100% + " + e.scrollLeft + "px)";
      t.style.width = n
    }
  }, u.prototype.createUI = function () {
    if (!this.uiCreated) {
      var e = this.viewer;
      i.ModelStructurePanel.prototype.createUI.call(this);
      var t = this.scrollContainer;
      t.classList.remove("left");
      var n = function () {
        this.visible && this.resizeToContent(), requestAnimationFrame(n)
      }.bind(this);
      n();
      var o = this.options,
        a = 0,
        s = e.container.getBoundingClientRect(),
        l = e.getToolbar();
      o.maxHeight ? o.maxHeight : s.height;
      if (l) {
        var c = l.container.getBoundingClientRect();
        a = s.bottom - c.top
      } else a = 0;
      this.container.style.top = "10px", this.container.style.left = "10px", this.container.style.height = "calc(100% - " + (a + 20) + "px)", this.container.style.maxHeight = "calc(100% - " + (a + 20) + "px)", t.addEventListener("contextmenu", function (e) {
        this.viewer.contextMenu.show(e)
      }.bind(this)), this.viewer.addEventListener(r.AGGREGATE_SELECTION_CHANGED_EVENT, this.onViewerSelect), this.viewer.addEventListener(r.AGGREGATE_ISOLATION_CHANGED_EVENT, this.onViewerIsolate), this.viewer.addEventListener(r.HIDE_EVENT, this.onViewerHide), this.viewer.addEventListener(r.SHOW_EVENT, this.onViewerShow)
    }
  }, u.prototype.onViewerSelect = function (e) {
    this.setSelection(e.selections), this._ignoreScroll || this.scrollToSelection(e.selections), this._ignoreScroll = !1
  }, u.prototype.onViewerIsolate = function (e) {
    this.setIsolation(e.isolation)
  }, u.prototype.onViewerHide = function (e) {
    this.setHidden(e.nodeIdArray.slice(), e.model, !0)
  }, u.prototype.onViewerShow = function (e) {
    this.setHidden(e.nodeIdArray.slice(), e.model, !1)
  }, u.prototype.setVisible = function (e) {
    i.ModelStructurePanel.prototype.setVisible.call(this, e), this.visible !== e && (this.visible = e, this.visible && this.sync())
  }, u.prototype.sync = function () {
    var e = this.viewer.getAggregateIsolation();
    if (this.setIsolation(e), 0 === e.length)
      for (var t = this.viewer.getAggregateHiddenNodes(), n = 0; n < t.length; ++n) {
        var i = t[n].model,
          r = t[n].ids;
        this.setHidden(r, i, !0)
      }
    var o = this.viewer.getAggregateSelection();
    this.setSelection(o), this.scrollToSelection(o)
  }, u.prototype.removeTreeUI = function (e) {
    delete this.selectedNodes[e.id], i.ModelStructurePanel.prototype.removeTreeUI.call(this, e)
  }, u.prototype.setHidden = function (e, t, n) {
    for (var i = this.tree, r = i.getDelegate(t.id), o = n ? function (e) {
        return i.addClass(r, e, "dim", !1), i.removeClass(r, e, "visible", !1), !0
      } : function (e) {
        return i.removeClass(r, e, "dim", !1), i.addClass(r, e, "visible", !1), !0
      }, a = 0; a < e.length; ++a) i.iterate(r, e[a], o)
  }, u.prototype.setIsolation = function (e) {
    if (0 !== e.length) {
      var t = [];
      e.length && this.tree.forEachDelegate(function (n) {
        for (var i = -1, r = 0; r < e.length; r++)
          if (e[r].model === n.model) {
            i = r;
            break
          } - 1 === i && t.push(n)
      }.bind(this));
      for (var n = 0; n < e.length; ++n) {
        if (a = (s = e[n].model).getData().instanceTree) {
          var i = a.getRootId(),
            r = (l = this.tree).getDelegate(s.id);
          l.iterate(r, i, (function (e) {
            return l.removeClass(r, e, "dim", !1), l.removeClass(r, e, "visible", !1), !0
          }));
          var o = e[n].ids;
          if (0 !== o.length) {
            if (1 === o.length && o[0] === i) return;
            this.setHidden([i], s, !0), this.setHidden(o, s, !1)
          }
        }
      }
      for (n = 0; n < t.length; ++n) {
        l = this.tree;
        var a, s = (r = t[n]).model;
        if (a = r.instanceTree) {
          i = a.getRootId();
          l.iterate(r, i, (function (e) {
            return l.removeClass(r, e, "dim", !1), l.removeClass(r, e, "visible", !1), !0
          })), this.setHidden([i], s, !0)
        }
      }
    } else {
      var l;
      (l = this.tree).forEachDelegate(function (e) {
        var t = e.model,
          n = e.instanceTree;
        if (n) {
          var i = n.getRootId();
          l.iterate(e, i, (function (t) {
            return l.removeClass(e, t, "dim", !1), l.removeClass(e, t, "visible", !1), !0
          })), this.setHidden([i], t, !1)
        }
      }.bind(this))
    }
  }, u.prototype.setSelection = function (e) {
    var t, n, i, r, o, a, s, l = this.tree,
      c = this.viewer.impl.modelQueue();
    for (var u in this.selectedNodes)
      if (r = c.findModel(parseInt(u)), o = this.selectedNodes[u], (a = l.getDelegate(u)) && (s = a.instanceTree)) {
        for (n = 0; n < o.length; ++n)
          for (i = s.getNodeParentId(o[t]); i;) l.removeClass(a, i, "ancestor-selected"), i = s.getNodeParentId(i);
        l.clearSelection(a)
      } for (this.selectedNodes = {}, t = 0; t < e.length; ++t)
      if (r = e[t].model, o = e[t].dbIdArray || e[t].selection, (a = l.getDelegate(r.id)) && (s = a.instanceTree)) {
        for (n = 0; n < o.length; ++n)
          for (i = s.getNodeParentId(o[t]); i;) l.addClass(a, i, "ancestor-selected"), i = s.getNodeParentId(i);
        l.setSelection(a, o), this.selectedNodes[r.id] = o.concat()
      }
  }, u.prototype.scrollToSelection = function (e) {
    var t = e[0];
    if (t) {
      var n = t.model,
        i = t.dbIdArray || t.selection,
        r = this.tree.scrollTo(i[0], n),
        o = this.scrollContainer.scrollTop;
      this.scrollContainer.scrollTop = r;
      var a = this.scrollContainer.scrollTop;
      this.scrollContainer.scrollTop = o, this.options.scrollEaseSpeed > 0 ? this.animateScroll(o, a, function (e) {
        this.tree.setScroll(e)
      }.bind(this)) : (this.scrollContainer.scrollTop = a, this.tree.setScroll(a))
    }
  }, u.prototype.onEyeIcon = function (e, t) {
    this.viewer.toggleVisibility(e, t)
  }, u.prototype.onTreeNodeClick = function (e, t, n, i) {
    if (this._trackNodeClick && (s.logger.track({
        category: "node_selected",
        name: "model_browser_tool"
      }), this._trackNodeClick = !1), !this.isMac || !i.ctrlKey) {
      var r = "click";
      this.ctrlDown(i) && (r += "Ctrl"), i.shiftKey && (r += "Shift"), i.altKey && (r += "Alt");
      var o = ["toggleOverlayedSelection"],
        a = this.clickConfig[r];
      a && (o = a.onObject), this.handleAction(o, t, n)
    }
  }, u.prototype.onTreeNodeRightClick = function (e, t, n, i) {
    return this.isMac && i.ctrlKey && 0 === i.button ? (this.clickConfig && this.clickConfig.clickCtrl && this.handleAction(this.clickConfig.clickCtrl.onObject, t, n), null) : this.viewer.contextMenu.show(i)
  }, u.prototype.handleAction = function (e, t, n) {
    for (var i in e) switch (e[i]) {
      case "toggleOverlayedSelection":
        this.toggleOverlayedSelection(t, n);
        break;
      case "toggleMultipleOverlayedSelection":
        this.toggleMultipleOverlayedSelection(t, n);
        break;
      case "selectOnly":
        this.viewer.select(t, n);
        break;
      case "deselectAll":
        this.viewer.clearSelection();
        break;
      case "selectToggle":
        this.viewer.toggleSelect(t, n);
        break;
      case "isolate":
        this.isolate(t, n);
        break;
      case "showAll":
        this.viewer.showAll();
        break;
      case "focus":
        this.viewer.fitToView();
        break;
      case "hide":
        this.viewer.hide(t, n);
        break;
      case "show":
        this.viewer.show(t, n);
        break;
      case "toggleVisibility":
        this.viewer.toggleVisibility(t, n)
    }
  }, u.prototype.toggleOverlayedSelection = function (e, t) {
    var n = this.selectedNodes[t.id],
      i = n ? n.indexOf(e) : -1;
    this._ignoreScroll = !0, -1 === i ? (this.viewer.select(e, t), this.viewer.fitToView([e], t, !1)) : this.viewer.select([], void 0, t)
  }, u.prototype.toggleMultipleOverlayedSelection = function (e, t) {
    var n = this.selectedNodes[t.id],
      i = n ? n.indexOf(e) : -1; - 1 === i ? (n || (n = this.selectedNodes[t.id] = []), n.push(e)) : n.splice(i, 1);
    var r = [];
    for (var o in this.selectedNodes)
      if (this.selectedNodes.hasOwnProperty(o)) {
        t = this.viewer.impl.findModel(parseInt(o));
        var a = this.selectedNodes[o];
        r.push({
          model: t,
          ids: a
        })
      } this._ignoreScroll = !0, this.viewer.impl.selector.setAggregateSelection(r);
    var s = this.viewer.getAggregateSelection();
    this.viewer.fitToView(s)
  }, u.prototype.isolate = function (e, t) {
    if (this.viewer.isolate(e, t), this.viewer.fitToView([e], t, !1), t) {
      var n = {
        type: r.SHOW_PROPERTIES_EVENT,
        dbId: e,
        model: t
      };
      this.viewer.dispatchEvent(n)
    }
  }, u.prototype.ctrlDown = function (e) {
    return this.isMac && e.metaKey || !this.isMac && e.ctrlKey
  }
}, function (e, t, n) {
  "use strict";
  n.r(t), n.d(t, "ViewerPropertyPanel", (function () {
    return s
  }));
  var i = n(82),
    r = n(127),
    o = n(2),
    a = n(48);

  function s(e) {
    this.viewer = e, this.setGlobalManager(e.globalManager), this.currentNodeIds = [], this.currentModel = null, this.isDirty = !0, this.propertyNodeId = null, this.normalTitle = "Properties", this.loadingTitle = "Object Properties Loading", this._viewDbId = null, this.onProperties = this.onProperties.bind(this), this.onPropError = this.onPropError.bind(this), this.setPropertiesIntoUI = this.setPropertiesIntoUI.bind(this), i.PropertyPanel.call(this, e.container, "ViewerPropertyPanel", this.loadingTitle)
  }
  s.prototype = Object.create(i.PropertyPanel.prototype), s.prototype.constructor = s, r.ViewerPanelMixin.call(s.prototype), s.prototype.initialize = function () {
    i.PropertyPanel.prototype.initialize.call(this);
    var e = this;
    e.addEventListener(e.viewer, o.AGGREGATE_SELECTION_CHANGED_EVENT, (function (t) {
      t.selections && t.selections.length ? (e.currentNodeIds = t.selections[0].dbIdArray, e.currentModel = t.selections[0].model) : e.resetCurrentModel(), e.isDirty = !0, e.requestProperties()
    })), e.addEventListener(e.viewer, o.SHOW_PROPERTIES_EVENT, (function (t) {
      t && t.dbId && t.model === e.currentModel && e.requestNodeProperties(t.dbId)
    })), e.addEventListener(e.viewer, o.HIDE_EVENT, (function (t) {
      e.isDirty = !0, e.requestProperties()
    })), e.addEventListener(e.viewer, o.OBJECT_TREE_CREATED_EVENT, (function (t) {
      e.currentModel === t.model && (e.isDirty = !0, e.requestProperties())
    })), e.addEventListener(e.viewer, o.SHOW_EVENT, (function (t) {
      e.isDirty = !0, e.requestProperties()
    }));
    var t = this.viewer.getAggregateSelection();
    t.length ? (this.currentModel = t[0].model, this.currentNodeIds = t[0].selection) : this.resetCurrentModel()
  }, s.prototype.resetCurrentModel = function () {
    var e = this.viewer ? this.viewer.getVisibleModels() : [];
    1 === e.length ? (this.currentModel = e[0], this.currentNodeIds = []) : (this.currentModel = null, this.currentNodeIds = [])
  }, s.prototype.setTitle = function (e, t) {
    e || (e = "Object Properties", (t = t || {}).localizeTitle = !0), i.PropertyPanel.prototype.setTitle.call(this, e, t)
  }, s.prototype.setVisible = function (e) {
    a.DockingPanel.prototype.setVisible.call(this, e), this.requestProperties()
  }, s.prototype.visibilityChanged = function () {
    a.DockingPanel.prototype.visibilityChanged.call(this), this.isVisible() && this.requestProperties()
  }, s.prototype.requestProperties = function () {
    this.isVisible() && this.isDirty && (this.currentModel && this.currentNodeIds.length > 0 ? this.requestNodeProperties(this.currentNodeIds[this.currentNodeIds.length - 1]) : this.showDefaultProperties(), this.isDirty = !1)
  }, s.prototype.onProperties = function (e) {
    var t = this;
    if (this.viewer && this.currentModel && e.dbId === this.propertyNodeId) {
      for (var n = [], i = e.properties, r = 0, o = i.length; r < o; ++r) {
        var a = i[r];
        "__internalref__" === a.displayCategory && n.push(a.displayValue)
      }
      var s = this.currentModel;
      (s.is3d() && function (e) {
        var t = e.getDocumentNode(),
          n = t && t.findViewableParent();
        return !(!n || -1 === n.name().toLocaleLowerCase().indexOf(".sld"))
      }(s) && n.length > 0 ? function (e, t, n) {
        return new Promise((function (i, r) {
          e.getBulkProperties2(t, {
            ignoreHidden: !0
          }, (function (e) {
            for (var t = 0, r = e.length; t < r; ++t)
              for (var o = e[t], a = 0, s = o.properties.length; a < s; ++a) {
                for (var l = o.properties[a], c = !0, u = 0, h = n.properties.length; u < h; ++u) n.properties[u].displayName === l.displayName && (c = !1, u = h);
                c && n.properties.push(l)
              }
            i(n)
          }))
        }))
      }(s, n, e) : Promise.resolve(e)).then(this.setPropertiesIntoUI).catch((function () {
        t.setProperties([]), t.highlight(""), t.resizeToContent(), t.respositionPanel()
      }))
    }
  }, s.prototype.setPropertiesIntoUI = function (e) {
    var t = e.name || this.normalTitle,
      n = !e.name;
    this.setTitle(t, {
      localizeTitle: n
    }), "name" in e && e.properties && e.properties.splice(0, 0, {
      displayName: "Name",
      displayValue: e.name,
      displayCategory: null,
      attributeName: "Name",
      type: 20,
      units: null,
      hidden: !1,
      precision: 0
    }), this.setProperties(e.properties), this.highlight(this.viewer.searchText), this.resizeToContent(), this.respositionPanel()
  }, s.prototype.onPropError = function () {
    this.setTitle(this.normalTitle, {
      localizeTitle: !0
    }), this.showNoProperties()
  }, s.prototype.requestNodeProperties = function (e) {
    var t = this,
      n = this.currentModel;
    this.propertyNodeId = e, n.getProperties2(e, (function (e) {
      t.viewer && n === t.currentModel && t.onProperties(e)
    }), this.onPropError)
  }, s.prototype.setNodeProperties = s.prototype.requestNodeProperties, s.prototype.requestViewProperties = function (e) {
    var t = this;
    if (null === this._viewDbId) {
      var n = this.currentModel,
        i = n.getRootId();
      this.propertyNodeId = i, n.getProperties2(i, (function (r) {
        if (t.viewer && n === t.currentModel) {
          t._viewDbId = i;
          for (var o = e.name(), a = e.isSheet(), s = r.properties, l = [], c = [], u = 0; u < s.length; ++u) {
            var h = s[u];
            "View" === h.displayName && l.push(h.displayValue), "Sheet" === h.displayName && c.push(h.displayValue)
          }
          var d = a ? c : l;
          if (0 !== d.length) {
            var f = t;
            n.getBulkProperties2(d, {
              propFilter: ["name", "dbId"],
              ignoreHidden: !0
            }, (function (e) {
              for (var t = [], s = 0; s < e.length; ++s)
                if (-1 !== o.indexOf(e[s].name)) {
                  var l = e[s].dbId;
                  if (!a) return f._viewDbId = l, void f.requestNodeProperties(l);
                  t.push(l)
                } 0 !== t.length ? function (e, t, n) {
                return new Promise((function (i, r) {
                  n = n || e.myData.metadata.title, e.getBulkProperties2(t, {
                    ignoreHidden: !0
                  }, (function (e) {
                    for (var t = 0, r = e.length; t < r; ++t) {
                      var o = e[t];
                      if (o.name && -1 !== n.indexOf(o.name))
                        for (var a = 0, s = o.properties.length; a < s; ++a) {
                          var l = o.properties[a];
                          if ("Sheet Number" === l.displayName && -1 !== n.indexOf(l.displayValue)) return i(o)
                        }
                    }
                    return i(null)
                  }))
                }))
              }(n, t, o).then((function (e) {
                e && e.dbId && e.dbId !== i ? (f._viewDbId = e.dbId, f.requestNodeProperties(e.dbId)) : f.onProperties(r)
              })) : f.onProperties(r)
            }))
          } else t.onProperties(r)
        }
      }), this.onPropError)
    } else this.requestNodeProperties(this._viewDbId)
  }, s.prototype.respositionPanel = function () {
    if (this.isVisible()) {
      var e = this.viewer.toolController,
        t = e.lastClickX,
        n = e.lastClickY,
        i = this.container.getBoundingClientRect(),
        r = i.left,
        o = i.top,
        a = i.width,
        s = i.height,
        l = this.viewer.impl.getCanvasBoundingClientRect(),
        c = l.left,
        u = l.top,
        h = l.width,
        d = l.height;
      r <= t && t < r + a && o <= n && n < o + s && (t < r + a / 2 && t + a < c + h ? (this.container.style.left = Math.round(t - c) + "px", this.container.dockRight = !1) : c <= t - a ? (this.container.style.left = Math.round(t - c - a) + "px", this.container.dockRight = !1) : t + a < c + h ? (this.container.style.left = Math.round(t - c) + "px", this.container.dockRight = !1) : n + s < u + d ? (this.container.style.top = Math.round(n - u) + "px", this.container.dockBottom = !1) : u <= n - s && (this.container.style.top = Math.round(n - u - s) + "px", this.container.dockBottom = !1))
    }
  }, s.prototype.showDefaultProperties = function () {
    var e = this.currentModel ? this.currentModel.getRootId() : null;
    if (e) {
      var t = this.currentModel.getDocumentNode();
      t && !t.isMasterView() ? this.requestViewProperties(t) : this.requestNodeProperties(e)
    } else this.propertyNodeId = null, this.setTitle(this.normalTitle, {
      localizeTitle: !0
    }), i.PropertyPanel.prototype.showDefaultProperties.call(this)
  }, s.prototype.areDefaultPropertiesShown = function () {
    if (!this.currentModel) return !1;
    var e = this.currentModel.getRootId();
    return this.propertyNodeId === e
  }, s.prototype.uninitialize = function () {
    i.PropertyPanel.prototype.uninitialize.call(this), this.viewer = null, this._viewDbId = null, this.currentModel = null, this.propertyNodeId = null, this.currentNodeIds = null
  }, s.prototype.onCategoryClick = function (e, t) {
    i.PropertyPanel.prototype.onCategoryClick.call(this, e, t), this.resizeToContent()
  }, s.prototype.onCategoryIconClick = function (e, t) {
    i.PropertyPanel.prototype.onCategoryIconClick.call(this, e, t), this.resizeToContent()
  }
}, function (e, t, n) {
  "use strict";
  n.r(t);
  var i = n(37),
    r = n(133),
    o = n(1),
    a = n(42),
    s = n(33),
    l = n(12);

  function c(e, t, n) {
    this.excludeRoot = t, this.viewer = n, this.results = [], this.resultCount = 0, this.selectedIndex = -1;
    var i = this.getDocument();
    this.container = i.createElement("div"), this.container.classList.add("docking-panel"), this.container.classList.add("adsk-search-results"), this.container.results = i.createElement("div"), this.container.results.classList.add("docking-panel-scroll"), this.container.results.classList.add("docking-panel-container-solid-color-b"), this.container.results.addEventListener("scroll", h.bind(this)), this.container.appendChild(this.container.results), e.insertBefore(this.container, e.firstChild), this.scrollingContainer = i.createElement("div"), this.scrollingContainer.classList.add("adsk-search-results-scrolling-panel"), this.scrollingContainer.addEventListener("click", u.bind(this)), this.container.results.appendChild(this.scrollingContainer), this.footer = new s.ResizeFooter(this.container, function () {
      var e = this.container.getBoundingClientRect(),
        t = this.viewer.container.getBoundingClientRect();
      t.right < e.right && (this.container.style.width = t.right - e.left + "px"), t.bottom < e.bottom && (this.container.style.height = t.bottom - e.top + "px")
    }.bind(this)), this.footer.setGlobalManager(this.globalManager), this.divNoResults = function (e) {
      var t = e.createElement("div"),
        n = e.createElement("div"),
        i = e.createElement("div");
      t.classList.add("no-results-container"), t.style.display = "none";
      n.setAttribute("data-i18n", "No Results"), n.textContent = Autodesk.Viewing.i18n.translate("No Results"), n.classList.add("no-results-title");
      return i.setAttribute("data-i18n", "Try another term"), i.textContent = Autodesk.Viewing.i18n.translate("Try another term"), i.classList.add("no-results-description"), t.appendChild(n), t.appendChild(i), t.domTitle = n, t.domMessage = i, t
    }(i), this.scrollingContainer.appendChild(this.divNoResults), this.scrollY = 0, this.dirty = !1, this.nextFrameId = 0, this.it = {
      init: function (e) {
        return this.isDone = !1, this.results = e, this.indexRs = 0, this.indexId = -1, this
      },
      done: function () {
        return this.isDone
      },
      next: function () {
        if (this.isDone) return this;
        for (this.indexId++; this.results.length !== this.indexRs && this.indexId === this.results[this.indexRs].ids.length;) this.indexId = 0, this.indexRs++;
        return this.isDone = this.indexRs === this.results.length, this
      },
      id: function () {
        return this.results[this.indexRs].ids[this.indexId]
      },
      delegate: function () {
        return this.results[this.indexRs].delegate
      }
    }, this.elementsPool = [], this.elementsUsed = 0;
    for (var r = 0; r < 150; ++r) this.elementsPool[r] = m(i);
    this.setVisible(!1)
  }

  function u(e) {
    var t = e.target,
      n = this._getNodeAndModelIds(t);
    n && (this.fireEvent({
      type: r.a,
      id: n.nodeId,
      modelId: n.modelId
    }), e.preventDefault())
  }

  function h(e) {
    var t = this.container.results.scrollTop;
    Math.abs(this.scrollY - t) >= 100 && (this.scrollY = t, d(this))
  }

  function d(e, t) {
    e.dirty && !t || (t ? f(e) : (e.dirty = !0, e.nextFrameId = requestAnimationFrame((function () {
      f(e)
    }))))
  }

  function f(e) {
    e.dirty = !1,
      function (e) {
        for (var t = e.elementsUsed, n = e.elementsPool, i = 0; i < t; ++i) {
          g(n[i])
        }
        e.elementsUsed = 0
      }(e), 0 !== e.resultCount ? (e.setDisplayNoResults(!1), function (e) {
        var t = e.container.results,
          n = 0,
          i = t.clientHeight,
          r = e.scrollY,
          o = e.it.init(e.results),
          a = Math.max(0, e.scrollY - 100),
          s = 0 | Math.floor(a / 50),
          l = 0;
        n = 50 * s;
        for (; s;) s--, l++, o.next();
        var c = e.elementsPool[e.elementsUsed++];
        c.style.height = n + "px", e.scrollingContainer.appendChild(c);
        var u = !0;
        for (; u;) {
          if (o.next(), o.done()) {
            u = !1;
            break
          }
          if (n > r + i + 100) {
            u = !1;
            break
          }
          if (e.elementsUsed === e.elementsPool.length) {
            u = !1;
            break
          }
          var h = o.id(),
            d = o.delegate(),
            f = n + 50,
            m = e.elementsPool[e.elementsUsed++];
          p(h, d, m, e, l === e.selectedIndex), e.scrollingContainer.appendChild(m), n = f, l++
        }
        var g = 50 * e.resultCount;
        e.scrollingContainer.style.height = g + "px"
      }(e)) : e.setDisplayNoResults(!0)
  }

  function p(e, t, n, i, r) {
    n.classList.add("search-result"), r ? n.classList.add("selected") : n.classList.remove("selected"), n.setAttribute("lmv-nodeId", e), n.setAttribute("lmv-modelId", t.model.id), n.style.height = "50px";
    var o = t.instanceTree.getNodeName(e),
      a = i.searchString,
      s = o.toLowerCase().indexOf(a.toLowerCase()),
      l = o.substr(0, s),
      c = o.substr(s, a.length),
      u = o.substr(s + a.length);
    n.domPrefix.innerText = l, n.domMatch.innerText = c, n.domSufix.innerText = u;
    var h = function (e, t, n) {
      var i = [],
        r = t.getRootId(),
        o = n.isRootExcluded(),
        a = t.instanceTree,
        s = e,
        l = !1;
      for (; s && !l && (s !== r || (l = !0, !o));) {
        var c = a.getNodeName(s);
        i.unshift(c), s = a.getNodeParentId(s)
      }
      return i
    }(e, t, i);
    n.domPath.innerText = h.join(" > ")
  }

  function m(e) {
    var t = e.createElement("div"),
      n = e.createElement("div"),
      i = e.createElement("span"),
      r = e.createElement("span"),
      o = e.createElement("span"),
      a = e.createElement("span");
    return n.classList.add("search-result-container"), r.classList.add("search-match"), a.classList.add("search-path"), n.appendChild(i), n.appendChild(r), n.appendChild(o), n.appendChild(a), t.appendChild(n), t.domPrefix = i, t.domMatch = r, t.domSufix = o, t.domPath = a, t.domContainer = n, t
  }

  function g(e) {
    e.setAttribute("lmv-nodeId", ""), e.setAttribute("lmv-modelId", ""), e.domPrefix.innerText = "", e.domMatch.innerText = "", e.domSufix.innerText = "", e.domPath.innerText = "", e.style.height = "0"
  }

  function v(e, t) {
    e.scrollTop + e.clientHeight < 50 * (t + 1) && (e.scrollTop += 50 * (t + 1) - (e.scrollTop + e.clientHeight)), e.scrollTop / 50 > t && (e.scrollTop = 50 * t)
  }
  c.prototype.constructor = c, a.EventDispatcher.prototype.apply(c.prototype), l.GlobalManagerMixin.call(c.prototype), c.prototype.setPosition = function (e, t) {
    this.container.style.left = e + "px", this.container.style.top = t + "px"
  }, c.prototype.setMinWidth = function (e) {
    this.container.style.width = e + "px"
  }, c.prototype.setMaxWidth = function (e) {
    this.container.style.maxHeight = e + "px"
  }, c.prototype.setVisible = function (e) {
    this.container.style.display = e ? "" : "none"
  }, c.prototype.setResults = function (e, t) {
    this.searchString = e, this.results = t, this.resultCount = function (e) {
      for (var t = 0, n = 0; n < e.length; ++n) {
        var i = e[n];
        t += i.ids.length
      }
      return t
    }(t), this.selectedIndex = 0 == this.resultCount ? -1 : 0, this.container.style.height = 50 * this.resultCount + 20 + "px", this.container.results.scrollTop = 0, this.scrollY = 0, 0 === this.resultCount ? this.container.classList.add("no-content") : this.container.classList.remove("no-content"), d(this)
  }, c.prototype.getSelection = function () {
    var e = this.scrollingContainer.querySelector(".selected");
    if (!e) return null;
    var t = this._getNodeAndModelIds(e);
    return t || null
  }, c.prototype.isRootExcluded = function () {
    return !(this.results && this.results.length > 1) && (!(this.modelCount > 1) && this.excludeRoot)
  }, c.prototype.uninitialize = function () {
    this.setVisible(!1), this.container = null, this.container.parentNode && this.container.parentNode.removeChild(this.container), cancelAnimationFrame(this.nextFrameId), this.clearListeners()
  }, c.prototype.setDisplayNoResults = function (e) {
    this.divNoResults.style.display = e ? "" : "none"
  }, c.prototype.selectNext = function () {
    0 !== this.resultCount && (this.selectedIndex = Math.min(this.resultCount - 1, this.selectedIndex + 1), v(this.container.results, this.selectedIndex), d(this))
  }, c.prototype.selectPrevious = function () {
    0 !== this.resultCount && (this.selectedIndex = Math.max(0, this.selectedIndex - 1), v(this.container.results, this.selectedIndex), d(this))
  }, c.prototype._getNodeAndModelIds = function (e) {
    for (; !e.hasAttribute("lmv-nodeId");)
      if (!(e = e.parentNode) || e === this.scrollingContainer) return;
    return {
      nodeId: parseInt(e.getAttribute("lmv-nodeId")),
      modelId: parseInt(e.getAttribute("lmv-modelId"))
    }
  };
  var y = n(8);

  function b(e, t, n) {
    this._id = e, this._listeners = {}, this._options = n || {}, this._searchFunction = this._options.searchFunction || function () {};
    var i = this.getDocument();
    this.container = i.createElement("div"), this.container.id = e, this.addClass("adsk-control"), this.addClass("adsk-searchbox"), this.addClass("empty");
    var a = i.createElement("input");
    a.classList.add("search-box"), a.classList.add("docking-panel-delimiter-shadow"), a.type = "search", a.results = [], a.placeholder = y.i18n.translate("Search"), a.setAttribute("data-i18n", "Search"), a.incremental = "incremental", a.autosave = this.container.id + "search_autosave", this.container.insertBefore(a, this.scrollContainer), this.searchbox = a;
    var s = function () {
        d.searchbox.value = "", d.addClass("empty")
      },
      l = function () {
        d.searchbox.classList.remove("searching"), d.searchResults.setVisible(!1)
      },
      u = i.createElement("div");
    u.className = "search-box-icon", this.container.insertBefore(u, a.nextSibling);
    var h = i.createElement("div");
    h.className = "search-box-close", h.addEventListener("click", (function () {
      s(), l()
    })), this.container.appendChild(h), this.searchResults = new c(this.container, n.excludeRoot, t), this.searchResults.addEventListener(r.a, (function (e) {
      s(), l(), d.fireEvent(e)
    }));
    var d = this,
      f = !0;

    function p() {
      var e = a.value.trim();
      if (0 !== e.length) {
        f && (o.logger.track({
          category: "search_node",
          name: "model_browser_tool"
        }), f = !1), a.classList.add("searching");
        var t = d._searchFunction(e);
        d.searchResults.setResults(e, t), d.searchResults.setVisible(!0)
      } else l()
    }
    var m;
    a.addEventListener("keydown", (function (e) {
      var t = d.getWindow();
      if (38 === (e = e || t.event).keyCode && (d.searchResults.selectPrevious(), e.preventDefault()), 40 === e.keyCode && (d.searchResults.selectNext(), e.preventDefault()), 13 === e.keyCode) {
        var n = d.searchResults.getSelection();
        if (!n) return !1;
        s(), l(), d.fireEvent({
          type: b.Events.ON_SEARCH_SELECTED,
          id: n.nodeId,
          modelId: n.modelId
        }), e.preventDefault()
      }
    })), a.addEventListener("input", (function (e) {
      if (0 === this.value.length) return d.container.classList.add("empty"), void l();
      d.container.classList.remove("empty"), this.value.length < 3 || (clearTimeout(m), m = setTimeout(p, 800))
    })), a.addEventListener("change", (function (e) {
      var t = d.getDocument();
      e.target === t.activeElement && (clearTimeout(m), p())
    })), a.addEventListener("focus", (function () {
      u.classList.add("focused")
    })), a.addEventListener("blur", (function () {
      u.classList.remove("focused")
    }))
  }
  n.d(t, "Searchbox", (function () {
    return b
  })), b.prototype = Object.create(i.Control.prototype), b.prototype.constructor = b, b.Events = {
    ON_SEARCH_SELECTED: r.a
  }
}, function (e, t, n) {
  "use strict";
  n.r(t);
  var i = n(116);

  function r(e) {
    Autodesk.Viewing.Private.RenderContext.call(this), this.originalInit = this.init.bind(this), this.init = function (t, n, i) {
      this.canvas = e, this.ctx2D = this.canvas.getContext("2d"), this.originalInit(t, n, i, {
        offscreen: !0
      }), this.glrenderer = t;
      var r = this.glrenderer.getPixelRatio();
      this.setSize(n / r, i / r)
    }, this.renderToCanvas = function () {
      this.ctx2D.clearRect(0, 0, this.widthWithPixelRatio, this.heightWithPixelRatio), this.ctx2D.drawImage(this.glrenderer.domElement, 0, this.glrenderer.domElement.height - this.heightWithPixelRatio, this.widthWithPixelRatio, this.heightWithPixelRatio, 0, 0, this.widthWithPixelRatio, this.heightWithPixelRatio)
    }, this.originalSetSize = this.setSize.bind(this), this.setSize = function (e, t, n, i) {
      if (!i) {
        var r = this.glrenderer.getPixelRatio();
        this.width = e, this.height = t, this.widthWithPixelRatio = e * r, this.heightWithPixelRatio = t * r, this.canvas.width = this.widthWithPixelRatio, this.canvas.height = this.heightWithPixelRatio, this.canvas.style.width = "".concat(this.width, "px"), this.canvas.style.height = "".concat(this.height, "px")
      }
      this.prepareViewport(n, i), this.restoreViewport()
    }, this.prepareViewport = function (e, t) {
      this.glrenderer.pushViewport();
      var n = this.glrenderer.getPixelRatio(),
        i = this.glrenderer.domElement.width / n,
        r = this.glrenderer.domElement.height / n;
      (i < this.width || r < this.height) && this.glrenderer.setSize(Math.max(this.width, i), Math.max(this.height, r)), this.originalSetSize(this.width, this.height, e, t)
    }, this.restoreViewport = function () {
      this.glrenderer.popViewport()
    }
  }
  r.prototype = Object.create(i.RenderContext.prototype), r.prototype.constructor = r;
  var o = n(23),
    a = n(406),
    s = n.n(a);

  function l(e) {
    return function (e) {
      if (Array.isArray(e)) {
        for (var t = 0, n = new Array(e.length); t < e.length; t++) n[t] = e[t];
        return n
      }
    }(e) || function (e) {
      if (Symbol.iterator in Object(e) || "[object Arguments]" === Object.prototype.toString.call(e)) return Array.from(e)
    }(e) || function () {
      throw new TypeError("Invalid attempt to spread non-iterable instance")
    }()
  }
  n.d(t, "createLeechViewer", (function () {
    return u
  }));
  var c = new Map;

  function u(e, t, n, i) {
    if (c.has(i)) return new(c.get(i))(e, t, n);

    function a(e) {
      var t = this,
        n = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {},
        o = arguments.length > 2 ? arguments[2] : void 0;
      this.sharedResources = o, this.loadingIntervals = {}, i.call(this, e, n), this.renderContext = new r(this.canvas), this.originalLoadDocumentNode = this.loadDocumentNode.bind(this), this.sharedResources.mrtFlags ? this.renderContext.mrtFlags = this.sharedResources.mrtFlags : this.sharedResources.mrtFlags = this.renderContext.mrtFlags, this.resizeObserver = new s.a((function (e) {
        var n = e[0].contentRect,
          i = Math.floor(n.width),
          r = Math.floor(n.height);
        t.impl.resize(i, r, !0), t.dispatchEvent({
          type: Autodesk.Viewing.VIEWER_RESIZE_EVENT,
          width: i,
          height: r
        }), t.impl.tick(performance.now())
      })), this.resizeObserver.observe(this.clientContainer)
    }
    a.prototype = Object.create(i.prototype), a.prototype.constructor = a, a.prototype.initialize = function () {
      var e = {
          glrenderer: this.sharedResources.glrenderer,
          materialManager: this.sharedResources.materialManager,
          geomCache: this.sharedResources.geomCache,
          renderer: this.renderContext
        },
        t = this.getWindow().NOP_VIEWER,
        n = i.prototype.initialize.call(this, e);
      return t && (this.getWindow().NOP_VIEWER = t), this.overrideAPIs(), n
    }, a.prototype.uninitialize = function () {
      var e = this;
      this.resizeObserver && (this.resizeObserver.disconnect(), this.resizeObserver = null), Object.keys(this.loadingIntervals).forEach((function (t) {
        e.clearLoadingInterval(t)
      })), i.prototype.uninitialize.call(this)
    }, a.prototype.overrideAPIs = function () {
      var e = this,
        t = this.impl.tick.bind(this.impl);
      this.impl.tick = function () {
        e.impl.renderer().prepareViewport();
        var n = performance.now();
        t(n), e.impl.renderer().restoreViewport()
      }, this.addEventListener(Autodesk.Viewing.RENDER_PRESENTED_EVENT, (function () {
        e.renderContext.renderToCanvas()
      }), {
        priority: -1e3
      });
      var n = this.impl.setLightPreset.bind(this.impl);
      this.impl.setLightPreset = function (t, i, r) {
        if (e.impl.is2d) {
          var o = Autodesk.Viewing.Private.LightPresets[t].bgColorGradient;
          e.setBackgroundColor.apply(e, l(o))
        } else n(t, i, r)
      }, this.impl.onBeforeRender = function (t) {
        t && e.restoreViewerState()
      };
      var i = this.toolController.__invokeStack.bind(this.toolController);
      this.toolController.__invokeStack = function () {
        return e.restoreViewerState(), i.apply(void 0, arguments)
      };
      var r = this.impl.unloadModel.bind(this.impl);
      this.impl.unloadModel = function (t) {
        var n = t.getDocumentNode().getModelKey();
        e.sharedResources.loadedModels[n].usedByViewersCounter--;
        var i = e.sharedResources.loadedModels[n].usedByViewersCounter > 0;
        return i || delete e.sharedResources.loadedModels[n], e.clearLoadingInterval(n), r(t, i)
      }, this.loadDocumentNode = function (t, n) {
        var i = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : {};
        return new Promise((function (r, o) {
          var a = n.getModelKey();
          if (e.sharedResources.loadedModels[a]) {
            var s = e.onModelLoaded(e.sharedResources.loadedModels[a].model, i);
            r(s)
          } else e.originalLoadDocumentNode(t, n, i).then((function (t) {
            e.sharedResources.loadedModels[a] = {
              model: t,
              usedByViewersCounter: 1,
              loadingViewer: e
            }, r(t)
          })).catch(o)
        }))
      }
    }, a.prototype.setViewerProfile = function (e, t) {
      if (!t.loadAsHidden) {
        t.isAEC = e.isAEC();
        var n = this.chooseProfile(t);
        delete n.settings.lineRendering, delete n.settings.pointRendering, this.setProfile(n)
      }
    }, a.prototype.setViewerLight = function (e, t) {
      if (!t.loadAsHidden)
        if (this.impl.is2d) {
          this.impl.setLightPreset(o.DefaultLightPreset2d);
          var n = this.impl.clearColorTop.clone().multiplyScalar(255),
            i = this.impl.clearColorBottom.clone().multiplyScalar(255);
          t.isAEC ? this.impl.setLightPresetForAec() : this.impl.setLightPreset(o.DefaultLightPreset), this.impl.toggleEnvMapBackground(!1), this.setBackgroundColor(n.x, n.y, n.z, i.x, i.y, i.z)
        } else this.impl.toggleEnvMapBackground(this.profile.settings.envMapBackground)
    }, a.prototype.cleanViewerBeforeLoadModel = function (e) {
      if (!e.keepCurrentModels && this.impl.hasModels()) {
        var t = this.config;
        this.tearDown(), this.setUp(t)
      }!this.impl.hasModels() && this._loadingSpinner && this._loadingSpinner.show()
    };
    var u = new THREE.Vector4(0, 0, -1, -1e20);

    function h(e) {
      var t = !e,
        n = e && !e.isLoadDone(),
        i = e && e.getPropertyDb() && !e.getPropertyDb().isLoadDone(),
        r = Autodesk.Viewing.Private.TextureLoader.requestsInProgress() > 0;
      return !(t || n || i || r)
    }
    return a.prototype.updateCutPlanes = function () {
      var e = this.impl.getAllCutPlanes() || [u],
        t = this.impl.matman(),
        n = Math.max(e.length, t._cutplanes.length);
      t._cutplanes.length = 0;
      for (var i = 0; i < e.length; i++) t._cutplanes.push(e[i].clone());
      for (; i < n; i++) t._cutplanes.push(u);
      t.forEach((function (e) {
        e.cutplanes = t._cutplanes
      }), !1, !0)
    }, a.prototype.restoreViewerState = function () {
      this.sharedResources.lastRenderedViewer !== this && (this.updateCutPlanes(), this.impl.is2d && this.impl.updateCameraMatrices(), this.sharedResources.lastRenderedViewer = this)
    }, a.prototype.onModelLoaded = function (e, t) {
      this.cleanViewerBeforeLoadModel(t);
      var n = this.cloneModelToViewer(e);
      return this.addModelToViewer(n, t), n
    }, a.prototype.addModelToViewer = function (e, t) {
      this.impl.modelQueue().addHiddenModel(e), t.loadAsHidden || (this.setViewerProfile(e, t), this.showModel(e), this.setViewerLight(e, t), !t.headlessViewer && this.createUI && this.createUI(e)), this._loadingSpinner && this._loadingSpinner.hide()
    }, a.prototype.clearLoadingInterval = function (e) {
      this.loadingIntervals[e] && (clearInterval(this.loadingIntervals[e]), delete this.loadingIntervals[e])
    }, a.prototype.cloneModelToViewer = function (e) {
      var t = this,
        n = e.clone(),
        i = e.getDocumentNode().getModelKey();
      this.sharedResources.loadedModels[i].usedByViewersCounter++;
      var r = this.sharedResources.loadedModels[i].loadingViewer;
      return this.clearLoadingInterval(i), this.loadingIntervals[i] = setInterval((function () {
          t.impl.invalidate(!1, !0, !1)
        }), 1e3),
        function (e, t) {
          return new Promise((function (n) {
            h(t) && n();
            var i = function i() {
              h(t) && (e.removeEventListener(Autodesk.Viewing.GEOMETRY_LOADED_EVENT, i), e.removeEventListener(Autodesk.Viewing.OBJECT_TREE_CREATED_EVENT, i), e.removeEventListener(Autodesk.Viewing.TEXTURES_LOADED_EVENT, i), n())
            };
            e.addEventListener(Autodesk.Viewing.GEOMETRY_LOADED_EVENT, i), e.addEventListener(Autodesk.Viewing.OBJECT_TREE_CREATED_EVENT, i), e.addEventListener(Autodesk.Viewing.TEXTURES_LOADED_EVENT, i)
          }))
        }(r, n).then((function () {
          t.clearLoadingInterval(i), setTimeout((function () {
            n.setInnerAttributes(e.getInnerAttributes()), t.impl.onLoadComplete(n)
          }), 1)
        })), n
    }, c.set(i, a), new a(e, t, n, i)
  }
}, function (e, t) {
  e.exports = "\nvoid main() {\n    gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}\n"
}, function (e, t, n) {
  "use strict";
  n.d(t, "b", (function () {
    return f
  })), n.d(t, "a", (function () {
    return p
  }));
  var i = n(13),
    r = n(62),
    o = n(53);

  function a(e, t) {
    for (var n = 0; n < t.length; n++) {
      var i = t[n];
      i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(e, i.key, i)
    }
  }
  var s, l = (s = null, function (e, t, n) {
    return s || (s = new i.LmvVector3), s.copy(e), s.max(t), s.min(n), s.distanceToSquared(e)
  });

  function c(e, t, n) {
    return Math.abs(e.x - t.x) < n && Math.abs(e.y - t.y) < n && Math.abs(e.z - t.z) < n
  }

  function u(e, t) {
    return t.importance - e.importance
  }
  var h = new r.LmvBox3;

  function d(e, t, n) {
    var i = function (e, t, n) {
        var i = 6 * t;
        return n.min.y = e[i + 1], n.min.z = e[i + 2], n.min.x = e[i + 0], n.max.x = e[i + 3], n.max.y = e[i + 4], n.max.z = e[i + 5], n
      }(t, e, h),
      r = n.intersectsBox(i);
    if (r === o.OUTSIDE) return 0;
    var a = r === o.CONTAINS,
      s = n.projectedBoxArea(i, a),
      c = l(n.eye, i.min, i.max);
    return s / (c = Math.max(c, .01))
  }

  function f(e, t) {
    var n = e.getFragmentList(),
      i = n.getGeometry(t);
    if (n.getWorldBounds(t, h), i) {
      var r, o, a, s, l = i.importance || 0,
        c = (o = (r = h).max.x - r.min.x, a = r.max.y - r.min.y, s = r.max.z - r.min.z, 2 * (o * a + a * s + s * o));
      i.importance = Math.max(l, c)
    }
  }
  var p = function () {
    function e() {
      ! function (e, t) {
        if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
      }(this, e), this.viewers = [], this.waitingTasks = [], this.urgentHashes = {}, this.prevNumTasks = 0, this.fullSortDone = !1, this.lastCamPos = {}, this.lastCamTarget = {}, this.lastVisibleModelIds = {}
    }
    var t, n, r;
    return t = e, (n = [{
      key: "addViewer",
      value: function (e) {
        this.viewers.push(e), this.lastCamPos[e.id] = new i.LmvVector3, this.lastCamTarget[e.id] = new i.LmvVector3, this.lastVisibleModelIds[e.id] = []
      }
    }, {
      key: "removeViewer",
      value: function (e) {
        var t = this.viewers.indexOf(e); - 1 !== t && (delete this.lastCamPos[e.id], delete this.lastCamTarget[e.id], delete this.lastVisibleModelIds[e.id], this.viewers.splice(t, 1))
      }
    }, {
      key: "checkCameraChanged",
      value: function () {
        for (var e = !1, t = 0; t < this.viewers.length; t++) {
          var n = this.viewers[t],
            i = n.impl.camera,
            r = i.position,
            o = i.target;
          c(this.lastCamPos[n.id], r, .01) && c(this.lastCamTarget[n.id], o, .01) || (this.lastCamPos[n.id].copy(r), this.lastCamTarget[n.id].copy(o), e = !0)
        }
        return e
      }
    }, {
      key: "checkModelsChanged",
      value: function () {
        for (var e = !1, t = 0; t < this.viewers.length; t++) {
          var n = this.viewers[t],
            i = n.impl.modelQueue().getModels();
          i.length !== this.lastVisibleModelIds[n.id].length && (this.lastVisibleModelIds[n.id].length = i.length, e = !0);
          for (var r = 0; r < i.length; r++) {
            var o = this.lastVisibleModelIds[n.id][r],
              a = i[r].id;
            o !== a && (this.lastVisibleModelIds[n.id][r] = a, e = !0)
          }
        }
        return e
      }
    }, {
      key: "validateRequestPriorities",
      value: function () {
        var e = this.checkCameraChanged(),
          t = this.checkModelsChanged();
        if (e || t)
          for (var n = 0; n < this.waitingTasks.length; n++) this.waitingTasks[n].importanceNeedsUpdate = !0
      }
    }, {
      key: "updateRequestPriorities",
      value: function () {
        var e = performance.now();
        this.validateRequestPriorities();
        for (var t = {}, n = [], i = 0; i < this.viewers.length; i++) {
          var r = (x = this.viewers[i]).impl.modelQueue(),
            o = r.frustum();
          n = n.concat(r.getModels()), o.reset(x.impl.camera), t[x.id] = o
        }
        var a = !1,
          s = 0 === this.prevNumTasks || this.waitingTasks.length - this.prevNumTasks > 3e3 || !this.fullSortDone;
        for (this.fullSortDone = !s, this.prevNumTasks = this.waitingTasks.length, i = 0; i < this.waitingTasks.length; i++) {
          var l = this.waitingTasks[i];
          if (l.importanceNeedsUpdate)
            if (this.urgentHashes[l.hash]) l.importance = 1 / 0;
            else {
              if (i % 10 == 0 && performance.now() - e > 10) {
                a = !0;
                break
              }
              l.importanceNeedsUpdate = !1, l.importance = 0;
              for (var c = 0, h = l.hash, f = 0; f < n.length; f++) {
                var p = n[f];
                if (p.isOTG()) {
                  var m = p.myData,
                    g = m.fragments,
                    v = g.boxes,
                    y = m.geomMetadata.hashToIndex[h];
                  if (y && g.mesh2frag)
                    for (var b = g.mesh2frag[y], _ = 0; _ < this.viewers.length; _++) {
                      var x;
                      if (-1 !== (x = this.viewers[_]).impl.modelQueue().getModels().indexOf(p))
                        if ("number" == typeof b) c += d(b, v, t[x.id]);
                        else if (Array.isArray(b))
                        for (_ = 0; _ < b.length; _++) c += d(b[_], v, t[x.id])
                    }
                }
              }
              if (l.importance = c, !s) {
                for (f = i; f > 0 && c > this.waitingTasks[f - 1].importance;) this.waitingTasks[f] = this.waitingTasks[f - 1], f--;
                this.waitingTasks[f] = l
              }
            }
        }
        return s && !a && (this.waitingTasks.sort(u), this.fullSortDone = !0), !a
      }
    }, {
      key: "makeUrgent",
      value: function (e) {
        var t = 0;
        for (var n in e) !0 === e[n] && (this.urgentHashes[n] = !0, t++);
        if (0 === t) return 0;
        for (var i = 0; i < this.waitingTasks.length; i++) {
          var r = this.waitingTasks[i];
          this.urgentHashes[r.hash] && (r.importance = 1 / 0)
        }
        return this.waitingTasks.sort(u), t
      }
    }, {
      key: "removeUrgent",
      value: function (e) {
        delete this.urgentHashes[e]
      }
    }, {
      key: "addTask",
      value: function (e) {
        this.waitingTasks.push(e)
      }
    }, {
      key: "takeTask",
      value: function () {
        return this.waitingTasks.shift()
      }
    }, {
      key: "isEmpty",
      value: function () {
        return 0 === this.waitingTasks.length
      }
    }]) && a(t.prototype, n), r && a(t, r), e
  }()
}, function (e, t) {
  e.exports = {
    externalExtensions: [{
      src: "./extensions/Wireframes/Wireframes.js",
      ids: ["Autodesk.Viewing.Wireframes"]
    }, {
      src: "./extensions/ZoomWindow/ZoomWindow.js",
      ids: ["Autodesk.Viewing.ZoomWindow"]
    }, {
      src: "./extensions/AEC/LibraryExports.js",
      ids: ["Autodesk.AEC.LevelsExtension", "Autodesk.AEC.HyperlinkExtension", "Autodesk.AEC.DropMeExtension", "Autodesk.AEC.CanvasBookmarkExtension", "Autodesk.AEC.Minimap3DExtension", "Autodesk.AEC.LocationsExtension", "Autodesk.AEC.Hypermodeling"]
    }, {
      src: "./extensions/Pushpins/PushPinExtension.js",
      ids: ["Autodesk.BIM360.Extension.PushPin"]
    }, {
      src: "./extensions/Hyperlink/Hyperlink.js",
      ids: ["Autodesk.Hyperlink"]
    }, {
      src: "./extensions/Debug/Debug.js",
      ids: ["Autodesk.Debug"]
    }, {
      src: "./extensions/BimWalk/BimWalk.js",
      ids: ["Autodesk.BimWalk"]
    }, {
      src: "./extensions/Section/Section.js",
      ids: ["Autodesk.Section"]
    }, {
      src: "./extensions/CompGeom/index.js",
      ids: ["Autodesk.CompGeom"]
    }, {
      src: "./extensions/Snapping/index.js",
      ids: ["Autodesk.Snapping"]
    }, {
      src: "./extensions/Beeline/Beeline.js",
      ids: ["Autodesk.Beeline"]
    }, {
      src: "./extensions/FirstPerson/FirstPerson.js",
      ids: ["Autodesk.FirstPerson"]
    }, {
      src: "./extensions/webVR/webVR.js",
      ids: ["Autodesk.Viewing.WebVR"]
    }, {
      src: "./extensions/CAM360/CAM360.js",
      ids: ["Autodesk.CAM360"]
    }, {
      src: "./extensions/Collaboration/Collaboration.js",
      ids: ["Autodesk.Viewing.Collaboration"]
    }, {
      src: "./extensions/FusionSim/FusionSim.js",
      ids: ["Autodesk.Fusion360.Simulation"]
    }, {
      src: "./extensions/OMV/OMV.js",
      ids: ["Autodesk.OMV"]
    }, {
      src: "./extensions/SplitScreen/SplitScreen.js",
      ids: ["Autodesk.SplitScreen"]
    }, {
      src: "./extensions/CrossFadeEffects/CrossFadeEffects.js",
      ids: ["Autodesk.CrossFadeEffects"]
    }, {
      src: "./extensions/Edit2D/Edit2D.js",
      ids: ["Autodesk.Edit2D"]
    }, {
      src: "./extensions/VisualClusters/VisualClusters.js",
      ids: ["Autodesk.VisualClusters"]
    }, {
      src: "./extensions/Moldflow/Moldflow.js",
      ids: ["Autodesk.Moldflow"]
    }, {
      src: "./extensions/PixelCompare/PixelCompare.js",
      ids: ["Autodesk.Viewing.PixelCompare"]
    }, {
      src: "./extensions/ScalarisSimulation/ScalarisSimulation.js",
      ids: ["Autodesk.Viewing.ScalarisSimulation"]
    }, {
      src: "./extensions/Measure/Measure.js",
      ids: ["Autodesk.Measure"]
    }, {
      src: "./extensions/Markup/Markup.js",
      ids: ["Autodesk.Viewing.MarkupsCore", "Autodesk.Viewing.MarkupsGui"]
    }, {
      src: "./extensions/PDF/index.js",
      ids: ["Autodesk.PDF"]
    }, {
      src: "./extensions/Scalaris/index.js",
      ids: ["Autodesk.Scalaris"]
    }, {
      src: "./extensions/DocumentBrowser/index.js",
      ids: ["Autodesk.DocumentBrowser"]
    }, {
      src: "./extensions/Geolocation/index.js",
      ids: ["Autodesk.Geolocation"]
    }, {
      src: "./extensions/Fusion360/AnimationExtension.js",
      ids: ["Autodesk.Fusion360.Animation"]
    }, {
      src: "./extensions/NPR/index.js",
      ids: ["Autodesk.NPR"]
    }, {
      src: "./extensions/MSDF/index.js",
      ids: ["Autodesk.MSDF"]
    }, {
      src: "./extensions/MemoryLimited/MemoryLimited.js",
      ids: ["Autodesk.MemoryLimited"]
    }, {
      src: "./extensions/ViewCubeUi/ViewCubeUi.js",
      ids: ["Autodesk.ViewCubeUi"]
    }, {
      src: "./extensions/MemoryLimitedDebug/MemoryManager.js",
      ids: ["Autodesk.Viewing.MemoryLimitedDebug"]
    }, {
      src: "./extensions/BimMarkups/BimMarkups.js",
      ids: ["Autodesk.BIM360.Markups"]
    }, {
      src: "./extensions/Minimap2D/Minimap2D.js",
      ids: ["Autodesk.BIM360.Minimap"]
    }, {
      src: "./extensions/GestureDocumentNavigation/GestureDocumentNavigation.js",
      ids: ["Autodesk.BIM360.GestureDocumentNavigation"]
    }, {
      src: "./extensions/RollCamera/RollCamera.js",
      ids: ["Autodesk.BIM360.RollCamera"]
    }, {
      src: "./extensions/LayerManager/LayerManager.js",
      ids: ["Autodesk.LayerManager"]
    }, {
      src: "./extensions/SceneBuilder/sceneBuilder.js",
      ids: ["Autodesk.Viewing.SceneBuilder"]
    }, {
      src: "./extensions/Popout/index.js",
      ids: ["Autodesk.Viewing.Popout"]
    }, {
      src: "./extensions/ProfileUi/index.js",
      ids: ["Autodesk.ProfileUi"]
    }, {
      src: "./extensions/PropertySearch/PropertySearch.js",
      ids: ["Autodesk.PropertySearch"]
    }, {
      src: "./extensions/StandardSurface/index.js",
      ids: ["Autodesk.StandardSurface"]
    }, {
      src: "./extensions/MaterialConverterPrism/index.js",
      ids: ["Autodesk.Viewing.MaterialConverterPrism"]
    }],
    getExtensionEntryKey: function (e) {
      return e.src.split("/")[2]
    }
  }
}, function (e, t, n) {
  var i = n(24),
    r = n(14),
    o = n(208);
  e.exports = !i && !r((function () {
    return 7 != Object.defineProperty(o("div"), "a", {
      get: function () {
        return 7
      }
    }).a
  }))
}, function (e, t, n) {
  var i = n(17),
    r = n(209),
    o = i["__core-js_shared__"] || r("__core-js_shared__", {});
  e.exports = o
}, function (e, t, n) {
  var i = n(17),
    r = n(210),
    o = i.WeakMap;
  e.exports = "function" == typeof o && /native code/.test(r(o))
}, function (e, t, n) {
  var i = n(40),
    r = n(211),
    o = n(60),
    a = n(32);
  e.exports = function (e, t) {
    for (var n = r(t), s = a.f, l = o.f, c = 0; c < n.length; c++) {
      var u = n[c];
      i(e, u) || s(e, u, l(t, u))
    }
  }
}, function (e, t, n) {
  var i = n(17);
  e.exports = i
}, function (e, t, n) {
  var i = n(40),
    r = n(76),
    o = n(155).indexOf,
    a = n(154);
  e.exports = function (e, t) {
    var n, s = r(e),
      l = 0,
      c = [];
    for (n in s) !i(a, n) && i(s, n) && c.push(n);
    for (; t.length > l;) i(s, n = t[l++]) && (~o(c, n) || c.push(n));
    return c
  }
}, function (e, t, n) {
  var i = n(214);
  e.exports = i && !Symbol.sham && "symbol" == typeof Symbol.iterator
}, function (e, t, n) {
  var i = n(24),
    r = n(32),
    o = n(7),
    a = n(157);
  e.exports = i ? Object.defineProperties : function (e, t) {
    o(e);
    for (var n, i = a(t), s = i.length, l = 0; s > l;) r.f(e, n = i[l++], t[n]);
    return e
  }
}, function (e, t, n) {
  var i = n(38);
  e.exports = i("document", "documentElement")
}, function (e, t, n) {
  var i = n(76),
    r = n(118).f,
    o = {}.toString,
    a = "object" == typeof window && window && Object.getOwnPropertyNames ? Object.getOwnPropertyNames(window) : [];
  e.exports.f = function (e) {
    return a && "[object Window]" == o.call(e) ? function (e) {
      try {
        return r(e)
      } catch (e) {
        return a.slice()
      }
    }(e) : r(i(e))
  }
}, function (e, t, n) {
  var i = n(25);
  t.f = i
}, function (e, t, n) {
  "use strict";
  var i = n(34),
    r = n(112),
    o = n(27),
    a = Math.min;
  e.exports = [].copyWithin || function (e, t) {
    var n = i(this),
      s = o(n.length),
      l = r(e, s),
      c = r(t, s),
      u = arguments.length > 2 ? arguments[2] : void 0,
      h = a((void 0 === u ? s : r(u, s)) - c, s - l),
      d = 1;
    for (c < l && l < c + h && (d = -1, c += h - 1, l += h - 1); h-- > 0;) c in n ? n[l] = n[c] : delete n[l], l += d, c += d;
    return n
  }
}, function (e, t, n) {
  "use strict";
  var i = n(137),
    r = n(27),
    o = n(41),
    a = function (e, t, n, s, l, c, u, h) {
      for (var d, f = l, p = 0, m = !!u && o(u, h, 3); p < s;) {
        if (p in n) {
          if (d = m ? m(n[p], p, t) : n[p], c > 0 && i(d)) f = a(e, t, d, r(d.length), f, c - 1) - 1;
          else {
            if (f >= 9007199254740991) throw TypeError("Exceed the acceptable array length");
            e[f] = d
          }
          f++
        }
        p++
      }
      return f
    };
  e.exports = a
}, function (e, t, n) {
  "use strict";
  var i = n(57).forEach,
    r = n(100),
    o = n(71),
    a = r("forEach"),
    s = o("forEach");
  e.exports = a && s ? [].forEach : function (e) {
    return i(this, e, arguments.length > 1 ? arguments[1] : void 0)
  }
}, function (e, t, n) {
  "use strict";
  var i = n(41),
    r = n(34),
    o = n(298),
    a = n(218),
    s = n(27),
    l = n(119),
    c = n(161);
  e.exports = function (e) {
    var t, n, u, h, d, f, p = r(e),
      m = "function" == typeof this ? this : Array,
      g = arguments.length,
      v = g > 1 ? arguments[1] : void 0,
      y = void 0 !== v,
      b = c(p),
      _ = 0;
    if (y && (v = i(v, g > 2 ? arguments[2] : void 0, 2)), null == b || m == Array && a(b))
      for (n = new m(t = s(p.length)); t > _; _++) f = y ? v(p[_], _) : p[_], l(n, _, f);
    else
      for (d = (h = b.call(p)).next, n = new m; !(u = d.call(h)).done; _++) f = y ? o(h, v, [u.value, _], !0) : u.value, l(n, _, f);
    return n.length = _, n
  }
}, function (e, t, n) {
  var i = n(7);
  e.exports = function (e, t, n, r) {
    try {
      return r ? t(i(n)[0], n[1]) : t(n)
    } catch (t) {
      var o = e.return;
      throw void 0 !== o && i(o.call(e)), t
    }
  }
}, function (e, t, n) {
  "use strict";
  var i, r, o, a = n(69),
    s = n(56),
    l = n(40),
    c = n(25),
    u = n(15),
    h = c("iterator"),
    d = !1;
  [].keys && ("next" in (o = [].keys()) ? (r = a(a(o))) !== Object.prototype && (i = r) : d = !0), null == i && (i = {}), u || l(i, h) || s(i, h, (function () {
    return this
  })), e.exports = {
    IteratorPrototype: i,
    BUGGY_SAFARI_ITERATORS: d
  }
}, function (e, t, n) {
  var i = n(22);
  e.exports = function (e) {
    if (!i(e) && null !== e) throw TypeError("Can't set " + String(e) + " as a prototype");
    return e
  }
}, function (e, t, n) {
  "use strict";
  var i = n(76),
    r = n(77),
    o = n(27),
    a = n(100),
    s = n(71),
    l = Math.min,
    c = [].lastIndexOf,
    u = !!c && 1 / [1].lastIndexOf(1, -0) < 0,
    h = a("lastIndexOf"),
    d = s("indexOf", {
      ACCESSORS: !0,
      1: 0
    }),
    f = u || !h || !d;
  e.exports = f ? function (e) {
    if (u) return c.apply(this, arguments) || 0;
    var t = i(this),
      n = o(t.length),
      a = n - 1;
    for (arguments.length > 1 && (a = l(a, r(arguments[1]))), a < 0 && (a = n + a); a >= 0; a--)
      if (a in t && t[a] === e) return a || 0;
    return -1
  } : c
}, function (e, t, n) {
  var i = n(77),
    r = n(27);
  e.exports = function (e) {
    if (void 0 === e) return 0;
    var t = i(e),
      n = r(t);
    if (t !== n) throw RangeError("Wrong length or index");
    return n
  }
}, function (e, t, n) {
  "use strict";
  var i = n(32).f,
    r = n(85),
    o = n(121),
    a = n(41),
    s = n(101),
    l = n(19),
    c = n(220),
    u = n(120),
    h = n(24),
    d = n(122).fastKey,
    f = n(51),
    p = f.set,
    m = f.getterFor;
  e.exports = {
    getConstructor: function (e, t, n, c) {
      var u = e((function (e, i) {
          s(e, u, t), p(e, {
            type: t,
            index: r(null),
            first: void 0,
            last: void 0,
            size: 0
          }), h || (e.size = 0), null != i && l(i, e[c], e, n)
        })),
        f = m(t),
        g = function (e, t, n) {
          var i, r, o = f(e),
            a = v(e, t);
          return a ? a.value = n : (o.last = a = {
            index: r = d(t, !0),
            key: t,
            value: n,
            previous: i = o.last,
            next: void 0,
            removed: !1
          }, o.first || (o.first = a), i && (i.next = a), h ? o.size++ : e.size++, "F" !== r && (o.index[r] = a)), e
        },
        v = function (e, t) {
          var n, i = f(e),
            r = d(t);
          if ("F" !== r) return i.index[r];
          for (n = i.first; n; n = n.next)
            if (n.key == t) return n
        };
      return o(u.prototype, {
        clear: function () {
          for (var e = f(this), t = e.index, n = e.first; n;) n.removed = !0, n.previous && (n.previous = n.previous.next = void 0), delete t[n.index], n = n.next;
          e.first = e.last = void 0, h ? e.size = 0 : this.size = 0
        },
        delete: function (e) {
          var t = f(this),
            n = v(this, e);
          if (n) {
            var i = n.next,
              r = n.previous;
            delete t.index[n.index], n.removed = !0, r && (r.next = i), i && (i.previous = r), t.first == n && (t.first = i), t.last == n && (t.last = r), h ? t.size-- : this.size--
          }
          return !!n
        },
        forEach: function (e) {
          for (var t, n = f(this), i = a(e, arguments.length > 1 ? arguments[1] : void 0, 3); t = t ? t.next : n.first;)
            for (i(t.value, t.key, this); t && t.removed;) t = t.previous
        },
        has: function (e) {
          return !!v(this, e)
        }
      }), o(u.prototype, n ? {
        get: function (e) {
          var t = v(this, e);
          return t && t.value
        },
        set: function (e, t) {
          return g(this, 0 === e ? 0 : e, t)
        }
      } : {
        add: function (e) {
          return g(this, e = 0 === e ? 0 : e, e)
        }
      }), h && i(u.prototype, "size", {
        get: function () {
          return f(this).size
        }
      }), u
    },
    setStrong: function (e, t, n) {
      var i = t + " Iterator",
        r = m(t),
        o = m(i);
      c(e, t, (function (e, t) {
        p(this, {
          type: i,
          target: e,
          state: r(e),
          kind: t,
          last: void 0
        })
      }), (function () {
        for (var e = o(this), t = e.kind, n = e.last; n && n.removed;) n = n.previous;
        return e.target && (e.last = n = n ? n.next : e.state.first) ? "keys" == t ? {
          value: n.key,
          done: !1
        } : "values" == t ? {
          value: n.value,
          done: !1
        } : {
          value: [n.key, n.value],
          done: !1
        } : (e.target = void 0, {
          value: void 0,
          done: !0
        })
      }), n ? "entries" : "values", !n, !0), u(t)
    }
  }
}, function (e, t) {
  var n = Math.log;
  e.exports = Math.log1p || function (e) {
    return (e = +e) > -1e-8 && e < 1e-8 ? e - e * e / 2 : n(1 + e)
  }
}, function (e, t, n) {
  var i = n(226),
    r = Math.abs,
    o = Math.pow,
    a = o(2, -52),
    s = o(2, -23),
    l = o(2, 127) * (2 - s),
    c = o(2, -126);
  e.exports = Math.fround || function (e) {
    var t, n, o = r(e),
      u = i(e);
    return o < c ? u * (o / c / s + 1 / a - 1 / a) * c * s : (n = (t = (1 + s / a) * o) - (t - o)) > l || n != n ? u * (1 / 0) : u * n
  }
}, function (e, t, n) {
  var i = n(17).isFinite;
  e.exports = Number.isFinite || function (e) {
    return "number" == typeof e && i(e)
  }
}, function (e, t, n) {
  var i = n(22),
    r = Math.floor;
  e.exports = function (e) {
    return !i(e) && isFinite(e) && r(e) === e
  }
}, function (e, t, n) {
  var i = n(17),
    r = n(138).trim,
    o = n(190),
    a = i.parseFloat,
    s = 1 / a(o + "-0") != -1 / 0;
  e.exports = s ? function (e) {
    var t = r(String(e)),
      n = a(t);
    return 0 === n && "-" == t.charAt(0) ? -0 : n
  } : a
}, function (e, t, n) {
  var i = n(80);
  e.exports = function (e) {
    if ("number" != typeof e && "Number" != i(e)) throw TypeError("Incorrect invocation");
    return +e
  }
}, function (e, t, n) {
  "use strict";
  var i = n(24),
    r = n(14),
    o = n(157),
    a = n(213),
    s = n(180),
    l = n(34),
    c = n(152),
    u = Object.assign,
    h = Object.defineProperty;
  e.exports = !u || r((function () {
    if (i && 1 !== u({
        b: 1
      }, u(h({}, "a", {
        enumerable: !0,
        get: function () {
          h(this, "b", {
            value: 3,
            enumerable: !1
          })
        }
      }), {
        b: 2
      })).b) return !0;
    var e = {},
      t = {},
      n = Symbol();
    return e[n] = 7, "abcdefghijklmnopqrst".split("").forEach((function (e) {
      t[e] = e
    })), 7 != u({}, e)[n] || "abcdefghijklmnopqrst" != o(u({}, t)).join("")
  })) ? function (e, t) {
    for (var n = l(e), r = arguments.length, u = 1, h = a.f, d = s.f; r > u;)
      for (var f, p = c(arguments[u++]), m = h ? o(p).concat(h(p)) : o(p), g = m.length, v = 0; g > v;) f = m[v++], i && !d.call(p, f) || (n[f] = p[f]);
    return n
  } : u
}, function (e, t, n) {
  var i = n(24),
    r = n(157),
    o = n(76),
    a = n(180).f,
    s = function (e) {
      return function (t) {
        for (var n, s = o(t), l = r(s), c = l.length, u = 0, h = []; c > u;) n = l[u++], i && !a.call(s, n) || h.push(e ? [n, s[n]] : s[n]);
        return h
      }
    };
  e.exports = {
    entries: s(!0),
    values: s(!1)
  }
}, function (e, t) {
  e.exports = Object.is || function (e, t) {
    return e === t ? 0 !== e || 1 / e == 1 / t : e != e && t != t
  }
}, function (e, t, n) {
  var i = n(17);
  e.exports = i.Promise
}, function (e, t, n) {
  var i = n(216);
  e.exports = /(iphone|ipod|ipad).*applewebkit/i.test(i)
}, function (e, t, n) {
  var i, r, o, a, s, l, c, u, h = n(17),
    d = n(60).f,
    f = n(80),
    p = n(228).set,
    m = n(314),
    g = h.MutationObserver || h.WebKitMutationObserver,
    v = h.process,
    y = h.Promise,
    b = "process" == f(v),
    _ = d(h, "queueMicrotask"),
    x = _ && _.value;
  x || (i = function () {
    var e, t;
    for (b && (e = v.domain) && e.exit(); r;) {
      t = r.fn, r = r.next;
      try {
        t()
      } catch (e) {
        throw r ? a() : o = void 0, e
      }
    }
    o = void 0, e && e.enter()
  }, b ? a = function () {
    v.nextTick(i)
  } : g && !m ? (s = !0, l = document.createTextNode(""), new g(i).observe(l, {
    characterData: !0
  }), a = function () {
    l.data = s = !s
  }) : y && y.resolve ? (c = y.resolve(void 0), u = c.then, a = function () {
    u.call(c, i)
  }) : a = function () {
    p.call(h, i)
  }), e.exports = x || function (e) {
    var t = {
      fn: e,
      next: void 0
    };
    o && (o.next = t), r || (r = t, a()), o = t
  }
}, function (e, t, n) {
  var i = n(7),
    r = n(22),
    o = n(165);
  e.exports = function (e, t) {
    if (i(e), r(t) && t.constructor === e) return t;
    var n = o.f(e);
    return (0, n.resolve)(t), n.promise
  }
}, function (e, t, n) {
  var i = n(17);
  e.exports = function (e, t) {
    var n = i.console;
    n && n.error && (1 === arguments.length ? n.error(e) : n.error(e, t))
  }
}, function (e, t, n) {
  "use strict";
  var i = n(4),
    r = n(193);
  i({
    target: "RegExp",
    proto: !0,
    forced: /./.exec !== r
  }, {
    exec: r
  })
}, function (e, t, n) {
  "use strict";
  var i = n(187),
    r = n(303);
  e.exports = i("Set", (function (e) {
    return function () {
      return e(this, arguments.length ? arguments[0] : void 0)
    }
  }), r)
}, function (e, t, n) {
  "use strict";
  var i = n(140).charAt,
    r = n(51),
    o = n(220),
    a = r.set,
    s = r.getterFor("String Iterator");
  o(String, "String", (function (e) {
    a(this, {
      type: "String Iterator",
      string: String(e),
      index: 0
    })
  }), (function () {
    var e, t = s(this),
      n = t.string,
      r = t.index;
    return r >= n.length ? {
      value: void 0,
      done: !0
    } : (e = i(n, r), t.index += e.length, {
      value: e,
      done: !1
    })
  }))
}, function (e, t, n) {
  var i = n(216);
  e.exports = /Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(i)
}, function (e, t, n) {
  var i = n(566);
  e.exports = function (e, t) {
    var n = i(e);
    if (n % t) throw RangeError("Wrong offset");
    return n
  }
}, function (e, t, n) {
  var i = n(34),
    r = n(27),
    o = n(161),
    a = n(218),
    s = n(41),
    l = n(29).aTypedArrayConstructor;
  e.exports = function (e) {
    var t, n, c, u, h, d, f = i(e),
      p = arguments.length,
      m = p > 1 ? arguments[1] : void 0,
      g = void 0 !== m,
      v = o(f);
    if (null != v && !a(v))
      for (d = (h = v.call(f)).next, f = []; !(u = d.call(h)).done;) f.push(u.value);
    for (g && p > 2 && (m = s(m, arguments[2], 2)), n = r(f.length), c = new(l(this))(n), t = 0; n > t; t++) c[t] = g ? m(f[t], t) : f[t];
    return c
  }
}, function (e, t, n) {
  "use strict";
  var i = n(121),
    r = n(122).getWeakData,
    o = n(7),
    a = n(22),
    s = n(101),
    l = n(19),
    c = n(57),
    u = n(40),
    h = n(51),
    d = h.set,
    f = h.getterFor,
    p = c.find,
    m = c.findIndex,
    g = 0,
    v = function (e) {
      return e.frozen || (e.frozen = new y)
    },
    y = function () {
      this.entries = []
    },
    b = function (e, t) {
      return p(e.entries, (function (e) {
        return e[0] === t
      }))
    };
  y.prototype = {
    get: function (e) {
      var t = b(this, e);
      if (t) return t[1]
    },
    has: function (e) {
      return !!b(this, e)
    },
    set: function (e, t) {
      var n = b(this, e);
      n ? n[1] = t : this.entries.push([e, t])
    },
    delete: function (e) {
      var t = m(this.entries, (function (t) {
        return t[0] === e
      }));
      return ~t && this.entries.splice(t, 1), !!~t
    }
  }, e.exports = {
    getConstructor: function (e, t, n, c) {
      var h = e((function (e, i) {
          s(e, h, t), d(e, {
            type: t,
            id: g++,
            frozen: void 0
          }), null != i && l(i, e[c], e, n)
        })),
        p = f(t),
        m = function (e, t, n) {
          var i = p(e),
            a = r(o(t), !0);
          return !0 === a ? v(i).set(t, n) : a[i.id] = n, e
        };
      return i(h.prototype, {
        delete: function (e) {
          var t = p(this);
          if (!a(e)) return !1;
          var n = r(e);
          return !0 === n ? v(t).delete(e) : n && u(n, t.id) && delete n[t.id]
        },
        has: function (e) {
          var t = p(this);
          if (!a(e)) return !1;
          var n = r(e);
          return !0 === n ? v(t).has(e) : n && u(n, t.id)
        }
      }), i(h.prototype, n ? {
        get: function (e) {
          var t = p(this);
          if (a(e)) {
            var n = r(e);
            return !0 === n ? v(t).get(e) : n ? n[t.id] : void 0
          }
        },
        set: function (e, t) {
          return m(this, e, t)
        }
      } : {
        add: function (e) {
          return m(this, e, !0)
        }
      }), h
    }
  }
}, function (e, t, n) {
  var i = n(225),
    r = n(234),
    o = n(85),
    a = n(22),
    s = function () {
      this.object = null, this.symbol = null, this.primitives = null, this.objectsByIndex = o(null)
    };
  s.prototype.get = function (e, t) {
    return this[e] || (this[e] = t())
  }, s.prototype.next = function (e, t, n) {
    var o = n ? this.objectsByIndex[e] || (this.objectsByIndex[e] = new r) : this.primitives || (this.primitives = new i),
      a = o.get(t);
    return a || o.set(t, a = new s), a
  };
  var l = new s;
  e.exports = function () {
    var e, t, n = l,
      i = arguments.length;
    for (e = 0; e < i; e++) a(t = arguments[e]) && (n = n.next(e, t, !0));
    if (this === Object && n === l) throw TypeError("Composite keys must contain a non-primitive component");
    for (e = 0; e < i; e++) a(t = arguments[e]) || (n = n.next(e, t, !1));
    return n
  }
}, function (e, t) {
  e.exports = Math.scale || function (e, t, n, i, r) {
    return 0 === arguments.length || e != e || t != t || n != n || i != i || r != r ? NaN : e === 1 / 0 || e === -1 / 0 ? e : (e - t) * (r - i) / (n - t) + i
  }
}, function (e, t, n) {
  "use strict";
  var i = n(7),
    r = n(20);
  e.exports = function () {
    for (var e = i(this), t = r(e.add), n = 0, o = arguments.length; n < o; n++) t.call(e, arguments[n]);
    return e
  }
}, function (e, t) {
  e.exports = {
    CSSRuleList: 0,
    CSSStyleDeclaration: 0,
    CSSValueList: 0,
    ClientRectList: 0,
    DOMRectList: 0,
    DOMStringList: 0,
    DOMTokenList: 1,
    DataTransferItemList: 0,
    FileList: 0,
    HTMLAllCollection: 0,
    HTMLCollection: 0,
    HTMLFormElement: 0,
    HTMLSelectElement: 0,
    MediaList: 0,
    MimeTypeArray: 0,
    NamedNodeMap: 0,
    NodeList: 1,
    PaintRequestList: 0,
    Plugin: 0,
    PluginArray: 0,
    SVGLengthList: 0,
    SVGNumberList: 0,
    SVGPathSegList: 0,
    SVGPointList: 0,
    SVGStringList: 0,
    SVGTransformList: 0,
    SourceBufferList: 0,
    StyleSheetList: 0,
    TextTrackCueList: 0,
    TextTrackList: 0,
    TouchList: 0
  }
}, function (e, t, n) {
  var i = n(14),
    r = n(25),
    o = n(15),
    a = r("iterator");
  e.exports = !i((function () {
    var e = new URL("b?a=1&b=2&c=3", "http://a"),
      t = e.searchParams,
      n = "";
    return e.pathname = "c%20d", t.forEach((function (e, i) {
      t.delete("b"), n += i + e
    })), o && !e.toJSON || !t.sort || "http://a/c%20d?a=1&c=3" !== e.href || "3" !== t.get("c") || "a=1" !== String(new URLSearchParams("?a=1")) || !t[a] || "a" !== new URL("https://a@b").username || "b" !== new URLSearchParams(new URLSearchParams("a=b")).get("a") || "xn--e1aybc" !== new URL("http://тест").host || "#%D0%B1" !== new URL("http://a#б").hash || "a1c3" !== n || "x" !== new URL("http://x", void 0).host
  }))
}, function (e, t, n) {
  "use strict";
  n(184);
  var i = n(4),
    r = n(38),
    o = n(329),
    a = n(68),
    s = n(121),
    l = n(91),
    c = n(163),
    u = n(51),
    h = n(101),
    d = n(40),
    f = n(41),
    p = n(162),
    m = n(7),
    g = n(22),
    v = n(85),
    y = n(99),
    b = n(167),
    _ = n(161),
    x = n(25),
    w = r("fetch"),
    E = r("Headers"),
    A = x("iterator"),
    S = u.set,
    M = u.getterFor("URLSearchParams"),
    T = u.getterFor("URLSearchParamsIterator"),
    C = /\+/g,
    P = Array(4),
    L = function (e) {
      return P[e - 1] || (P[e - 1] = RegExp("((?:%[\\da-f]{2}){" + e + "})", "gi"))
    },
    D = function (e) {
      try {
        return decodeURIComponent(e)
      } catch (t) {
        return e
      }
    },
    I = function (e) {
      var t = e.replace(C, " "),
        n = 4;
      try {
        return decodeURIComponent(t)
      } catch (e) {
        for (; n;) t = t.replace(L(n--), D);
        return t
      }
    },
    R = /[!'()~]|%20/g,
    O = {
      "!": "%21",
      "'": "%27",
      "(": "%28",
      ")": "%29",
      "~": "%7E",
      "%20": "+"
    },
    k = function (e) {
      return O[e]
    },
    N = function (e) {
      return encodeURIComponent(e).replace(R, k)
    },
    F = function (e, t) {
      if (t)
        for (var n, i, r = t.split("&"), o = 0; o < r.length;)(n = r[o++]).length && (i = n.split("="), e.push({
          key: I(i.shift()),
          value: I(i.join("="))
        }))
    },
    U = function (e) {
      this.entries.length = 0, F(this.entries, e)
    },
    V = function (e, t) {
      if (e < t) throw TypeError("Not enough arguments")
    },
    B = c((function (e, t) {
      S(this, {
        type: "URLSearchParamsIterator",
        iterator: b(M(e).entries),
        kind: t
      })
    }), "Iterator", (function () {
      var e = T(this),
        t = e.kind,
        n = e.iterator.next(),
        i = n.value;
      return n.done || (n.value = "keys" === t ? i.key : "values" === t ? i.value : [i.key, i.value]), n
    })),
    z = function () {
      h(this, z, "URLSearchParams");
      var e, t, n, i, r, o, a, s, l, c = arguments.length > 0 ? arguments[0] : void 0,
        u = this,
        f = [];
      if (S(u, {
          type: "URLSearchParams",
          entries: f,
          updateURL: function () {},
          updateSearchParams: U
        }), void 0 !== c)
        if (g(c))
          if ("function" == typeof (e = _(c)))
            for (n = (t = e.call(c)).next; !(i = n.call(t)).done;) {
              if ((a = (o = (r = b(m(i.value))).next).call(r)).done || (s = o.call(r)).done || !o.call(r).done) throw TypeError("Expected sequence with length 2");
              f.push({
                key: a.value + "",
                value: s.value + ""
              })
            } else
              for (l in c) d(c, l) && f.push({
                key: l,
                value: c[l] + ""
              });
          else F(f, "string" == typeof c ? "?" === c.charAt(0) ? c.slice(1) : c : c + "")
    },
    G = z.prototype;
  s(G, {
    append: function (e, t) {
      V(arguments.length, 2);
      var n = M(this);
      n.entries.push({
        key: e + "",
        value: t + ""
      }), n.updateURL()
    },
    delete: function (e) {
      V(arguments.length, 1);
      for (var t = M(this), n = t.entries, i = e + "", r = 0; r < n.length;) n[r].key === i ? n.splice(r, 1) : r++;
      t.updateURL()
    },
    get: function (e) {
      V(arguments.length, 1);
      for (var t = M(this).entries, n = e + "", i = 0; i < t.length; i++)
        if (t[i].key === n) return t[i].value;
      return null
    },
    getAll: function (e) {
      V(arguments.length, 1);
      for (var t = M(this).entries, n = e + "", i = [], r = 0; r < t.length; r++) t[r].key === n && i.push(t[r].value);
      return i
    },
    has: function (e) {
      V(arguments.length, 1);
      for (var t = M(this).entries, n = e + "", i = 0; i < t.length;)
        if (t[i++].key === n) return !0;
      return !1
    },
    set: function (e, t) {
      V(arguments.length, 1);
      for (var n, i = M(this), r = i.entries, o = !1, a = e + "", s = t + "", l = 0; l < r.length; l++)(n = r[l]).key === a && (o ? r.splice(l--, 1) : (o = !0, n.value = s));
      o || r.push({
        key: a,
        value: s
      }), i.updateURL()
    },
    sort: function () {
      var e, t, n, i = M(this),
        r = i.entries,
        o = r.slice();
      for (r.length = 0, n = 0; n < o.length; n++) {
        for (e = o[n], t = 0; t < n; t++)
          if (r[t].key > e.key) {
            r.splice(t, 0, e);
            break
          } t === n && r.push(e)
      }
      i.updateURL()
    },
    forEach: function (e) {
      for (var t, n = M(this).entries, i = f(e, arguments.length > 1 ? arguments[1] : void 0, 3), r = 0; r < n.length;) i((t = n[r++]).value, t.key, this)
    },
    keys: function () {
      return new B(this, "keys")
    },
    values: function () {
      return new B(this, "values")
    },
    entries: function () {
      return new B(this, "entries")
    }
  }, {
    enumerable: !0
  }), a(G, A, G.entries), a(G, "toString", (function () {
    for (var e, t = M(this).entries, n = [], i = 0; i < t.length;) e = t[i++], n.push(N(e.key) + "=" + N(e.value));
    return n.join("&")
  }), {
    enumerable: !0
  }), l(z, "URLSearchParams"), i({
    global: !0,
    forced: !o
  }, {
    URLSearchParams: z
  }), o || "function" != typeof w || "function" != typeof E || i({
    global: !0,
    enumerable: !0,
    forced: !0
  }, {
    fetch: function (e) {
      var t, n, i, r = [e];
      return arguments.length > 1 && (t = arguments[1], g(t) && (n = t.body, "URLSearchParams" === p(n) && ((i = t.headers ? new E(t.headers) : new E).has("content-type") || i.set("content-type", "application/x-www-form-urlencoded;charset=UTF-8"), t = v(t, {
        body: y(0, String(n)),
        headers: y(0, i)
      }))), r.push(t)), w.apply(this, r)
    }
  }), e.exports = {
    URLSearchParams: z,
    getState: M
  }
}, function (e, t, n) {
  "use strict";
  e.exports = function (e, t, n, i) {
    for (var r = 65535 & e | 0, o = e >>> 16 & 65535 | 0, a = 0; 0 !== n;) {
      n -= a = n > 2e3 ? 2e3 : n;
      do {
        o = o + (r = r + t[i++] | 0) | 0
      } while (--a);
      r %= 65521, o %= 65521
    }
    return r | o << 16 | 0
  }
}, function (e, t, n) {
  "use strict";
  var i = function () {
    for (var e, t = [], n = 0; n < 256; n++) {
      e = n;
      for (var i = 0; i < 8; i++) e = 1 & e ? 3988292384 ^ e >>> 1 : e >>> 1;
      t[n] = e
    }
    return t
  }();
  e.exports = function (e, t, n, r) {
    var o = i,
      a = r + n;
    e ^= -1;
    for (var s = r; s < a; s++) e = e >>> 8 ^ o[255 & (e ^ t[s])];
    return -1 ^ e
  }
}, function (e, t, n) {
  "use strict";
  var i = n(114),
    r = !0,
    o = !0;
  try {
    String.fromCharCode.apply(null, [0])
  } catch (e) {
    r = !1
  }
  try {
    String.fromCharCode.apply(null, new Uint8Array(1))
  } catch (e) {
    o = !1
  }
  for (var a = new i.Buf8(256), s = 0; s < 256; s++) a[s] = s >= 252 ? 6 : s >= 248 ? 5 : s >= 240 ? 4 : s >= 224 ? 3 : s >= 192 ? 2 : 1;

  function l(e, t) {
    if (t < 65534 && (e.subarray && o || !e.subarray && r)) return String.fromCharCode.apply(null, i.shrinkBuf(e, t));
    for (var n = "", a = 0; a < t; a++) n += String.fromCharCode(e[a]);
    return n
  }
  a[254] = a[254] = 1, t.string2buf = function (e) {
    var t, n, r, o, a, s = e.length,
      l = 0;
    for (o = 0; o < s; o++) 55296 == (64512 & (n = e.charCodeAt(o))) && o + 1 < s && 56320 == (64512 & (r = e.charCodeAt(o + 1))) && (n = 65536 + (n - 55296 << 10) + (r - 56320), o++), l += n < 128 ? 1 : n < 2048 ? 2 : n < 65536 ? 3 : 4;
    for (t = new i.Buf8(l), a = 0, o = 0; a < l; o++) 55296 == (64512 & (n = e.charCodeAt(o))) && o + 1 < s && 56320 == (64512 & (r = e.charCodeAt(o + 1))) && (n = 65536 + (n - 55296 << 10) + (r - 56320), o++), n < 128 ? t[a++] = n : n < 2048 ? (t[a++] = 192 | n >>> 6, t[a++] = 128 | 63 & n) : n < 65536 ? (t[a++] = 224 | n >>> 12, t[a++] = 128 | n >>> 6 & 63, t[a++] = 128 | 63 & n) : (t[a++] = 240 | n >>> 18, t[a++] = 128 | n >>> 12 & 63, t[a++] = 128 | n >>> 6 & 63, t[a++] = 128 | 63 & n);
    return t
  }, t.buf2binstring = function (e) {
    return l(e, e.length)
  }, t.binstring2buf = function (e) {
    for (var t = new i.Buf8(e.length), n = 0, r = t.length; n < r; n++) t[n] = e.charCodeAt(n);
    return t
  }, t.buf2string = function (e, t) {
    var n, i, r, o, s = t || e.length,
      c = new Array(2 * s);
    for (i = 0, n = 0; n < s;)
      if ((r = e[n++]) < 128) c[i++] = r;
      else if ((o = a[r]) > 4) c[i++] = 65533, n += o - 1;
    else {
      for (r &= 2 === o ? 31 : 3 === o ? 15 : 7; o > 1 && n < s;) r = r << 6 | 63 & e[n++], o--;
      o > 1 ? c[i++] = 65533 : r < 65536 ? c[i++] = r : (r -= 65536, c[i++] = 55296 | r >> 10 & 1023, c[i++] = 56320 | 1023 & r)
    }
    return l(c, i)
  }, t.utf8border = function (e, t) {
    var n;
    for ((t = t || e.length) > e.length && (t = e.length), n = t - 1; n >= 0 && 128 == (192 & e[n]);) n--;
    return n < 0 || 0 === n ? t : n + a[e[n]] > t ? n : t
  }
}, function (e, t, n) {
  "use strict";
  e.exports = function () {
    this.input = null, this.next_in = 0, this.avail_in = 0, this.total_in = 0, this.output = null, this.next_out = 0, this.avail_out = 0, this.total_out = 0, this.msg = "", this.state = null, this.data_type = 2, this.adler = 0
  }
}, function (e, t, n) {
  "use strict";
  e.exports = {
    Z_NO_FLUSH: 0,
    Z_PARTIAL_FLUSH: 1,
    Z_SYNC_FLUSH: 2,
    Z_FULL_FLUSH: 3,
    Z_FINISH: 4,
    Z_BLOCK: 5,
    Z_TREES: 6,
    Z_OK: 0,
    Z_STREAM_END: 1,
    Z_NEED_DICT: 2,
    Z_ERRNO: -1,
    Z_STREAM_ERROR: -2,
    Z_DATA_ERROR: -3,
    Z_BUF_ERROR: -5,
    Z_NO_COMPRESSION: 0,
    Z_BEST_SPEED: 1,
    Z_BEST_COMPRESSION: 9,
    Z_DEFAULT_COMPRESSION: -1,
    Z_FILTERED: 1,
    Z_HUFFMAN_ONLY: 2,
    Z_RLE: 3,
    Z_FIXED: 4,
    Z_DEFAULT_STRATEGY: 0,
    Z_BINARY: 0,
    Z_TEXT: 1,
    Z_UNKNOWN: 2,
    Z_DEFLATED: 8
  }
}, function (e, t) {
  function n() {
    this.pending = 0, this.max = 1 / 0, this.listeners = [], this.waiting = [], this.error = null
  }

  function i(e) {
    e.pending += 1;
    var t = !1;
    return function (i) {
      if (t) throw new Error("callback called twice");
      if (t = !0, e.error = e.error || i, e.pending -= 1, e.waiting.length > 0 && e.pending < e.max) r(e, e.waiting.shift());
      else if (0 === e.pending) {
        var o = e.listeners;
        e.listeners = [], o.forEach(n)
      }
    };

    function n(t) {
      t(e.error)
    }
  }

  function r(e, t) {
    t(i(e))
  }
  e.exports = n, n.prototype.go = function (e) {
    this.pending < this.max ? r(this, e) : this.waiting.push(e)
  }, n.prototype.wait = function (e) {
    0 === this.pending ? e(this.error) : this.listeners.push(e)
  }, n.prototype.hold = function () {
    return i(this)
  }
}, function (e, t, n) {
  (function (e) {
    var i = void 0 !== e && e || "undefined" != typeof self && self || window,
      r = Function.prototype.apply;

    function o(e, t) {
      this._id = e, this._clearFn = t
    }
    t.setTimeout = function () {
      return new o(r.call(setTimeout, i, arguments), clearTimeout)
    }, t.setInterval = function () {
      return new o(r.call(setInterval, i, arguments), clearInterval)
    }, t.clearTimeout = t.clearInterval = function (e) {
      e && e.close()
    }, o.prototype.unref = o.prototype.ref = function () {}, o.prototype.close = function () {
      this._clearFn.call(i, this._id)
    }, t.enroll = function (e, t) {
      clearTimeout(e._idleTimeoutId), e._idleTimeout = t
    }, t.unenroll = function (e) {
      clearTimeout(e._idleTimeoutId), e._idleTimeout = -1
    }, t._unrefActive = t.active = function (e) {
      clearTimeout(e._idleTimeoutId);
      var t = e._idleTimeout;
      t >= 0 && (e._idleTimeoutId = setTimeout((function () {
        e._onTimeout && e._onTimeout()
      }), t))
    }, n(707), t.setImmediate = "undefined" != typeof self && self.setImmediate || void 0 !== e && e.setImmediate || this && this.setImmediate, t.clearImmediate = "undefined" != typeof self && self.clearImmediate || void 0 !== e && e.clearImmediate || this && this.clearImmediate
  }).call(this, n(151))
}, function (e, t) {
  e.exports = "varying vec2 vUv;\nvoid main() {\n#if defined(HORIZONTAL) && defined(FLIP_UV)\n    vUv = vec2(uv.x, 1.0-uv.y);\n#else\n    vUv = vec2(uv.x, uv.y);\n#endif\n    gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n}\n"
}, function (e, t) {
  e.exports = "uniform sampler2D tDiffuse;\nuniform vec4 uColor;\nvarying vec2 vUv;\n#ifdef HORIZONTAL\n#define GET_UV(X) vec2(vUv.x + KERNEL_SCALE_H*(X), vUv.y)\n#else\n#define GET_UV(Y) vec2(vUv.x, vUv.y + KERNEL_SCALE_V*(Y))\n#endif\n#define PI 3.14159265358979\n#define SIGMA ((KERNEL_RADIUS+KERNEL_RADIUS+1.0) / 6.0)\n#define SIGMASQ2 (2.0 * SIGMA * SIGMA)\n#define GAUSSIAN(X) ( (1.0 / sqrt(PI * SIGMASQ2)) * exp(-(X)*(X)/SIGMASQ2) )\nvoid main() {\n    vec4 texColSum = vec4(0.0);\n    float gaussSum = 0.0;\n    for (float x=-KERNEL_RADIUS; x<=KERNEL_RADIUS; x+=1.0) {\n        float gauss = GAUSSIAN(x);\n        vec4 texCol = texture2D(tDiffuse, GET_UV(x));\n#ifdef HAS_ALPHA\n        texCol.rgb *= texCol.a;\n#endif\n        texColSum += texCol * gauss;\n        gaussSum += gauss;\n    }\n#ifdef HAS_ALPHA\n    texColSum.rgb /= (texColSum.a == 0.0 ? 0.0001 : texColSum.a);\n#endif\n#ifdef HORIZONTAL\n    gl_FragColor = texColSum/gaussSum;\n#else\n    gl_FragColor = texColSum/gaussSum * uColor;\n#endif\n}\n"
}, function (e, t) {
  e.exports = "uniform vec3 color1;\nuniform vec3 color2;\nvarying vec2 vUv;\nvarying vec3 vColor;\nvoid main() {\n    if (uv.y == 0.0)\n        vColor = color2;\n    else\n        vColor = color1;\n    vUv = uv;\n    gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}\n"
}, function (e, t) {
  e.exports = "varying vec3 vColor;\nvarying vec2 vUv;\nuniform samplerCube envMap;\nuniform vec3 uCamDir;\nuniform vec3 uCamUp;\nuniform vec2 uResolution;\nuniform float uHalfFovTan;\nuniform float opacity;\nuniform bool envMapBackground;\n#include<env_sample>\nconst int bloomRange = 4;\n#include<ordered_dither>\nuniform float envMapExposure;\n#if TONEMAP_OUTPUT > 0\nuniform float exposureBias;\n#include<tonemap>\n#endif\nvec3 rayDir(in vec2 vUv) {\n    vec3 A = (uResolution.x/uResolution.y)*normalize(cross(uCamDir,uCamUp)) * (uHalfFovTan * 2.0);\n    vec3 B = normalize(uCamUp) * (uHalfFovTan * 2.0);\n    vec3 C = normalize(uCamDir);\n    vec3 ray = normalize( C + (2.0*vUv.x-1.0)*A + (2.0*vUv.y-1.0)*B );\n    return ray;\n}\nvec3 getColor(in vec3 rd) {\n    return RGBMDecode(textureCube(envMap, adjustLookupVector(rd)), envMapExposure);\n}\nvoid main() {\n    vec3 rd = rayDir(vUv);\n    vec3 outColor;\n    if (envMapBackground) {\n        outColor = getColor(rd);\n#if TONEMAP_OUTPUT == 1\n        outColor = toneMapCanonOGS_WithGamma_WithColorPerserving(exposureBias * outColor);\n#elif TONEMAP_OUTPUT == 2\n        outColor = toneMapCanonFilmic_WithGamma(exposureBias * outColor);\n#endif\n    }\n    else {\n        outColor = vColor;\n    }\n    gl_FragColor = vec4(orderedDithering(outColor), opacity);\n}\n"
}, function (e, t) {
  e.exports = "uniform sampler2D tDiffuse;\nvarying vec2 vUv;\nvoid main() {\n    vec4 texel = texture2D( tDiffuse, vUv );\n    gl_FragColor = texel;\n}\n"
}, function (e, t) {
  e.exports = "#ifdef USE_LOGDEPTHBUF\n#ifdef USE_LOGDEPTHBUF_EXT\nvarying float vFragDepth;\n#endif\nuniform float logDepthBufFC;\n#endif\n#if NUM_CUTPLANES > 0\nvarying vec3 vWorldPosition;\n#endif\nvoid main() {\n    gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );;\n#if NUM_CUTPLANES > 0\n    vec4 worldPosition = modelMatrix * vec4( position, 1.0 );\n    vWorldPosition = worldPosition.xyz;\n#endif\n#ifdef USE_LOGDEPTHBUF\n    gl_Position.z = log2(max(1e-6, gl_Position.w + 1.0)) * logDepthBufFC;\n#ifdef USE_LOGDEPTHBUF_EXT\n    vFragDepth = 1.0 + gl_Position.w;\n#else\n    gl_Position.z = (gl_Position.z - 1.0) * gl_Position.w;\n#endif\n#endif\n}\n"
}, function (e, t) {
  e.exports = "#ifdef USE_LOGDEPTHBUF\nuniform float logDepthBufFC;\n#ifdef USE_LOGDEPTHBUF_EXT\n#extension GL_EXT_frag_depth : enable\nvarying float vFragDepth;\n#endif\n#endif\n#include<pack_depth>\n#if NUM_CUTPLANES > 0\nvarying vec3 vWorldPosition;\n#endif\n#include<cutplanes>\nvoid main() {\n#if NUM_CUTPLANES > 0\n    checkCutPlanes(vWorldPosition);\n#endif\n#if defined(USE_LOGDEPTHBUF) && defined(USE_LOGDEPTHBUF_EXT)\n    gl_FragDepthEXT = log2(vFragDepth) * logDepthBufFC * 0.5;\n#endif\n#ifdef USE_LOGDEPTHBUF_EXT\n    float depth = gl_FragDepthEXT / gl_FragCoord.w;\n#else\n    float depth = gl_FragCoord.z / gl_FragCoord.w;\n#endif\n    depth = 1.0 - depth;\n    gl_FragColor = packDepth(depth);\n}\n"
}, function (e, t) {
  e.exports = "#define NUM_SAMPLES 29.0\n#define NUM_SPIRAL_TURNS 7.0\nuniform sampler2D tDepth;\nuniform vec3 worldSize;\nvarying vec2 vUv;\n#ifdef PRESET_2\n#define SAMPLE_RADIUS 0.3\n#define AO_GAMMA 1.0\n#define AO_INTENSITY 1.0\n#else\n#define SAMPLE_RADIUS 0.2\n#define AO_GAMMA 3.0\n#define AO_INTENSITY 0.8\n#endif\n#include<pack_depth>\n#define PI 3.14159265358979\nfloat rand(vec2 co) {\n    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\n}\nfloat getRandomAngle(vec2 pos) {\n    return rand(pos) * (2.0 * PI);\n}\nvec2 tapLocation(float sampleNumber, float spinAngle, out float ssR){\n    float alpha = float(sampleNumber + 0.5) * (1.0 / NUM_SAMPLES);\n    float angle = alpha * (NUM_SPIRAL_TURNS * PI * 2.0) + spinAngle;\n    ssR = alpha;\n    return vec2(cos(angle), sin(angle));\n}\nvec2 sampleAO(vec2 unitDirection, float radius) {\n    vec2 sampleOffset = unitDirection * radius;\n    float idepth = unpackDepth(texture2D(tDepth, vUv + sampleOffset));\n    float depth = 1.0 - idepth;\n    if (depth < 1e-6) {\n        if (radius == 0.0)\n            return vec2(1.0, 1.0);\n        else\n            return vec2(0.0, 1.0);\n    }\n    vec3 dir = vec3(sampleOffset.x, depth, sampleOffset.y) * worldSize;\n    float distance2 = dot(dir,dir);\n    float idistance = 1.0 / sqrt(distance2);\n    vec3 ndir = dir * idistance;\n#ifdef PRESET_2\n    float importance = ndir.y * idistance;\n#else\n    float importance = ndir.y / distance2;\n#endif\n    vec2 ret;\n    ret.x = (idepth == 0.0) ? 0.0 : importance;\n    ret.y = importance;\n    return ret;\n}\nvoid main() {\n    vec2 sum = vec2(0.0);\n    float angle = getRandomAngle(vUv);\n    for (float i = 0.0; i<NUM_SAMPLES; i+= 1.0) {\n        float ssR;\n        vec2 uv = tapLocation(i, angle, ssR);\n        sum += sampleAO(uv, ssR * SAMPLE_RADIUS);\n    }\n    float ao = sum.x / sum.y;\n    gl_FragColor = packDepth(AO_INTENSITY * clamp(pow(ao, AO_GAMMA), 0.0, 0.9999));\n}\n"
}, function (e, t) {
  e.exports = "uniform sampler2D tDepth;\nvarying vec2 vUv;\n#ifdef HORIZONTAL\n#define GET_UV(X) vec2(vUv.x + KERNEL_SCALE*(X), vUv.y)\n#else\n#define GET_UV(Y) vec2(vUv.x, vUv.y + KERNEL_SCALE*(Y))\n#endif\n#include<pack_depth>\n#define PI 3.14159265358979\n#define SIGMA ((2.0 * KERNEL_RADIUS+1.0) / 6.0)\n#define SIGMASQ2 (2.0 * SIGMA * SIGMA)\n#ifdef BOX\n#define KERNEL_VAL(X) 1.0\n#else\n#define KERNEL_VAL(X) ( (1.0 / sqrt(PI * SIGMASQ2)) * exp(-(X)*(X)/SIGMASQ2) )\n#endif\nvoid main() {\n    float depthVal = 0.0;\n    float sum = 0.0;\n    for (float x=-KERNEL_RADIUS; x<=KERNEL_RADIUS; x+=1.0) {\n        depthVal += unpackDepth(texture2D(tDepth, GET_UV(x))) * KERNEL_VAL(x);\n        sum += KERNEL_VAL(x);\n    }\n    gl_FragColor = packDepth(depthVal/sum);\n}\n"
}, function (e, t) {
  e.exports = "uniform sampler2D tDepth;\nuniform vec4 uShadowColor;\nvarying vec2 vUv;\n#include<pack_depth>\nvoid main() {\n    float depthVal = unpackDepth(texture2D(tDepth, vUv));\n    gl_FragColor = vec4(uShadowColor.rgb, uShadowColor.a * depthVal);\n}\n"
}, function (e, t) {
  e.exports = "\nvec4 packDepth( const in float depth ) {\n    vec4 enc = vec4(1.0, 255.0, 65025.0, 160581375.0) * depth;\n    enc = fract(enc);\n    enc -= enc.yzww * vec4(1.0/255.0,1.0/255.0,1.0/255.0,0.0);\n    return enc;\n}\nfloat unpackDepth( const in vec4 rgba_depth ) {\n    return dot( rgba_depth, vec4(1.0, 1.0/255.0, 1.0/65025.0, 1.0/160581375.0) );\n}\n"
}, function (e, t) {
  e.exports = "\nuniform sampler2D tDepth;\nuniform vec4 projInfo;\nuniform float isOrtho;\nuniform mat4 worldMatrix_mainPass;\nvec3 reconstructCSPosition(vec2 fragCoords, float z) {\n    return vec3((fragCoords * projInfo.xy + projInfo.zw) * mix(z, -1.0, isOrtho), z);\n}\nvec3 reconstructWorldPosition(vec2 fragCoords, vec2 screenUv) {\n    float zCam = texture2D(tDepth, screenUv).z;\n    vec3 csPos = reconstructCSPosition(fragCoords, zCam);\n    return (worldMatrix_mainPass * vec4(csPos, 1.0)).xyz;\n}\n"
}, function (e, t) {
  e.exports = "\nfloat luminance_post(vec3 rgb) {\n    return dot(rgb, vec3(0.299, 0.587, 0.114));\n}\nfloat luminance_pre(vec3 rgb) {\n    return dot(rgb, vec3(0.212671, 0.715160, 0.072169));\n}\nvec3 xyz2rgb(vec3 xyz) {\n    vec3 R = vec3( 3.240479, -1.537150, -0.498535);\n    vec3 G = vec3(-0.969256,  1.875992,  0.041556);\n    vec3 B = vec3( 0.055648, -0.204043,  1.057311);\n    vec3 rgb;\n    rgb.b = dot(xyz, B);\n    rgb.g = dot(xyz, G);\n    rgb.r = dot(xyz, R);\n    return rgb;\n}\nvec3 rgb2xyz(vec3 rgb) {\n    vec3 X = vec3(0.412453, 0.35758, 0.180423);\n    vec3 Y = vec3(0.212671, 0.71516, 0.0721688);\n    vec3 Z = vec3(0.0193338, 0.119194, 0.950227);\n    vec3 xyz;\n    xyz.x = dot(rgb, X);\n    xyz.y = dot(rgb, Y);\n    xyz.z = dot(rgb, Z);\n    return xyz;\n}\nvec3 xyz2xyY(vec3 xyz) {\n    float sum = xyz.x + xyz.y + xyz.z;\n    sum = 1.0 / sum;\n    vec3 xyY;\n    xyY.z = xyz.y;\n    xyY.x = xyz.x * sum;\n    xyY.y = xyz.y * sum;\n    return xyY;\n}\nvec3 xyY2xyz(vec3 xyY) {\n    float x = xyY.x;\n    float y = xyY.y;\n    float Y = xyY.z;\n    vec3 xyz;\n    xyz.y = Y;\n    xyz.x = x * (Y / y);\n    xyz.z = (1.0 - x - y) * (Y / y);\n    return xyz;\n}\nfloat toneMapCanon_T(float x)\n{\n    float xpow = pow(x, 1.60525727);\n    float tmp = ((1.05542877*4.68037409)*xpow) / (4.68037409*xpow + 1.0);\n    return clamp(tmp, 0.0, 1.0);\n}\nconst float Shift = 1.0 / 0.18;\nfloat toneMapCanonFilmic_NoGamma(float x) {\n    x *= Shift;\n    const float A = 0.2;\n    const float B = 0.34;\n    const float C = 0.002;\n    const float D = 1.68;\n    const float E = 0.0005;\n    const float F = 0.252;\n    const float scale = 1.0/0.833837;\n    return (((x*(A*x+C*B)+D*E)/(x*(A*x+B)+D*F))-E/F) * scale;\n}\nvec3 toneMapCanonFilmic_WithGamma(vec3 x) {\n    x *= Shift;\n    const float A = 0.27;\n    const float B = 0.29;\n    const float C = 0.052;\n    const float D = 0.2;\n    const float F = 0.18;\n    const float scale = 1.0/0.897105;\n    return (((x*(A*x+C*B))/(x*(A*x+B)+D*F))) * scale;\n}\nvec3 toneMapCanonOGS_WithGamma_WithColorPerserving(vec3 x) {\n    vec3 outColor = x.rgb;\n    outColor = min(outColor, vec3(3.0));\n    float inLum = luminance_pre(outColor);\n    if (inLum > 0.0) {\n        float outLum = toneMapCanon_T(inLum);\n        outColor = outColor * (outLum / inLum);\n        outColor = clamp(outColor, vec3(0.0), vec3(1.0));\n    }\n    float gamma = 1.0/2.2;\n    outColor = pow(outColor, vec3(gamma));\n    return outColor;\n}\n"
}, function (e, t) {
  e.exports = "vec3 orderedDithering(vec3 col) {\n    const vec4 m0 = vec4( 1.0, 13.0,  4.0, 16.0);\n    const vec4 m1 = vec4( 9.0,  5.0, 12.0,  8.0);\n    const vec4 m2 = vec4( 3.0, 15.0,  2.0, 14.0);\n    const vec4 m3 = vec4(11.0,  7.0, 10.0,  6.0);\n    int i = int(mod(float(gl_FragCoord.x), 4.0));\n    int j = int(mod(float(gl_FragCoord.y), 4.0));\n    vec4 biasRow;\n    if      (i==0) biasRow = m0;\n    else if (i==1) biasRow = m1;\n    else if (i==2) biasRow = m2;\n    else           biasRow = m3;\n    float bias;\n    if      (j==0) bias = biasRow.x;\n    else if (j==1) bias = biasRow.y;\n    else if (j==2) bias = biasRow.z;\n    else           bias = biasRow.w;\n    return col + bias / 17.0 / 256.0;\n}\n"
}, function (e, t) {
  e.exports = "#if NUM_CUTPLANES > 0\nuniform vec4 cutplanes[NUM_CUTPLANES];\nvoid checkCutPlanes(vec3 worldPosition) {\n    for (int i=0; i<NUM_CUTPLANES; i++) {\n        if (dot(vec4(worldPosition, 1.0), cutplanes[i]) > 0.0) {\n            discard;\n        }\n    }\n}\n#endif\n"
}, function (e, t) {
  e.exports = "\n#define kPI 3.14159265358979\nvec2 encodeNormal (vec3 n) {\n    return (vec2(atan(n.y,n.x)/kPI, n.z)+1.0)*0.5;\n}\nvec3 decodeNormal (vec2 enc) {\n    vec2 ang = enc * 2.0 - 1.0;\n    vec2 scth = vec2(sin(ang.x * kPI), cos(ang.x * kPI));\n    vec2 scphi = vec2(sqrt(1.0 - ang.y * ang.y), ang.y);\n    return vec3(scth.y * scphi.x, scth.x * scphi.x, scphi.y);\n}\n"
}, function (e, t) {
  e.exports = "#ifdef HATCH_PATTERN\nuniform vec2 hatchParams;\nuniform vec3 hatchTintColor;\nuniform float hatchTintIntensity;\nfloat curveGaussian(float r, float invWidth) {\n    float amt = clamp(r * invWidth, 0.0, 1.0);\n    float exponent = amt * 3.5;\n    return exp(-exponent*exponent);\n}\nvec4 calculateHatchPattern(vec2 hatchParams, vec2 coord, vec4 fragColor, vec3 hatchTintColor, float hatchTintIntensity ) {\n    float hatchSlope = hatchParams.x;\n    float hatchPeriod = hatchParams.y;\n    if (abs(hatchSlope) <= 1.0) {\n        float hatchPhase = coord.y - hatchSlope * coord.x;\n        float dist = abs(mod((hatchPhase), (hatchPeriod)));\n        if (dist < 1.0) {\n            fragColor = vec4(0.0,0.0,0.0,1.0);\n        } else {\n            fragColor.xyz = mix(fragColor.xyz, hatchTintColor, hatchTintIntensity);\n        }\n    } else {\n        float hatchPhase = - coord.y / hatchSlope + coord.x;\n        float dist = abs(mod((hatchPhase), (hatchPeriod)));\n        if (dist < 1.0) {\n            fragColor = vec4(0.0,0.0,0.0,1.0);\n        } else {\n            fragColor.xyz = mix(fragColor.xyz, hatchTintColor, hatchTintIntensity);\n        }\n    }\n    return fragColor;\n}\n#endif\n"
}, function (e, t) {
  e.exports = "\nuniform float envRotationSin;\nuniform float envRotationCos;\nvec3 adjustLookupVector(in vec3 lookup) {\n    return vec3(\n            envRotationCos * lookup.x - envRotationSin * lookup.z,\n            lookup.y,\n            envRotationSin * lookup.x + envRotationCos * lookup.z);\n}\nvec3 RGBMDecode(in vec4 vRGBM, in float exposure) {\n    vec3 ret = vRGBM.rgb * (vRGBM.a * 16.0);\n    ret *= ret;\n    ret *= exposure;\n    return ret;\n}\nvec3 GammaDecode(in vec4 vRGBA, in float exposure) {\n    return vRGBA.xyz * vRGBA.xyz * exposure;\n}\nvec3 sampleIrradianceMap(vec3 dirWorld, samplerCube irrMap, float exposure) {\n    vec4 cubeColor4 = textureCube(irrMap, adjustLookupVector(dirWorld));\n#ifdef IRR_GAMMA\n    vec3 indirectDiffuse = GammaDecode(cubeColor4, exposure);\n#elif defined(IRR_RGBM)\n    vec3 indirectDiffuse = RGBMDecode(cubeColor4, exposure);\n#else\n    vec3 indirectDiffuse = cubeColor4.xyz;\n#ifdef GAMMA_INPUT\n    indirectDiffuse.xyz *= indirectDiffuse.xyz;\n#endif\n#endif\n    return indirectDiffuse;\n}\n"
}, function (e, t) {
  e.exports = "#ifdef USE_VERTEX_ID\nattribute vec3 id;\nvarying   vec3 vId;\n#endif\n"
}, function (e, t) {
  e.exports = "\n#ifdef USE_VERTEX_ID\nvId = id;\n#endif\n"
}, function (e, t) {
  e.exports = "#if defined(MRT_NORMALS) || defined(MRT_ID_BUFFER)\n    varying highp float depth;\n#endif\n#if defined(MRT_ID_BUFFER) || defined(ID_COLOR)\n    #ifdef USE_VERTEX_ID\n        varying vec3 vId;\n    #elif defined(LINE_2D_SHADER)\n        varying vec4 dbId;\n    #else\n        uniform vec3 dbId;\n    #endif\n#endif\n#if defined(MRT_ID_BUFFER) || defined(MODEL_COLOR)\n    uniform vec3 modelId;\n#endif\n#ifdef _LMVWEBGL2_\n    #if defined(MRT_NORMALS)\n        layout(location = 1) out vec4 outNormal;\n        #if defined(MRT_ID_BUFFER)\n            layout(location = 2) out vec4 outId;\n            #if defined(MODEL_COLOR)\n                layout(location = 3) out vec4 outModelId;\n            #endif\n        #endif\n    #elif defined(MRT_ID_BUFFER)\n        layout(location = 1) out vec4 outId;\n        #if defined(MODEL_COLOR)\n            layout(location = 2) out vec4 outModelId;\n        #endif\n    #endif\n#else\n    #define gl_FragColor gl_FragData[0]\n    #if defined(MRT_NORMALS)\n        #define outNormal gl_FragData[1]\n        #if defined(MRT_ID_BUFFER)\n            #define outId gl_FragData[2]\n            #if defined(MODEL_COLOR)\n                #define outModelId gl_FragData[3]\n            #endif\n        #endif\n    #elif defined(MRT_ID_BUFFER)\n        #define outId gl_FragData[1]\n        #if defined(MODEL_COLOR)\n            #define outModelId gl_FragData[2]\n        #endif\n    #endif\n#endif"
}, function (e, t) {
  e.exports = "\n#if defined(USE_VERTEX_ID) && (defined(MRT_ID_BUFFER) || defined(ID_COLOR))\n    vec3 dbId = vId;\n#endif\n#ifdef MRT_ID_BUFFER\n    #ifndef ENABLE_ID_DISCARD\n        const float writeId = 1.0;\n    #endif\n    outId = vec4(dbId.rgb, writeId);\n    #ifdef MODEL_COLOR\n        outModelId = vec4(modelId.rgb, writeId);\n    #endif\n#elif defined(ID_COLOR)\n    #ifdef ENABLE_ID_DISCARD\n        if (writeId==0.0) {\n            discard;\n        }\n    #endif\n    gl_FragColor = vec4(dbId.rgb, 1.0);\n#elif defined(MODEL_COLOR)\n    #ifdef ENABLE_ID_DISCARD\n        if (writeId==0.0) {\n            discard;\n        }\n    #endif\n    gl_FragColor = vec4(modelId.rgb, 1.0);\n#endif\n"
}, function (e, t) {
  e.exports = "#ifdef HATCH_PATTERN\ngl_FragColor = calculateHatchPattern(hatchParams, gl_FragCoord.xy, gl_FragColor, hatchTintColor, hatchTintIntensity);\n#endif\n#if defined(USE_LOGDEPTHBUF) && defined(USE_LOGDEPTHBUF_EXT)\ngl_FragDepthEXT = log2(vFragDepth) * logDepthBufFC * 0.5;\n#endif\n#ifdef MRT_NORMALS\noutNormal = vec4(geomNormal.x, geomNormal.y, depth, gl_FragColor.a < 1.0 ? 0.0 : 1.0);\n#endif\n#include<id_frag>\n"
}, function (e, t) {
  e.exports = "uniform vec4 themingColor;\n"
}, function (e, t) {
  e.exports = "gl_FragColor.rgb = mix(gl_FragColor.rgb, themingColor.rgb, themingColor.a);\n"
}, function (e, t) {
  e.exports = "\n#ifdef USE_INSTANCING\nattribute vec3 instOffset;\nattribute vec4 instRotation;\nattribute vec3 instScaling;\nvec3 applyQuaternion(vec3 p, vec4 q) {\n    return p + 2.0 * cross(q.xyz, cross(q.xyz, p) + q.w * p);\n}\nvec3 getInstancePos(vec3 pos) {\n    return instOffset + applyQuaternion(instScaling * pos, instRotation);\n}\nvec3 getInstanceNormal(vec3 normal) {\n    return applyQuaternion(normal/instScaling, instRotation);\n}\n#else\nvec3 getInstancePos(vec3 pos)       { return pos;    }\nvec3 getInstanceNormal(vec3 normal) { return normal; }\n#endif\n"
}, function (e, t) {
  e.exports = "\nuniform float shadowESMConstant;\nuniform float shadowMapRangeMin;\nuniform float shadowMapRangeSize;\n"
}, function (e, t) {
  e.exports = "\n#ifdef USE_SHADOWMAP\nvarying vec4 vShadowCoord;\nuniform mat4 shadowMatrix;\n#endif\n"
}, function (e, t) {
  e.exports = "\n#ifdef USE_SHADOWMAP\n{\n    vec4 worldPosition = modelMatrix * vec4( position, 1.0 );\n    vShadowCoord = shadowMatrix * worldPosition;\n}\n#endif\n"
}, function (e, t) {
  e.exports = "\n#ifdef USE_SHADOWMAP\nuniform sampler2D shadowMap;\nuniform vec2      shadowMapSize;\nuniform float     shadowDarkness;\nuniform float     shadowBias;\nuniform vec3      shadowLightDir;\nvarying vec4 vShadowCoord;\n#include<shadowmap_decl_common>\nfloat getShadowValue() {\n    float fDepth;\n    vec3 shadowColor = vec3( 1.0 );\n    vec3 shadowCoord = vShadowCoord.xyz / vShadowCoord.w;\n    shadowCoord.xyz = 0.5 * (shadowCoord.xyz + vec3(1.0, 1.0, 1.0));\n    bvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n    bool inFrustum = all( inFrustumVec );\n    float shadowValue = 1.0;\n    if (inFrustum) {\n        shadowCoord.z = min(0.999, shadowCoord.z);\n        shadowCoord.z -= shadowBias;\n#ifdef USE_HARD_SHADOWS\n        vec4 rgbaDepth = texture2D( shadowMap, shadowCoord.xy );\n        float fDepth = rgbaDepth.r;\n        if ( fDepth < shadowCoord.z ) {\n            shadowValue = 1.0 - shadowDarkness;\n        }\n#else\n        vec4 rgbaDepth = texture2D( shadowMap, shadowCoord.xy );\n        float shadowMapValue = rgbaDepth.r;\n        shadowValue = exp(-shadowESMConstant * shadowCoord.z) * shadowMapValue;\n        shadowValue = min(shadowValue, 1.0);\n        shadowValue = mix(1.0 - shadowDarkness, 1.0, shadowValue);\n#endif\n    }\n    return shadowValue;\n}\n#else\nfloat getShadowValue() { return 1.0; }\n#endif\nvec3 applyEnvShadow(vec3 colorWithoutShadow, vec3 worldNormal) {\n#if defined(USE_SHADOWMAP)\n    float dp  = dot(shadowLightDir, worldNormal);\n    float dpValue = (dp + 1.0) / 2.0;\n    dpValue = min(1.0, dpValue * 1.5);\n    float sv = getShadowValue();\n    vec3 result = colorWithoutShadow * min(sv, dpValue);\n    return result;\n#else\n    return colorWithoutShadow;\n#endif\n}\n"
}, function (e, t) {
  e.exports = "float averageOfFloat3(in vec3 value) { \n    const float oneThird = 1.0 / 3.0; \n    return dot(value, vec3(oneThird, oneThird, oneThird)); \n} \n"
}, function (e, t) {
  e.exports = "\n#define LINE_2D_SHADER 1\n#define TAU     6.28318530718\n#define PI      3.14159265358979\n#define HALF_PI 1.57079632679\n#define PI_0_5  HALF_PI\n#define PI_1_5  4.71238898038\n#define ENABLE_ID_DISCARD\n#define VBB_GT_TRIANGLE_INDEXED  0.0\n#define VBB_GT_LINE_SEGMENT      1.0\n#define VBB_GT_ARC_CIRCULAR      2.0\n#define VBB_GT_ARC_ELLIPTICAL    3.0\n#define VBB_GT_TEX_QUAD          4.0\n#define VBB_GT_ONE_TRIANGLE      5.0\n#define VBB_GT_MSDF_TRIANGLE_INDEXED 6.0\n#define VBB_INSTANCED_FLAG   0.0\n#define VBB_SEG_START_RIGHT  0.0\n#define VBB_SEG_START_LEFT   1.0\n#define VBB_SEG_END_RIGHT    2.0\n#define VBB_SEG_END_LEFT     3.0\n#define LTSCALE 0.25\nvarying vec4 fsColor;\nvarying vec2 fsOffsetDirection;\nvarying vec4 fsMultipurpose;\nvarying float fsHalfWidth;\nvarying vec2 fsVpTC;\nvarying float fsGhosting;\n#ifdef LOADING_ANIMATION\nvarying float loadingProgress;\n#endif\n"
}, function (e, t) {
  e.exports = "#if defined( PRISMWOOD )\n#define ONE 0.00390625\nfloat GetIndexedValue(vec4 array, int index)\n{\n    if (index == 0)\n        return array[0];\n    else if (index == 1)\n        return array[1];\n    else if (index == 2)\n        return array[2];\n    else if (index == 3)\n        return array[3];\n    else\n        return 0.0;\n}\nint GetIndexedValue(ivec2 array, int index)\n{\n    if (index == 0)\n        return array[0];\n    else if (index == 1)\n        return array[1];\n    else\n        return 0;\n}\n#if defined( USE_WOOD_CURLY_DISTORTION_MAP )\nfloat SampleCurlyPattern(vec2 uv)\n{\n    vec2 uv_wood_curly_distortion_map = (wood_curly_distortion_map_texMatrix * vec3(uv, 1.0)).xy;\n    WOOD_CURLY_DISTORTION_CLAMP_TEST;\n    vec3 curlyDistortion = texture2D(wood_curly_distortion_map, uv_wood_curly_distortion_map).xyz;\n    if(wood_curly_distortion_map_invert) curlyDistortion = vec3(1.0) - curlyDistortion;\n    return curlyDistortion.r;\n}\nvec3 DistortCurly(vec3 p)\n{\n    if (!wood_curly_distortion_enable) return p;\n    float r = length(p.xy);\n    if (r < 0.00001) return p;\n    const float INV_ANGLE_INTERVAL = 1.27323954;\n    const float NUM_INTERVAL = 8.0;\n    float theta = atan(p.y, p.x);\n    if (theta < 0.0)\n        theta += PI2;\n    float intIdx = theta * INV_ANGLE_INTERVAL;\n    int idx0 = int(mod(floor(intIdx), NUM_INTERVAL));\n    int idx1 = int(mod(ceil(intIdx), NUM_INTERVAL));\n    const vec4 HASH_TABLE1 = vec4(0.450572,0.114598, 0.886043, 0.315119);\n    const vec4 HASH_TABLE2 = vec4(0.216133,0.306264, 0.685616, 0.317907);\n    float offset0 = idx0 < 4 ? GetIndexedValue(HASH_TABLE1, idx0) : GetIndexedValue(HASH_TABLE2, idx0-4);\n    float offset1 = idx1 < 4 ? GetIndexedValue(HASH_TABLE1, idx1) : GetIndexedValue(HASH_TABLE2, idx1-4);\n    const float maxOffset = 100.0;\n    offset0 = (offset0 - 0.5) * maxOffset;\n    offset1 = (offset1 - 0.5) * maxOffset;\n    vec2 uv0 = vec2(p.z + offset0, r);\n    float shiftWeight0 =  SampleCurlyPattern(uv0);\n    vec2 uv1 = vec2(p.z + offset1, r);\n    float shiftWeight1 =  SampleCurlyPattern(uv1);\n    float interpWeight = fract(intIdx);\n    float shiftWeight = mix(shiftWeight0, shiftWeight1, interpWeight);\n    const float INV_MIN_RADIUS = 2.0;\n    float shiftWeightAdjust = smoothstep(0.0, 1.0, r * INV_MIN_RADIUS);\n    r -= wood_curly_distortion_scale * (shiftWeight * shiftWeightAdjust);\n    float thetaNew = atan(p.y, p.x);\n    vec3 pNew = p;\n    pNew.x = r * cos(thetaNew);\n    pNew.y = r * sin(thetaNew);\n    return pNew;\n}\n#endif\nvec3 un2sn(vec3 range)\n{\n    return range * 2.0 - 1.0;\n}\nfloat inoise(vec3 p)\n{\n    vec3 modp = mod(floor(p), 256.0);\n    modp.xy = modp.xy * ONE;\n    vec4 AA = texture2D(perm2DMap, vec2(modp.x, modp.y), 0.0) * 255.0;\n    AA = AA + modp.z;\n    AA = mod(floor(AA), 256.0);\n    AA *= ONE;\n    vec3 gradx1 = un2sn(texture2D(permGradMap,vec2(AA.x,0.0),0.0).xyz);\n    vec3 grady1 = un2sn(texture2D(permGradMap,vec2(AA.y,0.0),0.0).xyz);\n    vec3 gradz1 = un2sn(texture2D(permGradMap,vec2(AA.z,0.0),0.0).xyz);\n    vec3 gradw1 = un2sn(texture2D(permGradMap,vec2(AA.w,0.0),0.0).xyz);\n    vec3 gradx2 = un2sn(texture2D(permGradMap,vec2(AA.x + ONE,0.0),0.0).xyz);\n    vec3 grady2 = un2sn(texture2D(permGradMap,vec2(AA.y + ONE,0.0),0.0).xyz);\n    vec3 gradz2 = un2sn(texture2D(permGradMap,vec2(AA.z + ONE,0.0),0.0).xyz);\n    vec3 gradw2 = un2sn(texture2D(permGradMap,vec2(AA.w + ONE,0.0),0.0).xyz);\n    p -= floor(p);\n    vec3 fadep = p * p * p * (p * (p * 6.0 - 15.0) + 10.0);\n    return mix( mix( mix( dot(gradx1, p ),\n                          dot(gradz1, p + vec3(-1.0, 0.0, 0.0)), fadep.x),\n                     mix( dot(grady1, p + vec3(0.0, -1.0, 0.0)),\n                          dot(gradw1, p + vec3(-1.0, -1.0, 0.0)), fadep.x), fadep.y),\n                mix( mix( dot(gradx2, p + vec3(0.0, 0.0, -1.0)),\n                          dot(gradz2, p + vec3(-1.0, 0.0, -1.0)), fadep.x),\n                     mix( dot(grady2, p + vec3(0.0, -1.0, -1.0)),\n                          dot(gradw2, p + vec3(-1.0, -1.0, -1.0)), fadep.x), fadep.y), fadep.z);\n}\nfloat inoise(float p)\n{\n    float modp = mod(floor(p), 256.0);\n    modp = (modp + 256.0) * ONE;\n    float permx = texture2D(permutationMap, vec2(modp, 0.0), 0.0).r;\n    float gradx = texture2D(gradientMap, vec2(permx, 0.0), 0.0).r*2.0-1.0;\n    float permy = texture2D(permutationMap, vec2(modp + ONE, 0.0), 0.0).r;\n    float grady = texture2D(gradientMap, vec2(permy, 0.0), 0.0).r*2.0-1.0;\n    p -= floor(p);\n    float fadep = p * p * p * (p * (p * 6.0 - 15.0) + 10.0);\n    return mix(gradx * p, grady * (p - 1.0), fadep);\n}\nfloat multiband_inoise(vec3 p, int bands, vec4 w, vec4 f)\n{\n    float noise = 0.0;\n    for(int i = 0; i < 4; ++i)\n    {\n        if (i >= bands) break;\n        noise += GetIndexedValue(w, i) * inoise(p * GetIndexedValue(f, i));\n    }\n    return noise;\n}\nfloat multiband_inoise(float p, int bands, vec4 w, vec4 f)\n{\n    float noise = 0.0;\n    for(int i = 0; i < 4; ++i)\n    {\n        if (i >= bands) break;\n        noise += GetIndexedValue(w, i) * inoise(p * GetIndexedValue(f, i));\n    }\n    return noise;\n}\nvec3 Distort3DCosineRadialDir(vec3 p)\n{\n    float radius = length(p.xy);\n    if (radius < 0.00001) return p;\n    vec2 theta = p.xy / radius;\n    float radiusShift = 0.0;\n    for (int i = 0; i < 4; ++i)\n    {\n        if (i >= wood_fiber_cosine_bands) break;\n        radiusShift += GetIndexedValue(wood_fiber_cosine_weights, i) * cos(p.z * RECIPROCAL_PI2 * GetIndexedValue(wood_fiber_cosine_frequencies, i));\n    }\n    const float MIN_RADIUS = 1.5;\n    float weight = clamp(radius / MIN_RADIUS, 0.0, 1.0);\n    if(weight >= 0.5)\n        weight = weight * weight * (3.0 - (weight + weight));\n    p.xy += theta * radiusShift * weight;\n    return p;\n}\nvec3 Distort3DPerlin(vec3 p)\n{\n    vec3 pAniso = vec3(p.xy, p.z * wood_fiber_perlin_scale_z);\n    p.xy += multiband_inoise(pAniso, wood_fiber_perlin_bands, wood_fiber_perlin_weights, wood_fiber_perlin_frequencies);\n    return p;\n}\nvec3 Distort(vec3 p)\n{\n    if(wood_fiber_cosine_enable)\n        p = Distort3DCosineRadialDir(p);\n    if(wood_fiber_perlin_enable)\n        p = Distort3DPerlin(p);\n    return p;\n}\nfloat DistortRadiusLength(float radiusLength)\n{\n    radiusLength += multiband_inoise(radiusLength, wood_growth_perlin_bands, wood_growth_perlin_weights, wood_growth_perlin_frequencies);\n    if (radiusLength < 0.0) radiusLength = 0.0;\n    return radiusLength;\n}\nfloat ComputeEarlyWoodRatio(float radiusLength)\n{\n    float fraction = mod(radiusLength, wood_ring_thickness) / wood_ring_thickness;\n    if (fraction <= wood_ring_fraction.y)\n       return 1.0;\n    else if(fraction <= wood_ring_fraction.x)\n       return (1.0 - (fraction - wood_ring_fraction.y) / wood_fall_rise.x);\n    else if(fraction <= wood_ring_fraction.w)\n       return 0.0;\n    else\n       return ((fraction - wood_ring_fraction.w) / wood_fall_rise.y);\n}\nvec3 DistortEarlyColor(vec3 earlyColor, float radiusLength)\n{\n    float expValue = 1.0 + multiband_inoise(radiusLength,wood_earlycolor_perlin_bands,wood_earlycolor_perlin_weights,wood_earlycolor_perlin_frequencies);\n    earlyColor = pow(abs(earlyColor), vec3(expValue));\n    return earlyColor;\n}\nvec3 DistortLateColor(vec3 lateColor, float radiusLength)\n{\n    float expValue = 1.0 + multiband_inoise(radiusLength,wood_latecolor_perlin_bands,wood_latecolor_perlin_weights,wood_latecolor_perlin_frequencies);\n    lateColor = pow(abs(lateColor), vec3(expValue));\n    return lateColor;\n}\nvec3 DistortDiffuseColor(vec3 diffAlbedo, vec3 p)\n{\n    p.z *= wood_diffuse_perlin_scale_z;\n    float expValue = 1.0 + multiband_inoise(p, wood_diffuse_perlin_bands, wood_diffuse_perlin_weights, wood_diffuse_perlin_frequencies);\n    diffAlbedo = pow(abs(diffAlbedo), vec3(expValue));\n    return diffAlbedo;\n}\nfloat LayerRoughnessVar(float roughness, float earlyWoodRatio)\n{\n    return earlyWoodRatio * wood_groove_roughness + (1.0 - earlyWoodRatio) * roughness;\n}\nfloat hashword(vec2 k)\n{\n    k = mod(k, vec2(256.0)) * ONE;\n    float a = texture2D(permutationMap, vec2(k.x, 0.0)).x + k.y ;\n    a = texture2D(permutationMap, vec2(a, 0.0)).x ;\n    return a*255.0;\n}\nfloat wyvillsq(float rsq)\n{\n    if (rsq >= 1.0) return 0.0;\n    float tmp = 1.0 - rsq;\n    return tmp*tmp*tmp;\n}\nfloat Weight2DNeighborImpulses(vec3 p, float woodWeight)\n{\n    if(woodWeight <= 0.0) return 0.0;\n    float poreRadius = wood_pore_radius * woodWeight;\n    vec2 left = floor((p.xy - poreRadius) / wood_pore_cell_dim);\n    vec2 right = floor((p.xy + poreRadius) / wood_pore_cell_dim);\n    float weight = 0.0;\n    float invRsq = 1.0 / (poreRadius * poreRadius);\n    const float norm =  1.0 / 15.0;\n    for (int j = 0; j <= 4; j++)\n    {\n        if (j > int(right.y - left.y)) continue;\n        for (int i = 0; i <= 4; i++)\n        {\n            if (i > int(right.x - left.x)) continue;\n            vec2 pij = vec2(float(i) + left.x,float(j) + left.y);\n            float hRNum = hashword(pij);\n            float impPosX = mod(hRNum, 16.0) * norm;\n            float impPosY = floor(hRNum / 16.0) * norm;\n            impPosX = (pij.x + impPosX)* wood_pore_cell_dim;\n            impPosY = (pij.y + impPosY)* wood_pore_cell_dim;\n            float dsq = (p.x - impPosX) * (p.x - impPosX) + (p.y - impPosY) * (p.y - impPosY);\n            weight += wyvillsq(dsq * invRsq);\n        }\n    }\n    return weight;\n}\nfloat Weight3DRayImpulses(vec3 p)\n{\n    int segIdx = int(floor(p.z / wood_ray_seg_length_z));\n    float factor = p.z / wood_ray_seg_length_z - float(segIdx);\n    int segIdx1 = segIdx - 1;\n    if ( factor > 0.5 )\n        segIdx1 = segIdx + 1;\n    float theta = atan(p.y, p.x);\n    float sliceIdx = floor(((theta + PI) * RECIPROCAL_PI2) * wood_ray_num_slices);\n    if ( sliceIdx == wood_ray_num_slices)\n        sliceIdx-=1.0;\n    ivec2 arrSegs = ivec2(segIdx, segIdx1);\n    float weight = 0.0;\n    const float norm =  1.0 / 15.0;\n    float radialOffset = 5.0;\n    float radialLength = length(p.xy);\n    for (int seg = 0; seg < 2; seg++)\n    {\n        float hRNum = hashword(vec2(sliceIdx, GetIndexedValue(arrSegs, seg)));\n        float rn1 = mod(hRNum,16.0) * norm;\n        if (radialLength < radialOffset * rn1)\n            continue;\n        float rayTheta = rn1;\n        rayTheta = ( ( sliceIdx + rayTheta ) / wood_ray_num_slices ) * ( 2.0 * PI ) - PI;\n        float rayPosZ = (hRNum/16.0)* norm;\n        rayPosZ = ( float(GetIndexedValue(arrSegs, seg)) + rayPosZ ) * wood_ray_seg_length_z;\n        vec3 pt1 = vec3(0.0);\n        vec3 pt2 = vec3(cos(rayTheta), sin(rayTheta), 0.0);\n        vec3 p1 = p;\n        p1.z -= rayPosZ;\n        p1.z /=  wood_ray_ellipse_z2x;\n        vec3 v1 = pt2 - pt1;\n        vec3 v2 = pt1 - p1;\n        v2 = cross(v1, v2);\n        float dist = length(v2) / length(v1);\n        float invRsq = 1.0 / ( wood_ray_ellipse_radius_x * wood_ray_ellipse_radius_x);\n        weight += wyvillsq( (dist * dist) * invRsq );\n    }\n    return weight;\n}\nvec3 DarkenColorWithPores(vec3 p, vec3 diffColor, float woodWeight)\n{\n    float poresWeight = Weight2DNeighborImpulses(p, woodWeight);\n    float a = wood_pore_color_power - 1.0;\n    float b = 1.0;\n    float y = a * poresWeight + b;\n    return pow(abs(diffColor), vec3(y));\n}\nvec3 DarkenColorWithRays(vec3 p, vec3 diffColor)\n{\n    float raysWeight = Weight3DRayImpulses(p);\n    float a = wood_ray_color_power - 1.0;\n    float b = 1.0;\n    float y = a * raysWeight + b;\n    return pow(abs(diffColor), vec3(y));\n}\nfloat ComputeWoodWeight(float earlyWoodRatio)\n{\n    float woodWeight = 0.0;\n    if (wood_pore_type == 0)\n        woodWeight = 1.0;\n    else if (wood_pore_type == 1)\n        woodWeight = earlyWoodRatio;\n    else if (wood_pore_type == 2)\n        woodWeight = 1.0 - earlyWoodRatio;\n    else\n        woodWeight = -1.0;\n    return woodWeight;\n}\n#if defined( PRISMWOODBUMP )\nfloat ComputeEarlyWoodRatioAA(float radiusLength, float invUnitExt)\n{\n    float transPixels = min(wood_fall_rise.x, wood_fall_rise.y) * wood_ring_thickness * invUnitExt;\n    float samplesf = clamp(4.0 / transPixels, 1.0, 4.0);\n    int samples = int(samplesf);\n    float inverseSamples = 1.0 / float(samples);\n    vec2 rdelta = vec2(dFdx(radiusLength), dFdy(radiusLength)) * inverseSamples;\n    float earlywoodRatio = 0.0;\n    for (int i = 0; i < 4; ++i)\n    {\n        if (i >= samples) break;\n        for (int j = 0; j < 4; ++j)\n        {\n            if (j >= samples) break;\n            float r = radiusLength + dot(vec2(i, j), rdelta);\n            earlywoodRatio += ComputeEarlyWoodRatio(r);\n        }\n    }\n    return earlywoodRatio * (inverseSamples * inverseSamples);\n}\nfloat LatewoodDepthVariation(float invUnitExt)\n{\n    float transPixels = min(wood_fall_rise.x, wood_fall_rise.y) * wood_ring_thickness * invUnitExt;\n    return clamp(transPixels * 0.5, 0.0, 1.0);\n}\nfloat LatewoodHeightVariation(float earlyWoodRatio, float latewoodBumpDepth,\n                              float depthVar)\n{\n    return ( 1.0 - earlyWoodRatio ) * latewoodBumpDepth * depthVar;\n}\nfloat PoreDepthVariation(float woodWeight, float invUnitExt)\n{\n    float porePixels = woodWeight * wood_pore_radius * invUnitExt;\n    return clamp(porePixels, 0.0, 1.0);\n}\nfloat PoreHeightVariation(float earlyWoodRatio, float poresWeight, float poreDepth,\n                          float depthVar)\n{\n    return poresWeight * (-1.0 * poreDepth) * depthVar;\n}\nvoid ComputeTangents(vec3 normal, out vec3 u, out vec3 v)\n{\n    float scale = normal.z < 0.0 ? -1.0 : 1.0;\n    vec3 temp = scale * normal;\n    float e    = temp.z;\n    float h    = 1.0/(1.0 + e);\n    float hvx  = h   *  temp.y;\n    float hvxy = hvx * -temp.x;\n    u = vec3(e + hvx * temp.y, hvxy,                -temp.x);\n    v = vec3(hvxy,             e + h * temp.x * temp.x, -temp.y);\n    u *= scale;\n    v *= scale;\n}\nvec3 WoodBumpHeight(float heightLeft, float heightRight, float heightBack, float heightFront)\n{\n    const float epsilon = 0.001;\n    float heightDeltaX = heightRight - heightLeft;\n    vec3 Tu = vec3(2.0 * epsilon, 0.0, heightDeltaX);\n    float heightDeltaY = heightFront - heightBack;\n    vec3 Tv = vec3(0.0, 2.0 * epsilon, heightDeltaY);\n    return cross(Tu, Tv);\n}\nvec3 SelectNormal(vec3 N, vec3 bumpN, vec3 V)\n{\n    float bumpNdotV = dot(bumpN, V);\n    if(bumpNdotV > 0.0)\n        return bumpN;\n    else return N;\n}\nfloat MinInverseUnitExtent(vec3 p)\n{\n    return 1.0 / max(max(length(dFdx(p.xy)), length(dFdy(p.xy))), 0.000001);\n}\nfloat HeightVariation(vec3 pos)\n{\n    vec3 p = Distort(pos);\n    float radiusLength = length(p.xy);\n    if (wood_growth_perlin_enable)\n        radiusLength = DistortRadiusLength(radiusLength);\n    float invUnitExt = MinInverseUnitExtent(p);\n    float earlyWoodRatio = ComputeEarlyWoodRatioAA(radiusLength, invUnitExt);\n    float woodWeight = ComputeWoodWeight(earlyWoodRatio);\n    float poresWeight = Weight2DNeighborImpulses(p, woodWeight);\n    float depthVar = PoreDepthVariation(woodWeight, invUnitExt);\n    float poreHeightVariation = -1.0 * poresWeight * wood_pore_depth * depthVar;\n    float latewoodHeightVariation = 0.0;\n    if (wood_use_latewood_bump)\n    {\n        float latewoodDepthVar = LatewoodDepthVariation(invUnitExt);\n        latewoodHeightVariation = (1.0 - earlyWoodRatio) * wood_latewood_bump_depth * latewoodDepthVar;\n    }\n    float sumHeightVariation = poreHeightVariation + latewoodHeightVariation;\n    return sumHeightVariation;\n}\n#endif\nvec3 NoiseWood(vec3 p, inout float roughness)\n{\n    p = Distort(p);\n    float radiusLength = length(p.xy);\n    if(wood_growth_perlin_enable)\n        radiusLength = DistortRadiusLength(radiusLength);\n#if defined( PRISMWOODBUMP )\n    float invUnitExt = MinInverseUnitExtent( p );\n    float earlyWoodRatio = ComputeEarlyWoodRatioAA(radiusLength, invUnitExt);\n#else\n    float earlyWoodRatio = ComputeEarlyWoodRatio(radiusLength);\n#endif\n    vec3 earlyColor = wood_early_color;\n    if (wood_earlycolor_perlin_enable)\n        earlyColor = DistortEarlyColor(earlyColor, radiusLength);\n    vec3 lateColor;\n    if (wood_use_manual_late_color)\n        lateColor = wood_manual_late_color;\n    else\n        lateColor = pow(abs(earlyColor), vec3(wood_late_color_power));\n    if(wood_latecolor_perlin_enable)\n        lateColor = DistortLateColor(lateColor, radiusLength);\n    vec3 diffAlbedo = earlyWoodRatio * earlyColor + (1.0 - earlyWoodRatio) * lateColor;\n    if(wood_diffuse_perlin_enable)\n        diffAlbedo = DistortDiffuseColor(diffAlbedo, p);\n    if (wood_use_pores)\n    {\n        float woodWeight = ComputeWoodWeight(earlyWoodRatio);\n        diffAlbedo = DarkenColorWithPores(p, diffAlbedo, woodWeight);\n    }\n    if (wood_use_rays)\n        diffAlbedo = DarkenColorWithRays(p, diffAlbedo);\n    if(wood_use_groove_roughness)\n        roughness = LayerRoughnessVar(roughness, earlyWoodRatio);\n    return clamp(diffAlbedo, vec3(0.0), vec3(1.0));\n}\n#if defined(PRISMWOODBUMP)\nvoid getFinalWoodContext(\n    inout vec3 N, vec3 V, inout vec3 Tu, inout vec3 Tv, vec3 p,\n    vec3 geoNormal, vec3 tNormal, mat3 normalMatrix\n) {\n    vec3 offsetTuLeft = p - 0.001 * Tu;\n    vec3 offsetTuRight = p + 0.001 * Tu;\n    vec3 offsetTvLeft = p - 0.001 * Tv;\n    vec3 offsetTvRight = p + 0.001 * Tv;\n    float heightVariationTuLeft = HeightVariation(offsetTuLeft);\n    float heightVariationTuRight = HeightVariation(offsetTuRight);\n    float heightVariationTvLeft = HeightVariation(offsetTvLeft);\n    float heightVariationTvRight = HeightVariation(offsetTvRight);\n    vec3 bumpHeight = WoodBumpHeight(heightVariationTuLeft, heightVariationTuRight, heightVariationTvLeft, heightVariationTvRight);\n    vec3 newNormal = normalize(bumpHeight.x * Tu + bumpHeight.y * Tv + bumpHeight.z * vtNormal);\n    vec3 newNormalView = normalize(vNormalMatrix * newNormal);\n    vec3 selectedNormal = SelectNormal(geoNormal, newNormalView, V);\n    ComputeTangents(selectedNormal, Tu, Tv);\n    Tu = normalize(Tu);\n    Tv = normalize(Tv);\n    N = faceforward(selectedNormal, -V, selectedNormal);\n}\n#endif\n#endif\n"
}, function (e, t) {
  e.exports = "\nvec3 TransmitAdjust(vec3 transmission, vec3 f0) \n{ \n   vec3 limit = max(1.0 - f0, 0.00001); \n   return clamp(transmission, vec3(0.0, 0.0, 0.0), limit) / limit; \n} \nfloat ColorToIlluminance(in vec3 color) \n{ \n   const vec3 rgb2grey = vec3(0.299, 0.587, 0.114); \n   float illuminance = dot(rgb2grey, color); \n   return illuminance; \n} \nvoid applyPrismGlazingOpacity(\n    inout vec4 color,\n    vec3 transmissionF,\n    float transmissionAlpha,\n    float NdotV,\n    float glazingIlluminace) \n{\n    const float third = 1.0/3.0; \n    float transSurface = exp(-(transmissionAlpha + (transmissionAlpha < 0.0025 ? 0.0 : 0.25)) * NdotV * PI); \n    float opacity = 1.0- dot((1.0 - transmissionF), vec3(third,third,third)) * transSurface * glazingIlluminace; \n    opacity = clamp(opacity, 0.01, 0.99);\n    color.a *= opacity;\n} \n"
}, function (e, t) {
  e.exports = "void applyPrismTransparency(\n    inout vec4 color,\n    vec3 transparentColor,\n    float transparentIor\n) {\n    float fsLevel = max(max(color.r, color.g), color.b);\n    color = vec4(color.rgb/fsLevel, fsLevel);\n    float transLevel = min(min(transparentColor.r, transparentColor.g), transparentColor.b);\n    transLevel = min( (1.0 - surface_roughness), transLevel );\n    float transAlpha = (1.0 - transLevel) * 0.4 + surface_roughness * 0.55;\n    vec3 tr_g_color = sqrt(transparentColor);\n    vec4 transColor = vec4(0.5 * vec3(tr_g_color), transAlpha);\n    float strength = 1.0 - (1.0 - fsLevel) * (1.0 - fsLevel);\n    color = mix(transColor, color, strength);\n    color.a = max(color.a, 0.05);\n    if (transparentIor == 1.0 && tr_g_color == vec3(1.0)) {\n        color.a = 0.0;\n    }\n}"
}, function (e, t) {
  e.exports = "#if defined(USE_SURFACE_NORMAL_MAP) || defined( USE_LAYERED_NORMAL_MAP ) || defined( USE_TILING_NORMAL )\nvoid heightMapTransform(\n    sampler2D bumpTexture,\n    vec2 uv,\n    mat3 transform,\n    vec2 bumpScale,\n    inout vec3 T,\n    inout vec3 B,\n    inout vec3 N\n) {\n    vec2 st = (transform * vec3(uv, 1.0)).xy;\n    mat3 mtxTangent = mat3(T, B, N);\n    T = normalize(mtxTangent * (transform * vec3(1.0, 0.0, 0.0)));\n    B = normalize(mtxTangent * (transform * vec3(0.0, 1.0, 0.0)));\n    const float oneThird = 1.0 / 3.0;\n    vec3 avg = vec3(oneThird, oneThird, oneThird);\n    vec2 offset = fwidth(st);\n    float h0 = dot(texture2D(bumpTexture, st).xyz, avg);\n    float hx = dot(texture2D(bumpTexture, st + vec2(offset.x, 0.0)).xyz, avg);\n    float hy = dot(texture2D(bumpTexture, st + vec2(0.0, offset.y)).xyz, avg);\n    vec2 diff = vec2(h0 - hx, h0 - hy) / offset;\n    N = normalize(\n        N + (\n            diff.x * T * bumpScale.x +\n            diff.y * B * bumpScale.y\n        )\n    );\n}\nvoid normalMapTransform(\n    sampler2D bumpTexture,\n    vec2 uv,\n    mat3 transform,\n    vec2 bumpScale,\n    inout vec3 T,\n    inout vec3 B,\n    inout vec3 N\n) {\n    vec2 st = (transform * vec3(uv, 1.0)).xy;\n    vec3 mapN =  2.0 * texture2D(bumpTexture, st).xyz - 1.0;\n    mapN.xy *= bumpScale.x;\n    mapN.z *= bumpScale.y;\n    vec3 v = vec3(mapN.y, -mapN.x, 0.0);\n    float c = -mapN.z;\n    mat3 skewV = mat3(\n        0.0, v.z, -v.y,\n        -v.z, 0.0, v.x,\n        v.y, -v.x, 0.0\n    );\n    mat3 rot = mat3(1.0) + skewV + skewV*skewV * 1.0/(1.0-c);\n    N *= rot;\n    T *= rot;\n    B *= rot;\n}\n#endif\n"
}, function (e, t) {
  e.exports = "uniform float point_size;"
}, function (e, t) {
  e.exports = "gl_PointSize = point_size;"
}, function (e, t) {
  e.exports = "\n#ifdef WIDE_LINES\nattribute vec3 prev;\nattribute vec3 next;\nattribute float side;\nuniform vec2 view_size;\nvec2 to2d(vec4 i) {\n  return i.xy / i.w;\n}\n#endif\n"
}, function (e, t) {
  e.exports = "\n#ifdef WIDE_LINES\nvec4 mvpPosition = projectionMatrix * mvPosition; \nmat3 vectorMatrix = mat3(modelViewMatrix);\nvec2 _pos = to2d(mvpPosition) * view_size;\nvec2 _prev = to2d(projectionMatrix * vec4(mvPosition.xyz + vectorMatrix * (prev * 0.01), 1.0)) * view_size;\nvec2 _next = to2d(projectionMatrix * vec4(mvPosition.xyz - vectorMatrix * (next * 0.01), 1.0)) * view_size;\nvec2 dir1 = _pos - _next;\nvec2 dir2 = _prev - _pos;\ndir2 = (length(dir2) > 0.0000001) ? normalize(dir2) : vec2(0.0, 0.0);\ndir1 = (length(dir1) > 0.0000001) ? normalize(dir1) : dir2;\nvec2 dir_sharp = normalize(dir1 + dir2);\nvec2 dir = normalize(dir1 + dir_sharp);\nvec2 offset = vec2(-dir.y, dir.x);\nfloat len = 1.0 / cross(vec3(offset, 0), vec3(dir1, 0)).z;\noffset *= len;\noffset /= view_size;\noffset *= side;\noffset *= mvpPosition.w;\nmvpPosition.xy += offset;\ngl_Position = mvpPosition;\n#endif\n"
}, function (e, t) {
  e.exports = "vec3 rgb2hsv(vec3 color)\n{\n    float delta;\n    float colorMax, colorMin;\n    float h,s,v;\n    vec3 hsv;\n    colorMax = max(color.r,color.g);\n    colorMax = max(colorMax,color.b);\n    colorMin = min(color.r,color.g);\n    colorMin = min(colorMin,color.b);\n    v = colorMax;\n    if(colorMax != 0.0)\n    {\n        s = (colorMax - colorMin)/colorMax;\n    }\n    else\n    {\n        s = 0.0;\n    }\n    if(s != 0.0)\n    {\n        delta = colorMax-colorMin;\n        if (color.r == colorMax)\n        {\n            h = (color.g-color.b)/delta;\n        }\n        else if (color.g == colorMax)\n        {\n            h = 2.0 + (color.b-color.r) / delta;\n        }\n        else\n        {\n            h = 4.0 + (color.r-color.g)/delta;\n        }\n        h /= 6.0;\n        if( h < 0.0)\n        {\n            h +=1.0;\n        }\n    }\n    else\n    {\n        h = 0.0;\n    }\n    hsv = vec3(h,s,v);\n    return hsv;\n}\nvec3 hsv2rgb(vec3 hsv)\n{\n    vec3 color;\n    float f,p,q,t;\n    float h,s,v;\n    float i,hi;\n    {\n        h = hsv.x*6.0;\n        s = hsv.y;\n        v = hsv.z;\n        i = floor(h);\n        f = h-i;\n        p = v * (1.0 - s);\n        q = v * (1.0 - (s * f));\n        t = v * (1.0 - (s * (1.0 - f)));\n        float r,g,b;\n        if (i == 0.0)\n        {\n            r = v;\n            g = t;\n            b = p;\n        }\n        else if (i == 1.0)\n        {\n            r = q;\n            g = v;\n            b = p;\n        }\n        else if (i == 2.0)\n        {\n            r = p;\n            g = v;\n            b = t;\n        }\n        else if (i == 3.0)\n        {\n            r = p;\n            g = q;\n            b = v;\n        }\n        else if (i == 4.0)\n        {\n            r = t;\n            g = p;\n            b = v;\n        }\n        else\n        {\n            r = v;\n            g = p;\n            b = q;\n        }\n        color = vec3(r,g,b);\n    }\n    return color;\n}"
}, function (e, t) {
  e.exports = "varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\nvarying vec3 vNormal;\n#endif\n#if defined( USE_MAP ) || defined( USE_SPECULARMAP )\nvarying vec2 vUv;\nuniform mat3 texMatrix;\n#endif\n#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\nvarying vec2 vUvBump;\nuniform mat3 texMatrixBump;\n#endif\n#if defined( USE_ALPHAMAP )\nvarying vec2 vUvAlpha;\nuniform mat3 texMatrixAlpha;\n#endif\n#if defined( USE_ENVMAP )\n#if ! defined( USE_BUMPMAP ) && ! defined( USE_NORMALMAP )\nuniform float refractionRatio;\n#endif\n#endif\n#if MAX_SPOT_LIGHTS > 0 || NUM_CUTPLANES > 0\nvarying vec3 vWorldPosition;\n#endif\n#ifdef USE_COLOR\nvarying vec3 vColor;\n#endif\n#ifdef USE_LOGDEPTHBUF\n#ifdef USE_LOGDEPTHBUF_EXT\nvarying float vFragDepth;\n#endif\nuniform float logDepthBufFC;\n#endif\n#ifdef MRT_NORMALS\nvarying float depth;\n#endif\n#include<pack_normals>\n#include<instancing_decl_vert>\n#include<id_decl_vert>\n#include<wide_lines_decl>\n#include<shadowmap_decl_vert>\nvoid main() {\n#if defined( USE_MAP ) || defined( USE_SPECULARMAP )\n    vUv = (texMatrix * vec3(uv, 1.0)).xy;\n#endif\n#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n    vUvBump = (texMatrixBump * vec3(uv, 1.0)).xy;\n#endif\n#if defined( USE_ALPHAMAP )\n    vUvAlpha = (texMatrixAlpha * vec3(uv, 1.0)).xy;\n#endif\n#ifdef USE_COLOR\n#ifdef GAMMA_INPUT\n    vColor = color * color;\n#else\n    vColor = color;\n#endif\n#endif\n#ifdef UNPACK_NORMALS\n    vec3 objectNormal = decodeNormal(normal);\n#else\n    vec3 objectNormal = normal;\n#endif\n#ifdef FLIP_SIDED\n    objectNormal = -objectNormal;\n#endif\n    objectNormal = getInstanceNormal(objectNormal);\n    vec3 instPos = getInstancePos(position);\n    vec3 transformedNormal = normalMatrix * objectNormal;\n#ifndef FLAT_SHADED\n    vNormal = normalize( transformedNormal );\n#endif\n    vec4 mvPosition = modelViewMatrix * vec4( instPos, 1.0 );\n    gl_Position = projectionMatrix * mvPosition;\n#include<wide_lines_vert>\n    vViewPosition = -mvPosition.xyz;\n#if MAX_SPOT_LIGHTS > 0 || NUM_CUTPLANES > 0\n    vec4 worldPosition = modelMatrix * vec4( instPos, 1.0 );\n    vWorldPosition = worldPosition.xyz;\n#endif\n#ifdef USE_LOGDEPTHBUF\n    if (projectionMatrix[3][3] == 0.0) {\n        gl_Position.z = log2(max(1.0e-6, gl_Position.w + 1.0)) * logDepthBufFC;\n#ifdef USE_LOGDEPTHBUF_EXT\n        vFragDepth = 1.0 + gl_Position.w;\n#else\n        gl_Position.z = (gl_Position.z - 1.0) * gl_Position.w;\n#endif\n    } else {\n#ifdef USE_LOGDEPTHBUF_EXT\n        vFragDepth = 1.0 + vViewPosition.z;\n#else\n#endif\n    }\n#endif\n#ifdef MRT_NORMALS\n    depth = mvPosition.z;\n#endif\n#include<shadowmap_vert>\n#include<id_vert>\n}\n"
}, function (e, t) {
  e.exports = "uniform vec3 diffuse;\r\nuniform float opacity;\r\n\r\nuniform vec3 emissive;\r\nuniform vec3 specular;\r\nuniform float shininess;\r\n\r\n#include<env_sample>\r\n\r\n#ifdef USE_COLOR\r\nvarying vec3 vColor;\r\n#endif\r\n\r\n#ifdef GAMMA_INPUT\r\nvec3 InputToLinear(vec3 c) {\r\n    return c * c;\r\n}\r\nfloat InputToLinear(float c) {\r\n    return c * c;\r\n}\r\n#else\r\nvec3 InputToLinear(vec3 c) {\r\n    return c;\r\n}\r\nfloat InputToLinear(float c) {\r\n    return c;\r\n}\r\n#endif\r\n\r\n#if defined( USE_MAP ) || defined( USE_SPECULARMAP )\r\nvarying vec2 vUv;\r\n#endif\r\n\r\n#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\r\nvarying vec2 vUvBump;\r\n#endif\r\n\r\n#if defined( USE_ALPHAMAP )\r\nvarying vec2 vUvAlpha;\r\n#endif\r\n\r\n#ifdef USE_MAP\r\nuniform sampler2D map;\r\n#endif\r\n\r\n#if TONEMAP_OUTPUT > 0\r\nuniform float exposureBias;\r\n#include<tonemap>\r\n#endif\r\n\r\n#if defined(IRR_RGBM) || defined(ENV_RGBM) || defined(ENV_GAMMA) || defined(IRR_GAMMA)\r\nuniform float envMapExposure;\r\n#endif\r\n\r\n#ifdef USE_FOG\r\nuniform vec3 fogColor;\r\nuniform float fogNear;\r\nuniform float fogFar;\r\n#endif\r\n#include<id_decl_frag>\r\n#include<theming_decl_frag>\r\n#include<shadowmap_decl_frag>\r\n\r\n#ifdef USE_ENVMAP\r\n\r\nuniform float reflMipIndex;\r\n\r\nuniform float reflectivity;\r\nuniform samplerCube envMap;\r\n\r\n#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\r\n\r\nuniform float refractionRatio;\r\n\r\n#endif\r\n\r\nvec3 sampleReflection(vec3 dir, float mipIndex) {\r\n\r\n    vec3 adjDir = adjustLookupVector(dir);\r\n\r\n#ifdef ENV_GAMMA\r\n\r\n#ifdef HAVE_TEXTURE_LOD\r\n    vec4 envTexColor = textureCubeLodEXT( envMap, adjDir, mipIndex );\r\n#else\r\n\r\n\r\n    vec4 envTexColor = textureCube( envMap, adjDir, mipIndex );\r\n#endif\r\n\r\n    return GammaDecode(envTexColor, envMapExposure);\r\n\r\n#elif defined(ENV_RGBM)\r\n\r\n#ifdef HAVE_TEXTURE_LOD\r\n    vec4 envTexColor = textureCubeLodEXT( envMap, adjDir, mipIndex );\r\n#else\r\n\r\n\r\n    vec4 envTexColor = textureCube( envMap, adjDir, mipIndex );\r\n#endif\r\n\r\n    return RGBMDecode(envTexColor, envMapExposure);\r\n\r\n#else\r\n\r\n\r\n\r\n    vec4 envTexColor = textureCube( envMap, adjDir );\r\n    vec3 cubeColor = envTexColor.xyz;\r\n\r\n#ifdef GAMMA_INPUT\r\n    cubeColor *= cubeColor;\r\n#endif\r\n\r\n    return cubeColor;\r\n\r\n#endif\r\n\r\n}\r\n\r\n#endif\r\n\r\n\r\nuniform vec3 ambientLightColor;\r\n\r\n#if MAX_DIR_LIGHTS > 0\r\n\r\nuniform vec3 directionalLightColor[ MAX_DIR_LIGHTS ];\r\nuniform vec3 directionalLightDirection[ MAX_DIR_LIGHTS ];\r\n\r\n#endif\r\n\r\n#if MAX_POINT_LIGHTS > 0\r\n\r\nuniform vec3 pointLightColor[ MAX_POINT_LIGHTS ];\r\n\r\nuniform vec3 pointLightPosition[ MAX_POINT_LIGHTS ];\r\nuniform float pointLightDistance[ MAX_POINT_LIGHTS ];\r\n\r\n#endif\r\n\r\n#if MAX_SPOT_LIGHTS > 0\r\n\r\nuniform vec3 spotLightColor[ MAX_SPOT_LIGHTS ];\r\nuniform vec3 spotLightPosition[ MAX_SPOT_LIGHTS ];\r\nuniform vec3 spotLightDirection[ MAX_SPOT_LIGHTS ];\r\nuniform float spotLightAngleCos[ MAX_SPOT_LIGHTS ];\r\nuniform float spotLightExponent[ MAX_SPOT_LIGHTS ];\r\n\r\nuniform float spotLightDistance[ MAX_SPOT_LIGHTS ];\r\n\r\n#endif\r\n\r\n#ifdef USE_IRRADIANCEMAP\r\nuniform samplerCube irradianceMap;\r\n#endif\r\n\r\n#if MAX_SPOT_LIGHTS > 0 || NUM_CUTPLANES > 0\r\nvarying highp vec3 vWorldPosition;\r\n#endif\r\n\r\nvarying highp vec3 vViewPosition;\r\n#ifndef FLAT_SHADED\r\nvarying highp vec3 vNormal;\r\n#endif\r\n\r\n#ifdef USE_BUMPMAP\r\n\r\nuniform sampler2D bumpMap;\r\nuniform float bumpScale;\r\n\r\n\r\n\r\n\r\n\r\n\r\nvec2 dHdxy_fwd() {\r\n\r\n    vec2 dSTdx = dFdx( vUvBump );\r\n    vec2 dSTdy = dFdy( vUvBump );\r\n\r\n    float Hll = bumpScale * GET_BUMPMAP(vUvBump).x;\r\n    float dBx = bumpScale * GET_BUMPMAP(vUvBump + dSTdx).x - Hll;\r\n    float dBy = bumpScale * GET_BUMPMAP(vUvBump + dSTdy).x - Hll;\r\n\r\n    return vec2( dBx, dBy );\r\n\r\n}\r\n\r\nvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\r\n\r\n    vec3 vSigmaX = dFdx( surf_pos );\r\n    vec3 vSigmaY = dFdy( surf_pos );\r\n    vec3 vN = surf_norm;\r\n\r\n    vec3 R1 = cross( vSigmaY, vN );\r\n    vec3 R2 = cross( vN, vSigmaX );\r\n\r\n    float fDet = dot( vSigmaX, R1 );\r\n\r\n    vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\r\n    return normalize( abs( fDet ) * surf_norm - vGrad );\r\n\r\n}\r\n\r\n#endif\r\n\r\n\r\n#ifdef USE_NORMALMAP\r\n\r\nuniform sampler2D normalMap;\r\nuniform vec2 normalScale;\r\n\r\n\r\n\r\n\r\nvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\r\n\r\n    vec3 q0 = dFdx( eye_pos.xyz );\r\n    vec3 q1 = dFdy( eye_pos.xyz );\r\n    vec2 st0 = dFdx( vUvBump.st );\r\n    vec2 st1 = dFdy( vUvBump.st );\r\n\r\n    vec3 S = normalize(  q0 * st1.t - q1 * st0.t );\r\n    vec3 T = normalize( -q0 * st1.s + q1 * st0.s );\r\n    vec3 N = normalize( surf_norm );\r\n\r\n    vec3 mapN = GET_NORMALMAP(vUvBump).xyz * 2.0 - 1.0;\r\n    mapN.xy = normalScale * mapN.xy;\r\n    mat3 tsn = mat3( S, T, N );\r\n    return normalize( tsn * mapN );\r\n\r\n}\r\n\r\n#endif\r\n\r\n\r\n#ifdef USE_SPECULARMAP\r\nuniform sampler2D specularMap;\r\n#endif\r\n\r\n#ifdef USE_ALPHAMAP\r\nuniform sampler2D alphaMap;\r\n#endif\r\n\r\n#include<hatch_pattern>\r\n\r\n#ifdef USE_LOGDEPTHBUF\r\nuniform float logDepthBufFC;\r\n#ifdef USE_LOGDEPTHBUF_EXT\r\n#extension GL_EXT_frag_depth : enable\r\nvarying highp float vFragDepth;\r\n#endif\r\n#endif\r\n\r\nvec3 Schlick_v3(vec3 v, float cosHV) {\r\n    float facing = max(1.0 - cosHV, 0.0);\r\n    return v + (1.0 - v) * pow(facing, 5.0);\r\n}\r\n\r\nfloat Schlick_f(float v, float cosHV) {\r\n    float facing = max(1.0 - cosHV, 0.0);\r\n    return v + ( 1.0 - v ) * pow(facing, 5.0);\r\n}\r\n\r\n#include<cutplanes>\r\n\r\nvoid main() {\r\n\r\n#if NUM_CUTPLANES > 0\r\n    checkCutPlanes(vWorldPosition);\r\n#endif\r\n\r\n    gl_FragColor = vec4( vec3 ( 1.0 ), opacity );\r\n\r\n#ifdef USE_MAP\r\n    vec4 texelColor = GET_MAP(vUv);\r\n#ifdef MAP_INVERT\r\n    texelColor.xyz = 1.0-texelColor.xyz;\r\n#endif\r\n#ifdef GAMMA_INPUT\r\n    texelColor.xyz *= texelColor.xyz;\r\n#endif\r\n    gl_FragColor = gl_FragColor * texelColor;\r\n#endif\r\n\r\n#ifdef USE_ALPHAMAP\r\n    vec4 texelAlpha = GET_ALPHAMAP(vUvAlpha);\r\n    gl_FragColor.a *= texelAlpha.r;\r\n#endif\r\n\r\n#ifdef ALPHATEST\r\n    if ( gl_FragColor.a < ALPHATEST ) discard;\r\n#endif\r\n\r\n    float specularStrength;\r\n\r\n#ifdef USE_SPECULARMAP\r\n    vec4 texelSpecular = GET_SPECULARMAP(vUv);\r\n    specularStrength = texelSpecular.r;\r\n#else\r\n    specularStrength = 1.0;\r\n#endif\r\n\r\n#ifndef FLAT_SHADED\r\n    vec3 normal = normalize( vNormal );\r\n#ifdef DOUBLE_SIDED\r\n\r\n#endif\r\n#else\r\n    vec3 fdx = dFdx( vViewPosition );\r\n    vec3 fdy = dFdy( vViewPosition );\r\n    vec3 normal = normalize( cross( fdx, fdy ) );\r\n#endif\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n    vec3 viewDirection;\r\n    if (projectionMatrix[3][3] == 0.0) {\r\n        viewDirection = normalize( vViewPosition );\r\n    } else {\r\n        viewDirection = vec3(0.0, 0.0, 1.0);\r\n    }\r\n    normal = faceforward(normal, -viewDirection, normal);\r\n\r\n    vec3 geomNormal = normal;\r\n\r\n#ifdef USE_NORMALMAP\r\n    normal = perturbNormal2Arb( -vViewPosition, normal );\r\n#elif defined( USE_BUMPMAP )\r\n    normal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\r\n#endif\r\n\r\n    vec3 totalDiffuse = vec3( 0.0 );\r\n    vec3 totalSpecular = vec3( 0.0 );\r\n\r\n\r\n\r\n    float shininessB = shininess * 4.0;\r\n\r\n#if MAX_POINT_LIGHTS > 0\r\n\r\n    vec3 pointDiffuse  = vec3( 0.0 );\r\n    vec3 pointSpecular = vec3( 0.0 );\r\n\r\n    for ( int i = 0; i < MAX_POINT_LIGHTS; i ++ ) {\r\n\r\n        vec4 lPosition = viewMatrix * vec4( pointLightPosition[ i ], 1.0 );\r\n        vec3 lVector = lPosition.xyz + vViewPosition.xyz;\r\n\r\n        float lDistance = 1.0;\r\n        if ( pointLightDistance[ i ] > 0.0 )\r\n            lDistance = 1.0 - min( ( length( lVector ) / pointLightDistance[ i ] ), 1.0 );\r\n\r\n        lVector = normalize( lVector );\r\n\r\n\r\n\r\n        float dotProduct = dot( normal, lVector );\r\n\r\n        float pointDiffuseWeight = max( dotProduct, 0.0 );\r\n\r\n\r\n        pointDiffuse  += InputToLinear(diffuse) * InputToLinear(pointLightColor[ i ]) * pointDiffuseWeight * lDistance;\r\n\r\n\r\n\r\n        vec3 pointHalfVector = normalize( lVector + viewDirection );\r\n        float pointDotNormalHalf = max( dot( normal, pointHalfVector ), 0.0 );\r\n\r\n        float pointSpecularWeight = specularStrength * max( pow( pointDotNormalHalf, shininessB ), 0.0 );\r\n        float specularNormalization = shininessB * 0.125 + 0.25;\r\n        vec3 schlick = Schlick_v3(InputToLinear(specular), dot( lVector, pointHalfVector ) );\r\n        pointSpecular += schlick * InputToLinear(pointLightColor[ i ]) * pointSpecularWeight * pointDiffuseWeight * lDistance * specularNormalization ;\r\n\r\n    }\r\n\r\n    totalDiffuse += pointDiffuse;\r\n    totalSpecular += pointSpecular;\r\n\r\n#endif\r\n\r\n#if MAX_SPOT_LIGHTS > 0\r\n\r\n    vec3 spotDiffuse  = vec3( 0.0 );\r\n    vec3 spotSpecular = vec3( 0.0 );\r\n\r\n    for ( int i = 0; i < MAX_SPOT_LIGHTS; i ++ ) {\r\n\r\n        vec4 lPosition = viewMatrix * vec4( spotLightPosition[ i ], 1.0 );\r\n        vec3 lVector = lPosition.xyz + vViewPosition.xyz;\r\n\r\n        float lDistance = 1.0;\r\n        if ( spotLightDistance[ i ] > 0.0 )\r\n            lDistance = 1.0 - min( ( length( lVector ) / spotLightDistance[ i ] ), 1.0 );\r\n\r\n        lVector = normalize( lVector );\r\n\r\n        float spotEffect = dot( spotLightDirection[ i ], normalize( spotLightPosition[ i ] - vWorldPosition ) );\r\n\r\n        if ( spotEffect > spotLightAngleCos[ i ] ) {\r\n\r\n            spotEffect = max( pow( spotEffect, spotLightExponent[ i ] ), 0.0 );\r\n\r\n\r\n\r\n            float dotProduct = dot( normal, lVector );\r\n\r\n            float spotDiffuseWeight = max( dotProduct, 0.0 );\r\n\r\n            spotDiffuse += InputToLinear(diffuse) * InputToLinear(spotLightColor[ i ]) * spotDiffuseWeight * lDistance * spotEffect;\r\n\r\n\r\n\r\n            vec3 spotHalfVector = normalize( lVector + viewDirection );\r\n            float spotDotNormalHalf = max( dot( normal, spotHalfVector ), 0.0 );\r\n            float spotSpecularWeight = specularStrength * max( pow( spotDotNormalHalf, shininessB ), 0.0 );\r\n\r\n            float specularNormalization = shininessB * 0.125 + 0.25;\r\n            vec3 schlick = Schlick_v3(InputToLinear(specular), dot( lVector, spotHalfVector ) );\r\n            spotSpecular += schlick * InputToLinear(spotLightColor[ i ]) * spotSpecularWeight * spotDiffuseWeight * lDistance * specularNormalization * spotEffect;\r\n        }\r\n\r\n    }\r\n\r\n    totalDiffuse += spotDiffuse;\r\n    totalSpecular += spotSpecular;\r\n\r\n#endif\r\n\r\n#if MAX_DIR_LIGHTS > 0\r\n\r\n    vec3 dirDiffuse  = vec3( 0.0 );\r\n    vec3 dirSpecular = vec3( 0.0 );\r\n\r\n    for( int i = 0; i < MAX_DIR_LIGHTS; i ++ ) {\r\n\r\n        vec4 lDirection = viewMatrix * vec4( directionalLightDirection[ i ], 0.0 );\r\n        vec3 dirVector = normalize( lDirection.xyz );\r\n\r\n\r\n\r\n        float dotProduct = dot( normal, dirVector );\r\n\r\n        float dirDiffuseWeight = max( dotProduct, 0.0 );\r\n\r\n        dirDiffuse  += InputToLinear(diffuse) * InputToLinear(directionalLightColor[ i ]) * dirDiffuseWeight;\r\n\r\n\r\n\r\n        vec3 dirHalfVector = normalize( dirVector + viewDirection );\r\n        float dirDotNormalHalf = max( dot( normal, dirHalfVector ), 0.0 );\r\n        float dirSpecularWeight = specularStrength * max( pow( dirDotNormalHalf, shininessB ), 0.0 );\r\n\r\n        float specularNormalization = shininessB * 0.125 + 0.25;\r\n        vec3 schlick = Schlick_v3(InputToLinear(specular), dot( dirVector, dirHalfVector ));\r\n\r\n        dirSpecular += schlick * InputToLinear(directionalLightColor[ i ]) * dirSpecularWeight * dirDiffuseWeight * specularNormalization;\r\n\r\n    }\r\n\r\n    totalDiffuse += dirDiffuse;\r\n    totalSpecular += dirSpecular;\r\n\r\n#endif\r\n\r\n\r\n\r\n#ifdef USE_IRRADIANCEMAP\r\n    vec3 worldNormal = mat3(viewMatrixInverse) * normal;\r\n    vec3 indirectDiffuse = sampleIrradianceMap(worldNormal, irradianceMap, envMapExposure);\r\n\r\n    indirectDiffuse = applyEnvShadow(indirectDiffuse, worldNormal);\r\n\r\n    totalDiffuse += InputToLinear(diffuse) * indirectDiffuse;\r\n#endif\r\n\r\n\r\n#ifdef METAL\r\n    gl_FragColor.xyz = gl_FragColor.xyz * ( InputToLinear(emissive) + totalDiffuse + ambientLightColor * InputToLinear(diffuse) + totalSpecular );\r\n#else\r\n    gl_FragColor.xyz = gl_FragColor.xyz * ( InputToLinear(emissive) + totalDiffuse + ambientLightColor * InputToLinear(diffuse) ) + totalSpecular;\r\n#endif\r\n\r\n\r\n\r\n#ifdef USE_COLOR\r\n    gl_FragColor = gl_FragColor * vec4( vColor, 1.0 );\r\n#endif\r\n\r\n\r\n#if defined(USE_ENVMAP)\r\n\r\n    vec3 reflectVec;\r\n\r\n#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\r\n\r\n#ifdef ENVMAP_MODE_REFLECTION\r\n    reflectVec = reflect( -viewDirection, normal );\r\n#else \r\n    reflectVec = refract( -viewDirection, normal, refractionRatio );\r\n#endif\r\n\r\n#else\r\n\r\n    reflectVec = reflect( -viewDirection, normal );\r\n\r\n#endif\r\n\r\n    reflectVec = mat3(viewMatrixInverse) * reflectVec;\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n    float reflectScale = 1.0;\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n    vec3 cubeColor = sampleReflection(reflectVec, reflMipIndex);\r\n\r\n    cubeColor *= reflectScale;\r\n\r\n    float facing = dot( viewDirection, normal );\r\n\r\n\r\n\r\n\r\n\r\n    if (facing < -1e-2)\r\n        facing = 1.0;\r\n    else\r\n        facing = max(1e-6, facing);\r\n\r\n#ifdef USE_BUMPMAP\r\n\r\n\r\n\r\n    facing = min(1.0, facing + bumpScale * 7.0);\r\n\r\n#endif\r\n\r\n    vec3 schlickRefl;\r\n\r\n#ifdef METAL\r\n\r\n\r\n    schlickRefl = InputToLinear(specular);\r\n\r\n#else\r\n\r\n\r\n    schlickRefl = Schlick_v3(InputToLinear(specular), facing);\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n    gl_FragColor.a = mix(gl_FragColor.a, Schlick_f(gl_FragColor.a, facing), reflectivity);\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n    float invSchlick = pow(1.0 - facing * 0.5, 5.0);\r\n\r\n\r\n    float norm_factor = (28.0 / 23.0) * (1.0 - invSchlick) * (1.0 - invSchlick);\r\n\r\n    gl_FragColor.xyz *= norm_factor * (1.0 - InputToLinear(specular));\r\n\r\n#endif\r\n\r\n\r\n    gl_FragColor.xyz += cubeColor.xyz * specularStrength * schlickRefl.xyz;\r\n\r\n#ifdef CLEARCOAT\r\n\r\n    vec3 reflectVecClearcoat = reflect( -viewDirection, geomNormal );\r\n    reflectVecClearcoat = mat3(viewMatrixInverse) * reflectVecClearcoat;\r\n\r\n    vec3 cubeColorClearcoat = sampleReflection(reflectVecClearcoat, 0.0);\r\n\r\n\r\n    float schlickClearcoat = Schlick_f(InputToLinear(reflectivity), facing);\r\n\r\n\r\n\r\n    gl_FragColor.xyz = mix(gl_FragColor.xyz, cubeColorClearcoat * schlickClearcoat, 0.5);\r\n\r\n#endif\r\n\r\n\r\n\r\n\r\n#endif\r\n\r\n#if TONEMAP_OUTPUT == 1\r\n    gl_FragColor.xyz = toneMapCanonOGS_WithGamma_WithColorPerserving(exposureBias * gl_FragColor.xyz);\r\n#elif TONEMAP_OUTPUT == 2\r\n    gl_FragColor.xyz = toneMapCanonFilmic_WithGamma( exposureBias * gl_FragColor.xyz );\r\n#endif\r\n\r\n\r\n\r\n#ifdef USE_FOG\r\n    float depth = gl_FragCoord.z / gl_FragCoord.w;\r\n    float fogFactor = smoothstep( fogNear, fogFar, depth );\r\n    gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );\r\n#endif\r\n#include<theming_frag>\r\n#include<final_frag>\r\n\r\n}\r\n"
}, function (e, t) {
  e.exports = "#include<id_decl_vert>\n#include<decl_point_size>\n#include<common>\n#include<map_pars_vertex>\n#include<lightmap_pars_vertex>\n#include<envmap_pars_vertex>\n#include<color_pars_vertex>\n#include<logdepthbuf_pars_vertex>\n#include<wide_lines_decl>\n#include<pack_normals>\n#ifdef USE_INSTANCING\n    #include<instancing_decl_vert>\n#endif\n#if NUM_CUTPLANES > 0\nvarying vec3 vWorldPosition;\n#endif\nvoid main() {\n#ifdef USE_INSTANCING\n    vec3 instancePosition = getInstancePos(position);\n    #define position instancePosition\n#endif\n#if defined(USE_ENVMAP) && (defined(UNPACK_NORMALS) || defined(USE_INSTANCE))\n    vec3 correctNormal;\n    #ifdef UNPACK_NORMALS\n        correctNormal = decodeNormal(normal);\n    #else\n        correctNormal = normal;\n    #endif\n    #ifdef USE_INSTANCING\n        correctNormal = getInstanceNormal(correctNormal);\n    #endif\n    #define normal correctNormal\n#endif\n#include<map_vertex>\n#include<lightmap_vertex>\n#include<color_vertex>\n#ifdef USE_ENVMAP\n#include<defaultnormal_vertex>\n#endif\n#include<default_vertex>\n#include<wide_lines_vert>\n#include<logdepthbuf_vertex>\n#include<worldpos_vertex>\n#if NUM_CUTPLANES > 0\n    vec4 _worldPosition = modelMatrix * vec4( position, 1.0 );\n    vWorldPosition = _worldPosition.xyz;\n#endif\n#include<envmap_vertex>\n#include<id_vert>\n#include<point_size>\n}\n"
}, function (e, t) {
  e.exports = "uniform vec3 diffuse;\nuniform float opacity;\n#include<common>\n#include<color_pars_fragment>\n#include<map_pars_fragment>\n#include<alphamap_pars_fragment>\n#include<lightmap_pars_fragment>\n#include<envmap_pars_fragment>\n#include<specularmap_pars_fragment>\n#include<logdepthbuf_pars_fragment>\n#if NUM_CUTPLANES > 0\nvarying highp vec3 vWorldPosition;\n#endif\n#include<cutplanes>\n#include<id_decl_frag>\n#include<theming_decl_frag>\nvoid main() {\n#if NUM_CUTPLANES > 0\n    checkCutPlanes(vWorldPosition);\n#endif\n    vec3 outgoingLight = vec3( 0.0 );\n    vec4 diffuseColor = vec4( diffuse, opacity );\n#include<logdepthbuf_fragment>\n#include<map_fragment>\n#include<color_fragment>\n#include<alphamap_fragment>\n#include<alphatest_fragment>\n#include<specularmap_fragment>\n    outgoingLight = diffuseColor.rgb;\n#include<lightmap_fragment>\n#include<envmap_fragment>\n#include<linear_to_gamma_fragment>\n    gl_FragColor = vec4( outgoingLight, diffuseColor.a );\n    vec3 geomNormal = vec3(0.0,0.0,0.0);\n    float depth = 0.0;\n#include<theming_frag>\n#include<final_frag>\n}\n"
}, function (e, t) {
  e.exports = "\n#include <depth_texture>\n#define USE_MIPMAP 1\nuniform float cameraNear;\nuniform float cameraFar;\nuniform vec2 size;\nuniform vec2 resolution;\nuniform float lumInfluence;\nvarying vec2 vUv;\n#define NUM_SAMPLES (17)\n#define LOG_MAX_OFFSET (3)\n#define MAX_MIP_LEVEL (5)\n#define NUM_SPIRAL_TURNS (5)\n#define MIN_RADIUS (3.0)\nuniform float           projScale;\n#ifdef USE_MIPMAP\nuniform sampler2D tDepth_mip1;\nuniform sampler2D tDepth_mip2;\nuniform sampler2D tDepth_mip3;\nuniform sampler2D tDepth_mip4;\nuniform sampler2D tDepth_mip5;\n#endif\nuniform float radius;\nuniform float bias;\nuniform float intensity;\nvec2 tapLocation(int sampleNumber, float spinAngle, out float ssR){\n    float alpha = float(float(sampleNumber) + 0.5) * (1.0 / float(NUM_SAMPLES));\n    float angle = alpha * (float(NUM_SPIRAL_TURNS) * 6.28) + spinAngle;\n    ssR = alpha;\n    return vec2(cos(angle), sin(angle));\n}\nfloat CSZToKey(float z) {\n    return clamp( (z+cameraNear) / (cameraNear-cameraFar), 0.0, 1.0);\n}\nvoid packKey(float key, out vec2 p) {\n    float temp = floor(key * 255.0);\n    p.x = temp * (1.0 / 255.0);\n    p.y = key * 255.0 - temp;\n}\n#include <pack_depth>\nfloat unpackDepthNearFar( const in vec4 rgba_depth ) {\n    float depth = unpackDepth( rgba_depth );\n    if (depth == 0.0)\n        return -cameraFar * 1.0e10;\n    return depth * (cameraNear - cameraFar) - cameraNear;\n}\nvec3 reconstructCSFaceNormal(vec3 C) {\n    return normalize(cross(dFdy(C), dFdx(C)));\n}\nvec3 reconstructNonUnitCSFaceNormal(vec3 C) {\n    return cross(dFdy(C), dFdx(C));\n}\nvec3 getPosition(ivec2 ssP, float depth) {\n    vec3 P;\n    P = reconstructCSPosition(vec2(ssP) + vec2(0.5), depth);\n    return P;\n}\nvec3 getOffsetPosition(ivec2 ssC, vec2 unitOffset, float ssR) {\n    ivec2 ssP = ivec2(ssR * unitOffset) + ssC;\n    vec3 P;\n    vec2 screenUV = (vec2(ssP) + vec2(0.5)) * resolution;\n#ifdef USE_MIPMAP\n    int mipLevel = int(max(0.0, min(floor(log2(ssR)) - float(LOG_MAX_OFFSET), float(MAX_MIP_LEVEL))));\n    if (mipLevel == 0) {\n        P.z = texture2D(tDepth, screenUV).z;\n        if (P.z == 0.0) P.z = -cameraFar * 1.0e10;\n    }\n    else if (mipLevel == 1)\n        P.z = unpackDepthNearFar(texture2D(tDepth_mip1, screenUV));\n    else if (mipLevel == 2)\n        P.z = unpackDepthNearFar(texture2D(tDepth_mip2, screenUV));\n    else if (mipLevel == 3)\n        P.z = unpackDepthNearFar(texture2D(tDepth_mip3, screenUV));\n    else if (mipLevel == 4)\n        P.z = unpackDepthNearFar(texture2D(tDepth_mip4, screenUV));\n    else if (mipLevel == 5)\n        P.z = unpackDepthNearFar(texture2D(tDepth_mip5, screenUV));\n#else\n    P.z = texture2D(tDepth, screenUV).z;\n    if (P.z == 0.0) P.z = -cameraFar * 1.0e10;\n#endif\n    P = reconstructCSPosition(vec2(ssP) + vec2(0.5), P.z);\n    return P;\n}\nfloat sampleAO(in ivec2 ssC, in vec3 C, in vec3 n_C, in float ssDiskRadius, in int tapIndex, in float randomPatternRotationAngle) {\n    float ssR;\n    vec2 unitOffset = tapLocation(tapIndex, randomPatternRotationAngle, ssR);\n    ssR = max(0.75, ssR * ssDiskRadius);\n    vec3 Q = getOffsetPosition(ssC, unitOffset, ssR);\n    vec3 v = Q - C;\n    float vv = dot(v, v);\n    float vn = dot(v, n_C);\n    const float epsilon = 0.001;\n    float angAdjust = mix(1.0, max(0.0, 1.5 * n_C.z), 0.35);\n#define HIGH_QUALITY\n#ifdef HIGH_QUALITY\n    float f = max(1.0 - vv / (radius * radius), 0.0); return angAdjust * f * max((vn - bias) / sqrt(epsilon + vv), 0.0);\n#else\n    float f = max(radius * radius - vv, 0.0); return angAdjust * f * f * f * max((vn - bias) / (epsilon + vv), 0.0);\n#endif\n}\nconst bool useNoise = true;\nfloat getRandomAngle(vec2 pos) {\n    float dt= dot(pos ,vec2(12.9898,78.233));\n    return 6.28318 * fract(sin(mod(dt,3.14)) * 43758.5453);\n}\nvoid main() {\n    ivec2 ssC = ivec2(gl_FragCoord.xy);\n    vec4 nrmz = texture2D(tDepth, vUv);\n    if (nrmz.z == 0.0) {\n        gl_FragColor.r = 1.0;\n        gl_FragColor.a = 0.0;\n        packKey(1.0, gl_FragColor.gb);\n        return;\n    }\n    vec3 C = getPosition(ssC, nrmz.z);\n    packKey(CSZToKey(C.z), gl_FragColor.gb);\n    float ssDiskRadius = -projScale * radius / mix(C.z, -1.0, isOrtho);\n    float A;\n    if (ssDiskRadius <= MIN_RADIUS) {\n        A = 1.0;\n    } else {\n        float sum = 0.0;\n        float randomPatternRotationAngle = getRandomAngle(vUv);\n        vec3 n_C = vec3(nrmz.x, nrmz.y, sqrt(1.0 - dot(nrmz.xy, nrmz.xy)));\n        sum += sampleAO(ssC, C, n_C, ssDiskRadius, 0, randomPatternRotationAngle);\n        sum += sampleAO(ssC, C, n_C, ssDiskRadius, 1, randomPatternRotationAngle);\n        sum += sampleAO(ssC, C, n_C, ssDiskRadius, 2, randomPatternRotationAngle);\n        sum += sampleAO(ssC, C, n_C, ssDiskRadius, 3, randomPatternRotationAngle);\n        sum += sampleAO(ssC, C, n_C, ssDiskRadius, 4, randomPatternRotationAngle);\n        sum += sampleAO(ssC, C, n_C, ssDiskRadius, 5, randomPatternRotationAngle);\n        sum += sampleAO(ssC, C, n_C, ssDiskRadius, 6, randomPatternRotationAngle);\n        sum += sampleAO(ssC, C, n_C, ssDiskRadius, 7, randomPatternRotationAngle);\n        sum += sampleAO(ssC, C, n_C, ssDiskRadius, 8, randomPatternRotationAngle);\n        sum += sampleAO(ssC, C, n_C, ssDiskRadius, 9, randomPatternRotationAngle);\n        sum += sampleAO(ssC, C, n_C, ssDiskRadius, 10, randomPatternRotationAngle);\n        sum += sampleAO(ssC, C, n_C, ssDiskRadius, 11, randomPatternRotationAngle);\n        sum += sampleAO(ssC, C, n_C, ssDiskRadius, 12, randomPatternRotationAngle);\n        sum += sampleAO(ssC, C, n_C, ssDiskRadius, 13, randomPatternRotationAngle);\n        sum += sampleAO(ssC, C, n_C, ssDiskRadius, 14, randomPatternRotationAngle);\n        sum += sampleAO(ssC, C, n_C, ssDiskRadius, 15, randomPatternRotationAngle);\n        sum += sampleAO(ssC, C, n_C, ssDiskRadius, 16, randomPatternRotationAngle);\n        float intensityDivR6 = intensity / pow(radius, 6.0);\n#ifdef HIGH_QUALITY\n        A = pow(max(0.0, 1.0 - sqrt(sum * (3.0 / float(NUM_SAMPLES)))), intensity);\n#else\n        A = max(0.0, 1.0 - sum * intensityDivR6 * (5.0 / float(NUM_SAMPLES)));\n        A = (pow(A, 0.2) + 1.2 * A*A*A*A) / 2.2;\n#endif\n        if (abs(dFdx(C.z)) < 0.02) {\n            A -= dFdx(A) * (mod(float(ssC.x), 2.0) - 0.5);\n        }\n        if (abs(dFdy(C.z)) < 0.02) {\n            A -= dFdy(A) * (mod(float(ssC.y), 2.0) - 0.5);\n        }\n        A = mix(1.0, A, clamp(ssDiskRadius - MIN_RADIUS,0.0,1.0));\n    }\n    gl_FragColor.r = A;\n    gl_FragColor.a = 1.0;\n}\n"
}, function (e, t) {
  e.exports = "\n#include<depth_texture>\nuniform sampler2D tDiffuse;\nuniform sampler2D tID;\nuniform vec2 resolution;\nuniform float cameraNear;\nuniform float cameraFar;\nuniform sampler2D tFill;\nuniform sampler2D tPaper;\nuniform int style;\nuniform int idEdges;\nuniform int normalEdges;\nuniform int depthEdges;\nuniform float brightness;\nuniform float contrast;\nuniform int grayscale;\nuniform int preserveColor;\nuniform float levels;\nuniform float repeats;\nuniform float rotation;\nuniform sampler2D tGraphite1;\nuniform sampler2D tGraphite2;\nuniform sampler2D tGraphite3;\nuniform sampler2D tGraphite4;\nuniform sampler2D tGraphite5;\nuniform sampler2D tGraphite6;\nuniform sampler2D tGraphite7;\nuniform sampler2D tGraphite8;\nvarying vec2 vUv;\nvec4 recoverNZ(vec4 nrmz) {\n    float z = sqrt(1.0 - dot(nrmz.xy, nrmz.xy));\n    nrmz.w = -(nrmz.z + cameraNear) / (cameraFar - cameraNear);\n    nrmz.z = z;\n    return nrmz;\n}\n#include<tonemap>\n#include<hsv>\nvec3 quantize(vec3 c) {\n    float L = max(c.r, max(c.g, c.b));\n    c *= floor(L * (levels-1.0) + 0.5) / (L * (levels-1.0));\n    return c;\n}\nvec3 quantizeRGB(vec3 c) {\n    c *= c;\n    c *= floor(c * levels * 0.9999) / (levels-1.0);\n    return sqrt(c);\n}\nvec3 clampHue(vec3 c, float hues, float sats, float vals) {\n    vec3 hsv = rgb2hsv(c);\n    hsv.x = floor(hsv.x * hues + 0.5) / hues;\n    hsv.y = floor(hsv.y * sats + 0.5) / sats;\n    hsv.z = floor(hsv.z * vals + 0.5) / vals;\n    vec3 col = hsv2rgb(hsv);\n    return col;\n}\nvec3 reconstructCSFaceNormal(vec3 C) {\n    return normalize(cross(dFdy(C), dFdx(C)));\n}\nvec3 getPosition(ivec2 ssP, float depth) {\n    vec3 P;\n    P = reconstructCSPosition(vec2(ssP) + vec2(0.5), depth);\n    return P;\n}\nint isObjectEdge() {\n    vec4 MM = texture2D(tID, vUv);\n    vec4 LL = texture2D(tID, vUv + vec2(-1.0, -1.0) * resolution);\n    if (MM != LL) return 1;\n    vec4 LM = texture2D(tID, vUv + vec2( 0.0, -1.0) * resolution);\n    if (MM != LM) return 1;\n    vec4 LR = texture2D(tID, vUv + vec2( 1.0, -1.0) * resolution);\n    if (MM != LR) return 1;\n    vec4 ML = texture2D(tID, vUv + vec2(-1.0,  0.0) * resolution);\n    if (MM != ML) return 1;\n    vec4 MR = texture2D(tID, vUv + vec2( 1.0,  0.0) * resolution);\n    if (MM != MR) return 1;\n    vec4 UL = texture2D(tID, vUv + vec2(-1.0,  1.0) * resolution);\n    if (MM != UL) return 1;\n    vec4 UM = texture2D(tID, vUv + vec2( 0.0,  1.0) * resolution);\n    if (MM != UM) return 1;\n    vec4 UR = texture2D(tID, vUv + vec2( 1.0,  1.0) * resolution);\n    if (MM != UR) return 1;\n    return (MM.x + MM.y + MM.z + MM.w) >= 4.0 ? 0 : -1;\n}\nconst float r = 1.0;\nfloat normalDiff(vec3 n1, vec3 n2) {\n    float d = dot(n1.xyz, n2.xyz);\n    return acos(clamp(d, -1.0, 1.0));\n}\nint isNormalDepthEdge() {\n    ivec2 ssC = ivec2(gl_FragCoord.xy);\n    vec4 MM = texture2D(tDepth, vUv);\n    vec4 LL = texture2D(tDepth, vUv + vec2(-r, -r) * resolution);\n    vec4 LM = texture2D(tDepth, vUv + vec2( 0.0, -r) * resolution);\n    vec4 LR = texture2D(tDepth, vUv + vec2( r, -r) * resolution);\n    vec4 ML = texture2D(tDepth, vUv + vec2(-r,  0.0) * resolution);\n    vec4 MR = texture2D(tDepth, vUv + vec2( r,  0.0) * resolution);\n    vec4 UL = texture2D(tDepth, vUv + vec2(-r, r) * resolution);\n    vec4 UM = texture2D(tDepth, vUv + vec2( 0.0,  r) * resolution);\n    vec4 UR = texture2D(tDepth, vUv + vec2( r,  r) * resolution);\n    LL = recoverNZ(LL);\n    LM = recoverNZ(LM);\n    LR = recoverNZ(LR);\n    ML = recoverNZ(ML);\n    MM = recoverNZ(MM);\n    MR = recoverNZ(MR);\n    UL = recoverNZ(UL);\n    UM = recoverNZ(UM);\n    UR = recoverNZ(UR);\n    float dd = 0.0;\n    if ( depthEdges == 1 ) {\n        float G = (abs(UL.w - MM.w) + 2.0 * abs(UM.w - MM.w) + abs(UR.w - MM.w) + 2.0 * abs(ML.w - MM.w) + 2.0 * abs(MR.w - MM.w) + abs(LL.w - MM.w) + 2.0 * abs(LM.w - MM.w) + abs(LR.w - MM.w));\n        dd = abs(dFdx(G)) + abs(dFdy(G));\n    }\n    float Gn = 0.0;\n    if ( normalEdges == 1 ) {\n        float pLL = normalDiff(LL.xyz, MM.xyz);\n        float pLM = normalDiff(LM.xyz, MM.xyz);\n        float pLR = normalDiff(LR.xyz, MM.xyz);\n        float pML = normalDiff(ML.xyz, MM.xyz);\n        float pMM = normalDiff(MM.xyz, MM.xyz);\n        float pMR = normalDiff(MR.xyz, MM.xyz);\n        float pUL = normalDiff(UL.xyz, MM.xyz);\n        float pUM = normalDiff(UM.xyz, MM.xyz);\n        float pUR = normalDiff(UR.xyz, MM.xyz);\n        Gn = (abs(pUL - pMM) + 2.0 * abs(pUM - pMM) + abs(pUR - pMM) + 2.0 * abs(pML - pMM) + 2.0 * abs(pMR - pMM) + abs(pLL - pMM) + 2.0 * abs(pLM - pMM) + abs(pLR - pMM));\n    }\n    \n    return (dd > 0.004 || Gn > 2.0) ? 1 : 0;\n}\nvec3 computeGraphite( vec3 color, vec2 loc ) {\n    float lum = 0.299 * color.r + 0.587 * color.g + 0.114 * color.b;\n    float offset;\n    vec3 col1, col2;\n    if ( lum > 6.0/7.0 ) {\n        col1 = texture2D(tGraphite1, loc ).xyz;\n        col2 = texture2D(tGraphite2, loc ).xyz;\n        offset = 6.0/7.0;\n    } else if ( lum > 5.0/7.0 ) {\n        col1 = texture2D(tGraphite2, loc ).xyz;\n        col2 = texture2D(tGraphite3, loc ).xyz;\n        offset = 5.0/7.0;\n    } else if ( lum > 4.0/7.0 ) {\n        col1 = texture2D(tGraphite3, loc ).xyz;\n        col2 = texture2D(tGraphite4, loc ).xyz;\n        offset = 4.0/7.0;\n    } else if ( lum > 3.0/7.0 ) {\n        col1 = texture2D(tGraphite4, loc ).xyz;\n        col2 = texture2D(tGraphite5, loc ).xyz;\n        offset = 3.0/7.0;\n    } else if ( lum > 2.0/7.0 ) {\n        col1 = texture2D(tGraphite5, loc ).xyz;\n        col2 = texture2D(tGraphite6, loc ).xyz;\n        offset = 2.0/7.0;\n    } else if ( lum > 1.0/7.0 ) {\n        col1 = texture2D(tGraphite6, loc ).xyz;\n        col2 = texture2D(tGraphite7, loc ).xyz;\n        offset = 1.0/7.0;\n    } else {\n        col1 = texture2D(tGraphite7, loc ).xyz;\n        col2 = texture2D(tGraphite8, loc ).xyz;\n        offset = 0.0;\n    }\n    if ( col1.r == 0.0 && col2.r == 0.0 ) {\n        return vec3(lum,lum,lum);\n    }\n    float t = (lum-offset)*7.0;\n    return (col1 * t + col2 * (1.0 - t));\n}\nvec3 colorWithAdjustments() {\n    vec3 sceneRGB = texture2D(tDiffuse, vUv).xyz;\n    if ( brightness != 0.0 || contrast != 0.0) {\n        if ( brightness < 0.0 )\n        {\n            sceneRGB = sceneRGB * (1.0 + brightness);\n        }\n        else\n        {\n            sceneRGB = sceneRGB + ((1.0 - sceneRGB) * brightness);\n        }\n        float slant = tan(( clamp(contrast,-1.0,1.0) + 1.0) * 3.141592/4.001);\n        sceneRGB = (sceneRGB - 0.5) * slant + 0.5;\n        if ( preserveColor == 1 )\n        {\n            float maxval = max( sceneRGB.r, sceneRGB.g );\n            maxval = max( maxval, sceneRGB.b );\n            if ( maxval > 1.0 )\n            {\n                sceneRGB /= maxval;\n            }\n        }\n        sceneRGB = clamp(sceneRGB,0.0,1.0);\n    }\n    if ( grayscale == 1 ) {\n        sceneRGB.rgb = vec3(luminance_post(sceneRGB.rgb));\n    }\n    return sceneRGB;\n}\nvoid main() {\n    int foundEdge = 0;\n    foundEdge = ( idEdges == 1 && isObjectEdge() == 1 ) ? 1 : 0;\n    if ( foundEdge == 0 && (normalEdges == 1 || depthEdges == 1) ) {\n        foundEdge = isNormalDepthEdge();\n    }\n    vec2 loc = vec2((vUv.x-0.5)*(resolution.y/resolution.x),vUv.y-0.5)*repeats;\n    if ( style > 2 && rotation != 0.0 ) {\n        float rot = 3.14159*rotation;\n        float sinr = sin(rot);\n        float cosr = cos(rot);\n        loc = vec2(loc.x*cosr + -loc.y*sinr, loc.x*sinr + loc.y*cosr);\n    }\n    loc += vec2(0.5,0.5);\n    vec3 color;\n    if ( style == 2 ) {\n        if ( foundEdge == 1 ) {\n            gl_FragColor = vec4(0.0,0.0,0.0,1.0);\n        } else {\n            gl_FragColor = vec4(quantize(colorWithAdjustments()),1.0);\n        }\n    } else if ( style == 3 ) {\n        color = colorWithAdjustments();\n        vec3 graphColor = computeGraphite( color, loc );\n        if ( foundEdge == 1 ) {\n            gl_FragColor = vec4(0.16,0.16,0.16,1.0) + vec4(0.18 * graphColor,0.0);\n        } else {\n            gl_FragColor = vec4(graphColor,1.0);\n        }\n        return;\n    } else if ( style == 4 ) {\n        float fill = texture2D(tFill, loc ).r;\n        float paperStrength = 0.3;\n        vec3 paper = texture2D(tPaper, loc ).rgb;\n        paper = paperStrength * paper + (1.0-paperStrength)*vec3(1.0,1.0,1.0);\n        if ( foundEdge == 1 ) {\n            gl_FragColor = 0.75 * vec4(paper * fill, 1.0);\n        } else {\n            fill = pow(fill,1.6);\n            gl_FragColor = vec4(colorWithAdjustments() * (1.0 - fill) + paper * fill, 1.0);\n        }\n    } else {\n        if ( foundEdge == 1 ) {\n            gl_FragColor = vec4(0.0,0.0,0.0,1.0);\n        } else {\n            gl_FragColor = vec4(colorWithAdjustments(),1.0);\n        }\n        return;        \n    }\n}\n"
}, function (e, t) {
  e.exports = "#include<shadowmap_decl_common>\nvarying float depth;\n#ifdef USE_SURFACE_CUTOUT_MAP\nvarying vec2 vUv;\n#else\n#ifdef USE_MAP\nvarying vec2 vUv;\nuniform mat3 texMatrix;\n#endif\n#ifdef USE_ALPHAMAP\nvarying vec2 vUvAlpha;\nuniform mat3 texMatrixAlpha;\n#endif\n#endif\nvoid passCutoutUVCoords() {\n#ifdef USE_SURFACE_CUTOUT_MAP\n    vUv = uv;\n#else\n#ifdef USE_MAP\n    vUv = (texMatrix * vec3(uv, 1.0)).xy;\n#endif\n#ifdef USE_ALPHAMAP\n    vUvAlpha = (texMatrixAlpha * vec3(uv, 1.0)).xy;\n#endif\n#endif\n}\nvoid main() {\n    vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n    vec4 p_Position = projectionMatrix * mvPosition;\n    gl_Position = p_Position;\n    depth = -mvPosition.z;\n    passCutoutUVCoords();\n}\n"
}, function (e, t) {
  e.exports = "#include<shadowmap_decl_common>\nvarying float depth;\n#ifdef USE_SURFACE_CUTOUT_MAP\n#include<float3_average>\n#prism_uniforms<surface_cutout_map>\nvarying vec2 vUv;\n#else\n#ifdef USE_MAP\nvarying vec2 vUv;\nuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\nvarying vec2 vUvAlpha;\nuniform sampler2D alphaMap;\n#endif\n#endif\nuniform float shadowMinOpacity;\nvoid applyCutoutMaps() {\n    float opacity = 1.0;\n#ifdef USE_SURFACE_CUTOUT_MAP\n#prism_sample_texture<surface_cutout, opacity, true, false>\n#else\n#ifdef USE_MAP\n    opacity *= GET_MAP(vUv).a;\n#endif\n#ifdef USE_ALPHAMAP\n    opacity *= GET_ALPHAMAP(vUvAlpha).r;\n#endif\n#endif\n#if defined(USE_SURFACE_CUTOUT_MAP) || defined(USE_MAP) || defined(USE_ALPHAMAP)\n    if (opacity < shadowMinOpacity) discard;\n#endif\n}\nvoid main() {\n    float normalizedLinearDepth = (depth - shadowMapRangeMin) / shadowMapRangeSize;\n    float val = exp(shadowESMConstant * normalizedLinearDepth);\n#ifdef USE_HARD_SHADOWS\n    val = normalizedLinearDepth;\n#endif\n    applyCutoutMaps();\n    gl_FragColor = vec4(val, 0, 0, 1);\n}\n"
}, function (e, t) {
  e.exports = "#include<shadowmap_decl_vert>\nvoid main() {\n    gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n#include<shadowmap_vert>\n}\n"
}, function (e, t) {
  e.exports = "#include<shadowmap_decl_frag>\nvoid main() {\n    float shadowIntensity = 0.5 * (1.0 - getShadowValue());\n    gl_FragColor = vec4(0.0, 0.0, 0.0, shadowIntensity);\n}\n"
}, function (e, t) {
  e.exports = "varying vec3 vNormal;\nvarying float depth;\n#if NUM_CUTPLANES > 0\nvarying vec3 vWorldPosition;\n#endif\n#include<pack_normals>\n#include<instancing_decl_vert>\nvoid main() {\n#ifdef UNPACK_NORMALS\n    vec3 objectNormal = decodeNormal(normal);\n#else\n    vec3 objectNormal = normal;\n#endif\n#ifdef FLIP_SIDED\n    objectNormal = -objectNormal;\n#endif\n    objectNormal = getInstanceNormal(objectNormal);\n    vec3 instPos = getInstancePos(position);\n    vec3 transformedNormal = normalMatrix * objectNormal;\n    vNormal = normalize( transformedNormal );\n#if NUM_CUTPLANES > 0\n    vec4 worldPosition = modelMatrix * vec4( instPos, 1.0 );\n    vWorldPosition = worldPosition.xyz;\n#endif\n    vec4 mvPosition = modelViewMatrix * vec4( instPos, 1.0 );\n    depth = mvPosition.z;\n    vec4 p_Position = projectionMatrix * mvPosition;\n    gl_Position = p_Position;\n}\n"
}, function (e, t) {
  e.exports = "varying highp vec3 vNormal;\nvarying highp float depth;\n#if NUM_CUTPLANES > 0\nvarying vec3 vWorldPosition;\n#endif\n#include<cutplanes>\nvoid main() {\n#if NUM_CUTPLANES > 0\n    checkCutPlanes(vWorldPosition);\n#endif\n    vec3 n = vNormal;\n    n = n * ( -1.0 + 2.0 * float( gl_FrontFacing ) );\n    n = normalize( n );\n    gl_FragColor = vec4(n.x, n.y, depth, 1.0);\n}\n"
}, function (e, t) {
  e.exports = "\n#if NUM_CUTPLANES > 0\nvarying vec3 vWorldPosition;\n#endif\n#include<instancing_decl_vert>\nvoid main() {\n    vec3 instPos = getInstancePos(position);\n#if NUM_CUTPLANES > 0\n    vec4 worldPosition = modelMatrix * vec4( instPos, 1.0 );\n    vWorldPosition = worldPosition.xyz;\n#endif\n    vec4 mvPosition = modelViewMatrix * vec4( instPos, 1.0 );\n    vec4 p_Position = projectionMatrix * mvPosition;\n    gl_Position = p_Position;\n}"
}, function (e, t) {
  e.exports = "\n#if NUM_CUTPLANES > 0\nvarying vec3 vWorldPosition;\n#endif\n#include<cutplanes>\nuniform vec4 color;\n#include<id_decl_frag>\nvoid main() {\n#if NUM_CUTPLANES > 0\n    checkCutPlanes(vWorldPosition);\n#endif\n    gl_FragColor = color;\n#ifdef MRT_NORMALS\noutNormal = vec4(0.0);\n#endif\n#ifdef MRT_ID_BUFFER\n    outId = vec4(0.0);\n    #ifdef MODEL_COLOR\n        outModelId = vec4(0.0);\n    #endif\n#elif defined(ID_COLOR)\n    gl_FragColor = vec4(0.0);\n#elif defined(MODEL_COLOR)\n    gl_FragColor = vec4(0.0);\n#endif\n}"
}, function (e, t) {
  e.exports = "\n#define EDGE_SHARPNESS     (3.0)\n#define SCALE               (2)\n#define R                   (4)\n#define VALUE_TYPE        float\n#define VALUE_COMPONENTS   r\n#define VALUE_IS_KEY       0\n#define KEY_COMPONENTS     gb\n#if __VERSION__ >= 330\nconst float gaussian[R + 1] =\nfloat[](0.153170, 0.144893, 0.122649, 0.092902, 0.062970);\n#endif\nuniform sampler2D   tDiffuse;\nuniform vec2 size;\nuniform vec2 resolution;\nuniform vec2       axis;\nuniform float radius;\n#define  result         gl_FragColor.VALUE_COMPONENTS\n#define  keyPassThrough gl_FragColor.KEY_COMPONENTS\nfloat unpackKey(vec2 p) {\n    return p.x + p.y * (1.0 / 255.0);\n}\nvarying vec2 vUv;\nvoid main() {\n#   if __VERSION__ < 330\n    float gaussian[R + 1];\n#       if R == 3\n    gaussian[0] = 0.153170; gaussian[1] = 0.144893; gaussian[2] = 0.122649; gaussian[3] = 0.092902;\n#       elif R == 4\n    gaussian[0] = 0.153170; gaussian[1] = 0.144893; gaussian[2] = 0.122649; gaussian[3] = 0.092902; gaussian[4] = 0.062970;\n#       elif R == 6\n    gaussian[0] = 0.111220; gaussian[1] = 0.107798; gaussian[2] = 0.098151; gaussian[3] = 0.083953; gaussian[4] = 0.067458; gaussian[5] = 0.050920; gaussian[6] = 0.036108;\n#       endif\n#   endif\n    ivec2 axisi = ivec2(axis);\n    ivec2 ssC = ivec2(gl_FragCoord.xy);\n    vec4 temp = texture2D(tDiffuse, vUv);\n    gl_FragColor.gb = temp.KEY_COMPONENTS;\n    gl_FragColor.a = temp.a;\n    VALUE_TYPE sum = temp.VALUE_COMPONENTS;\n    if (temp.a == 0.0) {\n        result = sum;\n        return;\n    }\n    float key = unpackKey(keyPassThrough);\n    float BASE = gaussian[0];\n    float totalWeight = BASE;\n    sum *= totalWeight;\n    float scale = 1.5 / radius;\n    int r = -4; {\n        vec2 ssUV = vec2(ssC + axisi * (r * SCALE))*resolution;\n        temp = texture2D(tDiffuse, ssUV);\n        float      tapKey = unpackKey(temp.KEY_COMPONENTS);\n        VALUE_TYPE value  = temp.VALUE_COMPONENTS;\n        float weight = 0.3 + gaussian[4];\n        float dz = tapKey - key;\n        weight *= max(0.0, 1.0 - (EDGE_SHARPNESS * 2000.0) * abs(dz) * scale);\n        sum += value * weight;\n        totalWeight += weight;\n    }\n    r = -3; {\n        vec2 ssUV = vec2(ssC + axisi * (r * SCALE))*resolution;\n        temp = texture2D(tDiffuse, ssUV);\n        float      tapKey = unpackKey(temp.KEY_COMPONENTS);\n        VALUE_TYPE value  = temp.VALUE_COMPONENTS;\n        float weight = 0.3 + gaussian[3];\n        float dz = tapKey - key;\n        weight *= max(0.0, 1.0 - (EDGE_SHARPNESS * 2000.0) * abs(dz) * scale);\n        sum += value * weight;\n        totalWeight += weight;\n    }\n    r = -2; {\n        vec2 ssUV = vec2(ssC + axisi * (r * SCALE))*resolution;\n        temp = texture2D(tDiffuse, ssUV);\n        float      tapKey = unpackKey(temp.KEY_COMPONENTS);\n        VALUE_TYPE value  = temp.VALUE_COMPONENTS;\n        float weight = 0.3 + gaussian[2];\n        float dz = tapKey - key;\n        weight *= max(0.0, 1.0 - (EDGE_SHARPNESS * 2000.0) * abs(dz) * scale);\n        sum += value * weight;\n        totalWeight += weight;\n    }\n    r=-1; {\n        vec2 ssUV = vec2(ssC + axisi * (r * SCALE))*resolution;\n        temp = texture2D(tDiffuse, ssUV);\n        float      tapKey = unpackKey(temp.KEY_COMPONENTS);\n        VALUE_TYPE value  = temp.VALUE_COMPONENTS;\n        float weight = 0.3 + gaussian[1];\n        float dz = tapKey - key;\n        weight *= max(0.0, 1.0 - (EDGE_SHARPNESS * 2000.0) * abs(dz) * scale);\n        sum += value * weight;\n        totalWeight += weight;\n    }\n    r = 1; {\n        vec2 ssUV = vec2(ssC + axisi * (r * SCALE))*resolution;\n        temp = texture2D(tDiffuse, ssUV);\n        float      tapKey = unpackKey(temp.KEY_COMPONENTS);\n        VALUE_TYPE value  = temp.VALUE_COMPONENTS;\n        float weight = 0.3 + gaussian[1];\n        float dz = tapKey - key;\n        weight *= max(0.0, 1.0 - (EDGE_SHARPNESS * 2000.0) * abs(dz) * scale);\n        sum += value * weight;\n        totalWeight += weight;\n    }\n    r = 2; {\n        vec2 ssUV = vec2(ssC + axisi * (r * SCALE))*resolution;\n        temp = texture2D(tDiffuse, ssUV);\n        float      tapKey = unpackKey(temp.KEY_COMPONENTS);\n        VALUE_TYPE value  = temp.VALUE_COMPONENTS;\n        float weight = 0.3 + gaussian[2];\n        float dz = tapKey - key;\n        weight *= max(0.0, 1.0 - (EDGE_SHARPNESS * 2000.0) * abs(dz) * scale);\n        sum += value * weight;\n        totalWeight += weight;\n    }\n    r = 3; {\n        vec2 ssUV = vec2(ssC + axisi * (r * SCALE))*resolution;\n        temp = texture2D(tDiffuse, ssUV);\n        float      tapKey = unpackKey(temp.KEY_COMPONENTS);\n        VALUE_TYPE value  = temp.VALUE_COMPONENTS;\n        float weight = 0.3 + gaussian[3];\n        float dz = tapKey - key;\n        weight *= max(0.0, 1.0 - (EDGE_SHARPNESS * 2000.0) * abs(dz) * scale);\n        sum += value * weight;\n        totalWeight += weight;\n    }\n    r = 4; {\n        vec2 ssUV = vec2(ssC + axisi * (r * SCALE))*resolution;\n        temp = texture2D(tDiffuse, ssUV);\n        float      tapKey = unpackKey(temp.KEY_COMPONENTS);\n        VALUE_TYPE value  = temp.VALUE_COMPONENTS;\n        float weight = 0.3 + gaussian[4];\n        float dz = tapKey - key;\n        weight *= max(0.0, 1.0 - (EDGE_SHARPNESS * 2000.0) * abs(dz) * scale);\n        sum += value * weight;\n        totalWeight += weight;\n    }\n    const float epsilon = 0.0001;\n    result = sum / (totalWeight + epsilon);\n}\n"
}, function (e, t) {
  e.exports = "uniform sampler2D tDiffuse;\nuniform vec2 resolution;\nuniform float cameraNear;\nuniform float cameraInvNearFar;\n#include <pack_depth>\nvoid main() {\n    vec2 ssP = vec2(gl_FragCoord.xy);\n    ssP = ssP * 2.0 + mod(ssP, 2.0);\n    ssP = (ssP + 0.5) * resolution * 0.5;\n    float depth = texture2D(tDiffuse, ssP).z;\n    if (depth != 0.0)\n        depth = (depth + cameraNear) * cameraInvNearFar;\n    gl_FragColor = packDepth(depth);\n}\n"
}, function (e, t) {
  e.exports = "uniform sampler2D tDiffuse;\nuniform vec2 resolution;\nvoid main() {\n    vec2 ssP = vec2(gl_FragCoord.xy);\n    ssP = ssP * 2.0 + mod(ssP, 2.0);\n    ssP = (ssP + 0.5) * resolution * 0.5;\n    gl_FragColor = texture2D(tDiffuse, ssP);\n}\n"
}, function (e, t) {
  e.exports = "uniform vec2 uResolution;\nvarying vec2 vPos;\nvarying vec4 vPosPos;\nvoid main() {\n    vPos = uv;\n    vPosPos.xy = uv + vec2(-0.5, -0.5) * uResolution;\n    vPosPos.zw = uv + vec2( 0.5,  0.5) * uResolution;\n    gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}\n"
}, function (e, t) {
  e.exports = "#define FXAA_EDGE_SHARPNESS (8.0)\n#define FXAA_EDGE_THRESHOLD (0.125)\n#define FXAA_EDGE_THRESHOLD_MIN (0.05)\n#define FXAA_RCP_FRAME_OPT (0.50)\n#define FXAA_RCP_FRAME_OPT2 (2.0)\nuniform sampler2D tDiffuse;\nuniform highp vec2 uResolution;\nvarying vec2 vPos;\nvarying vec4 vPosPos;\nfloat FxaaLuma(vec3 rgb) {\n    return dot(rgb, vec3(0.299, 0.587, 0.114));\n}\nvoid main() {\n    float lumaNw = FxaaLuma(texture2D(tDiffuse, vPosPos.xy).rgb);\n    float lumaSw = FxaaLuma(texture2D(tDiffuse, vPosPos.xw).rgb);\n    float lumaNe = FxaaLuma(texture2D(tDiffuse, vPosPos.zy).rgb) + 1.0/384.0;\n    float lumaSe = FxaaLuma(texture2D(tDiffuse, vPosPos.zw).rgb);\n    vec4 rgbaM = texture2D(tDiffuse, vPos.xy);    \n    float lumaM = FxaaLuma(rgbaM.rgb);\n    float lumaMax = max(max(lumaNe, lumaSe), max(lumaNw, lumaSw));\n    float lumaMin = min(min(lumaNe, lumaSe), min(lumaNw, lumaSw));\n    float lumaMaxSubMinM = max(lumaMax, lumaM) - min(lumaMin, lumaM);\n    float lumaMaxScaledClamped = max(FXAA_EDGE_THRESHOLD_MIN, lumaMax * FXAA_EDGE_THRESHOLD);\n    if (lumaMaxSubMinM < lumaMaxScaledClamped) {\n        gl_FragColor = rgbaM;\n        return;\n    }\n    float dirSwMinusNe = lumaSw - lumaNe;\n    float dirSeMinusNw = lumaSe - lumaNw;\n    vec2 dir1 = normalize(vec2(dirSwMinusNe + dirSeMinusNw, dirSwMinusNe - dirSeMinusNw));\n    vec3 rgbN1 = texture2D(tDiffuse, vPos.xy - dir1 * FXAA_RCP_FRAME_OPT*uResolution).rgb;\n    vec3 rgbP1 = texture2D(tDiffuse, vPos.xy + dir1 * FXAA_RCP_FRAME_OPT*uResolution).rgb;\n    float dirAbsMinTimesC = min(abs(dir1.x), abs(dir1.y)) * FXAA_EDGE_SHARPNESS;\n    vec2 dir2 = clamp(dir1.xy / dirAbsMinTimesC, -2.0, 2.0);\n    vec3 rgbN2 = texture2D(tDiffuse, vPos.xy - dir2 * FXAA_RCP_FRAME_OPT2*uResolution).rgb;\n    vec3 rgbP2 = texture2D(tDiffuse, vPos.xy + dir2 * FXAA_RCP_FRAME_OPT2*uResolution).rgb;\n    vec3 rgbA = rgbN1 + rgbP1;\n    vec3 rgbB = ((rgbN2 + rgbP2) * 0.25) + (rgbA * 0.25);\n    float lumaB = FxaaLuma(rgbB);\n    float alpha = rgbaM.a;\n    if ((lumaB < lumaMin) || (lumaB > lumaMax))\n        gl_FragColor = vec4(rgbA * 0.5, rgbaM.a);\n    else\n        gl_FragColor = vec4(rgbB, rgbaM.a);\n}\n"
}, function (e, t) {
  e.exports = "uniform sampler2D tDiffuse;\nuniform sampler2D tAO;\nuniform int useAO;\nuniform float aoOpacity;\nuniform sampler2D tOverlay;\nuniform int useOverlay;\nuniform vec2 resolution;\nuniform vec4 objIDv4;\nuniform sampler2D tID;\nuniform vec4 edgeObjIDv4;\n#if defined(USE_MODEL_ID)\nuniform vec2 modelIDv2;\nuniform sampler2D tID2;\nuniform vec2 edgeModelIDv2;\n#endif\nuniform float highlightIntensity;\nuniform vec3 selectionColor;\n#ifdef IS_2D\nuniform float expand2dSelection;\n#endif\nuniform sampler2D tCrossFadeTex0;\nuniform sampler2D tCrossFadeTex1;\nuniform float     crossFadeOpacity0;\nuniform float     crossFadeOpacity1;\nvarying vec2 vUv;\n#ifdef SPATIAL_FILTER\n#include<depth_texture>\n#endif\n#include<tonemap>\n#ifdef USE_IDBUFFER_SELECTION\nbool isSelection(vec2 vUv, float I, float J) {\n    vec4 idAtPixel = texture2D(tID, vUv+resolution*vec2(I,J));\n    if (idAtPixel.rgb == vec3(0.0))\n        return false;\n#if defined(USE_MODEL_ID)\n    vec4 modelAtPixel = texture2D(tID2, vUv+resolution*vec2(I,J));\n    idAtPixel.a = modelAtPixel.b;\n    vec4 idDelta = abs(idAtPixel.rgba - edgeObjIDv4.rgba);\n    vec2 modelDelta = abs(modelAtPixel.rg - edgeModelIDv2.rg);\n#else\n    vec4 idDelta = vec4(abs(idAtPixel.rgb - edgeObjIDv4.rgb), 0.0);\n    vec2 modelDelta = vec2(0.0, 0.0);\n#endif\n    if (max(max(modelDelta.r, modelDelta.g), max(max(idDelta.r, idDelta.g), max(idDelta.b, idDelta.a))) < 1e-3) {\n        return true;\n    } else {\n        return false;\n    }\n}\n#else\nbool isSelected(vec3 C) {\n    float minS = min(selectionColor.r, min(selectionColor.g, selectionColor.b));\n    float maxS = max(selectionColor.r, max(selectionColor.g, selectionColor.b));\n    float satS = maxS - minS;\n    float minC = min(C.r, min(C.g, C.b));\n    float maxC = max(C.r, max(C.g, C.b));\n    float satC = maxC - minC;\n    if (satC < .01 || satS < .01)\n        return false;\n    vec3 S = (selectionColor - minS) / satS;\n    vec3 H = (C - minC) / satC;\n    vec3 D = H - S;\n    float eps = .15;\n    return (abs(D.r) + abs(D.g) + abs(D.b) < eps)\n        || (maxC >= (1.0 - eps) && D.r >= -eps && D.g >= -eps && D.b >= -eps);\n}\n#define IS_SELECTION(C) isSelected((C).rgb)\n#endif\nvec4 overlayEdgeDetect(vec2 vUv) {\n#ifdef IS_2D\n#define MAX_ALPHA(c)\n#define SUM_ALPHA(c, w) sumAlpha += c.a * w; sumWeight += w;\n#else\n#define MAX_ALPHA(c) maxAlpha = max(maxAlpha, c.a);\n#define SUM_ALPHA(c, w) \n#endif\n#ifdef USE_IDBUFFER_SELECTION\n#define CHECK_EDGE_ALPHA(I, J, W)     { vec4 c = texture2D( tOverlay, vUv+resolution*vec2((I),(J)) ); MAX_ALPHA(c) if (c.a > 0.0 && isSelection(vUv, I, J)) { hasEdge++; SUM_ALPHA(c, W) selectionPixel = c; } }\n#else\n#define CHECK_EDGE_ALPHA(I, J, W)     { vec4 c = texture2D( tOverlay, vUv+resolution*vec2((I),(J)) ); MAX_ALPHA(c) if (c.a > 0.0 && IS_SELECTION(c)) { hasEdge++; SUM_ALPHA(c, W) selectionPixel = c; } }\n#endif\n#ifndef IS_2D\n#define CHECK_EDGE_SELECTION(I, J) { vec4 c = texture2D( tOverlay, vUv+resolution*vec2((I),(J)) ); MAX_ALPHA(c) if (c.a <= 0.0) hasEdge++; }\n#endif\n    int hasEdge = 0;\n    vec4 center = texture2D(tOverlay, vUv);\n    vec4 selectionPixel = vec4(0.0);\n#ifdef IS_2D\n    float sumAlpha = 0.0, sumWeight = 0.0;\n#else\n    float maxAlpha = 0.0;\n    bool paintOutline = false;\n#endif\n    if (center.a <= 0.0) {\n        CHECK_EDGE_ALPHA(-1.0,-1.0, 1.0);\n        CHECK_EDGE_ALPHA( 0.0,-1.0, 2.0);\n        CHECK_EDGE_ALPHA( 1.0,-1.0, 1.0);\n        CHECK_EDGE_ALPHA(-1.0, 0.0, 2.0);\n        CHECK_EDGE_ALPHA( 1.0, 0.0, 2.0);\n        CHECK_EDGE_ALPHA(-1.0, 1.0, 1.0);\n        CHECK_EDGE_ALPHA( 0.0, 1.0, 2.0);\n        CHECK_EDGE_ALPHA( 1.0, 1.0, 1.0);\n        if (hasEdge != 0) {\n#ifdef IS_2D\n            center.a = -clamp(expand2dSelection - 1.0 + sumAlpha / sumWeight, 0.0, 1.0);\n            center.rgb = center.a < 0.0 ? selectionPixel.rgb : center.rgb;\n#else\n            center = selectionPixel;\n            paintOutline = true;\n#endif\n        }\n    }\n#ifdef USE_IDBUFFER_SELECTION\n    else if (center.a > 0.0 && isSelection(vUv, 0.0, 0.0)) {\n#else\n    else if (center.a > 0.0 && IS_SELECTION(center)) {\n#endif\n#ifdef IS_2D\n        center.a = -clamp(center.a + expand2dSelection, 0.0, 1.0);\n#else\n        CHECK_EDGE_SELECTION(-1.0,-1.0);\n        CHECK_EDGE_SELECTION( 0.0,-1.0);\n        CHECK_EDGE_SELECTION( 1.0,-1.0);\n        CHECK_EDGE_SELECTION(-1.0, 0.0);\n        CHECK_EDGE_SELECTION( 1.0, 0.0);\n        CHECK_EDGE_SELECTION(-1.0, 1.0);\n        CHECK_EDGE_SELECTION( 0.0, 1.0);\n        CHECK_EDGE_SELECTION( 1.0, 1.0);\n        if (hasEdge != 0)\n            paintOutline = true;\n        else\n            center.a = -center.a;\n#endif\n    }\n#ifndef IS_2D\n    if (paintOutline) {\n        float maxComponent = max(center.r, max(center.g, center.b));\n        center.rgb /= maxComponent;\n        center.rgb = sqrt(center.rgb);\n        center.a = 0.5 + 0.5 * maxAlpha * 0.125 * float(hasEdge);\n    }\n#endif\n    return center;\n}\n#ifdef SPATIAL_FILTER\nSPATIAL_FILTER\n#endif\nvec4 sampleColor() {\n    return texture2D( tDiffuse, vUv );\n}\nfloat sampleAO() {\n    return (useAO != 0) ? sqrt(texture2D(tAO, vUv).r) : 1.0;\n}\nvec3 applyCrossFade(vec3 srcColor, sampler2D fadeTex, float opacity, vec2 vUv) {\n    vec4 blendCol = texture2D(fadeTex, vUv);\n    return mix(srcColor.rgb, blendCol.rgb, blendCol.a * opacity);\n}\nvoid applyHighlighting(inout vec3 rgb, float filterValue) {\n#ifdef IS_2D\n    rgb = mix(rgb, vec3(1.0,1.0,0.0), filterValue * highlightIntensity * 0.25);\n#else\n    rgb += filterValue * highlightIntensity * 0.20;\n#endif\n}\nvoid main() {\n    vec4 texel = sampleColor();\n    float ao = sampleAO();\n    #ifdef NUM_CROSSFADE_TARGETS\n        #if (NUM_CROSSFADE_TARGETS > 1)\n            #if (TARGET_FADE_MODE == 0)\n                texel.rgb = applyCrossFade(texel.rgb, tCrossFadeTex0, crossFadeOpacity0, vUv);\n                texel.rgb = applyCrossFade(texel.rgb, tCrossFadeTex1, crossFadeOpacity1, vUv);\n            #else\n                vec4 t0 = texture2D(tCrossFadeTex0, vUv);\n                vec4 t1 = texture2D(tCrossFadeTex1, vUv);\n                vec4 mixed = mix(t0, t1, crossFadeOpacity1);\n                texel.rgb = mix(texel.rgb, mixed.rgb, mixed.a);\n                float aoGamma = 1.0 + 3.0 * (1.0 - 2.0 * abs(crossFadeOpacity1 - 0.5));\n                if (aoGamma == 0.0)\n                    aoGamma = 1.0;\n                ao = pow(ao, 1.0 / aoGamma);\n            #endif\n        #else\n            vec4 mixed = texture2D(tCrossFadeTex0, vUv);\n            texel.rgb = mix(texel.rgb, mixed.rgb, mixed.a);\n        #endif\n    #else\n    #endif\n    ao = 1.0 - (1.0 - ao) * aoOpacity;\n    texel.rgb *= ao;\n    if (useOverlay != 0) {\n        vec4 overlay = overlayEdgeDetect(vUv);\n        if (overlay.a < 0.0) {\n            overlay.a = -overlay.a;\n#ifdef IS_2D\n            overlay.a *= 0.6;\n#else\n            if (overlay.a >= 0.99) {\n                overlay.a = 0.75;\n                texel.rgb = vec3(luminance_post(texel.rgb));\n            }\n#endif\n        }\n#ifdef IS_2D\n        texel.rgb = mix(texel.rgb, overlay.rgb, overlay.a);\n#else\n        texel.rgb = mix(texel.rgb, sqrt(overlay.rgb), overlay.a);\n#endif\n        texel.a += overlay.a * (1.0 - texel.a);\n    }\n    if (objIDv4 != vec4(0.0)) {\n    vec4 idAtPixel = texture2D(tID, vUv);\n    #ifdef SPATIAL_FILTER\n        vec3 worldPos = reconstructWorldPosition(gl_FragCoord.xy, vUv);\n        float filterValue = (spatialFilter(worldPos) ? 1.0 : 0.0);\n        if (idAtPixel != vec4(1,1,1,1)) {\n            applyHighlighting(texel.rgb, filterValue);\n        }\n    #else\n#if defined(USE_MODEL_ID)\n        vec4 modelAtPixel = texture2D(tID2, vUv);\n        idAtPixel.a = modelAtPixel.b;\n        vec4 idDelta = abs(idAtPixel.rgba - objIDv4.rgba);\n        vec2 modelDelta = abs(modelAtPixel.rg - modelIDv2.rg);\n#else\n        vec4 idDelta = vec4(abs(idAtPixel.rgb - objIDv4.rgb), 0.0);\n        vec2 modelDelta = vec2(0.0, 0.0);\n#endif\n        if (max(max(modelDelta.r, modelDelta.g), max(max(idDelta.r, idDelta.g), max(idDelta.b, idDelta.a))) < 1e-3) {\n            applyHighlighting(texel.rgb, 1.0);\n        }\n#endif\n    }\n    gl_FragColor = texel;\n}\n"
}, function (e, t) {
  e.exports = "uniform sampler2D tDiffuse;\nvarying vec2 vUv;\nvoid main() {\n    gl_FragColor = texture2D(tDiffuse, vUv);\n}\n"
}, function (e, t) {
  e.exports = "\r\n\r\n#include<line_decl_common>\r\n\r\nattribute vec2 fields1;\r\nattribute vec4 fields2;\r\nattribute vec4 flags4b;\r\nattribute vec4 layerVp4b;\r\n\r\n#ifdef HAS_ELLIPTICALS\r\nattribute vec3 extraParams;\r\n#endif\r\n\r\n#ifdef USE_INSTANCING\r\nattribute vec4 instFlags4b;\r\n#endif\r\n\r\n#ifdef MSDF_TEXTURE_FONT\r\nvarying highp vec2 vuv;\r\nvarying float isMSDFQuards;\r\n#endif\r\n\r\n#ifdef IMAGE_UV_TEXTURE\r\nvarying highp vec2 vuv;\r\n#endif\r\n\r\n#ifdef VIEWPORT_CLIPPING\r\nvarying vec2 vPosition;\r\n#endif\r\n\r\nuniform mat4 mvpMatrix;\r\n\r\nuniform float pixelsPerUnit;\r\nuniform float aaRange;\r\nuniform float viewportId;\r\nuniform float swap;\r\n\r\n\r\n\r\n\r\n\r\n#ifdef HAS_LAYERS\r\nuniform sampler2D tLayerMask;\r\n#endif\r\n\r\n#ifdef SELECTION_RENDERER\r\nuniform sampler2D tSelectionTexture;\r\nuniform vec2 vSelTexSize;\r\n#endif\r\n\r\n#ifdef SELECTION_RENDERER\r\nuniform vec4 selectionColor;\r\n#endif\r\n\r\n#ifdef LOADING_ANIMATION\r\nuniform float meshAnimTime;\r\n#endif\r\n\r\n#if NUM_CUTPLANES > 0\r\nvarying vec3 vWorldPosition;\r\n#endif\r\n\r\nvarying vec4 dbId;\r\n\r\n#ifdef UNPACK_POSITIONS\r\nuniform sampler2D tIdColor;\r\nuniform vec2 vIdColorTexSize;\r\nuniform vec4 unpackXform;\r\nattribute vec2 uvIdColor;\r\nfloat unpackLineWeight(float w) {\r\n    if (w > 0.5) {\r\n        return - (w - 0.5) * 1024.0;\r\n    } else {\r\n        return w * max(unpackXform.x, unpackXform.y) * 2.0;\r\n    }\r\n}\r\nvec4 getVertexColor() {\r\n    float u = (uvIdColor.x + 0.5) / vIdColorTexSize.x;\r\n    return texture2D(tIdColor, vec2(u, 0.5));\r\n}\r\nvec4 getDbId() {\r\n    float u = (uvIdColor.y + 0.5) / vIdColorTexSize.x;\r\n    vec4 normDbId = texture2D(tIdColor, vec2(u, 0.5));\r\n    return normDbId * 255.0;\r\n}\r\n#else\r\nattribute vec4 color4b;\r\nattribute vec4 dbId4b;\r\nvec4 unpackXform;\r\nfloat unpackLineWeight(float w) {\r\n    return w;\r\n}\r\nvec4 getVertexColor() {\r\n    return color4b;\r\n}\r\nvec4 getDbId() {\r\n    return dbId4b;\r\n}\r\n#endif\r\n\r\n\r\nvec2 centralVertex;\r\nvec2 offsetPosition;\r\n\r\nvec2 cos_sin(const float angle) { return vec2(cos(angle), sin(angle)); }\r\n\r\nvoid min_max(inout vec2 minPt, inout vec2 maxPt, const vec2 p) {\r\n    minPt = min(minPt, p);\r\n    maxPt = max(maxPt, p);\r\n}\r\n\r\n#if defined(USE_INSTANCING)\r\nfloat getVertexId() { return instFlags4b.x; }\r\n#else\r\nfloat getVertexId() { return flags4b.x; }\r\n#endif\r\n\r\nbool isStartVertex() { return (getVertexId() < VBB_SEG_END_RIGHT); }\r\nbool isLeftVertex()  { float id = getVertexId(); return ((id == VBB_SEG_END_LEFT || id == VBB_SEG_START_LEFT)); }\r\n\r\nstruct SegmentData { float angle, distAlong, distTotal, lineWidthHalf, lineType; };\r\nvoid decodeSegmentData(out SegmentData seg) {\r\n    seg.angle         = fields2.x * TAU - PI;\r\n    seg.distAlong     = fields2.y * max(unpackXform.x, unpackXform.y);\r\n    seg.distTotal     = fields2.w;\r\n    seg.lineWidthHalf = unpackLineWeight(fields2.z);\r\n    seg.lineType      = flags4b.z;\r\n}\r\n\r\nvoid strokeLineSegment() {\r\n    SegmentData seg; decodeSegmentData(seg);\r\n\r\n    float isStartCapVertex = isStartVertex() ? -1.0 :  1.0;\r\n    float isLeftSide       = isLeftVertex( ) ?  1.0 : -1.0;\r\n\r\n\r\n    float angleTransverse = seg.angle + isLeftSide * HALF_PI;\r\n    float lwAdjustment = fsHalfWidth + aaRange;\r\n    vec2 transverseOffset = cos_sin(angleTransverse) * lwAdjustment;\r\n    offsetPosition.xy += transverseOffset;\r\n\r\n\r\n\r\n\r\n    float distanceFromStart = max(isStartCapVertex, 0.0) * seg.distAlong;\r\n    vec2 along = distanceFromStart * cos_sin(seg.angle);\r\n    offsetPosition.xy += along;\r\n    centralVertex.xy  += along;\r\n\r\n\r\n    vec2 moveOffset = isStartCapVertex * isLeftSide * vec2(-transverseOffset.y, transverseOffset.x);\r\n    offsetPosition.xy -= moveOffset;\r\n    centralVertex.xy  -= moveOffset;\r\n\r\n\r\n\r\n\r\n    fsMultipurpose.x = (isStartCapVertex * lwAdjustment) + distanceFromStart;\r\n    fsMultipurpose.y = seg.distAlong;\r\n    fsMultipurpose.z = seg.distTotal;\r\n    fsMultipurpose.w = seg.lineType;\r\n\r\n    if (seg.lineWidthHalf < 0.0)\r\n        fsHalfWidth = -fsHalfWidth;\r\n}\r\n\r\n\r\n#ifdef HAS_TRIANGLE_GEOMS\r\nstruct TriangleData { vec2 p0, p1, p2; };\r\nvoid decodeTriangleData(out TriangleData tri) {\r\n\r\n    tri.p1 = vec2(fields2.x, fields2.y) * unpackXform.xy + unpackXform.zw;\r\n    tri.p2 = fields2.zw * unpackXform.xy + unpackXform.zw;\r\n}\r\n\r\nvoid strokeOneTriangle() {\r\n    TriangleData tri; decodeTriangleData(tri);\r\n\r\n\r\n\r\n\r\n\r\n\r\n    fsHalfWidth = 0.0;\r\n    fsMultipurpose.z = 0.0;\r\n\r\n\r\n\r\n\r\n\r\n    float vertexId = getVertexId();\r\n    if (vertexId == VBB_SEG_END_RIGHT)\r\n        offsetPosition.xy = tri.p1;\r\n    else if (vertexId == VBB_SEG_END_LEFT)\r\n        offsetPosition.xy = tri.p2;\r\n}\r\n#endif\r\n\r\n\r\n\r\n\r\n#ifdef HAS_RASTER_QUADS\r\nstruct TexQuadData { float angle; vec2 size; };\r\nvoid decodeTexQuadData(out TexQuadData quad) {\r\n    quad.angle     = fields2.x * TAU;\r\n    quad.size   = fields2.yz * max(unpackXform.x, unpackXform.y);\r\n}\r\n\r\nvoid strokeTexQuad() {\r\n    TexQuadData quad; decodeTexQuadData(quad);\r\n\r\n    vec2 corner = vec2(isLeftVertex() ? -1.0 : 1.0, isStartVertex() ? -1.0 : 1.0);\r\n\r\n    vec2 p      = 0.5 * corner * quad.size;\r\n    vec2 rot    = cos_sin(quad.angle);\r\n    vec2 offset = vec2(p.x * rot.x - p.y * rot.y, p.x * rot.y + p.y * rot.x);\r\n\r\n    offsetPosition.xy += offset;\r\n\r\n    fsMultipurpose.xy = max(vec2(0.0), corner);\r\n\r\n\r\n    fsMultipurpose.z = 1.0;\r\n    fsHalfWidth = 0.0;\r\n}\r\n#endif\r\n\r\n#if defined(HAS_CIRCLES) || defined(HAS_ELLIPTICALS)\r\nstruct ArcData { vec2 c; float start, end, major, minor, tilt; };\r\nvoid decodeArcData(out ArcData arc) {\r\n    arc.c     = fields1.xy * unpackXform.xy + unpackXform.zw;\r\n    arc.start = fields2.x * TAU;\r\n    arc.end   = fields2.y * TAU;\r\n    arc.major = fields2.w * max(unpackXform.x, unpackXform.y);\r\n#if defined(HAS_ELLIPTICALS)\r\n    arc.minor = extraParams.x;\r\n    arc.tilt  = extraParams.y * TAU;\r\n#endif\r\n}\r\n\r\nvoid strokeArc(const ArcData arc) {\r\n\r\n\r\n    float isStart = isStartVertex() ? -1.0 : 1.0;\r\n    float isLeft  = isLeftVertex()  ? -1.0 : 1.0;\r\n\r\n\r\n\r\n\r\n    vec2 minPt;\r\n    vec2 maxPt;\r\n\r\n    vec2 angles = vec2(arc.start, arc.end);\r\n    vec2 endsX = vec2(arc.c.x) + arc.major * cos(angles);\r\n    vec2 endsY = vec2(arc.c.y) + arc.minor * sin(angles);\r\n    minPt = maxPt = vec2(endsX.x, endsY.x);\r\n    min_max(minPt, maxPt, vec2(endsX.y, endsY.y));\r\n\r\n    if (arc.end > arc.start) {\r\n        if (arc.start < PI_0_5 && arc.end > PI_0_5) {\r\n            min_max(minPt, maxPt, vec2(arc.c.x, arc.c.y + arc.minor));\r\n        }\r\n        if (arc.start < PI && arc.end > PI) {\r\n            min_max(minPt, maxPt, vec2(arc.c.x - arc.major, arc.c.y));\r\n        }\r\n        if (arc.start < PI_1_5 && arc.end > PI_1_5) {\r\n            min_max(minPt, maxPt, vec2(arc.c.x, arc.c.y - arc.minor));\r\n        }\r\n    } else {\r\n\r\n        min_max(minPt, maxPt, vec2(arc.c.x + arc.major, arc.c.y));\r\n\r\n\r\n\r\n        if (arc.start < PI_0_5 || arc.end > PI_0_5) {\r\n            min_max(minPt, maxPt, vec2(arc.c.x, arc.c.y + arc.minor));\r\n        }\r\n        if (arc.start < PI || arc.end > PI) {\r\n            min_max(minPt, maxPt, vec2(arc.c.x - arc.major, arc.c.y));\r\n        }\r\n        if (arc.start < PI_1_5 || arc.end > PI_1_5) {\r\n            min_max(minPt, maxPt, vec2(arc.c.x, arc.c.y - arc.minor));\r\n        }\r\n    }\r\n\r\n    minPt -= fsHalfWidth + aaRange;\r\n    maxPt += fsHalfWidth + aaRange;\r\n\r\n    offsetPosition.x = (isStart < 0.0) ? minPt.x : maxPt.x;\r\n    offsetPosition.y = (isLeft < 0.0)  ? minPt.y : maxPt.y;\r\n\r\n\r\n\r\n\r\n\r\n    fsMultipurpose.x = arc.start;\r\n    fsMultipurpose.y = -arc.major;\r\n    fsMultipurpose.z = arc.end;\r\n    fsMultipurpose.w = arc.minor;\r\n}\r\n#endif\r\n\r\n#if defined(HAS_CIRCLES)\r\n\r\nvoid strokeCircularArc() {\r\n    ArcData arc; decodeArcData(arc);\r\n\r\n    float r = arc.major;\r\n    if (r * pixelsPerUnit < 0.125)\r\n        r = 0.25 * aaRange;\r\n    arc.major = arc.minor = r;\r\n\r\n    strokeArc(arc);\r\n}\r\n\r\n#endif\r\n\r\n#if defined(HAS_ELLIPTICALS)\r\nvoid strokeEllipticalArc() {\r\n    ArcData arc; decodeArcData(arc);\r\n    strokeArc(arc);\r\n}\r\n#endif\r\n\r\nstruct CommonAttribs { vec2 pos; vec4 color; vec2 layerTC, vpTC; float lineWidthHalf, geomType, ghosting; };\r\nvoid decodeCommonAttribs(out CommonAttribs attribs) {\r\n    attribs.pos           = fields1.xy * unpackXform.xy + unpackXform.zw;\r\n    attribs.color         = getVertexColor();\r\n    attribs.geomType      = flags4b.y;\r\n    attribs.layerTC       = layerVp4b.xy / 255.0;\r\n    attribs.vpTC          = layerVp4b.zw / 255.0;\r\n    attribs.lineWidthHalf = unpackLineWeight(fields2.z);\r\n    attribs.ghosting      = flags4b.w;\r\n}\r\n\r\nvoid strokeIndexedTriangle() {\r\n\r\n    fsHalfWidth = 0.0;\r\n    fsMultipurpose.z = 0.0;\r\n}\r\n\r\n#ifdef SELECTION_RENDERER\r\nbool isSelected(const CommonAttribs attribs) {\r\n\r\n\r\n    vec3 oid = getDbId().rgb;\r\n\r\n\r\n    float id01 = oid.r + oid.g * 256.0;\r\n    float t = (id01 + 0.5) * (1.0 / 4096.0);\r\n    float flrt = floor(t);\r\n    float texU = t - flrt;\r\n\r\n\r\n    float id23 = oid.b * (65536.0 / 4096.0) + flrt;\r\n    t = (id23 + 0.5) / vSelTexSize.y;\r\n    float texV = fract(t);\r\n\r\n    vec4 selBit = texture2D(tSelectionTexture, vec2(texU, texV));\r\n    return selBit.r == 1.0;\r\n}\r\n#endif\r\n\r\nbool isLayerOff(const CommonAttribs attribs) {\r\n#ifdef HAS_LAYERS\r\n    vec4 layerBit = texture2D(tLayerMask, attribs.layerTC);\r\n    return (layerBit.r == 0.0);\r\n#else\r\n    return false;\r\n#endif\r\n}\r\n\r\nvec4 getColor(const CommonAttribs attribs) {\r\n\r\n    if (isLayerOff(attribs)) { return vec4(0.0); }\r\n\r\n#ifdef SELECTION_RENDERER\r\n    if (isSelected(attribs)) { return selectionColor; }\r\n    return vec4(0.0);\r\n#else\r\n    return attribs.color;\r\n#endif\r\n}\r\n\r\nvoid main() {\r\n#ifndef UNPACK_POSITIONS\r\n    unpackXform = vec4(1.0, 1.0, 0.0, 0.0);\r\n#endif\r\n\r\n    CommonAttribs attribs; decodeCommonAttribs(attribs);\r\n#ifdef MSDF_TEXTURE_FONT\r\n    vuv = fields2.xy;\r\n    isMSDFQuards = 1.0 - abs(sign(attribs.geomType - VBB_GT_MSDF_TRIANGLE_INDEXED));\r\n#endif\r\n\r\n#ifdef IMAGE_UV_TEXTURE\r\n    vuv = fields2.xy;\r\n#endif\r\n\r\n    fsColor = getColor(attribs);\r\n\r\n    if (swap != 0.0 ) {\r\n\r\n        if ( fsColor.r == 0.0 && fsColor.g == 0.0 && fsColor.b == 0.0 )\r\n            fsColor.rgb = vec3(1.0,1.0,1.0);\r\n\r\n        else if ( fsColor.r == 1.0 && fsColor.g == 1.0 && fsColor.b == 1.0 )\r\n            fsColor.rgb = vec3(0.0,0.0,0.0);\r\n    }\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n    centralVertex = offsetPosition = attribs.pos;\r\n\r\n    float lineWeight = attribs.lineWidthHalf;\r\n    if (lineWeight > 0.0) {\r\n\r\n\r\n        if(lineWeight < 0.5 / pixelsPerUnit) {\r\n            lineWeight = 0.5 / pixelsPerUnit;\r\n        }\r\n    }\r\n    else {\r\n\r\n\r\n        lineWeight = abs(lineWeight) / pixelsPerUnit;\r\n    }\r\n\r\n    fsHalfWidth = lineWeight;\r\n\r\n    dbId = getDbId() / 255.0;\r\n\r\n    fsVpTC     = attribs.vpTC;\r\n    fsGhosting = attribs.ghosting;\r\n\r\n    if      (attribs.geomType == VBB_GT_LINE_SEGMENT)     strokeLineSegment();\r\n#ifdef HAS_CIRCLES\r\n    else if (attribs.geomType == VBB_GT_ARC_CIRCULAR)     strokeCircularArc();\r\n#endif\r\n#ifdef HAS_ELLIPTICALS\r\n    else if (attribs.geomType == VBB_GT_ARC_ELLIPTICAL)   strokeEllipticalArc();\r\n#endif\r\n#ifdef HAS_RASTER_QUADS\r\n    else if (attribs.geomType == VBB_GT_TEX_QUAD)         strokeTexQuad();\r\n#endif\r\n#ifdef HAS_TRIANGLE_GEOMS\r\n    else if (attribs.geomType == VBB_GT_ONE_TRIANGLE)     strokeOneTriangle();\r\n#endif\r\n    else if (attribs.geomType == VBB_GT_TRIANGLE_INDEXED) strokeIndexedTriangle();\r\n\r\n\r\n\r\n    fsOffsetDirection = offsetPosition - centralVertex;\r\n\r\n\r\n    gl_Position = mvpMatrix * modelMatrix * vec4( offsetPosition.xy, 0.0, 1.0 );\r\n\r\n#ifdef LOADING_ANIMATION\r\n\r\n    if (dbId.rgb == vec3(1.0)) {\r\n        loadingProgress = 1.0;\r\n    } else {\r\n        loadingProgress = smoothstep(0.0, 1.0, meshAnimTime);\r\n    }\r\n#endif\r\n\r\n#ifdef IMAGE_UV_TEXTURE\r\n    fsHalfWidth = 0.0;\r\n#endif\r\n\r\n\r\n#if NUM_CUTPLANES > 0\r\n    vec4 worldPosition = modelMatrix * vec4( offsetPosition.xy, 0.0, 1.0 );\r\n    vWorldPosition = worldPosition.xyz;\r\n#endif\r\n\r\n#ifdef VIEWPORT_CLIPPING\r\n    vPosition = offsetPosition.xy;\r\n#endif\r\n}\r\n"
}, function (e, t) {
  e.exports = "\r\n\r\n\r\n#include<line_decl_common>\r\n#include<id_decl_frag>\r\n\r\nuniform highp float pixelsPerUnit;\r\nuniform highp float aaRange;\r\n\r\nuniform float opacity;\r\nuniform highp float viewportId;\r\nuniform highp float swap;\r\nuniform highp float grayscale;\r\n\r\n#ifdef HAS_RASTER_QUADS\r\nuniform sampler2D tRaster;\r\n#endif\r\n\r\n#ifdef HAS_LINESTYLES\r\nuniform sampler2D tLineStyle;\r\nuniform vec2 vLineStyleTexSize;\r\n#endif\r\n\r\n#ifdef VIEWPORT_CLIPPING\r\nuniform highp vec4 viewportBounds;\r\nvarying highp vec2 vPosition;\r\n#endif\r\n\r\n#ifdef IMAGE_UV_TEXTURE\r\nvarying highp vec2 vuv;\r\nuniform sampler2D tRaster;\r\n#endif\r\n\r\n\r\nfloat curveGaussian(float r, float invWidth) {\r\n    float amt = clamp(r * invWidth, 0.0, 1.0);\r\n\r\n    float exponent = amt * 2.0;\r\n\r\n    return exp(-exponent*exponent);\r\n\r\n\r\n\r\n}\r\n\r\n#ifdef HAS_LINESTYLES\r\nfloat getLinePatternPixel(int i, int j) {\r\n\r\n    return texture2D(tLineStyle, (vec2(i, j) + 0.5) / vLineStyleTexSize).x * 255.0;\r\n}\r\n\r\nfloat getPatternLength(int whichPattern) {\r\n    float p1 = getLinePatternPixel(0, whichPattern);\r\n    float p2 = getLinePatternPixel(1, whichPattern);\r\n    return (p2 * 256.0 + p1);\r\n}\r\n#endif\r\n\r\n\r\nvoid fillLineSegment() {\r\n\r\n    float radius = abs(fsHalfWidth);\r\n    float parametricDistance = fsMultipurpose.x;\r\n    float segmentLength      = fsMultipurpose.y;\r\n    float totalDistance      = fsMultipurpose.z;\r\n\r\n#ifdef LOADING_ANIMATION\r\n    float distFromStart = parametricDistance / segmentLength;\r\n    if (loadingProgress < 1.0 && distFromStart > loadingProgress) {\r\n        discard;\r\n    }\r\n#endif\r\n\r\n\r\n#ifdef HAS_LINESTYLES\r\n    int whichPattern         = int(fsMultipurpose.w);\r\n\r\n    if (whichPattern > 0) {\r\n        const float TEX_TO_UNIT = 1.0 / 96.0;\r\n\r\n        float patternScale;\r\n\r\n\r\n\r\n        if (fsHalfWidth < 0.0) {\r\n            patternScale = LTSCALE;\r\n        } else {\r\n            patternScale = LTSCALE * TEX_TO_UNIT * pixelsPerUnit;\r\n        }\r\n\r\n        float patLen = patternScale * getPatternLength(whichPattern);\r\n        float phase = mod((totalDistance + parametricDistance) * pixelsPerUnit, patLen);\r\n\r\n        bool onPixel = true;\r\n        float radiusPixels = radius * pixelsPerUnit;\r\n\r\n        for (int i=2; i<MAX_LINESTYLE_LENGTH; i+=2) {\r\n\r\n            float on = getLinePatternPixel(i, whichPattern);\r\n            if (on == 1.0) on = 0.0;\r\n            on *= patternScale;\r\n\r\n            onPixel = true;\r\n            phase -= on;\r\n            if (phase < 0.0) {\r\n                break;\r\n            }\r\n            else if (phase <= radiusPixels) {\r\n                onPixel = false;\r\n                break;\r\n            }\r\n\r\n            float off = getLinePatternPixel(i+1, whichPattern);\r\n            if (off <= 1.0) off = 0.0;\r\n            off *= patternScale;\r\n\r\n            onPixel = false;\r\n            phase -= off;\r\n            if (phase < -radiusPixels)\r\n                discard;\r\n            if (phase <= 0.0)\r\n                break;\r\n        }\r\n\r\n\r\n\r\n\r\n        if (!onPixel && (abs(phase) <= radiusPixels)) {\r\n            segmentLength = 0.0;\r\n            parametricDistance = phase / pixelsPerUnit;\r\n        }\r\n    }\r\n#endif\r\n\r\n\r\n\r\n\r\n    float dist;\r\n    float offsetLength2 = dot(fsOffsetDirection, fsOffsetDirection);\r\n\r\n\r\n\r\n\r\n    float ltz = max(0.0, sign(-parametricDistance));\r\n    float gtsl = max(0.0, sign(parametricDistance - segmentLength));\r\n    float d = (ltz + gtsl) * (parametricDistance - gtsl * segmentLength);\r\n    dist = sqrt(max(0.0, offsetLength2 + d*d));\r\n\r\n\r\n\r\n\r\n    float range =  dist - radius;\r\n\r\n    if (range > aaRange) {\r\n        discard;\r\n    }\r\n\r\n\r\n\r\n\r\n\r\n\r\n    gl_FragColor = fsColor;\r\n    gl_FragColor.a *= curveGaussian(range+aaRange, pixelsPerUnit);\r\n}\r\n\r\n#ifdef HAS_CIRCLES\r\nvoid fillCircularArc() {\r\n\r\n    float dist   = length(fsOffsetDirection);\r\n    vec2 angles  = fsMultipurpose.xz;\r\n    float radius = abs(fsMultipurpose.y);\r\n    float range  =  abs(dist - radius);\r\n    range -= fsHalfWidth;\r\n\r\n\r\n\r\n    if (range > aaRange) {\r\n        discard;\r\n    }\r\n\r\n    vec2 direction = fsOffsetDirection;\r\n    float angle = atan(direction.y, direction.x);\r\n\r\n\r\n\r\n\r\n    if (angles.x > angles.y) {\r\n\r\n        if (angle > angles.x && angle < PI) {\r\n                angle -= TAU;\r\n        }\r\n        angles.x -= TAU;\r\n\r\n\r\n\r\n        if (angle < angles.x ) {\r\n            angle += TAU;\r\n        }\r\n    }\r\n    else if (angle < 0.0)\r\n        angle += TAU;\r\n\r\n#ifdef LOADING_ANIMATION\r\n    if ((angle - angles.x) / (angles.y - angles.x) > loadingProgress) {\r\n        discard;\r\n    }\r\n#endif\r\n\r\n\r\n    if (angle > angles.x && angle < angles.y) {\r\n        gl_FragColor = fsColor;\r\n        gl_FragColor.a *= curveGaussian(range+aaRange, pixelsPerUnit);\r\n    }\r\n    else {\r\n        discard;\r\n    }\r\n\r\n}\r\n#endif\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n#ifdef HAS_ELLIPTICALS\r\n\r\n\r\n\r\n\r\n\r\n\r\nfloat EllipticalApprox(\r\n        const int iters,\r\n        inout float t0, inout float t1,\r\n        const vec2 y,   out   vec2 x,\r\n        const vec2 e,   const vec2 ey, const vec2 esqr\r\n        ) {\r\n    vec2 r;\r\n    for (int i = 0; i < 10; ++i) {\r\n        if(i >= iters) break;\r\n\r\n        float t = mix(t0, t1, 0.5);\r\n        r = ey / (vec2(t) + esqr);\r\n\r\n        vec2 rsq = r * r;\r\n        float f = rsq.x + rsq.y - 1.0;\r\n\r\n        if(f > 0.0) { t0 = t; } else { t1 = t; }\r\n    }\r\n\r\n    x = e * r;\r\n    return distance(x, y);\r\n}\r\n\r\nfloat DistancePointEllipseSpecial (vec2 e, vec2 y, out vec2 x, float width, float aaRange) {\r\n    float dist;\r\n\r\n\r\n    vec2 esqr = e * e;\r\n    vec2 ey   = e * y;\r\n    float t0 = -esqr[1] + ey[1];\r\n    float t1 = -esqr[1] + length(ey);\r\n\r\n\r\n\r\n    dist = EllipticalApprox(6, t0, t1, y, x, e, ey, esqr);\r\n\r\n\r\n    if (dist > max(2.0 * (width + aaRange), e[0] * 0.05))\r\n        return dist;\r\n\r\n\r\n    dist = EllipticalApprox(6, t0, t1, y, x, e, ey, esqr);\r\n\r\n\r\n\r\n\r\n    float ecc = 1.0 +  0.1 * e[0] / e[1];\r\n\r\n    if (dist > max(ecc * (width + aaRange), e[0] * 0.001))\r\n        return dist;\r\n    if (dist < (width - aaRange) / ecc)\r\n        return dist;\r\n\r\n\r\n\r\n\r\n    dist = EllipticalApprox(10, t0, t1, y, x, e, ey, esqr);\r\n    return dist;\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\nfloat DistancePointEllipse(vec2 e, vec2 y, out vec2 locX, float width, float aaRange) {\r\n    vec2 locE, locY;\r\n\r\n\r\n\r\n\r\n    float diff = sign(e[0] - e[1]);\r\n    vec2 swizzle = vec2(max(diff, 0.0), -min(diff, 0.0));\r\n    locE.x = dot(e, swizzle.xy);\r\n    locE.y = dot(e, swizzle.yx);\r\n    locY.x = dot(y, swizzle.xy);\r\n    locY.y = dot(y, swizzle.yx);\r\n\r\n\r\n    vec2 refl = sign(locY);\r\n    locY *= refl;\r\n\r\n    vec2 x;\r\n    float distance = DistancePointEllipseSpecial(locE, locY, x, width, aaRange);\r\n\r\n    x *= refl;\r\n\r\n    locX.x = dot(x, swizzle.xy);\r\n    locX.y = dot(x, swizzle.yx);\r\n\r\n    return distance;\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\nvoid fillEllipticalArc() {\r\n    vec2 angles = fsMultipurpose.xz;\r\n    vec2 radii  = abs(fsMultipurpose.yw);\r\n    vec2 dir    = fsOffsetDirection;\r\n\r\n\r\n\r\n\r\n    vec2 pos;\r\n    float range = DistancePointEllipse(radii, dir, pos, fsHalfWidth, aaRange);\r\n    range -= fsHalfWidth;\r\n\r\n    if (range > aaRange)\r\n        discard;\r\n\r\n    float ar = radii[0] / radii[1];\r\n\r\n\r\n\r\n\r\n    float angle = atan(ar * pos.y, pos.x);\r\n\r\n\r\n\r\n\r\n    if (angles.x > angles.y) {\r\n\r\n        if (angle > angles.x && angle < PI) {\r\n            angle -= TAU;\r\n        }\r\n        angles.x -= TAU;\r\n\r\n\r\n\r\n        if (angle < angles.x ) {\r\n            angle += TAU;\r\n        }\r\n    }\r\n    else if (angle < 0.0)\r\n        angle += TAU;\r\n\r\n#ifdef LOADING_ANIMATION\r\n    if ((angle - angles.x) / (angles.y - angles.x) > loadingProgress) {\r\n        discard;\r\n    }\r\n#endif\r\n\r\n\r\n    if (angle > angles.x && angle < angles.y) {\r\n        gl_FragColor = fsColor;\r\n        gl_FragColor.a *= curveGaussian(range+aaRange, pixelsPerUnit);\r\n    }\r\n    else {\r\n        discard;\r\n    }\r\n}\r\n#endif\r\n\r\n#ifdef HAS_RASTER_QUADS\r\n    void fillTexQuad() {\r\n        gl_FragColor = texture2D(tRaster, fsMultipurpose.xy);\r\n        #ifdef LOADING_ANIMATION\r\n            gl_FragColor.a *= loadingProgress;\r\n        #endif\r\n    }\r\n#endif\r\n\r\nvoid fillTriangle() {\r\n#ifdef IMAGE_UV_TEXTURE\r\n    gl_FragColor = texture2D(tRaster, fract(vuv));\r\n#else\r\n    gl_FragColor = fsColor;\r\n#endif\r\n\r\n#ifdef LOADING_ANIMATION\r\n    gl_FragColor.a *= loadingProgress;\r\n#endif\r\n}\r\n\r\n#if NUM_CUTPLANES > 0\r\nvarying highp vec3 vWorldPosition;\r\n#endif\r\n\r\n#ifdef MSDF_TEXTURE_FONT\r\nvarying highp vec2 vuv;\r\nvarying float isMSDFQuards;\r\nuniform sampler2D tRaster;\r\nfloat median(float r, float g, float b) {\r\n  return max(min(r, g), min(max(r, g), b));\r\n}\r\n\r\n#endif\r\n\r\n#include<cutplanes>\r\n\r\nvoid main() {\r\n\r\n\r\n\r\n\r\n\r\n    if (fsColor == vec4(0.0)) {\r\n        discard;\r\n    }\r\n\r\n\r\n#ifdef VIEWPORT_CLIPPING\r\n    if(vPosition.x < viewportBounds.x || vPosition.x > viewportBounds.z || vPosition.y < viewportBounds.y || vPosition.y > viewportBounds.w) {\r\n        discard;\r\n    }\r\n#endif\r\n\r\n#ifdef MSDF_TEXTURE_FONT\r\n    vec4 msdfColor = texture2D(tRaster, vuv);\r\n    float dist = median(msdfColor.r, msdfColor.g, msdfColor.b);\r\n\r\n\r\n    float delta = mix(0.25, 0.5, 1.0 - fwidth(dist));\r\n\r\n    float sigDist = dist - delta;\r\n    float msdfAlpha = clamp(sigDist/fwidth(sigDist) + delta, 0.0, 1.0);\r\n\r\n    msdfAlpha = smoothstep(0., 1., msdfAlpha);\r\n    gl_FragColor.a =  mix(msdfAlpha, 1., 1.-isMSDFQuards);\r\n    if (gl_FragColor.a < 0.0001) discard;\r\n\r\n#endif\r\n\r\n\r\n    if (fsHalfWidth == 0.0) {\r\n#ifdef HAS_RASTER_QUADS\r\n        if (fsMultipurpose.z != 0.0)\r\n            fillTexQuad();\r\n        else\r\n#endif\r\n            fillTriangle();\r\n    }\r\n    else if (fsMultipurpose.y < 0.0) {\r\n#ifdef HAS_CIRCLES\r\n#ifdef HAS_ELLIPTICALS\r\n        if (abs(fsMultipurpose.y) == fsMultipurpose.w)\r\n#endif\r\n            fillCircularArc();\r\n#endif\r\n#ifdef HAS_ELLIPTICALS\r\n#ifdef HAS_CIRCLES\r\n        else\r\n#endif\r\n            fillEllipticalArc();\r\n#endif\r\n    }\r\n    else\r\n        fillLineSegment();\r\n\r\n\r\n#ifdef MRT_NORMALS\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n    gl_FragData[1] = vec4(0.0);\r\n#endif\r\n\r\n\r\n\r\n\r\n\r\n\r\n    float writeId = 1.0;\r\n    \r\n    gl_FragColor.a *= opacity;\r\n\r\n    if (gl_FragColor.a == 0.0) {\r\n        discard;\r\n    }\r\n\r\n\r\n\r\n\r\n    if (fsGhosting != 0.0 || \r\n            ((viewportId != 0.0) && (abs(fsVpTC.x * 255.0 + fsVpTC.y) >= 0.5 && abs(fsVpTC.x * 255.0 + fsVpTC.y - viewportId) >= 0.5))) {\r\n\r\n        writeId = 0.0;\r\n\r\n\r\n\r\n        gl_FragColor.a *= ((swap == 1.0) ? 0.21 : 0.1);\r\n    }\r\n\r\n#ifndef SELECTION_RENDERER\r\n\r\n    if (grayscale != 0.0) {\r\n        const vec3 rgb2grey = vec3(0.299, 0.587, 0.114);\r\n        float gray = dot(gl_FragColor.rgb, rgb2grey);\r\n        gl_FragColor.rgb = vec3(gray);\r\n    }\r\n#endif\r\n\r\n#if NUM_CUTPLANES > 0\r\n    checkCutPlanes(vWorldPosition);\r\n#endif\r\n\r\n#include<id_frag>\r\n}\r\n"
}, function (e, t) {
  e.exports = "\n#include<line_decl_common>\nattribute vec2 fields1;\nattribute vec4 fields2;\nattribute vec4 flags4b;\nattribute vec4 layerVp4b;\n#ifdef USE_INSTANCING\nattribute vec4 instFlags4b;\n#endif\n#ifdef VIEWPORT_CLIPPING\nvarying vec2 vPosition;\n#endif\nuniform mat4 mvpMatrix;\nuniform float pixelsPerUnit;\nuniform float aaRange;\nuniform vec2 size;\nuniform float viewportId;\nuniform float swap;\n#ifdef HAS_LAYERS\nuniform sampler2D tLayerMask;\n#endif\n#ifdef SELECTION_RENDERER\nuniform sampler2D tSelectionTexture;\nuniform vec2 vSelTexSize;\n#endif\n#ifdef SELECTION_RENDERER\nuniform vec4 selectionColor;\n#endif\n#ifdef LOADING_ANIMATION\nuniform float meshAnimTime;\n#endif\n#if NUM_CUTPLANES > 0\nvarying vec3 vWorldPosition;\n#endif\nvarying vec4 dbId;\n#ifdef UNPACK_POSITIONS\nuniform sampler2D tIdColor;\nuniform vec2 vIdColorTexSize;\nuniform vec4 unpackXform;\nattribute vec2 uvIdColor;\nfloat unpackLineWeight(float w) {\n    if (w > 0.5) {\n        return - (w - 0.5) * 1024.0;\n    } else {\n        return w * max(unpackXform.x, unpackXform.y) * 2.0;\n    }\n}\nvec4 getVertexColor() {\n    float u = (uvIdColor.x + 0.5) / vIdColorTexSize.x;\n    return texture2D(tIdColor, vec2(u, 0.5));\n}\nvec4 getDbId() {\n    float u = (uvIdColor.y + 0.5) / vIdColorTexSize.x;\n    vec4 normDbId = texture2D(tIdColor, vec2(u, 0.5));\n    return normDbId * 255.0;\n}\n#else\nattribute vec4 color4b;\nattribute vec4 dbId4b;\nvec4 unpackXform;\nfloat unpackLineWeight(float w) {\n    return w;\n}\nvec4 getVertexColor() {\n    return color4b;\n}\nvec4 getDbId() {\n    return dbId4b;\n}\n#endif\nvec2 centralVertex;\nvec2 offsetPosition;\nvec2 offsetPosDepth;\nvec2 cos_sin(const float angle) { return vec2(cos(angle), sin(angle)); }\nvoid min_max(inout vec2 minPt, inout vec2 maxPt, const vec2 p) {\n    minPt = min(minPt, p);\n    maxPt = max(maxPt, p);\n}\n#if defined(USE_INSTANCING)\nfloat getVertexId() { return instFlags4b.x; }\n#else\nfloat getVertexId() { return flags4b.x; }\n#endif\nbool isStartVertex() { return (getVertexId() < VBB_SEG_END_RIGHT); }\nbool isLeftVertex()  { float id = getVertexId(); return ((id == VBB_SEG_END_LEFT || id == VBB_SEG_START_LEFT)); }\nstruct SegmentData { float angle, distAlong, distTotal, lineWidthHalf, lineType; };\nvoid decodeSegmentData(out SegmentData seg) {\n    seg.angle         = fields2.x * TAU - PI;\n    seg.distAlong     = fields2.y * max(unpackXform.x, unpackXform.y);\n    seg.distTotal     = fields2.w;\n    seg.lineWidthHalf = unpackLineWeight(fields2.z);\n    seg.lineType      = flags4b.z;\n}\nvoid strokeLineSegment() {\n    SegmentData seg; decodeSegmentData(seg);\n    float isStartCapVertex = isStartVertex() ? -1.0 :  1.0;\n    float isLeftSide       = isLeftVertex( ) ?  1.0 : -1.0;\n    vec4 startPosition = (mvpMatrix * modelMatrix * vec4(centralVertex.xy, 0.0, 1.0));\n    float distanceAlong = seg.distAlong;\n    vec2 along = distanceAlong * cos_sin(seg.angle);\n    vec4 endPosition = (mvpMatrix * modelMatrix * vec4(centralVertex.xy + along, 0.0, 1.0));\n    vec2 screenStart = startPosition.xy * 0.5 * size / startPosition.w;\n    vec2 screenEnd = endPosition.xy * 0.5 * size / endPosition.w;\n    if (isStartCapVertex < 0.0) {\n        offsetPosition = centralVertex = screenStart;\n        offsetPosDepth = startPosition.zw;\n    } else {\n        offsetPosition = centralVertex = screenEnd;\n        offsetPosDepth = endPosition.zw;\n    }\n    vec2 screenDelta = screenEnd - screenStart;\n    float screenAngle = (distanceAlong == 0.0) ? 0.0 : atan(screenDelta.y, screenDelta.x);\n    float angleTransverse = screenAngle - isLeftSide * HALF_PI;\n    float lwAdjustment = fsHalfWidth + aaRange;\n    vec2 transverseOffset = cos_sin(angleTransverse) * lwAdjustment;\n    offsetPosition += transverseOffset;\n    vec2 moveOffset = isStartCapVertex * isLeftSide * vec2(-transverseOffset.y, transverseOffset.x);\n    offsetPosition += moveOffset;\n    centralVertex += moveOffset;\n    float distanceFromStart = max(0.0, isStartCapVertex) * length(screenDelta);\n    fsMultipurpose.x = (isStartCapVertex * lwAdjustment) + distanceFromStart;\n    fsMultipurpose.y = length(screenDelta);\n    fsMultipurpose.z = seg.distTotal;\n    fsMultipurpose.w = seg.lineType;\n    if (seg.lineWidthHalf < 0.0)\n        fsHalfWidth = -fsHalfWidth;\n    fsOffsetDirection = offsetPosition - centralVertex;\n    gl_Position = vec4(2.0 * offsetPosition / size * offsetPosDepth.y, offsetPosDepth.xy);\n}\nstruct CommonAttribs { vec2 pos; vec4 color; vec2 layerTC, vpTC; float lineWidthHalf, geomType, ghosting; };\nvoid decodeCommonAttribs(out CommonAttribs attribs) {\n    attribs.pos           = fields1.xy * unpackXform.xy + unpackXform.zw;\n    attribs.color         = getVertexColor();\n    attribs.geomType      = flags4b.y;\n    attribs.layerTC       = layerVp4b.xy / 255.0;\n    attribs.vpTC          = layerVp4b.zw / 255.0;\n    attribs.lineWidthHalf = unpackLineWeight(fields2.z);\n    attribs.ghosting      = flags4b.w;\n}\nvoid strokeIndexedTriangle() {\n    fsHalfWidth = 0.0;\n    fsMultipurpose.z = 0.0;\n    gl_Position = (mvpMatrix * modelMatrix * vec4(centralVertex.xy, 0.0, 1.0));\n}\n#ifdef SELECTION_RENDERER\nbool isSelected(const CommonAttribs attribs) {\n    vec3 oid = getDbId().rgb;\n    float id01 = oid.r + oid.g * 256.0;\n    float t = (id01 + 0.5) * (1.0 / 4096.0);\n    float flrt = floor(t);\n    float texU = t - flrt;\n    float id23 = oid.b * (65536.0 / 4096.0) + flrt;\n    t = (id23 + 0.5) / vSelTexSize.y;\n    float texV = fract(t);\n    vec4 selBit = texture2D(tSelectionTexture, vec2(texU, texV));\n    return selBit.r == 1.0;\n}\n#endif\nbool isLayerOff(const CommonAttribs attribs) {\n#ifdef HAS_LAYERS\n    vec4 layerBit = texture2D(tLayerMask, attribs.layerTC);\n    return (layerBit.r == 0.0);\n#else\n    return false;\n#endif\n}\nvec4 getColor(const CommonAttribs attribs) {\n    if (isLayerOff(attribs)) { return vec4(0.0); }\n#ifdef SELECTION_RENDERER\n    if (isSelected(attribs)) { return selectionColor; }\n    return vec4(0.0);\n#else\n    return attribs.color;\n#endif\n}\nvoid main() {\n#ifndef UNPACK_POSITIONS\n    unpackXform = vec4(1.0, 1.0, 0.0, 0.0);\n#endif\n    CommonAttribs attribs; decodeCommonAttribs(attribs);\n    fsColor = getColor(attribs);\n    if (swap != 0.0 ) {\n        if ( fsColor.r == 0.0 && fsColor.g == 0.0 && fsColor.b == 0.0 )\n            fsColor.rgb = vec3(1.0,1.0,1.0);\n        else if ( fsColor.r == 1.0 && fsColor.g == 1.0 && fsColor.b == 1.0 )\n            fsColor.rgb = vec3(0.0,0.0,0.0);\n    }\n    centralVertex = offsetPosition = attribs.pos;\n    float lineWeight = attribs.lineWidthHalf;\n    if (lineWeight > 0.0) {\n        lineWeight = max(0.5, lineWeight * pixelsPerUnit);\n    }\n    else {\n        lineWeight = max(0.5, abs(lineWeight));\n    }\n    fsHalfWidth = lineWeight;\n    dbId = dbId4b / 255.0;\n    fsVpTC     = attribs.vpTC;\n    fsGhosting = attribs.ghosting;\n#ifdef LOADING_ANIMATION\n    if (dbId.rgb == vec3(1.0)) {\n        loadingProgress = 1.0;\n    } else {\n        loadingProgress = smoothstep(0.0, 1.0, meshAnimTime);\n    }\n#endif\n    if      (attribs.geomType == VBB_GT_LINE_SEGMENT)     strokeLineSegment();\n    else strokeIndexedTriangle();\n#if NUM_CUTPLANES > 0\n    vec4 worldPosition = modelMatrix * vec4( offsetPosition.xy, 0.0, 1.0 );\n    vWorldPosition = worldPosition.xyz;\n#endif\n#ifdef VIEWPORT_CLIPPING\n    vPosition = gl_Position.xy;\n#endif\n}\n"
}, function (e, t) {
  e.exports = "\n#include<line_decl_common>\n#include<id_decl_frag>\nuniform highp float pixelsPerUnit;\nuniform highp float aaRange;\nuniform float opacity;\nuniform highp float viewportId;\nuniform highp float swap;\nuniform highp float grayscale;\n#ifdef HAS_LINESTYLES\nuniform sampler2D tLineStyle;\nuniform vec2 vLineStyleTexSize;\n#endif\n#ifdef VIEWPORT_CLIPPING\nuniform highp vec4 viewportBounds;\nvarying highp vec2 vPosition;\nuniform mat4 mvpMatrix;\n#endif\nfloat curveGaussian(float r, float width) {\n    float amt = clamp(abs(r / (width * 1.0)), 0.0, 1.0);\n    amt = max(amt - 0.0, 0.0);\n    float exponent = amt * 2.0;\n    return clamp(exp(-exponent*exponent), 0.0, 1.0);\n}\n#ifdef HAS_LINESTYLES\nfloat getLinePatternPixel(int i, int j) {\n    return texture2D(tLineStyle, (vec2(i, j) + 0.5) / vLineStyleTexSize).x * 255.0;\n}\nfloat getPatternLength(int whichPattern) {\n    float p1 = getLinePatternPixel(0, whichPattern);\n    float p2 = getLinePatternPixel(1, whichPattern);\n    return (p2 * 256.0 + p1);\n}\n#endif\nvoid fillLineSegment() {\n    float radius = abs(fsHalfWidth);\n    float parametricDistance = fsMultipurpose.x;\n    float segmentLength      = fsMultipurpose.y;\n    float totalDistance      = fsMultipurpose.z;\n#ifdef LOADING_ANIMATION\n    float distFromStart = parametricDistance / segmentLength;\n    if (loadingProgress < 1.0 && distFromStart > loadingProgress) {\n        discard;\n    }\n#endif\n#ifdef HAS_LINESTYLES\n    int whichPattern         = int(fsMultipurpose.w);\n    if (whichPattern > 0) {\n        const float TEX_TO_UNIT = 1.0 / 96.0;\n        float patternScale;\n        if (fsHalfWidth < 0.0) {\n            patternScale = LTSCALE;\n        } else {\n            patternScale = LTSCALE * TEX_TO_UNIT * pixelsPerUnit;\n        }\n        float patLen = patternScale * getPatternLength(whichPattern);\n        float phase = mod((totalDistance + parametricDistance), patLen);\n        bool onPixel = true;\n        float radiusPixels = radius + aaRange;\n        for (int i=2; i<MAX_LINESTYLE_LENGTH; i+=2) {\n            float on = getLinePatternPixel(i, whichPattern);\n            if (on == 1.0) on = 0.0;\n            on *= patternScale;\n            onPixel = true;\n            phase -= on;\n            if (phase < 0.0) {\n                break;\n            }\n            else if (phase <= radiusPixels) {\n                onPixel = false;\n                break;\n            }\n            float off = getLinePatternPixel(i+1, whichPattern);\n            if (off <= 1.0) off = 0.0;\n            off *= patternScale;\n            onPixel = false;\n            phase -= off;\n            if (phase < -radiusPixels)\n                discard;\n            if (phase <= 0.0)\n                break;\n        }\n        if (!onPixel && (abs(phase) <= radiusPixels)) {\n            segmentLength = 0.0;\n            parametricDistance = phase;\n        }\n    }\n#endif\n    float dist;\n    float offsetLength2 = dot(fsOffsetDirection, fsOffsetDirection);\n    float ltz = max(0.0, sign(-parametricDistance));\n    float gtsl = max(0.0, sign(parametricDistance - segmentLength));\n    float d = (ltz + gtsl) * (parametricDistance - gtsl * segmentLength);\n    dist = sqrt(max(0.0, offsetLength2 + d*d));\n    float range =  dist - radius;\n    if (range > aaRange) {\n        discard;\n    }\n    gl_FragColor = fsColor;\n    if (range > -aaRange)\n        gl_FragColor.a *= curveGaussian(range+aaRange, aaRange * 2.0);\n}\n#ifdef LOADING_ANIMATION\n    void fillTriangle() { gl_FragColor = vec4(fsColor.rgb, fsColor.a * loadingProgress); }\n#else\n    void fillTriangle() { gl_FragColor = fsColor; }\n#endif\n#if NUM_CUTPLANES > 0\nvarying highp vec3 vWorldPosition;\n#endif\n#include<cutplanes>\nvoid main() {\n    if (fsColor == vec4(0.0)) {\n        discard;\n    }\n#ifdef VIEWPORT_CLIPPING\n    vec2 topLeft = (mvpMatrix  * vec4(viewportBounds.xy, 0., 1.)).xy;\n    vec2 bottomRight = ( mvpMatrix * vec4(viewportBounds.zw, 0., 1.)).xy;\n    vec2 topRight = (mvpMatrix  * vec4(viewportBounds.zy, 0., 1.)).xy;\n    vec2 bottomLeft = (mvpMatrix  * vec4(viewportBounds.xw, 0., 1.)).xy;\n    float leftBound = min(min(topLeft.x, bottomRight.x), min(topRight.x, bottomLeft.x));\n    float rightBound = max(max(topLeft.x, bottomRight.x), max(topRight.x, bottomLeft.x));\n    float topBound = min(min(topLeft.y, bottomRight.y), min(topRight.y, bottomLeft.y));\n    float bottomBound = max(max(topLeft.y, bottomRight.y), max(topRight.y, bottomLeft.y));\n    if(vPosition.x < leftBound || vPosition.x > rightBound || vPosition.y < topBound || vPosition.y > bottomBound) {\n        discard;\n    }\n#endif\n    if (fsHalfWidth == 0.0) {\n        fillTriangle();\n    }\n    else\n        fillLineSegment();\n#ifdef MRT_NORMALS\n    gl_FragData[1] = vec4(0.0);\n#endif\n    float writeId = 1.0;\n    gl_FragColor.a *= opacity;\n    if (gl_FragColor.a == 0.0) {\n        discard;\n    }\n    if (fsGhosting != 0.0 || \n            ((viewportId != 0.0) && (abs(fsVpTC.x * 255.0 + fsVpTC.y) >= 0.5 && abs(fsVpTC.x * 255.0 + fsVpTC.y - viewportId) >= 0.5))) {\n        writeId = 0.0;\n        gl_FragColor.a *= ((swap == 1.0) ? 0.21 : 0.1);\n    }\n#ifndef SELECTION_RENDERER\n    if (grayscale != 0.0) {\n        const vec3 rgb2grey = vec3(0.299, 0.587, 0.114);\n        float gray = dot(gl_FragColor.rgb, rgb2grey);\n        gl_FragColor.rgb = vec3(gray);\n    }\n#endif\n#if NUM_CUTPLANES > 0\n    checkCutPlanes(vWorldPosition);\n#endif\n#include<id_frag>\n}\n"
}, function (e, t) {
  e.exports = "#define HIGHLIGHT_NONE 0\n#define HIGHLIGHT_A 1\n#define HIGHLIGHT_B 2\n#define MIN_DIFF_VAL 0.5\nuniform sampler2D texture1;\nuniform sampler2D texture2;\nuniform float splitPosition;\nuniform int model;\nuniform int highlight;\nuniform vec2 resolution1;\nuniform vec2 resolution2;\nuniform float diff_threshold;\nvarying vec2 vUvA;\nvarying vec2 vUvB;\nconst int BIT_COUNT = 2;\nint modi(int x, int y) {\n    return x - y * (x / y);\n}\nint and(int a, int b) {\n    int result = 0;\n    int n = 1;\n    for(int i = 0; i < BIT_COUNT; i++) {\n        if ((modi(a, 2) == 1) && (modi(b, 2) == 1)) {\n            result += n;\n        }\n        a = a / 2;\n        b = b / 2;\n        n = n * 2;\n        if(!(a > 0 && b > 0)) {\n            break;\n        }\n    }\n    return result;\n}\nfloat toGrayscale(vec4 v) {\n    return dot(v.rgb, vec3(0.299, 0.587, 0.114));\n}\nvoid main() {\n#ifdef SINGLE_MODEL\n    vec4 tex = texture2D(texture1, vUvA);\n    #ifdef SPLIT_VIEW\n    if (model == 1 && gl_FragCoord.x < splitPosition ||\n        model == 2 && gl_FragCoord.x >= splitPosition) {\n        gl_FragColor = tex;\n    } else {\n        discard;\n    }\n    #else\n    float gray = toGrayscale(tex);\n    gl_FragColor.rgb = vec3(gray);\n    #endif\n#else\n    vec4 tex1 = texture2D(texture1, vUvA);\n    vec4 tex2 = texture2D(texture2, vUvB);\n    #ifdef SPLIT_VIEW\n    gl_FragColor = gl_FragCoord.x < splitPosition ? tex1 : tex2;\n    #else\n    float gray1 = toGrayscale(tex1);\n    float gray2 = toGrayscale(tex2);\n    float maxGray = min(gray1, gray2);\n    float delta = gray1 - gray2;\n    gl_FragColor.rgb = vec3(maxGray);\n    if (abs(delta) > diff_threshold) {\n        if (delta < 0.0 && and(highlight, HIGHLIGHT_A) == HIGHLIGHT_A) {\n            gl_FragColor = vec4(max(gray2, MIN_DIFF_VAL), 0.0, 0.0, 1.0);\n        } else if (delta > 0.0 && and(highlight, HIGHLIGHT_B) == HIGHLIGHT_B) {\n            gl_FragColor = vec4(0.0, 0.0, max(gray1, MIN_DIFF_VAL), 1.0);\n        }\n    }\n        #ifdef ADD_THICKENING\n    else {\n        bool found = false;\n        for (int i = 0; i < 3; i++) {\n            for (int j = 0; j < 3; j++) {\n                if (i != 1 && j != 1) {\n                    vec4 nTex1 = texture2D(texture1, vUvA + resolution1*vec2(i - 1, j - 1));\n                    vec4 nTex2 = texture2D(texture2, vUvB + resolution2*vec2(i - 1, j - 1));\n                    float nGray1 = toGrayscale(nTex1);\n                    float nGray2 = toGrayscale(nTex2);\n                    delta = nGray1 - nGray2;\n                    if (abs(delta) > diff_threshold) {\n                        if (delta < 0.0 && and(highlight, HIGHLIGHT_A) == HIGHLIGHT_A) {\n                            gl_FragColor = vec4(1.25*max(nGray2, MIN_DIFF_VAL), 0.25, 0.25, 1.0);\n                        } else if (delta > 0.0 && and(highlight, HIGHLIGHT_B) == HIGHLIGHT_B) {\n                            gl_FragColor = vec4(0.25, 0.25, 1.25*max(nGray1, MIN_DIFF_VAL), 1.0);\n                        }\n                        found = true;\n                        break;\n                    }\n                }\n            }\n            if (found) break;\n        }\n    }\n        #endif\n    #endif\n#endif\n}"
}, function (e, t) {
  e.exports = "varying vec2 vUvA;\nvarying vec2 vUvB;\nuniform vec4 uvTFa;\nuniform vec4 uvTFb;\nuniform vec4 offsetRepeatA;\nuniform vec4 offsetRepeatB;\nvoid main() {\n    vUvA = uv*offsetRepeatA.zw + offsetRepeatA.xy;\n   \n#ifndef SINGLE_MODEL\n    float x = (uv.x - uvTFa.x) / uvTFa.z;\n    float y = (uv.y - uvTFa.y) / uvTFa.w;\n    vec2 uvB;\n    uvB.x = uvTFb.x + x*uvTFb.z;\n    uvB.y = uvTFb.y + y*uvTFb.w;\n    vUvB = uvB * offsetRepeatB.zw + offsetRepeatB.xy;\n#endif\n    gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n}\n"
}, function (e, t) {
  ! function (n, i) {
    "object" == typeof t && void 0 !== e ? e.exports = i() : "function" == typeof define && define.amd ? define(i) : n.ResizeObserver = i()
  }(this, (function () {
    "use strict";
    var e = function () {
        if ("undefined" != typeof Map) return Map;

        function e(e, t) {
          var n = -1;
          return e.some((function (e, i) {
            return e[0] === t && (n = i, !0)
          })), n
        }
        return function () {
          function t() {
            this.__entries__ = []
          }
          var n = {
            size: {
              configurable: !0
            }
          };
          return n.size.get = function () {
            return this.__entries__.length
          }, t.prototype.get = function (t) {
            var n = e(this.__entries__, t),
              i = this.__entries__[n];
            return i && i[1]
          }, t.prototype.set = function (t, n) {
            var i = e(this.__entries__, t);
            ~i ? this.__entries__[i][1] = n : this.__entries__.push([t, n])
          }, t.prototype.delete = function (t) {
            var n = this.__entries__,
              i = e(n, t);
            ~i && n.splice(i, 1)
          }, t.prototype.has = function (t) {
            return !!~e(this.__entries__, t)
          }, t.prototype.clear = function () {
            this.__entries__.splice(0)
          }, t.prototype.forEach = function (e, t) {
            void 0 === t && (t = null);
            for (var n = 0, i = this.__entries__; n < i.length; n += 1) {
              var r = i[n];
              e.call(t, r[1], r[0])
            }
          }, Object.defineProperties(t.prototype, n), t
        }()
      }(),
      t = "undefined" != typeof window && "undefined" != typeof document && window.document === document,
      n = "undefined" != typeof global && global.Math === Math ? global : "undefined" != typeof self && self.Math === Math ? self : "undefined" != typeof window && window.Math === Math ? window : Function("return this")(),
      i = "function" == typeof requestAnimationFrame ? requestAnimationFrame.bind(n) : function (e) {
        return setTimeout((function () {
          return e(Date.now())
        }), 1e3 / 60)
      },
      r = ["top", "right", "bottom", "left", "width", "height", "size", "weight"],
      o = "undefined" != typeof MutationObserver,
      a = function () {
        this.connected_ = !1, this.mutationEventsAdded_ = !1, this.mutationsObserver_ = null, this.observers_ = [], this.onTransitionEnd_ = this.onTransitionEnd_.bind(this), this.refresh = function (e, t) {
          var n = !1,
            r = !1,
            o = 0;

          function a() {
            n && (n = !1, e()), r && l()
          }

          function s() {
            i(a)
          }

          function l() {
            var e = Date.now();
            if (n) {
              if (e - o < 2) return;
              r = !0
            } else n = !0, r = !1, setTimeout(s, 20);
            o = e
          }
          return l
        }(this.refresh.bind(this))
      };
    a.prototype.addObserver = function (e) {
      ~this.observers_.indexOf(e) || this.observers_.push(e), this.connected_ || this.connect_()
    }, a.prototype.removeObserver = function (e) {
      var t = this.observers_,
        n = t.indexOf(e);
      ~n && t.splice(n, 1), !t.length && this.connected_ && this.disconnect_()
    }, a.prototype.refresh = function () {
      this.updateObservers_() && this.refresh()
    }, a.prototype.updateObservers_ = function () {
      var e = this.observers_.filter((function (e) {
        return e.gatherActive(), e.hasActive()
      }));
      return e.forEach((function (e) {
        return e.broadcastActive()
      })), e.length > 0
    }, a.prototype.connect_ = function () {
      t && !this.connected_ && (document.addEventListener("transitionend", this.onTransitionEnd_), window.addEventListener("resize", this.refresh), o ? (this.mutationsObserver_ = new MutationObserver(this.refresh), this.mutationsObserver_.observe(document, {
        attributes: !0,
        childList: !0,
        characterData: !0,
        subtree: !0
      })) : (document.addEventListener("DOMSubtreeModified", this.refresh), this.mutationEventsAdded_ = !0), this.connected_ = !0)
    }, a.prototype.disconnect_ = function () {
      t && this.connected_ && (document.removeEventListener("transitionend", this.onTransitionEnd_), window.removeEventListener("resize", this.refresh), this.mutationsObserver_ && this.mutationsObserver_.disconnect(), this.mutationEventsAdded_ && document.removeEventListener("DOMSubtreeModified", this.refresh), this.mutationsObserver_ = null, this.mutationEventsAdded_ = !1, this.connected_ = !1)
    }, a.prototype.onTransitionEnd_ = function (e) {
      var t = e.propertyName;
      void 0 === t && (t = ""), r.some((function (e) {
        return !!~t.indexOf(e)
      })) && this.refresh()
    }, a.getInstance = function () {
      return this.instance_ || (this.instance_ = new a), this.instance_
    }, a.instance_ = null;
    var s = function (e, t) {
        for (var n = 0, i = Object.keys(t); n < i.length; n += 1) {
          var r = i[n];
          Object.defineProperty(e, r, {
            value: t[r],
            enumerable: !1,
            writable: !1,
            configurable: !0
          })
        }
        return e
      },
      l = function (e) {
        return e && e.ownerDocument && e.ownerDocument.defaultView || n
      },
      c = p(0, 0, 0, 0);

    function u(e) {
      return parseFloat(e) || 0
    }

    function h(e) {
      for (var t = [], n = arguments.length - 1; n-- > 0;) t[n] = arguments[n + 1];
      return t.reduce((function (t, n) {
        return t + u(e["border-" + n + "-width"])
      }), 0)
    }
    var d = "undefined" != typeof SVGGraphicsElement ? function (e) {
      return e instanceof l(e).SVGGraphicsElement
    } : function (e) {
      return e instanceof l(e).SVGElement && "function" == typeof e.getBBox
    };

    function f(e) {
      return t ? d(e) ? p(0, 0, (n = e.getBBox()).width, n.height) : function (e) {
        var t = e.clientWidth,
          n = e.clientHeight;
        if (!t && !n) return c;
        var i, r = l(e).getComputedStyle(e),
          o = function (e) {
            for (var t = {}, n = 0, i = ["top", "right", "bottom", "left"]; n < i.length; n += 1) {
              var r = i[n],
                o = e["padding-" + r];
              t[r] = u(o)
            }
            return t
          }(r),
          a = o.left + o.right,
          s = o.top + o.bottom,
          d = u(r.width),
          f = u(r.height);
        if ("border-box" === r.boxSizing && (Math.round(d + a) !== t && (d -= h(r, "left", "right") + a), Math.round(f + s) !== n && (f -= h(r, "top", "bottom") + s)), (i = e) !== l(i).document.documentElement) {
          var m = Math.round(d + a) - t,
            g = Math.round(f + s) - n;
          1 !== Math.abs(m) && (d -= m), 1 !== Math.abs(g) && (f -= g)
        }
        return p(o.left, o.top, d, f)
      }(e) : c;
      var n
    }

    function p(e, t, n, i) {
      return {
        x: e,
        y: t,
        width: n,
        height: i
      }
    }
    var m = function (e) {
      this.broadcastWidth = 0, this.broadcastHeight = 0, this.contentRect_ = p(0, 0, 0, 0), this.target = e
    };
    m.prototype.isActive = function () {
      var e = f(this.target);
      return this.contentRect_ = e, e.width !== this.broadcastWidth || e.height !== this.broadcastHeight
    }, m.prototype.broadcastRect = function () {
      var e = this.contentRect_;
      return this.broadcastWidth = e.width, this.broadcastHeight = e.height, e
    };
    var g = function (e, t) {
        var n, i, r, o, a, l, c, u = (i = (n = t).x, r = n.y, o = n.width, a = n.height, l = "undefined" != typeof DOMRectReadOnly ? DOMRectReadOnly : Object, c = Object.create(l.prototype), s(c, {
          x: i,
          y: r,
          width: o,
          height: a,
          top: r,
          right: i + o,
          bottom: a + r,
          left: i
        }), c);
        s(this, {
          target: e,
          contentRect: u
        })
      },
      v = function (t, n, i) {
        if (this.activeObservations_ = [], this.observations_ = new e, "function" != typeof t) throw new TypeError("The callback provided as parameter 1 is not a function.");
        this.callback_ = t, this.controller_ = n, this.callbackCtx_ = i
      };
    v.prototype.observe = function (e) {
      if (!arguments.length) throw new TypeError("1 argument required, but only 0 present.");
      if ("undefined" != typeof Element && Element instanceof Object) {
        if (!(e instanceof l(e).Element)) throw new TypeError('parameter 1 is not of type "Element".');
        var t = this.observations_;
        t.has(e) || (t.set(e, new m(e)), this.controller_.addObserver(this), this.controller_.refresh())
      }
    }, v.prototype.unobserve = function (e) {
      if (!arguments.length) throw new TypeError("1 argument required, but only 0 present.");
      if ("undefined" != typeof Element && Element instanceof Object) {
        if (!(e instanceof l(e).Element)) throw new TypeError('parameter 1 is not of type "Element".');
        var t = this.observations_;
        t.has(e) && (t.delete(e), t.size || this.controller_.removeObserver(this))
      }
    }, v.prototype.disconnect = function () {
      this.clearActive(), this.observations_.clear(), this.controller_.removeObserver(this)
    }, v.prototype.gatherActive = function () {
      var e = this;
      this.clearActive(), this.observations_.forEach((function (t) {
        t.isActive() && e.activeObservations_.push(t)
      }))
    }, v.prototype.broadcastActive = function () {
      if (this.hasActive()) {
        var e = this.callbackCtx_,
          t = this.activeObservations_.map((function (e) {
            return new g(e.target, e.broadcastRect())
          }));
        this.callback_.call(e, t, e), this.clearActive()
      }
    }, v.prototype.clearActive = function () {
      this.activeObservations_.splice(0)
    }, v.prototype.hasActive = function () {
      return this.activeObservations_.length > 0
    };
    var y = "undefined" != typeof WeakMap ? new WeakMap : new e,
      b = function (e) {
        if (!(this instanceof b)) throw new TypeError("Cannot call a class as a function.");
        if (!arguments.length) throw new TypeError("1 argument required, but only 0 present.");
        var t = a.getInstance(),
          n = new v(e, t, this);
        y.set(this, n)
      };
    return ["observe", "unobserve", "disconnect"].forEach((function (e) {
      b.prototype[e] = function () {
        return (t = y.get(this))[e].apply(t, arguments);
        var t
      }
    })), void 0 !== n.ResizeObserver ? n.ResizeObserver : b
  }))
}, function (e, t, n) {
  function i(t, n) {
    for (var i in t) t.hasOwnProperty(i) && (e.exports[i] = t[i], n && (e.exports[n][i] = t[i]))
  }
  n(408), n(409), n(410), n(411), n(412), n(413), n(414), n(415), n(416), n(417), n(418), n(419), n(420), n(421), n(422), n(423), n(424), n(425), n(426), n(427), n(428), n(429), n(430), n(431), n(432), n(433), n(434), n(184), n(435), n(436), n(437), n(438), n(439), n(440), n(441), n(442), n(443), n(444), n(445), n(446), n(447), n(448), n(449), n(451), n(452), n(453), n(454), n(456), n(457), n(459), n(460), n(461), n(225), n(462), n(463), n(464), n(465), n(466), n(467), n(468), n(469), n(470), n(471), n(472), n(473), n(474), n(475), n(476), n(477), n(478), n(479), n(480), n(481), n(482), n(483), n(484), n(485), n(486), n(487), n(488), n(489), n(490), n(491), n(492), n(493), n(494), n(495), n(496), n(497), n(498), n(499), n(500), n(501), n(502), n(503), n(504), n(505), n(506), n(507), n(508), n(509), n(510), n(511), n(512), n(514), n(515), n(516), n(517), n(518), n(519), n(520), n(522), n(523), n(524), n(525), n(526), n(527), n(528), n(529), n(530), n(531), n(532), n(533), n(318), n(534), n(535), n(319), n(536), n(537), n(538), n(539), n(320), n(540), n(541), n(542), n(543), n(544), n(545), n(546), n(547), n(548), n(549), n(550), n(551), n(552), n(553), n(554), n(555), n(556), n(557), n(558), n(559), n(560), n(561), n(562), n(563), n(564), n(565), n(567), n(568), n(569), n(570), n(571), n(572), n(573), n(574), n(575), n(576), n(577), n(578), n(579), n(580), n(581), n(582), n(583), n(584), n(585), n(586), n(587), n(588), n(589), n(590), n(591), n(592), n(593), n(594), n(595), n(596), n(597), n(598), n(599), n(234), n(600), n(601), n(602), n(603), n(604), n(605), n(606), n(608), n(609), n(610), n(611), n(612), n(613), n(614), n(615), n(617), n(618), n(619), n(620), n(621), n(622), n(623), n(624), n(625), n(626), n(627), n(628), n(629), n(630), n(631), n(632), n(633), n(634), n(635), n(636), n(637), n(638), n(639), n(640), n(641), n(643), n(644), n(645), n(646), n(647), n(648), n(649), n(650), n(651), n(652), n(653), n(654), n(655), n(656), n(657), n(658), n(659), n(660), n(661), n(662), n(663), n(664), n(665), n(666), n(667), n(668), n(669), n(670), n(671), n(672), n(673), n(674), n(676), n(677), n(678), n(679), n(680), n(681), n(682), n(683), n(684), n(685), n(686), n(687), n(688), n(689), n(690), n(691), n(693), n(330), n(694), e.exports.Autodesk = n(695).Autodesk;
  var r = Object.assign || function (e, t) {
    for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n])
  };
  e.exports.THREE = n(0), e.exports.av = {}, e.exports.avp = {}, e.exports.avu = {}, e.exports.ave = {}, i({
    Hammer: n(168)
  }, "av"), i(n(3), "av"), i(n(3), "avp"), i(n(16), "avp"), i(n(16), "av"), i(n(94), "avp"), i(n(94), "av"), i(n(141), "avp"), i(n(124), "avp"), i(n(8), "av"), i(n(170), "avp"), i(n(1), "avp"), i(n(44), "avp"), i(n(236), "avp"), i(n(143), "avp"), i(n(203), "avp"), i(n(709), "avp"), i(n(710), "avp"), i(n(171), "avp"), i(n(30), "avp"), i(n(144), "avp"), i(n(46), "avp"), i(n(711), "avp"), i(n(237), "avp"), i(n(238), "avp"), i(n(178), "avp"), i(n(36), "avp"), i(n(128), "avp"), i(n(239), "avp"), i(n(70), "avp"), i(n(50), "avp"), i(n(106), "avp"), i(n(116), "avp"), i(n(142), "avp"), i(n(31), "avp"), i(n(10), "avp"), i(n(28), "avp"), i(n(130), "avp"), i(n(13), "avp"), i(n(26), "avp"), i(n(62), "avp"), i(n(58), "avp"), i(n(148), "avp"), i(n(712), "avp"), i(n(126), "avp"), i(n(240), "avp"), i(n(72), "avp"), i(n(260), "avp"), i(n(261), "avp"), i(n(87), "avp"), i(n(253), "avp"), i(n(262), "avp"), i(n(200), "avp"), i(n(53), "avp"), i(n(125), "avp"), i(n(109), "av"), i(n(247), "avp"), i(n(248), "avp"), i(n(131), "avp"), i(n(64), "avp"), i(n(83), "avp"), i(n(176), "avp"), i(n(713), "avp"), i(n(258), "avp"), i(n(259), "avp"), i(n(175), "avp"), i(n(95), "avp"), i(n(174), "avp"), i(n(714), "avp"), i(n(788), "avp"), i(n(9), "av"), i(n(6), "av"), i(n(18), "avp"), i(n(250), "avp"), i(n(249), "avp"), i(n(146), "avp"), i(n(86), "av"), i(n(66), "av"), i(n(42), "av"), i(n(35), "av"), i(n(65), "av"), i(n(715), "av"), i(n(2), "av"), i(n(129), "av"), i(n(98), "av"), i(n(23), "avp"), i(n(256), "avp"), i(n(115), "avp"), i(n(105), "av"), i(n(263), "av"), i(n(241), "avp"), i(n(5), "avp"), i(n(88), "av"), i(n(716), "av"), i(n(90), "av"), i(n(179), "avp"), i(n(172), "avp"), i(n(717), "av"), i(n(173), "av"), i(n(718), "av"), i(n(719), "av"), i(n(257), "av"), i(n(720), "av"), i(n(242), "av"), i(n(81), "avp"), i(n(722), "avp"), i(n(723), "av");
  var o = e.exports.av.MeasureCommon = {};
  r(o, n(136)), o.MeasurementTypes = n(74).MeasurementTypes, o.SnapType = n(21).SnapType, o.Events = n(724).MeasureEvents, o.Measurement = n(725).Measurement, o.SnapResult = n(264).SnapResult, i(n(145), "av"), i(n(12), "av"), i(n(39), "avp"), i(n(785), "avp"), i(n(265), "avp"), i(n(107), "av"), i(n(149), "av"), i(n(254), "avp"), i(n(89), "av"), i(n(255), "avp"), i(n(43), "av"), i(n(244), "av"), i(n(243), "av"), i(n(246), "av"), i(n(245), "av"), i(n(108), "av"), i(n(726), "av"), i(n(251), "av"), i(n(266), "av"), i(n(267), "av"), i(n(268), "av"), i(n(252), "av"), i(n(727), "avp"), i(n(728), "avp"), i(n(729), "avp"), i(n(730), "avp"), i(n(731), "avp"), i(n(104), "avp"), i(n(45), "avp"), i(n(786), "avp"), i(n(73), "avp"), i(n(47), "avp"), i(n(54), "av"), i(n(732), "av"), i(n(733), "avp"), i(n(734), "avp"), n(735), i(n(269), "avu"), i(n(270), "avu"), i(n(132), "avu"), i(n(271), "avu"), i(n(33), "avp"), i(n(771), "avu"), i(n(48), "avu"), i(n(272), "avp"), i(n(774), "avp"), i(n(110), "avp"), i(n(117), "avp"), i(n(111), "avu"), i(n(82), "avu"), i(n(205), "avu"), i(n(273), "avp"), i(n(127), "ave"), i(n(37), "avu"), i(n(49), "avu"), i(n(11), "avu"), i(n(97), "avu"), i(n(206), "avu"), i(n(274), "avu"), i(n(147), "avp"), i(n(75), "avu"), i(n(775), "avu"), i(n(278), "avu"), i(n(275), "avp"), i(n(276), "ave"), i(n(277), "ave"), i(n(177), "ave"), i(n(776), "ave"), i(n(67), "av"), i(n(777), "av"), i(n(787), "avu"), i(n(784), "av"), i(n(780), "av"), i(n(279), "av"), i(n(781), "av"), i(n(782), "avp"), n(783).initializeLegacyNamespaces(e.exports)
}, function (e, t, n) {
  "use strict";
  var i = n(4),
    r = n(17),
    o = n(38),
    a = n(15),
    s = n(24),
    l = n(214),
    c = n(289),
    u = n(14),
    h = n(40),
    d = n(137),
    f = n(22),
    p = n(7),
    m = n(34),
    g = n(76),
    v = n(84),
    y = n(99),
    b = n(85),
    _ = n(157),
    x = n(118),
    w = n(292),
    E = n(213),
    A = n(60),
    S = n(32),
    M = n(180),
    T = n(56),
    C = n(68),
    P = n(182),
    L = n(181),
    D = n(154),
    I = n(153),
    R = n(25),
    O = n(293),
    k = n(61),
    N = n(91),
    F = n(51),
    U = n(57).forEach,
    V = L("hidden"),
    B = R("toPrimitive"),
    z = F.set,
    G = F.getterFor("Symbol"),
    H = Object.prototype,
    W = r.Symbol,
    j = o("JSON", "stringify"),
    q = A.f,
    X = S.f,
    Y = w.f,
    K = M.f,
    Q = P("symbols"),
    Z = P("op-symbols"),
    J = P("string-to-symbol-registry"),
    $ = P("symbol-to-string-registry"),
    ee = P("wks"),
    te = r.QObject,
    ne = !te || !te.prototype || !te.prototype.findChild,
    ie = s && u((function () {
      return 7 != b(X({}, "a", {
        get: function () {
          return X(this, "a", {
            value: 7
          }).a
        }
      })).a
    })) ? function (e, t, n) {
      var i = q(H, t);
      i && delete H[t], X(e, t, n), i && e !== H && X(H, t, i)
    } : X,
    re = function (e, t) {
      var n = Q[e] = b(W.prototype);
      return z(n, {
        type: "Symbol",
        tag: e,
        description: t
      }), s || (n.description = t), n
    },
    oe = c ? function (e) {
      return "symbol" == typeof e
    } : function (e) {
      return Object(e) instanceof W
    },
    ae = function (e, t, n) {
      e === H && ae(Z, t, n), p(e);
      var i = v(t, !0);
      return p(n), h(Q, i) ? (n.enumerable ? (h(e, V) && e[V][i] && (e[V][i] = !1), n = b(n, {
        enumerable: y(0, !1)
      })) : (h(e, V) || X(e, V, y(1, {})), e[V][i] = !0), ie(e, i, n)) : X(e, i, n)
    },
    se = function (e, t) {
      p(e);
      var n = g(t),
        i = _(n).concat(he(n));
      return U(i, (function (t) {
        s && !le.call(n, t) || ae(e, t, n[t])
      })), e
    },
    le = function (e) {
      var t = v(e, !0),
        n = K.call(this, t);
      return !(this === H && h(Q, t) && !h(Z, t)) && (!(n || !h(this, t) || !h(Q, t) || h(this, V) && this[V][t]) || n)
    },
    ce = function (e, t) {
      var n = g(e),
        i = v(t, !0);
      if (n !== H || !h(Q, i) || h(Z, i)) {
        var r = q(n, i);
        return !r || !h(Q, i) || h(n, V) && n[V][i] || (r.enumerable = !0), r
      }
    },
    ue = function (e) {
      var t = Y(g(e)),
        n = [];
      return U(t, (function (e) {
        h(Q, e) || h(D, e) || n.push(e)
      })), n
    },
    he = function (e) {
      var t = e === H,
        n = Y(t ? Z : g(e)),
        i = [];
      return U(n, (function (e) {
        !h(Q, e) || t && !h(H, e) || i.push(Q[e])
      })), i
    };
  (l || (C((W = function () {
    if (this instanceof W) throw TypeError("Symbol is not a constructor");
    var e = arguments.length && void 0 !== arguments[0] ? String(arguments[0]) : void 0,
      t = I(e),
      n = function (e) {
        this === H && n.call(Z, e), h(this, V) && h(this[V], t) && (this[V][t] = !1), ie(this, t, y(1, e))
      };
    return s && ne && ie(H, t, {
      configurable: !0,
      set: n
    }), re(t, e)
  }).prototype, "toString", (function () {
    return G(this).tag
  })), C(W, "withoutSetter", (function (e) {
    return re(I(e), e)
  })), M.f = le, S.f = ae, A.f = ce, x.f = w.f = ue, E.f = he, O.f = function (e) {
    return re(R(e), e)
  }, s && (X(W.prototype, "description", {
    configurable: !0,
    get: function () {
      return G(this).description
    }
  }), a || C(H, "propertyIsEnumerable", le, {
    unsafe: !0
  }))), i({
    global: !0,
    wrap: !0,
    forced: !l,
    sham: !l
  }, {
    Symbol: W
  }), U(_(ee), (function (e) {
    k(e)
  })), i({
    target: "Symbol",
    stat: !0,
    forced: !l
  }, {
    for: function (e) {
      var t = String(e);
      if (h(J, t)) return J[t];
      var n = W(t);
      return J[t] = n, $[n] = t, n
    },
    keyFor: function (e) {
      if (!oe(e)) throw TypeError(e + " is not a symbol");
      if (h($, e)) return $[e]
    },
    useSetter: function () {
      ne = !0
    },
    useSimple: function () {
      ne = !1
    }
  }), i({
    target: "Object",
    stat: !0,
    forced: !l,
    sham: !s
  }, {
    create: function (e, t) {
      return void 0 === t ? b(e) : se(b(e), t)
    },
    defineProperty: ae,
    defineProperties: se,
    getOwnPropertyDescriptor: ce
  }), i({
    target: "Object",
    stat: !0,
    forced: !l
  }, {
    getOwnPropertyNames: ue,
    getOwnPropertySymbols: he
  }), i({
    target: "Object",
    stat: !0,
    forced: u((function () {
      E.f(1)
    }))
  }, {
    getOwnPropertySymbols: function (e) {
      return E.f(m(e))
    }
  }), j) && i({
    target: "JSON",
    stat: !0,
    forced: !l || u((function () {
      var e = W();
      return "[null]" != j([e]) || "{}" != j({
        a: e
      }) || "{}" != j(Object(e))
    }))
  }, {
    stringify: function (e, t, n) {
      for (var i, r = [e], o = 1; arguments.length > o;) r.push(arguments[o++]);
      if (i = t, (f(t) || void 0 !== e) && !oe(e)) return d(t) || (t = function (e, t) {
        if ("function" == typeof i && (t = i.call(this, e, t)), !oe(t)) return t
      }), r[1] = t, j.apply(null, r)
    }
  });
  W.prototype[B] || T(W.prototype, B, W.prototype.valueOf), N(W, "Symbol"), D[V] = !0
}, function (e, t, n) {
  "use strict";
  var i = n(4),
    r = n(24),
    o = n(17),
    a = n(40),
    s = n(22),
    l = n(32).f,
    c = n(286),
    u = o.Symbol;
  if (r && "function" == typeof u && (!("description" in u.prototype) || void 0 !== u().description)) {
    var h = {},
      d = function () {
        var e = arguments.length < 1 || void 0 === arguments[0] ? void 0 : String(arguments[0]),
          t = this instanceof d ? new u(e) : void 0 === e ? u() : u(e);
        return "" === e && (h[t] = !0), t
      };
    c(d, u);
    var f = d.prototype = u.prototype;
    f.constructor = d;
    var p = f.toString,
      m = "Symbol(test)" == String(u("test")),
      g = /^Symbol\((.*)\)[^)]+$/;
    l(f, "description", {
      configurable: !0,
      get: function () {
        var e = s(this) ? this.valueOf() : this,
          t = p.call(e);
        if (a(h, e)) return "";
        var n = m ? t.slice(7, -1) : t.replace(g, "$1");
        return "" === n ? void 0 : n
      }
    }), i({
      global: !0,
      forced: !0
    }, {
      Symbol: d
    })
  }
}, function (e, t, n) {
  n(61)("asyncIterator")
}, function (e, t, n) {
  n(61)("hasInstance")
}, function (e, t, n) {
  n(61)("isConcatSpreadable")
}, function (e, t, n) {
  n(61)("iterator")
}, function (e, t, n) {
  n(61)("match")
}, function (e, t, n) {
  n(61)("replace")
}, function (e, t, n) {
  n(61)("search")
}, function (e, t, n) {
  n(61)("species")
}, function (e, t, n) {
  n(61)("split")
}, function (e, t, n) {
  n(61)("toPrimitive")
}, function (e, t, n) {
  n(61)("toStringTag")
}, function (e, t, n) {
  n(61)("unscopables")
}, function (e, t, n) {
  "use strict";
  var i = n(4),
    r = n(14),
    o = n(137),
    a = n(22),
    s = n(34),
    l = n(27),
    c = n(119),
    u = n(158),
    h = n(159),
    d = n(25),
    f = n(215),
    p = d("isConcatSpreadable"),
    m = f >= 51 || !r((function () {
      var e = [];
      return e[p] = !1, e.concat()[0] !== e
    })),
    g = h("concat"),
    v = function (e) {
      if (!a(e)) return !1;
      var t = e[p];
      return void 0 !== t ? !!t : o(e)
    };
  i({
    target: "Array",
    proto: !0,
    forced: !m || !g
  }, {
    concat: function (e) {
      var t, n, i, r, o, a = s(this),
        h = u(a, 0),
        d = 0;
      for (t = -1, i = arguments.length; t < i; t++)
        if (o = -1 === t ? a : arguments[t], v(o)) {
          if (d + (r = l(o.length)) > 9007199254740991) throw TypeError("Maximum allowed index exceeded");
          for (n = 0; n < r; n++, d++) n in o && c(h, d, o[n])
        } else {
          if (d >= 9007199254740991) throw TypeError("Maximum allowed index exceeded");
          c(h, d++, o)
        } return h.length = d, h
    }
  })
}, function (e, t, n) {
  var i = n(4),
    r = n(294),
    o = n(92);
  i({
    target: "Array",
    proto: !0
  }, {
    copyWithin: r
  }), o("copyWithin")
}, function (e, t, n) {
  "use strict";
  var i = n(4),
    r = n(57).every,
    o = n(100),
    a = n(71),
    s = o("every"),
    l = a("every");
  i({
    target: "Array",
    proto: !0,
    forced: !s || !l
  }, {
    every: function (e) {
      return r(this, e, arguments.length > 1 ? arguments[1] : void 0)
    }
  })
}, function (e, t, n) {
  var i = n(4),
    r = n(217),
    o = n(92);
  i({
    target: "Array",
    proto: !0
  }, {
    fill: r
  }), o("fill")
}, function (e, t, n) {
  "use strict";
  var i = n(4),
    r = n(57).filter,
    o = n(159),
    a = n(71),
    s = o("filter"),
    l = a("filter");
  i({
    target: "Array",
    proto: !0,
    forced: !s || !l
  }, {
    filter: function (e) {
      return r(this, e, arguments.length > 1 ? arguments[1] : void 0)
    }
  })
}, function (e, t, n) {
  "use strict";
  var i = n(4),
    r = n(57).find,
    o = n(92),
    a = n(71),
    s = !0,
    l = a("find");
  "find" in [] && Array(1).find((function () {
    s = !1
  })), i({
    target: "Array",
    proto: !0,
    forced: s || !l
  }, {
    find: function (e) {
      return r(this, e, arguments.length > 1 ? arguments[1] : void 0)
    }
  }), o("find")
}, function (e, t, n) {
  "use strict";
  var i = n(4),
    r = n(57).findIndex,
    o = n(92),
    a = n(71),
    s = !0,
    l = a("findIndex");
  "findIndex" in [] && Array(1).findIndex((function () {
    s = !1
  })), i({
    target: "Array",
    proto: !0,
    forced: s || !l
  }, {
    findIndex: function (e) {
      return r(this, e, arguments.length > 1 ? arguments[1] : void 0)
    }
  }), o("findIndex")
}, function (e, t, n) {
  "use strict";
  var i = n(4),
    r = n(295),
    o = n(34),
    a = n(27),
    s = n(77),
    l = n(158);
  i({
    target: "Array",
    proto: !0
  }, {
    flat: function () {
      var e = arguments.length ? arguments[0] : void 0,
        t = o(this),
        n = a(t.length),
        i = l(t, 0);
      return i.length = r(i, t, t, n, 0, void 0 === e ? 1 : s(e)), i
    }
  })
}, function (e, t, n) {
  "use strict";
  var i = n(4),
    r = n(295),
    o = n(34),
    a = n(27),
    s = n(20),
    l = n(158);
  i({
    target: "Array",
    proto: !0
  }, {
    flatMap: function (e) {
      var t, n = o(this),
        i = a(n.length);
      return s(e), (t = l(n, 0)).length = r(t, n, n, i, 0, 1, e, arguments.length > 1 ? arguments[1] : void 0), t
    }
  })
}, function (e, t, n) {
  "use strict";
  var i = n(4),
    r = n(296);
  i({
    target: "Array",
    proto: !0,
    forced: [].forEach != r
  }, {
    forEach: r
  })
}, function (e, t, n) {
  var i = n(4),
    r = n(297);
  i({
    target: "Array",
    stat: !0,
    forced: !n(183)((function (e) {
      Array.from(e)
    }))
  }, {
    from: r
  })
}, function (e, t, n) {
  "use strict";
  var i = n(4),
    r = n(155).includes,
    o = n(92);
  i({
    target: "Array",
    proto: !0,
    forced: !n(71)("indexOf", {
      ACCESSORS: !0,
      1: 0
    })
  }, {
    includes: function (e) {
      return r(this, e, arguments.length > 1 ? arguments[1] : void 0)
    }
  }), o("includes")
}, function (e, t, n) {
  "use strict";
  var i = n(4),
    r = n(155).indexOf,
    o = n(100),
    a = n(71),
    s = [].indexOf,
    l = !!s && 1 / [1].indexOf(1, -0) < 0,
    c = o("indexOf"),
    u = a("indexOf", {
      ACCESSORS: !0,
      1: 0
    });
  i({
    target: "Array",
    proto: !0,
    forced: l || !c || !u
  }, {
    indexOf: function (e) {
      return l ? s.apply(this, arguments) || 0 : r(this, e, arguments.length > 1 ? arguments[1] : void 0)
    }
  })
}, function (e, t, n) {
  "use strict";
  var i = n(4),
    r = n(152),
    o = n(76),
    a = n(100),
    s = [].join,
    l = r != Object,
    c = a("join", ",");
  i({
    target: "Array",
    proto: !0,
    forced: l || !c
  }, {
    join: function (e) {
      return s.call(o(this), void 0 === e ? "," : e)
    }
  })
}, function (e, t, n) {
  var i = n(4),
    r = n(301);
  i({
    target: "Array",
    proto: !0,
    forced: r !== [].lastIndexOf
  }, {
    lastIndexOf: r
  })
}, function (e, t, n) {
  "use strict";
  var i = n(4),
    r = n(57).map,
    o = n(159),
    a = n(71),
    s = o("map"),
    l = a("map");
  i({
    target: "Array",
    proto: !0,
    forced: !s || !l
  }, {
    map: function (e) {
      return r(this, e, arguments.length > 1 ? arguments[1] : void 0)
    }
  })
}, function (e, t, n) {
  "use strict";
  var i = n(4),
    r = n(14),
    o = n(119);
  i({
    target: "Array",
    stat: !0,
    forced: r((function () {
      function e() {}
      return !(Array.of.call(e) instanceof e)
    }))
  }, {
    of: function () {
      for (var e = 0, t = arguments.length, n = new("function" == typeof this ? this : Array)(t); t > e;) o(n, e, arguments[e++]);
      return n.length = t, n
    }
  })
}, function (e, t, n) {
  "use strict";
  var i = n(4),
    r = n(185).left,
    o = n(100),
    a = n(71),
    s = o("reduce"),
    l = a("reduce", {
      1: 0
    });
  i({
    target: "Array",
    proto: !0,
    forced: !s || !l
  }, {
    reduce: function (e) {
      return r(this, e, arguments.length, arguments.length > 1 ? arguments[1] : void 0)
    }
  })
}, function (e, t, n) {
  "use strict";
  var i = n(4),
    r = n(185).right,
    o = n(100),
    a = n(71),
    s = o("reduceRight"),
    l = a("reduce", {
      1: 0
    });
  i({
    target: "Array",
    proto: !0,
    forced: !s || !l
  }, {
    reduceRight: function (e) {
      return r(this, e, arguments.length, arguments.length > 1 ? arguments[1] : void 0)
    }
  })
}, function (e, t, n) {
  "use strict";
  var i = n(4),
    r = n(137),
    o = [].reverse,
    a = [1, 2];
  i({
    target: "Array",
    proto: !0,
    forced: String(a) === String(a.reverse())
  }, {
    reverse: function () {
      return r(this) && (this.length = this.length), o.call(this)
    }
  })
}, function (e, t, n) {
  "use strict";
  var i = n(4),
    r = n(22),
    o = n(137),
    a = n(112),
    s = n(27),
    l = n(76),
    c = n(119),
    u = n(25),
    h = n(159),
    d = n(71),
    f = h("slice"),
    p = d("slice", {
      ACCESSORS: !0,
      0: 0,
      1: 2
    }),
    m = u("species"),
    g = [].slice,
    v = Math.max;
  i({
    target: "Array",
    proto: !0,
    forced: !f || !p
  }, {
    slice: function (e, t) {
      var n, i, u, h = l(this),
        d = s(h.length),
        f = a(e, d),
        p = a(void 0 === t ? d : t, d);
      if (o(h) && ("function" != typeof (n = h.constructor) || n !== Array && !o(n.prototype) ? r(n) && null === (n = n[m]) && (n = void 0) : n = void 0, n === Array || void 0 === n)) return g.call(h, f, p);
      for (i = new(void 0 === n ? Array : n)(v(p - f, 0)), u = 0; f < p; f++, u++) f in h && c(i, u, h[f]);
      return i.length = u, i
    }
  })
}, function (e, t, n) {
  "use strict";
  var i = n(4),
    r = n(57).some,
    o = n(100),
    a = n(71),
    s = o("some"),
    l = a("some");
  i({
    target: "Array",
    proto: !0,
    forced: !s || !l
  }, {
    some: function (e) {
      return r(this, e, arguments.length > 1 ? arguments[1] : void 0)
    }
  })
}, function (e, t, n) {
  "use strict";
  var i = n(4),
    r = n(20),
    o = n(34),
    a = n(14),
    s = n(100),
    l = [],
    c = l.sort,
    u = a((function () {
      l.sort(void 0)
    })),
    h = a((function () {
      l.sort(null)
    })),
    d = s("sort");
  i({
    target: "Array",
    proto: !0,
    forced: u || !h || !d
  }, {
    sort: function (e) {
      return void 0 === e ? c.call(o(this)) : c.call(o(this), r(e))
    }
  })
}, function (e, t, n) {
  n(120)("Array")
}, function (e, t, n) {
  "use strict";
  var i = n(4),
    r = n(112),
    o = n(77),
    a = n(27),
    s = n(34),
    l = n(158),
    c = n(119),
    u = n(159),
    h = n(71),
    d = u("splice"),
    f = h("splice", {
      ACCESSORS: !0,
      0: 0,
      1: 2
    }),
    p = Math.max,
    m = Math.min;
  i({
    target: "Array",
    proto: !0,
    forced: !d || !f
  }, {
    splice: function (e, t) {
      var n, i, u, h, d, f, g = s(this),
        v = a(g.length),
        y = r(e, v),
        b = arguments.length;
      if (0 === b ? n = i = 0 : 1 === b ? (n = 0, i = v - y) : (n = b - 2, i = m(p(o(t), 0), v - y)), v + n - i > 9007199254740991) throw TypeError("Maximum allowed length exceeded");
      for (u = l(g, i), h = 0; h < i; h++)(d = y + h) in g && c(u, h, g[d]);
      if (u.length = i, n < i) {
        for (h = y; h < v - i; h++) f = h + n, (d = h + i) in g ? g[f] = g[d] : delete g[f];
        for (h = v; h > v - i + n; h--) delete g[h - 1]
      } else if (n > i)
        for (h = v - i; h > y; h--) f = h + n - 1, (d = h + i - 1) in g ? g[f] = g[d] : delete g[f];
      for (h = 0; h < n; h++) g[h + y] = arguments[h + 2];
      return g.length = v - i + n, u
    }
  })
}, function (e, t, n) {
  n(92)("flat")
}, function (e, t, n) {
  n(92)("flatMap")
}, function (e, t, n) {
  "use strict";
  var i = n(4),
    r = n(17),
    o = n(186),
    a = n(120),
    s = o.ArrayBuffer;
  i({
    global: !0,
    forced: r.ArrayBuffer !== s
  }, {
    ArrayBuffer: s
  }), a("ArrayBuffer")
}, function (e, t) {
  var n = Math.abs,
    i = Math.pow,
    r = Math.floor,
    o = Math.log,
    a = Math.LN2;
  e.exports = {
    pack: function (e, t, s) {
      var l, c, u, h = new Array(s),
        d = 8 * s - t - 1,
        f = (1 << d) - 1,
        p = f >> 1,
        m = 23 === t ? i(2, -24) - i(2, -77) : 0,
        g = e < 0 || 0 === e && 1 / e < 0 ? 1 : 0,
        v = 0;
      for ((e = n(e)) != e || e === 1 / 0 ? (c = e != e ? 1 : 0, l = f) : (l = r(o(e) / a), e * (u = i(2, -l)) < 1 && (l--, u *= 2), (e += l + p >= 1 ? m / u : m * i(2, 1 - p)) * u >= 2 && (l++, u /= 2), l + p >= f ? (c = 0, l = f) : l + p >= 1 ? (c = (e * u - 1) * i(2, t), l += p) : (c = e * i(2, p - 1) * i(2, t), l = 0)); t >= 8; h[v++] = 255 & c, c /= 256, t -= 8);
      for (l = l << t | c, d += t; d > 0; h[v++] = 255 & l, l /= 256, d -= 8);
      return h[--v] |= 128 * g, h
    },
    unpack: function (e, t) {
      var n, r = e.length,
        o = 8 * r - t - 1,
        a = (1 << o) - 1,
        s = a >> 1,
        l = o - 7,
        c = r - 1,
        u = e[c--],
        h = 127 & u;
      for (u >>= 7; l > 0; h = 256 * h + e[c], c--, l -= 8);
      for (n = h & (1 << -l) - 1, h >>= -l, l += t; l > 0; n = 256 * n + e[c], c--, l -= 8);
      if (0 === h) h = 1 - s;
      else {
        if (h === a) return n ? NaN : u ? -1 / 0 : 1 / 0;
        n += i(2, t), h -= s
      }
      return (u ? -1 : 1) * n * i(2, h - t)
    }
  }
}, function (e, t, n) {
  var i = n(4),
    r = n(29);
  i({
    target: "ArrayBuffer",
    stat: !0,
    forced: !r.NATIVE_ARRAY_BUFFER_VIEWS
  }, {
    isView: r.isView
  })
}, function (e, t, n) {
  "use strict";
  var i = n(4),
    r = n(14),
    o = n(186),
    a = n(7),
    s = n(112),
    l = n(27),
    c = n(52),
    u = o.ArrayBuffer,
    h = o.DataView,
    d = u.prototype.slice;
  i({
    target: "ArrayBuffer",
    proto: !0,
    unsafe: !0,
    forced: r((function () {
      return !new u(2).slice(1, void 0).byteLength
    }))
  }, {
    slice: function (e, t) {
      if (void 0 !== d && void 0 === t) return d.call(a(this), e);
      for (var n = a(this).byteLength, i = s(e, n), r = s(void 0 === t ? n : t, n), o = new(c(this, u))(l(r - i)), f = new h(this), p = new h(o), m = 0; i < r;) p.setUint8(m++, f.getUint8(i++));
      return o
    }
  })
}, function (e, t, n) {
  var i = n(4),
    r = n(186);
  i({
    global: !0,
    forced: !n(222)
  }, {
    DataView: r.DataView
  })
}, function (e, t, n) {
  var i = n(4),
    r = n(455);
  i({
    target: "Date",
    proto: !0,
    forced: Date.prototype.toISOString !== r
  }, {
    toISOString: r
  })
}, function (e, t, n) {
  "use strict";
  var i = n(14),
    r = n(223).start,
    o = Math.abs,
    a = Date.prototype,
    s = a.getTime,
    l = a.toISOString;
  e.exports = i((function () {
    return "0385-07-25T07:06:39.999Z" != l.call(new Date(-5e13 - 1))
  })) || !i((function () {
    l.call(new Date(NaN))
  })) ? function () {
    if (!isFinite(s.call(this))) throw RangeError("Invalid time value");
    var e = this.getUTCFullYear(),
      t = this.getUTCMilliseconds(),
      n = e < 0 ? "-" : e > 9999 ? "+" : "";
    return n + r(o(e), n ? 6 : 4, 0) + "-" + r(this.getUTCMonth() + 1, 2, 0) + "-" + r(this.getUTCDate(), 2, 0) + "T" + r(this.getUTCHours(), 2, 0) + ":" + r(this.getUTCMinutes(), 2, 0) + ":" + r(this.getUTCSeconds(), 2, 0) + "." + r(t, 3, 0) + "Z"
  } : l
}, function (e, t, n) {
  "use strict";
  var i = n(4),
    r = n(14),
    o = n(34),
    a = n(84);
  i({
    target: "Date",
    proto: !0,
    forced: r((function () {
      return null !== new Date(NaN).toJSON() || 1 !== Date.prototype.toJSON.call({
        toISOString: function () {
          return 1
        }
      })
    }))
  }, {
    toJSON: function (e) {
      var t = o(this),
        n = a(t);
      return "number" != typeof n || isFinite(n) ? t.toISOString() : null
    }
  })
}, function (e, t, n) {
  var i = n(56),
    r = n(458),
    o = n(25)("toPrimitive"),
    a = Date.prototype;
  o in a || i(a, o, r)
}, function (e, t, n) {
  "use strict";
  var i = n(7),
    r = n(84);
  e.exports = function (e) {
    if ("string" !== e && "number" !== e && "default" !== e) throw TypeError("Incorrect hint");
    return r(i(this), "number" !== e)
  }
}, function (e, t, n) {
  "use strict";
  var i = n(22),
    r = n(32),
    o = n(69),
    a = n(25)("hasInstance"),
    s = Function.prototype;
  a in s || r.f(s, a, {
    value: function (e) {
      if ("function" != typeof this || !i(e)) return !1;
      if (!i(this.prototype)) return e instanceof this;
      for (; e = o(e);)
        if (this.prototype === e) return !0;
      return !1
    }
  })
}, function (e, t, n) {
  var i = n(24),
    r = n(32).f,
    o = Function.prototype,
    a = o.toString,
    s = /^\s*function ([^ (]*)/;
  !i || "name" in o || r(o, "name", {
    configurable: !0,
    get: function () {
      try {
        return a.call(this).match(s)[1]
      } catch (e) {
        return ""
      }
    }
  })
}, function (e, t, n) {
  var i = n(17);
  n(91)(i.JSON, "JSON", !0)
}, function (e, t, n) {
  var i = n(4),
    r = n(304),
    o = Math.acosh,
    a = Math.log,
    s = Math.sqrt,
    l = Math.LN2;
  i({
    target: "Math",
    stat: !0,
    forced: !o || 710 != Math.floor(o(Number.MAX_VALUE)) || o(1 / 0) != 1 / 0
  }, {
    acosh: function (e) {
      return (e = +e) < 1 ? NaN : e > 94906265.62425156 ? a(e) + l : r(e - 1 + s(e - 1) * s(e + 1))
    }
  })
}, function (e, t, n) {
  var i = n(4),
    r = Math.asinh,
    o = Math.log,
    a = Math.sqrt;
  i({
    target: "Math",
    stat: !0,
    forced: !(r && 1 / r(0) > 0)
  }, {
    asinh: function e(t) {
      return isFinite(t = +t) && 0 != t ? t < 0 ? -e(-t) : o(t + a(t * t + 1)) : t
    }
  })
}, function (e, t, n) {
  var i = n(4),
    r = Math.atanh,
    o = Math.log;
  i({
    target: "Math",
    stat: !0,
    forced: !(r && 1 / r(-0) < 0)
  }, {
    atanh: function (e) {
      return 0 == (e = +e) ? e : o((1 + e) / (1 - e)) / 2
    }
  })
}, function (e, t, n) {
  var i = n(4),
    r = n(226),
    o = Math.abs,
    a = Math.pow;
  i({
    target: "Math",
    stat: !0
  }, {
    cbrt: function (e) {
      return r(e = +e) * a(o(e), 1 / 3)
    }
  })
}, function (e, t, n) {
  var i = n(4),
    r = Math.floor,
    o = Math.log,
    a = Math.LOG2E;
  i({
    target: "Math",
    stat: !0
  }, {
    clz32: function (e) {
      return (e >>>= 0) ? 31 - r(o(e + .5) * a) : 32
    }
  })
}, function (e, t, n) {
  var i = n(4),
    r = n(189),
    o = Math.cosh,
    a = Math.abs,
    s = Math.E;
  i({
    target: "Math",
    stat: !0,
    forced: !o || o(710) === 1 / 0
  }, {
    cosh: function (e) {
      var t = r(a(e) - 1) + 1;
      return (t + 1 / (t * s * s)) * (s / 2)
    }
  })
}, function (e, t, n) {
  var i = n(4),
    r = n(189);
  i({
    target: "Math",
    stat: !0,
    forced: r != Math.expm1
  }, {
    expm1: r
  })
}, function (e, t, n) {
  n(4)({
    target: "Math",
    stat: !0
  }, {
    fround: n(305)
  })
}, function (e, t, n) {
  var i = n(4),
    r = Math.hypot,
    o = Math.abs,
    a = Math.sqrt;
  i({
    target: "Math",
    stat: !0,
    forced: !!r && r(1 / 0, NaN) !== 1 / 0
  }, {
    hypot: function (e, t) {
      for (var n, i, r = 0, s = 0, l = arguments.length, c = 0; s < l;) c < (n = o(arguments[s++])) ? (r = r * (i = c / n) * i + 1, c = n) : r += n > 0 ? (i = n / c) * i : n;
      return c === 1 / 0 ? 1 / 0 : c * a(r)
    }
  })
}, function (e, t, n) {
  var i = n(4),
    r = n(14),
    o = Math.imul;
  i({
    target: "Math",
    stat: !0,
    forced: r((function () {
      return -5 != o(4294967295, 5) || 2 != o.length
    }))
  }, {
    imul: function (e, t) {
      var n = +e,
        i = +t,
        r = 65535 & n,
        o = 65535 & i;
      return 0 | r * o + ((65535 & n >>> 16) * o + r * (65535 & i >>> 16) << 16 >>> 0)
    }
  })
}, function (e, t, n) {
  var i = n(4),
    r = Math.log,
    o = Math.LOG10E;
  i({
    target: "Math",
    stat: !0
  }, {
    log10: function (e) {
      return r(e) * o
    }
  })
}, function (e, t, n) {
  n(4)({
    target: "Math",
    stat: !0
  }, {
    log1p: n(304)
  })
}, function (e, t, n) {
  var i = n(4),
    r = Math.log,
    o = Math.LN2;
  i({
    target: "Math",
    stat: !0
  }, {
    log2: function (e) {
      return r(e) / o
    }
  })
}, function (e, t, n) {
  n(4)({
    target: "Math",
    stat: !0
  }, {
    sign: n(226)
  })
}, function (e, t, n) {
  var i = n(4),
    r = n(14),
    o = n(189),
    a = Math.abs,
    s = Math.exp,
    l = Math.E;
  i({
    target: "Math",
    stat: !0,
    forced: r((function () {
      return -2e-17 != Math.sinh(-2e-17)
    }))
  }, {
    sinh: function (e) {
      return a(e = +e) < 1 ? (o(e) - o(-e)) / 2 : (s(e - 1) - s(-e - 1)) * (l / 2)
    }
  })
}, function (e, t, n) {
  var i = n(4),
    r = n(189),
    o = Math.exp;
  i({
    target: "Math",
    stat: !0
  }, {
    tanh: function (e) {
      var t = r(e = +e),
        n = r(-e);
      return t == 1 / 0 ? 1 : n == 1 / 0 ? -1 : (t - n) / (o(e) + o(-e))
    }
  })
}, function (e, t, n) {
  n(91)(Math, "Math", !0)
}, function (e, t, n) {
  var i = n(4),
    r = Math.ceil,
    o = Math.floor;
  i({
    target: "Math",
    stat: !0
  }, {
    trunc: function (e) {
      return (e > 0 ? o : r)(e)
    }
  })
}, function (e, t, n) {
  "use strict";
  var i = n(24),
    r = n(17),
    o = n(156),
    a = n(68),
    s = n(40),
    l = n(80),
    c = n(188),
    u = n(84),
    h = n(14),
    d = n(85),
    f = n(118).f,
    p = n(60).f,
    m = n(32).f,
    g = n(138).trim,
    v = r.Number,
    y = v.prototype,
    b = "Number" == l(d(y)),
    _ = function (e) {
      var t, n, i, r, o, a, s, l, c = u(e, !1);
      if ("string" == typeof c && c.length > 2)
        if (43 === (t = (c = g(c)).charCodeAt(0)) || 45 === t) {
          if (88 === (n = c.charCodeAt(2)) || 120 === n) return NaN
        } else if (48 === t) {
        switch (c.charCodeAt(1)) {
          case 66:
          case 98:
            i = 2, r = 49;
            break;
          case 79:
          case 111:
            i = 8, r = 55;
            break;
          default:
            return +c
        }
        for (a = (o = c.slice(2)).length, s = 0; s < a; s++)
          if ((l = o.charCodeAt(s)) < 48 || l > r) return NaN;
        return parseInt(o, i)
      }
      return +c
    };
  if (o("Number", !v(" 0o1") || !v("0b1") || v("+0x1"))) {
    for (var x, w = function (e) {
        var t = arguments.length < 1 ? 0 : e,
          n = this;
        return n instanceof w && (b ? h((function () {
          y.valueOf.call(n)
        })) : "Number" != l(n)) ? c(new v(_(t)), n, w) : _(t)
      }, E = i ? f(v) : "MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","), A = 0; E.length > A; A++) s(v, x = E[A]) && !s(w, x) && m(w, x, p(v, x));
    w.prototype = y, y.constructor = w, a(r, "Number", w)
  }
}, function (e, t, n) {
  n(4)({
    target: "Number",
    stat: !0
  }, {
    EPSILON: Math.pow(2, -52)
  })
}, function (e, t, n) {
  n(4)({
    target: "Number",
    stat: !0
  }, {
    isFinite: n(306)
  })
}, function (e, t, n) {
  n(4)({
    target: "Number",
    stat: !0
  }, {
    isInteger: n(307)
  })
}, function (e, t, n) {
  n(4)({
    target: "Number",
    stat: !0
  }, {
    isNaN: function (e) {
      return e != e
    }
  })
}, function (e, t, n) {
  var i = n(4),
    r = n(307),
    o = Math.abs;
  i({
    target: "Number",
    stat: !0
  }, {
    isSafeInteger: function (e) {
      return r(e) && o(e) <= 9007199254740991
    }
  })
}, function (e, t, n) {
  n(4)({
    target: "Number",
    stat: !0
  }, {
    MAX_SAFE_INTEGER: 9007199254740991
  })
}, function (e, t, n) {
  n(4)({
    target: "Number",
    stat: !0
  }, {
    MIN_SAFE_INTEGER: -9007199254740991
  })
}, function (e, t, n) {
  var i = n(4),
    r = n(308);
  i({
    target: "Number",
    stat: !0,
    forced: Number.parseFloat != r
  }, {
    parseFloat: r
  })
}, function (e, t, n) {
  var i = n(4),
    r = n(227);
  i({
    target: "Number",
    stat: !0,
    forced: Number.parseInt != r
  }, {
    parseInt: r
  })
}, function (e, t, n) {
  "use strict";
  var i = n(4),
    r = n(77),
    o = n(309),
    a = n(224),
    s = n(14),
    l = 1..toFixed,
    c = Math.floor,
    u = function (e, t, n) {
      return 0 === t ? n : t % 2 == 1 ? u(e, t - 1, n * e) : u(e * e, t / 2, n)
    };
  i({
    target: "Number",
    proto: !0,
    forced: l && ("0.000" !== 8e-5.toFixed(3) || "1" !== .9.toFixed(0) || "1.25" !== 1.255.toFixed(2) || "1000000000000000128" !== (0xde0b6b3a7640080).toFixed(0)) || !s((function () {
      l.call({})
    }))
  }, {
    toFixed: function (e) {
      var t, n, i, s, l = o(this),
        h = r(e),
        d = [0, 0, 0, 0, 0, 0],
        f = "",
        p = "0",
        m = function (e, t) {
          for (var n = -1, i = t; ++n < 6;) i += e * d[n], d[n] = i % 1e7, i = c(i / 1e7)
        },
        g = function (e) {
          for (var t = 6, n = 0; --t >= 0;) n += d[t], d[t] = c(n / e), n = n % e * 1e7
        },
        v = function () {
          for (var e = 6, t = ""; --e >= 0;)
            if ("" !== t || 0 === e || 0 !== d[e]) {
              var n = String(d[e]);
              t = "" === t ? n : t + a.call("0", 7 - n.length) + n
            } return t
        };
      if (h < 0 || h > 20) throw RangeError("Incorrect fraction digits");
      if (l != l) return "NaN";
      if (l <= -1e21 || l >= 1e21) return String(l);
      if (l < 0 && (f = "-", l = -l), l > 1e-21)
        if (n = (t = function (e) {
            for (var t = 0, n = e; n >= 4096;) t += 12, n /= 4096;
            for (; n >= 2;) t += 1, n /= 2;
            return t
          }(l * u(2, 69, 1)) - 69) < 0 ? l * u(2, -t, 1) : l / u(2, t, 1), n *= 4503599627370496, (t = 52 - t) > 0) {
          for (m(0, n), i = h; i >= 7;) m(1e7, 0), i -= 7;
          for (m(u(10, i, 1), 0), i = t - 1; i >= 23;) g(1 << 23), i -= 23;
          g(1 << i), m(1, 1), g(2), p = v()
        } else m(0, n), m(1 << -t, 0), p = v() + a.call("0", h);
      return p = h > 0 ? f + ((s = p.length) <= h ? "0." + a.call("0", h - s) + p : p.slice(0, s - h) + "." + p.slice(s - h)) : f + p
    }
  })
}, function (e, t, n) {
  "use strict";
  var i = n(4),
    r = n(14),
    o = n(309),
    a = 1..toPrecision;
  i({
    target: "Number",
    proto: !0,
    forced: r((function () {
      return "1" !== a.call(1, void 0)
    })) || !r((function () {
      a.call({})
    }))
  }, {
    toPrecision: function (e) {
      return void 0 === e ? a.call(o(this)) : a.call(o(this), e)
    }
  })
}, function (e, t, n) {
  var i = n(4),
    r = n(310);
  i({
    target: "Object",
    stat: !0,
    forced: Object.assign !== r
  }, {
    assign: r
  })
}, function (e, t, n) {
  "use strict";
  var i = n(4),
    r = n(24),
    o = n(191),
    a = n(34),
    s = n(20),
    l = n(32);
  r && i({
    target: "Object",
    proto: !0,
    forced: o
  }, {
    __defineGetter__: function (e, t) {
      l.f(a(this), e, {
        get: s(t),
        enumerable: !0,
        configurable: !0
      })
    }
  })
}, function (e, t, n) {
  "use strict";
  var i = n(4),
    r = n(24),
    o = n(191),
    a = n(34),
    s = n(20),
    l = n(32);
  r && i({
    target: "Object",
    proto: !0,
    forced: o
  }, {
    __defineSetter__: function (e, t) {
      l.f(a(this), e, {
        set: s(t),
        enumerable: !0,
        configurable: !0
      })
    }
  })
}, function (e, t, n) {
  var i = n(4),
    r = n(311).entries;
  i({
    target: "Object",
    stat: !0
  }, {
    entries: function (e) {
      return r(e)
    }
  })
}, function (e, t, n) {
  var i = n(4),
    r = n(164),
    o = n(14),
    a = n(22),
    s = n(122).onFreeze,
    l = Object.freeze;
  i({
    target: "Object",
    stat: !0,
    forced: o((function () {
      l(1)
    })),
    sham: !r
  }, {
    freeze: function (e) {
      return l && a(e) ? l(s(e)) : e
    }
  })
}, function (e, t, n) {
  var i = n(4),
    r = n(19),
    o = n(119);
  i({
    target: "Object",
    stat: !0
  }, {
    fromEntries: function (e) {
      var t = {};
      return r(e, (function (e, n) {
        o(t, e, n)
      }), void 0, !0), t
    }
  })
}, function (e, t, n) {
  var i = n(4),
    r = n(14),
    o = n(76),
    a = n(60).f,
    s = n(24),
    l = r((function () {
      a(1)
    }));
  i({
    target: "Object",
    stat: !0,
    forced: !s || l,
    sham: !s
  }, {
    getOwnPropertyDescriptor: function (e, t) {
      return a(o(e), t)
    }
  })
}, function (e, t, n) {
  var i = n(4),
    r = n(24),
    o = n(211),
    a = n(76),
    s = n(60),
    l = n(119);
  i({
    target: "Object",
    stat: !0,
    sham: !r
  }, {
    getOwnPropertyDescriptors: function (e) {
      for (var t, n, i = a(e), r = s.f, c = o(i), u = {}, h = 0; c.length > h;) void 0 !== (n = r(i, t = c[h++])) && l(u, t, n);
      return u
    }
  })
}, function (e, t, n) {
  var i = n(4),
    r = n(14),
    o = n(292).f;
  i({
    target: "Object",
    stat: !0,
    forced: r((function () {
      return !Object.getOwnPropertyNames(1)
    }))
  }, {
    getOwnPropertyNames: o
  })
}, function (e, t, n) {
  var i = n(4),
    r = n(14),
    o = n(34),
    a = n(69),
    s = n(221);
  i({
    target: "Object",
    stat: !0,
    forced: r((function () {
      a(1)
    })),
    sham: !s
  }, {
    getPrototypeOf: function (e) {
      return a(o(e))
    }
  })
}, function (e, t, n) {
  n(4)({
    target: "Object",
    stat: !0
  }, {
    is: n(312)
  })
}, function (e, t, n) {
  var i = n(4),
    r = n(14),
    o = n(22),
    a = Object.isExtensible;
  i({
    target: "Object",
    stat: !0,
    forced: r((function () {
      a(1)
    }))
  }, {
    isExtensible: function (e) {
      return !!o(e) && (!a || a(e))
    }
  })
}, function (e, t, n) {
  var i = n(4),
    r = n(14),
    o = n(22),
    a = Object.isFrozen;
  i({
    target: "Object",
    stat: !0,
    forced: r((function () {
      a(1)
    }))
  }, {
    isFrozen: function (e) {
      return !o(e) || !!a && a(e)
    }
  })
}, function (e, t, n) {
  var i = n(4),
    r = n(14),
    o = n(22),
    a = Object.isSealed;
  i({
    target: "Object",
    stat: !0,
    forced: r((function () {
      a(1)
    }))
  }, {
    isSealed: function (e) {
      return !o(e) || !!a && a(e)
    }
  })
}, function (e, t, n) {
  var i = n(4),
    r = n(34),
    o = n(157);
  i({
    target: "Object",
    stat: !0,
    forced: n(14)((function () {
      o(1)
    }))
  }, {
    keys: function (e) {
      return o(r(e))
    }
  })
}, function (e, t, n) {
  "use strict";
  var i = n(4),
    r = n(24),
    o = n(191),
    a = n(34),
    s = n(84),
    l = n(69),
    c = n(60).f;
  r && i({
    target: "Object",
    proto: !0,
    forced: o
  }, {
    __lookupGetter__: function (e) {
      var t, n = a(this),
        i = s(e, !0);
      do {
        if (t = c(n, i)) return t.get
      } while (n = l(n))
    }
  })
}, function (e, t, n) {
  "use strict";
  var i = n(4),
    r = n(24),
    o = n(191),
    a = n(34),
    s = n(84),
    l = n(69),
    c = n(60).f;
  r && i({
    target: "Object",
    proto: !0,
    forced: o
  }, {
    __lookupSetter__: function (e) {
      var t, n = a(this),
        i = s(e, !0);
      do {
        if (t = c(n, i)) return t.set
      } while (n = l(n))
    }
  })
}, function (e, t, n) {
  var i = n(4),
    r = n(22),
    o = n(122).onFreeze,
    a = n(164),
    s = n(14),
    l = Object.preventExtensions;
  i({
    target: "Object",
    stat: !0,
    forced: s((function () {
      l(1)
    })),
    sham: !a
  }, {
    preventExtensions: function (e) {
      return l && r(e) ? l(o(e)) : e
    }
  })
}, function (e, t, n) {
  var i = n(4),
    r = n(22),
    o = n(122).onFreeze,
    a = n(164),
    s = n(14),
    l = Object.seal;
  i({
    target: "Object",
    stat: !0,
    forced: s((function () {
      l(1)
    })),
    sham: !a
  }, {
    seal: function (e) {
      return l && r(e) ? l(o(e)) : e
    }
  })
}, function (e, t, n) {
  n(4)({
    target: "Object",
    stat: !0
  }, {
    setPrototypeOf: n(113)
  })
}, function (e, t, n) {
  var i = n(219),
    r = n(68),
    o = n(513);
  i || r(Object.prototype, "toString", o, {
    unsafe: !0
  })
}, function (e, t, n) {
  "use strict";
  var i = n(219),
    r = n(162);
  e.exports = i ? {}.toString : function () {
    return "[object " + r(this) + "]"
  }
}, function (e, t, n) {
  var i = n(4),
    r = n(311).values;
  i({
    target: "Object",
    stat: !0
  }, {
    values: function (e) {
      return r(e)
    }
  })
}, function (e, t, n) {
  var i = n(4),
    r = n(308);
  i({
    global: !0,
    forced: parseFloat != r
  }, {
    parseFloat: r
  })
}, function (e, t, n) {
  var i = n(4),
    r = n(227);
  i({
    global: !0,
    forced: parseInt != r
  }, {
    parseInt: r
  })
}, function (e, t, n) {
  "use strict";
  var i, r, o, a, s = n(4),
    l = n(15),
    c = n(17),
    u = n(38),
    h = n(313),
    d = n(68),
    f = n(121),
    p = n(91),
    m = n(120),
    g = n(22),
    v = n(20),
    y = n(101),
    b = n(80),
    _ = n(210),
    x = n(19),
    w = n(183),
    E = n(52),
    A = n(228).set,
    S = n(315),
    M = n(316),
    T = n(317),
    C = n(165),
    P = n(192),
    L = n(51),
    D = n(156),
    I = n(25),
    R = n(215),
    O = I("species"),
    k = "Promise",
    N = L.get,
    F = L.set,
    U = L.getterFor(k),
    V = h,
    B = c.TypeError,
    z = c.document,
    G = c.process,
    H = u("fetch"),
    W = C.f,
    j = W,
    q = "process" == b(G),
    X = !!(z && z.createEvent && c.dispatchEvent),
    Y = D(k, (function () {
      if (!(_(V) !== String(V))) {
        if (66 === R) return !0;
        if (!q && "function" != typeof PromiseRejectionEvent) return !0
      }
      if (l && !V.prototype.finally) return !0;
      if (R >= 51 && /native code/.test(V)) return !1;
      var e = V.resolve(1),
        t = function (e) {
          e((function () {}), (function () {}))
        };
      return (e.constructor = {})[O] = t, !(e.then((function () {})) instanceof t)
    })),
    K = Y || !w((function (e) {
      V.all(e).catch((function () {}))
    })),
    Q = function (e) {
      var t;
      return !(!g(e) || "function" != typeof (t = e.then)) && t
    },
    Z = function (e, t, n) {
      if (!t.notified) {
        t.notified = !0;
        var i = t.reactions;
        S((function () {
          for (var r = t.value, o = 1 == t.state, a = 0; i.length > a;) {
            var s, l, c, u = i[a++],
              h = o ? u.ok : u.fail,
              d = u.resolve,
              f = u.reject,
              p = u.domain;
            try {
              h ? (o || (2 === t.rejection && te(e, t), t.rejection = 1), !0 === h ? s = r : (p && p.enter(), s = h(r), p && (p.exit(), c = !0)), s === u.promise ? f(B("Promise-chain cycle")) : (l = Q(s)) ? l.call(s, d, f) : d(s)) : f(r)
            } catch (e) {
              p && !c && p.exit(), f(e)
            }
          }
          t.reactions = [], t.notified = !1, n && !t.rejection && $(e, t)
        }))
      }
    },
    J = function (e, t, n) {
      var i, r;
      X ? ((i = z.createEvent("Event")).promise = t, i.reason = n, i.initEvent(e, !1, !0), c.dispatchEvent(i)) : i = {
        promise: t,
        reason: n
      }, (r = c["on" + e]) ? r(i) : "unhandledrejection" === e && T("Unhandled promise rejection", n)
    },
    $ = function (e, t) {
      A.call(c, (function () {
        var n, i = t.value;
        if (ee(t) && (n = P((function () {
            q ? G.emit("unhandledRejection", i, e) : J("unhandledrejection", e, i)
          })), t.rejection = q || ee(t) ? 2 : 1, n.error)) throw n.value
      }))
    },
    ee = function (e) {
      return 1 !== e.rejection && !e.parent
    },
    te = function (e, t) {
      A.call(c, (function () {
        q ? G.emit("rejectionHandled", e) : J("rejectionhandled", e, t.value)
      }))
    },
    ne = function (e, t, n, i) {
      return function (r) {
        e(t, n, r, i)
      }
    },
    ie = function (e, t, n, i) {
      t.done || (t.done = !0, i && (t = i), t.value = n, t.state = 2, Z(e, t, !0))
    },
    re = function (e, t, n, i) {
      if (!t.done) {
        t.done = !0, i && (t = i);
        try {
          if (e === n) throw B("Promise can't be resolved itself");
          var r = Q(n);
          r ? S((function () {
            var i = {
              done: !1
            };
            try {
              r.call(n, ne(re, e, i, t), ne(ie, e, i, t))
            } catch (n) {
              ie(e, i, n, t)
            }
          })) : (t.value = n, t.state = 1, Z(e, t, !1))
        } catch (n) {
          ie(e, {
            done: !1
          }, n, t)
        }
      }
    };
  Y && (V = function (e) {
    y(this, V, k), v(e), i.call(this);
    var t = N(this);
    try {
      e(ne(re, this, t), ne(ie, this, t))
    } catch (e) {
      ie(this, t, e)
    }
  }, (i = function (e) {
    F(this, {
      type: k,
      done: !1,
      notified: !1,
      parent: !1,
      reactions: [],
      rejection: !1,
      state: 0,
      value: void 0
    })
  }).prototype = f(V.prototype, {
    then: function (e, t) {
      var n = U(this),
        i = W(E(this, V));
      return i.ok = "function" != typeof e || e, i.fail = "function" == typeof t && t, i.domain = q ? G.domain : void 0, n.parent = !0, n.reactions.push(i), 0 != n.state && Z(this, n, !1), i.promise
    },
    catch: function (e) {
      return this.then(void 0, e)
    }
  }), r = function () {
    var e = new i,
      t = N(e);
    this.promise = e, this.resolve = ne(re, e, t), this.reject = ne(ie, e, t)
  }, C.f = W = function (e) {
    return e === V || e === o ? new r(e) : j(e)
  }, l || "function" != typeof h || (a = h.prototype.then, d(h.prototype, "then", (function (e, t) {
    var n = this;
    return new V((function (e, t) {
      a.call(n, e, t)
    })).then(e, t)
  }), {
    unsafe: !0
  }), "function" == typeof H && s({
    global: !0,
    enumerable: !0,
    forced: !0
  }, {
    fetch: function (e) {
      return M(V, H.apply(c, arguments))
    }
  }))), s({
    global: !0,
    wrap: !0,
    forced: Y
  }, {
    Promise: V
  }), p(V, k, !1, !0), m(k), o = u(k), s({
    target: k,
    stat: !0,
    forced: Y
  }, {
    reject: function (e) {
      var t = W(this);
      return t.reject.call(void 0, e), t.promise
    }
  }), s({
    target: k,
    stat: !0,
    forced: l || Y
  }, {
    resolve: function (e) {
      return M(l && this === o ? V : this, e)
    }
  }), s({
    target: k,
    stat: !0,
    forced: K
  }, {
    all: function (e) {
      var t = this,
        n = W(t),
        i = n.resolve,
        r = n.reject,
        o = P((function () {
          var n = v(t.resolve),
            o = [],
            a = 0,
            s = 1;
          x(e, (function (e) {
            var l = a++,
              c = !1;
            o.push(void 0), s++, n.call(t, e).then((function (e) {
              c || (c = !0, o[l] = e, --s || i(o))
            }), r)
          })), --s || i(o)
        }));
      return o.error && r(o.value), n.promise
    },
    race: function (e) {
      var t = this,
        n = W(t),
        i = n.reject,
        r = P((function () {
          var r = v(t.resolve);
          x(e, (function (e) {
            r.call(t, e).then(n.resolve, i)
          }))
        }));
      return r.error && i(r.value), n.promise
    }
  })
}, function (e, t, n) {
  "use strict";
  var i = n(4),
    r = n(15),
    o = n(313),
    a = n(14),
    s = n(38),
    l = n(52),
    c = n(316),
    u = n(68);
  i({
    target: "Promise",
    proto: !0,
    real: !0,
    forced: !!o && a((function () {
      o.prototype.finally.call({
        then: function () {}
      }, (function () {}))
    }))
  }, {
    finally: function (e) {
      var t = l(this, s("Promise")),
        n = "function" == typeof e;
      return this.then(n ? function (n) {
        return c(t, e()).then((function () {
          return n
        }))
      } : e, n ? function (n) {
        return c(t, e()).then((function () {
          throw n
        }))
      } : e)
    }
  }), r || "function" != typeof o || o.prototype.finally || u(o.prototype, "finally", s("Promise").prototype.finally)
}, function (e, t, n) {
  var i = n(4),
    r = n(38),
    o = n(20),
    a = n(7),
    s = n(14),
    l = r("Reflect", "apply"),
    c = Function.apply;
  i({
    target: "Reflect",
    stat: !0,
    forced: !s((function () {
      l((function () {}))
    }))
  }, {
    apply: function (e, t, n) {
      return o(e), a(n), l ? l(e, t, n) : c.call(e, t, n)
    }
  })
}, function (e, t, n) {
  var i = n(4),
    r = n(38),
    o = n(20),
    a = n(7),
    s = n(22),
    l = n(85),
    c = n(521),
    u = n(14),
    h = r("Reflect", "construct"),
    d = u((function () {
      function e() {}
      return !(h((function () {}), [], e) instanceof e)
    })),
    f = !u((function () {
      h((function () {}))
    })),
    p = d || f;
  i({
    target: "Reflect",
    stat: !0,
    forced: p,
    sham: p
  }, {
    construct: function (e, t) {
      o(e), a(t);
      var n = arguments.length < 3 ? e : o(arguments[2]);
      if (f && !d) return h(e, t, n);
      if (e == n) {
        switch (t.length) {
          case 0:
            return new e;
          case 1:
            return new e(t[0]);
          case 2:
            return new e(t[0], t[1]);
          case 3:
            return new e(t[0], t[1], t[2]);
          case 4:
            return new e(t[0], t[1], t[2], t[3])
        }
        var i = [null];
        return i.push.apply(i, t), new(c.apply(e, i))
      }
      var r = n.prototype,
        u = l(s(r) ? r : Object.prototype),
        p = Function.apply.call(e, u, t);
      return s(p) ? p : u
    }
  })
}, function (e, t, n) {
  "use strict";
  var i = n(20),
    r = n(22),
    o = [].slice,
    a = {},
    s = function (e, t, n) {
      if (!(t in a)) {
        for (var i = [], r = 0; r < t; r++) i[r] = "a[" + r + "]";
        a[t] = Function("C,a", "return new C(" + i.join(",") + ")")
      }
      return a[t](e, n)
    };
  e.exports = Function.bind || function (e) {
    var t = i(this),
      n = o.call(arguments, 1),
      a = function () {
        var i = n.concat(o.call(arguments));
        return this instanceof a ? s(t, i.length, i) : t.apply(e, i)
      };
    return r(t.prototype) && (a.prototype = t.prototype), a
  }
}, function (e, t, n) {
  var i = n(4),
    r = n(24),
    o = n(7),
    a = n(84),
    s = n(32);
  i({
    target: "Reflect",
    stat: !0,
    forced: n(14)((function () {
      Reflect.defineProperty(s.f({}, 1, {
        value: 1
      }), 1, {
        value: 2
      })
    })),
    sham: !r
  }, {
    defineProperty: function (e, t, n) {
      o(e);
      var i = a(t, !0);
      o(n);
      try {
        return s.f(e, i, n), !0
      } catch (e) {
        return !1
      }
    }
  })
}, function (e, t, n) {
  var i = n(4),
    r = n(7),
    o = n(60).f;
  i({
    target: "Reflect",
    stat: !0
  }, {
    deleteProperty: function (e, t) {
      var n = o(r(e), t);
      return !(n && !n.configurable) && delete e[t]
    }
  })
}, function (e, t, n) {
  var i = n(4),
    r = n(22),
    o = n(7),
    a = n(40),
    s = n(60),
    l = n(69);
  i({
    target: "Reflect",
    stat: !0
  }, {
    get: function e(t, n) {
      var i, c, u = arguments.length < 3 ? t : arguments[2];
      return o(t) === u ? t[n] : (i = s.f(t, n)) ? a(i, "value") ? i.value : void 0 === i.get ? void 0 : i.get.call(u) : r(c = l(t)) ? e(c, n, u) : void 0
    }
  })
}, function (e, t, n) {
  var i = n(4),
    r = n(24),
    o = n(7),
    a = n(60);
  i({
    target: "Reflect",
    stat: !0,
    sham: !r
  }, {
    getOwnPropertyDescriptor: function (e, t) {
      return a.f(o(e), t)
    }
  })
}, function (e, t, n) {
  var i = n(4),
    r = n(7),
    o = n(69);
  i({
    target: "Reflect",
    stat: !0,
    sham: !n(221)
  }, {
    getPrototypeOf: function (e) {
      return o(r(e))
    }
  })
}, function (e, t, n) {
  n(4)({
    target: "Reflect",
    stat: !0
  }, {
    has: function (e, t) {
      return t in e
    }
  })
}, function (e, t, n) {
  var i = n(4),
    r = n(7),
    o = Object.isExtensible;
  i({
    target: "Reflect",
    stat: !0
  }, {
    isExtensible: function (e) {
      return r(e), !o || o(e)
    }
  })
}, function (e, t, n) {
  n(4)({
    target: "Reflect",
    stat: !0
  }, {
    ownKeys: n(211)
  })
}, function (e, t, n) {
  var i = n(4),
    r = n(38),
    o = n(7);
  i({
    target: "Reflect",
    stat: !0,
    sham: !n(164)
  }, {
    preventExtensions: function (e) {
      o(e);
      try {
        var t = r("Object", "preventExtensions");
        return t && t(e), !0
      } catch (e) {
        return !1
      }
    }
  })
}, function (e, t, n) {
  var i = n(4),
    r = n(7),
    o = n(22),
    a = n(40),
    s = n(14),
    l = n(32),
    c = n(60),
    u = n(69),
    h = n(99);
  i({
    target: "Reflect",
    stat: !0,
    forced: s((function () {
      var e = l.f({}, "a", {
        configurable: !0
      });
      return !1 !== Reflect.set(u(e), "a", 1, e)
    }))
  }, {
    set: function e(t, n, i) {
      var s, d, f = arguments.length < 4 ? t : arguments[3],
        p = c.f(r(t), n);
      if (!p) {
        if (o(d = u(t))) return e(d, n, i, f);
        p = h(0)
      }
      if (a(p, "value")) {
        if (!1 === p.writable || !o(f)) return !1;
        if (s = c.f(f, n)) {
          if (s.get || s.set || !1 === s.writable) return !1;
          s.value = i, l.f(f, n, s)
        } else l.f(f, n, h(0, i));
        return !0
      }
      return void 0 !== p.set && (p.set.call(f, i), !0)
    }
  })
}, function (e, t, n) {
  var i = n(4),
    r = n(7),
    o = n(300),
    a = n(113);
  a && i({
    target: "Reflect",
    stat: !0
  }, {
    setPrototypeOf: function (e, t) {
      r(e), o(t);
      try {
        return a(e, t), !0
      } catch (e) {
        return !1
      }
    }
  })
}, function (e, t, n) {
  var i = n(24),
    r = n(17),
    o = n(156),
    a = n(188),
    s = n(32).f,
    l = n(118).f,
    c = n(166),
    u = n(139),
    h = n(229),
    d = n(68),
    f = n(14),
    p = n(51).set,
    m = n(120),
    g = n(25)("match"),
    v = r.RegExp,
    y = v.prototype,
    b = /a/g,
    _ = /a/g,
    x = new v(b) !== b,
    w = h.UNSUPPORTED_Y;
  if (i && o("RegExp", !x || w || f((function () {
      return _[g] = !1, v(b) != b || v(_) == _ || "/a/i" != v(b, "i")
    })))) {
    for (var E = function (e, t) {
        var n, i = this instanceof E,
          r = c(e),
          o = void 0 === t;
        if (!i && r && e.constructor === E && o) return e;
        x ? r && !o && (e = e.source) : e instanceof E && (o && (t = u.call(e)), e = e.source), w && (n = !!t && t.indexOf("y") > -1) && (t = t.replace(/y/g, ""));
        var s = a(x ? new v(e, t) : v(e, t), i ? this : y, E);
        return w && n && p(s, {
          sticky: n
        }), s
      }, A = function (e) {
        e in E || s(E, e, {
          configurable: !0,
          get: function () {
            return v[e]
          },
          set: function (t) {
            v[e] = t
          }
        })
      }, S = l(v), M = 0; S.length > M;) A(S[M++]);
    y.constructor = E, E.prototype = y, d(r, "RegExp", E)
  }
  m("RegExp")
}, function (e, t, n) {
  var i = n(24),
    r = n(32),
    o = n(139),
    a = n(229).UNSUPPORTED_Y;
  i && ("g" != /./g.flags || a) && r.f(RegExp.prototype, "flags", {
    configurable: !0,
    get: o
  })
}, function (e, t, n) {
  "use strict";
  var i = n(68),
    r = n(7),
    o = n(14),
    a = n(139),
    s = RegExp.prototype,
    l = s.toString,
    c = o((function () {
      return "/a/b" != l.call({
        source: "a",
        flags: "b"
      })
    })),
    u = "toString" != l.name;
  (c || u) && i(RegExp.prototype, "toString", (function () {
    var e = r(this),
      t = String(e.source),
      n = e.flags;
    return "/" + t + "/" + String(void 0 === n && e instanceof RegExp && !("flags" in s) ? a.call(e) : n)
  }), {
    unsafe: !0
  })
}, function (e, t, n) {
  "use strict";
  var i = n(4),
    r = n(140).codeAt;
  i({
    target: "String",
    proto: !0
  }, {
    codePointAt: function (e) {
      return r(this, e)
    }
  })
}, function (e, t, n) {
  "use strict";
  var i, r = n(4),
    o = n(60).f,
    a = n(27),
    s = n(230),
    l = n(55),
    c = n(231),
    u = n(15),
    h = "".endsWith,
    d = Math.min,
    f = c("endsWith");
  r({
    target: "String",
    proto: !0,
    forced: !!(u || f || (i = o(String.prototype, "endsWith"), !i || i.writable)) && !f
  }, {
    endsWith: function (e) {
      var t = String(l(this));
      s(e);
      var n = arguments.length > 1 ? arguments[1] : void 0,
        i = a(t.length),
        r = void 0 === n ? i : d(a(n), i),
        o = String(e);
      return h ? h.call(t, o, r) : t.slice(r - o.length, r) === o
    }
  })
}, function (e, t, n) {
  var i = n(4),
    r = n(112),
    o = String.fromCharCode,
    a = String.fromCodePoint;
  i({
    target: "String",
    stat: !0,
    forced: !!a && 1 != a.length
  }, {
    fromCodePoint: function (e) {
      for (var t, n = [], i = arguments.length, a = 0; i > a;) {
        if (t = +arguments[a++], r(t, 1114111) !== t) throw RangeError(t + " is not a valid code point");
        n.push(t < 65536 ? o(t) : o(55296 + ((t -= 65536) >> 10), t % 1024 + 56320))
      }
      return n.join("")
    }
  })
}, function (e, t, n) {
  "use strict";
  var i = n(4),
    r = n(230),
    o = n(55);
  i({
    target: "String",
    proto: !0,
    forced: !n(231)("includes")
  }, {
    includes: function (e) {
      return !!~String(o(this)).indexOf(r(e), arguments.length > 1 ? arguments[1] : void 0)
    }
  })
}, function (e, t, n) {
  "use strict";
  var i = n(194),
    r = n(7),
    o = n(27),
    a = n(55),
    s = n(195),
    l = n(196);
  i("match", 1, (function (e, t, n) {
    return [function (t) {
      var n = a(this),
        i = null == t ? void 0 : t[e];
      return void 0 !== i ? i.call(t, n) : new RegExp(t)[e](String(n))
    }, function (e) {
      var i = n(t, e, this);
      if (i.done) return i.value;
      var a = r(e),
        c = String(this);
      if (!a.global) return l(a, c);
      var u = a.unicode;
      a.lastIndex = 0;
      for (var h, d = [], f = 0; null !== (h = l(a, c));) {
        var p = String(h[0]);
        d[f] = p, "" === p && (a.lastIndex = s(c, o(a.lastIndex), u)), f++
      }
      return 0 === f ? null : d
    }]
  }))
}, function (e, t, n) {
  "use strict";
  var i = n(4),
    r = n(223).end;
  i({
    target: "String",
    proto: !0,
    forced: n(321)
  }, {
    padEnd: function (e) {
      return r(this, e, arguments.length > 1 ? arguments[1] : void 0)
    }
  })
}, function (e, t, n) {
  "use strict";
  var i = n(4),
    r = n(223).start;
  i({
    target: "String",
    proto: !0,
    forced: n(321)
  }, {
    padStart: function (e) {
      return r(this, e, arguments.length > 1 ? arguments[1] : void 0)
    }
  })
}, function (e, t, n) {
  var i = n(4),
    r = n(76),
    o = n(27);
  i({
    target: "String",
    stat: !0
  }, {
    raw: function (e) {
      for (var t = r(e.raw), n = o(t.length), i = arguments.length, a = [], s = 0; n > s;) a.push(String(t[s++])), s < i && a.push(String(arguments[s]));
      return a.join("")
    }
  })
}, function (e, t, n) {
  n(4)({
    target: "String",
    proto: !0
  }, {
    repeat: n(224)
  })
}, function (e, t, n) {
  "use strict";
  var i = n(194),
    r = n(7),
    o = n(34),
    a = n(27),
    s = n(77),
    l = n(55),
    c = n(195),
    u = n(196),
    h = Math.max,
    d = Math.min,
    f = Math.floor,
    p = /\$([$&'`]|\d\d?|<[^>]*>)/g,
    m = /\$([$&'`]|\d\d?)/g;
  i("replace", 2, (function (e, t, n, i) {
    var g = i.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,
      v = i.REPLACE_KEEPS_$0,
      y = g ? "$" : "$0";
    return [function (n, i) {
      var r = l(this),
        o = null == n ? void 0 : n[e];
      return void 0 !== o ? o.call(n, r, i) : t.call(String(r), n, i)
    }, function (e, i) {
      if (!g && v || "string" == typeof i && -1 === i.indexOf(y)) {
        var o = n(t, e, this, i);
        if (o.done) return o.value
      }
      var l = r(e),
        f = String(this),
        p = "function" == typeof i;
      p || (i = String(i));
      var m = l.global;
      if (m) {
        var _ = l.unicode;
        l.lastIndex = 0
      }
      for (var x = [];;) {
        var w = u(l, f);
        if (null === w) break;
        if (x.push(w), !m) break;
        "" === String(w[0]) && (l.lastIndex = c(f, a(l.lastIndex), _))
      }
      for (var E, A = "", S = 0, M = 0; M < x.length; M++) {
        w = x[M];
        for (var T = String(w[0]), C = h(d(s(w.index), f.length), 0), P = [], L = 1; L < w.length; L++) P.push(void 0 === (E = w[L]) ? E : String(E));
        var D = w.groups;
        if (p) {
          var I = [T].concat(P, C, f);
          void 0 !== D && I.push(D);
          var R = String(i.apply(void 0, I))
        } else R = b(T, f, C, P, D, i);
        C >= S && (A += f.slice(S, C) + R, S = C + T.length)
      }
      return A + f.slice(S)
    }];

    function b(e, n, i, r, a, s) {
      var l = i + e.length,
        c = r.length,
        u = m;
      return void 0 !== a && (a = o(a), u = p), t.call(s, u, (function (t, o) {
        var s;
        switch (o.charAt(0)) {
          case "$":
            return "$";
          case "&":
            return e;
          case "`":
            return n.slice(0, i);
          case "'":
            return n.slice(l);
          case "<":
            s = a[o.slice(1, -1)];
            break;
          default:
            var u = +o;
            if (0 === u) return t;
            if (u > c) {
              var h = f(u / 10);
              return 0 === h ? t : h <= c ? void 0 === r[h - 1] ? o.charAt(1) : r[h - 1] + o.charAt(1) : t
            }
            s = r[u - 1]
        }
        return void 0 === s ? "" : s
      }))
    }
  }))
}, function (e, t, n) {
  "use strict";
  var i = n(194),
    r = n(7),
    o = n(55),
    a = n(312),
    s = n(196);
  i("search", 1, (function (e, t, n) {
    return [function (t) {
      var n = o(this),
        i = null == t ? void 0 : t[e];
      return void 0 !== i ? i.call(t, n) : new RegExp(t)[e](String(n))
    }, function (e) {
      var i = n(t, e, this);
      if (i.done) return i.value;
      var o = r(e),
        l = String(this),
        c = o.lastIndex;
      a(c, 0) || (o.lastIndex = 0);
      var u = s(o, l);
      return a(o.lastIndex, c) || (o.lastIndex = c), null === u ? -1 : u.index
    }]
  }))
}, function (e, t, n) {
  "use strict";
  var i = n(194),
    r = n(166),
    o = n(7),
    a = n(55),
    s = n(52),
    l = n(195),
    c = n(27),
    u = n(196),
    h = n(193),
    d = n(14),
    f = [].push,
    p = Math.min,
    m = !d((function () {
      return !RegExp(4294967295, "y")
    }));
  i("split", 2, (function (e, t, n) {
    var i;
    return i = "c" == "abbc".split(/(b)*/)[1] || 4 != "test".split(/(?:)/, -1).length || 2 != "ab".split(/(?:ab)*/).length || 4 != ".".split(/(.?)(.?)/).length || ".".split(/()()/).length > 1 || "".split(/.?/).length ? function (e, n) {
      var i = String(a(this)),
        o = void 0 === n ? 4294967295 : n >>> 0;
      if (0 === o) return [];
      if (void 0 === e) return [i];
      if (!r(e)) return t.call(i, e, o);
      for (var s, l, c, u = [], d = (e.ignoreCase ? "i" : "") + (e.multiline ? "m" : "") + (e.unicode ? "u" : "") + (e.sticky ? "y" : ""), p = 0, m = new RegExp(e.source, d + "g");
        (s = h.call(m, i)) && !((l = m.lastIndex) > p && (u.push(i.slice(p, s.index)), s.length > 1 && s.index < i.length && f.apply(u, s.slice(1)), c = s[0].length, p = l, u.length >= o));) m.lastIndex === s.index && m.lastIndex++;
      return p === i.length ? !c && m.test("") || u.push("") : u.push(i.slice(p)), u.length > o ? u.slice(0, o) : u
    } : "0".split(void 0, 0).length ? function (e, n) {
      return void 0 === e && 0 === n ? [] : t.call(this, e, n)
    } : t, [function (t, n) {
      var r = a(this),
        o = null == t ? void 0 : t[e];
      return void 0 !== o ? o.call(t, r, n) : i.call(String(r), t, n)
    }, function (e, r) {
      var a = n(i, e, this, r, i !== t);
      if (a.done) return a.value;
      var h = o(e),
        d = String(this),
        f = s(h, RegExp),
        g = h.unicode,
        v = (h.ignoreCase ? "i" : "") + (h.multiline ? "m" : "") + (h.unicode ? "u" : "") + (m ? "y" : "g"),
        y = new f(m ? h : "^(?:" + h.source + ")", v),
        b = void 0 === r ? 4294967295 : r >>> 0;
      if (0 === b) return [];
      if (0 === d.length) return null === u(y, d) ? [d] : [];
      for (var _ = 0, x = 0, w = []; x < d.length;) {
        y.lastIndex = m ? x : 0;
        var E, A = u(y, m ? d : d.slice(x));
        if (null === A || (E = p(c(y.lastIndex + (m ? 0 : x)), d.length)) === _) x = l(d, x, g);
        else {
          if (w.push(d.slice(_, x)), w.length === b) return w;
          for (var S = 1; S <= A.length - 1; S++)
            if (w.push(A[S]), w.length === b) return w;
          x = _ = E
        }
      }
      return w.push(d.slice(_)), w
    }]
  }), !m)
}, function (e, t, n) {
  "use strict";
  var i, r = n(4),
    o = n(60).f,
    a = n(27),
    s = n(230),
    l = n(55),
    c = n(231),
    u = n(15),
    h = "".startsWith,
    d = Math.min,
    f = c("startsWith");
  r({
    target: "String",
    proto: !0,
    forced: !!(u || f || (i = o(String.prototype, "startsWith"), !i || i.writable)) && !f
  }, {
    startsWith: function (e) {
      var t = String(l(this));
      s(e);
      var n = a(d(arguments.length > 1 ? arguments[1] : void 0, t.length)),
        i = String(e);
      return h ? h.call(t, i, n) : t.slice(n, n + i.length) === i
    }
  })
}, function (e, t, n) {
  "use strict";
  var i = n(4),
    r = n(138).trim;
  i({
    target: "String",
    proto: !0,
    forced: n(232)("trim")
  }, {
    trim: function () {
      return r(this)
    }
  })
}, function (e, t, n) {
  "use strict";
  var i = n(4),
    r = n(138).end,
    o = n(232)("trimEnd"),
    a = o ? function () {
      return r(this)
    } : "".trimEnd;
  i({
    target: "String",
    proto: !0,
    forced: o
  }, {
    trimEnd: a,
    trimRight: a
  })
}, function (e, t, n) {
  "use strict";
  var i = n(4),
    r = n(138).start,
    o = n(232)("trimStart"),
    a = o ? function () {
      return r(this)
    } : "".trimStart;
  i({
    target: "String",
    proto: !0,
    forced: o
  }, {
    trimStart: a,
    trimLeft: a
  })
}, function (e, t, n) {
  "use strict";
  var i = n(4),
    r = n(78);
  i({
    target: "String",
    proto: !0,
    forced: n(79)("anchor")
  }, {
    anchor: function (e) {
      return r(this, "a", "name", e)
    }
  })
}, function (e, t, n) {
  "use strict";
  var i = n(4),
    r = n(78);
  i({
    target: "String",
    proto: !0,
    forced: n(79)("big")
  }, {
    big: function () {
      return r(this, "big", "", "")
    }
  })
}, function (e, t, n) {
  "use strict";
  var i = n(4),
    r = n(78);
  i({
    target: "String",
    proto: !0,
    forced: n(79)("blink")
  }, {
    blink: function () {
      return r(this, "blink", "", "")
    }
  })
}, function (e, t, n) {
  "use strict";
  var i = n(4),
    r = n(78);
  i({
    target: "String",
    proto: !0,
    forced: n(79)("bold")
  }, {
    bold: function () {
      return r(this, "b", "", "")
    }
  })
}, function (e, t, n) {
  "use strict";
  var i = n(4),
    r = n(78);
  i({
    target: "String",
    proto: !0,
    forced: n(79)("fixed")
  }, {
    fixed: function () {
      return r(this, "tt", "", "")
    }
  })
}, function (e, t, n) {
  "use strict";
  var i = n(4),
    r = n(78);
  i({
    target: "String",
    proto: !0,
    forced: n(79)("fontcolor")
  }, {
    fontcolor: function (e) {
      return r(this, "font", "color", e)
    }
  })
}, function (e, t, n) {
  "use strict";
  var i = n(4),
    r = n(78);
  i({
    target: "String",
    proto: !0,
    forced: n(79)("fontsize")
  }, {
    fontsize: function (e) {
      return r(this, "font", "size", e)
    }
  })
}, function (e, t, n) {
  "use strict";
  var i = n(4),
    r = n(78);
  i({
    target: "String",
    proto: !0,
    forced: n(79)("italics")
  }, {
    italics: function () {
      return r(this, "i", "", "")
    }
  })
}, function (e, t, n) {
  "use strict";
  var i = n(4),
    r = n(78);
  i({
    target: "String",
    proto: !0,
    forced: n(79)("link")
  }, {
    link: function (e) {
      return r(this, "a", "href", e)
    }
  })
}, function (e, t, n) {
  "use strict";
  var i = n(4),
    r = n(78);
  i({
    target: "String",
    proto: !0,
    forced: n(79)("small")
  }, {
    small: function () {
      return r(this, "small", "", "")
    }
  })
}, function (e, t, n) {
  "use strict";
  var i = n(4),
    r = n(78);
  i({
    target: "String",
    proto: !0,
    forced: n(79)("strike")
  }, {
    strike: function () {
      return r(this, "strike", "", "")
    }
  })
}, function (e, t, n) {
  "use strict";
  var i = n(4),
    r = n(78);
  i({
    target: "String",
    proto: !0,
    forced: n(79)("sub")
  }, {
    sub: function () {
      return r(this, "sub", "", "")
    }
  })
}, function (e, t, n) {
  "use strict";
  var i = n(4),
    r = n(78);
  i({
    target: "String",
    proto: !0,
    forced: n(79)("sup")
  }, {
    sup: function () {
      return r(this, "sup", "", "")
    }
  })
}, function (e, t, n) {
  n(102)("Float32", (function (e) {
    return function (t, n, i) {
      return e(this, t, n, i)
    }
  }))
}, function (e, t, n) {
  var i = n(77);
  e.exports = function (e) {
    var t = i(e);
    if (t < 0) throw RangeError("The argument can't be less than 0");
    return t
  }
}, function (e, t, n) {
  n(102)("Float64", (function (e) {
    return function (t, n, i) {
      return e(this, t, n, i)
    }
  }))
}, function (e, t, n) {
  n(102)("Int8", (function (e) {
    return function (t, n, i) {
      return e(this, t, n, i)
    }
  }))
}, function (e, t, n) {
  n(102)("Int16", (function (e) {
    return function (t, n, i) {
      return e(this, t, n, i)
    }
  }))
}, function (e, t, n) {
  n(102)("Int32", (function (e) {
    return function (t, n, i) {
      return e(this, t, n, i)
    }
  }))
}, function (e, t, n) {
  n(102)("Uint8", (function (e) {
    return function (t, n, i) {
      return e(this, t, n, i)
    }
  }))
}, function (e, t, n) {
  n(102)("Uint8", (function (e) {
    return function (t, n, i) {
      return e(this, t, n, i)
    }
  }), !0)
}, function (e, t, n) {
  n(102)("Uint16", (function (e) {
    return function (t, n, i) {
      return e(this, t, n, i)
    }
  }))
}, function (e, t, n) {
  n(102)("Uint32", (function (e) {
    return function (t, n, i) {
      return e(this, t, n, i)
    }
  }))
}, function (e, t, n) {
  "use strict";
  var i = n(29),
    r = n(294),
    o = i.aTypedArray;
  (0, i.exportTypedArrayMethod)("copyWithin", (function (e, t) {
    return r.call(o(this), e, t, arguments.length > 2 ? arguments[2] : void 0)
  }))
}, function (e, t, n) {
  "use strict";
  var i = n(29),
    r = n(57).every,
    o = i.aTypedArray;
  (0, i.exportTypedArrayMethod)("every", (function (e) {
    return r(o(this), e, arguments.length > 1 ? arguments[1] : void 0)
  }))
}, function (e, t, n) {
  "use strict";
  var i = n(29),
    r = n(217),
    o = i.aTypedArray;
  (0, i.exportTypedArrayMethod)("fill", (function (e) {
    return r.apply(o(this), arguments)
  }))
}, function (e, t, n) {
  "use strict";
  var i = n(29),
    r = n(57).filter,
    o = n(52),
    a = i.aTypedArray,
    s = i.aTypedArrayConstructor;
  (0, i.exportTypedArrayMethod)("filter", (function (e) {
    for (var t = r(a(this), e, arguments.length > 1 ? arguments[1] : void 0), n = o(this, this.constructor), i = 0, l = t.length, c = new(s(n))(l); l > i;) c[i] = t[i++];
    return c
  }))
}, function (e, t, n) {
  "use strict";
  var i = n(29),
    r = n(57).find,
    o = i.aTypedArray;
  (0, i.exportTypedArrayMethod)("find", (function (e) {
    return r(o(this), e, arguments.length > 1 ? arguments[1] : void 0)
  }))
}, function (e, t, n) {
  "use strict";
  var i = n(29),
    r = n(57).findIndex,
    o = i.aTypedArray;
  (0, i.exportTypedArrayMethod)("findIndex", (function (e) {
    return r(o(this), e, arguments.length > 1 ? arguments[1] : void 0)
  }))
}, function (e, t, n) {
  "use strict";
  var i = n(29),
    r = n(57).forEach,
    o = i.aTypedArray;
  (0, i.exportTypedArrayMethod)("forEach", (function (e) {
    r(o(this), e, arguments.length > 1 ? arguments[1] : void 0)
  }))
}, function (e, t, n) {
  "use strict";
  var i = n(233);
  (0, n(29).exportTypedArrayStaticMethod)("from", n(323), i)
}, function (e, t, n) {
  "use strict";
  var i = n(29),
    r = n(155).includes,
    o = i.aTypedArray;
  (0, i.exportTypedArrayMethod)("includes", (function (e) {
    return r(o(this), e, arguments.length > 1 ? arguments[1] : void 0)
  }))
}, function (e, t, n) {
  "use strict";
  var i = n(29),
    r = n(155).indexOf,
    o = i.aTypedArray;
  (0, i.exportTypedArrayMethod)("indexOf", (function (e) {
    return r(o(this), e, arguments.length > 1 ? arguments[1] : void 0)
  }))
}, function (e, t, n) {
  "use strict";
  var i = n(17),
    r = n(29),
    o = n(184),
    a = n(25)("iterator"),
    s = i.Uint8Array,
    l = o.values,
    c = o.keys,
    u = o.entries,
    h = r.aTypedArray,
    d = r.exportTypedArrayMethod,
    f = s && s.prototype[a],
    p = !!f && ("values" == f.name || null == f.name),
    m = function () {
      return l.call(h(this))
    };
  d("entries", (function () {
    return u.call(h(this))
  })), d("keys", (function () {
    return c.call(h(this))
  })), d("values", m, !p), d(a, m, !p)
}, function (e, t, n) {
  "use strict";
  var i = n(29),
    r = i.aTypedArray,
    o = i.exportTypedArrayMethod,
    a = [].join;
  o("join", (function (e) {
    return a.apply(r(this), arguments)
  }))
}, function (e, t, n) {
  "use strict";
  var i = n(29),
    r = n(301),
    o = i.aTypedArray;
  (0, i.exportTypedArrayMethod)("lastIndexOf", (function (e) {
    return r.apply(o(this), arguments)
  }))
}, function (e, t, n) {
  "use strict";
  var i = n(29),
    r = n(57).map,
    o = n(52),
    a = i.aTypedArray,
    s = i.aTypedArrayConstructor;
  (0, i.exportTypedArrayMethod)("map", (function (e) {
    return r(a(this), e, arguments.length > 1 ? arguments[1] : void 0, (function (e, t) {
      return new(s(o(e, e.constructor)))(t)
    }))
  }))
}, function (e, t, n) {
  "use strict";
  var i = n(29),
    r = n(233),
    o = i.aTypedArrayConstructor;
  (0, i.exportTypedArrayStaticMethod)("of", (function () {
    for (var e = 0, t = arguments.length, n = new(o(this))(t); t > e;) n[e] = arguments[e++];
    return n
  }), r)
}, function (e, t, n) {
  "use strict";
  var i = n(29),
    r = n(185).left,
    o = i.aTypedArray;
  (0, i.exportTypedArrayMethod)("reduce", (function (e) {
    return r(o(this), e, arguments.length, arguments.length > 1 ? arguments[1] : void 0)
  }))
}, function (e, t, n) {
  "use strict";
  var i = n(29),
    r = n(185).right,
    o = i.aTypedArray;
  (0, i.exportTypedArrayMethod)("reduceRight", (function (e) {
    return r(o(this), e, arguments.length, arguments.length > 1 ? arguments[1] : void 0)
  }))
}, function (e, t, n) {
  "use strict";
  var i = n(29),
    r = i.aTypedArray,
    o = i.exportTypedArrayMethod,
    a = Math.floor;
  o("reverse", (function () {
    for (var e, t = r(this).length, n = a(t / 2), i = 0; i < n;) e = this[i], this[i++] = this[--t], this[t] = e;
    return this
  }))
}, function (e, t, n) {
  "use strict";
  var i = n(29),
    r = n(27),
    o = n(322),
    a = n(34),
    s = n(14),
    l = i.aTypedArray;
  (0, i.exportTypedArrayMethod)("set", (function (e) {
    l(this);
    var t = o(arguments.length > 1 ? arguments[1] : void 0, 1),
      n = this.length,
      i = a(e),
      s = r(i.length),
      c = 0;
    if (s + t > n) throw RangeError("Wrong length");
    for (; c < s;) this[t + c] = i[c++]
  }), s((function () {
    new Int8Array(1).set({})
  })))
}, function (e, t, n) {
  "use strict";
  var i = n(29),
    r = n(52),
    o = n(14),
    a = i.aTypedArray,
    s = i.aTypedArrayConstructor,
    l = i.exportTypedArrayMethod,
    c = [].slice;
  l("slice", (function (e, t) {
    for (var n = c.call(a(this), e, t), i = r(this, this.constructor), o = 0, l = n.length, u = new(s(i))(l); l > o;) u[o] = n[o++];
    return u
  }), o((function () {
    new Int8Array(1).slice()
  })))
}, function (e, t, n) {
  "use strict";
  var i = n(29),
    r = n(57).some,
    o = i.aTypedArray;
  (0, i.exportTypedArrayMethod)("some", (function (e) {
    return r(o(this), e, arguments.length > 1 ? arguments[1] : void 0)
  }))
}, function (e, t, n) {
  "use strict";
  var i = n(29),
    r = i.aTypedArray,
    o = i.exportTypedArrayMethod,
    a = [].sort;
  o("sort", (function (e) {
    return a.call(r(this), e)
  }))
}, function (e, t, n) {
  "use strict";
  var i = n(29),
    r = n(27),
    o = n(112),
    a = n(52),
    s = i.aTypedArray;
  (0, i.exportTypedArrayMethod)("subarray", (function (e, t) {
    var n = s(this),
      i = n.length,
      l = o(e, i);
    return new(a(n, n.constructor))(n.buffer, n.byteOffset + l * n.BYTES_PER_ELEMENT, r((void 0 === t ? i : o(t, i)) - l))
  }))
}, function (e, t, n) {
  "use strict";
  var i = n(17),
    r = n(29),
    o = n(14),
    a = i.Int8Array,
    s = r.aTypedArray,
    l = r.exportTypedArrayMethod,
    c = [].toLocaleString,
    u = [].slice,
    h = !!a && o((function () {
      c.call(new a(1))
    }));
  l("toLocaleString", (function () {
    return c.apply(h ? u.call(s(this)) : s(this), arguments)
  }), o((function () {
    return [1, 2].toLocaleString() != new a([1, 2]).toLocaleString()
  })) || !o((function () {
    a.prototype.toLocaleString.call([1, 2])
  })))
}, function (e, t, n) {
  "use strict";
  var i = n(29).exportTypedArrayMethod,
    r = n(14),
    o = n(17).Uint8Array,
    a = o && o.prototype || {},
    s = [].toString,
    l = [].join;
  r((function () {
    s.call({})
  })) && (s = function () {
    return l.call(this)
  });
  var c = a.toString != s;
  i("toString", s, c)
}, function (e, t, n) {
  "use strict";
  n(187)("WeakSet", (function (e) {
    return function () {
      return e(this, arguments.length ? arguments[0] : void 0)
    }
  }), n(324))
}, function (e, t, n) {
  "use strict";
  var i = n(4),
    r = n(24),
    o = n(69),
    a = n(113),
    s = n(85),
    l = n(32),
    c = n(99),
    u = n(19),
    h = n(56),
    d = n(51),
    f = d.set,
    p = d.getterFor("AggregateError"),
    m = function (e, t) {
      var n = this;
      if (!(n instanceof m)) return new m(e, t);
      a && (n = a(new Error(t), o(n)));
      var i = [];
      return u(e, i.push, i), r ? f(n, {
        errors: i,
        type: "AggregateError"
      }) : n.errors = i, void 0 !== t && h(n, "message", String(t)), n
    };
  m.prototype = s(Error.prototype, {
    constructor: c(5, m),
    message: c(5, ""),
    name: c(5, "AggregateError")
  }), r && l.f(m.prototype, "errors", {
    get: function () {
      return p(this).errors
    },
    configurable: !0
  }), i({
    global: !0
  }, {
    AggregateError: m
  })
}, function (e, t, n) {
  "use strict";
  var i = n(24),
    r = n(92),
    o = n(34),
    a = n(27),
    s = n(32).f;
  !i || "lastIndex" in [] || (s(Array.prototype, "lastIndex", {
    configurable: !0,
    get: function () {
      var e = o(this),
        t = a(e.length);
      return 0 == t ? 0 : t - 1
    }
  }), r("lastIndex"))
}, function (e, t, n) {
  "use strict";
  var i = n(24),
    r = n(92),
    o = n(34),
    a = n(27),
    s = n(32).f;
  !i || "lastItem" in [] || (s(Array.prototype, "lastItem", {
    configurable: !0,
    get: function () {
      var e = o(this),
        t = a(e.length);
      return 0 == t ? void 0 : e[t - 1]
    },
    set: function (e) {
      var t = o(this),
        n = a(t.length);
      return t[0 == n ? 0 : n - 1] = e
    }
  }), r("lastItem"))
}, function (e, t, n) {
  var i = n(4),
    r = n(325),
    o = n(38),
    a = n(85),
    s = function () {
      var e = o("Object", "freeze");
      return e ? e(a(null)) : a(null)
    };
  i({
    global: !0
  }, {
    compositeKey: function () {
      return r.apply(Object, arguments).get("object", s)
    }
  })
}, function (e, t, n) {
  var i = n(4),
    r = n(325),
    o = n(38);
  i({
    global: !0
  }, {
    compositeSymbol: function () {
      return 1 === arguments.length && "string" == typeof arguments[0] ? o("Symbol").for(arguments[0]) : r.apply(null, arguments).get("symbol", o("Symbol"))
    }
  })
}, function (e, t, n) {
  n(607)
}, function (e, t, n) {
  n(4)({
    global: !0
  }, {
    globalThis: n(17)
  })
}, function (e, t, n) {
  "use strict";
  var i = n(4),
    r = n(15),
    o = n(197);
  i({
    target: "Map",
    proto: !0,
    real: !0,
    forced: r
  }, {
    deleteAll: function () {
      return o.apply(this, arguments)
    }
  })
}, function (e, t, n) {
  "use strict";
  var i = n(4),
    r = n(15),
    o = n(7),
    a = n(41),
    s = n(93),
    l = n(19);
  i({
    target: "Map",
    proto: !0,
    real: !0,
    forced: r
  }, {
    every: function (e) {
      var t = o(this),
        n = s(t),
        i = a(e, arguments.length > 1 ? arguments[1] : void 0, 3);
      return !l(n, (function (e, n) {
        if (!i(n, e, t)) return l.stop()
      }), void 0, !0, !0).stopped
    }
  })
}, function (e, t, n) {
  "use strict";
  var i = n(4),
    r = n(15),
    o = n(38),
    a = n(7),
    s = n(20),
    l = n(41),
    c = n(52),
    u = n(93),
    h = n(19);
  i({
    target: "Map",
    proto: !0,
    real: !0,
    forced: r
  }, {
    filter: function (e) {
      var t = a(this),
        n = u(t),
        i = l(e, arguments.length > 1 ? arguments[1] : void 0, 3),
        r = new(c(t, o("Map"))),
        d = s(r.set);
      return h(n, (function (e, n) {
        i(n, e, t) && d.call(r, e, n)
      }), void 0, !0, !0), r
    }
  })
}, function (e, t, n) {
  "use strict";
  var i = n(4),
    r = n(15),
    o = n(7),
    a = n(41),
    s = n(93),
    l = n(19);
  i({
    target: "Map",
    proto: !0,
    real: !0,
    forced: r
  }, {
    find: function (e) {
      var t = o(this),
        n = s(t),
        i = a(e, arguments.length > 1 ? arguments[1] : void 0, 3);
      return l(n, (function (e, n) {
        if (i(n, e, t)) return l.stop(n)
      }), void 0, !0, !0).result
    }
  })
}, function (e, t, n) {
  "use strict";
  var i = n(4),
    r = n(15),
    o = n(7),
    a = n(41),
    s = n(93),
    l = n(19);
  i({
    target: "Map",
    proto: !0,
    real: !0,
    forced: r
  }, {
    findKey: function (e) {
      var t = o(this),
        n = s(t),
        i = a(e, arguments.length > 1 ? arguments[1] : void 0, 3);
      return l(n, (function (e, n) {
        if (i(n, e, t)) return l.stop(e)
      }), void 0, !0, !0).result
    }
  })
}, function (e, t, n) {
  n(4)({
    target: "Map",
    stat: !0
  }, {
    from: n(198)
  })
}, function (e, t, n) {
  "use strict";
  var i = n(4),
    r = n(19),
    o = n(20);
  i({
    target: "Map",
    stat: !0
  }, {
    groupBy: function (e, t) {
      var n = new this;
      o(t);
      var i = o(n.has),
        a = o(n.get),
        s = o(n.set);
      return r(e, (function (e) {
        var r = t(e);
        i.call(n, r) ? a.call(n, r).push(e) : s.call(n, r, [e])
      })), n
    }
  })
}, function (e, t, n) {
  "use strict";
  var i = n(4),
    r = n(15),
    o = n(7),
    a = n(93),
    s = n(616),
    l = n(19);
  i({
    target: "Map",
    proto: !0,
    real: !0,
    forced: r
  }, {
    includes: function (e) {
      return l(a(o(this)), (function (t, n) {
        if (s(n, e)) return l.stop()
      }), void 0, !0, !0).stopped
    }
  })
}, function (e, t) {
  e.exports = function (e, t) {
    return e === t || e != e && t != t
  }
}, function (e, t, n) {
  "use strict";
  var i = n(4),
    r = n(19),
    o = n(20);
  i({
    target: "Map",
    stat: !0
  }, {
    keyBy: function (e, t) {
      var n = new this;
      o(t);
      var i = o(n.set);
      return r(e, (function (e) {
        i.call(n, t(e), e)
      })), n
    }
  })
}, function (e, t, n) {
  "use strict";
  var i = n(4),
    r = n(15),
    o = n(7),
    a = n(93),
    s = n(19);
  i({
    target: "Map",
    proto: !0,
    real: !0,
    forced: r
  }, {
    keyOf: function (e) {
      return s(a(o(this)), (function (t, n) {
        if (n === e) return s.stop(t)
      }), void 0, !0, !0).result
    }
  })
}, function (e, t, n) {
  "use strict";
  var i = n(4),
    r = n(15),
    o = n(38),
    a = n(7),
    s = n(20),
    l = n(41),
    c = n(52),
    u = n(93),
    h = n(19);
  i({
    target: "Map",
    proto: !0,
    real: !0,
    forced: r
  }, {
    mapKeys: function (e) {
      var t = a(this),
        n = u(t),
        i = l(e, arguments.length > 1 ? arguments[1] : void 0, 3),
        r = new(c(t, o("Map"))),
        d = s(r.set);
      return h(n, (function (e, n) {
        d.call(r, i(n, e, t), n)
      }), void 0, !0, !0), r
    }
  })
}, function (e, t, n) {
  "use strict";
  var i = n(4),
    r = n(15),
    o = n(38),
    a = n(7),
    s = n(20),
    l = n(41),
    c = n(52),
    u = n(93),
    h = n(19);
  i({
    target: "Map",
    proto: !0,
    real: !0,
    forced: r
  }, {
    mapValues: function (e) {
      var t = a(this),
        n = u(t),
        i = l(e, arguments.length > 1 ? arguments[1] : void 0, 3),
        r = new(c(t, o("Map"))),
        d = s(r.set);
      return h(n, (function (e, n) {
        d.call(r, e, i(n, e, t))
      }), void 0, !0, !0), r
    }
  })
}, function (e, t, n) {
  "use strict";
  var i = n(4),
    r = n(15),
    o = n(7),
    a = n(20),
    s = n(19);
  i({
    target: "Map",
    proto: !0,
    real: !0,
    forced: r
  }, {
    merge: function (e) {
      for (var t = o(this), n = a(t.set), i = 0; i < arguments.length;) s(arguments[i++], n, t, !0);
      return t
    }
  })
}, function (e, t, n) {
  n(4)({
    target: "Map",
    stat: !0
  }, {
    of: n(199)
  })
}, function (e, t, n) {
  "use strict";
  var i = n(4),
    r = n(15),
    o = n(7),
    a = n(20),
    s = n(93),
    l = n(19);
  i({
    target: "Map",
    proto: !0,
    real: !0,
    forced: r
  }, {
    reduce: function (e) {
      var t = o(this),
        n = s(t),
        i = arguments.length < 2,
        r = i ? void 0 : arguments[1];
      if (a(e), l(n, (function (n, o) {
          i ? (i = !1, r = o) : r = e(r, o, n, t)
        }), void 0, !0, !0), i) throw TypeError("Reduce of empty map with no initial value");
      return r
    }
  })
}, function (e, t, n) {
  "use strict";
  var i = n(4),
    r = n(15),
    o = n(7),
    a = n(41),
    s = n(93),
    l = n(19);
  i({
    target: "Map",
    proto: !0,
    real: !0,
    forced: r
  }, {
    some: function (e) {
      var t = o(this),
        n = s(t),
        i = a(e, arguments.length > 1 ? arguments[1] : void 0, 3);
      return l(n, (function (e, n) {
        if (i(n, e, t)) return l.stop()
      }), void 0, !0, !0).stopped
    }
  })
}, function (e, t, n) {
  "use strict";
  var i = n(4),
    r = n(15),
    o = n(7),
    a = n(20);
  i({
    target: "Map",
    proto: !0,
    real: !0,
    forced: r
  }, {
    update: function (e, t) {
      var n = o(this),
        i = arguments.length;
      a(t);
      var r = n.has(e);
      if (!r && i < 3) throw TypeError("Updating absent value");
      var s = r ? n.get(e) : a(i > 2 ? arguments[2] : void 0)(e, n);
      return n.set(e, t(s, e, n)), n
    }
  })
}, function (e, t, n) {
  var i = n(4),
    r = Math.min,
    o = Math.max;
  i({
    target: "Math",
    stat: !0
  }, {
    clamp: function (e, t, n) {
      return r(n, o(t, e))
    }
  })
}, function (e, t, n) {
  n(4)({
    target: "Math",
    stat: !0
  }, {
    DEG_PER_RAD: Math.PI / 180
  })
}, function (e, t, n) {
  var i = n(4),
    r = 180 / Math.PI;
  i({
    target: "Math",
    stat: !0
  }, {
    degrees: function (e) {
      return e * r
    }
  })
}, function (e, t, n) {
  var i = n(4),
    r = n(326),
    o = n(305);
  i({
    target: "Math",
    stat: !0
  }, {
    fscale: function (e, t, n, i, a) {
      return o(r(e, t, n, i, a))
    }
  })
}, function (e, t, n) {
  n(4)({
    target: "Math",
    stat: !0
  }, {
    iaddh: function (e, t, n, i) {
      var r = e >>> 0,
        o = n >>> 0;
      return (t >>> 0) + (i >>> 0) + ((r & o | (r | o) & ~(r + o >>> 0)) >>> 31) | 0
    }
  })
}, function (e, t, n) {
  n(4)({
    target: "Math",
    stat: !0
  }, {
    imulh: function (e, t) {
      var n = +e,
        i = +t,
        r = 65535 & n,
        o = 65535 & i,
        a = n >> 16,
        s = i >> 16,
        l = (a * o >>> 0) + (r * o >>> 16);
      return a * s + (l >> 16) + ((r * s >>> 0) + (65535 & l) >> 16)
    }
  })
}, function (e, t, n) {
  n(4)({
    target: "Math",
    stat: !0
  }, {
    isubh: function (e, t, n, i) {
      var r = e >>> 0,
        o = n >>> 0;
      return (t >>> 0) - (i >>> 0) - ((~r & o | ~(r ^ o) & r - o >>> 0) >>> 31) | 0
    }
  })
}, function (e, t, n) {
  n(4)({
    target: "Math",
    stat: !0
  }, {
    RAD_PER_DEG: 180 / Math.PI
  })
}, function (e, t, n) {
  var i = n(4),
    r = Math.PI / 180;
  i({
    target: "Math",
    stat: !0
  }, {
    radians: function (e) {
      return e * r
    }
  })
}, function (e, t, n) {
  n(4)({
    target: "Math",
    stat: !0
  }, {
    scale: n(326)
  })
}, function (e, t, n) {
  var i = n(4),
    r = n(7),
    o = n(306),
    a = n(163),
    s = n(51),
    l = s.set,
    c = s.getterFor("Seeded Random Generator"),
    u = a((function (e) {
      l(this, {
        type: "Seeded Random Generator",
        seed: e % 2147483647
      })
    }), "Seeded Random", (function () {
      var e = c(this);
      return {
        value: (1073741823 & (e.seed = (1103515245 * e.seed + 12345) % 2147483647)) / 1073741823,
        done: !1
      }
    }));
  i({
    target: "Math",
    stat: !0,
    forced: !0
  }, {
    seededPRNG: function (e) {
      var t = r(e).seed;
      if (!o(t)) throw TypeError('Math.seededPRNG() argument should have a "seed" field with a finite value.');
      return new u(t)
    }
  })
}, function (e, t, n) {
  n(4)({
    target: "Math",
    stat: !0
  }, {
    signbit: function (e) {
      return (e = +e) == e && 0 == e ? 1 / e == -1 / 0 : e < 0
    }
  })
}, function (e, t, n) {
  n(4)({
    target: "Math",
    stat: !0
  }, {
    umulh: function (e, t) {
      var n = +e,
        i = +t,
        r = 65535 & n,
        o = 65535 & i,
        a = n >>> 16,
        s = i >>> 16,
        l = (a * o >>> 0) + (r * o >>> 16);
      return a * s + (l >>> 16) + ((r * s >>> 0) + (65535 & l) >>> 16)
    }
  })
}, function (e, t, n) {
  "use strict";
  var i = n(4),
    r = n(77),
    o = n(227),
    a = /^[\da-z]+$/;
  i({
    target: "Number",
    stat: !0
  }, {
    fromString: function (e, t) {
      var n, i, s = 1;
      if ("string" != typeof e) throw TypeError("Invalid number representation");
      if (!e.length) throw SyntaxError("Invalid number representation");
      if ("-" == e.charAt(0) && (s = -1, !(e = e.slice(1)).length)) throw SyntaxError("Invalid number representation");
      if ((n = void 0 === t ? 10 : r(t)) < 2 || n > 36) throw RangeError("Invalid radix");
      if (!a.test(e) || (i = o(e, n)).toString(n) !== e) throw SyntaxError("Invalid number representation");
      return s * i
    }
  })
}, function (e, t, n) {
  "use strict";
  var i = n(4),
    r = n(24),
    o = n(120),
    a = n(20),
    s = n(7),
    l = n(22),
    c = n(101),
    u = n(32).f,
    h = n(56),
    d = n(121),
    f = n(167),
    p = n(19),
    m = n(317),
    g = n(25),
    v = n(51),
    y = g("observable"),
    b = v.get,
    _ = v.set,
    x = function (e) {
      return null == e ? void 0 : a(e)
    },
    w = function (e) {
      var t = e.cleanup;
      if (t) {
        e.cleanup = void 0;
        try {
          t()
        } catch (e) {
          m(e)
        }
      }
    },
    E = function (e) {
      return void 0 === e.observer
    },
    A = function (e, t) {
      if (!r) {
        e.closed = !0;
        var n = t.subscriptionObserver;
        n && (n.closed = !0)
      }
      t.observer = void 0
    },
    S = function (e, t) {
      var n, i = _(this, {
        cleanup: void 0,
        observer: s(e),
        subscriptionObserver: void 0
      });
      r || (this.closed = !1);
      try {
        (n = x(e.start)) && n.call(e, this)
      } catch (e) {
        m(e)
      }
      if (!E(i)) {
        var o = i.subscriptionObserver = new M(this);
        try {
          var l = t(o),
            c = l;
          null != l && (i.cleanup = "function" == typeof l.unsubscribe ? function () {
            c.unsubscribe()
          } : a(l))
        } catch (e) {
          return void o.error(e)
        }
        E(i) && w(i)
      }
    };
  S.prototype = d({}, {
    unsubscribe: function () {
      var e = b(this);
      E(e) || (A(this, e), w(e))
    }
  }), r && u(S.prototype, "closed", {
    configurable: !0,
    get: function () {
      return E(b(this))
    }
  });
  var M = function (e) {
    _(this, {
      subscription: e
    }), r || (this.closed = !1)
  };
  M.prototype = d({}, {
    next: function (e) {
      var t = b(b(this).subscription);
      if (!E(t)) {
        var n = t.observer;
        try {
          var i = x(n.next);
          i && i.call(n, e)
        } catch (e) {
          m(e)
        }
      }
    },
    error: function (e) {
      var t = b(this).subscription,
        n = b(t);
      if (!E(n)) {
        var i = n.observer;
        A(t, n);
        try {
          var r = x(i.error);
          r ? r.call(i, e) : m(e)
        } catch (e) {
          m(e)
        }
        w(n)
      }
    },
    complete: function () {
      var e = b(this).subscription,
        t = b(e);
      if (!E(t)) {
        var n = t.observer;
        A(e, t);
        try {
          var i = x(n.complete);
          i && i.call(n)
        } catch (e) {
          m(e)
        }
        w(t)
      }
    }
  }), r && u(M.prototype, "closed", {
    configurable: !0,
    get: function () {
      return E(b(b(this).subscription))
    }
  });
  var T = function (e) {
    c(this, T, "Observable"), _(this, {
      subscriber: a(e)
    })
  };
  d(T.prototype, {
    subscribe: function (e) {
      var t = arguments.length;
      return new S("function" == typeof e ? {
        next: e,
        error: t > 1 ? arguments[1] : void 0,
        complete: t > 2 ? arguments[2] : void 0
      } : l(e) ? e : {}, b(this).subscriber)
    }
  }), d(T, {
    from: function (e) {
      var t = "function" == typeof this ? this : T,
        n = x(s(e)[y]);
      if (n) {
        var i = s(n.call(e));
        return i.constructor === t ? i : new t((function (e) {
          return i.subscribe(e)
        }))
      }
      var r = f(e);
      return new t((function (e) {
        p(r, (function (t) {
          if (e.next(t), e.closed) return p.stop()
        }), void 0, !1, !0), e.complete()
      }))
    },
    of: function () {
      for (var e = "function" == typeof this ? this : T, t = arguments.length, n = new Array(t), i = 0; i < t;) n[i] = arguments[i++];
      return new e((function (e) {
        for (var i = 0; i < t; i++)
          if (e.next(n[i]), e.closed) return;
        e.complete()
      }))
    }
  }), h(T.prototype, y, (function () {
    return this
  })), i({
    global: !0
  }, {
    Observable: T
  }), o("Observable")
}, function (e, t, n) {
  n(642)
}, function (e, t, n) {
  "use strict";
  var i = n(4),
    r = n(20),
    o = n(165),
    a = n(192),
    s = n(19);
  i({
    target: "Promise",
    stat: !0
  }, {
    allSettled: function (e) {
      var t = this,
        n = o.f(t),
        i = n.resolve,
        l = n.reject,
        c = a((function () {
          var n = r(t.resolve),
            o = [],
            a = 0,
            l = 1;
          s(e, (function (e) {
            var r = a++,
              s = !1;
            o.push(void 0), l++, n.call(t, e).then((function (e) {
              s || (s = !0, o[r] = {
                status: "fulfilled",
                value: e
              }, --l || i(o))
            }), (function (e) {
              s || (s = !0, o[r] = {
                status: "rejected",
                reason: e
              }, --l || i(o))
            }))
          })), --l || i(o)
        }));
      return c.error && l(c.value), n.promise
    }
  })
}, function (e, t, n) {
  "use strict";
  var i = n(4),
    r = n(20),
    o = n(38),
    a = n(165),
    s = n(192),
    l = n(19);
  i({
    target: "Promise",
    stat: !0
  }, {
    any: function (e) {
      var t = this,
        n = a.f(t),
        i = n.resolve,
        c = n.reject,
        u = s((function () {
          var n = r(t.resolve),
            a = [],
            s = 0,
            u = 1,
            h = !1;
          l(e, (function (e) {
            var r = s++,
              l = !1;
            a.push(void 0), u++, n.call(t, e).then((function (e) {
              l || h || (h = !0, i(e))
            }), (function (e) {
              l || h || (l = !0, a[r] = e, --u || c(new(o("AggregateError"))(a, "No one promise resolved")))
            }))
          })), --u || c(new(o("AggregateError"))(a, "No one promise resolved"))
        }));
      return u.error && c(u.value), n.promise
    }
  })
}, function (e, t, n) {
  "use strict";
  var i = n(4),
    r = n(165),
    o = n(192);
  i({
    target: "Promise",
    stat: !0
  }, {
    try: function (e) {
      var t = r.f(this),
        n = o(e);
      return (n.error ? t.reject : t.resolve)(n.value), t.promise
    }
  })
}, function (e, t, n) {
  var i = n(4),
    r = n(103),
    o = n(7),
    a = r.toKey,
    s = r.set;
  i({
    target: "Reflect",
    stat: !0
  }, {
    defineMetadata: function (e, t, n) {
      var i = arguments.length < 4 ? void 0 : a(arguments[3]);
      s(e, t, o(n), i)
    }
  })
}, function (e, t, n) {
  var i = n(4),
    r = n(103),
    o = n(7),
    a = r.toKey,
    s = r.getMap,
    l = r.store;
  i({
    target: "Reflect",
    stat: !0
  }, {
    deleteMetadata: function (e, t) {
      var n = arguments.length < 3 ? void 0 : a(arguments[2]),
        i = s(o(t), n, !1);
      if (void 0 === i || !i.delete(e)) return !1;
      if (i.size) return !0;
      var r = l.get(t);
      return r.delete(n), !!r.size || l.delete(t)
    }
  })
}, function (e, t, n) {
  var i = n(4),
    r = n(103),
    o = n(7),
    a = n(69),
    s = r.has,
    l = r.get,
    c = r.toKey,
    u = function (e, t, n) {
      if (s(e, t, n)) return l(e, t, n);
      var i = a(t);
      return null !== i ? u(e, i, n) : void 0
    };
  i({
    target: "Reflect",
    stat: !0
  }, {
    getMetadata: function (e, t) {
      var n = arguments.length < 3 ? void 0 : c(arguments[2]);
      return u(e, o(t), n)
    }
  })
}, function (e, t, n) {
  var i = n(4),
    r = n(319),
    o = n(103),
    a = n(7),
    s = n(69),
    l = n(19),
    c = o.keys,
    u = o.toKey,
    h = function (e, t) {
      var n = c(e, t),
        i = s(e);
      if (null === i) return n;
      var o, a, u = h(i, t);
      return u.length ? n.length ? (o = new r(n.concat(u)), l(o, (a = []).push, a), a) : u : n
    };
  i({
    target: "Reflect",
    stat: !0
  }, {
    getMetadataKeys: function (e) {
      var t = arguments.length < 2 ? void 0 : u(arguments[1]);
      return h(a(e), t)
    }
  })
}, function (e, t, n) {
  var i = n(4),
    r = n(103),
    o = n(7),
    a = r.get,
    s = r.toKey;
  i({
    target: "Reflect",
    stat: !0
  }, {
    getOwnMetadata: function (e, t) {
      var n = arguments.length < 3 ? void 0 : s(arguments[2]);
      return a(e, o(t), n)
    }
  })
}, function (e, t, n) {
  var i = n(4),
    r = n(103),
    o = n(7),
    a = r.keys,
    s = r.toKey;
  i({
    target: "Reflect",
    stat: !0
  }, {
    getOwnMetadataKeys: function (e) {
      var t = arguments.length < 2 ? void 0 : s(arguments[1]);
      return a(o(e), t)
    }
  })
}, function (e, t, n) {
  var i = n(4),
    r = n(103),
    o = n(7),
    a = n(69),
    s = r.has,
    l = r.toKey,
    c = function (e, t, n) {
      if (s(e, t, n)) return !0;
      var i = a(t);
      return null !== i && c(e, i, n)
    };
  i({
    target: "Reflect",
    stat: !0
  }, {
    hasMetadata: function (e, t) {
      var n = arguments.length < 3 ? void 0 : l(arguments[2]);
      return c(e, o(t), n)
    }
  })
}, function (e, t, n) {
  var i = n(4),
    r = n(103),
    o = n(7),
    a = r.has,
    s = r.toKey;
  i({
    target: "Reflect",
    stat: !0
  }, {
    hasOwnMetadata: function (e, t) {
      var n = arguments.length < 3 ? void 0 : s(arguments[2]);
      return a(e, o(t), n)
    }
  })
}, function (e, t, n) {
  var i = n(4),
    r = n(103),
    o = n(7),
    a = r.toKey,
    s = r.set;
  i({
    target: "Reflect",
    stat: !0
  }, {
    metadata: function (e, t) {
      return function (n, i) {
        s(e, t, o(n), a(i))
      }
    }
  })
}, function (e, t, n) {
  "use strict";
  var i = n(4),
    r = n(15),
    o = n(327);
  i({
    target: "Set",
    proto: !0,
    real: !0,
    forced: r
  }, {
    addAll: function () {
      return o.apply(this, arguments)
    }
  })
}, function (e, t, n) {
  "use strict";
  var i = n(4),
    r = n(15),
    o = n(197);
  i({
    target: "Set",
    proto: !0,
    real: !0,
    forced: r
  }, {
    deleteAll: function () {
      return o.apply(this, arguments)
    }
  })
}, function (e, t, n) {
  "use strict";
  var i = n(4),
    r = n(15),
    o = n(38),
    a = n(7),
    s = n(20),
    l = n(52),
    c = n(19);
  i({
    target: "Set",
    proto: !0,
    real: !0,
    forced: r
  }, {
    difference: function (e) {
      var t = a(this),
        n = new(l(t, o("Set")))(t),
        i = s(n.delete);
      return c(e, (function (e) {
        i.call(n, e)
      })), n
    }
  })
}, function (e, t, n) {
  "use strict";
  var i = n(4),
    r = n(15),
    o = n(7),
    a = n(41),
    s = n(123),
    l = n(19);
  i({
    target: "Set",
    proto: !0,
    real: !0,
    forced: r
  }, {
    every: function (e) {
      var t = o(this),
        n = s(t),
        i = a(e, arguments.length > 1 ? arguments[1] : void 0, 3);
      return !l(n, (function (e) {
        if (!i(e, e, t)) return l.stop()
      }), void 0, !1, !0).stopped
    }
  })
}, function (e, t, n) {
  "use strict";
  var i = n(4),
    r = n(15),
    o = n(38),
    a = n(7),
    s = n(20),
    l = n(41),
    c = n(52),
    u = n(123),
    h = n(19);
  i({
    target: "Set",
    proto: !0,
    real: !0,
    forced: r
  }, {
    filter: function (e) {
      var t = a(this),
        n = u(t),
        i = l(e, arguments.length > 1 ? arguments[1] : void 0, 3),
        r = new(c(t, o("Set"))),
        d = s(r.add);
      return h(n, (function (e) {
        i(e, e, t) && d.call(r, e)
      }), void 0, !1, !0), r
    }
  })
}, function (e, t, n) {
  "use strict";
  var i = n(4),
    r = n(15),
    o = n(7),
    a = n(41),
    s = n(123),
    l = n(19);
  i({
    target: "Set",
    proto: !0,
    real: !0,
    forced: r
  }, {
    find: function (e) {
      var t = o(this),
        n = s(t),
        i = a(e, arguments.length > 1 ? arguments[1] : void 0, 3);
      return l(n, (function (e) {
        if (i(e, e, t)) return l.stop(e)
      }), void 0, !1, !0).result
    }
  })
}, function (e, t, n) {
  n(4)({
    target: "Set",
    stat: !0
  }, {
    from: n(198)
  })
}, function (e, t, n) {
  "use strict";
  var i = n(4),
    r = n(15),
    o = n(38),
    a = n(7),
    s = n(20),
    l = n(52),
    c = n(19);
  i({
    target: "Set",
    proto: !0,
    real: !0,
    forced: r
  }, {
    intersection: function (e) {
      var t = a(this),
        n = new(l(t, o("Set"))),
        i = s(t.has),
        r = s(n.add);
      return c(e, (function (e) {
        i.call(t, e) && r.call(n, e)
      })), n
    }
  })
}, function (e, t, n) {
  "use strict";
  var i = n(4),
    r = n(15),
    o = n(7),
    a = n(20),
    s = n(19);
  i({
    target: "Set",
    proto: !0,
    real: !0,
    forced: r
  }, {
    isDisjointFrom: function (e) {
      var t = o(this),
        n = a(t.has);
      return !s(e, (function (e) {
        if (!0 === n.call(t, e)) return s.stop()
      })).stopped
    }
  })
}, function (e, t, n) {
  "use strict";
  var i = n(4),
    r = n(15),
    o = n(38),
    a = n(7),
    s = n(20),
    l = n(167),
    c = n(19);
  i({
    target: "Set",
    proto: !0,
    real: !0,
    forced: r
  }, {
    isSubsetOf: function (e) {
      var t = l(this),
        n = a(e),
        i = n.has;
      return "function" != typeof i && (n = new(o("Set"))(e), i = s(n.has)), !c(t, (function (e) {
        if (!1 === i.call(n, e)) return c.stop()
      }), void 0, !1, !0).stopped
    }
  })
}, function (e, t, n) {
  "use strict";
  var i = n(4),
    r = n(15),
    o = n(7),
    a = n(20),
    s = n(19);
  i({
    target: "Set",
    proto: !0,
    real: !0,
    forced: r
  }, {
    isSupersetOf: function (e) {
      var t = o(this),
        n = a(t.has);
      return !s(e, (function (e) {
        if (!1 === n.call(t, e)) return s.stop()
      })).stopped
    }
  })
}, function (e, t, n) {
  "use strict";
  var i = n(4),
    r = n(15),
    o = n(7),
    a = n(123),
    s = n(19);
  i({
    target: "Set",
    proto: !0,
    real: !0,
    forced: r
  }, {
    join: function (e) {
      var t = o(this),
        n = a(t),
        i = void 0 === e ? "," : String(e),
        r = [];
      return s(n, r.push, r, !1, !0), r.join(i)
    }
  })
}, function (e, t, n) {
  "use strict";
  var i = n(4),
    r = n(15),
    o = n(38),
    a = n(7),
    s = n(20),
    l = n(41),
    c = n(52),
    u = n(123),
    h = n(19);
  i({
    target: "Set",
    proto: !0,
    real: !0,
    forced: r
  }, {
    map: function (e) {
      var t = a(this),
        n = u(t),
        i = l(e, arguments.length > 1 ? arguments[1] : void 0, 3),
        r = new(c(t, o("Set"))),
        d = s(r.add);
      return h(n, (function (e) {
        d.call(r, i(e, e, t))
      }), void 0, !1, !0), r
    }
  })
}, function (e, t, n) {
  n(4)({
    target: "Set",
    stat: !0
  }, {
    of: n(199)
  })
}, function (e, t, n) {
  "use strict";
  var i = n(4),
    r = n(15),
    o = n(7),
    a = n(20),
    s = n(123),
    l = n(19);
  i({
    target: "Set",
    proto: !0,
    real: !0,
    forced: r
  }, {
    reduce: function (e) {
      var t = o(this),
        n = s(t),
        i = arguments.length < 2,
        r = i ? void 0 : arguments[1];
      if (a(e), l(n, (function (n) {
          i ? (i = !1, r = n) : r = e(r, n, n, t)
        }), void 0, !1, !0), i) throw TypeError("Reduce of empty set with no initial value");
      return r
    }
  })
}, function (e, t, n) {
  "use strict";
  var i = n(4),
    r = n(15),
    o = n(7),
    a = n(41),
    s = n(123),
    l = n(19);
  i({
    target: "Set",
    proto: !0,
    real: !0,
    forced: r
  }, {
    some: function (e) {
      var t = o(this),
        n = s(t),
        i = a(e, arguments.length > 1 ? arguments[1] : void 0, 3);
      return l(n, (function (e) {
        if (i(e, e, t)) return l.stop()
      }), void 0, !1, !0).stopped
    }
  })
}, function (e, t, n) {
  "use strict";
  var i = n(4),
    r = n(15),
    o = n(38),
    a = n(7),
    s = n(20),
    l = n(52),
    c = n(19);
  i({
    target: "Set",
    proto: !0,
    real: !0,
    forced: r
  }, {
    symmetricDifference: function (e) {
      var t = a(this),
        n = new(l(t, o("Set")))(t),
        i = s(n.delete),
        r = s(n.add);
      return c(e, (function (e) {
        i.call(n, e) || r.call(n, e)
      })), n
    }
  })
}, function (e, t, n) {
  "use strict";
  var i = n(4),
    r = n(15),
    o = n(38),
    a = n(7),
    s = n(20),
    l = n(52),
    c = n(19);
  i({
    target: "Set",
    proto: !0,
    real: !0,
    forced: r
  }, {
    union: function (e) {
      var t = a(this),
        n = new(l(t, o("Set")))(t);
      return c(e, s(n.add), n), n
    }
  })
}, function (e, t, n) {
  "use strict";
  var i = n(4),
    r = n(140).charAt;
  i({
    target: "String",
    proto: !0
  }, {
    at: function (e) {
      return r(this, e)
    }
  })
}, function (e, t, n) {
  "use strict";
  var i = n(4),
    r = n(163),
    o = n(55),
    a = n(51),
    s = n(140),
    l = s.codeAt,
    c = s.charAt,
    u = a.set,
    h = a.getterFor("String Iterator"),
    d = r((function (e) {
      u(this, {
        type: "String Iterator",
        string: e,
        index: 0
      })
    }), "String", (function () {
      var e, t = h(this),
        n = t.string,
        i = t.index;
      return i >= n.length ? {
        value: void 0,
        done: !0
      } : (e = c(n, i), t.index += e.length, {
        value: {
          codePoint: l(e, 0),
          position: i
        },
        done: !1
      })
    }));
  i({
    target: "String",
    proto: !0
  }, {
    codePoints: function () {
      return new d(String(o(this)))
    }
  })
}, function (e, t, n) {
  n(675)
}, function (e, t, n) {
  "use strict";
  var i = n(4),
    r = n(163),
    o = n(55),
    a = n(27),
    s = n(20),
    l = n(7),
    c = n(80),
    u = n(166),
    h = n(139),
    d = n(56),
    f = n(14),
    p = n(25),
    m = n(52),
    g = n(195),
    v = n(51),
    y = n(15),
    b = p("matchAll"),
    _ = v.set,
    x = v.getterFor("RegExp String Iterator"),
    w = RegExp.prototype,
    E = w.exec,
    A = "".matchAll,
    S = !!A && !f((function () {
      "a".matchAll(/./)
    })),
    M = r((function (e, t, n, i) {
      _(this, {
        type: "RegExp String Iterator",
        regexp: e,
        string: t,
        global: n,
        unicode: i,
        done: !1
      })
    }), "RegExp String", (function () {
      var e = x(this);
      if (e.done) return {
        value: void 0,
        done: !0
      };
      var t = e.regexp,
        n = e.string,
        i = function (e, t) {
          var n, i = e.exec;
          if ("function" == typeof i) {
            if ("object" != typeof (n = i.call(e, t))) throw TypeError("Incorrect exec result");
            return n
          }
          return E.call(e, t)
        }(t, n);
      return null === i ? {
        value: void 0,
        done: e.done = !0
      } : e.global ? ("" == String(i[0]) && (t.lastIndex = g(n, a(t.lastIndex), e.unicode)), {
        value: i,
        done: !1
      }) : (e.done = !0, {
        value: i,
        done: !1
      })
    })),
    T = function (e) {
      var t, n, i, r, o, s, c = l(this),
        u = String(e);
      return t = m(c, RegExp), void 0 === (n = c.flags) && c instanceof RegExp && !("flags" in w) && (n = h.call(c)), i = void 0 === n ? "" : String(n), r = new t(t === RegExp ? c.source : c, i), o = !!~i.indexOf("g"), s = !!~i.indexOf("u"), r.lastIndex = a(c.lastIndex), new M(r, u, o, s)
    };
  i({
    target: "String",
    proto: !0,
    forced: S
  }, {
    matchAll: function (e) {
      var t, n, i, r = o(this);
      if (null != e) {
        if (u(e) && !~String(o("flags" in w ? e.flags : h.call(e))).indexOf("g")) throw TypeError("`.matchAll` does not allow non-global regexes");
        if (S) return A.apply(r, arguments);
        if (void 0 === (n = e[b]) && y && "RegExp" == c(e) && (n = T), null != n) return s(n).call(e, r)
      } else if (S) return A.apply(r, arguments);
      return t = String(r), i = new RegExp(e, "g"), y ? T.call(i, t) : i[b](t)
    }
  }), y || b in w || d(w, b, T)
}, function (e, t, n) {
  "use strict";
  var i = n(4),
    r = n(55),
    o = n(166),
    a = n(139),
    s = n(25),
    l = n(15),
    c = s("replace"),
    u = RegExp.prototype;
  i({
    target: "String",
    proto: !0
  }, {
    replaceAll: function e(t, n) {
      var i, s, h, d, f, p, m, g, v = r(this);
      if (null != t) {
        if ((i = o(t)) && !~String(r("flags" in u ? t.flags : a.call(t))).indexOf("g")) throw TypeError("`.replaceAll` does not allow non-global regexes");
        if (void 0 !== (s = t[c])) return s.call(t, v, n);
        if (l && i) return String(v).replace(t, n)
      }
      if (h = String(v), "" === (d = String(t))) return e.call(h, /(?:)/g, n);
      if (f = h.split(d), "function" != typeof n) return f.join(String(n));
      for (m = (p = f[0]).length, g = 1; g < f.length; g++) p += String(n(d, m, h)), m += d.length + f[g].length, p += f[g];
      return p
    }
  })
}, function (e, t, n) {
  n(61)("dispose")
}, function (e, t, n) {
  n(61)("observable")
}, function (e, t, n) {
  n(61)("patternMatch")
}, function (e, t, n) {
  "use strict";
  var i = n(4),
    r = n(15),
    o = n(197);
  i({
    target: "WeakMap",
    proto: !0,
    real: !0,
    forced: r
  }, {
    deleteAll: function () {
      return o.apply(this, arguments)
    }
  })
}, function (e, t, n) {
  n(4)({
    target: "WeakMap",
    stat: !0
  }, {
    from: n(198)
  })
}, function (e, t, n) {
  n(4)({
    target: "WeakMap",
    stat: !0
  }, {
    of: n(199)
  })
}, function (e, t, n) {
  "use strict";
  var i = n(4),
    r = n(15),
    o = n(327);
  i({
    target: "WeakSet",
    proto: !0,
    real: !0,
    forced: r
  }, {
    addAll: function () {
      return o.apply(this, arguments)
    }
  })
}, function (e, t, n) {
  "use strict";
  var i = n(4),
    r = n(15),
    o = n(197);
  i({
    target: "WeakSet",
    proto: !0,
    real: !0,
    forced: r
  }, {
    deleteAll: function () {
      return o.apply(this, arguments)
    }
  })
}, function (e, t, n) {
  n(4)({
    target: "WeakSet",
    stat: !0
  }, {
    from: n(198)
  })
}, function (e, t, n) {
  n(4)({
    target: "WeakSet",
    stat: !0
  }, {
    of: n(199)
  })
}, function (e, t, n) {
  var i = n(17),
    r = n(328),
    o = n(296),
    a = n(56);
  for (var s in r) {
    var l = i[s],
      c = l && l.prototype;
    if (c && c.forEach !== o) try {
      a(c, "forEach", o)
    } catch (e) {
      c.forEach = o
    }
  }
}, function (e, t, n) {
  var i = n(17),
    r = n(328),
    o = n(184),
    a = n(56),
    s = n(25),
    l = s("iterator"),
    c = s("toStringTag"),
    u = o.values;
  for (var h in r) {
    var d = i[h],
      f = d && d.prototype;
    if (f) {
      if (f[l] !== u) try {
        a(f, l, u)
      } catch (e) {
        f[l] = u
      }
      if (f[c] || a(f, c, h), r[h])
        for (var p in o)
          if (f[p] !== o[p]) try {
            a(f, p, o[p])
          } catch (e) {
            f[p] = o[p]
          }
    }
  }
}, function (e, t, n) {
  var i = n(4),
    r = n(17),
    o = n(228);
  i({
    global: !0,
    bind: !0,
    enumerable: !0,
    forced: !r.setImmediate || !r.clearImmediate
  }, {
    setImmediate: o.set,
    clearImmediate: o.clear
  })
}, function (e, t, n) {
  var i = n(4),
    r = n(17),
    o = n(315),
    a = n(80),
    s = r.process,
    l = "process" == a(s);
  i({
    global: !0,
    enumerable: !0,
    noTargetGet: !0
  }, {
    queueMicrotask: function (e) {
      var t = l && s.domain;
      o(t ? t.bind(e) : e)
    }
  })
}, function (e, t, n) {
  "use strict";
  n(320);
  var i, r = n(4),
    o = n(24),
    a = n(329),
    s = n(17),
    l = n(290),
    c = n(68),
    u = n(101),
    h = n(40),
    d = n(310),
    f = n(297),
    p = n(140).codeAt,
    m = n(692),
    g = n(91),
    v = n(330),
    y = n(51),
    b = s.URL,
    _ = v.URLSearchParams,
    x = v.getState,
    w = y.set,
    E = y.getterFor("URL"),
    A = Math.floor,
    S = Math.pow,
    M = /[A-Za-z]/,
    T = /[\d+\-.A-Za-z]/,
    C = /\d/,
    P = /^(0x|0X)/,
    L = /^[0-7]+$/,
    D = /^\d+$/,
    I = /^[\dA-Fa-f]+$/,
    R = /[\u0000\u0009\u000A\u000D #%/:?@[\\]]/,
    O = /[\u0000\u0009\u000A\u000D #/:?@[\\]]/,
    k = /^[\u0000-\u001F ]+|[\u0000-\u001F ]+$/g,
    N = /[\u0009\u000A\u000D]/g,
    F = function (e, t) {
      var n, i, r;
      if ("[" == t.charAt(0)) {
        if ("]" != t.charAt(t.length - 1)) return "Invalid host";
        if (!(n = V(t.slice(1, -1)))) return "Invalid host";
        e.host = n
      } else if (X(e)) {
        if (t = m(t), R.test(t)) return "Invalid host";
        if (null === (n = U(t))) return "Invalid host";
        e.host = n
      } else {
        if (O.test(t)) return "Invalid host";
        for (n = "", i = f(t), r = 0; r < i.length; r++) n += j(i[r], z);
        e.host = n
      }
    },
    U = function (e) {
      var t, n, i, r, o, a, s, l = e.split(".");
      if (l.length && "" == l[l.length - 1] && l.pop(), (t = l.length) > 4) return e;
      for (n = [], i = 0; i < t; i++) {
        if ("" == (r = l[i])) return e;
        if (o = 10, r.length > 1 && "0" == r.charAt(0) && (o = P.test(r) ? 16 : 8, r = r.slice(8 == o ? 1 : 2)), "" === r) a = 0;
        else {
          if (!(10 == o ? D : 8 == o ? L : I).test(r)) return e;
          a = parseInt(r, o)
        }
        n.push(a)
      }
      for (i = 0; i < t; i++)
        if (a = n[i], i == t - 1) {
          if (a >= S(256, 5 - t)) return null
        } else if (a > 255) return null;
      for (s = n.pop(), i = 0; i < n.length; i++) s += n[i] * S(256, 3 - i);
      return s
    },
    V = function (e) {
      var t, n, i, r, o, a, s, l = [0, 0, 0, 0, 0, 0, 0, 0],
        c = 0,
        u = null,
        h = 0,
        d = function () {
          return e.charAt(h)
        };
      if (":" == d()) {
        if (":" != e.charAt(1)) return;
        h += 2, u = ++c
      }
      for (; d();) {
        if (8 == c) return;
        if (":" != d()) {
          for (t = n = 0; n < 4 && I.test(d());) t = 16 * t + parseInt(d(), 16), h++, n++;
          if ("." == d()) {
            if (0 == n) return;
            if (h -= n, c > 6) return;
            for (i = 0; d();) {
              if (r = null, i > 0) {
                if (!("." == d() && i < 4)) return;
                h++
              }
              if (!C.test(d())) return;
              for (; C.test(d());) {
                if (o = parseInt(d(), 10), null === r) r = o;
                else {
                  if (0 == r) return;
                  r = 10 * r + o
                }
                if (r > 255) return;
                h++
              }
              l[c] = 256 * l[c] + r, 2 != ++i && 4 != i || c++
            }
            if (4 != i) return;
            break
          }
          if (":" == d()) {
            if (h++, !d()) return
          } else if (d()) return;
          l[c++] = t
        } else {
          if (null !== u) return;
          h++, u = ++c
        }
      }
      if (null !== u)
        for (a = c - u, c = 7; 0 != c && a > 0;) s = l[c], l[c--] = l[u + a - 1], l[u + --a] = s;
      else if (8 != c) return;
      return l
    },
    B = function (e) {
      var t, n, i, r;
      if ("number" == typeof e) {
        for (t = [], n = 0; n < 4; n++) t.unshift(e % 256), e = A(e / 256);
        return t.join(".")
      }
      if ("object" == typeof e) {
        for (t = "", i = function (e) {
            for (var t = null, n = 1, i = null, r = 0, o = 0; o < 8; o++) 0 !== e[o] ? (r > n && (t = i, n = r), i = null, r = 0) : (null === i && (i = o), ++r);
            return r > n && (t = i, n = r), t
          }(e), n = 0; n < 8; n++) r && 0 === e[n] || (r && (r = !1), i === n ? (t += n ? ":" : "::", r = !0) : (t += e[n].toString(16), n < 7 && (t += ":")));
        return "[" + t + "]"
      }
      return e
    },
    z = {},
    G = d({}, z, {
      " ": 1,
      '"': 1,
      "<": 1,
      ">": 1,
      "`": 1
    }),
    H = d({}, G, {
      "#": 1,
      "?": 1,
      "{": 1,
      "}": 1
    }),
    W = d({}, H, {
      "/": 1,
      ":": 1,
      ";": 1,
      "=": 1,
      "@": 1,
      "[": 1,
      "\\": 1,
      "]": 1,
      "^": 1,
      "|": 1
    }),
    j = function (e, t) {
      var n = p(e, 0);
      return n > 32 && n < 127 && !h(t, e) ? e : encodeURIComponent(e)
    },
    q = {
      ftp: 21,
      file: null,
      http: 80,
      https: 443,
      ws: 80,
      wss: 443
    },
    X = function (e) {
      return h(q, e.scheme)
    },
    Y = function (e) {
      return "" != e.username || "" != e.password
    },
    K = function (e) {
      return !e.host || e.cannotBeABaseURL || "file" == e.scheme
    },
    Q = function (e, t) {
      var n;
      return 2 == e.length && M.test(e.charAt(0)) && (":" == (n = e.charAt(1)) || !t && "|" == n)
    },
    Z = function (e) {
      var t;
      return e.length > 1 && Q(e.slice(0, 2)) && (2 == e.length || "/" === (t = e.charAt(2)) || "\\" === t || "?" === t || "#" === t)
    },
    J = function (e) {
      var t = e.path,
        n = t.length;
      !n || "file" == e.scheme && 1 == n && Q(t[0], !0) || t.pop()
    },
    $ = function (e) {
      return "." === e || "%2e" === e.toLowerCase()
    },
    ee = {},
    te = {},
    ne = {},
    ie = {},
    re = {},
    oe = {},
    ae = {},
    se = {},
    le = {},
    ce = {},
    ue = {},
    he = {},
    de = {},
    fe = {},
    pe = {},
    me = {},
    ge = {},
    ve = {},
    ye = {},
    be = {},
    _e = {},
    xe = function (e, t, n, r) {
      var o, a, s, l, c, u = n || ee,
        d = 0,
        p = "",
        m = !1,
        g = !1,
        v = !1;
      for (n || (e.scheme = "", e.username = "", e.password = "", e.host = null, e.port = null, e.path = [], e.query = null, e.fragment = null, e.cannotBeABaseURL = !1, t = t.replace(k, "")), t = t.replace(N, ""), o = f(t); d <= o.length;) {
        switch (a = o[d], u) {
          case ee:
            if (!a || !M.test(a)) {
              if (n) return "Invalid scheme";
              u = ne;
              continue
            }
            p += a.toLowerCase(), u = te;
            break;
          case te:
            if (a && (T.test(a) || "+" == a || "-" == a || "." == a)) p += a.toLowerCase();
            else {
              if (":" != a) {
                if (n) return "Invalid scheme";
                p = "", u = ne, d = 0;
                continue
              }
              if (n && (X(e) != h(q, p) || "file" == p && (Y(e) || null !== e.port) || "file" == e.scheme && !e.host)) return;
              if (e.scheme = p, n) return void(X(e) && q[e.scheme] == e.port && (e.port = null));
              p = "", "file" == e.scheme ? u = fe : X(e) && r && r.scheme == e.scheme ? u = ie : X(e) ? u = se : "/" == o[d + 1] ? (u = re, d++) : (e.cannotBeABaseURL = !0, e.path.push(""), u = ye)
            }
            break;
          case ne:
            if (!r || r.cannotBeABaseURL && "#" != a) return "Invalid scheme";
            if (r.cannotBeABaseURL && "#" == a) {
              e.scheme = r.scheme, e.path = r.path.slice(), e.query = r.query, e.fragment = "", e.cannotBeABaseURL = !0, u = _e;
              break
            }
            u = "file" == r.scheme ? fe : oe;
            continue;
          case ie:
            if ("/" != a || "/" != o[d + 1]) {
              u = oe;
              continue
            }
            u = le, d++;
            break;
          case re:
            if ("/" == a) {
              u = ce;
              break
            }
            u = ve;
            continue;
          case oe:
            if (e.scheme = r.scheme, a == i) e.username = r.username, e.password = r.password, e.host = r.host, e.port = r.port, e.path = r.path.slice(), e.query = r.query;
            else if ("/" == a || "\\" == a && X(e)) u = ae;
            else if ("?" == a) e.username = r.username, e.password = r.password, e.host = r.host, e.port = r.port, e.path = r.path.slice(), e.query = "", u = be;
            else {
              if ("#" != a) {
                e.username = r.username, e.password = r.password, e.host = r.host, e.port = r.port, e.path = r.path.slice(), e.path.pop(), u = ve;
                continue
              }
              e.username = r.username, e.password = r.password, e.host = r.host, e.port = r.port, e.path = r.path.slice(), e.query = r.query, e.fragment = "", u = _e
            }
            break;
          case ae:
            if (!X(e) || "/" != a && "\\" != a) {
              if ("/" != a) {
                e.username = r.username, e.password = r.password, e.host = r.host, e.port = r.port, u = ve;
                continue
              }
              u = ce
            } else u = le;
            break;
          case se:
            if (u = le, "/" != a || "/" != p.charAt(d + 1)) continue;
            d++;
            break;
          case le:
            if ("/" != a && "\\" != a) {
              u = ce;
              continue
            }
            break;
          case ce:
            if ("@" == a) {
              m && (p = "%40" + p), m = !0, s = f(p);
              for (var y = 0; y < s.length; y++) {
                var b = s[y];
                if (":" != b || v) {
                  var _ = j(b, W);
                  v ? e.password += _ : e.username += _
                } else v = !0
              }
              p = ""
            } else if (a == i || "/" == a || "?" == a || "#" == a || "\\" == a && X(e)) {
              if (m && "" == p) return "Invalid authority";
              d -= f(p).length + 1, p = "", u = ue
            } else p += a;
            break;
          case ue:
          case he:
            if (n && "file" == e.scheme) {
              u = me;
              continue
            }
            if (":" != a || g) {
              if (a == i || "/" == a || "?" == a || "#" == a || "\\" == a && X(e)) {
                if (X(e) && "" == p) return "Invalid host";
                if (n && "" == p && (Y(e) || null !== e.port)) return;
                if (l = F(e, p)) return l;
                if (p = "", u = ge, n) return;
                continue
              }
              "[" == a ? g = !0 : "]" == a && (g = !1), p += a
            } else {
              if ("" == p) return "Invalid host";
              if (l = F(e, p)) return l;
              if (p = "", u = de, n == he) return
            }
            break;
          case de:
            if (!C.test(a)) {
              if (a == i || "/" == a || "?" == a || "#" == a || "\\" == a && X(e) || n) {
                if ("" != p) {
                  var x = parseInt(p, 10);
                  if (x > 65535) return "Invalid port";
                  e.port = X(e) && x === q[e.scheme] ? null : x, p = ""
                }
                if (n) return;
                u = ge;
                continue
              }
              return "Invalid port"
            }
            p += a;
            break;
          case fe:
            if (e.scheme = "file", "/" == a || "\\" == a) u = pe;
            else {
              if (!r || "file" != r.scheme) {
                u = ve;
                continue
              }
              if (a == i) e.host = r.host, e.path = r.path.slice(), e.query = r.query;
              else if ("?" == a) e.host = r.host, e.path = r.path.slice(), e.query = "", u = be;
              else {
                if ("#" != a) {
                  Z(o.slice(d).join("")) || (e.host = r.host, e.path = r.path.slice(), J(e)), u = ve;
                  continue
                }
                e.host = r.host, e.path = r.path.slice(), e.query = r.query, e.fragment = "", u = _e
              }
            }
            break;
          case pe:
            if ("/" == a || "\\" == a) {
              u = me;
              break
            }
            r && "file" == r.scheme && !Z(o.slice(d).join("")) && (Q(r.path[0], !0) ? e.path.push(r.path[0]) : e.host = r.host), u = ve;
            continue;
          case me:
            if (a == i || "/" == a || "\\" == a || "?" == a || "#" == a) {
              if (!n && Q(p)) u = ve;
              else if ("" == p) {
                if (e.host = "", n) return;
                u = ge
              } else {
                if (l = F(e, p)) return l;
                if ("localhost" == e.host && (e.host = ""), n) return;
                p = "", u = ge
              }
              continue
            }
            p += a;
            break;
          case ge:
            if (X(e)) {
              if (u = ve, "/" != a && "\\" != a) continue
            } else if (n || "?" != a)
              if (n || "#" != a) {
                if (a != i && (u = ve, "/" != a)) continue
              } else e.fragment = "", u = _e;
            else e.query = "", u = be;
            break;
          case ve:
            if (a == i || "/" == a || "\\" == a && X(e) || !n && ("?" == a || "#" == a)) {
              if (".." === (c = (c = p).toLowerCase()) || "%2e." === c || ".%2e" === c || "%2e%2e" === c ? (J(e), "/" == a || "\\" == a && X(e) || e.path.push("")) : $(p) ? "/" == a || "\\" == a && X(e) || e.path.push("") : ("file" == e.scheme && !e.path.length && Q(p) && (e.host && (e.host = ""), p = p.charAt(0) + ":"), e.path.push(p)), p = "", "file" == e.scheme && (a == i || "?" == a || "#" == a))
                for (; e.path.length > 1 && "" === e.path[0];) e.path.shift();
              "?" == a ? (e.query = "", u = be) : "#" == a && (e.fragment = "", u = _e)
            } else p += j(a, H);
            break;
          case ye:
            "?" == a ? (e.query = "", u = be) : "#" == a ? (e.fragment = "", u = _e) : a != i && (e.path[0] += j(a, z));
            break;
          case be:
            n || "#" != a ? a != i && ("'" == a && X(e) ? e.query += "%27" : e.query += "#" == a ? "%23" : j(a, z)) : (e.fragment = "", u = _e);
            break;
          case _e:
            a != i && (e.fragment += j(a, G))
        }
        d++
      }
    },
    we = function (e) {
      var t, n, i = u(this, we, "URL"),
        r = arguments.length > 1 ? arguments[1] : void 0,
        a = String(e),
        s = w(i, {
          type: "URL"
        });
      if (void 0 !== r)
        if (r instanceof we) t = E(r);
        else if (n = xe(t = {}, String(r))) throw TypeError(n);
      if (n = xe(s, a, null, t)) throw TypeError(n);
      var l = s.searchParams = new _,
        c = x(l);
      c.updateSearchParams(s.query), c.updateURL = function () {
        s.query = String(l) || null
      }, o || (i.href = Ae.call(i), i.origin = Se.call(i), i.protocol = Me.call(i), i.username = Te.call(i), i.password = Ce.call(i), i.host = Pe.call(i), i.hostname = Le.call(i), i.port = De.call(i), i.pathname = Ie.call(i), i.search = Re.call(i), i.searchParams = Oe.call(i), i.hash = ke.call(i))
    },
    Ee = we.prototype,
    Ae = function () {
      var e = E(this),
        t = e.scheme,
        n = e.username,
        i = e.password,
        r = e.host,
        o = e.port,
        a = e.path,
        s = e.query,
        l = e.fragment,
        c = t + ":";
      return null !== r ? (c += "//", Y(e) && (c += n + (i ? ":" + i : "") + "@"), c += B(r), null !== o && (c += ":" + o)) : "file" == t && (c += "//"), c += e.cannotBeABaseURL ? a[0] : a.length ? "/" + a.join("/") : "", null !== s && (c += "?" + s), null !== l && (c += "#" + l), c
    },
    Se = function () {
      var e = E(this),
        t = e.scheme,
        n = e.port;
      if ("blob" == t) try {
        return new URL(t.path[0]).origin
      } catch (e) {
        return "null"
      }
      return "file" != t && X(e) ? t + "://" + B(e.host) + (null !== n ? ":" + n : "") : "null"
    },
    Me = function () {
      return E(this).scheme + ":"
    },
    Te = function () {
      return E(this).username
    },
    Ce = function () {
      return E(this).password
    },
    Pe = function () {
      var e = E(this),
        t = e.host,
        n = e.port;
      return null === t ? "" : null === n ? B(t) : B(t) + ":" + n
    },
    Le = function () {
      var e = E(this).host;
      return null === e ? "" : B(e)
    },
    De = function () {
      var e = E(this).port;
      return null === e ? "" : String(e)
    },
    Ie = function () {
      var e = E(this),
        t = e.path;
      return e.cannotBeABaseURL ? t[0] : t.length ? "/" + t.join("/") : ""
    },
    Re = function () {
      var e = E(this).query;
      return e ? "?" + e : ""
    },
    Oe = function () {
      return E(this).searchParams
    },
    ke = function () {
      var e = E(this).fragment;
      return e ? "#" + e : ""
    },
    Ne = function (e, t) {
      return {
        get: e,
        set: t,
        configurable: !0,
        enumerable: !0
      }
    };
  if (o && l(Ee, {
      href: Ne(Ae, (function (e) {
        var t = E(this),
          n = String(e),
          i = xe(t, n);
        if (i) throw TypeError(i);
        x(t.searchParams).updateSearchParams(t.query)
      })),
      origin: Ne(Se),
      protocol: Ne(Me, (function (e) {
        var t = E(this);
        xe(t, String(e) + ":", ee)
      })),
      username: Ne(Te, (function (e) {
        var t = E(this),
          n = f(String(e));
        if (!K(t)) {
          t.username = "";
          for (var i = 0; i < n.length; i++) t.username += j(n[i], W)
        }
      })),
      password: Ne(Ce, (function (e) {
        var t = E(this),
          n = f(String(e));
        if (!K(t)) {
          t.password = "";
          for (var i = 0; i < n.length; i++) t.password += j(n[i], W)
        }
      })),
      host: Ne(Pe, (function (e) {
        var t = E(this);
        t.cannotBeABaseURL || xe(t, String(e), ue)
      })),
      hostname: Ne(Le, (function (e) {
        var t = E(this);
        t.cannotBeABaseURL || xe(t, String(e), he)
      })),
      port: Ne(De, (function (e) {
        var t = E(this);
        K(t) || ("" == (e = String(e)) ? t.port = null : xe(t, e, de))
      })),
      pathname: Ne(Ie, (function (e) {
        var t = E(this);
        t.cannotBeABaseURL || (t.path = [], xe(t, e + "", ge))
      })),
      search: Ne(Re, (function (e) {
        var t = E(this);
        "" == (e = String(e)) ? t.query = null: ("?" == e.charAt(0) && (e = e.slice(1)), t.query = "", xe(t, e, be)), x(t.searchParams).updateSearchParams(t.query)
      })),
      searchParams: Ne(Oe),
      hash: Ne(ke, (function (e) {
        var t = E(this);
        "" != (e = String(e)) ? ("#" == e.charAt(0) && (e = e.slice(1)), t.fragment = "", xe(t, e, _e)) : t.fragment = null
      }))
    }), c(Ee, "toJSON", (function () {
      return Ae.call(this)
    }), {
      enumerable: !0
    }), c(Ee, "toString", (function () {
      return Ae.call(this)
    }), {
      enumerable: !0
    }), b) {
    var Fe = b.createObjectURL,
      Ue = b.revokeObjectURL;
    Fe && c(we, "createObjectURL", (function (e) {
      return Fe.apply(b, arguments)
    })), Ue && c(we, "revokeObjectURL", (function (e) {
      return Ue.apply(b, arguments)
    }))
  }
  g(we, "URL"), r({
    global: !0,
    forced: !a,
    sham: !o
  }, {
    URL: we
  })
}, function (e, t, n) {
  "use strict";
  var i = /[^\0-\u007E]/,
    r = /[.\u3002\uFF0E\uFF61]/g,
    o = "Overflow: input needs wider integers to process",
    a = Math.floor,
    s = String.fromCharCode,
    l = function (e) {
      return e + 22 + 75 * (e < 26)
    },
    c = function (e, t, n) {
      var i = 0;
      for (e = n ? a(e / 700) : e >> 1, e += a(e / t); e > 455; i += 36) e = a(e / 35);
      return a(i + 36 * e / (e + 38))
    },
    u = function (e) {
      var t, n, i = [],
        r = (e = function (e) {
          for (var t = [], n = 0, i = e.length; n < i;) {
            var r = e.charCodeAt(n++);
            if (r >= 55296 && r <= 56319 && n < i) {
              var o = e.charCodeAt(n++);
              56320 == (64512 & o) ? t.push(((1023 & r) << 10) + (1023 & o) + 65536) : (t.push(r), n--)
            } else t.push(r)
          }
          return t
        }(e)).length,
        u = 128,
        h = 0,
        d = 72;
      for (t = 0; t < e.length; t++)(n = e[t]) < 128 && i.push(s(n));
      var f = i.length,
        p = f;
      for (f && i.push("-"); p < r;) {
        var m = 2147483647;
        for (t = 0; t < e.length; t++)(n = e[t]) >= u && n < m && (m = n);
        var g = p + 1;
        if (m - u > a((2147483647 - h) / g)) throw RangeError(o);
        for (h += (m - u) * g, u = m, t = 0; t < e.length; t++) {
          if ((n = e[t]) < u && ++h > 2147483647) throw RangeError(o);
          if (n == u) {
            for (var v = h, y = 36;; y += 36) {
              var b = y <= d ? 1 : y >= d + 26 ? 26 : y - d;
              if (v < b) break;
              var _ = v - b,
                x = 36 - b;
              i.push(s(l(b + _ % x))), v = a(_ / x)
            }
            i.push(s(l(v))), d = c(h, g, p == f), h = 0, ++p
          }
        }++h, ++u
      }
      return i.join("")
    };
  e.exports = function (e) {
    var t, n, o = [],
      a = e.toLowerCase().replace(r, ".").split(".");
    for (t = 0; t < a.length; t++) n = a[t], o.push(i.test(n) ? "xn--" + u(n) : n);
    return o.join(".")
  }
}, function (e, t, n) {
  "use strict";
  n(4)({
    target: "URL",
    proto: !0,
    enumerable: !0
  }, {
    toJSON: function () {
      return URL.prototype.toString.call(this)
    }
  })
}, function (e, t, n) {
  var i = function (e) {
    "use strict";
    var t = Object.prototype,
      n = t.hasOwnProperty,
      i = "function" == typeof Symbol ? Symbol : {},
      r = i.iterator || "@@iterator",
      o = i.asyncIterator || "@@asyncIterator",
      a = i.toStringTag || "@@toStringTag";

    function s(e, t, n, i) {
      var r = t && t.prototype instanceof u ? t : u,
        o = Object.create(r.prototype),
        a = new w(i || []);
      return o._invoke = function (e, t, n) {
        var i = "suspendedStart";
        return function (r, o) {
          if ("executing" === i) throw new Error("Generator is already running");
          if ("completed" === i) {
            if ("throw" === r) throw o;
            return A()
          }
          for (n.method = r, n.arg = o;;) {
            var a = n.delegate;
            if (a) {
              var s = b(a, n);
              if (s) {
                if (s === c) continue;
                return s
              }
            }
            if ("next" === n.method) n.sent = n._sent = n.arg;
            else if ("throw" === n.method) {
              if ("suspendedStart" === i) throw i = "completed", n.arg;
              n.dispatchException(n.arg)
            } else "return" === n.method && n.abrupt("return", n.arg);
            i = "executing";
            var u = l(e, t, n);
            if ("normal" === u.type) {
              if (i = n.done ? "completed" : "suspendedYield", u.arg === c) continue;
              return {
                value: u.arg,
                done: n.done
              }
            }
            "throw" === u.type && (i = "completed", n.method = "throw", n.arg = u.arg)
          }
        }
      }(e, n, a), o
    }

    function l(e, t, n) {
      try {
        return {
          type: "normal",
          arg: e.call(t, n)
        }
      } catch (e) {
        return {
          type: "throw",
          arg: e
        }
      }
    }
    e.wrap = s;
    var c = {};

    function u() {}

    function h() {}

    function d() {}
    var f = {};
    f[r] = function () {
      return this
    };
    var p = Object.getPrototypeOf,
      m = p && p(p(E([])));
    m && m !== t && n.call(m, r) && (f = m);
    var g = d.prototype = u.prototype = Object.create(f);

    function v(e) {
      ["next", "throw", "return"].forEach((function (t) {
        e[t] = function (e) {
          return this._invoke(t, e)
        }
      }))
    }

    function y(e) {
      var t;
      this._invoke = function (i, r) {
        function o() {
          return new Promise((function (t, o) {
            ! function t(i, r, o, a) {
              var s = l(e[i], e, r);
              if ("throw" !== s.type) {
                var c = s.arg,
                  u = c.value;
                return u && "object" == typeof u && n.call(u, "__await") ? Promise.resolve(u.__await).then((function (e) {
                  t("next", e, o, a)
                }), (function (e) {
                  t("throw", e, o, a)
                })) : Promise.resolve(u).then((function (e) {
                  c.value = e, o(c)
                }), (function (e) {
                  return t("throw", e, o, a)
                }))
              }
              a(s.arg)
            }(i, r, t, o)
          }))
        }
        return t = t ? t.then(o, o) : o()
      }
    }

    function b(e, t) {
      var n = e.iterator[t.method];
      if (void 0 === n) {
        if (t.delegate = null, "throw" === t.method) {
          if (e.iterator.return && (t.method = "return", t.arg = void 0, b(e, t), "throw" === t.method)) return c;
          t.method = "throw", t.arg = new TypeError("The iterator does not provide a 'throw' method")
        }
        return c
      }
      var i = l(n, e.iterator, t.arg);
      if ("throw" === i.type) return t.method = "throw", t.arg = i.arg, t.delegate = null, c;
      var r = i.arg;
      return r ? r.done ? (t[e.resultName] = r.value, t.next = e.nextLoc, "return" !== t.method && (t.method = "next", t.arg = void 0), t.delegate = null, c) : r : (t.method = "throw", t.arg = new TypeError("iterator result is not an object"), t.delegate = null, c)
    }

    function _(e) {
      var t = {
        tryLoc: e[0]
      };
      1 in e && (t.catchLoc = e[1]), 2 in e && (t.finallyLoc = e[2], t.afterLoc = e[3]), this.tryEntries.push(t)
    }

    function x(e) {
      var t = e.completion || {};
      t.type = "normal", delete t.arg, e.completion = t
    }

    function w(e) {
      this.tryEntries = [{
        tryLoc: "root"
      }], e.forEach(_, this), this.reset(!0)
    }

    function E(e) {
      if (e) {
        var t = e[r];
        if (t) return t.call(e);
        if ("function" == typeof e.next) return e;
        if (!isNaN(e.length)) {
          var i = -1,
            o = function t() {
              for (; ++i < e.length;)
                if (n.call(e, i)) return t.value = e[i], t.done = !1, t;
              return t.value = void 0, t.done = !0, t
            };
          return o.next = o
        }
      }
      return {
        next: A
      }
    }

    function A() {
      return {
        value: void 0,
        done: !0
      }
    }
    return h.prototype = g.constructor = d, d.constructor = h, d[a] = h.displayName = "GeneratorFunction", e.isGeneratorFunction = function (e) {
      var t = "function" == typeof e && e.constructor;
      return !!t && (t === h || "GeneratorFunction" === (t.displayName || t.name))
    }, e.mark = function (e) {
      return Object.setPrototypeOf ? Object.setPrototypeOf(e, d) : (e.__proto__ = d, a in e || (e[a] = "GeneratorFunction")), e.prototype = Object.create(g), e
    }, e.awrap = function (e) {
      return {
        __await: e
      }
    }, v(y.prototype), y.prototype[o] = function () {
      return this
    }, e.AsyncIterator = y, e.async = function (t, n, i, r) {
      var o = new y(s(t, n, i, r));
      return e.isGeneratorFunction(n) ? o : o.next().then((function (e) {
        return e.done ? e.value : o.next()
      }))
    }, v(g), g[a] = "Generator", g[r] = function () {
      return this
    }, g.toString = function () {
      return "[object Generator]"
    }, e.keys = function (e) {
      var t = [];
      for (var n in e) t.push(n);
      return t.reverse(),
        function n() {
          for (; t.length;) {
            var i = t.pop();
            if (i in e) return n.value = i, n.done = !1, n
          }
          return n.done = !0, n
        }
    }, e.values = E, w.prototype = {
      constructor: w,
      reset: function (e) {
        if (this.prev = 0, this.next = 0, this.sent = this._sent = void 0, this.done = !1, this.delegate = null, this.method = "next", this.arg = void 0, this.tryEntries.forEach(x), !e)
          for (var t in this) "t" === t.charAt(0) && n.call(this, t) && !isNaN(+t.slice(1)) && (this[t] = void 0)
      },
      stop: function () {
        this.done = !0;
        var e = this.tryEntries[0].completion;
        if ("throw" === e.type) throw e.arg;
        return this.rval
      },
      dispatchException: function (e) {
        if (this.done) throw e;
        var t = this;

        function i(n, i) {
          return a.type = "throw", a.arg = e, t.next = n, i && (t.method = "next", t.arg = void 0), !!i
        }
        for (var r = this.tryEntries.length - 1; r >= 0; --r) {
          var o = this.tryEntries[r],
            a = o.completion;
          if ("root" === o.tryLoc) return i("end");
          if (o.tryLoc <= this.prev) {
            var s = n.call(o, "catchLoc"),
              l = n.call(o, "finallyLoc");
            if (s && l) {
              if (this.prev < o.catchLoc) return i(o.catchLoc, !0);
              if (this.prev < o.finallyLoc) return i(o.finallyLoc)
            } else if (s) {
              if (this.prev < o.catchLoc) return i(o.catchLoc, !0)
            } else {
              if (!l) throw new Error("try statement without catch or finally");
              if (this.prev < o.finallyLoc) return i(o.finallyLoc)
            }
          }
        }
      },
      abrupt: function (e, t) {
        for (var i = this.tryEntries.length - 1; i >= 0; --i) {
          var r = this.tryEntries[i];
          if (r.tryLoc <= this.prev && n.call(r, "finallyLoc") && this.prev < r.finallyLoc) {
            var o = r;
            break
          }
        }
        o && ("break" === e || "continue" === e) && o.tryLoc <= t && t <= o.finallyLoc && (o = null);
        var a = o ? o.completion : {};
        return a.type = e, a.arg = t, o ? (this.method = "next", this.next = o.finallyLoc, c) : this.complete(a)
      },
      complete: function (e, t) {
        if ("throw" === e.type) throw e.arg;
        return "break" === e.type || "continue" === e.type ? this.next = e.arg : "return" === e.type ? (this.rval = this.arg = e.arg, this.method = "return", this.next = "end") : "normal" === e.type && t && (this.next = t), c
      },
      finish: function (e) {
        for (var t = this.tryEntries.length - 1; t >= 0; --t) {
          var n = this.tryEntries[t];
          if (n.finallyLoc === e) return this.complete(n.completion, n.afterLoc), x(n), c
        }
      },
      catch: function (e) {
        for (var t = this.tryEntries.length - 1; t >= 0; --t) {
          var n = this.tryEntries[t];
          if (n.tryLoc === e) {
            var i = n.completion;
            if ("throw" === i.type) {
              var r = i.arg;
              x(n)
            }
            return r
          }
        }
        throw new Error("illegal catch attempt")
      },
      delegateYield: function (e, t, n) {
        return this.delegate = {
          iterator: E(e),
          resultName: t,
          nextLoc: n
        }, "next" === this.method && (this.arg = void 0), c
      }
    }, e
  }(e.exports);
  try {
    regeneratorRuntime = i
  } catch (e) {
    Function("r", "regeneratorRuntime = r")(i)
  }
}, function (e, t, n) {
  (function (t) {
    function n() {
      return "undefined" != typeof window && null !== window ? window : "undefined" != typeof self && null !== self ? self : t
    }

    function i(e) {
      for (var t = n(), i = e.split("."), r = 0; r < i.length; ++r) t[i[r]] = t[i[r]] || {}, t = t[i[r]];
      return t
    }
    i("Autodesk.Viewing.Private"), i("Autodesk.Viewing.Extensions"), i("Autodesk.Extensions"), i("Autodesk.Viewing.Shaders"), i("Autodesk.Viewing.UI"), i("Autodesk.LMVTK"), Autodesk.Viewing.getGlobal = n, Autodesk.Viewing.AutodeskNamespace = i, n().AutodeskNamespace = i;
    var r = n().Autodesk.Viewing.Private;
    r.LMV_WORKER_URL = "lmvworker.min.js", r.ENABLE_DEBUG = r.ENABLE_DEBUG || !1, n().ENABLE_DEBUG = r.ENABLE_DEBUG, r.ENABLE_INLINE_WORKER = !0, e.exports.Autodesk = n().Autodesk
  }).call(this, n(151))
}, function (e, t) {
  e.exports = function (e) {
    return e.webpackPolyfill || (e.deprecate = function () {}, e.paths = [], e.children || (e.children = []), Object.defineProperty(e, "loaded", {
      enumerable: !0,
      get: function () {
        return e.l
      }
    }), Object.defineProperty(e, "id", {
      enumerable: !0,
      get: function () {
        return e.i
      }
    }), e.webpackPolyfill = 1), e
  }
}, function (e, t) {
  e.exports = "DELETED_WORKERNODE"
}, function (e, t, n) {
  "use strict";
  var i = {};
  (0, n(114).assign)(i, n(699), n(702), n(335)), e.exports = i
}, function (e, t, n) {
  "use strict";
  var i = n(700),
    r = n(114),
    o = n(333),
    a = n(235),
    s = n(334),
    l = Object.prototype.toString;

  function c(e) {
    if (!(this instanceof c)) return new c(e);
    this.options = r.assign({
      level: -1,
      method: 8,
      chunkSize: 16384,
      windowBits: 15,
      memLevel: 8,
      strategy: 0,
      to: ""
    }, e || {});
    var t = this.options;
    t.raw && t.windowBits > 0 ? t.windowBits = -t.windowBits : t.gzip && t.windowBits > 0 && t.windowBits < 16 && (t.windowBits += 16), this.err = 0, this.msg = "", this.ended = !1, this.chunks = [], this.strm = new s, this.strm.avail_out = 0;
    var n = i.deflateInit2(this.strm, t.level, t.method, t.windowBits, t.memLevel, t.strategy);
    if (0 !== n) throw new Error(a[n]);
    if (t.header && i.deflateSetHeader(this.strm, t.header), t.dictionary) {
      var u;
      if (u = "string" == typeof t.dictionary ? o.string2buf(t.dictionary) : "[object ArrayBuffer]" === l.call(t.dictionary) ? new Uint8Array(t.dictionary) : t.dictionary, 0 !== (n = i.deflateSetDictionary(this.strm, u))) throw new Error(a[n]);
      this._dict_set = !0
    }
  }

  function u(e, t) {
    var n = new c(t);
    if (n.push(e, !0), n.err) throw n.msg || a[n.err];
    return n.result
  }
  c.prototype.push = function (e, t) {
    var n, a, s = this.strm,
      c = this.options.chunkSize;
    if (this.ended) return !1;
    a = t === ~~t ? t : !0 === t ? 4 : 0, "string" == typeof e ? s.input = o.string2buf(e) : "[object ArrayBuffer]" === l.call(e) ? s.input = new Uint8Array(e) : s.input = e, s.next_in = 0, s.avail_in = s.input.length;
    do {
      if (0 === s.avail_out && (s.output = new r.Buf8(c), s.next_out = 0, s.avail_out = c), 1 !== (n = i.deflate(s, a)) && 0 !== n) return this.onEnd(n), this.ended = !0, !1;
      0 !== s.avail_out && (0 !== s.avail_in || 4 !== a && 2 !== a) || ("string" === this.options.to ? this.onData(o.buf2binstring(r.shrinkBuf(s.output, s.next_out))) : this.onData(r.shrinkBuf(s.output, s.next_out)))
    } while ((s.avail_in > 0 || 0 === s.avail_out) && 1 !== n);
    return 4 === a ? (n = i.deflateEnd(this.strm), this.onEnd(n), this.ended = !0, 0 === n) : 2 !== a || (this.onEnd(0), s.avail_out = 0, !0)
  }, c.prototype.onData = function (e) {
    this.chunks.push(e)
  }, c.prototype.onEnd = function (e) {
    0 === e && ("string" === this.options.to ? this.result = this.chunks.join("") : this.result = r.flattenChunks(this.chunks)), this.chunks = [], this.err = e, this.msg = this.strm.msg
  }, t.Deflate = c, t.deflate = u, t.deflateRaw = function (e, t) {
    return (t = t || {}).raw = !0, u(e, t)
  }, t.gzip = function (e, t) {
    return (t = t || {}).gzip = !0, u(e, t)
  }
}, function (e, t, n) {
  "use strict";
  var i, r = n(114),
    o = n(701),
    a = n(331),
    s = n(332),
    l = n(235);

  function c(e, t) {
    return e.msg = l[t], t
  }

  function u(e) {
    return (e << 1) - (e > 4 ? 9 : 0)
  }

  function h(e) {
    for (var t = e.length; --t >= 0;) e[t] = 0
  }

  function d(e) {
    var t = e.state,
      n = t.pending;
    n > e.avail_out && (n = e.avail_out), 0 !== n && (r.arraySet(e.output, t.pending_buf, t.pending_out, n, e.next_out), e.next_out += n, t.pending_out += n, e.total_out += n, e.avail_out -= n, t.pending -= n, 0 === t.pending && (t.pending_out = 0))
  }

  function f(e, t) {
    o._tr_flush_block(e, e.block_start >= 0 ? e.block_start : -1, e.strstart - e.block_start, t), e.block_start = e.strstart, d(e.strm)
  }

  function p(e, t) {
    e.pending_buf[e.pending++] = t
  }

  function m(e, t) {
    e.pending_buf[e.pending++] = t >>> 8 & 255, e.pending_buf[e.pending++] = 255 & t
  }

  function g(e, t) {
    var n, i, r = e.max_chain_length,
      o = e.strstart,
      a = e.prev_length,
      s = e.nice_match,
      l = e.strstart > e.w_size - 262 ? e.strstart - (e.w_size - 262) : 0,
      c = e.window,
      u = e.w_mask,
      h = e.prev,
      d = e.strstart + 258,
      f = c[o + a - 1],
      p = c[o + a];
    e.prev_length >= e.good_match && (r >>= 2), s > e.lookahead && (s = e.lookahead);
    do {
      if (c[(n = t) + a] === p && c[n + a - 1] === f && c[n] === c[o] && c[++n] === c[o + 1]) {
        o += 2, n++;
        do {} while (c[++o] === c[++n] && c[++o] === c[++n] && c[++o] === c[++n] && c[++o] === c[++n] && c[++o] === c[++n] && c[++o] === c[++n] && c[++o] === c[++n] && c[++o] === c[++n] && o < d);
        if (i = 258 - (d - o), o = d - 258, i > a) {
          if (e.match_start = t, a = i, i >= s) break;
          f = c[o + a - 1], p = c[o + a]
        }
      }
    } while ((t = h[t & u]) > l && 0 != --r);
    return a <= e.lookahead ? a : e.lookahead
  }

  function v(e) {
    var t, n, i, o, l, c, u, h, d, f, p = e.w_size;
    do {
      if (o = e.window_size - e.lookahead - e.strstart, e.strstart >= p + (p - 262)) {
        r.arraySet(e.window, e.window, p, p, 0), e.match_start -= p, e.strstart -= p, e.block_start -= p, t = n = e.hash_size;
        do {
          i = e.head[--t], e.head[t] = i >= p ? i - p : 0
        } while (--n);
        t = n = p;
        do {
          i = e.prev[--t], e.prev[t] = i >= p ? i - p : 0
        } while (--n);
        o += p
      }
      if (0 === e.strm.avail_in) break;
      if (c = e.strm, u = e.window, h = e.strstart + e.lookahead, d = o, f = void 0, (f = c.avail_in) > d && (f = d), n = 0 === f ? 0 : (c.avail_in -= f, r.arraySet(u, c.input, c.next_in, f, h), 1 === c.state.wrap ? c.adler = a(c.adler, u, f, h) : 2 === c.state.wrap && (c.adler = s(c.adler, u, f, h)), c.next_in += f, c.total_in += f, f), e.lookahead += n, e.lookahead + e.insert >= 3)
        for (l = e.strstart - e.insert, e.ins_h = e.window[l], e.ins_h = (e.ins_h << e.hash_shift ^ e.window[l + 1]) & e.hash_mask; e.insert && (e.ins_h = (e.ins_h << e.hash_shift ^ e.window[l + 3 - 1]) & e.hash_mask, e.prev[l & e.w_mask] = e.head[e.ins_h], e.head[e.ins_h] = l, l++, e.insert--, !(e.lookahead + e.insert < 3)););
    } while (e.lookahead < 262 && 0 !== e.strm.avail_in)
  }

  function y(e, t) {
    for (var n, i;;) {
      if (e.lookahead < 262) {
        if (v(e), e.lookahead < 262 && 0 === t) return 1;
        if (0 === e.lookahead) break
      }
      if (n = 0, e.lookahead >= 3 && (e.ins_h = (e.ins_h << e.hash_shift ^ e.window[e.strstart + 3 - 1]) & e.hash_mask, n = e.prev[e.strstart & e.w_mask] = e.head[e.ins_h], e.head[e.ins_h] = e.strstart), 0 !== n && e.strstart - n <= e.w_size - 262 && (e.match_length = g(e, n)), e.match_length >= 3)
        if (i = o._tr_tally(e, e.strstart - e.match_start, e.match_length - 3), e.lookahead -= e.match_length, e.match_length <= e.max_lazy_match && e.lookahead >= 3) {
          e.match_length--;
          do {
            e.strstart++, e.ins_h = (e.ins_h << e.hash_shift ^ e.window[e.strstart + 3 - 1]) & e.hash_mask, n = e.prev[e.strstart & e.w_mask] = e.head[e.ins_h], e.head[e.ins_h] = e.strstart
          } while (0 != --e.match_length);
          e.strstart++
        } else e.strstart += e.match_length, e.match_length = 0, e.ins_h = e.window[e.strstart], e.ins_h = (e.ins_h << e.hash_shift ^ e.window[e.strstart + 1]) & e.hash_mask;
      else i = o._tr_tally(e, 0, e.window[e.strstart]), e.lookahead--, e.strstart++;
      if (i && (f(e, !1), 0 === e.strm.avail_out)) return 1
    }
    return e.insert = e.strstart < 2 ? e.strstart : 2, 4 === t ? (f(e, !0), 0 === e.strm.avail_out ? 3 : 4) : e.last_lit && (f(e, !1), 0 === e.strm.avail_out) ? 1 : 2
  }

  function b(e, t) {
    for (var n, i, r;;) {
      if (e.lookahead < 262) {
        if (v(e), e.lookahead < 262 && 0 === t) return 1;
        if (0 === e.lookahead) break
      }
      if (n = 0, e.lookahead >= 3 && (e.ins_h = (e.ins_h << e.hash_shift ^ e.window[e.strstart + 3 - 1]) & e.hash_mask, n = e.prev[e.strstart & e.w_mask] = e.head[e.ins_h], e.head[e.ins_h] = e.strstart), e.prev_length = e.match_length, e.prev_match = e.match_start, e.match_length = 2, 0 !== n && e.prev_length < e.max_lazy_match && e.strstart - n <= e.w_size - 262 && (e.match_length = g(e, n), e.match_length <= 5 && (1 === e.strategy || 3 === e.match_length && e.strstart - e.match_start > 4096) && (e.match_length = 2)), e.prev_length >= 3 && e.match_length <= e.prev_length) {
        r = e.strstart + e.lookahead - 3, i = o._tr_tally(e, e.strstart - 1 - e.prev_match, e.prev_length - 3), e.lookahead -= e.prev_length - 1, e.prev_length -= 2;
        do {
          ++e.strstart <= r && (e.ins_h = (e.ins_h << e.hash_shift ^ e.window[e.strstart + 3 - 1]) & e.hash_mask, n = e.prev[e.strstart & e.w_mask] = e.head[e.ins_h], e.head[e.ins_h] = e.strstart)
        } while (0 != --e.prev_length);
        if (e.match_available = 0, e.match_length = 2, e.strstart++, i && (f(e, !1), 0 === e.strm.avail_out)) return 1
      } else if (e.match_available) {
        if ((i = o._tr_tally(e, 0, e.window[e.strstart - 1])) && f(e, !1), e.strstart++, e.lookahead--, 0 === e.strm.avail_out) return 1
      } else e.match_available = 1, e.strstart++, e.lookahead--
    }
    return e.match_available && (i = o._tr_tally(e, 0, e.window[e.strstart - 1]), e.match_available = 0), e.insert = e.strstart < 2 ? e.strstart : 2, 4 === t ? (f(e, !0), 0 === e.strm.avail_out ? 3 : 4) : e.last_lit && (f(e, !1), 0 === e.strm.avail_out) ? 1 : 2
  }

  function _(e, t, n, i, r) {
    this.good_length = e, this.max_lazy = t, this.nice_length = n, this.max_chain = i, this.func = r
  }

  function x() {
    this.strm = null, this.status = 0, this.pending_buf = null, this.pending_buf_size = 0, this.pending_out = 0, this.pending = 0, this.wrap = 0, this.gzhead = null, this.gzindex = 0, this.method = 8, this.last_flush = -1, this.w_size = 0, this.w_bits = 0, this.w_mask = 0, this.window = null, this.window_size = 0, this.prev = null, this.head = null, this.ins_h = 0, this.hash_size = 0, this.hash_bits = 0, this.hash_mask = 0, this.hash_shift = 0, this.block_start = 0, this.match_length = 0, this.prev_match = 0, this.match_available = 0, this.strstart = 0, this.match_start = 0, this.lookahead = 0, this.prev_length = 0, this.max_chain_length = 0, this.max_lazy_match = 0, this.level = 0, this.strategy = 0, this.good_match = 0, this.nice_match = 0, this.dyn_ltree = new r.Buf16(1146), this.dyn_dtree = new r.Buf16(122), this.bl_tree = new r.Buf16(78), h(this.dyn_ltree), h(this.dyn_dtree), h(this.bl_tree), this.l_desc = null, this.d_desc = null, this.bl_desc = null, this.bl_count = new r.Buf16(16), this.heap = new r.Buf16(573), h(this.heap), this.heap_len = 0, this.heap_max = 0, this.depth = new r.Buf16(573), h(this.depth), this.l_buf = 0, this.lit_bufsize = 0, this.last_lit = 0, this.d_buf = 0, this.opt_len = 0, this.static_len = 0, this.matches = 0, this.insert = 0, this.bi_buf = 0, this.bi_valid = 0
  }

  function w(e) {
    var t;
    return e && e.state ? (e.total_in = e.total_out = 0, e.data_type = 2, (t = e.state).pending = 0, t.pending_out = 0, t.wrap < 0 && (t.wrap = -t.wrap), t.status = t.wrap ? 42 : 113, e.adler = 2 === t.wrap ? 0 : 1, t.last_flush = 0, o._tr_init(t), 0) : c(e, -2)
  }

  function E(e) {
    var t, n = w(e);
    return 0 === n && ((t = e.state).window_size = 2 * t.w_size, h(t.head), t.max_lazy_match = i[t.level].max_lazy, t.good_match = i[t.level].good_length, t.nice_match = i[t.level].nice_length, t.max_chain_length = i[t.level].max_chain, t.strstart = 0, t.block_start = 0, t.lookahead = 0, t.insert = 0, t.match_length = t.prev_length = 2, t.match_available = 0, t.ins_h = 0), n
  }

  function A(e, t, n, i, o, a) {
    if (!e) return -2;
    var s = 1;
    if (-1 === t && (t = 6), i < 0 ? (s = 0, i = -i) : i > 15 && (s = 2, i -= 16), o < 1 || o > 9 || 8 !== n || i < 8 || i > 15 || t < 0 || t > 9 || a < 0 || a > 4) return c(e, -2);
    8 === i && (i = 9);
    var l = new x;
    return e.state = l, l.strm = e, l.wrap = s, l.gzhead = null, l.w_bits = i, l.w_size = 1 << l.w_bits, l.w_mask = l.w_size - 1, l.hash_bits = o + 7, l.hash_size = 1 << l.hash_bits, l.hash_mask = l.hash_size - 1, l.hash_shift = ~~((l.hash_bits + 3 - 1) / 3), l.window = new r.Buf8(2 * l.w_size), l.head = new r.Buf16(l.hash_size), l.prev = new r.Buf16(l.w_size), l.lit_bufsize = 1 << o + 6, l.pending_buf_size = 4 * l.lit_bufsize, l.pending_buf = new r.Buf8(l.pending_buf_size), l.d_buf = 1 * l.lit_bufsize, l.l_buf = 3 * l.lit_bufsize, l.level = t, l.strategy = a, l.method = n, E(e)
  }
  i = [new _(0, 0, 0, 0, (function (e, t) {
    var n = 65535;
    for (n > e.pending_buf_size - 5 && (n = e.pending_buf_size - 5);;) {
      if (e.lookahead <= 1) {
        if (v(e), 0 === e.lookahead && 0 === t) return 1;
        if (0 === e.lookahead) break
      }
      e.strstart += e.lookahead, e.lookahead = 0;
      var i = e.block_start + n;
      if ((0 === e.strstart || e.strstart >= i) && (e.lookahead = e.strstart - i, e.strstart = i, f(e, !1), 0 === e.strm.avail_out)) return 1;
      if (e.strstart - e.block_start >= e.w_size - 262 && (f(e, !1), 0 === e.strm.avail_out)) return 1
    }
    return e.insert = 0, 4 === t ? (f(e, !0), 0 === e.strm.avail_out ? 3 : 4) : (e.strstart > e.block_start && (f(e, !1), e.strm.avail_out), 1)
  })), new _(4, 4, 8, 4, y), new _(4, 5, 16, 8, y), new _(4, 6, 32, 32, y), new _(4, 4, 16, 16, b), new _(8, 16, 32, 32, b), new _(8, 16, 128, 128, b), new _(8, 32, 128, 256, b), new _(32, 128, 258, 1024, b), new _(32, 258, 258, 4096, b)], t.deflateInit = function (e, t) {
    return A(e, t, 8, 15, 8, 0)
  }, t.deflateInit2 = A, t.deflateReset = E, t.deflateResetKeep = w, t.deflateSetHeader = function (e, t) {
    return e && e.state ? 2 !== e.state.wrap ? -2 : (e.state.gzhead = t, 0) : -2
  }, t.deflate = function (e, t) {
    var n, r, a, l;
    if (!e || !e.state || t > 5 || t < 0) return e ? c(e, -2) : -2;
    if (r = e.state, !e.output || !e.input && 0 !== e.avail_in || 666 === r.status && 4 !== t) return c(e, 0 === e.avail_out ? -5 : -2);
    if (r.strm = e, n = r.last_flush, r.last_flush = t, 42 === r.status)
      if (2 === r.wrap) e.adler = 0, p(r, 31), p(r, 139), p(r, 8), r.gzhead ? (p(r, (r.gzhead.text ? 1 : 0) + (r.gzhead.hcrc ? 2 : 0) + (r.gzhead.extra ? 4 : 0) + (r.gzhead.name ? 8 : 0) + (r.gzhead.comment ? 16 : 0)), p(r, 255 & r.gzhead.time), p(r, r.gzhead.time >> 8 & 255), p(r, r.gzhead.time >> 16 & 255), p(r, r.gzhead.time >> 24 & 255), p(r, 9 === r.level ? 2 : r.strategy >= 2 || r.level < 2 ? 4 : 0), p(r, 255 & r.gzhead.os), r.gzhead.extra && r.gzhead.extra.length && (p(r, 255 & r.gzhead.extra.length), p(r, r.gzhead.extra.length >> 8 & 255)), r.gzhead.hcrc && (e.adler = s(e.adler, r.pending_buf, r.pending, 0)), r.gzindex = 0, r.status = 69) : (p(r, 0), p(r, 0), p(r, 0), p(r, 0), p(r, 0), p(r, 9 === r.level ? 2 : r.strategy >= 2 || r.level < 2 ? 4 : 0), p(r, 3), r.status = 113);
      else {
        var g = 8 + (r.w_bits - 8 << 4) << 8;
        g |= (r.strategy >= 2 || r.level < 2 ? 0 : r.level < 6 ? 1 : 6 === r.level ? 2 : 3) << 6, 0 !== r.strstart && (g |= 32), g += 31 - g % 31, r.status = 113, m(r, g), 0 !== r.strstart && (m(r, e.adler >>> 16), m(r, 65535 & e.adler)), e.adler = 1
      } if (69 === r.status)
      if (r.gzhead.extra) {
        for (a = r.pending; r.gzindex < (65535 & r.gzhead.extra.length) && (r.pending !== r.pending_buf_size || (r.gzhead.hcrc && r.pending > a && (e.adler = s(e.adler, r.pending_buf, r.pending - a, a)), d(e), a = r.pending, r.pending !== r.pending_buf_size));) p(r, 255 & r.gzhead.extra[r.gzindex]), r.gzindex++;
        r.gzhead.hcrc && r.pending > a && (e.adler = s(e.adler, r.pending_buf, r.pending - a, a)), r.gzindex === r.gzhead.extra.length && (r.gzindex = 0, r.status = 73)
      } else r.status = 73;
    if (73 === r.status)
      if (r.gzhead.name) {
        a = r.pending;
        do {
          if (r.pending === r.pending_buf_size && (r.gzhead.hcrc && r.pending > a && (e.adler = s(e.adler, r.pending_buf, r.pending - a, a)), d(e), a = r.pending, r.pending === r.pending_buf_size)) {
            l = 1;
            break
          }
          l = r.gzindex < r.gzhead.name.length ? 255 & r.gzhead.name.charCodeAt(r.gzindex++) : 0, p(r, l)
        } while (0 !== l);
        r.gzhead.hcrc && r.pending > a && (e.adler = s(e.adler, r.pending_buf, r.pending - a, a)), 0 === l && (r.gzindex = 0, r.status = 91)
      } else r.status = 91;
    if (91 === r.status)
      if (r.gzhead.comment) {
        a = r.pending;
        do {
          if (r.pending === r.pending_buf_size && (r.gzhead.hcrc && r.pending > a && (e.adler = s(e.adler, r.pending_buf, r.pending - a, a)), d(e), a = r.pending, r.pending === r.pending_buf_size)) {
            l = 1;
            break
          }
          l = r.gzindex < r.gzhead.comment.length ? 255 & r.gzhead.comment.charCodeAt(r.gzindex++) : 0, p(r, l)
        } while (0 !== l);
        r.gzhead.hcrc && r.pending > a && (e.adler = s(e.adler, r.pending_buf, r.pending - a, a)), 0 === l && (r.status = 103)
      } else r.status = 103;
    if (103 === r.status && (r.gzhead.hcrc ? (r.pending + 2 > r.pending_buf_size && d(e), r.pending + 2 <= r.pending_buf_size && (p(r, 255 & e.adler), p(r, e.adler >> 8 & 255), e.adler = 0, r.status = 113)) : r.status = 113), 0 !== r.pending) {
      if (d(e), 0 === e.avail_out) return r.last_flush = -1, 0
    } else if (0 === e.avail_in && u(t) <= u(n) && 4 !== t) return c(e, -5);
    if (666 === r.status && 0 !== e.avail_in) return c(e, -5);
    if (0 !== e.avail_in || 0 !== r.lookahead || 0 !== t && 666 !== r.status) {
      var y = 2 === r.strategy ? function (e, t) {
        for (var n;;) {
          if (0 === e.lookahead && (v(e), 0 === e.lookahead)) {
            if (0 === t) return 1;
            break
          }
          if (e.match_length = 0, n = o._tr_tally(e, 0, e.window[e.strstart]), e.lookahead--, e.strstart++, n && (f(e, !1), 0 === e.strm.avail_out)) return 1
        }
        return e.insert = 0, 4 === t ? (f(e, !0), 0 === e.strm.avail_out ? 3 : 4) : e.last_lit && (f(e, !1), 0 === e.strm.avail_out) ? 1 : 2
      }(r, t) : 3 === r.strategy ? function (e, t) {
        for (var n, i, r, a, s = e.window;;) {
          if (e.lookahead <= 258) {
            if (v(e), e.lookahead <= 258 && 0 === t) return 1;
            if (0 === e.lookahead) break
          }
          if (e.match_length = 0, e.lookahead >= 3 && e.strstart > 0 && (i = s[r = e.strstart - 1]) === s[++r] && i === s[++r] && i === s[++r]) {
            a = e.strstart + 258;
            do {} while (i === s[++r] && i === s[++r] && i === s[++r] && i === s[++r] && i === s[++r] && i === s[++r] && i === s[++r] && i === s[++r] && r < a);
            e.match_length = 258 - (a - r), e.match_length > e.lookahead && (e.match_length = e.lookahead)
          }
          if (e.match_length >= 3 ? (n = o._tr_tally(e, 1, e.match_length - 3), e.lookahead -= e.match_length, e.strstart += e.match_length, e.match_length = 0) : (n = o._tr_tally(e, 0, e.window[e.strstart]), e.lookahead--, e.strstart++), n && (f(e, !1), 0 === e.strm.avail_out)) return 1
        }
        return e.insert = 0, 4 === t ? (f(e, !0), 0 === e.strm.avail_out ? 3 : 4) : e.last_lit && (f(e, !1), 0 === e.strm.avail_out) ? 1 : 2
      }(r, t) : i[r.level].func(r, t);
      if (3 !== y && 4 !== y || (r.status = 666), 1 === y || 3 === y) return 0 === e.avail_out && (r.last_flush = -1), 0;
      if (2 === y && (1 === t ? o._tr_align(r) : 5 !== t && (o._tr_stored_block(r, 0, 0, !1), 3 === t && (h(r.head), 0 === r.lookahead && (r.strstart = 0, r.block_start = 0, r.insert = 0))), d(e), 0 === e.avail_out)) return r.last_flush = -1, 0
    }
    return 4 !== t ? 0 : r.wrap <= 0 ? 1 : (2 === r.wrap ? (p(r, 255 & e.adler), p(r, e.adler >> 8 & 255), p(r, e.adler >> 16 & 255), p(r, e.adler >> 24 & 255), p(r, 255 & e.total_in), p(r, e.total_in >> 8 & 255), p(r, e.total_in >> 16 & 255), p(r, e.total_in >> 24 & 255)) : (m(r, e.adler >>> 16), m(r, 65535 & e.adler)), d(e), r.wrap > 0 && (r.wrap = -r.wrap), 0 !== r.pending ? 0 : 1)
  }, t.deflateEnd = function (e) {
    var t;
    return e && e.state ? 42 !== (t = e.state.status) && 69 !== t && 73 !== t && 91 !== t && 103 !== t && 113 !== t && 666 !== t ? c(e, -2) : (e.state = null, 113 === t ? c(e, -3) : 0) : -2
  }, t.deflateSetDictionary = function (e, t) {
    var n, i, o, s, l, c, u, d, f = t.length;
    if (!e || !e.state) return -2;
    if (2 === (s = (n = e.state).wrap) || 1 === s && 42 !== n.status || n.lookahead) return -2;
    for (1 === s && (e.adler = a(e.adler, t, f, 0)), n.wrap = 0, f >= n.w_size && (0 === s && (h(n.head), n.strstart = 0, n.block_start = 0, n.insert = 0), d = new r.Buf8(n.w_size), r.arraySet(d, t, f - n.w_size, n.w_size, 0), t = d, f = n.w_size), l = e.avail_in, c = e.next_in, u = e.input, e.avail_in = f, e.next_in = 0, e.input = t, v(n); n.lookahead >= 3;) {
      i = n.strstart, o = n.lookahead - 2;
      do {
        n.ins_h = (n.ins_h << n.hash_shift ^ n.window[i + 3 - 1]) & n.hash_mask, n.prev[i & n.w_mask] = n.head[n.ins_h], n.head[n.ins_h] = i, i++
      } while (--o);
      n.strstart = i, n.lookahead = 2, v(n)
    }
    return n.strstart += n.lookahead, n.block_start = n.strstart, n.insert = n.lookahead, n.lookahead = 0, n.match_length = n.prev_length = 2, n.match_available = 0, e.next_in = c, e.input = u, e.avail_in = l, n.wrap = s, 0
  }, t.deflateInfo = "pako deflate (from Nodeca project)"
}, function (e, t, n) {
  "use strict";
  var i = n(114);

  function r(e) {
    for (var t = e.length; --t >= 0;) e[t] = 0
  }
  var o = [0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 2, 2, 2, 2, 3, 3, 3, 3, 4, 4, 4, 4, 5, 5, 5, 5, 0],
    a = [0, 0, 0, 0, 1, 1, 2, 2, 3, 3, 4, 4, 5, 5, 6, 6, 7, 7, 8, 8, 9, 9, 10, 10, 11, 11, 12, 12, 13, 13],
    s = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 3, 7],
    l = [16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15],
    c = new Array(576);
  r(c);
  var u = new Array(60);
  r(u);
  var h = new Array(512);
  r(h);
  var d = new Array(256);
  r(d);
  var f = new Array(29);
  r(f);
  var p, m, g, v = new Array(30);

  function y(e, t, n, i, r) {
    this.static_tree = e, this.extra_bits = t, this.extra_base = n, this.elems = i, this.max_length = r, this.has_stree = e && e.length
  }

  function b(e, t) {
    this.dyn_tree = e, this.max_code = 0, this.stat_desc = t
  }

  function _(e) {
    return e < 256 ? h[e] : h[256 + (e >>> 7)]
  }

  function x(e, t) {
    e.pending_buf[e.pending++] = 255 & t, e.pending_buf[e.pending++] = t >>> 8 & 255
  }

  function w(e, t, n) {
    e.bi_valid > 16 - n ? (e.bi_buf |= t << e.bi_valid & 65535, x(e, e.bi_buf), e.bi_buf = t >> 16 - e.bi_valid, e.bi_valid += n - 16) : (e.bi_buf |= t << e.bi_valid & 65535, e.bi_valid += n)
  }

  function E(e, t, n) {
    w(e, n[2 * t], n[2 * t + 1])
  }

  function A(e, t) {
    var n = 0;
    do {
      n |= 1 & e, e >>>= 1, n <<= 1
    } while (--t > 0);
    return n >>> 1
  }

  function S(e, t, n) {
    var i, r, o = new Array(16),
      a = 0;
    for (i = 1; i <= 15; i++) o[i] = a = a + n[i - 1] << 1;
    for (r = 0; r <= t; r++) {
      var s = e[2 * r + 1];
      0 !== s && (e[2 * r] = A(o[s]++, s))
    }
  }

  function M(e) {
    var t;
    for (t = 0; t < 286; t++) e.dyn_ltree[2 * t] = 0;
    for (t = 0; t < 30; t++) e.dyn_dtree[2 * t] = 0;
    for (t = 0; t < 19; t++) e.bl_tree[2 * t] = 0;
    e.dyn_ltree[512] = 1, e.opt_len = e.static_len = 0, e.last_lit = e.matches = 0
  }

  function T(e) {
    e.bi_valid > 8 ? x(e, e.bi_buf) : e.bi_valid > 0 && (e.pending_buf[e.pending++] = e.bi_buf), e.bi_buf = 0, e.bi_valid = 0
  }

  function C(e, t, n, i) {
    var r = 2 * t,
      o = 2 * n;
    return e[r] < e[o] || e[r] === e[o] && i[t] <= i[n]
  }

  function P(e, t, n) {
    for (var i = e.heap[n], r = n << 1; r <= e.heap_len && (r < e.heap_len && C(t, e.heap[r + 1], e.heap[r], e.depth) && r++, !C(t, i, e.heap[r], e.depth));) e.heap[n] = e.heap[r], n = r, r <<= 1;
    e.heap[n] = i
  }

  function L(e, t, n) {
    var i, r, s, l, c = 0;
    if (0 !== e.last_lit)
      do {
        i = e.pending_buf[e.d_buf + 2 * c] << 8 | e.pending_buf[e.d_buf + 2 * c + 1], r = e.pending_buf[e.l_buf + c], c++, 0 === i ? E(e, r, t) : (E(e, (s = d[r]) + 256 + 1, t), 0 !== (l = o[s]) && w(e, r -= f[s], l), E(e, s = _(--i), n), 0 !== (l = a[s]) && w(e, i -= v[s], l))
      } while (c < e.last_lit);
    E(e, 256, t)
  }

  function D(e, t) {
    var n, i, r, o = t.dyn_tree,
      a = t.stat_desc.static_tree,
      s = t.stat_desc.has_stree,
      l = t.stat_desc.elems,
      c = -1;
    for (e.heap_len = 0, e.heap_max = 573, n = 0; n < l; n++) 0 !== o[2 * n] ? (e.heap[++e.heap_len] = c = n, e.depth[n] = 0) : o[2 * n + 1] = 0;
    for (; e.heap_len < 2;) o[2 * (r = e.heap[++e.heap_len] = c < 2 ? ++c : 0)] = 1, e.depth[r] = 0, e.opt_len--, s && (e.static_len -= a[2 * r + 1]);
    for (t.max_code = c, n = e.heap_len >> 1; n >= 1; n--) P(e, o, n);
    r = l;
    do {
      n = e.heap[1], e.heap[1] = e.heap[e.heap_len--], P(e, o, 1), i = e.heap[1], e.heap[--e.heap_max] = n, e.heap[--e.heap_max] = i, o[2 * r] = o[2 * n] + o[2 * i], e.depth[r] = (e.depth[n] >= e.depth[i] ? e.depth[n] : e.depth[i]) + 1, o[2 * n + 1] = o[2 * i + 1] = r, e.heap[1] = r++, P(e, o, 1)
    } while (e.heap_len >= 2);
    e.heap[--e.heap_max] = e.heap[1],
      function (e, t) {
        var n, i, r, o, a, s, l = t.dyn_tree,
          c = t.max_code,
          u = t.stat_desc.static_tree,
          h = t.stat_desc.has_stree,
          d = t.stat_desc.extra_bits,
          f = t.stat_desc.extra_base,
          p = t.stat_desc.max_length,
          m = 0;
        for (o = 0; o <= 15; o++) e.bl_count[o] = 0;
        for (l[2 * e.heap[e.heap_max] + 1] = 0, n = e.heap_max + 1; n < 573; n++)(o = l[2 * l[2 * (i = e.heap[n]) + 1] + 1] + 1) > p && (o = p, m++), l[2 * i + 1] = o, i > c || (e.bl_count[o]++, a = 0, i >= f && (a = d[i - f]), s = l[2 * i], e.opt_len += s * (o + a), h && (e.static_len += s * (u[2 * i + 1] + a)));
        if (0 !== m) {
          do {
            for (o = p - 1; 0 === e.bl_count[o];) o--;
            e.bl_count[o]--, e.bl_count[o + 1] += 2, e.bl_count[p]--, m -= 2
          } while (m > 0);
          for (o = p; 0 !== o; o--)
            for (i = e.bl_count[o]; 0 !== i;)(r = e.heap[--n]) > c || (l[2 * r + 1] !== o && (e.opt_len += (o - l[2 * r + 1]) * l[2 * r], l[2 * r + 1] = o), i--)
        }
      }(e, t), S(o, c, e.bl_count)
  }

  function I(e, t, n) {
    var i, r, o = -1,
      a = t[1],
      s = 0,
      l = 7,
      c = 4;
    for (0 === a && (l = 138, c = 3), t[2 * (n + 1) + 1] = 65535, i = 0; i <= n; i++) r = a, a = t[2 * (i + 1) + 1], ++s < l && r === a || (s < c ? e.bl_tree[2 * r] += s : 0 !== r ? (r !== o && e.bl_tree[2 * r]++, e.bl_tree[32]++) : s <= 10 ? e.bl_tree[34]++ : e.bl_tree[36]++, s = 0, o = r, 0 === a ? (l = 138, c = 3) : r === a ? (l = 6, c = 3) : (l = 7, c = 4))
  }

  function R(e, t, n) {
    var i, r, o = -1,
      a = t[1],
      s = 0,
      l = 7,
      c = 4;
    for (0 === a && (l = 138, c = 3), i = 0; i <= n; i++)
      if (r = a, a = t[2 * (i + 1) + 1], !(++s < l && r === a)) {
        if (s < c)
          do {
            E(e, r, e.bl_tree)
          } while (0 != --s);
        else 0 !== r ? (r !== o && (E(e, r, e.bl_tree), s--), E(e, 16, e.bl_tree), w(e, s - 3, 2)) : s <= 10 ? (E(e, 17, e.bl_tree), w(e, s - 3, 3)) : (E(e, 18, e.bl_tree), w(e, s - 11, 7));
        s = 0, o = r, 0 === a ? (l = 138, c = 3) : r === a ? (l = 6, c = 3) : (l = 7, c = 4)
      }
  }
  r(v);
  var O = !1;

  function k(e, t, n, r) {
    w(e, 0 + (r ? 1 : 0), 3),
      function (e, t, n, r) {
        T(e), r && (x(e, n), x(e, ~n)), i.arraySet(e.pending_buf, e.window, t, n, e.pending), e.pending += n
      }(e, t, n, !0)
  }
  t._tr_init = function (e) {
    O || (! function () {
      var e, t, n, i, r, l = new Array(16);
      for (n = 0, i = 0; i < 28; i++)
        for (f[i] = n, e = 0; e < 1 << o[i]; e++) d[n++] = i;
      for (d[n - 1] = i, r = 0, i = 0; i < 16; i++)
        for (v[i] = r, e = 0; e < 1 << a[i]; e++) h[r++] = i;
      for (r >>= 7; i < 30; i++)
        for (v[i] = r << 7, e = 0; e < 1 << a[i] - 7; e++) h[256 + r++] = i;
      for (t = 0; t <= 15; t++) l[t] = 0;
      for (e = 0; e <= 143;) c[2 * e + 1] = 8, e++, l[8]++;
      for (; e <= 255;) c[2 * e + 1] = 9, e++, l[9]++;
      for (; e <= 279;) c[2 * e + 1] = 7, e++, l[7]++;
      for (; e <= 287;) c[2 * e + 1] = 8, e++, l[8]++;
      for (S(c, 287, l), e = 0; e < 30; e++) u[2 * e + 1] = 5, u[2 * e] = A(e, 5);
      p = new y(c, o, 257, 286, 15), m = new y(u, a, 0, 30, 15), g = new y(new Array(0), s, 0, 19, 7)
    }(), O = !0), e.l_desc = new b(e.dyn_ltree, p), e.d_desc = new b(e.dyn_dtree, m), e.bl_desc = new b(e.bl_tree, g), e.bi_buf = 0, e.bi_valid = 0, M(e)
  }, t._tr_stored_block = k, t._tr_flush_block = function (e, t, n, i) {
    var r, o, a = 0;
    e.level > 0 ? (2 === e.strm.data_type && (e.strm.data_type = function (e) {
      var t, n = 4093624447;
      for (t = 0; t <= 31; t++, n >>>= 1)
        if (1 & n && 0 !== e.dyn_ltree[2 * t]) return 0;
      if (0 !== e.dyn_ltree[18] || 0 !== e.dyn_ltree[20] || 0 !== e.dyn_ltree[26]) return 1;
      for (t = 32; t < 256; t++)
        if (0 !== e.dyn_ltree[2 * t]) return 1;
      return 0
    }(e)), D(e, e.l_desc), D(e, e.d_desc), a = function (e) {
      var t;
      for (I(e, e.dyn_ltree, e.l_desc.max_code), I(e, e.dyn_dtree, e.d_desc.max_code), D(e, e.bl_desc), t = 18; t >= 3 && 0 === e.bl_tree[2 * l[t] + 1]; t--);
      return e.opt_len += 3 * (t + 1) + 5 + 5 + 4, t
    }(e), r = e.opt_len + 3 + 7 >>> 3, (o = e.static_len + 3 + 7 >>> 3) <= r && (r = o)) : r = o = n + 5, n + 4 <= r && -1 !== t ? k(e, t, n, i) : 4 === e.strategy || o === r ? (w(e, 2 + (i ? 1 : 0), 3), L(e, c, u)) : (w(e, 4 + (i ? 1 : 0), 3), function (e, t, n, i) {
      var r;
      for (w(e, t - 257, 5), w(e, n - 1, 5), w(e, i - 4, 4), r = 0; r < i; r++) w(e, e.bl_tree[2 * l[r] + 1], 3);
      R(e, e.dyn_ltree, t - 1), R(e, e.dyn_dtree, n - 1)
    }(e, e.l_desc.max_code + 1, e.d_desc.max_code + 1, a + 1), L(e, e.dyn_ltree, e.dyn_dtree)), M(e), i && T(e)
  }, t._tr_tally = function (e, t, n) {
    return e.pending_buf[e.d_buf + 2 * e.last_lit] = t >>> 8 & 255, e.pending_buf[e.d_buf + 2 * e.last_lit + 1] = 255 & t, e.pending_buf[e.l_buf + e.last_lit] = 255 & n, e.last_lit++, 0 === t ? e.dyn_ltree[2 * n]++ : (e.matches++, t--, e.dyn_ltree[2 * (d[n] + 256 + 1)]++, e.dyn_dtree[2 * _(t)]++), e.last_lit === e.lit_bufsize - 1
  }, t._tr_align = function (e) {
    w(e, 2, 3), E(e, 256, c),
      function (e) {
        16 === e.bi_valid ? (x(e, e.bi_buf), e.bi_buf = 0, e.bi_valid = 0) : e.bi_valid >= 8 && (e.pending_buf[e.pending++] = 255 & e.bi_buf, e.bi_buf >>= 8, e.bi_valid -= 8)
      }(e)
  }
}, function (e, t, n) {
  "use strict";
  var i = n(703),
    r = n(114),
    o = n(333),
    a = n(335),
    s = n(235),
    l = n(334),
    c = n(706),
    u = Object.prototype.toString;

  function h(e) {
    if (!(this instanceof h)) return new h(e);
    this.options = r.assign({
      chunkSize: 16384,
      windowBits: 0,
      to: ""
    }, e || {});
    var t = this.options;
    t.raw && t.windowBits >= 0 && t.windowBits < 16 && (t.windowBits = -t.windowBits, 0 === t.windowBits && (t.windowBits = -15)), !(t.windowBits >= 0 && t.windowBits < 16) || e && e.windowBits || (t.windowBits += 32), t.windowBits > 15 && t.windowBits < 48 && 0 == (15 & t.windowBits) && (t.windowBits |= 15), this.err = 0, this.msg = "", this.ended = !1, this.chunks = [], this.strm = new l, this.strm.avail_out = 0;
    var n = i.inflateInit2(this.strm, t.windowBits);
    if (n !== a.Z_OK) throw new Error(s[n]);
    if (this.header = new c, i.inflateGetHeader(this.strm, this.header), t.dictionary && ("string" == typeof t.dictionary ? t.dictionary = o.string2buf(t.dictionary) : "[object ArrayBuffer]" === u.call(t.dictionary) && (t.dictionary = new Uint8Array(t.dictionary)), t.raw && (n = i.inflateSetDictionary(this.strm, t.dictionary)) !== a.Z_OK)) throw new Error(s[n])
  }

  function d(e, t) {
    var n = new h(t);
    if (n.push(e, !0), n.err) throw n.msg || s[n.err];
    return n.result
  }
  h.prototype.push = function (e, t) {
    var n, s, l, c, h, d = this.strm,
      f = this.options.chunkSize,
      p = this.options.dictionary,
      m = !1;
    if (this.ended) return !1;
    s = t === ~~t ? t : !0 === t ? a.Z_FINISH : a.Z_NO_FLUSH, "string" == typeof e ? d.input = o.binstring2buf(e) : "[object ArrayBuffer]" === u.call(e) ? d.input = new Uint8Array(e) : d.input = e, d.next_in = 0, d.avail_in = d.input.length;
    do {
      if (0 === d.avail_out && (d.output = new r.Buf8(f), d.next_out = 0, d.avail_out = f), (n = i.inflate(d, a.Z_NO_FLUSH)) === a.Z_NEED_DICT && p && (n = i.inflateSetDictionary(this.strm, p)), n === a.Z_BUF_ERROR && !0 === m && (n = a.Z_OK, m = !1), n !== a.Z_STREAM_END && n !== a.Z_OK) return this.onEnd(n), this.ended = !0, !1;
      d.next_out && (0 !== d.avail_out && n !== a.Z_STREAM_END && (0 !== d.avail_in || s !== a.Z_FINISH && s !== a.Z_SYNC_FLUSH) || ("string" === this.options.to ? (l = o.utf8border(d.output, d.next_out), c = d.next_out - l, h = o.buf2string(d.output, l), d.next_out = c, d.avail_out = f - c, c && r.arraySet(d.output, d.output, l, c, 0), this.onData(h)) : this.onData(r.shrinkBuf(d.output, d.next_out)))), 0 === d.avail_in && 0 === d.avail_out && (m = !0)
    } while ((d.avail_in > 0 || 0 === d.avail_out) && n !== a.Z_STREAM_END);
    return n === a.Z_STREAM_END && (s = a.Z_FINISH), s === a.Z_FINISH ? (n = i.inflateEnd(this.strm), this.onEnd(n), this.ended = !0, n === a.Z_OK) : s !== a.Z_SYNC_FLUSH || (this.onEnd(a.Z_OK), d.avail_out = 0, !0)
  }, h.prototype.onData = function (e) {
    this.chunks.push(e)
  }, h.prototype.onEnd = function (e) {
    e === a.Z_OK && ("string" === this.options.to ? this.result = this.chunks.join("") : this.result = r.flattenChunks(this.chunks)), this.chunks = [], this.err = e, this.msg = this.strm.msg
  }, t.Inflate = h, t.inflate = d, t.inflateRaw = function (e, t) {
    return (t = t || {}).raw = !0, d(e, t)
  }, t.ungzip = d
}, function (e, t, n) {
  "use strict";
  var i = n(114),
    r = n(331),
    o = n(332),
    a = n(704),
    s = n(705);

  function l(e) {
    return (e >>> 24 & 255) + (e >>> 8 & 65280) + ((65280 & e) << 8) + ((255 & e) << 24)
  }

  function c() {
    this.mode = 0, this.last = !1, this.wrap = 0, this.havedict = !1, this.flags = 0, this.dmax = 0, this.check = 0, this.total = 0, this.head = null, this.wbits = 0, this.wsize = 0, this.whave = 0, this.wnext = 0, this.window = null, this.hold = 0, this.bits = 0, this.length = 0, this.offset = 0, this.extra = 0, this.lencode = null, this.distcode = null, this.lenbits = 0, this.distbits = 0, this.ncode = 0, this.nlen = 0, this.ndist = 0, this.have = 0, this.next = null, this.lens = new i.Buf16(320), this.work = new i.Buf16(288), this.lendyn = null, this.distdyn = null, this.sane = 0, this.back = 0, this.was = 0
  }

  function u(e) {
    var t;
    return e && e.state ? (t = e.state, e.total_in = e.total_out = t.total = 0, e.msg = "", t.wrap && (e.adler = 1 & t.wrap), t.mode = 1, t.last = 0, t.havedict = 0, t.dmax = 32768, t.head = null, t.hold = 0, t.bits = 0, t.lencode = t.lendyn = new i.Buf32(852), t.distcode = t.distdyn = new i.Buf32(592), t.sane = 1, t.back = -1, 0) : -2
  }

  function h(e) {
    var t;
    return e && e.state ? ((t = e.state).wsize = 0, t.whave = 0, t.wnext = 0, u(e)) : -2
  }

  function d(e, t) {
    var n, i;
    return e && e.state ? (i = e.state, t < 0 ? (n = 0, t = -t) : (n = 1 + (t >> 4), t < 48 && (t &= 15)), t && (t < 8 || t > 15) ? -2 : (null !== i.window && i.wbits !== t && (i.window = null), i.wrap = n, i.wbits = t, h(e))) : -2
  }

  function f(e, t) {
    var n, i;
    return e ? (i = new c, e.state = i, i.window = null, 0 !== (n = d(e, t)) && (e.state = null), n) : -2
  }
  var p, m, g = !0;

  function v(e) {
    if (g) {
      var t;
      for (p = new i.Buf32(512), m = new i.Buf32(32), t = 0; t < 144;) e.lens[t++] = 8;
      for (; t < 256;) e.lens[t++] = 9;
      for (; t < 280;) e.lens[t++] = 7;
      for (; t < 288;) e.lens[t++] = 8;
      for (s(1, e.lens, 0, 288, p, 0, e.work, {
          bits: 9
        }), t = 0; t < 32;) e.lens[t++] = 5;
      s(2, e.lens, 0, 32, m, 0, e.work, {
        bits: 5
      }), g = !1
    }
    e.lencode = p, e.lenbits = 9, e.distcode = m, e.distbits = 5
  }

  function y(e, t, n, r) {
    var o, a = e.state;
    return null === a.window && (a.wsize = 1 << a.wbits, a.wnext = 0, a.whave = 0, a.window = new i.Buf8(a.wsize)), r >= a.wsize ? (i.arraySet(a.window, t, n - a.wsize, a.wsize, 0), a.wnext = 0, a.whave = a.wsize) : ((o = a.wsize - a.wnext) > r && (o = r), i.arraySet(a.window, t, n - r, o, a.wnext), (r -= o) ? (i.arraySet(a.window, t, n - r, r, 0), a.wnext = r, a.whave = a.wsize) : (a.wnext += o, a.wnext === a.wsize && (a.wnext = 0), a.whave < a.wsize && (a.whave += o))), 0
  }
  t.inflateReset = h, t.inflateReset2 = d, t.inflateResetKeep = u, t.inflateInit = function (e) {
    return f(e, 15)
  }, t.inflateInit2 = f, t.inflate = function (e, t) {
    var n, c, u, h, d, f, p, m, g, b, _, x, w, E, A, S, M, T, C, P, L, D, I, R, O = 0,
      k = new i.Buf8(4),
      N = [16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15];
    if (!e || !e.state || !e.output || !e.input && 0 !== e.avail_in) return -2;
    12 === (n = e.state).mode && (n.mode = 13), d = e.next_out, u = e.output, p = e.avail_out, h = e.next_in, c = e.input, f = e.avail_in, m = n.hold, g = n.bits, b = f, _ = p, D = 0;
    e: for (;;) switch (n.mode) {
      case 1:
        if (0 === n.wrap) {
          n.mode = 13;
          break
        }
        for (; g < 16;) {
          if (0 === f) break e;
          f--, m += c[h++] << g, g += 8
        }
        if (2 & n.wrap && 35615 === m) {
          n.check = 0, k[0] = 255 & m, k[1] = m >>> 8 & 255, n.check = o(n.check, k, 2, 0), m = 0, g = 0, n.mode = 2;
          break
        }
        if (n.flags = 0, n.head && (n.head.done = !1), !(1 & n.wrap) || (((255 & m) << 8) + (m >> 8)) % 31) {
          e.msg = "incorrect header check", n.mode = 30;
          break
        }
        if (8 != (15 & m)) {
          e.msg = "unknown compression method", n.mode = 30;
          break
        }
        if (g -= 4, L = 8 + (15 & (m >>>= 4)), 0 === n.wbits) n.wbits = L;
        else if (L > n.wbits) {
          e.msg = "invalid window size", n.mode = 30;
          break
        }
        n.dmax = 1 << L, e.adler = n.check = 1, n.mode = 512 & m ? 10 : 12, m = 0, g = 0;
        break;
      case 2:
        for (; g < 16;) {
          if (0 === f) break e;
          f--, m += c[h++] << g, g += 8
        }
        if (n.flags = m, 8 != (255 & n.flags)) {
          e.msg = "unknown compression method", n.mode = 30;
          break
        }
        if (57344 & n.flags) {
          e.msg = "unknown header flags set", n.mode = 30;
          break
        }
        n.head && (n.head.text = m >> 8 & 1), 512 & n.flags && (k[0] = 255 & m, k[1] = m >>> 8 & 255, n.check = o(n.check, k, 2, 0)), m = 0, g = 0, n.mode = 3;
      case 3:
        for (; g < 32;) {
          if (0 === f) break e;
          f--, m += c[h++] << g, g += 8
        }
        n.head && (n.head.time = m), 512 & n.flags && (k[0] = 255 & m, k[1] = m >>> 8 & 255, k[2] = m >>> 16 & 255, k[3] = m >>> 24 & 255, n.check = o(n.check, k, 4, 0)), m = 0, g = 0, n.mode = 4;
      case 4:
        for (; g < 16;) {
          if (0 === f) break e;
          f--, m += c[h++] << g, g += 8
        }
        n.head && (n.head.xflags = 255 & m, n.head.os = m >> 8), 512 & n.flags && (k[0] = 255 & m, k[1] = m >>> 8 & 255, n.check = o(n.check, k, 2, 0)), m = 0, g = 0, n.mode = 5;
      case 5:
        if (1024 & n.flags) {
          for (; g < 16;) {
            if (0 === f) break e;
            f--, m += c[h++] << g, g += 8
          }
          n.length = m, n.head && (n.head.extra_len = m), 512 & n.flags && (k[0] = 255 & m, k[1] = m >>> 8 & 255, n.check = o(n.check, k, 2, 0)), m = 0, g = 0
        } else n.head && (n.head.extra = null);
        n.mode = 6;
      case 6:
        if (1024 & n.flags && ((x = n.length) > f && (x = f), x && (n.head && (L = n.head.extra_len - n.length, n.head.extra || (n.head.extra = new Array(n.head.extra_len)), i.arraySet(n.head.extra, c, h, x, L)), 512 & n.flags && (n.check = o(n.check, c, x, h)), f -= x, h += x, n.length -= x), n.length)) break e;
        n.length = 0, n.mode = 7;
      case 7:
        if (2048 & n.flags) {
          if (0 === f) break e;
          x = 0;
          do {
            L = c[h + x++], n.head && L && n.length < 65536 && (n.head.name += String.fromCharCode(L))
          } while (L && x < f);
          if (512 & n.flags && (n.check = o(n.check, c, x, h)), f -= x, h += x, L) break e
        } else n.head && (n.head.name = null);
        n.length = 0, n.mode = 8;
      case 8:
        if (4096 & n.flags) {
          if (0 === f) break e;
          x = 0;
          do {
            L = c[h + x++], n.head && L && n.length < 65536 && (n.head.comment += String.fromCharCode(L))
          } while (L && x < f);
          if (512 & n.flags && (n.check = o(n.check, c, x, h)), f -= x, h += x, L) break e
        } else n.head && (n.head.comment = null);
        n.mode = 9;
      case 9:
        if (512 & n.flags) {
          for (; g < 16;) {
            if (0 === f) break e;
            f--, m += c[h++] << g, g += 8
          }
          if (m !== (65535 & n.check)) {
            e.msg = "header crc mismatch", n.mode = 30;
            break
          }
          m = 0, g = 0
        }
        n.head && (n.head.hcrc = n.flags >> 9 & 1, n.head.done = !0), e.adler = n.check = 0, n.mode = 12;
        break;
      case 10:
        for (; g < 32;) {
          if (0 === f) break e;
          f--, m += c[h++] << g, g += 8
        }
        e.adler = n.check = l(m), m = 0, g = 0, n.mode = 11;
      case 11:
        if (0 === n.havedict) return e.next_out = d, e.avail_out = p, e.next_in = h, e.avail_in = f, n.hold = m, n.bits = g, 2;
        e.adler = n.check = 1, n.mode = 12;
      case 12:
        if (5 === t || 6 === t) break e;
      case 13:
        if (n.last) {
          m >>>= 7 & g, g -= 7 & g, n.mode = 27;
          break
        }
        for (; g < 3;) {
          if (0 === f) break e;
          f--, m += c[h++] << g, g += 8
        }
        switch (n.last = 1 & m, g -= 1, 3 & (m >>>= 1)) {
          case 0:
            n.mode = 14;
            break;
          case 1:
            if (v(n), n.mode = 20, 6 === t) {
              m >>>= 2, g -= 2;
              break e
            }
            break;
          case 2:
            n.mode = 17;
            break;
          case 3:
            e.msg = "invalid block type", n.mode = 30
        }
        m >>>= 2, g -= 2;
        break;
      case 14:
        for (m >>>= 7 & g, g -= 7 & g; g < 32;) {
          if (0 === f) break e;
          f--, m += c[h++] << g, g += 8
        }
        if ((65535 & m) != (m >>> 16 ^ 65535)) {
          e.msg = "invalid stored block lengths", n.mode = 30;
          break
        }
        if (n.length = 65535 & m, m = 0, g = 0, n.mode = 15, 6 === t) break e;
      case 15:
        n.mode = 16;
      case 16:
        if (x = n.length) {
          if (x > f && (x = f), x > p && (x = p), 0 === x) break e;
          i.arraySet(u, c, h, x, d), f -= x, h += x, p -= x, d += x, n.length -= x;
          break
        }
        n.mode = 12;
        break;
      case 17:
        for (; g < 14;) {
          if (0 === f) break e;
          f--, m += c[h++] << g, g += 8
        }
        if (n.nlen = 257 + (31 & m), m >>>= 5, g -= 5, n.ndist = 1 + (31 & m), m >>>= 5, g -= 5, n.ncode = 4 + (15 & m), m >>>= 4, g -= 4, n.nlen > 286 || n.ndist > 30) {
          e.msg = "too many length or distance symbols", n.mode = 30;
          break
        }
        n.have = 0, n.mode = 18;
      case 18:
        for (; n.have < n.ncode;) {
          for (; g < 3;) {
            if (0 === f) break e;
            f--, m += c[h++] << g, g += 8
          }
          n.lens[N[n.have++]] = 7 & m, m >>>= 3, g -= 3
        }
        for (; n.have < 19;) n.lens[N[n.have++]] = 0;
        if (n.lencode = n.lendyn, n.lenbits = 7, I = {
            bits: n.lenbits
          }, D = s(0, n.lens, 0, 19, n.lencode, 0, n.work, I), n.lenbits = I.bits, D) {
          e.msg = "invalid code lengths set", n.mode = 30;
          break
        }
        n.have = 0, n.mode = 19;
      case 19:
        for (; n.have < n.nlen + n.ndist;) {
          for (; S = (O = n.lencode[m & (1 << n.lenbits) - 1]) >>> 16 & 255, M = 65535 & O, !((A = O >>> 24) <= g);) {
            if (0 === f) break e;
            f--, m += c[h++] << g, g += 8
          }
          if (M < 16) m >>>= A, g -= A, n.lens[n.have++] = M;
          else {
            if (16 === M) {
              for (R = A + 2; g < R;) {
                if (0 === f) break e;
                f--, m += c[h++] << g, g += 8
              }
              if (m >>>= A, g -= A, 0 === n.have) {
                e.msg = "invalid bit length repeat", n.mode = 30;
                break
              }
              L = n.lens[n.have - 1], x = 3 + (3 & m), m >>>= 2, g -= 2
            } else if (17 === M) {
              for (R = A + 3; g < R;) {
                if (0 === f) break e;
                f--, m += c[h++] << g, g += 8
              }
              g -= A, L = 0, x = 3 + (7 & (m >>>= A)), m >>>= 3, g -= 3
            } else {
              for (R = A + 7; g < R;) {
                if (0 === f) break e;
                f--, m += c[h++] << g, g += 8
              }
              g -= A, L = 0, x = 11 + (127 & (m >>>= A)), m >>>= 7, g -= 7
            }
            if (n.have + x > n.nlen + n.ndist) {
              e.msg = "invalid bit length repeat", n.mode = 30;
              break
            }
            for (; x--;) n.lens[n.have++] = L
          }
        }
        if (30 === n.mode) break;
        if (0 === n.lens[256]) {
          e.msg = "invalid code -- missing end-of-block", n.mode = 30;
          break
        }
        if (n.lenbits = 9, I = {
            bits: n.lenbits
          }, D = s(1, n.lens, 0, n.nlen, n.lencode, 0, n.work, I), n.lenbits = I.bits, D) {
          e.msg = "invalid literal/lengths set", n.mode = 30;
          break
        }
        if (n.distbits = 6, n.distcode = n.distdyn, I = {
            bits: n.distbits
          }, D = s(2, n.lens, n.nlen, n.ndist, n.distcode, 0, n.work, I), n.distbits = I.bits, D) {
          e.msg = "invalid distances set", n.mode = 30;
          break
        }
        if (n.mode = 20, 6 === t) break e;
      case 20:
        n.mode = 21;
      case 21:
        if (f >= 6 && p >= 258) {
          e.next_out = d, e.avail_out = p, e.next_in = h, e.avail_in = f, n.hold = m, n.bits = g, a(e, _), d = e.next_out, u = e.output, p = e.avail_out, h = e.next_in, c = e.input, f = e.avail_in, m = n.hold, g = n.bits, 12 === n.mode && (n.back = -1);
          break
        }
        for (n.back = 0; S = (O = n.lencode[m & (1 << n.lenbits) - 1]) >>> 16 & 255, M = 65535 & O, !((A = O >>> 24) <= g);) {
          if (0 === f) break e;
          f--, m += c[h++] << g, g += 8
        }
        if (S && 0 == (240 & S)) {
          for (T = A, C = S, P = M; S = (O = n.lencode[P + ((m & (1 << T + C) - 1) >> T)]) >>> 16 & 255, M = 65535 & O, !(T + (A = O >>> 24) <= g);) {
            if (0 === f) break e;
            f--, m += c[h++] << g, g += 8
          }
          m >>>= T, g -= T, n.back += T
        }
        if (m >>>= A, g -= A, n.back += A, n.length = M, 0 === S) {
          n.mode = 26;
          break
        }
        if (32 & S) {
          n.back = -1, n.mode = 12;
          break
        }
        if (64 & S) {
          e.msg = "invalid literal/length code", n.mode = 30;
          break
        }
        n.extra = 15 & S, n.mode = 22;
      case 22:
        if (n.extra) {
          for (R = n.extra; g < R;) {
            if (0 === f) break e;
            f--, m += c[h++] << g, g += 8
          }
          n.length += m & (1 << n.extra) - 1, m >>>= n.extra, g -= n.extra, n.back += n.extra
        }
        n.was = n.length, n.mode = 23;
      case 23:
        for (; S = (O = n.distcode[m & (1 << n.distbits) - 1]) >>> 16 & 255, M = 65535 & O, !((A = O >>> 24) <= g);) {
          if (0 === f) break e;
          f--, m += c[h++] << g, g += 8
        }
        if (0 == (240 & S)) {
          for (T = A, C = S, P = M; S = (O = n.distcode[P + ((m & (1 << T + C) - 1) >> T)]) >>> 16 & 255, M = 65535 & O, !(T + (A = O >>> 24) <= g);) {
            if (0 === f) break e;
            f--, m += c[h++] << g, g += 8
          }
          m >>>= T, g -= T, n.back += T
        }
        if (m >>>= A, g -= A, n.back += A, 64 & S) {
          e.msg = "invalid distance code", n.mode = 30;
          break
        }
        n.offset = M, n.extra = 15 & S, n.mode = 24;
      case 24:
        if (n.extra) {
          for (R = n.extra; g < R;) {
            if (0 === f) break e;
            f--, m += c[h++] << g, g += 8
          }
          n.offset += m & (1 << n.extra) - 1, m >>>= n.extra, g -= n.extra, n.back += n.extra
        }
        if (n.offset > n.dmax) {
          e.msg = "invalid distance too far back", n.mode = 30;
          break
        }
        n.mode = 25;
      case 25:
        if (0 === p) break e;
        if (x = _ - p, n.offset > x) {
          if ((x = n.offset - x) > n.whave && n.sane) {
            e.msg = "invalid distance too far back", n.mode = 30;
            break
          }
          x > n.wnext ? (x -= n.wnext, w = n.wsize - x) : w = n.wnext - x, x > n.length && (x = n.length), E = n.window
        } else E = u, w = d - n.offset, x = n.length;
        x > p && (x = p), p -= x, n.length -= x;
        do {
          u[d++] = E[w++]
        } while (--x);
        0 === n.length && (n.mode = 21);
        break;
      case 26:
        if (0 === p) break e;
        u[d++] = n.length, p--, n.mode = 21;
        break;
      case 27:
        if (n.wrap) {
          for (; g < 32;) {
            if (0 === f) break e;
            f--, m |= c[h++] << g, g += 8
          }
          if (_ -= p, e.total_out += _, n.total += _, _ && (e.adler = n.check = n.flags ? o(n.check, u, _, d - _) : r(n.check, u, _, d - _)), _ = p, (n.flags ? m : l(m)) !== n.check) {
            e.msg = "incorrect data check", n.mode = 30;
            break
          }
          m = 0, g = 0
        }
        n.mode = 28;
      case 28:
        if (n.wrap && n.flags) {
          for (; g < 32;) {
            if (0 === f) break e;
            f--, m += c[h++] << g, g += 8
          }
          if (m !== (4294967295 & n.total)) {
            e.msg = "incorrect length check", n.mode = 30;
            break
          }
          m = 0, g = 0
        }
        n.mode = 29;
      case 29:
        D = 1;
        break e;
      case 30:
        D = -3;
        break e;
      case 31:
        return -4;
      case 32:
      default:
        return -2
    }
    return e.next_out = d, e.avail_out = p, e.next_in = h, e.avail_in = f, n.hold = m, n.bits = g, (n.wsize || _ !== e.avail_out && n.mode < 30 && (n.mode < 27 || 4 !== t)) && y(e, e.output, e.next_out, _ - e.avail_out) ? (n.mode = 31, -4) : (b -= e.avail_in, _ -= e.avail_out, e.total_in += b, e.total_out += _, n.total += _, n.wrap && _ && (e.adler = n.check = n.flags ? o(n.check, u, _, e.next_out - _) : r(n.check, u, _, e.next_out - _)), e.data_type = n.bits + (n.last ? 64 : 0) + (12 === n.mode ? 128 : 0) + (20 === n.mode || 15 === n.mode ? 256 : 0), (0 === b && 0 === _ || 4 === t) && 0 === D && (D = -5), D)
  }, t.inflateEnd = function (e) {
    if (!e || !e.state) return -2;
    var t = e.state;
    return t.window && (t.window = null), e.state = null, 0
  }, t.inflateGetHeader = function (e, t) {
    var n;
    return e && e.state ? 0 == (2 & (n = e.state).wrap) ? -2 : (n.head = t, t.done = !1, 0) : -2
  }, t.inflateSetDictionary = function (e, t) {
    var n, i = t.length;
    return e && e.state ? 0 !== (n = e.state).wrap && 11 !== n.mode ? -2 : 11 === n.mode && r(1, t, i, 0) !== n.check ? -3 : y(e, t, i, i) ? (n.mode = 31, -4) : (n.havedict = 1, 0) : -2
  }, t.inflateInfo = "pako inflate (from Nodeca project)"
}, function (e, t, n) {
  "use strict";
  e.exports = function (e, t) {
    var n, i, r, o, a, s, l, c, u, h, d, f, p, m, g, v, y, b, _, x, w, E, A, S, M;
    n = e.state, i = e.next_in, S = e.input, r = i + (e.avail_in - 5), o = e.next_out, M = e.output, a = o - (t - e.avail_out), s = o + (e.avail_out - 257), l = n.dmax, c = n.wsize, u = n.whave, h = n.wnext, d = n.window, f = n.hold, p = n.bits, m = n.lencode, g = n.distcode, v = (1 << n.lenbits) - 1, y = (1 << n.distbits) - 1;
    e: do {
      p < 15 && (f += S[i++] << p, p += 8, f += S[i++] << p, p += 8), b = m[f & v];
      t: for (;;) {
        if (f >>>= _ = b >>> 24, p -= _, 0 === (_ = b >>> 16 & 255)) M[o++] = 65535 & b;
        else {
          if (!(16 & _)) {
            if (0 == (64 & _)) {
              b = m[(65535 & b) + (f & (1 << _) - 1)];
              continue t
            }
            if (32 & _) {
              n.mode = 12;
              break e
            }
            e.msg = "invalid literal/length code", n.mode = 30;
            break e
          }
          x = 65535 & b, (_ &= 15) && (p < _ && (f += S[i++] << p, p += 8), x += f & (1 << _) - 1, f >>>= _, p -= _), p < 15 && (f += S[i++] << p, p += 8, f += S[i++] << p, p += 8), b = g[f & y];
          n: for (;;) {
            if (f >>>= _ = b >>> 24, p -= _, !(16 & (_ = b >>> 16 & 255))) {
              if (0 == (64 & _)) {
                b = g[(65535 & b) + (f & (1 << _) - 1)];
                continue n
              }
              e.msg = "invalid distance code", n.mode = 30;
              break e
            }
            if (w = 65535 & b, p < (_ &= 15) && (f += S[i++] << p, (p += 8) < _ && (f += S[i++] << p, p += 8)), (w += f & (1 << _) - 1) > l) {
              e.msg = "invalid distance too far back", n.mode = 30;
              break e
            }
            if (f >>>= _, p -= _, w > (_ = o - a)) {
              if ((_ = w - _) > u && n.sane) {
                e.msg = "invalid distance too far back", n.mode = 30;
                break e
              }
              if (E = 0, A = d, 0 === h) {
                if (E += c - _, _ < x) {
                  x -= _;
                  do {
                    M[o++] = d[E++]
                  } while (--_);
                  E = o - w, A = M
                }
              } else if (h < _) {
                if (E += c + h - _, (_ -= h) < x) {
                  x -= _;
                  do {
                    M[o++] = d[E++]
                  } while (--_);
                  if (E = 0, h < x) {
                    x -= _ = h;
                    do {
                      M[o++] = d[E++]
                    } while (--_);
                    E = o - w, A = M
                  }
                }
              } else if (E += h - _, _ < x) {
                x -= _;
                do {
                  M[o++] = d[E++]
                } while (--_);
                E = o - w, A = M
              }
              for (; x > 2;) M[o++] = A[E++], M[o++] = A[E++], M[o++] = A[E++], x -= 3;
              x && (M[o++] = A[E++], x > 1 && (M[o++] = A[E++]))
            } else {
              E = o - w;
              do {
                M[o++] = M[E++], M[o++] = M[E++], M[o++] = M[E++], x -= 3
              } while (x > 2);
              x && (M[o++] = M[E++], x > 1 && (M[o++] = M[E++]))
            }
            break
          }
        }
        break
      }
    } while (i < r && o < s);
    i -= x = p >> 3, f &= (1 << (p -= x << 3)) - 1, e.next_in = i, e.next_out = o, e.avail_in = i < r ? r - i + 5 : 5 - (i - r), e.avail_out = o < s ? s - o + 257 : 257 - (o - s), n.hold = f, n.bits = p
  }
}, function (e, t, n) {
  "use strict";
  var i = n(114),
    r = [3, 4, 5, 6, 7, 8, 9, 10, 11, 13, 15, 17, 19, 23, 27, 31, 35, 43, 51, 59, 67, 83, 99, 115, 131, 163, 195, 227, 258, 0, 0],
    o = [16, 16, 16, 16, 16, 16, 16, 16, 17, 17, 17, 17, 18, 18, 18, 18, 19, 19, 19, 19, 20, 20, 20, 20, 21, 21, 21, 21, 16, 72, 78],
    a = [1, 2, 3, 4, 5, 7, 9, 13, 17, 25, 33, 49, 65, 97, 129, 193, 257, 385, 513, 769, 1025, 1537, 2049, 3073, 4097, 6145, 8193, 12289, 16385, 24577, 0, 0],
    s = [16, 16, 16, 16, 17, 17, 18, 18, 19, 19, 20, 20, 21, 21, 22, 22, 23, 23, 24, 24, 25, 25, 26, 26, 27, 27, 28, 28, 29, 29, 64, 64];
  e.exports = function (e, t, n, l, c, u, h, d) {
    var f, p, m, g, v, y, b, _, x, w = d.bits,
      E = 0,
      A = 0,
      S = 0,
      M = 0,
      T = 0,
      C = 0,
      P = 0,
      L = 0,
      D = 0,
      I = 0,
      R = null,
      O = 0,
      k = new i.Buf16(16),
      N = new i.Buf16(16),
      F = null,
      U = 0;
    for (E = 0; E <= 15; E++) k[E] = 0;
    for (A = 0; A < l; A++) k[t[n + A]]++;
    for (T = w, M = 15; M >= 1 && 0 === k[M]; M--);
    if (T > M && (T = M), 0 === M) return c[u++] = 20971520, c[u++] = 20971520, d.bits = 1, 0;
    for (S = 1; S < M && 0 === k[S]; S++);
    for (T < S && (T = S), L = 1, E = 1; E <= 15; E++)
      if (L <<= 1, (L -= k[E]) < 0) return -1;
    if (L > 0 && (0 === e || 1 !== M)) return -1;
    for (N[1] = 0, E = 1; E < 15; E++) N[E + 1] = N[E] + k[E];
    for (A = 0; A < l; A++) 0 !== t[n + A] && (h[N[t[n + A]]++] = A);
    if (0 === e ? (R = F = h, y = 19) : 1 === e ? (R = r, O -= 257, F = o, U -= 257, y = 256) : (R = a, F = s, y = -1), I = 0, A = 0, E = S, v = u, C = T, P = 0, m = -1, g = (D = 1 << T) - 1, 1 === e && D > 852 || 2 === e && D > 592) return 1;
    for (;;) {
      b = E - P, h[A] < y ? (_ = 0, x = h[A]) : h[A] > y ? (_ = F[U + h[A]], x = R[O + h[A]]) : (_ = 96, x = 0), f = 1 << E - P, S = p = 1 << C;
      do {
        c[v + (I >> P) + (p -= f)] = b << 24 | _ << 16 | x | 0
      } while (0 !== p);
      for (f = 1 << E - 1; I & f;) f >>= 1;
      if (0 !== f ? (I &= f - 1, I += f) : I = 0, A++, 0 == --k[E]) {
        if (E === M) break;
        E = t[n + h[A]]
      }
      if (E > T && (I & g) !== m) {
        for (0 === P && (P = T), v += S, L = 1 << (C = E - P); C + P < M && !((L -= k[C + P]) <= 0);) C++, L <<= 1;
        if (D += 1 << C, 1 === e && D > 852 || 2 === e && D > 592) return 1;
        c[m = I & g] = T << 24 | C << 16 | v - u | 0
      }
    }
    return 0 !== I && (c[v + I] = E - P << 24 | 64 << 16 | 0), d.bits = T, 0
  }
}, function (e, t, n) {
  "use strict";
  e.exports = function () {
    this.text = 0, this.time = 0, this.xflags = 0, this.os = 0, this.extra = null, this.extra_len = 0, this.name = "", this.comment = "", this.hcrc = 0, this.done = !1
  }
}, function (e, t, n) {
  (function (e, t) {
    ! function (e, n) {
      "use strict";
      if (!e.setImmediate) {
        var i, r, o, a, s, l = 1,
          c = {},
          u = !1,
          h = e.document,
          d = Object.getPrototypeOf && Object.getPrototypeOf(e);
        d = d && d.setTimeout ? d : e, "[object process]" === {}.toString.call(e.process) ? i = function (e) {
          t.nextTick((function () {
            p(e)
          }))
        } : ! function () {
          if (e.postMessage && !e.importScripts) {
            var t = !0,
              n = e.onmessage;
            return e.onmessage = function () {
              t = !1
            }, e.postMessage("", "*"), e.onmessage = n, t
          }
        }() ? e.MessageChannel ? ((o = new MessageChannel).port1.onmessage = function (e) {
          p(e.data)
        }, i = function (e) {
          o.port2.postMessage(e)
        }) : h && "onreadystatechange" in h.createElement("script") ? (r = h.documentElement, i = function (e) {
          var t = h.createElement("script");
          t.onreadystatechange = function () {
            p(e), t.onreadystatechange = null, r.removeChild(t), t = null
          }, r.appendChild(t)
        }) : i = function (e) {
          setTimeout(p, 0, e)
        } : (a = "setImmediate$" + Math.random() + "$", s = function (t) {
          t.source === e && "string" == typeof t.data && 0 === t.data.indexOf(a) && p(+t.data.slice(a.length))
        }, e.addEventListener ? e.addEventListener("message", s, !1) : e.attachEvent("onmessage", s), i = function (t) {
          e.postMessage(a + t, "*")
        }), d.setImmediate = function (e) {
          "function" != typeof e && (e = new Function("" + e));
          for (var t = new Array(arguments.length - 1), n = 0; n < t.length; n++) t[n] = arguments[n + 1];
          var r = {
            callback: e,
            args: t
          };
          return c[l] = r, i(l), l++
        }, d.clearImmediate = f
      }

      function f(e) {
        delete c[e]
      }

      function p(e) {
        if (u) setTimeout(p, 0, e);
        else {
          var t = c[e];
          if (t) {
            u = !0;
            try {
              ! function (e) {
                var t = e.callback,
                  n = e.args;
                switch (n.length) {
                  case 0:
                    t();
                    break;
                  case 1:
                    t(n[0]);
                    break;
                  case 2:
                    t(n[0], n[1]);
                    break;
                  case 3:
                    t(n[0], n[1], n[2]);
                    break;
                  default:
                    t.apply(void 0, n)
                }
              }(t)
            } finally {
              f(e), u = !1
            }
          }
        }
      }
    }("undefined" == typeof self ? void 0 === e ? this : e : self)
  }).call(this, n(151), n(708))
}, function (e, t) {
  var n, i, r = e.exports = {};

  function o() {
    throw new Error("setTimeout has not been defined")
  }

  function a() {
    throw new Error("clearTimeout has not been defined")
  }

  function s(e) {
    if (n === setTimeout) return setTimeout(e, 0);
    if ((n === o || !n) && setTimeout) return n = setTimeout, setTimeout(e, 0);
    try {
      return n(e, 0)
    } catch (t) {
      try {
        return n.call(null, e, 0)
      } catch (t) {
        return n.call(this, e, 0)
      }
    }
  }! function () {
    try {
      n = "function" == typeof setTimeout ? setTimeout : o
    } catch (e) {
      n = o
    }
    try {
      i = "function" == typeof clearTimeout ? clearTimeout : a
    } catch (e) {
      i = a
    }
  }();
  var l, c = [],
    u = !1,
    h = -1;

  function d() {
    u && l && (u = !1, l.length ? c = l.concat(c) : h = -1, c.length && f())
  }

  function f() {
    if (!u) {
      var e = s(d);
      u = !0;
      for (var t = c.length; t;) {
        for (l = c, c = []; ++h < t;) l && l[h].run();
        h = -1, t = c.length
      }
      l = null, u = !1,
        function (e) {
          if (i === clearTimeout) return clearTimeout(e);
          if ((i === a || !i) && clearTimeout) return i = clearTimeout, clearTimeout(e);
          try {
            i(e)
          } catch (t) {
            try {
              return i.call(null, e)
            } catch (t) {
              return i.call(this, e)
            }
          }
        }(e)
    }
  }

  function p(e, t) {
    this.fun = e, this.array = t
  }

  function m() {}
  r.nextTick = function (e) {
    var t = new Array(arguments.length - 1);
    if (arguments.length > 1)
      for (var n = 1; n < arguments.length; n++) t[n - 1] = arguments[n];
    c.push(new p(e, t)), 1 !== c.length || u || s(f)
  }, p.prototype.run = function () {
    this.fun.apply(null, this.array)
  }, r.title = "browser", r.browser = !0, r.env = {}, r.argv = [], r.version = "", r.versions = {}, r.on = m, r.addListener = m, r.once = m, r.off = m, r.removeListener = m, r.removeAllListeners = m, r.emit = m, r.prependListener = m, r.prependOnceListener = m, r.listeners = function (e) {
    return []
  }, r.binding = function (e) {
    throw new Error("process.binding is not supported")
  }, r.cwd = function () {
    return "/"
  }, r.chdir = function (e) {
    throw new Error("process.chdir is not supported")
  }, r.umask = function () {
    return 0
  }
}, function (e, t, n) {
  "use strict";
  n.r(t), n.d(t, "PhongShader", (function () {
    return c
  }));
  var i = n(0),
    r = n(30),
    o = n(379),
    a = n.n(o),
    s = n(380),
    l = n.n(s),
    c = {
      uniforms: i.UniformsUtils.merge([i.UniformsLib.common, i.UniformsLib.bump, i.UniformsLib.normalmap, i.UniformsLib.lights, i.UniformsLib.fog, r.ShaderChunks.CutPlanesUniforms, r.ShaderChunks.IdUniforms, r.ShaderChunks.ThemingUniform, r.ShaderChunks.ShadowMapUniforms, r.ShaderChunks.WideLinesUniforms, {
        emissive: {
          type: "c",
          value: new i.Color(0)
        },
        specular: {
          type: "c",
          value: new i.Color(1118481)
        },
        shininess: {
          type: "f",
          value: 30
        },
        reflMipIndex: {
          type: "f",
          value: 0
        },
        texMatrix: {
          type: "m3",
          value: new i.Matrix3
        },
        texMatrixBump: {
          type: "m3",
          value: new i.Matrix3
        },
        texMatrixAlpha: {
          type: "m3",
          value: new i.Matrix3
        },
        irradianceMap: {
          type: "t",
          value: null
        },
        exposureBias: {
          type: "f",
          value: 1
        },
        envMapExposure: {
          type: "f",
          value: 1
        },
        envRotationSin: {
          type: "f",
          value: 0
        },
        envRotationCos: {
          type: "f",
          value: 1
        }
      }]),
      vertexShader: a.a,
      fragmentShader: l.a
    };
  i.ShaderLib.firefly_phong = c
}, function (e, t, n) {
  "use strict";
  n.r(t), n.d(t, "BasicShader", (function () {
    return c
  }));
  var i = n(0),
    r = n(30),
    o = n(381),
    a = n.n(o),
    s = n(382),
    l = n.n(s),
    c = {
      uniforms: i.UniformsUtils.merge([i.UniformsLib.common, i.UniformsLib.fog, i.UniformsLib.shadowmap, r.ShaderChunks.CutPlanesUniforms, r.ShaderChunks.IdUniforms, r.ShaderChunks.ThemingUniform, r.ShaderChunks.PointSizeUniforms, r.ShaderChunks.WideLinesUniforms]),
      vertexShader: a.a,
      fragmentShader: l.a
    };
  i.ShaderLib.firefly_basic = c
}, function (e, t, n) {
  "use strict";
  n.r(t), n.d(t, "CelShader", (function () {
    return c
  }));
  var i = n(0),
    r = n(30),
    o = n(63),
    a = n.n(o),
    s = n(384),
    l = n.n(s),
    c = {
      uniforms: i.UniformsUtils.merge([r.ShaderChunks.DepthTextureUniforms, {
        tDiffuse: {
          type: "t",
          value: null
        },
        tID: {
          type: "t",
          value: null
        },
        resolution: {
          type: "v2",
          value: new i.Vector2(1 / 1024, 1 / 512)
        },
        cameraNear: {
          type: "f",
          value: 1
        },
        cameraFar: {
          type: "f",
          value: 100
        },
        tFill: {
          type: "t",
          value: null
        },
        tPaper: {
          type: "t",
          value: null
        },
        style: {
          type: "i",
          value: 0
        },
        idEdges: {
          type: "i",
          value: 1
        },
        normalEdges: {
          type: "i",
          value: 1
        },
        depthEdges: {
          type: "i",
          value: 1
        },
        brightness: {
          type: "f",
          value: 0
        },
        contrast: {
          type: "f",
          value: 0
        },
        grayscale: {
          type: "i",
          value: 0
        },
        preserveColor: {
          type: "i",
          value: 0
        },
        levels: {
          type: "f",
          value: 6
        },
        repeats: {
          type: "f",
          value: 3
        },
        rotation: {
          type: "f",
          value: 0
        },
        tGraphite1: {
          type: "t",
          value: null
        },
        tGraphite2: {
          type: "t",
          value: null
        },
        tGraphite3: {
          type: "t",
          value: null
        },
        tGraphite4: {
          type: "t",
          value: null
        },
        tGraphite5: {
          type: "t",
          value: null
        },
        tGraphite6: {
          type: "t",
          value: null
        },
        tGraphite7: {
          type: "t",
          value: null
        },
        tGraphite8: {
          type: "t",
          value: null
        }
      }]),
      vertexShader: a.a,
      fragmentShader: l.a
    }
}, function (e, t, n) {
  "use strict";
  n.r(t), n.d(t, "createWireframe", (function () {
    return a
  }));
  var i = n(58),
    r = n(13),
    o = n(62);

  function a(e, t, n, a) {
    if (!e.isLines && !e.iblines) {
      var s = function (e, t) {
          var n = [],
            r = {},
            a = 1;
          if (e.boundingBox || t) {
            var s = (new o.LmvBox3).copy(e.boundingBox || t).size();
            a = Math.max(s.x, Math.max(s.y, s.z))
          }
          var l = 65536 / a;
          return Object(i.enumMeshVertices)(e, (function (e, t, i, o) {
            ! function (e, t, n, i, r) {
              var o = 0 | e.x * i,
                a = 0 | e.y * i,
                s = 0 | e.z * i,
                l = n[o];
              l || (n[o] = l = {});
              var c = l[a];
              c || (l[a] = c = {});
              var u = c[s];
              void 0 === u && (c[s] = u = t), r[t] = u
            }(e, o, r, l, n)
          })), n
        }(e, n),
        l = function (e, t) {
          var n = new Float32Array(3 * Object(i.getVertexCount)(e));
          return Object(i.enumMeshVertices)(e, (function (e, t, i, r) {
            n[3 * r] = e.x, n[3 * r + 1] = e.y, n[3 * r + 2] = e.z
          }), t), n
        }(e, t),
        c = {},
        u = [],
        h = new r.LmvVector3,
        d = new r.LmvVector3,
        f = new r.LmvVector3,
        p = new r.LmvVector3,
        m = new r.LmvVector3;
      for (var g in Object(i.enumMeshTriangles)(e, (function (e, t, n, i, r, o) {
          _(i, r, o), _(r, o, i), _(o, i, r)
        })), c)
        for (var v in c[g]) u.push(parseInt(g)), u.push(parseInt(v));
      u.length > 1 && (e.iblines = new Uint16Array(u.length), e.iblines.set(u))
    }

    function y(e, t) {
      t.x = l[3 * e], t.y = l[3 * e + 1], t.z = l[3 * e + 2]
    }

    function b(e, t, n, i) {
      y(e, h), y(t, d), y(n, f), d.sub(h), f.sub(h), d.cross(f), i.copy(d).normalize()
    }

    function _(e, t, n) {
      var i = s[e],
        r = s[t],
        o = s[n];
      if (i !== r && i !== o && r !== o) {
        var l = !1;
        if (i > r) {
          var h = i;
          i = r, r = h, l = !0
        }
        var d = c[i];
        if (d) {
          var f = d[r];
          if (void 0 === f) d[r] = l ? -n - 1 : n;
          else {
            if (a) u.push(e), u.push(t);
            else {
              b(e, t, n, p), f < 0 ? b(r, i, s[-f - 1], m) : b(i, r, s[f], m);
              var g = p.dot(m);
              Math.abs(g) < .25 && (u.push(e), u.push(t))
            }
            delete d[r]
          }
        } else c[i] = {}, c[i][r] = n
      }
    }
  }
}, function (e, t, n) {
  "use strict";
  n.r(t), n.d(t, "LeafletDiffModes", (function () {
    return u
  })), n.d(t, "LeafletDiffIterator", (function () {
    return f
  }));
  var i = n(404),
    r = n.n(i),
    o = n(405),
    a = n.n(o),
    s = n(135),
    l = n(0),
    c = n(3),
    u = {
      NORMAL_DIFF: 0,
      MODEL_A_ONLY: 1,
      MODEL_B_ONLY: 2,
      SPLIT_VIEW: 3,
      HIGHLIGHT_A: 4,
      HIGHLIGHT_B: 5
    };

  function h() {
    var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 1 / 0,
      t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 1 / 0,
      n = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : -1 / 0,
      i = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : -1 / 0;
    this.l = e, this.b = t, this.r = n, this.t = i
  }

  function d() {
    var e = {},
      t = {};
    this.acquireShaderMaterial = function (n, i) {
      e[i] || function (n) {
        e[n] = [], t[n] = 0
      }(i);
      var o = e[i][t[i]];
      if (o)
        for (var s in o.defines = {}, n) o.uniforms[s].value = n[s].value;
      else o = new l.ShaderMaterial({
        uniforms: n,
        vertexShader: a.a,
        fragmentShader: r.a
      }), e[i][t[i]] = o;
      return t[i]++, o
    }, this.reset = function () {
      for (var e in t) t[e] = 0
    }, this.setThreshold = function (t) {
      for (var n in e)
        for (var i = 0; i < e[n].length; i++) e[n][i].uniforms.diff_threshold.value = t, e[n][i].needsUpdate = !0
    }, this.dispose = function () {
      for (var t in e)
        for (var n = 0; n < e[t].length; n++)(i = e[t][n]) && (i.dispose(), i.needsUpdate = !0);
      var i
    }
  }

  function f(e, t) {
    var n = e,
      i = t,
      r = new l.Scene,
      o = e.getDpiScale() < 1 || t.getDpiScale() < 1 ? .25 : .1,
      a = !0,
      f = !1,
      p = !0,
      m = new s.a,
      g = new d,
      v = new l.Vector3,
      y = .5,
      b = 0,
      _ = 3,
      x = Object(c.getGlobal)().devicePixelRatio || 1,
      w = 0,
      E = u.NORMAL_DIFF;

    function A() {
      return 0 !== v.x || 0 !== v.y
    }

    function S(e, t, n) {
      n.position[e](v), n.target[e](v), n.updateMatrixWorld(!0), n.matrixWorldInverse.getInverse(n.matrixWorld), t.reset(n)
    }

    function M(e, t, n) {
      var i = e.clone();
      i.position.z = t;
      var a = e.material.map,
        s = {
          diff_threshold: {
            type: "f",
            value: o
          },
          texture1: {
            type: "t",
            value: a
          },
          offsetRepeatA: {
            type: "v4",
            value: new l.Vector4(a.offset.x, a.offset.y, a.repeat.x, a.repeat.y)
          },
          model: {
            type: "i",
            value: n
          },
          splitPosition: {
            type: "f",
            value: y * b * x
          }
        },
        c = E === u.SPLIT_VIEW,
        h = g.acquireShaderMaterial(s, "nonintersect" + (c ? "split" : ""));
      return h.defines.SINGLE_MODEL = 1, c && (h.defines.SPLIT_VIEW = 1), i.material = h, r.add(i), i
    }

    function T(e, t, n, i) {
      e.offsetX = t.offsetX + (i.l - n.l) / n.width() * t.scaleX, e.offsetY = t.offsetY + (i.b - n.b) / n.height() * t.scaleY, e.scaleX = t.scaleX * i.width() / n.width(), e.scaleY = t.scaleY * i.height() / n.height()
    }

    function C(e, t, n, i, a) {
      var c = e.rect,
        h = n.getIntersection(c);
      if (h) {
        e.intersecStatus = 1, e.intersec.union(h);
        var d = e.material.map,
          f = t.clone(),
          p = new s.b,
          v = f.geometry.uvTransform;
        h.equals(n) ? (v.copyTo(p), h.equals(c) && (e.intersecStatus = 2)) : (T(p, v, n, h), f.geometry = m.acquireQuadGeom(p));
        var w = new s.b;
        T(w, e.geometry.uvTransform, c, h), f.position.set(h.l, h.b, 0), f.scale.set(h.width(), h.height(), 1);
        var A = new l.Vector2,
          S = new l.Vector2;
        0;
        var M = {
            diff_threshold: {
              type: "f",
              value: o
            },
            texture1: {
              type: "t",
              value: i
            },
            texture2: {
              type: "t",
              value: d
            },
            offsetRepeatA: {
              type: "v4",
              value: new l.Vector4(i.offset.x, i.offset.y, i.repeat.x, i.repeat.y)
            },
            offsetRepeatB: {
              type: "v4",
              value: new l.Vector4(d.offset.x, d.offset.y, d.repeat.x, d.repeat.y)
            },
            uvTFa: {
              type: "v4",
              value: p.toVec4()
            },
            uvTFb: {
              type: "v4",
              value: w.toVec4()
            },
            highlight: {
              type: "i",
              value: a ? 0 : _
            },
            splitPosition: {
              type: "f",
              value: y * b * x
            },
            resolution1: {
              type: "v2",
              value: A
            },
            resolution2: {
              type: "v2",
              value: S
            }
          },
          C = E === u.SPLIT_VIEW,
          P = g.acquireShaderMaterial(M, "intersection" + (C ? "split" : ""));
        return C && (P.defines.SPLIT_VIEW = 1), f.material = P, r.add(f), h
      }
      return null
    }

    function P(e) {
      for (var t = 0; t < e.children.length; t++) {
        var n = e.children[t];
        n.intersecStatus = 0, n.intersec = new h;
        var i = new l.Vector3;
        i.addVectors(n.position, v);
        var r = n.scale;
        n.rect = new h(i.x, i.y, i.x + r.x, i.y + r.y)
      }
    }

    function L(e, t) {
      var r = A();
      w = .5 * (t.far - t.near);
      var o = n.reset(e, t);
      r && S("sub", e, t);
      var a = i.reset(e, t);
      return r && S("add", e, t),
        function () {
          var e = arguments.length > 0 && void 0 !== arguments[0] && arguments[0],
            t = n.getScene(),
            r = i.getScene();
          P(r);
          for (var o = 0; o < t.children.length; o++) {
            for (var a = 0, s = t.children[o], l = s.tile, c = s.material.map, u = s.material.tile, d = s.position, f = s.scale, p = new h(d.x, d.y, d.x + f.x, d.y + f.y), m = new h, g = o < r.children.length ? o : 0, y = r.children.length, b = g; b < y; b++) {
              var _ = (T = r.children[b]).tile,
                x = T.material.tile,
                E = e && (x.level !== u.level || l.level !== _.level || u.level < l.level || x.level < _.level),
                A = C(T, s, p, c, E);
              if (A && (a = T.intersecStatus, m.union(A), 2 === a)) break;
              g > 0 && b === y - 1 && (y = g, g = 0, b = -1)
            }(0 === a || 1 === a && !p.equals(m)) && M(s, -.2 * w, 1)
          }
          for (var S = 0; S < r.children.length; S++) {
            var T;
            if (0 === (T = r.children[S]).intersecStatus || 1 === T.intersecStatus && !T.rect.equals(T.intersec)) {
              var L = M(T, -.1 * w, 2);
              L.position.add(v)
            }
          }
        }(!o || !a), o && a
    }
    this.setThreshold = function (e) {
      o = e, g.setThreshold(e)
    }, this.setDiffMode = function (e) {
      E = e, f = !0
    }, this.getDiffMode = function () {
      return E
    }, this.getOffset = function () {
      return v
    }, this.setOffset = function (e) {
      v = e
    }, this.setSplitPosition = function (e) {
      y = e
    }, this.rayCast = function (e, t) {
      return null
    }, this.getVisibleBounds = function (e, t) {
      var r = new l.Box3,
        o = new l.Box3;
      n.getVisibleBounds(r, o), i.getVisibleBounds(e, t), e.union(r), t.union(o)
    };
    var D = 0,
      I = 0,
      R = !0;
    this.updateProgress = function (e) {
      if (e) this.onProgress(100), D = 0, R = !0;
      else {
        if (R) I = Date.now(), D = 10, R = !1;
        else {
          var t = Date.now();
          D += (D > 60 ? 10 : 5) * (t - I) / 250, D = Math.min(95, D), I = t
        }
        this.onProgress(D)
      }
    }, this.reset = function (e, t) {
      a = !1;
      for (var o = 0; o < r.children.length; o++) {
        r.children[o].dispatchEvent({
          type: "removed"
        })
      }
      r.children.length = 0, r.position.set(0, 0, 0), b = t.clientWidth, m.reset(), g.reset();
      var s = !0;
      switch (E) {
        case u.NORMAL_DIFF:
          _ = 3, s = L(e, t);
          break;
        case u.MODEL_A_ONLY:
          ! function (e, t) {
            n.reset(e, t), r = n.getScene().clone()
          }(e, t);
          break;
        case u.MODEL_B_ONLY:
          ! function (e, t) {
            var n = A();
            n && S("sub", e, t), i.reset(e, t), (r = i.getScene().clone()).position.copy(v), n && S("add", e, t)
          }(e, t);
          break;
        case u.SPLIT_VIEW:
          ! function (e, t) {
            L(e, t)
          }(e, t);
          break;
        case u.HIGHLIGHT_A:
          _ = 1, s = L(e, t);
          break;
        case u.HIGHLIGHT_B:
          _ = 2, s = L(e, t)
      }
      p ? s && (this.onFirstSceneComplete && this.onFirstSceneComplete(), p = !1) : this.onProgress && this.updateProgress(s)
    }, this.nextBatch = function () {
      return a ? null : (a = !0, r)
    }, this.getScene = function () {
      return r
    }, this.getSceneCount = function () {
      return 1
    }, this.done = function () {
      return a
    }, this.update = function () {
      return f ? (f = !1, !0) : n.update() || i.update()
    }, this.dispose = function () {
      g.dispose(), m.dispose()
    }, this.dtor = function () {
      this.dispose()
    }
  }
  h.prototype.width = function () {
    return this.r - this.l
  }, h.prototype.height = function () {
    return this.t - this.b
  }, h.prototype.getIntersection = function (e) {
    var t = Math.max(this.l, e.l),
      n = Math.min(this.r, e.r),
      i = Math.max(this.b, e.b),
      r = Math.min(this.t, e.t);
    return n > t && r > i ? new h(t, i, n, r) : null
  }, h.prototype.equals = function (e) {
    return this.l === e.l && this.r === e.r && this.t === e.t && this.b === e.b
  }, h.prototype.union = function (e) {
    return this.l = Math.min(this.l, e.l), this.r = Math.max(this.r, e.r), this.b = Math.min(this.b, e.b), this.t = Math.max(this.t, e.t), this
  }
}, function (e, t, n) {
  "use strict";
  n.r(t), n.d(t, "VertexBufferBuilder", (function () {
    return o
  }));
  var i = 2 * Math.PI,
    r = [0, 1, 3, 0, 3, 2];

  function o(e, t, n, i) {
    var r = t || 65536;
    this.FULL_COUNT = 0 | (n || 32767), this.useInstancing = e, this.useCompactBuffers = i, this.stride = 10, this.allocVcount = 4 * (this.useInstancing ? r / 4 : r), this.vb = new ArrayBuffer(this.stride * this.allocVcount), this.vbf = new Float32Array(this.vb), this.vbi = new Int32Array(this.vb), this.ib = this.useInstancing ? null : new Uint16Array(r), this.reset(0)
  }
  o.prototype.reset = function (e) {
    this.vcount = e, this.icount = 0, this.minx = this.miny = 1 / 0, this.maxx = this.maxy = -1 / 0, this.dbIds = {}, this.lastDbId = null, this.colors = {}, this.numEllipticals = 0, this.numCirculars = 0, this.numTriangleGeoms = 0, this.hasLineStyles = !1, this.changeTracking = {}, this.stride = 10
  }, o.prototype.expandStride = function () {
    var e = this.stride;
    if (!(e >= 12)) {
      for (var t = this.stride + 2, n = new ArrayBuffer(t * this.allocVcount), i = new Uint8Array(this.vb), r = new Uint8Array(n), o = 0, a = this.vcount; o < a; o++)
        for (var s = o * e * 4, l = o * t * 4, c = 0; c < 4 * e; c++) r[l + c] = i[s + c];
      this.vb = n, this.vbf = new Float32Array(n), this.vbi = new Int32Array(n), this.stride = t
    }
  }, o.prototype.addToBounds = function (e, t) {
    e < this.minx && (this.minx = e), e > this.maxx && (this.maxx = e), t < this.miny && (this.miny = t), t > this.maxy && (this.maxy = t)
  };
  var a = new Int32Array(1);

  function s(e) {
    return a[0] = e, a[0]
  }
  o.prototype.trackChanges = function (e, t, n, i, r, o) {
    if (n !== this.lastDbId && (this.dbIds[s(n)] = 1, this.lastDbId = n), o && (this.hasLineStyles = !0), this.useCompactBuffers) {
      var a = this.changeTracking;
      l("geomType", e), l("color", t), l("dbId", n), l("layerId", i), l("viewportId", r), l("linePattern", o), this.colors[s(t)] = 1
    }

    function l(t, n) {
      void 0 === a[t] ? a[t] = e : a[t] === n && (a[t + "Varies"] = !0)
    }
  }, o.prototype.setCommonVertexAttribs = function (e, t, n, i, r, o, a, s) {
    this.trackChanges(n, i, r, o, a, s), t &= 255, n &= 255, s &= 255, o &= 65535, a &= 65535, this.vbi[e + 8] = t | n << 8 | s << 16, this.vbi[e + 6] = i, this.vbi[e + 7] = r, this.vbi[e + 9] = o | a << 16
  }, o.prototype.addVertexTriangleGeom = function (e, t, n, i, r, o, a, s, l, c) {
    for (var u = this.vcount, h = this.vbf, d = this.useInstancing ? 1 : 4, f = 0; f < d; f++) {
      var p = (u + f) * this.stride;
      h[p] = e, h[p + 1] = t, h[p + 2] = n, h[p + 3] = i, h[p + 4] = r, h[p + 5] = o, this.setCommonVertexAttribs(p, 0 + f, 5, a, s, l, c, 0), this.vcount++
    }
    return u
  }, o.prototype.addVertexLine = function (e, t, n, r, o, a, s, l, c, u, h) {
    for (var d = this.vcount, f = this.vbf, p = this.useInstancing ? 1 : 4, m = 0; m < p; m++) {
      var g = (d + m) * this.stride;
      f[g] = e, f[g + 1] = t, f[g + 2] = (n + Math.PI) / i, f[g + 3] = r, f[g + 4] = .5 * a, f[g + 5] = o, this.setCommonVertexAttribs(g, 0 + m, 1, s, l, c, u, h), this.vcount++
    }
    return d
  }, o.prototype.addVertexTexQuad = function (e, t, n, r, o, a, s, l, c) {
    for (var u = this.vcount, h = this.vbf, d = this.useInstancing ? 1 : 4, f = 0; f < d; f++) {
      var p = (u + f) * this.stride;
      h[p] = e, h[p + 1] = t, h[p + 2] = o / i, h[p + 3] = n, h[p + 4] = r, this.setCommonVertexAttribs(p, 0 + f, 4, a, s, l, c, 0), this.vcount++
    }
    return u
  }, o.prototype.addVertexArc = function (e, t, n, r, o, a, s, l, c, u, h, d) {
    for (var f = this.vcount, p = this.vbf, m = o == a ? 2 : 3, g = this.useInstancing ? 1 : 4, v = 0; v < g; v++) {
      var y = (f + v) * this.stride;
      p[y] = e, p[y + 1] = t, p[y + 2] = n / i, p[y + 3] = r / i, p[y + 4] = .5 * l, p[y + 5] = o, 3 === m && (p[y + 10] = a, p[y + 11] = s), this.setCommonVertexAttribs(y, 0 + v, m, c, u, h, d, 0), this.vcount++
    }
    return f
  }, o.prototype.addVertex = function (e, t, n, i, r, o) {
    var a = arguments.length > 6 && void 0 !== arguments[6] ? arguments[6] : 0;
    if (!this.useInstancing) {
      var s = this.vcount,
        l = this.stride * s,
        c = this.vbf;
      return c[l] = e, c[l + 1] = t, this.setCommonVertexAttribs(l, 0, a, n, i, r, o, 0), this.vcount++, s
    }
  }, o.prototype.addVertexPolytriangle = function (e, t, n, i, r, o) {
    this.useInstancing || (this.addVertex(e, t, n, i, r, o), this.addToBounds(e, t))
  }, o.prototype.addVertexMSDFPolytriangle = function (e, t, n, i, r, o, a, s) {
    this.addVertexTexPolytriangle(e, t, n, i, r, o, a, s, 6)
  }, o.prototype.addIndices = function (e, t) {
    if (!this.useInstancing) {
      var n = this.ib,
        i = this.icount;
      if (i + e.length >= n.length) {
        for (var r = new Uint16Array(2 * Math.max(e.length, n.length)), o = 0; o < i; ++o) r[o] = n[o];
        this.ib = n = r
      }
      for (o = 0; o < e.length; ++o) n[i + o] = t + e[o];
      this.icount += e.length
    }
  }, o.prototype.finalizeQuad = function (e) {
    this.useInstancing || this.addIndices(r, e)
  }, o.prototype.addSegment = function (e, t, n, i, r, o, a, s, l, c, u) {
    var h = n - e,
      d = i - t,
      f = h || d ? Math.atan2(d, h) : 0,
      p = h || d ? Math.sqrt(h * h + d * d) : 0,
      m = this.addVertexLine(e, t, f, p, r, o, a, s, l, c, u);
    this.finalizeQuad(m), this.addToBounds(e, t), this.addToBounds(n, i)
  }, o.prototype.addTriangleGeom = function (e, t, n, i, r, o, a, s, l, c) {
    this.numTriangleGeoms++;
    var u = this.addVertexTriangleGeom(e, t, n, i, r, o, a, s, l, c);
    this.finalizeQuad(u), this.addToBounds(e, t), this.addToBounds(n, i), this.addToBounds(r, o)
  }, o.prototype.addArc = function (e, t, n, r, o, a, s, c, u, h, d, f) {
    o == a ? this.numCirculars++ : (this.numEllipticals++, this.expandStride());
    var p = l(n, r);
    if (n = p.start, r = p.end, 0 == n && 0 == r && (r = i), (_ = Math.abs(n - r)) > 1e-4 && Math.abs(_ - i) > 1e-4) {
      var m = e + o * Math.cos(n),
        g = t + a * Math.sin(n);
      this.addSegment(m, g, m, g, 0, c, u, h, d, f);
      var v = e + o * Math.cos(r),
        y = t + a * Math.sin(r);
      this.addSegment(v, y, v, y, 0, c, u, h, d, f)
    } else this.addToBounds(e - o, t - a), this.addToBounds(e + o, t + a);
    var b = this.addVertexLine(e, t, 0, 1e-4, 0, 0, 33554431, h, d, f);
    this.finalizeQuad(b);
    var _, x = this.addVertexArc(e, t, n, r, o, a, s, c, u, h, d, f);
    this.finalizeQuad(x)
  }, o.prototype.addTexturedQuad = function (e, t, n, i, r, o, a, s, l) {
    var c = this.addVertexTexQuad(e, t, n, i, r, o, a, s, l);
    this.finalizeQuad(c);
    var u = .5 * Math.cos(r),
      h = .5 * Math.sin(r),
      d = Math.abs(n * u) + Math.abs(i * h),
      f = Math.abs(n * h) + Math.abs(i * u);
    this.addToBounds(e - d, t - f), this.addToBounds(e + d, t + f)
  }, o.prototype.addVertexImagePolytriangle = function (e, t, n, i, r, o, a, s) {
    return this.addVertexTexPolytriangle(e, t, n, i, r, o, a, s, 7)
  }, o.prototype.addVertexTexPolytriangle = function (e, t, n, i, r, o, a, s, l) {
    if (!this.useInstancing) {
      var c = this.vcount,
        u = this.vbf;
      this.addVertex(e, t, r, o, a, s, l), u[c * this.stride + 2] = n, u[c * this.stride + 3] = i, this.addToBounds(e, t)
    }
  }, o.prototype.isFull = function (e) {
    e = e || 3;
    var t = this.useInstancing ? 4 : 1;
    return this.vcount * t + e > this.FULL_COUNT
  }, o.prototype.makeCompactVertexLayout = function () {
    var e = Object.keys(this.colors),
      t = Object.keys(this.dbIds);
    if (10 !== this.stride) return null;
    var n = e.length + t.length;
    if (e.length + t.length > 65536) return null;
    var i = new Int32Array(n + 1);
    i[0] = 0;
    for (var r = 1, o = 0; o < e.length; o++, r++) i[r] = parseInt(e[o]), this.colors[e[o]] = r;
    for (o = 0; o < t.length; o++, r++) i[r] = parseInt(t[o]), this.dbIds[t[o]] = r;
    var a = new ArrayBuffer(24 * this.vcount),
      s = new Int32Array(a),
      l = new Uint16Array(a),
      c = this.maxx - this.minx || 1,
      u = this.maxy - this.miny || 1,
      h = this.minx,
      d = this.miny,
      f = Math.max(c, u);

    function p(e) {
      return 0 | Math.round((e - h) / c * 65535)
    }

    function m(e) {
      return 0 | Math.round((e - d) / u * 65535)
    }

    function g(e) {
      return 0 | Math.round(e / f * 65535)
    }

    function v(e) {
      return 0 | 65535 * e
    }

    function y(e) {
      return e < 0 ? 32768 + 32767 * Math.min(1, -e / 1024) : e ? 0 | Math.round(e / f * 32767) || 1 : e
    }
    for (o = 0; o < this.vcount; o++) {
      var b = this.stride * o,
        _ = 6 * o,
        x = 2 * _;
      switch (this.vbi[b + 8] >> 8 & 255) {
        case 0:
          l[x] = p(this.vbf[b]), l[x + 1] = m(this.vbf[b + 1]);
          break;
        case 1:
          l[x] = p(this.vbf[b]), l[x + 1] = m(this.vbf[b + 1]), l[x + 2] = v(this.vbf[b + 2]), l[x + 3] = g(this.vbf[b + 3]), l[x + 4] = y(this.vbf[b + 4]);
          break;
        case 2:
          l[x] = p(this.vbf[b]), l[x + 1] = m(this.vbf[b + 1]), l[x + 2] = v(this.vbf[b + 2]), l[x + 3] = v(this.vbf[b + 3]), l[x + 4] = y(this.vbf[b + 4]), l[x + 5] = g(this.vbf[b + 5]);
          break;
        case 3:
          break;
        case 4:
          l[x] = p(this.vbf[b]), l[x + 1] = m(this.vbf[b + 1]), l[x + 2] = v(this.vbf[b + 2]), l[x + 3] = g(this.vbf[b + 3]), l[x + 4] = g(this.vbf[b + 4]);
          break;
        case 5:
          l[x] = p(this.vbf[b]), l[x + 1] = m(this.vbf[b + 1]), l[x + 2] = p(this.vbf[b + 2]), l[x + 3] = m(this.vbf[b + 3]), l[x + 4] = p(this.vbf[b + 4]), l[x + 5] = m(this.vbf[b + 5]);
          break;
        default:
          console.error("Unknown geometry type")
      }
      l[x + 6] = this.colors[this.vbi[b + 6]] || 0, l[x + 7] = this.dbIds[this.vbi[b + 7]] || 0, s[_ + 4] = this.vbi[b + 8], s[_ + 5] = this.vbi[b + 9]
    }
    var w = {};
    w.vb = new Float32Array(a), w.vbstride = 6;
    var E = this.useInstancing ? 1 : 0;
    return w.vblayout = {
      fields1: {
        offset: 0,
        itemSize: 2,
        bytesPerItem: 2,
        divisor: E,
        normalize: !0
      },
      fields2: {
        offset: 1,
        itemSize: 4,
        bytesPerItem: 2,
        divisor: E,
        normalize: !0
      },
      uvIdColor: {
        offset: 3,
        itemSize: 2,
        bytesPerItem: 2,
        divisor: E,
        normalize: !1
      },
      flags4b: {
        offset: 4,
        itemSize: 4,
        bytesPerItem: 1,
        divisor: E,
        normalize: !1
      },
      layerVp4b: {
        offset: 5,
        itemSize: 4,
        bytesPerItem: 1,
        divisor: E,
        normalize: !1
      }
    }, w.unpackXform = {
      x: c,
      y: u,
      z: h,
      w: d
    }, w.texData = i, w
  }, o.prototype.makeWideVertexLayout = function () {
    var e = {};
    e.vb = new Float32Array(this.vb.slice(0, this.vcount * this.stride * 4)), e.vbstride = this.stride;
    var t = this.useInstancing ? 1 : 0;
    return e.vblayout = {
      fields1: {
        offset: 0,
        itemSize: 2,
        bytesPerItem: 4,
        divisor: t,
        normalize: !1
      },
      fields2: {
        offset: 2,
        itemSize: 4,
        bytesPerItem: 4,
        divisor: t,
        normalize: !1
      },
      color4b: {
        offset: 6,
        itemSize: 4,
        bytesPerItem: 1,
        divisor: t,
        normalize: !0
      },
      dbId4b: {
        offset: 7,
        itemSize: 4,
        bytesPerItem: 1,
        divisor: t,
        normalize: !1
      },
      flags4b: {
        offset: 8,
        itemSize: 4,
        bytesPerItem: 1,
        divisor: t,
        normalize: !1
      },
      layerVp4b: {
        offset: 9,
        itemSize: 4,
        bytesPerItem: 1,
        divisor: t,
        normalize: !1
      }
    }, e.vblayout.extraParams = {
      offset: this.stride - 2,
      itemSize: 2,
      bytesPerItem: 4,
      divisor: t,
      normalize: !1
    }, e
  }, o.prototype.toMesh = function () {
    var e = null;
    if (this.useCompactBuffers && (e = this.makeCompactVertexLayout()), e || (e = this.makeWideVertexLayout()), this.useInstancing) {
      e.numInstances = this.vcount;
      var t = new Int32Array([0, 1, 2, 3]);
      e.vblayout.instFlags4b = {
        offset: 0,
        itemSize: 4,
        bytesPerItem: 1,
        divisor: 0,
        normalize: !1
      }, e.vblayout.instFlags4b.array = t.buffer;
      e.indices = new Uint16Array(r)
    } else e.indices = new Uint16Array(this.ib.buffer.slice(0, 2 * this.icount));
    e.dbIds = this.dbIds;
    var n = this.maxx - this.minx,
      i = this.maxy - this.miny,
      o = Math.max(n, i);
    e.boundingBox = {
      min: {
        x: this.minx,
        y: this.miny,
        z: .001 * -o
      },
      max: {
        x: this.maxx,
        y: this.maxy,
        z: .001 * o
      }
    };
    e.boundingSphere = {
      center: {
        x: .5 * (this.minx + this.maxx),
        y: .5 * (this.miny + this.maxy),
        z: 0
      },
      radius: .5 * Math.sqrt(n * n + i * i)
    };
    return e
  };
  var l = function (e, t) {
    function n() {
      function n(e, t) {
        return Math.abs(e - t) < .001
      }
      n(e, 0) && (e = 0), n(t, 0) && (t = 0), n(e, i) && (e = i), n(t, i) && (t = i)
    }
    if (n(), e > t)
      for (; e > i;) e -= i, t -= i;
    else
      for (; t > i;) e -= i, t -= i;
    return n(), e < 0 && t > 0 && (e += i), {
      start: e,
      end: t
    }
  }
}, function (e, t, n) {
  "use strict";

  function i(e) {
    this.viewer = e
  }
  n.r(t), n.d(t, "FileLoader", (function () {
    return i
  })), i.prototype.constructor = i, i.prototype.loadFile = function (e, t, n, i) {
    return !1
  }, i.prototype.is3d = function () {
    return !1
  }
}, function (e, t, n) {
  "use strict";
  n.r(t), n.d(t, "DefaultSettings", (function () {
    return c
  })), n.d(t, "ProfileSettings", (function () {
    return m
  }));
  var i = n(5),
    r = n(1),
    o = n(109),
    a = n(3),
    s = n(23),
    l = {};
  l[i.Prefs3D.AMBIENT_SHADOWS] = !0, l[i.Prefs3D.ANTIALIASING] = !Object(a.isMobileDevice)(), l[i.Prefs3D.GROUND_SHADOW] = !0, l[i.Prefs3D.GROUND_REFLECTION] = !1, l[i.Prefs3D.GHOSTING] = !0, l[i.Prefs3D.VIEW_CUBE] = !Object(a.isMobileDevice)(), l[i.Prefs3D.VIEW_CUBE_COMPASS] = !1, l[i.Prefs3D.VIEW_TYPE] = i.VIEW_TYPES.DEFAULT, l[i.Prefs3D.LINE_RENDERING] = !0, l[i.Prefs3D.LIGHT_PRESET] = s.DefaultLightPreset, l[i.Prefs3D.EDGE_RENDERING] = !1, l[i.Prefs3D.REVERSE_HORIZONTAL_LOOK_DIRECTION] = !1, l[i.Prefs3D.REVERSE_VERTICAL_LOOK_DIRECTION] = !1, l[i.Prefs3D.ALWAYS_USE_PIVOT] = !1, l[i.Prefs3D.ZOOM_TOWARDS_PIVOT] = !1, l[i.Prefs3D.ORBIT_PAST_WORLD_POLES] = !0, l[i.Prefs3D.CLICK_TO_SET_COI] = !1, l[i.Prefs3D.OPTIMIZE_NAVIGATION] = Object(a.isMobileDevice)(), l[i.Prefs3D.ENV_MAP_BACKGROUND] = !1, l[i.Prefs3D.FIRST_PERSON_TOOL_POPUP] = !0, l[i.Prefs3D.BIM_WALK_TOOL_POPUP] = !0, l[i.Prefs3D.BIM_WALK_NAVIGATOR_TYPE] = "default", l[i.Prefs3D.DEFAULT_NAVIGATION_TOOL_3D] = "default", l[i.Prefs3D.SELECTION_MODE] = o.SelectionMode.LEAF_OBJECT, l[i.Prefs3D.ENABLE_CUSTOM_ORBIT_TOOL_CURSOR] = !0, l[i.Prefs3D.EXPLODE_STRATEGY] = "hierarchy", l[i.Prefs3D.SELECTION_SETS_PIVOT] = !1, l[i.Prefs2D.GRAYSCALE] = !1, l[i.Prefs2D.SWAP_BLACK_AND_WHITE] = !1, l[i.Prefs2D.LOADING_ANIMATION] = !0, l[i.Prefs2D.FORCE_PDF_CALIBRATION] = !1, l[i.Prefs2D.FORCE_LEAFLET_CALIBRATION] = !0, l[i.Prefs.PROGRESSIVE_RENDERING] = !0, l[i.Prefs.OPEN_PROPERTIES_ON_SELECT] = !1, l[i.Prefs.POINT_RENDERING] = !0, l[i.Prefs.BACKGROUND_COLOR_PRESET] = null, l[i.Prefs.REVERSE_MOUSE_ZOOM_DIR] = !1, l[i.Prefs.LEFT_HANDED_MOUSE_SETUP] = !1, l[i.Prefs.FUSION_ORBIT] = !0, l[i.Prefs.FUSION_ORBIT_CONSTRAINED] = !0, l[i.Prefs.WHEEL_SETS_PIVOT] = !1, l[i.Prefs.RESTORE_SESSION_MEASUREMENTS] = !0;
  var c = l,
    u = {
      name: "Default",
      label: "Manufacturing (Default)",
      description: "Default Viewer settings."
    };
  u.settings = l, u.persistent = [i.Prefs3D.ALWAYS_USE_PIVOT, i.Prefs3D.ZOOM_TOWARDS_PIVOT, i.Prefs3D.REVERSE_HORIZONTAL_LOOK_DIRECTION, i.Prefs3D.REVERSE_VERTICAL_LOOK_DIRECTION, i.Prefs3D.ORBIT_PAST_WORLD_POLES, i.Prefs3D.CLICK_TO_SET_COI, i.Prefs3D.GHOSTING, i.Prefs3D.OPTIMIZE_NAVIGATION, i.Prefs3D.AMBIENT_SHADOWS, i.Prefs3D.ANTIALIASING, i.Prefs3D.GROUND_SHADOW, i.Prefs3D.GROUND_REFLECTION, i.Prefs3D.FIRST_PERSON_TOOL_POPUP, i.Prefs3D.BIM_WALK_TOOL_POPUP, i.Prefs3D.VIEW_TYPE, i.Prefs2D.SWAP_BLACK_AND_WHITE, i.Prefs2D.LOADING_ANIMATION, i.Prefs.OPEN_PROPERTIES_ON_SELECT, i.Prefs.REVERSE_MOUSE_ZOOM_DIR, i.Prefs.LEFT_HANDED_MOUSE_SETUP, i.Prefs.WHEEL_SETS_PIVOT], u.extensions = {
    load: [],
    unload: []
  };
  var h = p(u);
  h.name = "AEC", h.label = "Construction (AEC)", h.description = "A common set of preferences designed for the Construction industry.", h.settings[i.Prefs3D.EDGE_RENDERING] = !Object(a.isMobileDevice)(), h.settings[i.Prefs3D.LIGHT_PRESET] = Object(a.getGlobal)().DefaultLightPresetAec || "Boardwalk", h.settings[i.Prefs3D.ENV_MAP_BACKGROUND] = !0, h.settings[i.Prefs3D.VIEW_CUBE_COMPASS] = !0, h.settings[i.Prefs3D.SELECTION_SETS_PIVOT] = !0, h.extensions = {
    load: [],
    unload: []
  };
  var d = p(h);
  d.name = "Fluent", d.label = "Design Collaboration", d.description = "User experience that matches Design Collaboration.", d.settings[i.Prefs.REVERSE_MOUSE_ZOOM_DIR] = !0, d.settings[i.Prefs.WHEEL_SETS_PIVOT] = !0, d.settings[i.Prefs.RESTORE_SESSION_MEASUREMENTS] = !1, d.settings[i.Prefs2D.FORCE_PDF_CALIBRATION] = !0, d.settings[i.Prefs2D.LOADING_ANIMATION] = !1, d.settings[i.Prefs3D.ALWAYS_USE_PIVOT] = !0, d.settings[i.Prefs3D.ENABLE_CUSTOM_ORBIT_TOOL_CURSOR] = !1, d.extensions = {
    load: [],
    unload: []
  }, d.persistent.splice(d.persistent.indexOf(i.Prefs3D.VIEW_TYPE), 1);
  var f = p(h);

  function p(e) {
    e || (r.logger.log("ProfileSettings.clone: missing profileSettings, using DefaultProfileSettings..."), e = u);
    var t = {};
    return t.settings = Object.assign({}, e.settings), t.extensions = {}, e.hasOwnProperty("extensions") ? (t.extensions.load = e.extensions.hasOwnProperty("load") ? e.extensions.load.slice() : [], t.extensions.unload = e.extensions.hasOwnProperty("unload") ? e.extensions.unload.slice() : []) : t.extensions = {
      load: [],
      unload: []
    }, t.persistent = e.persistent.slice(), t
  }
  f.name = "Navis", f.label = "Navisworks", f.description = "Provides a user experience similar to Autodesk Navisworks desktop application.", f.settings[i.Prefs3D.BIM_WALK_TOOL_POPUP] = !1, f.settings[i.Prefs3D.BIM_WALK_NAVIGATOR_TYPE] = "aec", f.settings[i.Prefs3D.DEFAULT_NAVIGATION_TOOL_3D] = "extractor_defined";
  var m = {
    Default: u,
    AEC: h,
    Fluent: d,
    Navis: f,
    clone: p
  }
}, function (e, t, n) {
  "use strict";
  n.r(t), n.d(t, "estimateMemUsage", (function () {
    return c
  })), n.d(t, "ModelMemoryTracker", (function () {
    return u
  }));

  function i(e) {
    return e && e.byteLength || 0
  }

  function r(e) {
    return i(e.boxes) + i(e.transforms) + i(e.fragId2dbId) + i(e.geomDataIndexes) + i(e.materials)
  }

  function o(e) {
    return i(e.geomids) + i(e.materialids) + i(e.vizflags) + (e.boxes !== e.fragments.boxes ? i(e.boxes) : 0) + (e.transforms !== e.fragments.transforms ? i(e.transforms) : 0)
  }

  function a(e) {
    return i(e.nodes.nodesRaw ? e.nodes.nodesRaw : e.nodes) + i(e.primitives)
  }
  var s = !1;

  function l(e) {
    for (var t, n = Autodesk.Viewing.Private, l = 0, c = 0; c < e.length; c++) {
      var u = e[c],
        h = u.getData(),
        d = u.getConsolidation();
      if (d && (l += d.byteSize), h.isLeaflet) s || (console.warn("Memory tracking not implemented for leaflets."), s = !0);
      else {
        if (!h.isOTG) l += u.getGeometryList().geomMemory;
        var f = h.fragments;
        f && (l += r(f));
        var p = u.getFragmentList();
        p && (l += o(p));
        var m = h.bvh;
        m && (l += a(m));
        var g = h.instanceTree;
        g && (l += (t = void 0, i((t = g.nodeAccess).children) + i(t.nameSuffixes) + i(t.names) + i(t.nodeBoxes) + i(t.nodes)))
      }
    }
    return isFinite(l) || n.logger.warn("Memory estimate result was not a number"), l
  }

  function c(e) {
    var t = e.impl.geomCache(),
      n = t ? t.byteSize : 0,
      i = e.impl.modelQueue(),
      r = i.getModels(),
      o = i.getHiddenModels();
    return n + l(r) + l(o)
  }

  function u(e, t) {
    var n = e,
      i = 0,
      r = t || 1048576e3;

    function o(e) {
      return e.lruTimestamp === i
    }
    this.updateModelTimestamps = function (e) {
      i++;
      for (var t = 0; t < e.length; t++) {
        e[t].lruTimestamp = i
      }
    }, this.memoryExceeded = function () {
      return c(n) >= r
    }, this.getMemLimit = function () {
      return r
    }, this.cleanup = function (e) {
      var t = e || n.impl.unloadModel.bind(n.impl);
      if (this.memoryExceeded()) {
        for (var i = function () {
            for (var e = n.impl.modelQueue().getHiddenModels(), t = [], i = 0; i < e.length; i++) {
              var r = e[i];
              o(r) || t.push(r)
            }
            return t.sort((function (e, t) {
              return e.lurTimestamp - t.lruTimestamp
            })), t
          }(), r = 0; r < i.length; r++) {
          var a = i[r];
          if (a.isConsolidated && (a.unconsolidate(), !this.memoryExceeded())) return
        }
        var s = n.impl.geomCache();
        for (r = 0; r < i.length; r++)
          if (t(a = i[r]), s && s.cleanup(), !this.memoryExceeded()) return
      }
    }
  }
}, function (e, t, n) {
  "use strict";
  n.r(t), n.d(t, "Thumbnails", (function () {
    return s
  }));
  var i = n(115),
    r = n(6),
    o = n(18),
    a = n(3);
  var s = {
    getUrlForBubbleNode: function (e, t) {
      if (!e) return Promise.reject(new Error("Missing instance of BubbleNode"));
      if (!e.findParentGeom2Dor3D()) return Promise.reject(new Error("No thumbnail available."));
      var n = (t = t || {}).size || 200;
      return e.getRootNode().data.isVectorPDF ? new Promise((function (t) {
        var r = e.data,
          o = e.getRootNode().data.getPDF(),
          s = n,
          l = n,
          c = "".concat(r.guid, "/thumbnail/").concat(s, "x").concat(l);
        ! function (e, t, n, r, o, s) {
          var l = i.LocalStorage.getItem(o);
          l ? s(l) : e.getPage(t).then((function (e) {
            var t = Object(a.getGlobal)().document.createElement("canvas");
            t.width = n, t.height = r;
            var l = t.getContext("2d"),
              c = e.getViewport(1),
              u = Math.min(t.width / c.width, t.height / c.height);
            e.render({
              canvasContext: l,
              viewport: e.getViewport(u)
            }).then((function () {
              t.toBlob((function (e) {
                var t = new FileReader;
                t.readAsDataURL(e), t.onloadend = function () {
                  i.LocalStorage.setItem(o, t.result), s(t.result)
                }
              }), "image/png")
            }))
          }))
        }(o, r.page, s, l, c, t)
      })) : new Promise((function (t, i) {
        var a = e.getRootNode(),
          s = {
            urn: a.urn(),
            width: n,
            height: n,
            guid: encodeURIComponent(e.guid()),
            acmsession: r.endpoint.getAcmSession()
          },
          l = {
            responseType: "blob",
            skipAssetCallback: !0,
            size: n,
            guid: s.guid,
            acmsession: s.acmSession
          },
          c = "urn:" + s.urn;
        e.data.thumbnailUrn && (c = a.getDocument().getFullPath(e.data.thumbnailUrn)), o.ViewingService.getThumbnail(Object(r.initLoadContext)(), c, (function (e) {
          var n = new FileReader;
          n.onload = function (e) {
            var n = e.target.result;
            t(n)
          }, n.readAsDataURL(e)
        }), (function (e) {
          i(new Error("Thumbnail is unavailable."))
        }), l)
      }))
    }
  }
}, function (e, t, n) {
  "use strict";
  n.r(t), n.d(t, "AggregatedView", (function () {
    return y
  }));
  var i = n(16),
    r = n(3);

  function o(e, t, n, i, r, o, a) {
    try {
      var s = e[o](a),
        l = s.value
    } catch (e) {
      return void n(e)
    }
    s.done ? t(l) : Promise.resolve(l).then(i, r)
  }

  function a(e) {
    return function () {
      var t = this,
        n = arguments;
      return new Promise((function (i, r) {
        var a = e.apply(t, n);

        function s(e) {
          o(a, i, r, s, l, "next", e)
        }

        function l(e) {
          o(a, i, r, s, l, "throw", e)
        }
        s(void 0)
      }))
    }
  }

  function s(e, t) {
    for (var n = 0; n < t.length; n++) {
      var i = t[n];
      i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(e, i.key, i)
    }
  }
  var l = Autodesk.Viewing,
    c = l.Private,
    u = {
      BimWalk: "Autodesk.BimWalk",
      Bookmarks: "Autodesk.AEC.CanvasBookmarkExtension",
      Levels: "Autodesk.AEC.LevelsExtension",
      CrossFade: "Autodesk.CrossFadeEffects",
      Hyperlinks: "Autodesk.AEC.HyperlinkExtension",
      Minimap: "Autodesk.AEC.Minimap3DExtension",
      DropMe: "Autodesk.AEC.DropMeExtension",
      ZoomWindow: "Autodesk.Viewing.ZoomWindow",
      FusionOrbit: "Autodesk.Viewing.FusionOrbit",
      DiffTool: "Autodesk.DiffTool",
      ModelStructure: "Autodesk.ModelStructure"
    },
    h = function (e) {
      return e instanceof l.BubbleNode ? e.getModelKey() : e instanceof l.Model ? e.getDocumentNode().getModelKey() : "string" == typeof e ? e : void console.error("makeKey: Input must be key, model, or BubbleNode")
    },
    d = function (e) {
      return {
        model: null,
        node: e,
        visible: !1,
        url: null,
        loading: !1,
        error: !1
      }
    },
    f = function (e) {
      return isFinite(e.x) && isFinite(e.y) && isFinite(e.z)
    },
    p = function (e) {
      var t = e.getUpVector();
      return t && (new THREE.Vector3).fromArray(t)
    },
    m = function (e) {
      return f(e.position) && f(e.target) && f(e.up) && isFinite(e.orthoScale)
    },
    g = function (e, t, n) {
      for (var i = 0, r = 0; r < e.length; r++) {
        var o = e[r].getBoundingBox();
        if (n.intersectsBox(o) !== Autodesk.Viewing.Private.FrustumIntersector.OUTSIDE) {
          var a = o.size().length;
          o.distanceToPoint(t) > 50 * a || i++
        }
      }
      return i
    },
    v = function (e) {
      var t = e.getVisibleModels();
      t = t.filter((function (e) {
        return t = e.getBoundingBox(), f(t.min) && f(t.max);
        var t
      }));
      for (var n = e.impl.camera.clone(), i = new Autodesk.Viewing.Private.FrustumIntersector, r = void 0, o = void 0, a = void 0, s = 0; s < t.length; s++) {
        var l = t[s];
        r || (r = p(l));
        var c = l.getDefaultCamera();
        if (c && m(c)) {
          var u = l.getBoundingBox();
          n.position.copy(c.position), n.target.copy(c.target), n.up.copy(c.up), n.isPerspective = c.isPerspective, n.near = u.distanceToPoint(n.position), n.far = n.near + u.size().length, n.updateMatrixWorld(), n.updateProjectionMatrix(), n.matrixWorldInverse.getInverse(n.matrixWorld), i.reset(n);
          var h = g(t, c.position, i);
          (!o || h >= a) && (o = c, a = h)
        }
      }
      o && (o.pivot = o.target, o.worlup = r, o.fov = 45, e.autocam.setHomeViewFrom(o))
    },
    y = function () {
      function e() {
        ! function (e, t) {
          if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
        }(this, e), this.globalOffset = void 0, this.refPoint = void 0, this.modelItems = {}, this.resetOnNextModelAdd = !0, this.memTracker = null, this.cameraInitialized = !1, this.is3D = void 0, this.pendingCamera = null, this.extensionLoaded = {}, this.loadersInProgress = {}, this.diff = {
          enabled: !1,
          diffBubble: void 0,
          primaryBubble: void 0,
          diffBubbleLabel: void 0,
          primaryBubbleLabel: void 0,
          progressCallback: void 0,
          refNames: void 0
        }, this.modelIsGhosted = {}, this.diffCache = [], this.onDiffDone = void 0, this.waitForFirstModel = !1, this.onUnload = []
      }
      var t, n, o, f, p;
      return t = e, (n = [{
        key: "init",
        value: function (e) {
          var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {};
          return this.initViewerInstance(e, t), this.memTracker = new l.ModelMemoryTracker(this.viewer, t.memoryLimit), this.viewer.impl.showTransparencyWhenMoving(), this.options = t, this._registerLmvEventListeners(), this._loadExtensions()
        }
      }, {
        key: "initViewerInstance",
        value: function (e) {
          var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {},
            n = t.viewerClass || (t.headlessViewer ? l.Viewer3D : l.GuiViewer3D);
          this.viewer = new n(e, t.viewerConfig), this.viewer.start()
        }
      }, {
        key: "_onError",
        value: function () {
          var e;
          (e = console).error.apply(e, arguments)
        }
      }, {
        key: "reset",
        value: function () {
          this.hideAll(), this.pendingCamera = null, this.cameraInitialized = !1, this.resetOnNextModelAdd = !0, this._stopActiveTools(), this._unloadDiffTool(!0), this.refPoint = void 0, this.loadersInProgress = {}
        }
      }, {
        key: "getModel",
        value: function (e) {
          var t = this._getItem(e);
          return t && t.model
        }
      }, {
        key: "isEmpty",
        value: function () {
          return !this.getVisibleNodes().length
        }
      }, {
        key: "show",
        value: function (e) {
          this.isEmpty() && this._initForFirstViewable(e);
          var t = e.getModelKey(),
            n = this.getModel(t);
          n ? this._showModel(n) : this.load(e), this.modelItems[t].visible = !0, this._updateModelTimestamps(), this._consolidateVisibleModels()
        }
      }, {
        key: "hide",
        value: function (e) {
          var t = this._getItem(e);
          t && (t.model && (this.options.unloadUnfinishedModels && !t.model.isLoadDone() ? (this.unload(t.node), t.model && this.viewer.unloadModel(t.model)) : this.viewer.hideModel(t.model.id), v(this.viewer)), t.visible = !1, this._cleanupModels())
        }
      }, {
        key: "isVisible",
        value: function (e) {
          var t = this._getItem(e);
          return t && t.visible
        }
      }, {
        key: "hideAll",
        value: function () {
          for (var e in this.modelItems) this.hide(e)
        }
      }, {
        key: "getVisibleNodes",
        value: function () {
          var e = [];
          for (var t in this.modelItems) {
            var n = this.modelItems[t];
            n.visible && e.push(n.node)
          }
          return e
        }
      }, {
        key: "isOtgManifestMissing",
        value: function (e) {
          if (e.is2D()) return !1;
          var t = e.getOtgGraphicsNode();
          return !(t && !t.error || (t ? this._onError("Otg translation failed for viewable '".concat(e.name(), "'. Error:"), t.error) : this._onError("Otg node missing for viewable '".concat(e.name(), "'.")), this.onViewerNotification && this.onViewerNotification("error", "Model Translation failed for viewable: '".concat(e.name(), "'.")), 0))
        }
      }, {
        key: "load",
        value: function (e) {
          var t = this,
            n = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : null;
          !n && this.options.getCustomLoadOptions && (n = this.options.getCustomLoadOptions(e));
          var i = h(e),
            r = this.modelItems[i];
          if (r || (r = d(e), this.modelItems[i] = r), !(r.model || r.loading || r.error)) {
            if (e.is3D()) {
              if (this.waitForFirstModel) return;
              this.options.ignoreGlobalOffset || this.globalOffset || (this.waitForFirstModel = !0)
            }
            if (r.loading = !0, !this.options.disableSvf || !this.isOtgManifestMissing(e)) {
              var o = e.getRootNode(),
                a = o.getDocument(),
                s = {
                  globalOffset: this.globalOffset,
                  applyRefPoint: !0,
                  isAEC: !0,
                  bvhOptions: c.Consolidation.getDefaultBVHOptions(),
                  useConsolidation: !1,
                  loadAsHidden: !0,
                  bubbleNode: e,
                  disablePrecomputedNodeBoxes: !0,
                  preserveView: !0,
                  onFragmentListLoadProgress: function () {
                    return t._updateDiffLoadProgress()
                  },
                  disable3DModelLayers: !0,
                  keepCurrentModels: !0,
                  headlessViewer: this.options.headlessViewer
                },
                l = this._onModelLoaded.bind(this),
                u = function (n) {
                  return t._onModelLoadFailed(e, n)
                };
              return n && Object.assign(s, n), new Promise((function (n, i) {
                t.viewer.loadDocumentNode(a, e, s).then((function (e) {
                  l(e), n(e)
                })).catch((function (e) {
                  u(e), i(e)
                }))
              }))
            }
          }
        }
      }, {
        key: "unload",
        value: function (e) {
          this.viewer.unloadDocumentNode(e);
          var t = this._getItem(e);
          t && (t.loading && this._onModelLoadEnded(e), t.model && delete this.loadersInProgress[t.model.id]);
          var n = h(e);
          delete this.modelItems[n], this.onUnload.forEach((function (t) {
            return t(e)
          }))
        }
      }, {
        key: "unloadAll",
        value: function () {
          for (var e = Object.keys(this.modelItems).slice(), t = 0; t < e.length; t++) {
            var n = e[t],
              i = this.modelItems[n];
            this.unload(i.node)
          }
        }
      }, {
        key: "setCameraGlobal",
        value: function (e) {
          this.pendingCamera = {
            position: e.position && (new THREE.Vector3).copy(e.position),
            target: e.target && (new THREE.Vector3).copy(e.target),
            up: e.up && (new THREE.Vector3).copy(e.up),
            fov: e.fov,
            isPerspective: e.isPerspective
          }, this._applyPendingCameraWhenReady()
        }
      }, {
        key: "setCamera",
        value: function (e) {
          this.viewer.impl.setViewFromCamera(e, !0), this.cameraInitialized = !0
        }
      }, {
        key: "startBimWalk",
        value: function () {
          this.bimWalkStartPending = !0, this._startBimWalkWhenReady()
        }
      }, {
        key: "stopBimWalk",
        value: function () {
          var e = this.viewer.getExtension(u.BimWalk);
          e && e.isActive() && e.deactivate(), this.bimWalkStartPending = !1
        }
      }, {
        key: "isBimWalkActive",
        value: function () {
          var e = this.viewer.getExtension("Autodesk.BimWalk");
          return e && e.activeStatus || this.bimWalkStartPending
        }
      }, {
        key: "switchView",
        value: function (e, t) {
          this.reset(), this.setNodes(e, t)
        }
      }, {
        key: "setNodes",
        value: function (e, t) {
          var n = this,
            i = (e = (e = e || []) instanceof l.BubbleNode ? [e] : e).filter((function (e) {
              return !n.isVisible(e)
            })),
            r = {};
          e.forEach((function (e) {
            r[e.getModelKey()] = !0
          })), this.getVisibleNodes().filter((function (e) {
            return void 0 === r[e.getModelKey()]
          })).forEach((function (e) {
            n.hide(e)
          })), i.forEach((function (e) {
            n.show(e)
          })), this._setDiff(t)
        }
      }, {
        key: "getFloorSelector",
        value: function () {
          return this.levelsExtension && this.levelsExtension.floorSelector
        }
      }, {
        key: "setBookmarks",
        value: function (e) {
          this.bookmarks = e, this._updateBookmarks()
        }
      }, {
        key: "isLoadDone",
        value: function () {
          for (var e in this.modelItems) {
            var t = this.modelItems[e],
              n = t && t.model,
              i = !n && !t.error,
              r = n && !n.isLoadDone(),
              o = n && n.getPropertyDb() && !n.getPropertyDb().isLoadDone(),
              a = c.TextureLoader.requestsInProgress() > 0;
            if (i || r || o || a) return !1
          }
          return !0
        }
      }, {
        key: "waitForLoadDone",
        value: function () {
          var e = this;
          return new Promise((function (t) {
            e.isLoadDone() && t();
            var n = function n() {
              e.isLoadDone() && (e.viewer.removeEventListener(l.GEOMETRY_LOADED_EVENT, n), e.viewer.removeEventListener(l.OBJECT_TREE_CREATED_EVENT, n), e.viewer.removeEventListener(l.TEXTURES_LOADED_EVENT, n), e.onUnload.splice(e.onUnload.indexOf(n), 1), t())
            };
            e.viewer.addEventListener(l.GEOMETRY_LOADED_EVENT, n), e.viewer.addEventListener(l.OBJECT_TREE_CREATED_EVENT, n), e.viewer.addEventListener(l.TEXTURES_LOADED_EVENT, n), e.onUnload.push(n)
          }))
        }
      }, {
        key: "_setDiff",
        value: function (e) {
          e ? (this.diff.diffBubbles = e.diffBubbles, this.diff.primaryBubbles = e.primaryBubbles, this.diff.diffBubbleLabel = e.diffBubbleLabel, this.diff.primaryBubbleLabel = e.primaryBubbleLabel, this.diff.progressCallback = e.progressCallback, this.diff.supportBubbles = e.supportBubbles, this.diff.empty = e.empty, this.diff.refNames = e.refNames, e.supportBubbles && (this.load(e.supportBubbles.primary), this.load(e.supportBubbles.diff)), !e.empty && e.progressCallback && this._signalDiffLoadProgress(0, !0), this.diffStartTime = performance.now()) : (this.diff.diffBubbles = void 0, this.diff.primaryBubbles = void 0, this.diff.diffBubbleLabel = void 0, this.diff.primaryBubbleLabel = void 0, this.diff.progressCallback = void 0, this.diff.supportBubbles = void 0, this.diff.refNames = void 0), this.diff.enabled = Boolean(e), this.diffNeedsUpdate = !0, this._updateDiff()
        }
      }, {
        key: "_showModel",
        value: function (e) {
          this.viewer.showModel(e.id, !0), v(this.viewer)
        }
      }, {
        key: "_onModelAdded",
        value: function (e) {
          var t = this,
            n = e.model;
          if (this.cameraInitialized || this._initCamera(n), !n.getData().underlayRaster) {
            this.resetOnNextModelAdd && (this.viewer.getExtension(u.ZoomWindow) && this.viewer.unloadExtension(u.ZoomWindow), this.resetOnNextModelAdd = !1, this.options.headlessViewer || this.viewer.createUI(n), this.viewer.activateDefaultNavigationTools(!this.is3D), this._loadExtension(u.ZoomWindow).catch((function (e) {
                return t._onError(e)
              })), this._startBimWalkWhenReady()),
              function (e) {
                var t = e.getData(),
                  n = t.loadOptions.bubbleNode;
                if (e.is3d() && t.metadata.stats && !t.metadata.stats.num_fragments) {
                  var i = n.name(),
                    r = n.getRootNode().children[0].name();
                  console.warn('Empty View "'.concat(i, '" in model "').concat(r, '".'))
                }
              }(n);
            var i = e.model.getDocumentNode();
            if (i) {
              var r = i.getModelKey();
              delete this.modelIsGhosted[r], this._updateGhosting()
            }
          }
        }
      }, {
        key: "_onGeometryLoaded",
        value: function (e) {
          this._consolidateVisibleModels(), this._updateDiff(), this.loadersInProgress[e.model.id] = 100
        }
      }, {
        key: "_onExtensionLoaded",
        value: function (e) {
          var t = e.extensionId;
          this._startBimWalkWhenReady(), t === u.Levels && (this.levelsExtension = this.viewer.getExtension(u.Levels)), t === u.Bookmarks && this._updateBookmarks()
        }
      }, {
        key: "_registerLmvEventListeners",
        value: function () {
          this.viewer.addEventListener(l.GEOMETRY_LOADED_EVENT, this._onGeometryLoaded.bind(this)), this.viewer.addEventListener(l.MODEL_ADDED_EVENT, this._onModelAdded.bind(this)), this.viewer.addEventListener(l.EXTENSION_LOADED_EVENT, this._onExtensionLoaded.bind(this)), this.viewer.addEventListener(l.PROGRESS_UPDATE_EVENT, this._onProgressUpdate.bind(this)), this.viewer.addEventListener(l.MODEL_ROOT_LOADED_EVENT, this._updateDiff.bind(this))
        }
      }, {
        key: "_consolidateVisibleModels",
        value: function () {
          if (this._cleanupModels(), !Object(r.isMobileDevice)() && "false" !== Object(i.getParameterByName)("useConsolidation"))
            for (var e = this.viewer.getVisibleModels(), t = 0; t < e.length; t++) {
              var n = e[t];
              if (this.memTracker.memoryExceeded()) return;
              if (!n || !n.isLoadDone()) return;
              if (n.is2d()) return;
              if (!n.isConsolidated()) {
                var o = this.viewer.impl.glrenderer(),
                  a = this.viewer.impl.getMaterials();
                n.consolidate(a, void 0, o, !0), this._cleanupModels()
              }
            }
        }
      }, {
        key: "_cleanupModels",
        value: function () {
          var e = this;
          this._updateModelTimestamps(), this.memTracker.cleanup((function (t) {
            var n = t.getDocumentNode(),
              i = e._getItem(n);
            i && i.visible || e.unload(n)
          }))
        }
      }, {
        key: "_updateModelTimestamps",
        value: function () {
          var e = this.viewer.getVisibleModels().slice(),
            t = this._getDiffSupportModels();
          this.diff.enabled && t && (t.diff && e.push(t.diff), t.primary && e.push(t.primary)), this.memTracker.updateModelTimestamps(e)
        }
      }, {
        key: "_stopActiveTools",
        value: function () {
          var e = this.viewer.getExtension("Autodesk.Section");
          e && e.isActive() && e.enableSectionTool(!1), this.stopBimWalk();
          var t = !this.options.headlessViewer && this.viewer.getPropertyPanel(!1);
          t && t.isVisible() && t.setVisible(!1)
        }
      }, {
        key: "_onModelLoaded",
        value: function (e) {
          var t = this._getItem(e);
          t && (e.is3d() && this.waitForFirstModel && !this.options.ignoreGlobalOffset && (this.globalOffset = (new THREE.Vector3).copy(e.myData.globalOffset), this._onGlobalOffsetChanged()), t.model = e, t.visible && this._showModel(t.model), this._updateModelTimestamps(), this._updateDiffLoadProgress(), this._onModelLoadEnded(t.node))
        }
      }, {
        key: "_onModelLoadFailed",
        value: function (e, t) {
          this._onError("Failed to load model: ".concat(e.name(), ". Error code: ").concat(t)), this._onModelLoadEnded(e)
        }
      }, {
        key: "_onModelLoadEnded",
        value: function (e) {
          if (this._getItem(e).loading = !1, e.is3D() && this.waitForFirstModel)
            for (var t in this.waitForFirstModel = !1, this.modelItems) {
              var n = this.modelItems[t].node;
              this.load(n)
            }
        }
      }, {
        key: "_initCamera",
        value: function (e, t) {
          this.viewer.impl.setViewFromFile(e, !t), this.viewer.impl.controls.recordHomeView(), this.cameraInitialized = !0, this.pendingCamera && this._applyPendingCameraWhenReady()
        }
      }, {
        key: "_getItem",
        value: function (e) {
          var t = h(e);
          return this.modelItems[t]
        }
      }, {
        key: "_updateRefPoint",
        value: function (e) {
          if (this.isEmpty() && e.is3D() && !this.options.ignoreGlobalOffset) {
            var t = e.getAecModelData();
            if (t) {
              var n = t && t.refPointTransformation;
              this.refPoint = n ? {
                x: n[9],
                y: n[10],
                z: 0
              } : {
                x: 0,
                y: 0,
                z: 0
              };
              var i = this.globalOffset && THREE.Vector3.prototype.distanceToSquared.call(this.refPoint, this.globalOffset);
              (!this.globalOffset || i > 4e6) && (this.globalOffset = (new THREE.Vector3).copy(this.refPoint), this.unloadAll(), this._onGlobalOffsetChanged())
            }
          }
        }
      }, {
        key: "_onGlobalOffsetChanged",
        value: function () {
          var e = this.viewer.getExtension(u.Bookmarks);
          e && e.resetGlobalOffset(this.globalOffset)
        }
      }, {
        key: "_loadExtensions",
        value: (p = a(regeneratorRuntime.mark((function e() {
          var t, n, i = this;
          return regeneratorRuntime.wrap((function (e) {
            for (;;) switch (e.prev = e.next) {
              case 0:
                return t = [], !l.isMobileDevice() && t.push(this._loadExtension(u.CrossFade)), t.push(this._loadExtension(u.Levels, this.viewer.config)), t.push(this._loadExtension(u.ModelStructure, this.viewer.config)), (n = this.viewer.config).disabledExtensions = this.viewer.config.disabledExtensions || {}, n.disabledExtensions.hyperlink = !0, t.push(this._loadExtension(u.Hyperlinks, {
                  loadViewableCb: function (e, t) {
                    i.onHyperlink ? i.onHyperlink(e, t) : i.switchView([e])
                  }
                })), this.options.disableMinimap || t.push(this._loadExtension(u.Minimap, {
                  trackUsage: this._trackMinimapUsage ? this._trackMinimapUsage.bind(this) : void 0
                })), e.abrupt("return", Promise.all(t));
              case 11:
              case "end":
                return e.stop()
            }
          }), e, this)
        }))), function () {
          return p.apply(this, arguments)
        })
      }, {
        key: "_loadExtension",
        value: (f = a(regeneratorRuntime.mark((function e(t, n) {
          var i, r, o;
          return regeneratorRuntime.wrap((function (e) {
            for (;;) switch (e.prev = e.next) {
              case 0:
                return i = this.options.extensionOptions, r = i && i[t], o = Object.assign({}, n, r), e.abrupt("return", this.viewer.loadExtension(t, o));
              case 4:
              case "end":
                return e.stop()
            }
          }), e, this)
        }))), function (e, t) {
          return f.apply(this, arguments)
        })
      }, {
        key: "_updateExtensions",
        value: function () {
          var e = this,
            t = {
              globalOffset: this.globalOffset,
              onBookmark: function (t, n) {
                e.onBookmark ? e.onBookmark(t, n) : e.switchView([t]), n.isPerspective && e.startBimWalk()
              },
              clusterfck: this.options.clusterfck,
              clusteringThreshold: 110
            },
            n = {
              enableGuidance: !0,
              onDrop: this._handleDropMe.bind(this)
            },
            i = function (t, n, i) {
              var r = e.extensionLoaded[t];
              !r && i ? e._loadExtension(t, n).catch((function (t) {
                return e._onError(t)
              })) : r && !i && e.viewer.unloadExtension(t), e.extensionLoaded[t] = i
            };
          i(u.Bookmarks, t, this.is3D), i(u.DropMe, n, !this.is3D)
        }
      }, {
        key: "_initForFirstViewable",
        value: function (e) {
          this.is3D !== e.is3D() && (this.resetOnNextModelAdd || this.reset(), this.is3D = e.is3D()), this._updateExtensions(), this._updateRefPoint(e)
        }
      }, {
        key: "_updateBookmarks",
        value: function () {
          var e = this.viewer.getExtension(u.Bookmarks);
          e && e.resetBookmarks(this.bookmarks)
        }
      }, {
        key: "_applyPendingCameraWhenReady",
        value: function () {
          if (this.cameraInitialized) {
            var e = this.pendingCamera;
            this.pendingCamera = null;
            var t = this.viewer.impl.camera;
            e.position && t.position.copy(e.position), e.target && t.target.copy(e.target), e.up && t.up.copy(e.up), e.fov && (t.fov = e.fov), void 0 !== e.isPerspective && (t.isPerspective = e.isPerspective);
            var n = this.globalOffset || this.viewer.model.getData().globalOffset;
            this.is3D && !this.options.ignoreGlobalOffset && (t.position.sub(n), t.target.sub(n)), this.viewer.impl.syncCamera()
          }
        }
      }, {
        key: "_handleDropMe",
        value: function (e, t, n) {
          if (this.onDrop) this.onDrop(e, t, n);
          else {
            var i = function (e) {
              var t = e.impl.model,
                n = t && t.getDocumentNode(),
                i = n && n.getRootNode();
              if (i) {
                var r = i && i.search(l.BubbleNode.MODEL_NODE),
                  o = r.filter((function (e) {
                    return e.parent && "08f99ae5-b8be-4f8d-881b-128675723c10" === e.parent.name()
                  }));
                if (o[0]) return o[0];
                var a = r.filter((function (e) {
                  return "{3D}" == e.name
                }))[0];
                return a || r[0]
              }
            }(this.viewer);
            if (i) {
              var r = {
                position: e,
                target: e.clone().add(t),
                isPerspective: !0
              };
              this.switchView(i), this.setCameraGlobal(r)
            } else console.warn("DropMe handler: Document does not contain a 3D view to switch to")
          }
        }
      }, {
        key: "_startBimWalkWhenReady",
        value: function () {
          if (this.bimWalkStartPending) {
            var e = !this.resetOnNextModelAdd,
              t = this.viewer.getExtension(u.BimWalk),
              n = this.viewer.getExtension(u.FusionOrbit);
            e && t && n && (t.activate(), this.bimWalkStartPending = !1)
          }
        }
      }, {
        key: "_unloadDiffTool",
        value: function (e) {
          this.viewer.getExtension(u.DiffTool) && (e && (this.diffCache.length = 0), this.viewer.unloadExtension(u.DiffTool))
        }
      }, {
        key: "_onProgressUpdate",
        value: function (e) {
          e.model && e.state === l.ProgressState.LOADING && (this.loadersInProgress[e.model.id] = e.percent, this._updateDiffLoadProgress())
        }
      }, {
        key: "_getDiffSupportModels",
        value: function () {
          if (this.diff.supportBubbles) return {
            diff: this.getModel(this.diff.supportBubbles.diff),
            primary: this.getModel(this.diff.supportBubbles.primary)
          }
        }
      }, {
        key: "_diffSupportModelsReady",
        value: function () {
          var e = this._getDiffSupportModels(),
            t = e.diff && e.diff.isLoadDone(),
            n = e.primary && e.primary.isLoadDone();
          return t && n
        }
      }, {
        key: "_updateGhosting",
        value: function () {
          var e = {};
          for (var t in this.diff.enabled && this.diffBubbles && (e = this.diffBubbles.forEach((function (t) {
              return e[t.getModelKey()]
            }))), this.modelItems) {
            var n = this.getModel(t);
            if (n) {
              var i = this.diff.enabled && !e[t];
              i != !!this.modelIsGhosted[t] && (n.setAllVisibility(!i), i ? this.modelIsGhosted[t] = !0 : delete this.modelIsGhosted[t])
            }
          }
        }
      }, {
        key: "getModels",
        value: function (e) {
          var t = this;
          return e.map((function (e) {
            return t.getModel(e)
          }))
        }
      }, {
        key: "_signalDiffLoadProgress",
        value: function (e, t) {
          if (t || e !== this._lastDiffLoadPercent) {
            var n = l.i18n.t("Loading Model for Change Visualization");
            this.diff.progressCallback(e, n), this._lastDiffLoadPercent = e
          }
        }
      }, {
        key: "_updateDiffLoadProgress",
        value: function () {
          var e = this;
          if (this.diffNeedsUpdate && this.diff.enabled && !this.diff.empty && this.diff.progressCallback) {
            var t = this.getModels(this.diff.diffBubbles),
              n = this.getModels(this.diff.primaryBubbles),
              i = t.concat(n),
              r = this._getDiffSupportModels();
            r && i.push(r.diff, r.primary);
            var o = i.filter(Boolean).length;
            if (o < i.length) {
              var a = Math.floor(10 * o / i.length);
              this._signalDiffLoadProgress(a)
            } else if (this.is3D) {
              var s = i.reduce((function (e, t) {
                  return e + t.getData().fragsLoadedNoGeom
                }), 0),
                l = i.reduce((function (e, t) {
                  return e + t.getData().metadata.stats.num_fragments
                }), 0),
                c = 10 + Math.floor(90 * s / l);
              this._signalDiffLoadProgress(c)
            } else {
              var u = i.reduce((function (t, n) {
                  return t + (0 | e.loadersInProgress[n.id])
                }), 0),
                h = 100 * i.length,
                d = 10 + Math.floor(90 * u / h);
              this._signalDiffLoadProgress(d)
            }
          }
        }
      }, {
        key: "_updateDiff",
        value: function () {
          if (this.diffNeedsUpdate)
            if (this._updateGhosting(), this._updateDiffLoadProgress(), this.diff.enabled) {
              for (var e = this.getModels(this.diff.diffBubbles), t = this.getModels(this.diff.primaryBubbles), n = 0; n < e.length; n++) {
                var i = e[n],
                  r = t[n],
                  o = i instanceof l.Model && (i.isOTG() || i.isLoadDone()),
                  a = r instanceof l.Model && (r.isOTG() || r.isLoadDone());
                if (!o || !a) return;
                if (!i.getPropertyDb() || !r.getPropertyDb()) return
              }
              var s = void 0;
              if (this.diff.supportBubbles) {
                if (!this._diffSupportModelsReady()) return;
                s = this._getDiffSupportModels()
              }
              var c = performance.now() - this.diffStartTime;
              console.log("Time for loading diff models: ", c), this._setDiffModels(e, t, s)
            } else this._unloadDiffTool()
        }
      }, {
        key: "_setDiffModels",
        value: function (e, t, n) {
          var i = this;
          if (this.diffNeedsUpdate = !1, t.length) {
            var r = this.viewer.getExtension(u.DiffTool);
            if (r) r.replaceModels(e, t, n);
            else {
              var o = {
                diffModels: e,
                primaryModels: t,
                supportModels: n,
                diffadp: !1,
                availableDiffModes: ["overlay", "sidebyside"],
                diffMode: "overlay",
                versionA: this.diff.primaryBubbleLabel,
                versionB: this.diff.diffBubbleLabel,
                refNames: this.diff.refNames,
                mimeType: "application/vnd.autodesk.revit",
                hotReload: !0,
                diffCache: this.diffCache,
                useSplitScreenExtension: !0,
                showDetailsSection: !0,
                progress: function (e, t) {
                  i.diff.progressCallback && (t !== Autodesk.DiffTool.DIFFTOOL_PROGRESS_STATES.LoadingPropDb ? (100 === e && i.onDiffDone && i.onDiffDone(), i.diff.progressCallback(e, l.i18n.t("Computing change visualization"))) : i.diff.progressCallback(e, l.i18n.t("Loading element properties")))
                },
                excludeFromDiff: function (e, t) {
                  return i.levelsExtension && !i.levelsExtension.floorSelector.isVisible(e, t)
                },
                setNodesOff: function (e) {
                  var t = i.levelsExtension;
                  t && t.floorSelector._floorSelectorFilter.reApplyFilter(e)
                },
                hideModeSwitchButton: !0
              };
              this._loadExtension(u.DiffTool, o).catch((function (e) {
                return i._onError(e)
              }))
            }
          } else this._unloadDiffTool()
        }
      }]) && s(t.prototype, n), o && s(t, o), e
    }();
  y.ExtNames = u
}, function (e, t, n) {
  "use strict";
  n.r(t), n.d(t, "CameraLS", (function () {
    return u
  }));
  var i = n(12);

  function r(e, t) {
    if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
  }

  function o(e, t) {
    for (var n = 0; n < t.length; n++) {
      var i = t[n];
      i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(e, i.key, i)
    }
  }

  function a(e, t, n) {
    return t && o(e.prototype, t), n && o(e, n), e
  }
  var s = function (e) {
      return isFinite(e.x) && isFinite(e.y) && isFinite(e.z)
    },
    l = function (e) {
      var t = e.isPerspective || isFinite(e.orthoScale);
      return s(e.position) && s(e.target) && s(e.up) && t
    },
    c = function () {
      function e() {
        r(this, e), this.cacheObj = {}
      }
      return a(e, [{
        key: "setItem",
        value: function (e, t) {
          this.cacheObj[e] = t
        }
      }, {
        key: "getItem",
        value: function (e) {
          return this.cacheObj[e]
        }
      }]), e
    }(),
    u = function () {
      function e(t) {
        var n = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {
          useLocalStorage: !0
        };
        r(this, e), this.aggregatedView = t, this.options = n, this.key = void 0, this.options.useLocalStorage ? this.cache = Autodesk.Viewing.Private.LocalStorage : this.cache = new c, this.unloadCb = this.saveCamera.bind(this), this.addWindowEventListener("beforeunload", this.unloadCb)
      }
      return a(e, [{
        key: "destroy",
        value: function () {
          this.unsetKey(), this.removeWindowEventListener("beforeunload", this.unloadCb)
        }
      }, {
        key: "setKey",
        value: function (e) {
          this.key = e
        }
      }, {
        key: "unsetKey",
        value: function () {
          this.key = void 0
        }
      }, {
        key: "saveCamera",
        value: function () {
          if (this.aggregatedView.cameraInitialized && this.key) {
            var e = this.aggregatedView.viewer.impl.camera;
            if (l(e)) {
              var t = this.aggregatedView.isBimWalkActive(),
                n = this.aggregatedView.is3D ? this.aggregatedView.globalOffset : void 0;
              this.saveStartCamera(this.key, this.aggregatedView.viewer.impl.camera, t, n)
            }
          }
        }
      }, {
        key: "saveStartCamera",
        value: function (e, t, n, i) {
          var r = JSON.stringify({
            offset: i,
            position: t.position,
            target: t.target,
            up: t.up,
            orthoScale: t.orthoScale,
            isPerspective: t.isPerspective,
            fov: t.fov,
            startBimWalk: n
          });
          this.cache.setItem(e, r)
        }
      }, {
        key: "loadCamera",
        value: function () {
          if (!this.key) return !1;
          var e = void 0;
          try {
            var t = this.cache.getItem(this.key);
            e = JSON.parse(t)
          } catch (e) {}
          if (!(e && e.position && e.target && e.up)) return !1;
          var n = function (e) {
              return new THREE.Vector3(parseFloat(e.x), parseFloat(e.y), parseFloat(e.z))
            },
            i = {
              position: n(e.position),
              target: n(e.target),
              up: n(e.up),
              isPerspective: Boolean(e.isPerspective),
              fov: parseFloat(e.fov)
            };
          if (e.orthoScale && (i.orthoScale = parseFloat(e.orthoScale)), !l(i)) return !1;
          var r = e.offset ? n(e.offset) : void 0;
          if (r) {
            if (!s(r)) return;
            i.position.add(r), i.target.add(r)
          }
          this.aggregatedView.setCameraGlobal(i), e.startBimWalk && this.aggregatedView.startBimWalk()
        }
      }]), e
    }();
  i.GlobalManagerMixin.call(u.prototype)
}, function (e) {
  e.exports = JSON.parse('{"globals":{"dimension":{},"factor":{"factor":1},"factor.derived":{"parentFactors":{}},"quantity":{"units":[]},"symbol":{"doc":"http://docs.adskunits.apiary.io/#introduction/definitions/unit-symbols","unit":{"typeid":"unit","description":"Measurement unit this symbol applies to."}},"symbol.placement":{"Prefix":{"value":0},"Suffix":1},"symbol.prefixOrSuffix":{"text":{"typeid":"String","description":"Text to annotate the value."},"placement":{"typeid":"symbol.placement","description":"Placement of the annotation text."},"space":{"typeid":"Bool","description":"Specifies whether the annotation should be separated from the value by a space."}},"system":{"Metric":{"value":0,"description":"Metric system of measurement units."},"Imperial":1},"unit":{"doc":"http://docs.adskunits.apiary.io/#introduction/definitions/measurement-units","unitSystem":{"typeid":"system"}},"unit.absolute":{"parentUnit":{"typeid":"unit.relative","description":"Relative unit from which this absolute unit is derived."},"offset":{"typeid":"Float64","value":0,"description":"An offset used to position an absolute scale of measurement on the number line."}},"unit.derived":{"parentFactors":{},"parentUnits":{}},"unit.primitive":{},"unit.primitive.dimensional":{"dimension":{"typeid":"dimension"}},"unit.relative":{}},"factor":{"nineFifths":{"factor":1.8},"pi":{"factor":3.14159265358979},"atto":{"parentFactors":{"ten":-18}},"centi":{"parentFactors":{"ten":-2}},"deci":{"parentFactors":{"ten":-1}},"deka":{"parentFactors":{"ten":1}},"exa":{"parentFactors":{"ten":18}},"femto":{"parentFactors":{"ten":-15}},"giga":{"parentFactors":{"ten":9}},"hecto":{"parentFactors":{"ten":2}},"kilo":{"parentFactors":{"ten":3}},"mega":{"parentFactors":{"ten":6}},"micro":{"parentFactors":{"ten":-6}},"milli":{"parentFactors":{"ten":-3}},"nano":{"parentFactors":{"ten":-9}},"peta":{"parentFactors":{"ten":15}},"pico":{"parentFactors":{"ten":-12}},"tera":{"parentFactors":{"ten":12}},"yocto":{"parentFactors":{"ten":-24}},"yotta":{"parentFactors":{"ten":24}},"zepto":{"parentFactors":{"ten":-21}},"zetta":{"parentFactors":{"ten":21}},"ten":{"factor":10},"threeHundredSixty":{"factor":360},"threeThousandNineHundredThirtySeven":{"factor":3937},"twelve":{"factor":12}},"dimension":{"currency":{},"electricCurrent":{},"length":{},"luminousIntensity":{},"mass":{},"temperature":{},"time":{}},"unit":{"1ToRatio":{"unitSystem":"Metric","parentUnits":{"ratioTo1":-1},"symbols":{"1Colon":{"text":"1:","placement":"Prefix","space":{"value":false}}}},"acres":{"unitSystem":"Imperial","factor":4840,"parentUnits":{"squareYards":1},"symbols":{"acres":{"text":"acres","placement":"Suffix","space":true}}},"ampereHours":{"unitSystem":"Metric","parentUnits":{"amperes":1,"hours":1},"symbols":{"aDashH":{"text":"A-h","placement":"Suffix","space":true}}},"ampereSeconds":{"unitSystem":"Metric","parentUnits":{"amperes":1,"seconds":1},"symbols":{"aDashS":{"text":"A-s","placement":"Suffix","space":true}}},"amperes":{"unitSystem":"Metric","dimension":"electricCurrent","symbols":{"ampere":{"text":"A","placement":"Suffix","space":true}}},"atmospheres":{"unitSystem":"Imperial","factor":101325,"parentUnits":{"pascals":1},"symbols":{"atm":{"text":"atm","placement":"Suffix","space":true}}},"bars":{"unitSystem":"Metric","factor":100,"parentUnits":{"kilopascals":1},"symbols":{"bar":{"text":"bar","placement":"Suffix","space":true}}},"britishThermalUnits":{"unitSystem":"Imperial","factor":1055.05585262,"parentUnits":{"joules":1},"symbols":{"btu":{"text":"Btu","placement":"Suffix","space":true}}},"britishThermalUnitsPerDegreeFahrenheit":{"unitSystem":"Imperial","parentUnits":{"britishThermalUnits":1,"fahrenheitInterval":-1},"symbols":{"btuPerDegreeF":{"text":"BTU/°F","placement":"Suffix","space":true}}},"britishThermalUnitsPerHour":{"unitSystem":"Imperial","parentUnits":{"britishThermalUnits":1,"hours":-1},"symbols":{"btuPerH":{"text":"Btu/h","placement":"Suffix","space":true}}},"britishThermalUnitsPerHourCubicFoot":{"unitSystem":"Imperial","parentUnits":{"britishThermalUnitsPerHour":1,"cubicFeet":-1},"symbols":{"btuPerHFtSup3":{"text":"Btu/(h·ft³)","placement":"Suffix","space":true}}},"britishThermalUnitsPerHourFootDegreeFahrenheit":{"unitSystem":"Imperial","parentUnits":{"britishThermalUnitsPerHour":1,"feet":-1,"fahrenheitInterval":-1},"symbols":{"btuPerHFtDegreeF":{"text":"BTU/(h·ft·°F)","placement":"Suffix","space":true}}},"britishThermalUnitsPerHourSquareFoot":{"unitSystem":"Imperial","parentUnits":{"britishThermalUnitsPerHour":1,"squareFeet":-1},"symbols":{"btuPerHFtSup2":{"text":"Btu/(h·ft²)","placement":"Suffix","space":true}}},"britishThermalUnitsPerHourSquareFootDegreeFahrenheit":{"unitSystem":"Imperial","parentUnits":{"britishThermalUnitsPerHourSquareFoot":1,"fahrenheitInterval":-1},"symbols":{"btuPerHFtSup2DegreeF":{"text":"BTU/(h·ft²·°F)","placement":"Suffix","space":true}}},"britishThermalUnitsPerPound":{"unitSystem":"Imperial","parentUnits":{"britishThermalUnits":1,"poundsMass":-1},"symbols":{"btuPerLb":{"text":"BTU/lb","placement":"Suffix","space":true}}},"britishThermalUnitsPerPoundDegreeFahrenheit":{"unitSystem":"Imperial","parentUnits":{"britishThermalUnitsPerPound":1,"fahrenheitInterval":-1},"symbols":{"btuPerLbDegreeF":{"text":"BTU/(lb·°F)","placement":"Suffix","space":true}}},"britishThermalUnitsPerSecond":{"unitSystem":"Imperial","parentUnits":{"britishThermalUnits":1,"seconds":-1},"symbols":{"btuPerS":{"text":"Btu/s","placement":"Suffix","space":true}}},"calories":{"unitSystem":"Metric","factor":4.1868,"parentUnits":{"joules":1},"symbols":{"cal":{"text":"cal","placement":"Suffix","space":true}}},"caloriesPerSecond":{"unitSystem":"Metric","parentUnits":{"calories":1,"seconds":-1},"symbols":{"calPerS":{"text":"cal/s","placement":"Suffix","space":true}}},"candelas":{"unitSystem":"Metric","dimension":"luminousIntensity","symbols":{"cd":{"text":"cd","placement":"Suffix","space":true}}},"candelasPerSquareFoot":{"unitSystem":"Imperial","parentUnits":{"candelas":1,"squareFeet":-1},"symbols":{"cdPerFtSup2":{"text":"cd/ft²","placement":"Suffix","space":true}}},"candelasPerSquareMeter":{"unitSystem":"Metric","parentUnits":{"candelas":1,"squareMeters":-1},"symbols":{"cdPerMSup2":{"text":"cd/m²","placement":"Suffix","space":true}}},"celsius":{"unitSystem":"Metric","parentUnit":"celsiusInterval","offset":273.15,"symbols":{"degreeC":{"text":"°C","placement":"Suffix","space":true}}},"celsiusInterval":{"unitSystem":"Metric","parentUnits":{"kelvinInterval":1},"symbols":{"degreeCInterval":{"text":"°C","placement":"Suffix","space":true},"deltaDegreeC":{"text":"delta°C","placement":"Suffix","space":true}}},"centimeters":{"unitSystem":"Metric","parentFactors":{"centi":1},"parentUnits":{"meters":1},"symbols":{"cm":{"text":"cm","placement":"Suffix","space":true}}},"centimetersPerMinute":{"unitSystem":"Metric","parentUnits":{"centimeters":1,"minutes":-1},"symbols":{"cmPerMin":{"text":"cm/min","placement":"Suffix","space":true}}},"centimetersToTheFourthPower":{"unitSystem":"Metric","parentUnits":{"centimeters":4},"symbols":{"cmSup4":{"text":"cm⁴","placement":"Suffix","space":true}}},"centimetersToTheSixthPower":{"unitSystem":"Metric","parentUnits":{"centimeters":6},"symbols":{"cmSup6":{"text":"cm⁶","placement":"Suffix","space":true}}},"centipoises":{"unitSystem":"Metric","parentFactors":{"centi":1},"parentUnits":{"poises":1},"symbols":{"cP":{"text":"cP","placement":"Suffix","space":true}}},"circularMils":{"unitSystem":"Imperial","factor":0.25,"parentFactors":{"pi":1},"parentUnits":{"squareMils":1},"symbols":{"cMil":{"text":"cmil","placement":"Suffix","space":true}}},"coulombs":{"unitSystem":"Metric","parentUnits":{"ampereSeconds":1},"symbols":{"coulomb":{"text":"C","placement":"Suffix","space":true}}},"cubicCentimeters":{"unitSystem":"Metric","parentUnits":{"centimeters":3},"symbols":{"cmCaret3":{"text":"cm^3","placement":"Suffix","space":true},"cmSup3":{"text":"cm³","placement":"Suffix","space":true}}},"cubicFeet":{"unitSystem":"Imperial","parentUnits":{"feet":3},"symbols":{"cf":{"text":"CF","placement":"Suffix","space":true},"ftCaret3":{"text":"ft^3","placement":"Suffix","space":true},"ftSup3":{"text":"ft³","placement":"Suffix","space":true}}},"cubicFeetPerHour":{"unitSystem":"Imperial","parentUnits":{"cubicFeet":1,"hours":-1},"symbols":{"cfh":{"text":"CFH","placement":"Suffix","space":true},"ftSup3PerH":{"text":"ft³/h","placement":"Suffix","space":true}}},"cubicFeetPerKip":{"unitSystem":"Imperial","parentUnits":{"cubicFeet":1,"kips":-1},"symbols":{"ftSup3PerKip":{"text":"ft³/kip","placement":"Suffix","space":true}}},"cubicFeetPerMinute":{"unitSystem":"Imperial","parentUnits":{"cubicFeet":1,"minutes":-1},"symbols":{"cfm":{"text":"CFM","placement":"Suffix","space":true},"ftSup3PerMin":{"text":"ft³/min","placement":"Suffix","space":true}}},"cubicFeetPerMinuteCubicFoot":{"unitSystem":"Imperial","parentUnits":{"cubicFeetPerMinute":1,"cubicFeet":-1},"symbols":{"cfmPerCf":{"text":"CFM/CF","placement":"Suffix","space":true},"cfmPerFtSup3":{"text":"CFM/ft³","placement":"Suffix","space":true}}},"cubicFeetPerMinutePerBritishThermalUnitPerHour":{"unitSystem":"Imperial","parentUnits":{"cubicFeetPerMinute":1,"britishThermalUnitsPerHour":-1},"symbols":{"ftSup3HPerMinBtu":{"text":"ft³·h/(min·Btu)","placement":"Suffix","space":true}}},"cubicFeetPerMinuteSquareFoot":{"unitSystem":"Imperial","parentUnits":{"cubicFeetPerMinute":1,"squareFeet":-1},"symbols":{"cfmPerFtSup2":{"text":"CFM/ft²","placement":"Suffix","space":true},"cfmPerSf":{"text":"CFM/SF","placement":"Suffix","space":true}}},"cubicFeetPerMinuteTonOfRefrigeration":{"unitSystem":"Imperial","parentUnits":{"cubicFeetPerMinute":1,"tonsOfRefrigeration":-1},"symbols":{"cfmPerTon":{"text":"CFM/ton","placement":"Suffix","space":true}}},"cubicFeetPerPoundMass":{"unitSystem":"Imperial","parentUnits":{"cubicFeet":1,"poundsMass":-1},"symbols":{"ftSup3PerLbMass":{"text":"ft³/lb","placement":"Suffix","space":true}}},"cubicInches":{"unitSystem":"Imperial","parentUnits":{"inches":3},"symbols":{"inCaret3":{"text":"in^3","placement":"Suffix","space":true},"inSup3":{"text":"in³","placement":"Suffix","space":true}}},"cubicMeters":{"unitSystem":"Metric","parentUnits":{"meters":3},"symbols":{"mCaret3":{"text":"m^3","placement":"Suffix","space":true},"mSup3":{"text":"m³","placement":"Suffix","space":true}}},"cubicMetersPerHour":{"unitSystem":"Metric","parentUnits":{"cubicMeters":1,"hours":-1},"symbols":{"cmh":{"text":"CMH","placement":"Suffix","space":true},"mSup3PerH":{"text":"m³/h","placement":"Suffix","space":true}}},"cubicMetersPerKilogram":{"unitSystem":"Metric","parentUnits":{"cubicMeters":1,"kilograms":-1},"symbols":{"mSup3PerKg":{"text":"m³/kg","placement":"Suffix","space":true}}},"cubicMetersPerKilonewton":{"unitSystem":"Metric","parentUnits":{"cubicMeters":1,"kilonewtons":-1},"symbols":{"mSup3PerKN":{"text":"m³/kN","placement":"Suffix","space":true}}},"cubicMetersPerSecond":{"unitSystem":"Metric","parentUnits":{"cubicMeters":1,"seconds":-1},"symbols":{"cms":{"text":"CMS","placement":"Suffix","space":true},"mSup3PerS":{"text":"m³/s","placement":"Suffix","space":true}}},"cubicMetersPerWattSecond":{"unitSystem":"Metric","parentUnits":{"cubicMeters":1,"watts":-1,"seconds":-1},"symbols":{"mSup3PerWS":{"text":"m³/(W·s)","placement":"Suffix","space":true}}},"cubicMillimeters":{"unitSystem":"Metric","parentUnits":{"millimeters":3},"symbols":{"mmCaret3":{"text":"mm^3","placement":"Suffix","space":true},"mmSup3":{"text":"mm³","placement":"Suffix","space":true}}},"cubicYards":{"unitSystem":"Imperial","parentUnits":{"yards":3},"symbols":{"cy":{"text":"CY","placement":"Suffix","space":true}}},"currency":{"unitSystem":"Imperial","dimension":"currency","symbols":{"baht":{"description":"Baht is the official currency of Thailand.","text":"฿","placement":"Prefix","space":{"value":false}},"chineseHongKongDollar":{"description":"Hong Kong Dollar is the official currency of Hong Kong..","text":"HK$","placement":"Prefix","space":{"value":false}},"dong":{"description":"Dong is the official currency of Vietnam.","text":"₫","placement":"Suffix","space":{"value":false}},"euroPrefix":{"text":"€","placement":"Prefix","space":{"value":false}},"euroSuffix":{"text":"€","placement":"Suffix","space":{"value":false}},"krone":{"description":"Krone is the official currency of Denmark, Greenland, and the Faroe Islands.","text":"kr","placement":"Suffix","space":true},"shekel":{"description":"Shekel is the official currency of Israel.","text":"₪","placement":"Prefix","space":{"value":false}},"ukPound":{"text":"£","placement":"Prefix","space":{"value":false}},"usDollar":{"text":"$","placement":"Prefix","space":{"value":false}},"won":{"description":"Won is the official currency of South Korea.","text":"₩","placement":"Prefix","space":{"value":false}},"yen":{"text":"¥","placement":"Prefix","space":{"value":false}}}},"currencyPerBritishThermalUnit":{"unitSystem":"Imperial","parentUnits":{"currency":1,"britishThermalUnits":-1},"symbols":{"dollarPerBtu":{"text":"$/Btu","placement":"Suffix","space":true}}},"currencyPerBritishThermalUnitPerHour":{"unitSystem":"Imperial","parentUnits":{"currency":1,"britishThermalUnitsPerHour":-1},"symbols":{"dollarHPerBtu":{"text":"$·h/Btu","placement":"Suffix","space":true}}},"currencyPerSquareFoot":{"unitSystem":"Imperial","parentUnits":{"currency":1,"squareFeet":-1},"symbols":{"dollarPerFtSup2":{"text":"$/ft²","placement":"Prefix","space":{"value":false}}}},"currencyPerSquareMeter":{"unitSystem":"Metric","parentUnits":{"currency":1,"squareMeters":-1},"symbols":{"dollarPerMSup2":{"text":"$/m²","placement":"Prefix","space":{"value":false}}}},"currencyPerWatt":{"unitSystem":"Metric","parentUnits":{"currency":1,"watts":-1},"symbols":{"dollarPerW":{"text":"$/W","placement":"Suffix","space":true}}},"currencyPerWattHour":{"unitSystem":"Metric","parentUnits":{"currency":1,"watts":-1,"hours":-1},"symbols":{"dollarPerWH":{"text":"$/(W·h)","placement":"Suffix","space":true}}},"cyclesPerSecond":{"unitSystem":"Metric","parentUnits":{"seconds":-1},"symbols":{"cps":{"text":"cps","placement":"Suffix","space":true}}},"decimeters":{"unitSystem":"Metric","parentFactors":{"deci":1},"parentUnits":{"meters":1},"symbols":{"dm":{"text":"dm","placement":"Suffix","space":true}}},"degrees":{"unitSystem":"Metric","parentFactors":{"threeHundredSixty":-1},"parentUnits":{"turns":1},"symbols":{"degree":{"text":"°","placement":"Suffix","space":{"value":false}},"degreesMinutesSeconds":{"inherits":"symbol"},"slopeDegree":{"text":"°","placement":"Suffix","space":{"value":false}}}},"dekanewtonMeters":{"unitSystem":"Metric","parentUnits":{"dekanewtons":1,"meters":1},"symbols":{"daNDashM":{"text":"daN-m","placement":"Suffix","space":true}}},"dekanewtonMetersPerMeter":{"unitSystem":"Metric","parentUnits":{"dekanewtonMeters":1,"meters":-1},"symbols":{"daNDashMPerM":{"text":"daN-m/m","placement":"Suffix","space":true}}},"dekanewtons":{"unitSystem":"Metric","parentFactors":{"deka":1},"parentUnits":{"newtons":1},"symbols":{"daN":{"text":"daN","placement":"Suffix","space":true}}},"dekanewtonsPerMeter":{"unitSystem":"Metric","parentUnits":{"dekanewtons":1,"meters":-1},"symbols":{"daNPerM":{"text":"daN/m","placement":"Suffix","space":true}}},"dekanewtonsPerSquareMeter":{"unitSystem":"Metric","parentUnits":{"dekanewtons":1,"squareMeters":-1},"symbols":{"daNPerMSup2":{"text":"daN/m²","placement":"Suffix","space":true}}},"dynes":{"unitSystem":"Metric","factor":10,"parentFactors":{"micro":1},"parentUnits":{"newtons":1},"symbols":{"dyn":{"text":"dyn","placement":"Suffix","space":true}}},"ergs":{"unitSystem":"Metric","parentFactors":{"ten":-7},"parentUnits":{"joules":1},"symbols":{"erg":{"text":"erg","placement":"Suffix","space":true}}},"fahrenheit":{"unitSystem":"Imperial","parentUnit":"fahrenheitInterval","offset":459.67,"symbols":{"degreeF":{"text":"°F","placement":"Suffix","space":true}}},"fahrenheitInterval":{"unitSystem":"Imperial","parentUnits":{"rankineInterval":1},"symbols":{"degreeFInterval":{"text":"°F","placement":"Suffix","space":true},"deltaDegreeF":{"text":"delta°F","placement":"Suffix","space":true}}},"farads":{"unitSystem":"Metric","parentUnits":{"coulombs":1,"volts":-1},"symbols":{"farad":{"text":"F","placement":"Suffix","space":true}}},"feet":{"unitSystem":"Imperial","factor":12,"parentUnits":{"inches":1},"symbols":{"feetAndInches":{"inherits":"symbol"},"footSingleQuote":{"text":"\'","placement":"Suffix","space":{"value":false}},"ft":{"text":"ft","placement":"Suffix","space":true},"lf":{"text":"LF","placement":"Suffix","space":true}}},"feetOfWater39.2DegreesFahrenheit":{"unitSystem":"Imperial","factor":2988.98,"parentUnits":{"pascals":1},"symbols":{"feetOfWater":{"text":"Feet","placement":"Suffix","space":true},"ftH2O":{"text":"ftH2O","placement":"Suffix","space":true},"ftOfWater":{"text":"FT","placement":"Suffix","space":true}}},"feetOfWater39.2DegreesFahrenheitPer100Feet":{"unitSystem":"Imperial","factor":0.01,"parentUnits":{"feetOfWater39.2DegreesFahrenheit":1,"feet":-1},"symbols":{"feetOfWaterPer100ft":{"text":"Feet/100ft","placement":"Suffix","space":true},"ftH2OPer100ft":{"text":"ftH2O/100ft","placement":"Suffix","space":true},"ftOfWaterPer100ft":{"text":"FT/100ft","placement":"Suffix","space":true}}},"feetPerKip":{"unitSystem":"Imperial","parentUnits":{"feet":1,"kips":-1},"symbols":{"ftPerKip":{"text":"ft/kip","placement":"Suffix","space":true}}},"feetPerKipFoot":{"unitSystem":"Imperial","parentUnits":{"feet":1,"kipFeet":-1},"symbols":{"ftPerKipDashFt":{"text":"ft/kip-ft","placement":"Suffix","space":true}}},"feetPerMinute":{"unitSystem":"Imperial","parentUnits":{"feet":1,"minutes":-1},"symbols":{"fpm":{"text":"FPM","placement":"Suffix","space":true},"ftPerMin":{"text":"ft/min","placement":"Suffix","space":true}}},"feetPerSecond":{"unitSystem":"Imperial","parentUnits":{"feet":1,"seconds":-1},"symbols":{"fps":{"text":"FPS","placement":"Suffix","space":true},"ftPerS":{"text":"ft/s","placement":"Suffix","space":true}}},"feetPerSecondSquared":{"unitSystem":"Imperial","parentUnits":{"feetPerSecond":1,"seconds":-1},"symbols":{"ftPerSSup2":{"text":"ft/s²","placement":"Suffix","space":true}}},"feetToTheFourthPower":{"unitSystem":"Imperial","parentUnits":{"feet":4},"symbols":{"ftSup4":{"text":"ft⁴","placement":"Suffix","space":true}}},"feetToTheSixthPower":{"unitSystem":"Imperial","parentUnits":{"feet":6},"symbols":{"ftSup6":{"text":"ft⁶","placement":"Suffix","space":true}}},"fixed":{"unitSystem":"Metric","parentUnits":{"ratioTo1":1}},"footcandles":{"unitSystem":"Imperial","parentUnits":{"lumens":1,"squareFeet":-1},"symbols":{"fc":{"text":"fc","placement":"Suffix","space":true},"ftc":{"text":"Ftc","placement":"Suffix","space":true}}},"footlamberts":{"unitSystem":"Imperial","parentFactors":{"pi":-1},"parentUnits":{"candelas":1,"squareFeet":-1},"symbols":{"fL":{"text":"fL","placement":"Suffix","space":true},"flLowercase":{"text":"fl","placement":"Suffix","space":true},"ftL":{"text":"ftL","placement":"Suffix","space":true}}},"gammas":{"unitSystem":"Metric","parentFactors":{"nano":1},"parentUnits":{"teslas":1},"symbols":{"gamma":{"text":"gamma","placement":"Suffix","space":true}}},"gauss":{"unitSystem":"Metric","parentFactors":{"ten":-4},"parentUnits":{"teslas":1},"symbols":{"gs":{"text":"Gs","placement":"Suffix","space":true}}},"general":{"unitSystem":"Metric","parentUnits":{"ratioTo1":1}},"gradians":{"unitSystem":"Metric","factor":0.9,"parentUnits":{"degrees":1},"symbols":{"grad":{"text":"grad","placement":"Suffix","space":true}}},"grains":{"unitSystem":"Imperial","factor":64.79891,"parentUnits":{"milligrams":1},"symbols":{"gr":{"text":"gr","placement":"Suffix","space":true}}},"grainsPerHourSquareFootInchMercury":{"unitSystem":"Imperial","parentUnits":{"grains":1,"hours":-1,"squareFeet":-1,"inchesOfMercury32DegreesFahrenheit":-1},"symbols":{"grPerHFtSup2InHg":{"text":"gr/(h·ft²·inHg)","placement":"Suffix","space":true}}},"grams":{"unitSystem":"Metric","factor":0.001,"parentUnits":{"kilograms":1},"symbols":{"gram":{"text":"g","placement":"Suffix","space":true}}},"hectares":{"unitSystem":"Metric","parentUnits":{"squareHectometers":1},"symbols":{"hectare":{"text":"hectare","placement":"Suffix","space":true}}},"hectometers":{"unitSystem":"Metric","parentFactors":{"hecto":1},"parentUnits":{"meters":1},"symbols":{"hm":{"text":"hm","placement":"Suffix","space":true}}},"henries":{"unitSystem":"Metric","parentUnits":{"ohms":1,"seconds":1},"symbols":{"henry":{"text":"H","placement":"Suffix","space":true}}},"hertz":{"unitSystem":"Metric","parentUnits":{"cyclesPerSecond":1},"symbols":{"hz":{"text":"Hz","placement":"Suffix","space":true}}},"horsepower":{"unitSystem":"Imperial","factor":33000,"parentUnits":{"poundForceFeet":1,"minutes":-1},"symbols":{"hp":{"text":"hp","placement":"Suffix","space":true}}},"hourSquareFootDegreesFahrenheitPerBritishThermalUnit":{"unitSystem":"Imperial","parentUnits":{"hours":1,"squareFeet":1,"fahrenheitInterval":1,"britishThermalUnits":-1},"symbols":{"hFtSup2DegreeFPerBtu":{"text":"(h·ft²·°F)/BTU","placement":"Suffix","space":true}}},"hours":{"unitSystem":"Metric","factor":60,"parentUnits":{"minutes":1},"symbols":{"hour":{"text":"h","placement":"Suffix","space":true}}},"inches":{"unitSystem":"Imperial","factor":2.54,"parentUnits":{"centimeters":1},"symbols":{"in":{"text":"in","placement":"Suffix","space":true},"inchDoubleQuote":{"text":"\\"","placement":"Suffix","space":{"value":false}}}},"inchesOfMercury32DegreesFahrenheit":{"unitSystem":"Imperial","factor":3386.389,"parentUnits":{"pascals":1},"symbols":{"inHg":{"text":"inHg","placement":"Suffix","space":true}}},"inchesOfWater60DegreesFahrenheit":{"unitSystem":"Imperial","factor":248.84,"parentUnits":{"pascals":1},"symbols":{"inDashWg":{"text":"in-wg","placement":"Suffix","space":true}}},"inchesOfWater60DegreesFahrenheitPer100Feet":{"unitSystem":"Imperial","factor":0.01,"parentUnits":{"inchesOfWater60DegreesFahrenheit":1,"feet":-1},"symbols":{"inDashWgPer100ft":{"text":"in-wg/100ft","placement":"Suffix","space":true}}},"inchesPerSecond":{"unitSystem":"Imperial","parentUnits":{"inches":1,"seconds":-1},"symbols":{"inPerS":{"text":"in/s","placement":"Suffix","space":true}}},"inchesPerSecondSquared":{"unitSystem":"Imperial","parentUnits":{"inchesPerSecond":1,"seconds":-1},"symbols":{"inPerSSup2":{"text":"in/s²","placement":"Suffix","space":true}}},"inchesToTheFourthPower":{"unitSystem":"Imperial","parentUnits":{"inches":4},"symbols":{"inSup4":{"text":"in⁴","placement":"Suffix","space":true}}},"inchesToTheSixthPower":{"unitSystem":"Imperial","parentUnits":{"inches":6},"symbols":{"inSup6":{"text":"in⁶","placement":"Suffix","space":true}}},"inverseDegreesCelsius":{"unitSystem":"Metric","parentUnits":{"celsiusInterval":-1},"symbols":{"invDegreeC":{"text":"1/°C","placement":"Suffix","space":true}}},"inverseDegreesFahrenheit":{"unitSystem":"Imperial","parentUnits":{"fahrenheitInterval":-1},"symbols":{"invDegreeF":{"text":"1/°F","placement":"Suffix","space":true}}},"inverseKilonewtons":{"unitSystem":"Metric","parentUnits":{"kilonewtons":-1},"symbols":{"invKN":{"text":"1/kN","placement":"Suffix","space":true}}},"inverseKips":{"unitSystem":"Imperial","parentUnits":{"kips":-1},"symbols":{"invKip":{"text":"1/kip","placement":"Suffix","space":true}}},"joules":{"unitSystem":"Metric","parentUnits":{"newtonMeters":1},"symbols":{"joule":{"text":"J","placement":"Suffix","space":true}}},"joulesPerGram":{"unitSystem":"Metric","parentUnits":{"joules":1,"grams":-1},"symbols":{"jPerG":{"text":"J/g","placement":"Suffix","space":true}}},"joulesPerGramDegreeCelsius":{"unitSystem":"Metric","parentUnits":{"joulesPerGram":1,"celsiusInterval":-1},"symbols":{"jPerGDegreeC":{"text":"J/(g·°C)","placement":"Suffix","space":true}}},"joulesPerKelvin":{"unitSystem":"Metric","parentUnits":{"joules":1,"kelvinInterval":-1},"symbols":{"jPerK":{"text":"J/K","placement":"Suffix","space":true}}},"joulesPerKilogram":{"unitSystem":"Metric","parentUnits":{"joules":1,"kilograms":-1},"symbols":{"jPerKg":{"text":"J/kg","placement":"Suffix","space":true}}},"joulesPerKilogramDegreeCelsius":{"unitSystem":"Metric","parentUnits":{"joulesPerKilogram":1,"celsiusInterval":-1},"symbols":{"jPerKgDegreeC":{"text":"J/(kg·°C)","placement":"Suffix","space":true}}},"kelvin":{"unitSystem":"Metric","parentUnit":"kelvinInterval","symbols":{"kelvin":{"text":"K","placement":"Suffix","space":true}}},"kelvinInterval":{"unitSystem":"Metric","dimension":"temperature","symbols":{"deltaK":{"text":"deltaK","placement":"Suffix","space":true},"kelvinInterval":{"text":"K","placement":"Suffix","space":true}}},"kiloamperes":{"unitSystem":"Metric","parentFactors":{"kilo":1},"parentUnits":{"amperes":1},"symbols":{"kA":{"text":"kA","placement":"Suffix","space":true}}},"kilocalories":{"unitSystem":"Metric","parentFactors":{"kilo":1},"parentUnits":{"calories":1},"symbols":{"kcal":{"text":"kcal","placement":"Suffix","space":true}}},"kilocaloriesPerSecond":{"unitSystem":"Metric","parentUnits":{"kilocalories":1,"seconds":-1},"symbols":{"kcalPerS":{"text":"kcal/s","placement":"Suffix","space":true}}},"kilogramForceMeters":{"unitSystem":"Metric","parentUnits":{"kilogramsForce":1,"meters":1},"symbols":{"kgfDashM":{"text":"kgf-m","placement":"Suffix","space":true}}},"kilogramForceMetersPerMeter":{"unitSystem":"Metric","parentUnits":{"kilogramForceMeters":1,"meters":-1},"symbols":{"kgfDashMPerM":{"text":"kgf-m/m","placement":"Suffix","space":true}}},"kilogramKelvins":{"unitSystem":"Metric","parentUnits":{"kilograms":1,"kelvinInterval":1},"symbols":{"kgK":{"text":"kg·K","placement":"Suffix","space":true}}},"kilograms":{"unitSystem":"Metric","dimension":"mass","symbols":{"kg":{"text":"kg","placement":"Suffix","space":true}}},"kilogramsForce":{"unitSystem":"Metric","parentUnits":{"kilograms":1,"standardGravity":1},"symbols":{"kgf":{"text":"kgf","placement":"Suffix","space":true}}},"kilogramsForcePerMeter":{"unitSystem":"Metric","parentUnits":{"kilogramsForce":1,"meters":-1},"symbols":{"kgfPerM":{"text":"kgf/m","placement":"Suffix","space":true}}},"kilogramsForcePerSquareMeter":{"unitSystem":"Metric","parentUnits":{"kilogramsForce":1,"squareMeters":-1},"symbols":{"kgfPerMSup2":{"text":"kgf/m²","placement":"Suffix","space":true}}},"kilogramsPerCubicCentimeter":{"unitSystem":"Metric","parentUnits":{"kilograms":1,"cubicCentimeters":-1}},"kilogramsPerCubicMeter":{"unitSystem":"Metric","parentUnits":{"kilograms":1,"cubicMeters":-1},"symbols":{"kgPerMSup3":{"text":"kg/m³","placement":"Suffix","space":true}}},"kilogramsPerHour":{"unitSystem":"Metric","parentUnits":{"kilograms":1,"hours":-1},"symbols":{"kgPerH":{"text":"kg/h","placement":"Suffix","space":true}}},"kilogramsPerKilogramKelvin":{"unitSystem":"Metric","parentUnits":{"kilograms":1,"kilogramKelvins":-1},"symbols":{"kgPerKgK":{"text":"kg/(kg·K)","placement":"Suffix","space":true}}},"kilogramsPerMeter":{"unitSystem":"Metric","parentUnits":{"kilograms":1,"meters":-1},"symbols":{"kgPerM":{"text":"kg/m","placement":"Suffix","space":true}}},"kilogramsPerMeterHour":{"unitSystem":"Metric","parentUnits":{"kilograms":1,"meters":-1,"hours":-1},"symbols":{"kgPerMH":{"text":"kg/(m·h)","placement":"Suffix","space":true}}},"kilogramsPerMeterSecond":{"unitSystem":"Metric","parentUnits":{"kilograms":1,"meters":-1,"seconds":-1},"symbols":{"kgPerMS":{"text":"kg/(m·s)","placement":"Suffix","space":true}}},"kilogramsPerMinute":{"unitSystem":"Metric","parentUnits":{"kilograms":1,"minutes":-1},"symbols":{"kgPerMin":{"text":"kg/min","placement":"Suffix","space":true}}},"kilogramsPerSecond":{"unitSystem":"Metric","parentUnits":{"kilograms":1,"seconds":-1},"symbols":{"kgPerS":{"text":"kg/s","placement":"Suffix","space":true}}},"kilogramsPerSquareMeter":{"unitSystem":"Metric","parentUnits":{"kilograms":1,"squareMeters":-1},"symbols":{"kgPerMSup2":{"text":"kg/m²","placement":"Suffix","space":true}}},"kilojoules":{"unitSystem":"Metric","parentFactors":{"kilo":1},"parentUnits":{"joules":1},"symbols":{"kJ":{"text":"kJ","placement":"Suffix","space":true}}},"kilojoulesPerKelvin":{"unitSystem":"Metric","parentUnits":{"kilojoules":1,"kelvinInterval":-1},"symbols":{"kJPerK":{"text":"kJ/K","placement":"Suffix","space":true}}},"kilometers":{"unitSystem":"Metric","parentFactors":{"kilo":1},"parentUnits":{"meters":1},"symbols":{"km":{"text":"km","placement":"Suffix","space":true}}},"kilometersPerHour":{"unitSystem":"Metric","parentUnits":{"kilometers":1,"hours":-1},"symbols":{"kmPerH":{"text":"km/h","placement":"Suffix","space":true}}},"kilometersPerSecond":{"unitSystem":"Metric","parentUnits":{"kilometers":1,"seconds":-1},"symbols":{"kmPerS":{"text":"km/s","placement":"Suffix","space":true}}},"kilometersPerSecondSquared":{"unitSystem":"Metric","parentUnits":{"kilometersPerSecond":1,"seconds":-1},"symbols":{"kmPerSSup2":{"text":"km/s²","placement":"Suffix","space":true}}},"kilonewtonMeters":{"unitSystem":"Metric","parentUnits":{"kilonewtons":1,"meters":1},"symbols":{"kNDashM":{"text":"kN-m","placement":"Suffix","space":true}}},"kilonewtonMetersPerDegree":{"unitSystem":"Metric","parentUnits":{"kilonewtonMeters":1,"degrees":-1},"symbols":{"kNDashMPerDegree":{"text":"kN-m/°","placement":"Suffix","space":true}}},"kilonewtonMetersPerDegreePerMeter":{"unitSystem":"Metric","parentUnits":{"kilonewtonMetersPerDegree":1,"meters":-1},"symbols":{"kNDashMPerDegreePerM":{"text":"kN-m/°/m","placement":"Suffix","space":true}}},"kilonewtonMetersPerMeter":{"unitSystem":"Metric","parentUnits":{"kilonewtonMeters":1,"meters":-1},"symbols":{"kNDashMPerM":{"text":"kN-m/m","placement":"Suffix","space":true}}},"kilonewtons":{"unitSystem":"Metric","parentFactors":{"kilo":1},"parentUnits":{"newtons":1},"symbols":{"kN":{"text":"kN","placement":"Suffix","space":true}}},"kilonewtonsPerCubicMeter":{"unitSystem":"Metric","parentUnits":{"kilonewtons":1,"cubicMeters":-1},"symbols":{"kNPerMSup3":{"text":"kN/m³","placement":"Suffix","space":true}}},"kilonewtonsPerMeter":{"unitSystem":"Metric","parentUnits":{"kilonewtons":1,"meters":-1},"symbols":{"kNPerM":{"text":"kN/m","placement":"Suffix","space":true}}},"kilonewtonsPerSquareCentimeter":{"unitSystem":"Metric","parentUnits":{"kilonewtons":1,"squareCentimeters":-1},"symbols":{"kNPerCmSup2":{"text":"kN/cm²","placement":"Suffix","space":true}}},"kilonewtonsPerSquareMeter":{"unitSystem":"Metric","parentUnits":{"kilonewtons":1,"squareMeters":-1},"symbols":{"kNPerMSup2":{"text":"kN/m²","placement":"Suffix","space":true}}},"kilonewtonsPerSquareMillimeter":{"unitSystem":"Metric","parentUnits":{"kilonewtons":1,"squareMillimeters":-1},"symbols":{"kNPerMmSup2":{"text":"kN/mm²","placement":"Suffix","space":true}}},"kilopascals":{"unitSystem":"Metric","parentFactors":{"kilo":1},"parentUnits":{"pascals":1},"symbols":{"kPa":{"text":"kPa","placement":"Suffix","space":true}}},"kilovoltAmperes":{"unitSystem":"Metric","parentUnits":{"kilovolts":1,"amperes":1},"symbols":{"kVA":{"text":"kVA","placement":"Suffix","space":true}}},"kilovolts":{"unitSystem":"Metric","parentFactors":{"kilo":1},"parentUnits":{"volts":1},"symbols":{"kV":{"text":"kV","placement":"Suffix","space":true}}},"kilowattHours":{"unitSystem":"Metric","parentUnits":{"kilowatts":1,"hours":1},"symbols":{"kWh":{"text":"kWh","placement":"Suffix","space":true}}},"kilowatts":{"unitSystem":"Metric","parentFactors":{"kilo":1},"parentUnits":{"watts":1},"symbols":{"kW":{"text":"kW","placement":"Suffix","space":true}}},"kipFeet":{"unitSystem":"Imperial","parentUnits":{"kips":1,"feet":1},"symbols":{"kipDashFt":{"text":"kip-ft","placement":"Suffix","space":true}}},"kipFeetPerDegree":{"unitSystem":"Imperial","parentUnits":{"kipFeet":1,"degrees":-1},"symbols":{"kipDashFtPerDegree":{"text":"kip-ft/°","placement":"Suffix","space":true}}},"kipFeetPerDegreePerFoot":{"unitSystem":"Imperial","parentUnits":{"kipFeetPerDegree":1,"feet":-1},"symbols":{"kipDashFtPerDegreePerFt":{"text":"kip-ft/°/ft","placement":"Suffix","space":true}}},"kipFeetPerFoot":{"unitSystem":"Imperial","parentUnits":{"kipFeet":1,"feet":-1},"symbols":{"kipDashFtPerFt":{"text":"kip-ft/ft","placement":"Suffix","space":true}}},"kips":{"unitSystem":"Imperial","parentFactors":{"kilo":1},"parentUnits":{"poundsForce":1},"symbols":{"kip":{"text":"kip","placement":"Suffix","space":true}}},"kipsPerCubicFoot":{"unitSystem":"Imperial","parentUnits":{"kips":1,"cubicFeet":-1},"symbols":{"kipPerFtSup3":{"text":"kip/ft³","placement":"Suffix","space":true}}},"kipsPerCubicInch":{"unitSystem":"Imperial","parentUnits":{"kips":1,"cubicInches":-1},"symbols":{"kipPerInSup3":{"text":"kip/in³","placement":"Suffix","space":true}}},"kipsPerFoot":{"unitSystem":"Imperial","parentUnits":{"kips":1,"feet":-1},"symbols":{"kipPerFt":{"text":"kip/ft","placement":"Suffix","space":true}}},"kipsPerInch":{"unitSystem":"Imperial","parentUnits":{"kips":1,"inches":-1},"symbols":{"kipPerIn":{"text":"kip/in","placement":"Suffix","space":true}}},"kipsPerSquareFoot":{"unitSystem":"Imperial","parentUnits":{"kips":1,"squareFeet":-1},"symbols":{"kipPerFtSup2":{"text":"kip/ft²","placement":"Suffix","space":true},"ksf":{"text":"ksf","placement":"Suffix","space":true}}},"kipsPerSquareInch":{"unitSystem":"Imperial","parentUnits":{"kips":1,"squareInches":-1},"symbols":{"kipPerInSup2":{"text":"kip/in²","placement":"Suffix","space":true},"ksi":{"text":"ksi","placement":"Suffix","space":true}}},"liters":{"unitSystem":"Metric","parentUnits":{"decimeters":3},"symbols":{"liter":{"text":"L","placement":"Suffix","space":true}}},"litersPerHour":{"unitSystem":"Metric","parentUnits":{"liters":1,"hours":-1},"symbols":{"lPerH":{"text":"L/h","placement":"Suffix","space":true}}},"litersPerMinute":{"unitSystem":"Metric","parentUnits":{"liters":1,"minutes":-1},"symbols":{"lPerMin":{"text":"L/min","placement":"Suffix","space":true},"lpm":{"text":"LPM","placement":"Suffix","space":true}}},"litersPerSecond":{"unitSystem":"Metric","parentUnits":{"liters":1,"seconds":-1},"symbols":{"lPerS":{"text":"L/s","placement":"Suffix","space":true},"lps":{"text":"LPS","placement":"Suffix","space":true}}},"litersPerSecondCubicMeter":{"unitSystem":"Metric","parentUnits":{"litersPerSecond":1,"cubicMeters":-1},"symbols":{"lPerSMSup3":{"text":"L/(s·m³)","placement":"Suffix","space":true}}},"litersPerSecondKilowatt":{"unitSystem":"Metric","parentUnits":{"litersPerSecond":1,"kilowatts":-1},"symbols":{"lPerSKw":{"text":"L/(s·kW)","placement":"Suffix","space":true}}},"litersPerSecondSquareMeter":{"unitSystem":"Metric","parentUnits":{"litersPerSecond":1,"squareMeters":-1},"symbols":{"lPerSMSup2":{"text":"L/(s·m²)","placement":"Suffix","space":true},"lpsPerMSup2":{"text":"LPS/m²","placement":"Suffix","space":true}}},"lumens":{"unitSystem":"Metric","parentUnits":{"candelas":1,"steradians":1},"symbols":{"lm":{"text":"lm","placement":"Suffix","space":true}}},"lumensPerWatt":{"unitSystem":"Metric","parentUnits":{"lumens":1,"watts":-1},"symbols":{"lmPerW":{"text":"lm/W","placement":"Suffix","space":true}}},"lux":{"unitSystem":"Metric","parentUnits":{"lumens":1,"squareMeters":-1},"symbols":{"lx":{"text":"lx","placement":"Suffix","space":true}}},"maxwells":{"unitSystem":"Metric","parentFactors":{"ten":-8},"parentUnits":{"webers":1},"symbols":{"mx":{"text":"Mx","placement":"Suffix","space":true}}},"meganewtonMeters":{"unitSystem":"Metric","parentUnits":{"meganewtons":1,"meters":1},"symbols":{"mNDashM":{"text":"MN-m","placement":"Suffix","space":true}}},"meganewtonMetersPerMeter":{"unitSystem":"Metric","parentUnits":{"meganewtonMeters":1,"meters":-1},"symbols":{"mNDashMPerM":{"text":"MN-m/m","placement":"Suffix","space":true}}},"meganewtons":{"unitSystem":"Metric","parentFactors":{"mega":1},"parentUnits":{"newtons":1},"symbols":{"mN":{"text":"MN","placement":"Suffix","space":true}}},"meganewtonsPerMeter":{"unitSystem":"Metric","parentUnits":{"meganewtons":1,"meters":-1},"symbols":{"mNPerM":{"text":"MN/m","placement":"Suffix","space":true}}},"meganewtonsPerSquareMeter":{"unitSystem":"Metric","parentUnits":{"meganewtons":1,"squareMeters":-1},"symbols":{"mNPerMSup2":{"text":"MN/m²","placement":"Suffix","space":true}}},"megapascals":{"unitSystem":"Metric","parentFactors":{"mega":1},"parentUnits":{"pascals":1},"symbols":{"mPa":{"text":"MPa","placement":"Suffix","space":true}}},"meters":{"unitSystem":"Metric","dimension":"length","symbols":{"meter":{"text":"m","placement":"Suffix","space":true},"metersAndCentimeters":{"inherits":"symbol"}}},"metersPerKilonewton":{"unitSystem":"Metric","parentUnits":{"meters":1,"kilonewtons":-1},"symbols":{"mPerKN":{"text":"m/kN","placement":"Suffix","space":true}}},"metersPerKilonewtonMeter":{"unitSystem":"Metric","parentUnits":{"meters":1,"kilonewtonMeters":-1},"symbols":{"mPerKNDashM":{"text":"m/kN-m","placement":"Suffix","space":true}}},"metersPerSecond":{"unitSystem":"Metric","parentUnits":{"meters":1,"seconds":-1},"symbols":{"mPerS":{"text":"m/s","placement":"Suffix","space":true}}},"metersPerSecondSquared":{"unitSystem":"Metric","parentUnits":{"metersPerSecond":1,"seconds":-1},"symbols":{"mPerSSup2":{"text":"m/s²","placement":"Suffix","space":true}}},"metersToTheFourthPower":{"unitSystem":"Metric","parentUnits":{"meters":4},"symbols":{"mSup4":{"text":"m⁴","placement":"Suffix","space":true}}},"metersToTheSixthPower":{"unitSystem":"Metric","parentUnits":{"meters":6},"symbols":{"mSup6":{"text":"m⁶","placement":"Suffix","space":true}}},"mhos":{"unitSystem":"Metric","parentUnits":{"ohms":-1},"symbols":{"mho":{"text":"mho","placement":"Suffix","space":true}}},"microinchesPerInchDegreeFahrenheit":{"unitSystem":"Imperial","parentFactors":{"micro":1},"parentUnits":{"inverseDegreesFahrenheit":1},"symbols":{"uinPerInDegreeF":{"text":"µin/(in·°F)","placement":"Suffix","space":true}}},"micrometersPerMeterDegreeCelsius":{"unitSystem":"Metric","parentFactors":{"micro":1},"parentUnits":{"inverseDegreesCelsius":1},"symbols":{"umPerMDegreeC":{"text":"µm/(m·°C)","placement":"Suffix","space":true}}},"microns":{"unitSystem":"Metric","parentFactors":{"micro":1},"parentUnits":{"meters":1},"symbols":{"micron":{"text":"micron","placement":"Suffix","space":true}}},"miles":{"unitSystem":"Imperial","factor":1760,"parentUnits":{"yards":1},"symbols":{"mi":{"text":"mi","placement":"Suffix","space":true}}},"milesPerHour":{"unitSystem":"Imperial","parentUnits":{"miles":1,"hours":-1},"symbols":{"mph":{"text":"mph","placement":"Suffix","space":true}}},"milesPerSecond":{"unitSystem":"Imperial","parentUnits":{"miles":1,"seconds":-1},"symbols":{"miPerS":{"text":"mi/s","placement":"Suffix","space":true}}},"milesPerSecondSquared":{"unitSystem":"Imperial","parentUnits":{"milesPerSecond":1,"seconds":-1},"symbols":{"miPerSSup2":{"text":"mi/s²","placement":"Suffix","space":true}}},"milliamperes":{"unitSystem":"Metric","parentFactors":{"milli":1},"parentUnits":{"amperes":1},"symbols":{"mA":{"text":"mA","placement":"Suffix","space":true}}},"milligrams":{"unitSystem":"Metric","parentFactors":{"milli":1},"parentUnits":{"grams":1},"symbols":{"mg":{"text":"mg","placement":"Suffix","space":true}}},"millimeters":{"unitSystem":"Metric","parentFactors":{"milli":1},"parentUnits":{"meters":1},"symbols":{"mm":{"text":"mm","placement":"Suffix","space":true}}},"millimetersOfMercury":{"unitSystem":"Metric","factor":133.3224,"parentUnits":{"pascals":1},"symbols":{"mmHg":{"text":"mmHg","placement":"Suffix","space":true}}},"millimetersToTheFourthPower":{"unitSystem":"Metric","parentUnits":{"millimeters":4},"symbols":{"mmSup4":{"text":"mm⁴","placement":"Suffix","space":true}}},"millimetersToTheSixthPower":{"unitSystem":"Metric","parentUnits":{"millimeters":6},"symbols":{"mmSup6":{"text":"mm⁶","placement":"Suffix","space":true}}},"milliseconds":{"unitSystem":"Metric","parentFactors":{"milli":1},"parentUnits":{"seconds":1},"symbols":{"ms":{"text":"ms","placement":"Suffix","space":true}}},"millivolts":{"unitSystem":"Metric","parentFactors":{"milli":1},"parentUnits":{"volts":1},"symbols":{"mV":{"text":"mV","placement":"Suffix","space":true}}},"mils":{"unitSystem":"Imperial","parentFactors":{"milli":1},"parentUnits":{"inches":1},"symbols":{"mil":{"text":"mil","placement":"Suffix","space":true}}},"minutes":{"unitSystem":"Metric","factor":60,"parentUnits":{"seconds":1},"symbols":{"min":{"text":"min","placement":"Suffix","space":true}}},"nanograms":{"unitSystem":"Metric","parentFactors":{"nano":1},"parentUnits":{"grams":1},"symbols":{"ng":{"text":"ng","placement":"Suffix","space":true}}},"nanogramsPerPascalSecondSquareMeter":{"unitSystem":"Metric","parentUnits":{"nanograms":1,"seconds":-1,"squareMeters":-1,"pascals":-1},"symbols":{"ngPerPaSMSup2":{"text":"ng/(Pa·s·m²)","placement":"Suffix","space":true}}},"nauticalMiles":{"unitSystem":"Imperial","factor":1852,"parentUnits":{"meters":1},"symbols":{"nauticalMile":{"text":"M","placement":"Suffix","space":true}}},"newtonMeters":{"unitSystem":"Metric","parentUnits":{"newtons":1,"meters":1},"symbols":{"nDashM":{"text":"N-m","placement":"Suffix","space":true}}},"newtonMetersPerMeter":{"unitSystem":"Metric","parentUnits":{"newtonMeters":1,"meters":-1},"symbols":{"nDashMPerM":{"text":"N-m/m","placement":"Suffix","space":true}}},"newtonSecondsPerSquareMeter":{"unitSystem":"Metric","parentUnits":{"newtons":1,"seconds":1,"squareMeters":-1},"symbols":{"nSPerMSup2":{"text":"N·s/m²","placement":"Suffix","space":true}}},"newtons":{"unitSystem":"Metric","parentUnits":{"kilograms":1,"metersPerSecondSquared":1},"symbols":{"newton":{"text":"N","placement":"Suffix","space":true}}},"newtonsPerMeter":{"unitSystem":"Metric","parentUnits":{"newtons":1,"meters":-1},"symbols":{"nPerM":{"text":"N/m","placement":"Suffix","space":true}}},"newtonsPerSquareMeter":{"unitSystem":"Metric","parentUnits":{"newtons":1,"squareMeters":-1},"symbols":{"nPerMSup2":{"text":"N/m²","placement":"Suffix","space":true}}},"newtonsPerSquareMillimeter":{"unitSystem":"Metric","parentUnits":{"newtons":1,"squareMillimeters":-1},"symbols":{"nPerMmSup2":{"text":"N/mm²","placement":"Suffix","space":true}}},"oersteds":{"unitSystem":"Metric","factor":250,"parentFactors":{"pi":-1},"parentUnits":{"amperes":1,"meters":-1},"symbols":{"oe":{"text":"Oe","placement":"Suffix","space":true}}},"ohmMeters":{"unitSystem":"Metric","parentUnits":{"ohms":1,"meters":1},"symbols":{"ohmM":{"text":"ohm·m","placement":"Suffix","space":true}}},"ohms":{"unitSystem":"Metric","parentUnits":{"volts":1,"amperes":-1},"symbols":{"ohm":{"text":"ohm","placement":"Suffix","space":true},"omega":{"text":"Ω","placement":"Suffix","space":true}}},"ouncesForce":{"unitSystem":"Imperial","factor":0.0625,"parentUnits":{"poundsForce":1},"symbols":{"ozf":{"text":"ozf","placement":"Suffix","space":true}}},"ouncesMass":{"unitSystem":"Imperial","factor":0.0625,"parentUnits":{"poundsMass":1},"symbols":{"oz":{"text":"oz","placement":"Suffix","space":true}}},"pascalSeconds":{"unitSystem":"Metric","parentUnits":{"pascals":1,"seconds":1},"symbols":{"paDashS":{"text":"Pa-s","placement":"Suffix","space":true}}},"pascals":{"unitSystem":"Metric","parentUnits":{"newtonsPerSquareMeter":1},"symbols":{"pa":{"text":"Pa","placement":"Suffix","space":true}}},"pascalsPerMeter":{"unitSystem":"Metric","parentUnits":{"pascals":1,"meters":-1},"symbols":{"paPerM":{"text":"Pa/m","placement":"Suffix","space":true}}},"perMille":{"unitSystem":"Metric","parentFactors":{"milli":1},"parentUnits":{"ratioTo1":1},"symbols":{"perMille":{"text":"‰","placement":"Suffix","space":{"value":false}}}},"percentage":{"unitSystem":"Metric","parentFactors":{"centi":1},"parentUnits":{"ratioTo1":1},"symbols":{"percent":{"text":"%","placement":"Suffix","space":{"value":false}}}},"poises":{"unitSystem":"Metric","parentUnits":{"grams":1,"centimeters":-1,"seconds":-1},"symbols":{"poise":{"text":"P","placement":"Suffix","space":true}}},"poundForceFeet":{"unitSystem":"Imperial","parentUnits":{"poundsForce":1,"feet":1},"symbols":{"lbForceDashFt":{"text":"lb-ft","placement":"Suffix","space":true},"lbfDashFt":{"text":"lbf-ft","placement":"Suffix","space":true}}},"poundForceFeetPerFoot":{"unitSystem":"Imperial","parentUnits":{"poundForceFeet":1,"feet":-1},"symbols":{"lbForceDashFtPerFt":{"text":"lb-ft/ft","placement":"Suffix","space":true},"lbfDashFtPerFt":{"text":"lbf-ft/ft","placement":"Suffix","space":true}}},"poundForceSecondsPerSquareFoot":{"unitSystem":"Imperial","parentUnits":{"poundsForce":1,"seconds":1,"squareFeet":-1},"symbols":{"lbForceSPerFtSup2":{"text":"lb·s/ft²","placement":"Suffix","space":true}}},"poundMassDegreesFahrenheit":{"unitSystem":"Imperial","parentUnits":{"poundsMass":1,"fahrenheitInterval":1},"symbols":{"lbMassDegreeF":{"text":"lb·°F","placement":"Suffix","space":true}}},"poundsForce":{"unitSystem":"Imperial","parentUnits":{"poundsMass":1,"standardGravity":1},"symbols":{"lbForce":{"text":"lb","placement":"Suffix","space":true},"lbf":{"text":"lbf","placement":"Suffix","space":true}}},"poundsForcePerCubicFoot":{"unitSystem":"Imperial","parentUnits":{"poundsForce":1,"cubicFeet":-1},"symbols":{"lbForcePerFtSup3":{"text":"lb/ft³","placement":"Suffix","space":true},"lbfPerFtSup3":{"text":"lbf/ft³","placement":"Suffix","space":true}}},"poundsForcePerFoot":{"unitSystem":"Imperial","parentUnits":{"poundsForce":1,"feet":-1},"symbols":{"lbForcePerFt":{"text":"lb/ft","placement":"Suffix","space":true},"lbfPerFt":{"text":"lbf/ft","placement":"Suffix","space":true}}},"poundsForcePerSquareFoot":{"unitSystem":"Imperial","parentUnits":{"poundsForce":1,"squareFeet":-1},"symbols":{"lbForcePerFtSup2":{"text":"lb/ft²","placement":"Suffix","space":true},"lbfPerFtSup2":{"text":"lbf/ft²","placement":"Suffix","space":true},"psf":{"text":"psf","placement":"Suffix","space":true}}},"poundsForcePerSquareInch":{"unitSystem":"Imperial","parentUnits":{"poundsForce":1,"squareInches":-1},"symbols":{"lbForcePerInSup2":{"text":"lb/in²","placement":"Suffix","space":true},"lbfPerInSup2":{"text":"lbf/in²","placement":"Suffix","space":true},"psi":{"text":"psi","placement":"Suffix","space":true},"psia":{"text":"psia","placement":"Suffix","space":true},"psig":{"text":"psig","placement":"Suffix","space":true}}},"poundsMass":{"unitSystem":"Imperial","factor":0.45359237,"parentUnits":{"kilograms":1},"symbols":{"lbMass":{"text":"lb","placement":"Suffix","space":true},"lbm":{"text":"lbm","placement":"Suffix","space":true}}},"poundsMassPerCubicFoot":{"unitSystem":"Imperial","parentUnits":{"poundsMass":1,"cubicFeet":-1},"symbols":{"lbMassPerFtSup3":{"text":"lb/ft³","placement":"Suffix","space":true},"lbmPerFtSup3":{"text":"lbm/ft³","placement":"Suffix","space":true}}},"poundsMassPerCubicInch":{"unitSystem":"Imperial","parentUnits":{"poundsMass":1,"cubicInches":-1},"symbols":{"lbMassPerInSup3":{"text":"lb/in³","placement":"Suffix","space":true},"lbmPerInSup3":{"text":"lbm/in³","placement":"Suffix","space":true}}},"poundsMassPerFoot":{"unitSystem":"Imperial","parentUnits":{"poundsMass":1,"feet":-1},"symbols":{"lbMassPerFt":{"text":"lb/ft","placement":"Suffix","space":true},"lbmPerFt":{"text":"lbm/ft","placement":"Suffix","space":true}}},"poundsMassPerFootHour":{"unitSystem":"Imperial","parentUnits":{"poundsMassPerFoot":1,"hours":-1},"symbols":{"lbMassPerFtDashH":{"text":"lb/ft-h","placement":"Suffix","space":true},"lbmPerFtDashH":{"text":"lbm/ft-h","placement":"Suffix","space":true}}},"poundsMassPerFootSecond":{"unitSystem":"Imperial","parentUnits":{"poundsMassPerFoot":1,"seconds":-1},"symbols":{"lbMassPerFtDashS":{"text":"lb/ft-s","placement":"Suffix","space":true},"lbmPerFtDashS":{"text":"lbm/ft-s","placement":"Suffix","space":true}}},"poundsMassPerHour":{"unitSystem":"Imperial","parentUnits":{"poundsMass":1,"hours":-1},"symbols":{"lbMassPerH":{"text":"lb/h","placement":"Suffix","space":true}}},"poundsMassPerMinute":{"unitSystem":"Imperial","parentUnits":{"poundsMass":1,"minutes":-1},"symbols":{"lbMassPerMin":{"text":"lb/min","placement":"Suffix","space":true}}},"poundsMassPerPoundDegreeFahrenheit":{"unitSystem":"Imperial","parentUnits":{"poundsMass":1,"poundMassDegreesFahrenheit":-1},"symbols":{"lbMassPerLbDegreeF":{"text":"lb/(lb·°F)","placement":"Suffix","space":true}}},"poundsMassPerSecond":{"unitSystem":"Imperial","parentUnits":{"poundsMass":1,"seconds":-1},"symbols":{"lbMassPerS":{"text":"lb/s","placement":"Suffix","space":true}}},"poundsMassPerSquareFoot":{"unitSystem":"Imperial","parentUnits":{"poundsMass":1,"squareFeet":-1},"symbols":{"lbMassPerFtSup2":{"text":"lb/ft²","placement":"Suffix","space":true}}},"radians":{"unitSystem":"Metric","symbols":{"rad":{"text":"rad","placement":"Suffix","space":true}}},"radiansPerSecond":{"unitSystem":"Metric","parentUnits":{"radians":1,"seconds":-1},"symbols":{"radPerS":{"text":"rad/s","placement":"Suffix","space":true}}},"rankine":{"unitSystem":"Imperial","parentUnit":"rankineInterval","symbols":{"degreeR":{"text":"°R","placement":"Suffix","space":true}}},"rankineInterval":{"unitSystem":"Imperial","parentFactors":{"nineFifths":-1},"parentUnits":{"kelvinInterval":1},"symbols":{"degreeRInterval":{"text":"°R","placement":"Suffix","space":true},"deltaDegreeR":{"text":"delta°R","placement":"Suffix","space":true}}},"ratioTo1":{"unitSystem":"Metric","symbols":{"colon1":{"text":":1","placement":"Suffix","space":{"value":false}}}},"ratioTo10":{"unitSystem":"Metric","parentFactors":{"ten":-1},"parentUnits":{"ratioTo1":1},"symbols":{"colon10":{"text":":10","placement":"Suffix","space":{"value":false}}}},"ratioTo12":{"unitSystem":"Imperial","parentFactors":{"twelve":-1},"parentUnits":{"ratioTo1":1},"symbols":{"colon12":{"text":":12","placement":"Suffix","space":{"value":false}}}},"revolutionsPerMinute":{"unitSystem":"Imperial","parentUnits":{"turns":1,"minutes":-1},"symbols":{"rpm":{"text":"RPM","placement":"Suffix","space":true}}},"riseDividedBy1000Millimeters":{"unitSystem":"Metric","parentUnits":{"perMille":1}},"riseDividedBy10Feet":{"unitSystem":"Imperial","parentUnits":{"ratioTo10":1}},"riseDividedBy120Inches":{"unitSystem":"Imperial","parentFactors":{"ten":-1},"parentUnits":{"riseDividedBy12Inches":1}},"riseDividedBy12Inches":{"unitSystem":"Imperial","parentUnits":{"ratioTo12":1}},"riseDividedBy1Foot":{"unitSystem":"Imperial","parentUnits":{"ratioTo1":1}},"seconds":{"unitSystem":"Metric","dimension":"time","symbols":{"second":{"text":"s","placement":"Suffix","space":true}}},"siemens":{"unitSystem":"Metric","parentUnits":{"mhos":1},"symbols":{"siemens":{"text":"S","placement":"Suffix","space":true}}},"slugs":{"unitSystem":"Imperial","parentUnits":{"poundsForce":1,"seconds":2,"feet":-1},"symbols":{"slug":{"text":"slug","placement":"Suffix","space":true}}},"squareCentimeters":{"unitSystem":"Metric","parentUnits":{"centimeters":2},"symbols":{"cmCaret2":{"text":"cm^2","placement":"Suffix","space":true},"cmSup2":{"text":"cm²","placement":"Suffix","space":true}}},"squareCentimetersPerMeter":{"unitSystem":"Metric","parentUnits":{"squareCentimeters":1,"meters":-1},"symbols":{"cmSup2PerM":{"text":"cm²/m","placement":"Suffix","space":true}}},"squareFeet":{"unitSystem":"Imperial","parentUnits":{"feet":2},"symbols":{"ftCaret2":{"text":"ft^2","placement":"Suffix","space":true},"ftSup2":{"text":"ft²","placement":"Suffix","space":true},"sf":{"text":"SF","placement":"Suffix","space":true}}},"squareFeetPer1000BritishThermalUnitsPerHour":{"unitSystem":"Imperial","factor":0.001,"parentUnits":{"squareFeet":1,"britishThermalUnitsPerHour":-1},"symbols":{"ftSup2HPerKbtu":{"text":"ft²·h/kBtu","placement":"Suffix","space":true},"ftSup2PerMbh":{"text":"ft²/MBh","placement":"Suffix","space":true},"sfHPerKbtu":{"text":"SF·h/kBtu","placement":"Suffix","space":true},"sfPerMbh":{"text":"SF/MBh","placement":"Suffix","space":true}}},"squareFeetPerFoot":{"unitSystem":"Imperial","parentUnits":{"squareFeet":1,"feet":-1},"symbols":{"ftSup2PerFt":{"text":"ft²/ft","placement":"Suffix","space":true}}},"squareFeetPerKip":{"unitSystem":"Imperial","parentUnits":{"squareFeet":1,"kips":-1},"symbols":{"ftSup2PerKip":{"text":"ft²/kip","placement":"Suffix","space":true}}},"squareFeetPerKipFoot":{"unitSystem":"Imperial","parentUnits":{"squareFeet":1,"kipFeet":-1},"symbols":{"ftSup2PerKipDashFt":{"text":"ft²/kip-ft","placement":"Suffix","space":true}}},"squareFeetPerSecond":{"unitSystem":"Imperial","parentUnits":{"squareFeet":1,"seconds":-1},"symbols":{"ftSup2PerS":{"text":"ft²/s","placement":"Suffix","space":true}}},"squareFeetPerTonOfRefrigeration":{"unitSystem":"Imperial","parentUnits":{"squareFeet":1,"tonsOfRefrigeration":-1},"symbols":{"ftSup2PerTon":{"text":"ft²/ton","placement":"Suffix","space":true},"sfPerTon":{"text":"SF/ton","placement":"Suffix","space":true}}},"squareHectometers":{"unitSystem":"Metric","parentUnits":{"hectometers":2},"symbols":{"hmSup2":{"text":"hm²","placement":"Suffix","space":true}}},"squareInches":{"unitSystem":"Imperial","parentUnits":{"inches":2},"symbols":{"inCaret2":{"text":"in^2","placement":"Suffix","space":true},"inSup2":{"text":"in²","placement":"Suffix","space":true}}},"squareInchesPerFoot":{"unitSystem":"Imperial","parentUnits":{"squareInches":1,"feet":-1},"symbols":{"inSup2PerFt":{"text":"in²/ft","placement":"Suffix","space":true}}},"squareMeterKelvinsPerWatt":{"unitSystem":"Metric","parentUnits":{"squareMeters":1,"kelvinInterval":1,"watts":-1},"symbols":{"mSup2KPerW":{"text":"(m²·K)/W","placement":"Suffix","space":true}}},"squareMeters":{"unitSystem":"Metric","parentUnits":{"meters":2},"symbols":{"mCaret2":{"text":"m^2","placement":"Suffix","space":true},"mSup2":{"text":"m²","placement":"Suffix","space":true}}},"squareMetersPerKilonewton":{"unitSystem":"Metric","parentUnits":{"squareMeters":1,"kilonewtons":-1},"symbols":{"mSup2PerKN":{"text":"m²/kN","placement":"Suffix","space":true}}},"squareMetersPerKilonewtonMeter":{"unitSystem":"Metric","parentUnits":{"squareMeters":1,"kilonewtonMeters":-1},"symbols":{"mSup2PerKNDashM":{"text":"m²/kN-m","placement":"Suffix","space":true}}},"squareMetersPerKilowatt":{"unitSystem":"Metric","parentUnits":{"squareMeters":1,"kilowatts":-1},"symbols":{"mSup2PerKw":{"text":"m²/kW","placement":"Suffix","space":true}}},"squareMetersPerMeter":{"unitSystem":"Metric","parentUnits":{"squareMeters":1,"meters":-1},"symbols":{"mSup2PerM":{"text":"m²/m","placement":"Suffix","space":true}}},"squareMetersPerSecond":{"unitSystem":"Metric","parentUnits":{"squareMeters":1,"seconds":-1},"symbols":{"mSup2PerS":{"text":"m²/s","placement":"Suffix","space":true}}},"squareMillimeters":{"unitSystem":"Metric","parentUnits":{"millimeters":2},"symbols":{"mmCaret2":{"text":"mm^2","placement":"Suffix","space":true},"mmSup2":{"text":"mm²","placement":"Suffix","space":true}}},"squareMillimetersPerMeter":{"unitSystem":"Metric","parentUnits":{"squareMillimeters":1,"meters":-1},"symbols":{"mmSup2PerM":{"text":"mm²/m","placement":"Suffix","space":true}}},"squareMils":{"unitSystem":"Imperial","parentUnits":{"mils":2},"symbols":{"milCaret2":{"text":"mil^2","placement":"Suffix","space":true},"milSup2":{"text":"mil²","placement":"Suffix","space":true}}},"squareYards":{"unitSystem":"Imperial","parentUnits":{"yards":2},"symbols":{"ydSup2":{"text":"yd²","placement":"Suffix","space":true}}},"standardGravity":{"unitSystem":"Metric","factor":9.80665,"parentUnits":{"metersPerSecondSquared":1},"symbols":{"gravity":{"text":"𝘨","placement":"Suffix","space":true}}},"steradians":{"unitSystem":"Metric","symbols":{"sr":{"text":"sr","placement":"Suffix","space":true}}},"teslas":{"unitSystem":"Metric","parentUnits":{"webers":1,"meters":-2},"symbols":{"tesla":{"text":"T","placement":"Suffix","space":true}}},"therms":{"unitSystem":"Imperial","factor":100000,"parentUnits":{"britishThermalUnits":1},"symbols":{"therm":{"text":"therm","placement":"Suffix","space":true}}},"thousandBritishThermalUnitsPerHour":{"unitSystem":"Imperial","factor":1000,"parentUnits":{"britishThermalUnitsPerHour":1},"symbols":{"mbh":{"text":"MBH","placement":"Suffix","space":true}}},"tonneForceMeters":{"unitSystem":"Metric","parentUnits":{"tonnesForce":1,"meters":1},"symbols":{"tfDashM":{"text":"Tf-m","placement":"Suffix","space":true}}},"tonneForceMetersPerMeter":{"unitSystem":"Metric","parentUnits":{"tonneForceMeters":1,"meters":-1},"symbols":{"tfDashMPerM":{"text":"Tf-m/m","placement":"Suffix","space":true}}},"tonnes":{"unitSystem":"Metric","factor":1000,"parentUnits":{"kilograms":1},"symbols":{"tonne":{"text":"t","placement":"Suffix","space":true}}},"tonnesForce":{"unitSystem":"Metric","parentUnits":{"tonnes":1,"standardGravity":1},"symbols":{"tf":{"text":"Tf","placement":"Suffix","space":true}}},"tonnesForcePerMeter":{"unitSystem":"Metric","parentUnits":{"tonnesForce":1,"meters":-1},"symbols":{"tfPerM":{"text":"Tf/m","placement":"Suffix","space":true}}},"tonnesForcePerSquareMeter":{"unitSystem":"Metric","parentUnits":{"tonnesForce":1,"squareMeters":-1},"symbols":{"tfPerMSup2":{"text":"Tf/m²","placement":"Suffix","space":true}}},"tonsOfRefrigeration":{"unitSystem":"Imperial","factor":12000,"parentUnits":{"britishThermalUnitsPerHour":1},"symbols":{"ton":{"text":"ton","placement":"Suffix","space":true},"tonOfRefrigeration":{"text":"ton of refrigeration","placement":"Suffix","space":true}}},"turns":{"unitSystem":"Metric","factor":2,"parentFactors":{"pi":1},"parentUnits":{"radians":1},"symbols":{"tr":{"text":"tr","placement":"Suffix","space":true}}},"usGallons":{"unitSystem":"Imperial","factor":231,"parentUnits":{"cubicInches":1},"symbols":{"gal":{"text":"gal","placement":"Suffix","space":true}}},"usGallonsPerHour":{"unitSystem":"Imperial","parentUnits":{"usGallons":1,"hours":-1},"symbols":{"galPerH":{"text":"gal/h","placement":"Suffix","space":true},"gph":{"text":"GPH","placement":"Suffix","space":true},"usgph":{"text":"usgph","placement":"Suffix","space":true}}},"usGallonsPerMinute":{"unitSystem":"Imperial","parentUnits":{"usGallons":1,"minutes":-1},"symbols":{"galPerMin":{"text":"gal/min","placement":"Suffix","space":true},"gpm":{"text":"GPM","placement":"Suffix","space":true},"usgpm":{"text":"usgpm","placement":"Suffix","space":true}}},"usSurveyFeet":{"unitSystem":"Imperial","factor":1200,"parentFactors":{"threeThousandNineHundredThirtySeven":-1},"parentUnits":{"meters":1},"symbols":{"usft":{"text":"USft","placement":"Suffix","space":true}}},"usTonnesForce":{"unitSystem":"Imperial","parentUnits":{"usTonnesMass":1,"standardGravity":1},"symbols":{"stf":{"text":"STf","placement":"Suffix","space":true},"tonsf":{"text":"Tonsf","placement":"Suffix","space":true},"usTonnesForceSt":{"text":"ST","placement":"Suffix","space":true},"usTonnesForceT":{"text":"T","placement":"Suffix","space":true},"usTonnesForceTons":{"text":"Tons","placement":"Suffix","space":true}}},"usTonnesMass":{"unitSystem":"Imperial","factor":2000,"parentUnits":{"poundsMass":1},"symbols":{"usTonnesMassSt":{"text":"ST","placement":"Suffix","space":true},"usTonnesMassT":{"text":"T","placement":"Suffix","space":true},"usTonnesMassTons":{"text":"Tons","placement":"Suffix","space":true}}},"voltAmperes":{"unitSystem":"Metric","parentUnits":{"volts":1,"amperes":1},"symbols":{"vA":{"text":"VA","placement":"Suffix","space":true}}},"volts":{"unitSystem":"Metric","parentUnits":{"watts":1,"amperes":-1},"symbols":{"volt":{"text":"V","placement":"Suffix","space":true}}},"watts":{"unitSystem":"Metric","parentUnits":{"joules":1,"seconds":-1},"symbols":{"watt":{"text":"W","placement":"Suffix","space":true}}},"wattsPerCubicFoot":{"unitSystem":"Imperial","parentUnits":{"watts":1,"cubicFeet":-1},"symbols":{"wPerFtSup3":{"text":"W/ft³","placement":"Suffix","space":true}}},"wattsPerCubicFootPerMinute":{"unitSystem":"Imperial","parentUnits":{"watts":1,"cubicFeetPerMinute":-1},"symbols":{"wMinPerFtSup3":{"text":"W·min/ft³","placement":"Suffix","space":true}}},"wattsPerCubicMeter":{"unitSystem":"Metric","parentUnits":{"watts":1,"cubicMeters":-1},"symbols":{"wPerMSup3":{"text":"W/m³","placement":"Suffix","space":true}}},"wattsPerCubicMeterPerSecond":{"unitSystem":"Metric","parentUnits":{"watts":1,"cubicMetersPerSecond":-1},"symbols":{"wSPerMSup3":{"text":"W·s/m³","placement":"Suffix","space":true}}},"wattsPerFoot":{"unitSystem":"Imperial","parentUnits":{"watts":1,"feet":-1},"symbols":{"wPerFt":{"text":"W/ft","placement":"Suffix","space":true}}},"wattsPerMeter":{"unitSystem":"Metric","parentUnits":{"watts":1,"meters":-1},"symbols":{"wPerM":{"text":"W/m","placement":"Suffix","space":true}}},"wattsPerMeterKelvin":{"unitSystem":"Metric","parentUnits":{"watts":1,"meters":-1,"kelvinInterval":-1},"symbols":{"wPerMK":{"text":"W/(m·K)","placement":"Suffix","space":true}}},"wattsPerSquareFoot":{"unitSystem":"Imperial","parentUnits":{"watts":1,"squareFeet":-1},"symbols":{"wPerFtSup2":{"text":"W/ft²","placement":"Suffix","space":true}}},"wattsPerSquareMeter":{"unitSystem":"Metric","parentUnits":{"watts":1,"squareMeters":-1},"symbols":{"wPerMSup2":{"text":"W/m²","placement":"Suffix","space":true}}},"wattsPerSquareMeterKelvin":{"unitSystem":"Metric","parentUnits":{"wattsPerSquareMeter":1,"kelvinInterval":-1},"symbols":{"wPerMSup2K":{"text":"W/(m²·K)","placement":"Suffix","space":true}}},"webers":{"unitSystem":"Metric","parentUnits":{"volts":1,"seconds":1},"symbols":{"wb":{"text":"Wb","placement":"Suffix","space":true}}},"yards":{"unitSystem":"Imperial","factor":3,"parentUnits":{"feet":1},"symbols":{"yd":{"text":"yd","placement":"Suffix","space":true}}},"feetFractionalInches":{"unitSystem":"Imperial","factor":12,"parentUnits":{"inches":1},"symbols":{"feetAndInches":{"inherits":"symbol"},"footSingleQuote":{"text":"\'","placement":"Suffix","space":{"value":false}},"ft":{"text":"ft","placement":"Suffix","space":true},"lf":{"text":"LF","placement":"Suffix","space":true}}},"fractionalInches":{"unitSystem":"Imperial","factor":2.54,"parentUnits":{"centimeters":1},"symbols":{"in":{"text":"in","placement":"Suffix","space":true},"inchDoubleQuote":{"text":"\\"","placement":"Suffix","space":{"value":false}}}},"metersCentimeters":{"unitSystem":"Metric","dimension":"length","symbols":{"meter":{"text":"m","placement":"Suffix","space":true},"metersAndCentimeters":{"inherits":"symbol"}}},"degreesMinutes":{"unitSystem":"Metric","parentFactors":{"threeHundredSixty":-1},"parentUnits":{"turns":1},"symbols":{"degree":{"text":"°","placement":"Suffix","space":{"value":false}},"degreesMinutesSeconds":{"inherits":"symbol"},"slopeDegree":{"text":"°","placement":"Suffix","space":{"value":false}}}},"slopeDegrees":{"unitSystem":"Metric","parentFactors":{"threeHundredSixty":-1},"parentUnits":{"turns":1},"symbols":{"degree":{"text":"°","placement":"Suffix","space":{"value":false}},"degreesMinutesSeconds":{"inherits":"symbol"},"slopeDegree":{"text":"°","placement":"Suffix","space":{"value":false}}}},"stationingFeet":{"unitSystem":"Imperial","factor":12,"parentUnits":{"inches":1},"symbols":{"feetAndInches":{"inherits":"symbol"},"footSingleQuote":{"text":"\'","placement":"Suffix","space":{"value":false}},"ft":{"text":"ft","placement":"Suffix","space":true},"lf":{"text":"LF","placement":"Suffix","space":true}}},"stationingMeters":{"unitSystem":"Metric","dimension":"length","symbols":{"meter":{"text":"m","placement":"Suffix","space":true},"metersAndCentimeters":{"inherits":"symbol"}}},"stationingSurveyFeet":{"unitSystem":"Imperial","factor":1200,"parentFactors":{"threeThousandNineHundredThirtySeven":-1},"parentUnits":{"meters":1},"symbols":{"usft":{"text":"USft","placement":"Suffix","space":true}}}},"quantity":{"acceleration":{"units":["metersPerSecondSquared","kilometersPerSecondSquared","inchesPerSecondSquared","feetPerSecondSquared","milesPerSecondSquared","standardGravity"]},"angle":{"units":["degrees","radians","gradians","turns"]},"angularLineSpringCoefficient":{"units":["kipFeetPerDegreePerFoot","kilonewtonMetersPerDegreePerMeter"]},"angularPointSpringCoefficient":{"units":["kipFeetPerDegree","kilonewtonMetersPerDegree"]},"angularSpeed":{"units":["radiansPerSecond","revolutionsPerMinute"]},"area":{"units":["squareFeet","squareInches","squareMeters","squareCentimeters","squareHectometers","squareMillimeters","acres","hectares","squareYards","circularMils","squareMils"]},"areaPerLength":{"units":["squareFeetPerFoot","squareCentimetersPerMeter","squareMillimetersPerMeter","squareInchesPerFoot","squareMetersPerMeter"]},"areaPerPower":{"units":["squareFeetPerTonOfRefrigeration","squareMetersPerKilowatt","squareFeetPer1000BritishThermalUnitsPerHour"]},"areaPerTorque":{"units":["squareFeetPerKipFoot","squareMetersPerKilonewtonMeter"]},"colorTemperature":{"units":["kelvin"]},"costPerArea":{"units":["currencyPerSquareFoot","currencyPerSquareMeter"]},"currency":{"units":["currency"]},"density":{"units":["kilogramsPerCubicMeter","poundsMassPerCubicInch","poundsMassPerCubicFoot"]},"diffusivity":{"units":["squareFeetPerSecond","squareMetersPerSecond"]},"dynamicViscosity":{"units":["centipoises","kilogramsPerMeterHour","kilogramsPerMeterSecond","newtonSecondsPerSquareMeter","pascalSeconds","poises","poundForceSecondsPerSquareFoot","poundsMassPerFootHour","poundsMassPerFootSecond"]},"electricCapacitance":{"units":["farads"]},"electricCharge":{"units":["coulombs","ampereHours","ampereSeconds"]},"electricConductance":{"units":["mhos","siemens"]},"electricCurrent":{"units":["amperes","kiloamperes","milliamperes"]},"electricInductance":{"units":["henries"]},"electricPotential":{"units":["volts","kilovolts","millivolts"]},"electricResistance":{"units":["ohms"]},"electricResistivity":{"units":["ohmMeters"]},"energy":{"units":["joules","newtonMeters","kilogramForceMeters","poundForceFeet","kilojoules","britishThermalUnits","calories","kilocalories","kilowattHours","therms","ergs"]},"flow":{"units":["cubicFeetPerMinute","cubicFeetPerHour","cubicMetersPerSecond","cubicMetersPerHour","litersPerHour","litersPerMinute","litersPerSecond","usGallonsPerMinute","usGallonsPerHour"]},"flowPerArea":{"units":["cubicFeetPerMinuteSquareFoot","litersPerSecondSquareMeter"]},"flowPerPower":{"units":["cubicFeetPerMinutePerBritishThermalUnitPerHour","cubicFeetPerMinuteTonOfRefrigeration","cubicMetersPerWattSecond","litersPerSecondKilowatt","squareFeetPerKip","squareMetersPerKilonewton"]},"flowPerVolume":{"units":["cubicFeetPerMinuteCubicFoot","litersPerSecondCubicMeter"]},"force":{"units":["newtons","dekanewtons","kilonewtons","meganewtons","kips","kilogramsForce","tonnesForce","usTonnesForce","poundsForce","dynes","ouncesForce"]},"forceDensity":{"units":["kilonewtonsPerCubicMeter","poundsForcePerCubicFoot","kipsPerCubicInch","kipsPerCubicFoot"]},"forcePerLength":{"units":["newtonsPerMeter","dekanewtonsPerMeter","kilonewtonsPerMeter","meganewtonsPerMeter","kipsPerFoot","kilogramsForcePerMeter","tonnesForcePerMeter","poundsForcePerFoot","kipsPerInch"]},"frequency":{"units":["hertz","cyclesPerSecond"]},"friction":{"units":["pascalsPerMeter","feetOfWater39.2DegreesFahrenheitPer100Feet","inchesOfWater60DegreesFahrenheitPer100Feet"]},"heatCapacity":{"units":["britishThermalUnitsPerDegreeFahrenheit","joulesPerKelvin","kilojoulesPerKelvin"]},"heatTransferCoefficient":{"units":["wattsPerSquareMeterKelvin","britishThermalUnitsPerHourSquareFootDegreeFahrenheit"]},"illuminance":{"units":["lux","footcandles"]},"length":{"units":["meters","decimeters","centimeters","millimeters","kilometers","hectometers","feet","inches","miles","yards","microns","nauticalMiles","mils","usSurveyFeet"]},"lengthPerTorque":{"units":["metersPerKilonewtonMeter","feetPerKipFoot"]},"lightingEfficacy":{"units":["lumensPerWatt"]},"luminance":{"units":["footlamberts","candelasPerSquareFoot","candelasPerSquareMeter"]},"luminousFlux":{"units":["lumens"]},"luminousIntensity":{"units":["candelas"]},"magneticFieldStrength":{"units":["oersteds"]},"magneticFlux":{"units":["webers","maxwells"]},"magneticFluxDensity":{"units":["teslas","gauss","gammas"]},"mass":{"units":["kilograms","tonnes","poundsMass","grams","milligrams","nanograms","grains","usTonnesMass","slugs","ouncesMass"]},"massPerArea":{"units":["kilogramsPerSquareMeter","poundsMassPerSquareFoot"]},"massPerLength":{"units":["kilogramsPerMeter","poundsMassPerFoot"]},"massPerTime":{"units":["poundsMassPerHour","poundsMassPerMinute","poundsMassPerSecond","kilogramsPerHour","kilogramsPerMinute","kilogramsPerSecond"]},"number":{"units":["general","fixed","percentage"]},"permeability":{"units":["nanogramsPerPascalSecondSquareMeter","grainsPerHourSquareFootInchMercury"]},"power":{"units":["watts","kilowatts","britishThermalUnitsPerSecond","britishThermalUnitsPerHour","caloriesPerSecond","kilocaloriesPerSecond","voltAmperes","kilovoltAmperes","horsepower","thousandBritishThermalUnitsPerHour","tonsOfRefrigeration"]},"powerDensity":{"units":["wattsPerCubicFoot","wattsPerCubicMeter","britishThermalUnitsPerHourCubicFoot"]},"powerPerArea":{"units":["wattsPerSquareFoot","wattsPerSquareMeter","britishThermalUnitsPerHourSquareFoot"]},"powerPerFlow":{"units":["wattsPerCubicFootPerMinute","wattsPerCubicMeterPerSecond"]},"powerPerLength":{"units":["wattsPerFoot","wattsPerMeter"]},"pressure":{"units":["pascals","kilopascals","megapascals","poundsForcePerSquareInch","inchesOfMercury32DegreesFahrenheit","millimetersOfMercury","atmospheres","bars","feetOfWater39.2DegreesFahrenheit","inchesOfWater60DegreesFahrenheit"]},"ratio":{"units":["fixed","percentage","perMille","ratioTo1","ratioTo10","ratioTo12","1ToRatio"]},"secondMomentOfArea":{"units":["feetToTheFourthPower","inchesToTheFourthPower","millimetersToTheFourthPower","centimetersToTheFourthPower","metersToTheFourthPower"]},"slope":{"units":["percentage","ratioTo1","ratioTo10","ratioTo12","riseDividedBy12Inches","riseDividedBy1Foot","riseDividedBy1000Millimeters","riseDividedBy120Inches","1ToRatio","riseDividedBy10Feet","perMille"]},"solidAngle":{"units":["steradians"]},"specificEnergy":{"units":["joulesPerGram","joulesPerKilogram","britishThermalUnitsPerPound"]},"specificHeatCapacity":{"units":["joulesPerGramDegreeCelsius","britishThermalUnitsPerPoundDegreeFahrenheit","joulesPerKilogramDegreeCelsius"]},"stress":{"units":["pascals","kilopascals","megapascals","poundsForcePerSquareInch","bars","newtonsPerSquareMeter","dekanewtonsPerSquareMeter","kilonewtonsPerSquareMeter","meganewtonsPerSquareMeter","kipsPerSquareFoot","kilogramsForcePerSquareMeter","tonnesForcePerSquareMeter","poundsForcePerSquareFoot","kipsPerSquareInch","kilonewtonsPerSquareCentimeter","newtonsPerSquareMillimeter","kilonewtonsPerSquareMillimeter"]},"temperature":{"units":["fahrenheit","celsius","kelvin","rankine"]},"temperatureInterval":{"units":["fahrenheitInterval","celsiusInterval","kelvinInterval","rankineInterval"]},"thermalConductivity":{"units":["wattsPerMeterKelvin","britishThermalUnitsPerHourFootDegreeFahrenheit"]},"thermalExpansionCoefficient":{"units":["inverseDegreesFahrenheit","inverseDegreesCelsius","micrometersPerMeterDegreeCelsius","microinchesPerInchDegreeFahrenheit"]},"thermalInsulance":{"units":["hourSquareFootDegreesFahrenheitPerBritishThermalUnit","squareMeterKelvinsPerWatt"]},"time":{"units":["milliseconds","seconds","minutes","hours"]},"torque":{"units":["newtonMeters","dekanewtonMeters","kilonewtonMeters","meganewtonMeters","kipFeet","kilogramForceMeters","tonneForceMeters","poundForceFeet"]},"torquePerLength":{"units":["newtonMetersPerMeter","dekanewtonMetersPerMeter","kilonewtonMetersPerMeter","meganewtonMetersPerMeter","kipFeetPerFoot","kilogramForceMetersPerMeter","tonneForceMetersPerMeter","poundForceFeetPerFoot"]},"velocity":{"units":["feetPerMinute","centimetersPerMinute","inchesPerSecond","metersPerSecond","feetPerSecond","kilometersPerSecond","milesPerSecond","kilometersPerHour","milesPerHour"]},"volume":{"units":["cubicYards","cubicFeet","cubicInches","cubicMeters","cubicCentimeters","cubicMillimeters","liters","usGallons"]},"volumePerForce":{"units":["cubicFeetPerKip","cubicMetersPerKilonewton"]},"warpingCoefficient":{"units":["feetToTheSixthPower","inchesToTheSixthPower","millimetersToTheSixthPower","centimetersToTheSixthPower","metersToTheSixthPower"]}}}')
}, function (e, t, n) {
  "use strict";
  n.r(t), n.d(t, "UnitParser", (function () {
    return i
  }));
  var i = {};

  function r(e, t, n, i) {
    if (!e) return NaN;
    var r, o = (e = e.toString()).trim();
    if (0 == o.length) return NaN;
    var a = n.join("| *"),
      s = i.join("| *");
    if (r = o.match(new RegExp("^([+-]?\\d+)(?: *)/(?: *)(\\d+)(?: *)(?:" + s + ") *$"))) return parseFloat(r[1]) / parseFloat(r[2]) / t;
    if (r = o.match(new RegExp("^([+-]?\\d+)(?: *)/(?: *)(\\d+)(?: *)(?:" + a + ")? *$"))) return parseFloat(r[1]) / parseFloat(r[2]);
    var l;
    if (!(r = o.match(/^[+-]? *(?:\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?/i))) return NaN;
    if (l = parseFloat(r[0].replace(/ */g, "")), 0 == (o = (o = o.slice(r[0].length)).replace("-", " ")).length || isNaN(l)) return l;
    var c = Math.sign(l);
    return 0 === c && (c = 1), o.match(new RegExp("^(?: *)(?:" + s + ") *$", "i")) ? l / t : (r = o.match(new RegExp("^ +(\\d+)(?: *)/(?: *)(\\d+)(?: *)(?:" + s + ") *$", "i"))) ? (l + c * parseFloat(r[1]) / parseFloat(r[2])) / t : (r = o.match(new RegExp("^(?: *)(?:" + a + "|-| +-?) *", "i"))) ? 0 == (o = o.slice(r[0].length).trim()).length ? r[0].match(/-/) ? NaN : l : (r = o.match(new RegExp("^(\\d+(?:\\.\\d*)?)(?: *)(?:" + s + ")? *$"))) ? l + c * parseFloat(r[1]) / t : (r = o.match(new RegExp("^(\\d+)(?: *)/(?: *)(\\d+)(?: *)(?:" + s + ")? *$"))) ? l + c * (parseFloat(r[1]) / parseFloat(r[2])) / t : (r = o.match(new RegExp("^(\\d+) +(\\d+)(?: *)/(?: *)(\\d+)(?: *)(?:" + s + ")? *$"))) ? l + c * (parseFloat(r[1]) + parseFloat(r[2]) / parseFloat(r[3])) / t : NaN : NaN
  }
  i.parseFeet = function (e) {
    return r(e, 12, ["ft", "feet", "'", "`", "‘", "’"], ["in", "inch", '\\"', "''", "``", "‘‘", "’’"])
  }, i.parseMeter = function (e) {
    return r(e, 100, ["m", "meter"], ["cm", "centimeter"])
  }, i.parseNumber = function (e, t) {
    switch (t) {
      case "ft":
      case "decimal-ft":
      case "ft-and-fractional-in":
      case "ft-and-decimal-in":
      case "decimal-in":
      case "fractional-in":
        return i.parseFeet(e);
      case "":
      case "m":
      case "cm":
      case "mm":
      case "m-and-cm":
      default:
        return i.parseMeter(e)
    }
  }, i.parsePositiveNumber = function (e, t) {
    var n = i.parseNumber(e, t);
    return n >= 0 ? n : NaN
  }
}, function (e, t, n) {
  "use strict";
  n.r(t), n.d(t, "PDFUtils", (function () {
    return s
  }));
  var i = n(64);

  function r(e) {
    var t = e.impl.model.getDocumentNode(),
      n = t.search(Autodesk.Viewing.BubbleNode.LEAFLET_NODE)[0]._raw(),
      i = {};
    return new Autodesk.Viewing.Document(t.getRootNode()._raw(), "").getLeafletParams(i, t, n), i
  }

  function o(e) {
    var t = new Autodesk.Viewing.Private.TexQuadConfig,
      n = r(e);
    return t.initFromLoadOptions(null, n), t.getBBox()
  }

  function a(e) {
    var t = o(e);
    return i.SceneMath.getNormalizingMatrix(null, t)
  }
  var s = {
    leafletToPdfWorld: function (e, t) {
      var n, r = a(e);
      if (t.applyMatrix4(r), e.model.isLeaflet()) {
        var o = e.model.getMetadata("page_dimensions"),
          s = new THREE.Box3(new THREE.Vector3, new THREE.Vector3(o.page_width, o.page_height, 0));
        n = i.SceneMath.getNormalizingMatrix(void 0, s)
      } else n = i.SceneMath.getNormalizingMatrix(e.model);
      return n = n.getInverse(n), t.applyMatrix4(n), t
    },
    pdfToLeafletWorld: function (e, t) {
      var n = i.SceneMath.getNormalizingMatrix(e.model);
      t.applyMatrix4(n);
      var r = a(e);
      return r = r.getInverse(r), t.applyMatrix4(r), t
    },
    getLeafletLoadOptions: r,
    getLeafletBoundingBox: o,
    getLeafletNormalizingMatrix: a
  }
}, function (e, t, n) {
  "use strict";
  n.r(t), n.d(t, "MeasureEvents", (function () {
    return i
  }));
  var i = {
    MEASUREMENT_CHANGED_EVENT: "measurement-changed",
    UNITS_CALIBRATION_STARTS_EVENT: "units_calibration_starts_event",
    FINISHED_CALIBRATION_FOR_DIMENSION_EVENT: "finished_calibration_for_dimension_event",
    CALIBRATION_REQUIRED_EVENT: "calibration-required",
    OPEN_CALIBRATION_PANEL_EVENT: "open-calibration-panel",
    CLOSE_CALIBRATION_PANEL_EVENT: "close-calibration-panel",
    CLEAR_CALIBRATION_SIZE_EVENT: "clear-calibration-size",
    FINISHED_CALIBRATION: "finished-calibration",
    DISPLAY_UNITS_CHANGED: "display-units-changed",
    MEASUREMENT_MODE_ENTER: "measure-mode-enter",
    MEASUREMENT_MODE_LEAVE: "measure-mode-leave"
  }
}, function (e, t, n) {
  "use strict";
  n.r(t), n.d(t, "Measurement", (function () {
    return a
  }));
  var i = n(264),
    r = n(74),
    o = n(136);

  function a(e, t) {
    this.measurementType = e, this.id = t, this.picks = [], this.closedArea = !1, this.isRestored = !1, this.resetMeasureValues()
  }
  a.prototype.resetMeasureValues = function () {
    this.angle = 0, this.distanceX = 0, this.distanceY = 0, this.distanceZ = 0, this.distanceXYZ = 0, this.result = null
  }, a.prototype.setPick = function (e, t) {
    var n = this.picks[e] = t;
    return n.id = parseInt(e), n
  }, a.prototype.getPick = function (e) {
    var t = this.picks[e];
    return t || (t = this.setPick(e, new i.SnapResult)), t
  }, a.prototype.clonePicks = function (e) {
    var t = [];
    for (var n in this.picks)
      if (this.picks.hasOwnProperty(n)) {
        var i = this.picks[n];
        t.push(i.clone())
      } return t
  }, a.prototype.countPicks = function () {
    return Object.keys(this.picks).length
  }, a.prototype.getMaxNumberOfPicks = function () {
    switch (this.measurementType) {
      case r.MeasurementTypes.MEASUREMENT_DISTANCE:
        return 2;
      case r.MeasurementTypes.MEASUREMENT_ANGLE:
        return 3;
      case r.MeasurementTypes.MEASUREMENT_AREA:
        return this.closedArea ? this.countPicks() : Number.MAX_VALUE - 1
    }
  }, a.prototype.hasPick = function (e) {
    return this.picks[e] && !this.picks[e].isEmpty() || this.isRestored
  }, a.prototype.isComplete = function () {
    var e = this.countPicks() === this.getMaxNumberOfPicks();
    for (var t in this.picks)
      if (this.picks.hasOwnProperty(t) && !(e = e && this.hasPick(t))) break;
    return e
  }, a.prototype.isEmpty = function () {
    var e = !0;
    for (var t in this.picks)
      if (this.picks.hasOwnProperty(t) && !(e = e && !this.hasPick(t))) break;
    return e
  }, a.prototype.clearPick = function (e) {
    this.picks[e] && this.picks[e].clear(), this.resetMeasureValues()
  }, a.prototype.clearAllPicks = function () {
    for (var e in this.picks) this.picks.hasOwnProperty(e) && this.clearPick(e)
  }, a.prototype.hasEqualPicks = function (e, t) {
    if (!e || !t) return !1;
    if (e.geomType === t.geomType) {
      var n = Object(o.getSnapResultPosition)(e),
        i = Object(o.getSnapResultPosition)(t);
      return Object(o.isEqualVectors)(n, i, o.EPSILON)
    }
    return !1
  }, a.prototype.computeResult = function (e, t) {
    if (this.resetMeasureValues(), !t.model) return this.result = null, !1;
    var n = this.result = Object(o.computeResult)(e, this.measurementType, t);
    if (null === n) return !this.isComplete();
    switch (n.type) {
      case r.MeasurementTypes.MEASUREMENT_DISTANCE:
        return this.distanceXYZ = n.distanceXYZ, this.distanceX = n.distanceX, this.distanceY = n.distanceY, this.distanceZ = n.distanceZ, !0;
      case r.MeasurementTypes.MEASUREMENT_ANGLE:
        return this.angle = isNaN(n.angle) ? 0 : n.angle, !0;
      case r.MeasurementTypes.MEASUREMENT_AREA:
        return this.area = n.area, !0;
      default:
        return !1
    }
  }, a.prototype.getGeometry = function (e) {
    return {
      type: this.picks[e].geomType,
      geometry: this.picks[e].getGeometry()
    }
  }, a.prototype.attachIndicator = function (e, t, n) {
    this.indicator = new n(e, this, t), this.indicator.init()
  }
}, function (e, t, n) {
  "use strict";

  function i() {
    this.names = ["unnamed"], this.getNames = function () {
      return this.names
    }, this.getName = function () {
      return this.names[0]
    }, this.getPriority = function () {
      return 0
    }, this.register = function () {}, this.deregister = function () {}, this.activate = function (e, t) {}, this.deactivate = function (e) {}, this.update = function (e) {
      return !1
    }, this.handleSingleClick = function (e, t) {
      return !1
    }, this.handleDoubleClick = function (e, t) {
      return !1
    }, this.handleSingleTap = function (e) {
      return !1
    }, this.handleDoubleTap = function (e) {
      return !1
    }, this.handleKeyDown = function (e, t) {
      return !1
    }, this.handleKeyUp = function (e, t) {
      return !1
    }, this.handleWheelInput = function (e) {
      return !1
    }, this.handleButtonDown = function (e, t) {
      return !1
    }, this.handleButtonUp = function (e, t) {
      return !1
    }, this.handleMouseMove = function (e) {
      return !1
    }, this.handleGesture = function (e) {
      return !1
    }, this.handleBlur = function (e) {
      return !1
    }, this.handleResize = function () {}
  }
  n.r(t), n.d(t, "ToolInterface", (function () {
    return i
  }))
}, function (e, t, n) {
  "use strict";
  n.r(t), n.d(t, "ViewCube", (function () {
    return g
  }));
  var i = n(0),
    r = n(146),
    o = n(36),
    a = n(142),
    s = n(1),
    l = n(3),
    c = n(9),
    u = n(6),
    h = n(12),
    d = Autodesk.Viewing,
    f = function (e) {
      return Math.abs(e - 1) < 1e-12
    },
    p = function (e) {
      return !(!f(e.length()) || !f(Math.abs(e.x)) && !f(Math.abs(e.y)) && !f(Math.abs(e.z)))
    };

  function m(e) {
    var t = e / 2,
      n = 16711680,
      r = 65280,
      o = 255,
      a = new i.Matrix4,
      s = [],
      l = new i.PlaneBufferGeometry(50, 50),
      c = function (e, t) {
        var n = d.getGlobal().document.createElement("canvas");
        n.width = n.height = 128;
        var r = n.getContext("2d");
        r.font = "128px Arial", r.fillStyle = "rgba(255,255,255,1)", r.textAlign = "center", r.textBaseline = "middle", r.fillText(e, n.width / 2, n.height / 2);
        var o = new i.Texture(n);
        return o.needsUpdate = !0, new i.Mesh(l, new i.MeshBasicMaterial({
          map: o,
          side: i.DoubleSide,
          transparent: !0,
          color: t,
          depthWrite: !1,
          depthTest: !0
        }))
      };
    this.triadScene = new i.Scene, this.triadLabelScene = new i.Scene;
    var u = new i.BoxGeometry(e, 10, 10),
      h = new i.Mesh(u, new i.MeshBasicMaterial({
        color: n,
        shading: i.SmoothShading
      })),
      m = new i.Mesh(u, new i.MeshBasicMaterial({
        color: r,
        shading: i.SmoothShading
      })),
      g = new i.Mesh(u, new i.MeshBasicMaterial({
        color: o,
        shading: i.SmoothShading
      }));
    h.applyMatrix(a.makeTranslation(5, -t, -t)), m.applyMatrix(a.makeRotationZ(Math.PI / 2)), m.applyMatrix(a.makeTranslation(-t, 5, -t)), g.applyMatrix(a.makeRotationY(Math.PI / 2)), g.applyMatrix(a.makeTranslation(-t, -t, 5)), this.triadScene.add(h), this.triadScene.add(m), this.triadScene.add(g);
    var v = c("X", n),
      y = c("Y", r),
      b = c("Z", o),
      _ = function (e) {
        var n = -(50 + t) / 2 - 20,
          i = t + 50;
        v.position.set(i, n, n), y.position.set(n, i, n), b.position.set(n, n, i), e && (v.position.applyQuaternion(e), y.position.applyQuaternion(e), b.position.applyQuaternion(e))
      };
    _(), s.push(v), s.push(y), s.push(b), this.triadLabelScene.add(v), this.triadLabelScene.add(y), this.triadLabelScene.add(b), this.orient = function (e, t) {
      if (p(e) && p(t) && !(this.up && this.front && e.equals(this.up) && t.equals(this.front))) {
        this.up = e.clone(), this.front = t.clone();
        var n, r, o, a, s = 0,
          l = 0;
        e.x ? (n = "x", r = "y", o = "z", s = 2 * Math.PI / 3) : e.y ? (n = "y", r = "z", o = "x") : e.z && (n = "z", r = "x", o = "y", s = -2 * Math.PI / 3), f(-t[r]) ? l = Math.PI : t[o] && (l = -t[o] * e[n] * Math.PI / 2), a = f(-e[n]) ? Math.PI : 0;
        var c = new i.Quaternion,
          u = new i.Quaternion,
          h = new i.Vector3(1, 1, 1);
        h.normalize(), u.setFromAxisAngle(h, s), c.setFromAxisAngle(e, l), u.multiply(c), c.setFromAxisAngle(t, a), u.multiply(c), _(u), this.triadScene.setRotationFromQuaternion(u)
      }
    }, this.getSprites = function () {
      return s
    }
  }

  function g(e, t, n, d, f) {
    var g = this;
    h.GlobalManagerMixin.call(this);
    var v = t,
      y = t.camera;
    t.setCube(this), g.currentFace = "front", g.showTriad = f && f.showTriad, g.localizeResourcePath = d;
    var b, _, x, w, E, A, S, M, T, C, P, L, D, I = ["top,front", "top right", "top,left", "top,back", "bottom,front", "bottom,right", "bottom,left", "bottom,back", "left,front", "front,right", "right,back", "back,left"],
      R = ["front,top,right", "back,top,right", "front,top,left", "back,top,left", "front,bottom,right", "back,bottom,right", "front,bottom,left", "back,bottom,left"],
      O = ["Go Home", null, "Orthographic", "Perspective", "Perspective with Ortho Faces", null, "Set current view as Home", "Focus and set as Home", "Reset Home", null, "Set current view as Front", "Set current view as Top", "Reset orientation"],
      k = [!0, null, !0, !0, !0, null, !0, !0, !0, null, !0, !0, !0],
      N = [null, null, function () {
        return !v.orthographicFaces && !y.isPerspective
      }, function () {
        return !v.orthographicFaces && y.isPerspective
      }, function () {
        return v.orthographicFaces
      }, null, null, null, null, null, null, null, null],
      F = [];
    g.pcam = new i.PerspectiveCamera(45, 1, 1, 2e3), g.ocam = new i.OrthographicCamera(-265, 265, 265, -265, -1e3, 1e3), g.ocam.fov = g.pcam.fov, g.ocam.aspect = g.pcam.aspect, g.camera = y.isPerspective ? g.pcam : g.ocam, g.camera.position.copy(y.position), g.center = new i.Vector3(0, 0, 0), g.camera.lookAt(g.center);
    var U, V, B, z, G, H, W, j = [],
      q = [],
      X = [],
      Y = [],
      K = [],
      Q = null,
      Z = null,
      J = null,
      $ = 0,
      ee = 0,
      te = !0,
      ne = !1,
      ie = !1,
      re = !1,
      oe = -1 != navigator.userAgent.search("Chrome"),
      ae = -1 != navigator.platform.search("Win32"),
      se = !1,
      le = !1,
      ce = null,
      ue = [];
    this.width = 0, this.height = 0, this.animSpeed = 500, this.animate = !0, this.compass = !1, this.viewScaleFactorCompass = 1.5, this.viewScale = 1, this.draggable = !0, this.wantHomeButton = !1, this.wantRollArrows = !0, this.wantContextMenu = !0, this.inactiveOpacity = .5;
    var he = function (e) {
        var t = e.getBoundingClientRect();
        return {
          x: t.left,
          y: t.top,
          w: t.width,
          h: t.height
        }
      },
      de = function (e) {
        e.preventDefault(), e.stopPropagation();
        var t = g.getDocument();
        ie = t.pointerLockElement === n || t.mozPointerLockElement === n || t.webkitPointerLockElement === n
      },
      fe = function () {
        g.renderCompass ? (g.rollMesh.position.set($ + 30, $ + 30, 0), g.rollLeftMesh.position.set($ + 30, 1.5 * $, .1), g.rollRightMesh.position.set(1.5 * $, $ + 30, .1), g.contextMesh.position.set(1.6 * $, -1.6 * $, 0)) : (g.rollMesh.position.set(.5 * $ + 20, .5 * $ + 20, 0), g.rollLeftMesh.position.set(.5 * $ + 20, $ + 20, .1), g.rollRightMesh.position.set($ + 20, .5 * $ + 20, .1), g.contextMesh.position.set($, -$, 0))
      },
      pe = function () {
        v.navApi.isActionEnabled("orbit") && (n.style.opacity = "1.0", le = !1), requestAnimationFrame(g.render)
      },
      me = function (e) {
        if (le || v.viewCubeMenuOpen || !v.navApi.isActionEnabled("orbit")) v.navApi.isActionEnabled("orbit") && (n.style.opacity = 1);
        else {
          var t = Math.max(4 * Math.abs((e.clientX - W.x) / W.w - .5) - 1, 0),
            i = Math.max(4 * Math.abs((e.clientY - W.y) / W.h - .5) - 1, 0),
            r = Math.max(0, Math.min(Math.sqrt(t * t + i * i), 1));
          n.style.opacity = 1 - r * (1 - g.inactiveOpacity)
        }
      },
      ge = function () {
        v.viewCubeMenuOpen || (n.style.opacity = g.inactiveOpacity, le = !0, requestAnimationFrame(g.render))
      },
      ve = function (e) {
        var t = new Image,
          n = g.getWindow(),
          r = u.endpoint.getUseCredentials() && (-1 === e.indexOf("://") || -1 !== e.indexOf(n.location.host));
        t.crossOrigin = r ? "use-credentials" : "anonymous";
        var o = new i.Texture(t);
        return t.onload = function () {
          o.needsUpdate = !0, ++ee >= 11 && requestAnimationFrame(g.render)
        }, t.src = e, o
      },
      ye = function () {
        var e, t, n = [],
          i = [];
        for (n[0] = Le(0, 0), n[1] = Le(0, Math.PI / 2), n[2] = Le(0, -Math.PI / 2), n[3] = Le(0, Math.PI), n[4] = Le(Math.PI / 2, 0), n[5] = Le(Math.PI / 2, Math.PI / 2), n[6] = Le(Math.PI / 2, -Math.PI / 2), n[7] = Le(Math.PI / 2, Math.PI), i[0] = Pe(0, 0, 0), i[1] = Pe(0, Math.PI / 2, 0), i[2] = Pe(0, -Math.PI / 2, 0), i[3] = Pe(0, Math.PI, 0), i[4] = Pe(Math.PI / 2, 0, 0), i[5] = Pe(Math.PI / 2, Math.PI / 2, 0), i[6] = Pe(Math.PI / 2, -Math.PI / 2, 0), i[7] = Pe(Math.PI / 2, Math.PI, 0), i[8] = Pe(0, 0, Math.PI / 2), i[9] = Pe(0, 0, -Math.PI / 2), i[10] = Pe(-Math.PI / 2, 0, -Math.PI / 2), i[11] = Pe(-Math.PI, 0, -Math.PI / 2), j.push(Ce(0, 0)), j[0].name = "front", X.push(j[0]), K.push(j[0]), x.add(j[0]), j.push(Ce(0, Math.PI / 2)), j[1].name = "right", X.push(j[1]), K.push(j[1]), x.add(j[1]), j.push(Ce(0, Math.PI)), j[2].name = "back", X.push(j[2]), K.push(j[2]), x.add(j[2]), j.push(Ce(0, -Math.PI / 2)), j[3].name = "left", X.push(j[3]), K.push(j[3]), x.add(j[3]), j.push(Ce(Math.PI / 2, 0)), j[4].name = "bottom", X.push(j[4]), K.push(j[4]), x.add(j[4]), j.push(Ce(-Math.PI / 2, 0)), j[5].name = "top", X.push(j[5]), K.push(j[5]), x.add(j[5]), e = j.length, t = 0; t < n.length; t++) j.push(n[t]), j[e + t].name = R[t], x.add(j[e + t]), X.push(j[e + t]), K.push(j[e + t]);
        for (e = j.length, t = 0; t < i.length; t++) j.push(i[t]), j[e + t].name = I[t], x.add(j[e + t]), X.push(j[e + t]), K.push(j[e + t])
      },
      be = function (e, t, n) {
        var r, o = new i.Vector3;
        if ("PerspectiveCamera" === t.type) o.copy(e), o.unproject(t), r = new i.Raycaster(t.position, o.sub(t.position).normalize());
        else {
          var a = new i.Vector3;
          a.copy(e), a.unproject(t), o.copy(t.position).negate().normalize(), r = new i.Raycaster(a, o)
        }
        return r.intersectObjects(n)
      },
      _e = function (e, t) {
        var n = e.clientX - t.x,
          r = e.clientY - t.y;
        return n = n / t.w * 2 - 1, r = (t.h - r) / t.h * 2 - 1, new i.Vector3(n, r, .5)
      };

    function xe(e, t) {
      var n = {};
      return 0 === e.type.indexOf("touch") ? e.touches.length > 0 ? (n.clientX = e.touches[0].clientX, n.clientY = e.touches[0].clientY, n.pageX = e.touches[0].pageX, n.pageY = e.touches[0].pageY, n.screenX = e.touches[0].screenX, n.screenY = e.touches[0].screenY, n.movementX = n.screenX - t.prevX, n.movementY = n.screenY - t.prevY, n.which = v.navApi.getUseLeftHandedInput() ? 3 : 1) : n = t.prevCoords : (n.clientX = e.clientX, n.clientY = e.clientY, n.pageX = e.pageX, n.pageY = e.pageY, n.screenX = e.screenX, n.screenY = e.screenY, n.which = e.which, ne ? (n.movementX = e.movementX || e.mozMovementX || e.webkitMovementX || 0, n.movementY = e.movementY || e.mozMovementY || e.webkitMovementY || 0) : (n.movementX = n.screenX - t.prevX, n.movementY = n.screenY - t.prevY)), t.prevX = n.screenX, t.prevY = n.screenY, t.prevCoords = n, n
    }
    var we = function (e) {
        if (e.preventDefault(), e.stopPropagation(), v.navApi.isActionEnabled("orbit") && !v.currentlyAnimating) {
          var t, i = xe(e, g);
          W = he(n), n.removeEventListener("mousemove", Me, !1), g.addDocumentEventListener("mouseup", Se, !1), g.addDocumentEventListener("touchend", Se, !1), v.navApi.getUsePivotAlways() || (v.pivot.copy(v.center), v.navApi.setPivotPoint(v.center), v.navApi.setPivotSetFlag(!1)), v.startInteraction(i.pageX, i.pageY);
          var r = v.navApi.getUseLeftHandedInput() ? 1 : 3;
          i.which !== r && (g.animSpeed <= 0 ? s.logger.error("animSpeed cannot be 0 or less, use ViewCube.animate flag to turn on and off animation", Object(c.errorCodeString)(c.ErrorCodes.VIEWER_INTERNAL_ERROR)) : (t = _e(i, W), be(t, g.camera, K).length > 0 && (Re(), g.draggable && (g.addDocumentEventListener("mousemove", Ee, !1), g.addDocumentEventListener("touchmove", Ee, !1), ne && (n.requestPointerLock(), re = oe && ae)))))
        }
      },
      Ee = function e(t) {
        if (t.preventDefault(), t.stopPropagation(), g.animSpeed <= 0) return g.removeDocumentEventListener("mousemove", e, !1), g.removeDocumentEventListener("touchmove", e, !1), void s.logger.error("animSpeed cannot be 0 or less", Object(c.errorCodeString)(c.ErrorCodes.VIEWER_INTERNAL_ERROR));
        if (!v.currentlyAnimating) {
          var n = xe(t, g);
          ne && re && (re = !1, n.movementX = n.movementY = 0), ie && (n.movementX > 300 || n.movementY > 300) && (n.movementX = 0, n.movementY = 0), n.movementX !== n.movementY || 0 !== n.movementX ? (te = !1, se = !0, v.showPivot(!0), v.currentCursor = new i.Vector2(n.pageX, n.pageY), v.orbit(v.currentCursor, v.startCursor, new i.Vector3(-n.movementX, n.movementY, 0), v.startState), g.camera.lookAt(g.center), requestAnimationFrame(g.render)) : v.currentlyAnimating = !1
        }
      },
      Ae = function (e) {
        (e || (g.removeDocumentEventListener("mouseup", Se, !1), g.removeDocumentEventListener("touchend", Se, !1)), g.removeDocumentEventListener("mousemove", Ee, !1), g.removeDocumentEventListener("touchmove", Ee, !1), n.addEventListener("mousemove", Me, !1), ie) && g.getDocument().exitPointerLock()
      };
    this.registerOnViewTypeChangedCb = function (e) {
      e instanceof Function && (ce = e)
    }, this.setViewType = function (e) {
      switch (e) {
        case 1:
          g.camera = g.ocam;
          break;
        case 2:
          g.camera = g.pcam;
          break;
        case 3:
          g.camera = te ? g.ocam : g.pcam;
          break;
        default:
          return
      }
      ce && ce(e)
    };
    var Se = function (e) {
      var t, i, r;
      if (e.preventDefault(), e.stopPropagation(), v.currentlyAnimating || se) return v.endInteraction(), v.showPivot(!1), se = !1, void Ae(!1);
      var o = xe(e, g);
      if (v.viewCubeMenuOpen) {
        var a = o.clientX - W.x,
          l = o.clientY - W.y;
        if (v.menuOrigin.x <= a && a <= v.menuOrigin.x + v.menuSize.x && v.menuOrigin.y <= l && l <= v.menuOrigin.y + v.menuSize.y) {
          var c = Math.floor((l - 5 - v.menuOrigin.y) / 25),
            u = function (e) {
              s.logger.track({
                name: "navigation/" + e,
                aggregate: "count"
              })
            };
          switch (c) {
            case 0:
              u("home"), v.goHome();
              break;
            case 1:
              u("setortho");
            case 2:
              u("setpersp");
            case 3:
              g.setViewType(c);
              break;
            case 4:
              u("sethome"), v.setCurrentViewAsHome(!1);
              break;
            case 5:
              u("focushome"), v.setCurrentViewAsHome(!0);
              break;
            case 6:
              u("resethome"), v.resetHome();
              break;
            case 7:
              u("setfront"), v.setCurrentViewAsFront();
              break;
            case 8:
              u("settop"), v.setCurrentViewAsTop();
              break;
            case 9:
              v.resetOrientation()
          }
        }
        return v.viewCubeMenuOpen = !1, v.removeDropdownMenu(n), (o.clientX < W.x || o.clientX > W.w + W.x || o.clientY < W.y || o.clientY > W.h + W.y) && ge(), g.mouseMoveSave && g.processMouseMove(g.mouseMoveSave), v.endInteraction(), void Ae(!1)
      }
      var h = v.navApi.getUseLeftHandedInput() ? 1 : 3;
      if (o.which === h) return v.viewCubeMenuOpen = !0, v.drawDropdownMenu(O, k, N, o.clientX, o.clientY, n, W), void Ae(!0);
      var d = _e(o, W);
      if (t = be(d, g.camera, K), i = be(d, M, q), r = be(d, M, Y), i.length > 0 && te) {
        for (var f = ["top", "bottom", "right", "left", "front", "back"], p = v.getOrientation(), m = {
            front: {
              up: [0, 1, 2, 3],
              right: [2, 3, 1, 0],
              down: [1, 0, 3, 2],
              left: [3, 2, 0, 1]
            },
            right: {
              up: [0, 1, 5, 4],
              right: [5, 4, 1, 0],
              down: [1, 0, 4, 5],
              left: [4, 5, 0, 1]
            },
            left: {
              up: [0, 1, 4, 5],
              right: [4, 5, 1, 0],
              down: [1, 0, 5, 4],
              left: [5, 4, 0, 1]
            },
            back: {
              up: [0, 1, 3, 2],
              right: [3, 2, 1, 0],
              down: [1, 0, 2, 3],
              left: [2, 3, 0, 1]
            },
            top: {
              up: [5, 4, 2, 3],
              right: [2, 3, 4, 5],
              down: [4, 5, 3, 2],
              left: [3, 2, 5, 4]
            },
            bottom: {
              up: [4, 5, 2, 3],
              right: [2, 3, 5, 4],
              down: [5, 4, 3, 2],
              left: [3, 2, 4, 5]
            }
          } [g.currentFace][p], b = 0; b < 4; b++)
          if (i[0].object === q[b]) {
            E = f[m[b]];
            break
          } v.calculateCubeTransform(E), g.currentFace = E, v.elapsedTime = 0, v.sphericallyInterpolateTransition()
      }
      if (r.length > 0) {
        if (v.elapsedTime = 0, g.wantHomeButton && r[0].object === Y[G]) return v.goHome(), void Ae(!1);
        if (g.wantContextMenu && r[0].object === Y[H]) return v.viewCubeMenuOpen = !0, v.drawDropdownMenu(O, k, N, o.clientX, o.clientY, n, W), void Ae(!0);
        if (g.wantRollArrows && te && (r[0].object === Y[V] || r[0].object === Y[B])) {
          var _ = r[0].object === Y[B],
            x = {
              center: v.center.clone(),
              position: y.position.clone(),
              pivot: y.pivot.clone(),
              fov: y.fov,
              worldUp: v.sceneUpDirection.clone(),
              isOrtho: !1 === y.isPerspective
            },
            w = v.center.clone().sub(y.position).normalize();
          _ ? x.up = y.up.clone().cross(w) : (x.up = y.up.clone().multiplyScalar(-1), x.up.cross(w)), x.up.normalize(), v.elapsedTime = 0, v.animateTransition(x)
        }
      }
      if (t.length > 0) {
        var E = t[0].object.name;
        g.mouseMoveSave = e, g.cubeRotateTo(E)
      }
      Ae(!1)
    };
    this.cubeRotateTo = function (e) {
      g.currentFace = e, v.orthographicFaces && -1 !== g.currentFace.indexOf(",") && v.setCameraOrtho(!1), v.calculateCubeTransform(g.currentFace), v.elapsedTime = 0, v.sphericallyInterpolateTransition((function () {
        g.mouseMoveSave && g.processMouseMove(g.mouseMoveSave)
      }))
    }, this.processMouseMove = function (e) {
      var t, n, i;
      if (v.viewCubeMenuOpen || v.currentlyAnimating) g.mouseMoveSave = e;
      else {
        g.mouseMoveSave = null;
        var r = xe(e, g),
          o = _e(r, W);
        if (t = be(o, g.camera, X), n = be(o, M, q), i = be(o, M, Y), Q && !se && (Q.material.color.setHex(12040636), Q = null, requestAnimationFrame(g.render)), n.length > 0 && !se) {
          Q = n[0].object;
          for (var a = U.children.length; --a >= 0;)
            if (Q === q[a]) {
              (Q = U.children[a]).material.color.setHex(45055);
              break
            } requestAnimationFrame(g.render)
        }
        Z && !se && (Z.material.opacity = 0, Z = null, requestAnimationFrame(g.render)), t.length > 0 && !se && ((Z = t[0].object).material.opacity = .3, requestAnimationFrame(g.render)), i.length > 0 && !se ? J !== i[0].object && (g.wantHomeButton && i[0].object === Y[G] ? (J = i[0].object, Y[G].material.map = ue[0]) : g.wantRollArrows && i[0].object === Y[V] ? (J = i[0].object, Y[z].material.map = ue[1]) : g.wantRollArrows && i[0].object === Y[B] ? (J = i[0].object, Y[z].material.map = ue[2]) : g.wantContextMenu && i[0].object === Y[H] ? (J = i[0].object, Y[H].material.map = ue[6]) : g.wantHomeButton && J === Y[G] ? (J = null, Y[G].material.map = ue[3]) : !g.wantRollArrows || J !== Y[V] && J !== Y[B] && J !== Y[z] ? g.wantContextMenu && J === Y[H] && (J = null, Y[H].material.map = ue[5]) : (J = null, Y[z].material.map = ue[4]), requestAnimationFrame(g.render)) : null === J || se || (g.wantHomeButton && J === Y[G] ? (J = null, Y[G].material.map = ue[3]) : !g.wantRollArrows || J !== Y[V] && J !== Y[B] && J !== Y[z] ? g.wantContextMenu && J === Y[H] && (J = null, Y[H].material.map = ue[5]) : (J = null, Y[z].material.map = ue[4]), requestAnimationFrame(g.render))
      }
    };
    var Me = function (e) {
        v.navApi.isActionEnabled("orbit") && g.processMouseMove(e)
      },
      Te = function () {
        W = he(n), g.width = n.offsetWidth, g.height = n.offsetHeight, g.pcam.aspect = g.ocam.aspect = g.width / g.height, g.pcam.updateProjectionMatrix(), g.ocam.updateProjectionMatrix(), g.camera.topFov = g.camera.bottomFov = g.camera.fov / 2, g.camera.leftFov = g.camera.rightFov = g.camera.aspect * g.camera.fov / 2, g.pcam.aspect = g.ocam.aspect = g.camera.aspect, g.pcam.topFov = g.ocam.topFov = g.camera.topFov, g.pcam.bottomFov = g.ocam.bottomFov = g.camera.bottomFov, g.pcam.leftFov = g.ocam.leftFov = g.camera.leftFov, g.pcam.rightFov = g.ocam.rightFov = g.camera.rightFov, g.renderer.setSize(g.width, g.height), requestAnimationFrame(g.render)
      },
      Ce = function (e, t) {
        var n, r = Math.floor(.45 * $ / 2) || 45,
          o = Math.floor(.6 * $ / 2) || 60,
          a = r + o,
          s = new i.Geometry,
          l = new i.Vector3(0, 0, 0),
          c = new i.Vector3(o, -o, a),
          u = new i.Vector3(o, o, a),
          h = new i.Vector3(-o, o, a),
          d = new i.Vector3(-o, -o, a);
        return s.vertices.push(l), s.vertices.push(c), s.vertices.push(u), s.vertices.push(h), s.vertices.push(d), s.faces.push(new i.Face3(1, 2, 3)), s.faces.push(new i.Face3(1, 3, 4)), s.applyMatrix((new i.Matrix4).makeRotationX(e)), s.applyMatrix((new i.Matrix4).makeRotationY(t)), s.computeFaceNormals(), s.computeVertexNormals(), n = new i.MeshBasicMaterial({
          overdraw: !0,
          opacity: 0,
          color: 45055,
          transparent: !0
        }), new i.Mesh(s, n)
      },
      Pe = function (e, t, n) {
        var r, o = Math.floor(.45 * $ / 2) || 45,
          a = Math.floor(.6 * $ / 2) || 60,
          s = o + a,
          l = new i.Geometry,
          c = new i.Vector3(a, s, s),
          u = new i.Vector3(-a, s, s),
          h = new i.Vector3(-a, a, s),
          d = new i.Vector3(a, a, s),
          f = new i.Vector3(a, s, a),
          p = new i.Vector3(-a, s, a),
          m = new i.Vector3(-a, s, s),
          g = new i.Vector3(a, s, s);
        return l.vertices.push(c), l.vertices.push(u), l.vertices.push(h), l.vertices.push(d), l.vertices.push(f), l.vertices.push(p), l.vertices.push(m), l.vertices.push(g), l.faces.push(new i.Face3(0, 1, 2)), l.faces.push(new i.Face3(0, 2, 3)), l.faces.push(new i.Face3(4, 5, 6)), l.faces.push(new i.Face3(4, 6, 7)), l.applyMatrix((new i.Matrix4).makeRotationX(e)), l.applyMatrix((new i.Matrix4).makeRotationY(t)), l.applyMatrix((new i.Matrix4).makeRotationZ(n)), l.computeFaceNormals(), l.computeVertexNormals(), r = new i.MeshBasicMaterial({
          overdraw: !0,
          opacity: 0,
          color: 45055,
          transparent: !0
        }), new i.Mesh(l, r)
      },
      Le = function (e, t) {
        var n, r = Math.floor(.45 * $ / 2) || 45,
          o = Math.floor(.6 * $ / 2) || 60,
          a = r + o,
          s = new i.Geometry,
          l = new i.Vector3(a, a, a),
          c = new i.Vector3(o, a, a),
          u = new i.Vector3(o, o, a),
          h = new i.Vector3(a, o, a),
          d = new i.Vector3(a, a, o),
          f = new i.Vector3(a, a, a),
          p = new i.Vector3(a, o, a),
          m = new i.Vector3(a, o, o),
          g = new i.Vector3(a, a, a),
          v = new i.Vector3(a, a, o),
          y = new i.Vector3(o, a, o),
          b = new i.Vector3(o, a, a);
        return s.vertices.push(l), s.vertices.push(c), s.vertices.push(u), s.vertices.push(h), s.vertices.push(d), s.vertices.push(f), s.vertices.push(p), s.vertices.push(m), s.vertices.push(g), s.vertices.push(v), s.vertices.push(y), s.vertices.push(b), s.faces.push(new i.Face3(0, 1, 2)), s.faces.push(new i.Face3(0, 2, 3)), s.faces.push(new i.Face3(4, 5, 6)), s.faces.push(new i.Face3(4, 6, 7)), s.faces.push(new i.Face3(8, 9, 10)), s.faces.push(new i.Face3(8, 10, 11)), s.applyMatrix((new i.Matrix4).makeRotationX(e)), s.applyMatrix((new i.Matrix4).makeRotationY(t)), s.computeFaceNormals(), s.computeVertexNormals(), n = new i.MeshBasicMaterial({
          overdraw: !0,
          opacity: 0,
          color: 45055,
          transparent: !0
        }), new i.Mesh(s, n)
      },
      De = function (e) {
        var t = v.cubeFront.clone(),
          n = v.sceneUpDirection.clone(),
          r = t.clone().cross(n);
        n.copy(r).cross(t), t.normalize(), n.normalize(), r.normalize();
        var o = new i.Vector3(t.x, n.x, r.x).multiplyScalar(e.x);
        return o.add(new i.Vector3(t.y, n.y, r.y).multiplyScalar(e.y)), o.add(new i.Vector3(t.z, n.z, r.z).multiplyScalar(e.z)), o
      };
    this.render = function () {
      g.camera = y.isPerspective ? g.pcam : g.ocam;
      var e = g.compass ? g.viewScaleFactorCompass * g.viewScale : g.viewScale,
        t = v.center.clone().sub(y.position).normalize(),
        n = y.up.normalize(),
        r = new i.Matrix4;
      t = De(t), n = De(n), g.camera.position.copy(t), g.camera.position.multiplyScalar(-e / g.camera.position.length()), g.camera.up = n.normalize(), g.camera.lookAt(g.center), Ie();
      var o = g.renderTriad && p(v.sceneUpDirection) && p(v.sceneFrontDirection),
        a = g.renderer;
      if (a) {
        for (var s = 0; s < F.length; s++) r.lookAt(g.camera.position, F[s].position, g.camera.up), F[s].setRotationFromMatrix(r);
        a.clear(), a.render(b, g.camera), a.render(_, g.camera), a.render(w, g.camera), o && (E.orient(v.sceneUpDirection, v.sceneFrontDirection.clone().multiplyScalar(-1)), a.render(E.triadScene, g.camera), a.render(E.triadLabelScene, g.camera)), a.render(x, g.camera), g.renderCompass && a.render(S, g.camera), a.render(A, M)
      }
    }, this.getScreenShot = function (e) {
      return new Promise((function (e, t) {
        var n = g.renderer;
        if (!n) return t("No renderer");
        var i = g.getDocument().createElement("canvas");
        i.width = g.width, i.height = g.height;
        var r = i.getContext("2d");
        r.fillStyle = "#FFFFFF", r.fillRect(0, 0, g.width, g.height), n.domElement.toBlob((function (t) {
          var n = new Image,
            o = g.getWindow();
          n.src = o.URL.createObjectURL(t), n.onload = function () {
            r.drawImage(n, 0, 0, g.width, g.height), o.URL.revokeObjectURL(n.src), i.toBlob((function (t) {
              e(t)
            }), "image/png")
          }
        }), "image/png")
      }))
    };
    var Ie = function () {
        !(te = v.isFaceView()) || le || v.currentlyAnimating ? Re() : Oe(), le ? ke() : Ne(), le ? Fe() : Ue()
      },
      Re = function () {
        A.remove(U), Y[z].material.opacity = 0, Y[H].material.opacity = 0
      },
      Oe = function () {
        A.add(U);
        var e = g.wantRollArrows ? 1 : 0;
        Y[z].material.opacity = e, Y[H].material.opacity = e
      },
      ke = function () {
        D.material.opacity = Object(l.isMobileDevice)() ? 1 : 0
      },
      Ne = function () {
        D.material.opacity = g.wantContextMenu ? 1 : 0
      },
      Fe = function () {
        P.material.opacity = 0
      },
      Ue = function () {
        P.material.opacity = g.wantHomeButton ? 1 : 0
      };
    this.refreshCube = function () {
        Te()
      }, this.setSize = function (e, t) {
        if (g.width = e, g.height = t, n.children.length > 1)
          for (var i = 1; i < n.children.length; i++) n.children[i].style.bottom = (g.height / 5).toString() + "px";
        Te()
      }, this.useTransparency = function (e) {
        le = e, e ? (n.onmouseover = pe, n.onmousemove = me, n.onmouseout = ge, ge()) : (n.onmouseover = null, n.onmouseout = null, n.onmousemove = null, n.style.opacity = "1.0")
      }, this.showTriad = function (e) {
        e !== g.renderTriad && (g.renderTriad = e, requestAnimationFrame(g.render))
      }, this.showCompass = function () {
        var e = !(arguments.length > 0 && void 0 !== arguments[0]) || arguments[0];
        this.initCompass(), g.renderCompass !== e && (g.prevRenderCompass = g.renderCompass, g.renderCompass = e, fe(), requestAnimationFrame(g.render))
      }, this.setCompassRotation = function () {
        var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 0;
        this.initCompass();
        var t = e - g.northAngle;
        0 !== t && (g.northAngle = e, g.compassPointerMeshUp.rotateZ(t), g.compassPointerMeshDown.rotateZ(t), requestAnimationFrame(g.render))
      }, this.initCompass = function () {
        if (!g.hasCompass) {
          g.hasCompass = !0, g.northAngle = 0;
          var e = Autodesk.Viewing.Private.getResourceUrl;
          S = new i.Scene;
          var t = 2.9 * $,
            n = new i.PlaneBufferGeometry(t, t, 2, 2),
            r = new i.MeshBasicMaterial({
              color: 0,
              side: i.DoubleSide,
              map: ve(e("res/textures/VCcompass-pointer-b.png")),
              shading: i.FlatShading,
              transparent: !0
            }),
            o = new i.MeshBasicMaterial({
              color: 0,
              side: i.DoubleSide,
              map: ve(e("res/textures/VCcompass-base.png")),
              shading: i.FlatShading,
              transparent: !0
            }),
            a = new i.Mesh(n, r),
            s = new i.Mesh(n, r),
            l = new i.Mesh(n, o);
          g.compassPointerMeshUp = a, g.compassPointerMeshDown = s;
          var c = -Math.PI / 2;
          l.rotateX(c), a.rotateX(c), s.rotateX(c);
          var u = .5 * -$ - (Math.floor(.25 * $ / 2) || 25);
          l.translateZ(u), a.translateZ(u + .1), s.translateZ(u - .1), S.add(l), S.add(a), S.add(s), requestAnimationFrame(g.render)
        }
      }, this.showControls = function (e) {
        e || void 0 === e ? pe() : ge()
      }, this.dtor = function () {
        this.renderer = null, ce = null
      }, this.refreshTexture = function (e) {
        var t = Autodesk.Viewing.Private.getResourceUrl,
          n = this.localizeResourcePath || "res/textures/",
          a = (new r.DDSLoader).load(t(n + "VCcrossRGBA8small.dds"), e);
        a.minFilter = a.maxFilter = i.LinearFilter, this.texture && this.texture.dispose(), this.texture = a;
        var s = this.material;
        if (!s) {
          var l = i.ShaderLib.cube;
          (s = Object(o.createShaderMaterial)(l)).depthWrite = !1, this.material = s
        }
        return s.uniforms.tCube.value = a, s
      }, this.localize = function () {
        var e = this,
          t = Object(l.getGlobal)();
        this.localizeResourcePath = t.LOCALIZATION_REL_PATH, this.refreshTexture((function () {
          requestAnimationFrame(e.render)
        }))
      },
      function () {
        var e = n.getBoundingClientRect();
        g.width = e.width, g.height = e.height, W = he(n), (M = new i.PerspectiveCamera(70, g.height / g.width, 1, 1e4)).position.set(0, 0, 500), b = new i.Scene, _ = new i.Scene, x = new i.Scene, w = new i.Scene, A = new i.Scene, te = !0, $ = 160, g.viewScale = 4 * $;
        var t = g.refreshTexture(),
          r = i.LinearFilter,
          o = Autodesk.Viewing.Private.getResourceUrl,
          l = "res/textures/",
          c = new i.BoxGeometry($, $, $, 4, 4, 4),
          u = new i.BoxGeometry($ + 1, $ + 1, $ + 1, 4, 4, 4);
        (T = new i.Mesh(c, t)).position.set(0, 0, 0), _.add(T);
        var h = ve(o(l + "VCedge1.png"));
        h.minFilter = h.maxFilter = r, (C = new i.Mesh(u, new i.MeshBasicMaterial({
          map: h,
          overdraw: !1,
          transparent: !0,
          shading: i.SmoothShading
        }))).position.set(0, 0, 0), w.add(C), E = new m($ + 20), Array.prototype.push.apply(F, E.getSprites());
        var d = $ + 5,
          f = new i.Geometry,
          p = new i.Vector3(-30, 0, 0),
          y = new i.Vector3(30, 0, 0),
          S = new i.Vector3(0, -30, 0);
        f.vertices.push(p), f.vertices.push(y), f.vertices.push(S), f.faces.push(new i.Face3(1, 0, 2)), f.computeFaceNormals();
        var I = new i.MeshBasicMaterial({
            overdraw: !0,
            color: 12040636,
            depthTest: !1,
            depthWrite: !1,
            transparent: !1,
            opacity: 1,
            shading: i.FlatShading
          }),
          R = new i.MeshBasicMaterial({
            overdraw: !0,
            color: 12040636,
            depthTest: !1,
            depthWrite: !1,
            transparent: !1,
            opacity: 1,
            shading: i.FlatShading
          }),
          O = new i.MeshBasicMaterial({
            overdraw: !0,
            color: 12040636,
            depthTest: !1,
            depthWrite: !1,
            transparent: !1,
            opacity: 1,
            shading: i.FlatShading
          }),
          k = new i.MeshBasicMaterial({
            overdraw: !0,
            color: 12040636,
            depthTest: !1,
            depthWrite: !1,
            transparent: !1,
            opacity: 1,
            shading: i.FlatShading
          }),
          N = new i.PlaneBufferGeometry(.5 * $, .3 * $, 2, 2),
          j = new i.MeshBasicMaterial({
            transparent: !0,
            opacity: 0
          }),
          X = new i.Mesh(f, I),
          K = new i.Mesh(N, j);
        X.position.set(0, d, 0), K.position.set(0, .9 * d, .1);
        var Q = new i.Mesh(f, R),
          Z = new i.Mesh(N, j);
        Q.position.set(0, -d, 0), Z.position.set(0, .9 * -d, .1), Q.rotation.z += Math.PI, Z.rotation.z += Math.PI;
        var J = new i.Mesh(f, O),
          ee = new i.Mesh(N, j);
        J.position.set(d, 0, 0), ee.position.set(.9 * d, 0, .1), J.rotation.z -= Math.PI / 2, ee.rotation.z -= Math.PI / 2;
        var ie = new i.Mesh(f, k),
          re = new i.Mesh(N, j);
        ie.position.set(-d, 0, 0), re.position.set(.9 * -d, 0, .1), ie.rotation.z += Math.PI / 2, re.rotation.z += Math.PI / 2, (U = new i.Object3D).position.set(0, 0, 0), U.add(X), U.add(Q), U.add(J), U.add(ie), A.add(K), A.add(Z), A.add(ee), A.add(re), A.add(U), q.push(K), q.push(Z), q.push(ee), q.push(re);
        var oe = new i.PlaneBufferGeometry($ / 3, $ / 3, 2, 2),
          ae = new i.MeshBasicMaterial({
            map: ve(o(l + "VChome.png")),
            transparent: !0,
            shading: i.FlatShading
          });
        (P = new i.Mesh(oe, ae)).position.set(-$, $, 0), G = Y.length, A.add(P), Y.push(P);
        var se = new i.PlaneBufferGeometry(1.5 * $, 1.5 * $, 2, 2),
          le = new i.MeshBasicMaterial({
            map: ve(o(l + "VCarrows.png")),
            shading: i.FlatShading,
            depthTest: !1,
            depthWrite: !1,
            transparent: !0
          }),
          ce = new i.Mesh(se, le);
        g.rollMesh = ce;
        var pe = new i.PlaneBufferGeometry(.6 * $, .45 * $, 2, 2),
          me = new i.MeshBasicMaterial({
            transparent: !0,
            opacity: 0
          }),
          ge = new i.Mesh(pe, me);
        g.rollLeftMesh = ge;
        var be = new i.PlaneBufferGeometry(.45 * $, .6 * $, 2, 2),
          _e = new i.MeshBasicMaterial({
            transparent: !0,
            opacity: 0
          }),
          xe = new i.Mesh(be, _e);
        g.rollRightMesh = xe, A.add(ce), A.add(ge), A.add(xe), V = Y.length, Y.push(ge), B = Y.length, Y.push(xe), z = Y.length, Y.push(ce);
        var Ee = new i.PlaneBufferGeometry($ / 2.3, $ / 2.3, 2, 2),
          Ae = new i.MeshBasicMaterial({
            map: ve(o(l + "VCcontext.png")),
            transparent: !0,
            depthTest: !1,
            depthWrite: !1,
            shading: i.FlatShading
          });
        D = new i.Mesh(Ee, Ae), g.contextMesh = D, H = Y.length, A.add(D), Y.push(D), fe();
        var Se = new i.Geometry;
        Se.vertices.push(new i.Vector3(0, 0, 0));
        var Te, Ce = Math.floor(.2 * $ / 2) || 20;
        if (Se.vertices.push(new i.Vector3(-$ / 2, -$ / 2 - Ce, -$ / 2)), Se.vertices.push(new i.Vector3($ / 2, -$ / 2 - Ce, -$ / 2)), Se.vertices.push(new i.Vector3($ / 2, -$ / 2 - Ce, $ / 2)), Se.vertices.push(new i.Vector3(-$ / 2, -$ / 2 - Ce, $ / 2)), Se.faces.push(new i.Face3(4, 3, 2)), Se.faces.push(new i.Face3(4, 2, 1)), Te = new i.MeshBasicMaterial({
            color: 0,
            transparent: !0,
            opacity: .5
          }), L = new i.Mesh(Se, Te), b.add(L), ye(), "CANVAS" === v.renderer.toUpperCase() ? g.renderer = new i.CanvasRenderer : "WEBGL" === v.renderer.toUpperCase() ? g.renderer = new a.WebGLRenderer({
            alpha: !0,
            antialias: !1
          }) : (s.logger.warn("Incorrect use of Autocam.renderer property"), g.renderer = new i.CanvasRenderer), g.useTransparency(!0), g.setSize(g.width, g.height), g.camera.topFov = g.camera.bottomFov = g.camera.fov / 2, g.camera.leftFov = g.camera.rightFov = g.camera.aspect * g.camera.fov / 2, g.pcam.topFov = g.ocam.topFov = g.camera.topFov, g.pcam.bottomFov = g.ocam.bottomFov = g.camera.bottomFov, g.pcam.leftFov = g.ocam.leftFov = g.camera.leftFov, g.pcam.rightFov = g.ocam.rightFov = g.camera.rightFov, g.renderer.autoClear = !1, g.renderer.setSize(g.width, g.height), g.renderer.sortObjects = !1, n.appendChild(g.renderer.domElement), n.addEventListener("touchstart", we, !1), n.addEventListener("mousedown", we, !1), n.addEventListener("mousemove", Me, !1), ne = !1) {
          var Pe = g.getDocument();
          Pe.exitPointerLock = Pe.exitPointerLock || Pe.mozExitPointerLock || Pe.webkitExitPointerLock, n.requestPointerLock = n.requestPointerLock || n.mozRequestPointerLock || n.webkitRequestPointerLock, g.addDocumentEventListener("pointerlockchange", de, !1), g.addDocumentEventListener("mozpointerlockchange", de, !1), g.addDocumentEventListener("webkitpointerlockchange", de, !1)
        }
        ue.push(ve(o(l + "VChomeS.png"))), ue.push(ve(o(l + "VCarrowsS0.png"))), ue.push(ve(o(l + "VCarrowsS1.png"))), ue.push(ve(o(l + "VChome.png"))), ue.push(ve(o(l + "VCarrows.png"))), ue.push(ve(o(l + "VCcontext.png"))), ue.push(ve(o(l + "VCcontextS.png")))
      }()
  }
}, function (e, t, n) {
  "use strict";

  function i(e, t) {
    for (var n = 0; n < t.length; n++) {
      var i = t[n];
      i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(e, i.key, i)
    }
  }
  var r = (0, n(3).getGlobal)();

  function o() {
    this.stop = null, this.isRunning = !0
  }

  function a(e, t, n, i, a) {
    var s = performance.now(),
      l = 1e3 * n,
      c = 0,
      u = new o;
    u.stop = function () {
      c && r.cancelAnimationFrame(c), u.isRunning = !1
    }, u.skip = function () {
      u.isRunning && (i(t), u.stop(), a && a())
    };
    return function n(o) {
      var h = (o - s) / l;
      h = Math.max(h, 0), h = Math.min(h, 1), i(e + h * (t - e)), h < 1 ? c = r.requestAnimationFrame(n) : (u.isRunning = !1, a && a())
    }(s), u
  }
  var s, l = function () {
    function e(t, n, i) {
      ! function (e, t) {
        if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
      }(this, e), this.setValueCb = n, this.animTime = i, this.fadeAnim = null, this.targetValue = t, this.curValue = t, n(t)
    }
    var t, n, r;
    return t = e, (n = [{
      key: "_stopAnim",
      value: function () {
        this.fadeAnim && (this.fadeAnim.stop(), this.fadeAnim = null)
      }
    }, {
      key: "fadeTo",
      value: function (e, t) {
        var n = this;
        e !== this.targetValue && (this._stopAnim(), this.targetValue = e, this.fadeAnim = a(this.curValue, this.targetValue, this.animTime, (function (e) {
          e = u(e), n.curValue = e, n.setValueCb(e)
        }), t))
      }
    }, {
      key: "setValue",
      value: function (e) {
        this._stopAnim(), this.curValue = e, this.setValueCb(e)
      }
    }]) && i(t.prototype, n), r && i(t, r), e
  }();

  function c(e, t, n) {
    return (1 - n) * e + n * t
  }

  function u(e) {
    return THREE.Math.smootherstep(e, 0, 1)
  }

  function h(e) {
    var t = new THREE.Vector3,
      n = new THREE.Vector3,
      i = new THREE.Vector3,
      r = new THREE.Vector3,
      o = new THREE.Vector3,
      a = new THREE.Vector3,
      s = 0,
      l = 0,
      h = new THREE.Vector3,
      d = new THREE.Quaternion,
      f = new THREE.Quaternion,
      p = new THREE.Vector3,
      m = new THREE.Quaternion,
      g = new THREE.Object3D;
    new THREE.Matrix4;

    function v(e, t, n, i) {
      Autodesk.Viewing.Navigation.prototype.orient(g, n, t, i), e.copy(g.quaternion)
    }
    this.init = function (e, c, u, p) {
      t.copy(e.position), n.copy(e.target), i.copy(e.up), r.copy(c), o.copy(u), a.copy(p), h.copy(e.worldup), s = t.distanceTo(n), l = r.distanceTo(o), v(d, t, n, h), v(f, r, o, h)
    }, this.updateCamera = function (e, n) {
      var i = u(e);
      n.position.lerpVectors(t, r, i), THREE.Quaternion.slerp(d, f, m, i), m.normalize();
      var o = c(s, l, i);
      ! function (e, t, n) {
        p.set(0, 0, -n).applyQuaternion(t), e.target.addVectors(e.position, p), p.set(0, 1, 0).applyQuaternion(t), e.up.copy(p)
      }(n, m, o), n.dirty = !0
    }, this.updateViewerCamera = function (e, t) {
      this.updateCamera(e, t.impl.camera), t.impl.syncCamera(), t.impl.invalidate(!0, !0)
    }
  }
  e.exports = {
    flyToView: function (e, t, n, i) {
      s || (s = new h), n = n || 2;
      var r = e.impl.camera;
      return s.init(r, t.position, t.target, t.up), a(0, 1, n, (function (t) {
        s.updateViewerCamera(t, e)
      }), i)
    },
    ShadowFader: function (e, t, n) {
      var i = 1,
        r = null,
        o = t,
        s = void 0,
        l = n;

      function c(t) {
        i = t, e.impl.setGroundShadowAlpha(t)
      }

      function u() {
        r = null, l && l(s)
      }
      this.shadowOn = function () {
        r && s || (r && !s && (r.stop(), r = null), i >= 1 || (r = a(i, 1, o * (1 - i), c, u), s = !0))
      }, this.shadowOff = function () {
        r && !s || (r && s && (r.stop(), r = null), i <= 0 || (r = a(i, 0, o * i, c, u), s = !1))
      }, this.isFading = function () {
        return r && r.isRunning
      }
    },
    lerp: c,
    smootherStep: u,
    fadeValue: a,
    AnimatedParam: l
  }
}, function (e, t, n) {
  "use strict";
  n.r(t), n.d(t, "SvfLoader", (function () {
    return S
  }));
  var i = n(3),
    r = n(1),
    o = n(26),
    a = n(9),
    s = n(131),
    l = n(10),
    c = n(87),
    u = n(50),
    h = n(18),
    d = n(104),
    f = n(45),
    p = n(47),
    m = n(2),
    g = n(105),
    v = n(0),
    y = n(86),
    b = n(6),
    _ = n(54);

  function x(e, t, n, i, r, o, a) {
    try {
      var s = e[o](a),
        l = s.value
    } catch (e) {
      return void n(e)
    }
    s.done ? t(l) : Promise.resolve(l).then(i, r)
  }

  function w(e) {
    return function () {
      var t = this,
        n = arguments;
      return new Promise((function (i, r) {
        var o = e.apply(t, n);

        function a(e) {
          x(o, i, r, a, s, "next", e)
        }

        function s(e) {
          x(o, i, r, a, s, "throw", e)
        }
        a(void 0)
      }))
    }
  }
  var E = Autodesk.Viewing,
    A = Object(i.isNodeJS)() ? 10 : Object(i.isMobileDevice)() ? 2 : 6,
    S = function (e) {
      this.viewer3DImpl = e, this.next_pack = 0, this.loading = !1, this.loadedPacksCount = 0, this.tmpMatrix = new v.Matrix4, this.tmpBox = new v.Box3, this.fetchingTopology = !1, this.loadTime = 0, this.notifiesFirstPixel = !0
    };
  S.prototype.dtor = function () {
    if (this.initWorkerScriptToken && (this.initWorkerScriptToken.cancel(), this.initWorkerScriptToken = null, r.logger.debug("SVF loader dtor: on init worker script.")), this.svfWorker && (this.svfWorker.clearAllEventListenerWithIntercept(), this.svfWorker.terminate(), this.svfWorker = null, r.logger.debug("SVF loader dtor: on svf worker.")), this.pack_workers) {
      for (var e = 0; e < this.pack_workers.length; e++) this.pack_workers[e].clearAllEventListenerWithIntercept(), this.pack_workers[e].terminate();
      this.pack_workers = null, r.logger.debug("SVF loader dtor: on geom worker.")
    }
    this.svf && this.svf.propDbLoader && (this.svf.propDbLoader.dtor(), this.svf.propDbLoader = null), this.tmpMatrix = null, this.tmpBox = null, this.svf = null, this.model = null, this.next_pack = 0, this.loading = !1, this.loadedPacksCount = 0, this.loadTime = 0, this.viewer3DImpl = null
  }, S.prototype.initWorkerScript = p.initWorkerScript, S.prototype.createWorkerWithIntercept = p.createWorkerWithIntercept, S.prototype.startWorkers = function () {
    for (var e = this, t = this.svf, n = Math.min(t.geompacks.length, E.NUM_WORKER_THREADS || A), r = 0; r < n; r++) {
      var o = t.geompacks[this.next_pack++];
      o.loading = !0, Object(i.isNodeJS)() ? this.loadGeometryPack(o.id, o.uri) : function (t) {
        setTimeout((function () {
          e.loadGeometryPack(t.id, t.uri)
        }), 200 * r)
      }(o)
    }
  }, S.prototype.createModel = function (e) {
    var t = this.model = new g.Model(e);
    return t.loader = this, t.initialize(), t
  }, S.prototype.isValid = function () {
    return this.viewer3DImpl
  }, S.prototype.loadFile = function (e, t, n, i) {
    if (!this.viewer3DImpl) return r.logger.log("SVF loader was already destructed. So no longer usable."), !1;
    if (this.loading) return r.logger.log("Loading of SVF already in progress. Ignoring new request."), !1;
    this.loading = !0;
    var o = e.indexOf("urn:");
    if (-1 != o) {
      var a = (e = decodeURIComponent(e)).substr(o, e.substr(o).indexOf("/"));
      r.logger.log("Extracted URN: " + a);
      var s = a.lastIndexOf(":");
      this.svfUrn = a.substr(s + 1)
    } else this.svfUrn = e;
    this.sharedDbPath = t.sharedPropertyDbPath, this.currentLoadPath = e;
    var l = this.currentLoadPath.lastIndexOf("/"); - 1 != l && (this.basePath = this.currentLoadPath.substr(0, l + 1)), this.acmSessionId = t.acmSessionId, this.queryParams = "", this.acmSessionId && (this.queryParams = "acmsession=" + this.acmSessionId), this.options = t;
    var c = this;
    return this.initWorkerScriptToken = this.initWorkerScript((function () {
      c.loadSvfCB(e, t, n, i)
    })), !0
  }, S.prototype.loadSvfCB = function (e, t, n, o) {
    this.t0 = (new Date).getTime(), this.firstPixelTimestamp = null, this.failedToLoadSomeGeometryPacks = null, this.failedToLoadPacksCount = 0;
    var l = !0,
      c = this,
      u = {
        url: Object(h.pathToURL)(e),
        basePath: this.currentLoadPath,
        objectIds: t.ids,
        globalOffset: t.globalOffset,
        fragmentTransformsDouble: t.fragmentTransformsDouble,
        placementTransform: t.placementTransform,
        applyRefPoint: t.applyRefPoint,
        queryParams: this.queryParams,
        bvhOptions: t.bvhOptions || {
          isWeakDevice: Object(i.isMobileDevice)()
        },
        applyScaling: t.applyScaling,
        loadInstanceTree: t.loadInstanceTree
      };
    this.viewer3DImpl._signalNoMeshes();
    var d = this.svfWorker = this.createWorkerWithIntercept(),
      f = function () {
        var e = w(regeneratorRuntime.mark((function e(t) {
          var i, h, f;
          return regeneratorRuntime.wrap((function (e) {
            for (;;) switch (e.prev = e.next) {
              case 0:
                if (i = function () {
                    d.clearAllEventListenerWithIntercept(), d.terminate(), c.svfWorker = null, d = null
                  }, l && o && (l = !1, o()), !t.data || !t.data.manifest) {
                  e.next = 9;
                  break
                }
                c.interceptManifest(t.data.manifest), u.operation = "LOAD_SVF_CONTD", u.manifest = t.data.manifest, d.doOperation(u), e.next = 26;
                break;
              case 9:
                if (!t.data || !t.data.svf) {
                  e.next = 25;
                  break
                }
                return h = c.svf = t.data.svf, c.failedToLoadSomeGeometryPacks && (n && n(c.failedToLoadSomeGeometryPacks), c.failedToLoadSomeGeometryPacks = null), e.next = 14, c.onModelRootLoadDone(h);
              case 14:
                n && n(null, c.model), c.viewer3DImpl.api.dispatchEvent({
                  type: m.MODEL_ROOT_LOADED_EVENT,
                  svf: h,
                  model: c.model
                }), h.loadDone = !1, f = !1, h.metadata && h.metadata.gltf && (f = !0), f || (0 == h.geompacks.length ? c.onGeomLoadDone() : c.startWorkers()), 1 == t.data.progress && (c.loading = !1, i()), h.fragments.polygonCounts || (h.fragments.polygonCounts = new Int32Array(h.fragments.length)), t.data.bvh && (h.bvh = t.data.bvh, c.model.setBVH(new s.NodeArray(h.bvh.nodes, h.bvh.useLeanNodes), h.bvh.primitives, c.options.bvhOptions), c.viewer3DImpl.invalidate(!1, !0)), e.next = 26;
                break;
              case 25:
                t.data && t.data.bvh ? (c.svf && !c.svf.bvh && (c.svf.bvh = t.data.bvh, c.model.setBVH(new s.NodeArray(c.svf.bvh.nodes, c.svf.bvh.useLeanNodes), c.svf.bvh.primitives, c.options.bvhOptions), c.viewer3DImpl.invalidate(!1, !0)), c.loading = !1, i()) : t.data && t.data.mesh ? (c.processReceivedMesh(t.data), 1 === t.data.progress && (c.onGeomLoadDone(), c.loading = !1, i())) : t.data && t.data.progress ? 1 == t.data.progress && (c.loading = !1, i()) : t.data && t.data.error ? (c.loading = !1, i(), r.logger.error("Error while processing SVF: " + JSON.stringify(t.data.error.args)), n && n(t.data.error, null)) : t.data && t.data.debug ? r.logger.debug(t.data.message) : (r.logger.error("SVF download failed.", Object(a.errorCodeString)(a.ErrorCodes.NETWORK_FAILURE)), c.loading = !1, i());
              case 26:
              case "end":
                return e.stop()
            }
          }), e)
        })));
        return function (t) {
          return e.apply(this, arguments)
        }
      }();
    return d.addEventListenerWithIntercept(f), u.operation = "LOAD_SVF", u.interceptManifest = !!this.interceptManifest, d.doOperation(Object(b.initLoadContext)(u)), !0
  }, S.prototype.loadGeometryPack = function (e, t) {
    var n, i, o, a, s = this;
    if (this.svf && this.isValid()) {
      var l = this.pack_workers;
      if (l || (l = this.pack_workers = []), l.length < (E.NUM_WORKER_THREADS || A)) {
        var c = !0;
        for (o = 0; o < l.length; o++)
          if (0 === l[o].queued) {
            c = !1;
            break
          } if (c) {
          var u = this.createWorkerWithIntercept();
          u.addEventListenerWithIntercept((function (e) {
            if (e.data && e.data.meshes) {
              for (var t = e.data.meshes, n = {
                  packId: e.data.packId,
                  meshIndex: 0,
                  mesh: null
                }, i = 0; i < t.length; i++) {
                var o = t[i];
                o && (n.meshIndex = i, n.mesh = o, s.processReceivedMesh(n))
              }
              if (e.data.progress >= 1) {
                s.pack_workers[e.data.workerId].queued -= 1, s.loadedPacksCount++, s.viewer3DImpl.signalProgress(100 * s.loadedPacksCount / s.svf.geompacks.length, _.ProgressState.LOADING, s.model);
                var l = !0;
                for (a = 0; a < s.pack_workers.length; a++)
                  if (0 != s.pack_workers[a].queued) {
                    l = !1;
                    break
                  } if (l) {
                  for (a = 0; a < s.pack_workers.length; a++) s.pack_workers[a].clearAllEventListenerWithIntercept(), s.pack_workers[a].terminate();
                  s.pack_workers = null
                }
                s.loadedPacksCount + s.failedToLoadPacksCount == s.svf.geompacks.length && s.onGeomLoadDone()
              }
            } else if (e.data && e.data.progress) {
              if (s.pack_workers[e.data.workerId].queued -= 1, s.next_pack < s.svf.geompacks.length) {
                var c = null;
                if (!c || c.loading)
                  for (; s.next_pack < s.svf.geompacks.length && (c = s.svf.geompacks[s.next_pack++]).loading;);
                c && !c.loading ? (c.loading = !0, s.loadGeometryPack(c.id, c.uri)) : (s.viewer3DImpl.modelQueue().enforceBvh = !1, s.svf.fragments.packIds = null)
              }
            } else e.data && e.data.debug ? r.logger.debug(e.data.message) : e.data && e.data.error ? (++s.failedToLoadPacksCount, s.failedToLoadSomeGeometryPacks = {
              code: e.data.error.code,
              msg: e.data.error.msg
            }) : s.pack_workers[e.data.workerId].queued -= 2
          })), u.queued = 0, l.push(u)
        }
      }
      var d = 0,
        f = l[0].queued;
      for (o = 1; o < l.length; o++) l[o].queued < f && (d = o, f = l[o].queued);
      (n = l[d]).queued += 2, i = d;
      var p = {
        operation: "LOAD_GEOMETRY",
        url: Object(h.pathToURL)(this.svf.basePath + t),
        packId: parseInt(e),
        workerId: i,
        createWireframe: this.options.createWireframe || this.model.getMetadata("renderEnvironmentDisplayEdges", "value", !1),
        packNormals: this.options.packNormals,
        queryParams: this.queryParams
      };
      n.doOperation(Object(b.initLoadContext)(p))
    }
  }, S.prototype.processReceivedMesh = function (e) {
    var t = e.packId + ":" + e.meshIndex,
      n = this.svf,
      i = n.fragments,
      o = this.model,
      a = i.mesh2frag[t];
    if (void 0 !== a) {
      Array.isArray(a) || (a = [a]), c.BufferGeometryUtils.meshToGeometry(e), e.geometry.packId = e.packId;
      for (var s = a.length, u = o.getFragmentList().getGeometryId(a[0]), h = o.getGeometryList().addGeometry(e.geometry, s, u), d = (e.geometry.attributes.index.array || e.geometry.ib).length / 3, p = 0; p < a.length; p++) {
        var m = 0 | a[p];
        if (n.loadOptions.skipHiddenFragments)
          if (!(i.visibilityFlags[m] & l.MeshFlags.MESH_VISIBLE)) continue;
        o.getFragmentList().getOriginalWorldMatrix(m, this.tmpMatrix);
        var g = i.materials[m].toString(),
          v = this.viewer3DImpl.matman().findMaterial(o, g);
        v && !v.texturesLoaded && f.TextureLoader.loadMaterialTextures(o, v, this.viewer3DImpl), i.polygonCounts && (i.polygonCounts[m] = d);
        var y = this.viewer3DImpl.setupMesh(this.model, e.geometry, g, this.tmpMatrix);
        o.activateFragment(m, y, !!n.placementTransform)
      }
      this.options.onMeshReceived && this.options.onMeshReceived(this.model, h, a), i.mesh2frag[t] = null, i.numLoaded += a.length, this.viewer3DImpl._signalMeshAvailable(), o.getGeometryList().geomPolyCount > n.nextRepaintPolys && (this.firstPixelTimestamp = this.firstPixelTimestamp || Date.now(), n.numRepaints++, n.nextRepaintPolys += 1e4 * Math.pow(1.5, n.numRepaints), this.viewer3DImpl.invalidate(!1, !0))
    } else r.logger.warn("Mesh " + t + " was not referenced by any fragments.")
  }, S.prototype.onModelRootLoadDone = function () {
    var e = w(regeneratorRuntime.mark((function e(t) {
      var n, a, s, l, c, u;
      return regeneratorRuntime.wrap((function (e) {
        for (;;) switch (e.prev = e.next) {
          case 0:
            return t.geomMemory = 0, t.fragments.numLoaded = 0, t.gpuNumMeshes = 0, t.gpuMeshMemory = 0, t.nextRepaintPolys = 0, t.numRepaints = 0, t.urn = this.svfUrn, t.acmSessionId = this.acmSessionId, t.basePath = this.basePath, t.loadOptions = this.options, t.verylargebbox && this.viewer3DImpl.setNearRadius(this.options.nearRadius || 1), n = Date.now(), this.loadTime += n - this.t0, r.logger.log("SVF load: " + (n - this.t0)), a = this.createModel(t), this.options.skipPropertyDb || this.loadPropertyDb(), e.next = 18, this.convertMaterials(a);
          case 18:
            if (s = e.sent, this.viewer3DImpl.matman().hasTwoSidedMaterials() && this.viewer3DImpl.renderer().toggleTwoSided(!0), this.t1 = n, t.bbox = (new v.Box3).copy(t.bbox), t.refPointTransform && (t.refPointTransform = new o.LmvMatrix4(!0).copy(t.refPointTransform)), t.placementTransform && (t.placementTransform = new o.LmvMatrix4(!0).copy(t.placementTransform)), t.cameras)
              for (l = 0; l < t.cameras.length; l++)(c = t.cameras[l]).position = (new v.Vector3).copy(c.position), c.target = (new v.Vector3).copy(c.target), c.up = (new v.Vector3).copy(c.up), isFinite(c.position.x + c.position.y + c.position.z + c.target.x + c.target.y + c.target.z + c.up.x + c.up.y + c.up.z) || (c.target = t.bbox.center(), c.position.copy(c.target), c.position.z += t.bbox.max.z - t.bbox.min.z, c.up = {
                x: 0,
                y: 1,
                z: 0
              }), isFinite(c.aspect) || (c.aspect = 1), isFinite(c.fov) || (c.fov = 90), isFinite(c.orthoScale) || (c.orthoScale = 1);
            r.logger.log("scene bounds: " + JSON.stringify(t.bbox)), u = {
              category: "metadata_load_stats",
              urn: t.urn,
              has_topology: !!t.topologyPath,
              has_animations: !!t.animations,
              cameras: t.cameras ? t.cameras.length : 0,
              lights: t.lights ? t.lights.length : 0,
              materials: s,
              is_mobile: Object(i.isMobileDevice)()
            }, r.logger.track(u), this.viewer3DImpl.signalProgress(5, _.ProgressState.ROOT_LOADED, this.model), this.viewer3DImpl.invalidate(!1, !1);
          case 30:
          case "end":
            return e.stop()
        }
      }), e, this)
    })));
    return function (t) {
      return e.apply(this, arguments)
    }
  }(), S.prototype.convertMaterials = function () {
    var e = w(regeneratorRuntime.mark((function e(t) {
      var n, i, r, o, a, s, l, c, h, d, f, p;
      return regeneratorRuntime.wrap((function (e) {
        for (;;) switch (e.prev = e.next) {
          case 0:
            if (n = this.viewer3DImpl.matman(), i = t.getData(), r = 0, i.materials) {
              e.next = 5;
              break
            }
            return e.abrupt("return", r);
          case 5:
            if (!i.gltfMaterials) {
              e.next = 9;
              break
            }
            for (o in a = i.materials.materials) s = a[o], l = u.MaterialConverter.convertMaterialGltf(s, i), c = n._getMaterialHash(t, o), n.addMaterial(c, l, !1), r++;
            return e.abrupt("return", r);
          case 9:
            h = i.materials.materials, d = i.proteinMaterials ? i.proteinMaterials.materials : null, e.t0 = regeneratorRuntime.keys(h);
          case 12:
            if ((e.t1 = e.t0()).done) {
              e.next = 21;
              break
            }
            return o = e.t1.value, f = d && d[o] && u.MaterialConverter.isPrismMaterial(d[o]), p = f ? d[o] : h[o], e.next = 18, n.convertOneMaterial(t, p, n._getMaterialHash(t, o));
          case 18:
            r++, e.next = 12;
            break;
          case 21:
            return e.abrupt("return", r);
          case 22:
          case "end":
            return e.stop()
        }
      }), e, this)
    })));
    return function (t) {
      return e.apply(this, arguments)
    }
  }(), S.prototype.makeBVH = function (e) {
    var t = performance.now(),
      n = e.materials ? e.materials.materials : null;
    e.bvh = new s.BVHBuilder(e.fragments, n), e.bvh.build(this.options.bvhOptions || {
      isWeakDevice: Object(i.isMobileDevice)()
    });
    var o = performance.now();
    r.logger.log("BVH build time: " + (o - t))
  }, S.prototype.onGeomLoadDone = function () {
    this.svf.loadDone = !0, f.TextureLoader.loadModelTextures(this.model, this.viewer3DImpl), this.svf.fragments.entityIndexes = null, this.svf.fragments.mesh2frag = null, this.svf.fragments.visibilityFlags = null;
    var e = Date.now(),
      t = "Fragments load time: " + (e - this.t1);
    this.loadTime += e - this.t0;
    var n = this.firstPixelTimestamp - this.t0;
    t += " (first pixel time: " + n + ")", this.svf.bvh && !this.svf.placementTransform || (this.makeBVH(this.svf), this.model.setBVH(this.svf.bvh.nodes, this.svf.bvh.primitives, this.options.bvhOptions)), r.logger.log(t), this.options.useConsolidation && this.model.consolidate(this.viewer3DImpl.getMaterials(), this.options.consolidationMemoryLimit, this.viewer3DImpl.glrenderer());
    var i = {
      category: "model_load_stats",
      is_f2d: !1,
      has_prism: this.viewer3DImpl.matman().hasPrism,
      load_time: this.loadTime,
      geometry_size: this.model.getGeometryList().geomMemory,
      meshes_count: this.model.getGeometryList().geoms.length,
      fragments_count: this.model.getFragmentList().getCount(),
      urn: this.svfUrn
    };
    n > 0 && (i.first_pixel_time = n), r.logger.track(i, !0), this.currentLoadPath = null, this.viewer3DImpl.onLoadComplete(this.model)
  }, S.prototype.loadPropertyDb = function () {
    this.svf.propDbLoader = new d.PropDbLoader(this.sharedDbPath, this.model, this.viewer3DImpl.api), this.svf.propDbLoader.load()
  }, S.prototype.fetchTopologyFile = function (e, t) {
    if (!this.fetchingTopology) {
      this.fetchingTopology = !0;
      var n = this.createWorkerWithIntercept();
      n.addEventListenerWithIntercept((function (e) {
        if (e.data["status-topology"]) return i = (new Date).getTime(), a = Math.round((i - l) / 1e3), void r.logger.log("Topology file downloaded. (" + a + " seconds). Processing...");
        var s = e.data["fetch-topology"];
        s && (o = (new Date).getTime(), a = Math.round((o - i) / 1e3), s.topology ? r.logger.log("Topology file processed successfully! (" + a + " seconds).") : r.logger.log("Topology file processed, but an error ocurred. (" + a + " seconds)."), t(s), c.fetchingTopology = !1, n.clearAllEventListenerWithIntercept(), n.terminate(), n = null)
      }));
      var i, o, a, s = {
          path: e,
          queryParams: this.queryParams
        },
        l = (new Date).getTime();
      r.logger.log("Fetching topology file..."), s.operation = "FETCH_TOPOLOGY", n.doOperation(Object(b.initLoadContext)(s));
      var c = this
    }
  }, S.prototype.is3d = function () {
    return !0
  }, y.FileLoaderManager.registerFileLoader("svf", ["svf", "gltf", "glb"], S)
}, function (e, t, n) {
  "use strict";
  n.r(t), n.d(t, "OUTPUT_TYPE", (function () {
    return v
  })), n.d(t, "F2DLoader", (function () {
    return y
  }));
  var i = n(1),
    r = n(87),
    o = n(9),
    a = n(54),
    s = n(86),
    l = n(18),
    c = n(47),
    u = n(104),
    h = n(3),
    d = n(2),
    f = n(45),
    p = n(6),
    m = n(105),
    g = n(0),
    v = {
      GEOMETRY: "geometry",
      VERTEX_BUFFER: "vertexBuffer"
    };

  function y(e) {
    this.viewer3DImpl = e, this.loading = !1, this.tmpMatrix = new g.Matrix4, this.logger = i.logger, this.loadTime = 0
  }
  y.prototype.dtor = function () {
    this.initWorkerScriptToken && (this.initWorkerScriptToken.cancel(), this.initWorkerScriptToken = null, i.logger.debug("F2D loader dtor: on init worker script.")), this.streamingWorker && (this.streamingWorker.terminate(), this.streamingWorker = null, i.logger.debug("F2D loader dtor: on streaming worker.")), this.parsingWorker && (this.parsingWorker.terminate(), this.parsingWorker = null, i.logger.debug("F2D loader dtor: on parsing worker.")), this.svf && this.svf.propDbLoader && (this.svf.propDbLoader.dtor(), this.svf.propDbLoader = null), this.viewer3DImpl = null, this.loading = !1, this.tmpMatrix = null, this.logger = null, this.loadTime = 0, this.svf = null, this.model = null, this.options = null
  }, y.prototype.isValid = function () {
    return !!this.viewer3DImpl
  }, y.prototype.loadFile = function (e, t, n, r) {
    if (!this.viewer3DImpl) return i.logger.log("F2D loader was already destructed. So no longer usable."), !1;
    if (this.loading) return i.logger.log("Loading of F2D already in progress. Ignoring new request."), !1;
    this.loading = !0;
    var o = e.indexOf("urn:");
    if (-1 != o) {
      var a = (e = decodeURIComponent(e)).substr(o, e.substr(o).indexOf("/"));
      i.logger.log("Extracted URN: " + a);
      var s = a.lastIndexOf(":");
      this.svfUrn = a.substr(s + 1)
    } else this.svfUrn = e;
    this.sharedDbPath = t.sharedPropertyDbPath, this.currentLoadPath = e, this.acmSessionId = t.acmSessionId, this.queryParams = "", this.acmSessionId && (this.queryParams = "acmsession=" + this.acmSessionId), this.options = t, this.options.placementTransform ? this.modelScale = this.options.modelScale || this.options.placementTransform.getMaxScaleOnAxis() : this.modelScale = this.options.modelScale || 1, this.isf2d = !0;
    var l = this;
    return this.initWorkerScriptToken = Object(c.initWorkerScript)((function () {
      l.loadFydoCB(e, t, n, r)
    })), !0
  }, y.prototype.loadFydoCB = function (e, t, n, r) {
    this.t0 = Date.now();
    var s = Object(l.pathToURL)(e);
    this.streamingWorker = Object(c.createWorker)(), this.parsingWorker = Object(c.createWorker)();
    var u, f, m = this,
      y = !0,
      b = this.viewer3DImpl.glrenderer();
    b && (u = b.supportsInstancedArrays(), f = b.isWebGL2());
    var _ = function () {
      m.parsingWorker.terminate(), m.parsingWorker = null
    };
    this.streamingWorker.addEventListener("message", (function (e) {
      var l;
      m.isValid() && (y && r && (y = !1, r()), e.data && "F2DBLOB" == e.data.type ? (l = {
        operation: "PARSE_F2D",
        data: e.data.buffer,
        metadata: e.data.metadata,
        manifest: e.data.manifest,
        basePath: e.data.basePath,
        f2dLoadOptions: {
          modelSpace: t.modelSpace,
          bgColor: t.bgColor,
          noShadow: t.noShadow,
          isMobile: Object(h.isMobileDevice)(),
          supportsInstancing: u,
          isWebGL2: f,
          excludeTextGeometry: t.excludeTextGeometry,
          outputType: t.outputType || v.VERTEX_BUFFER
        },
        url: s
      }, m.parsingWorker.doOperation(l, [l.data]), m.streamingWorker.terminate(), m.streamingWorker = null) : e.data && "F2DSTREAM" == e.data.type ? (l = {
        operation: "PARSE_F2D_FRAME",
        data: e.data.frames,
        url: s,
        f2dLoadOptions: {
          modelSpace: t.modelSpace,
          bgColor: t.bgColor,
          noShadow: t.noShadow,
          isMobile: Object(h.isMobileDevice)(),
          supportsInstancing: u,
          isWebGL2: f,
          excludeTextGeometry: t.excludeTextGeometry,
          outputType: t.outputType || v.VERTEX_BUFFER
        }
      }, e.data.metadata && (l.metadata = e.data.metadata, l.manifest = e.data.manifest), e.data.finalFrame && (l.finalFrame = !0, m.streamingWorker.terminate(), m.streamingWorker = null, m.fileMemorySize /= 2), e.data.progress && m.viewer3DImpl.signalProgress(100 * e.data.progress, a.ProgressState.LOADING), m.parsingWorker.doOperation(l, l.data ? [l.data] : void 0)) : e.data && "F2DAssetURL" == e.data.type || e.data && e.data.assetRequest || e.data && e.data.progress || (e.data && e.data.debug ? i.logger.debug(e.data.message) : e.data && e.data.error ? (m.loading = !1, m.streamingWorker.terminate(), m.streamingWorker = null, n && n(e.data.error)) : (i.logger.error("F2D download failed.", Object(o.errorCodeString)(o.ErrorCodes.NETWORK_FAILURE)), m.loading = !1, m.streamingWorker.terminate(), m.streamingWorker = null)))
    }), !1);
    var x = t.outputType === v.GEOMETRY ? function (e) {
      if (m.isValid() && (y && r && (y = !1, r()), e.data && e.data.f2d)) {
        m.svf = e.data.f2d;
        var t = e.data.f2d.geometry;
        _(), i.logger.info("Num polylines: " + t.numPolylines), i.logger.info("Line segments: " + t.numLineSegs), i.logger.info("Circular arcs: " + t.numCircles), i.logger.info("Ellipitcal arcs:" + t.numEllipses), m.onModelRootLoadDone(m.svf), n && n(null, m.model), m.viewer3DImpl.api.dispatchEvent({
          type: d.MODEL_ROOT_LOADED_EVENT,
          svf: m.svf,
          model: m.model
        }), m.onGeomLoadDone()
      }
    } : function (e) {
      var t, a;
      if (m.isValid())
        if (y && r && (y = !1, r()), e.data && e.data.f2d) {
          for (t = m.svf = e.data.f2d, _(), i.logger.info("Num polylines: " + t.numPolylines), i.logger.info("Line segments: " + t.numLineSegs), i.logger.info("Circular arcs: " + t.numCircles), i.logger.info("Ellipitcal arcs:" + t.numEllipses), i.logger.info("Plain triangles:" + t.numTriangles), i.logger.info("Total # of op codes generated by fydo.parse: " + t.opCount), m.onModelRootLoadDone(m.svf), n && n(null, m.model), m.viewer3DImpl.api.dispatchEvent({
              type: d.MODEL_ROOT_LOADED_EVENT,
              svf: m.svf,
              model: m.model
            }), a = 0; a < t.meshes.length; a++) m.processReceivedMesh2D(t.meshes[a], a);
          t.meshes = null, m.onGeomLoadDone(), m.loading = !1
        } else if (e.data && e.data.f2dframe) {
        var s = 0;
        if (e.data.meshes) {
          var l = e.data.bbox;
          m.svf.bbox = new g.Box3(l.min, l.max), s = e.data.baseIndex
        } else m.svf = e.data.f2dframe, s = e.data.baseIndex;
        if ((t = m.svf).fragments && t.fragments.initialized || (m.onModelRootLoadDone(t), n && n(null, m.model), m.viewer3DImpl.api.dispatchEvent({
            type: d.MODEL_ROOT_LOADED_EVENT,
            svf: t,
            model: m.model
          })), e.data.meshes && e.data.meshes.length)
          for (a = 0; a < e.data.meshes.length; a++) m.processReceivedMesh2D(e.data.meshes[a], s + a);
        if (e.data.finalFrame) {
          var c = e.data.cumulativeProps;
          for (var u in c) t[u] = c[u];
          _(), m.onGeomLoadDone(), m.loading = !1
        }
      } else e.data && e.data.progress || (e.data && e.data.debug ? i.logger.debug(e.data.message) : e.data && e.data.error ? (m.loading = !1, _(), i.logger.error("Error while processing F2d: " + JSON.stringify(e.data.error.args)), n && n(e.data.error)) : (i.logger.error("F2D download failed.", Object(o.errorCodeString)(o.ErrorCodes.NETWORK_FAILURE)), m.loading = !1, _()))
    };
    this.parsingWorker.addEventListener("message", x, !1);
    var w = {
      operation: "STREAM_F2D",
      url: s,
      objectIds: t.ids,
      queryParams: this.queryParams
    };
    return this.streamingWorker.doOperation(p.endpoint.initLoadContext(w)), !0
  }, y.prototype.processReceivedMesh = function (e) {
    var t = e.packId + ":" + e.meshIndex,
      n = this.svf,
      o = n.fragments,
      a = o.mesh2frag[t];
    if (void 0 !== a) {
      Array.isArray(a) || (a = [a]);
      var s = e.mesh;
      if (r.BufferGeometryUtils.meshToGeometry(e), e.geometry.unpackXform = s.unpackXform, s.texData) {
        var l = new g.DataTexture(new Uint8Array(s.texData.buffer), s.texData.length, 1, g.RGBAFormat, g.UnsignedByteType, g.UVMapping, g.ClampToEdgeWrapping, g.ClampToEdgeWrapping, g.NearestFilter, g.NearestFilter, 0);
        l.generateMipmaps = !1, l.flipY = !1, l.needsUpdate = !0, e.geometry.tIdColor = l, e.geometry.vIdColorTexSize = new g.Vector2(s.texData.length, 1)
      }
      var c = a.length,
        u = this.model;
      u.getGeometryList().addGeometry(e.geometry, c, e.meshIndex + 1);
      for (var h = (e.geometry.attributes.index.array || e.geometry.ib).length / 3, d = 0; d < a.length; d++) {
        var f = 0 | a[d];
        u.getFragmentList().getOriginalWorldMatrix(f, this.tmpMatrix), this.options.placementTransform && (this.tmpMatrix = (new g.Matrix4).multiplyMatrices(this.options.placementTransform, this.tmpMatrix));
        var p = o.materials[f].toString();
        o.polygonCounts && (o.polygonCounts[f] = h);
        var m = this.viewer3DImpl.setupMesh(this.model, e.geometry, p, this.tmpMatrix);
        u.activateFragment(f, m)
      }
      o.mesh2frag[t] = null, o.numLoaded += a.length;
      var v = o.numLoaded;
      n.geomPolyCount > n.nextRepaintPolys && (n.numRepaints++, n.nextRepaintPolys += 1e4 * Math.pow(1.5, n.numRepaints), this.viewer3DImpl.invalidate(!1, !0)), v % 20 == 0 && this.viewer3DImpl.invalidate(!1, !0)
    } else i.logger.warn("Mesh " + t + " was not referenced by any fragments.")
  }, y.prototype.processReceivedMesh2D = function (e, t) {
    t >= this.bufferCount && (this.bufferCount = t + 1);
    var n = {
        mesh: e,
        is2d: !0,
        packId: "0",
        meshIndex: t
      },
      i = "0:" + t,
      r = this.svf.fragments;
    if (!r.fragId2dbId[t]) {
      var o = Object.keys(n.mesh.dbIds).map((function (e) {
        return parseInt(e)
      }));
      r.fragId2dbId[t] = o;
      for (var a = 0; a < o.length; a++) {
        var s = o[a],
          l = r.dbId2fragId[s];
        Array.isArray(l) ? l.push(t) : r.dbId2fragId[s] = void 0 !== l ? [l, t] : t
      }
      e.material.modelScale = this.modelScale, e.material.opacity = this.options.opacity, e.material.doNotCut = this.options.doNotCut;
      var c = this.viewer3DImpl;
      r.materials[t] = this.viewer3DImpl.matman().create2DMaterial(this.model, e.material, !1, !1, (function (e, t) {
        var n = t.getData();
        f.TextureLoader.requestsInProgress() || !n.loadDone || n.texLoadDone || (n.texLoadDone = !0, c.onTextureLoadComplete(t)), Object(h.isMobileDevice)() && f.TextureLoader.requestsInProgress() || c.invalidate(!1, !0, !1)
      })), r.length++
    }
    r.mesh2frag[i] = t, this.processReceivedMesh(n)
  }, y.prototype.onModelRootLoadDone = function (e) {
    e.fragments = {}, e.fragments.mesh2frag = {}, e.fragments.materials = [], e.fragments.fragId2dbId = [], e.fragments.dbId2fragId = {}, e.fragments.length = 0, e.fragments.initialized = !0, e.geomMemory = 0, e.fragments.numLoaded = 0, e.gpuNumMeshes = 0, e.gpuMeshMemory = 0, e.nextRepaintPolys = 1e4, e.numRepaints = 0, e.urn = this.svfUrn, e.acmSessionId = this.acmSessionId, e.basePath = "";
    var t = this.currentLoadPath.lastIndexOf("/"); - 1 != t && (e.basePath = this.currentLoadPath.substr(0, t + 1)), e.loadOptions = this.options;
    var n = Date.now();
    this.loadTime += n - this.t0, i.logger.log("SVF load: " + (n - this.t0)), this.t0 = n, e.bbox = (new g.Box3).copy(e.bbox);
    var r = this.model = new m.Model(e);
    r.loader = this, r.initialize(), this.options.skipPropertyDb || (this.svf.propDbLoader = new u.PropDbLoader(this.sharedDbPath, this.model, this.viewer3DImpl.api)), i.logger.log("scene bounds: " + JSON.stringify(e.bbox));
    var o = {
      category: "metadata_load_stats",
      urn: e.urn,
      layers: e.layerCount
    };
    i.logger.track(o), this.viewer3DImpl.signalProgress(5, a.ProgressState.ROOT_LOADED, this.model), this.viewer3DImpl.invalidate(!1, !1)
  }, y.prototype.onGeomLoadDone = function () {
    this.svf.loadDone = !0, this.svf.fragments.entityIndexes = null, this.svf.fragments.mesh2frag = null;
    var e = Date.now(),
      t = "Fragments load time: " + (e - this.t0);
    this.loadTime += e - this.t0, f.TextureLoader.loadModelTextures(this.model, this.viewer3DImpl), this.options.skipPropertyDb || this.loadPropertyDb(), i.logger.log(t);
    var n = {
      category: "model_load_stats",
      is_f2d: !0,
      has_prism: this.viewer3DImpl.matman().hasPrism,
      load_time: this.loadTime,
      geometry_size: this.model.getGeometryList().geomMemory,
      meshes_count: this.model.getGeometryList().geoms.length,
      urn: this.svfUrn
    };
    i.logger.track(n, !0), this.currentLoadPath = null, this.isf2d = void 0, this.viewer3DImpl.onLoadComplete(this.model)
  }, y.prototype.loadPropertyDb = function () {
    this.svf.propDbLoader && this.svf.propDbLoader.load()
  }, y.prototype.is3d = function () {
    return !1
  }, s.FileLoaderManager.registerFileLoader("f2d", ["f2d"], y)
}, function (e, t, n) {
  "use strict";
  n.r(t), n.d(t, "LeafletLoader", (function () {
    return p
  }));
  var i = n(54),
    r = n(9),
    o = n(1),
    a = n(18),
    s = n(176),
    l = n(45),
    c = n(86),
    u = n(105),
    h = n(6),
    d = n(2),
    f = n(0);

  function p(e) {
    var t = e;
    this.isLeafletLoader = !0;
    var n = function (e, t) {
        var n = [80, 75, 1, 2],
          i = t;
        if (e[i++] !== n[0] || e[i++] !== n[1] || e[i++] !== n[2] || e[i++] !== n[3]) return o.logger.error("invalid file header signature"), null;
        var r = {};
        return r.version = e[i++], r.os = e[i++], r.needVersion = e[i++] | e[i++] << 8, r.flags = e[i++] | e[i++] << 8, r.compression = e[i++] | e[i++] << 8, r.time = e[i++] | e[i++] << 8, r.date = e[i++] | e[i++] << 8, r.crc32 = (e[i++] | e[i++] << 8 | e[i++] << 16 | e[i++] << 24) >>> 0, r.compressedSize = (e[i++] | e[i++] << 8 | e[i++] << 16 | e[i++] << 24) >>> 0, r.plainSize = (e[i++] | e[i++] << 8 | e[i++] << 16 | e[i++] << 24) >>> 0, r.fileNameLength = e[i++] | e[i++] << 8, r.extraFieldLength = e[i++] | e[i++] << 8, r.fileCommentLength = e[i++] | e[i++] << 8, r.diskNumberStart = e[i++] | e[i++] << 8, r.internalFileAttributes = e[i++] | e[i++] << 8, r.externalFileAttributes = e[i++] | e[i++] << 8 | e[i++] << 16 | e[i++] << 24, r.relativeOffset = (e[i++] | e[i++] << 8 | e[i++] << 16 | e[i++] << 24) >>> 0, r.filename = String.fromCharCode.apply(null, e.slice(i, i += r.fileNameLength)), r.extraField = e.slice(i, i += r.extraFieldLength), r.comment = e.slice(i, i + r.fileCommentLength), r.length = i - t, r
      },
      c = function (e) {
        var t = function (e) {
            var t = [80, 75, 3, 4],
              n = 0;
            if (e[n++] !== t[0] || e[n++] !== t[1] || e[n++] !== t[2] || e[n++] !== t[3]) return o.logger.error("invalid local file header signature"), null;
            var i = {};
            return i.needVersion = e[n++] | e[n++] << 8, i.flags = e[n++] | e[n++] << 8, i.compression = e[n++] | e[n++] << 8, i.time = e[n++] | e[n++] << 8, i.date = e[n++] | e[n++] << 8, i.crc32 = (e[n++] | e[n++] << 8 | e[n++] << 16 | e[n++] << 24) >>> 0, i.compressedSize = (e[n++] | e[n++] << 8 | e[n++] << 16 | e[n++] << 24) >>> 0, i.plainSize = (e[n++] | e[n++] << 8 | e[n++] << 16 | e[n++] << 24) >>> 0, i.fileNameLength = e[n++] | e[n++] << 8, i.extraFieldLength = e[n++] | e[n++] << 8, i.filename = String.fromCharCode.apply(null, e.slice(n, n += i.fileNameLength)), i.extraField = e.slice(n, n += i.extraFieldLength), i.length = n, i
          }(e),
          n = t.length,
          i = t.compressedSize;
        return e.slice(n, n + i)
      };
    this.continueLoadFile = function (e, n, r, a, l, c) {
      var h, p = this;
      n.loadOptions && n.loadOptions.loadFromZip ? h = "{z}/{x}_{y}." + n.loadOptions.mime.split("/")[1] : h = e;
      l.initFromLoadOptions(h, n.loadOptions, c);
      var m = null;
      a && a(), !l.valid() && l.initForSimpleImage(e), l.onRootLoaded = function () {
        var a = new function (n) {
          this.bbox = new f.Box3, this.basePath = e, this.is2d = !0;
          var r = n && n.paperWidth >= 0 ? n.paperWidth : l.texWidth,
            o = n && n.paperHeight >= 0 ? n.paperHeight : l.texHeight;
          this.pageToModelTransform = l.getPageToModelTransform(r, o), this.metadata = {}, this.metadata.page_dimensions = {};
          var a = this.metadata.page_dimensions;
          a.page_width = r, a.page_height = o, a.page_units = n && n.paperUnits, this.loadDone = !0, this.isLeaflet = !0, t.signalProgress(100, i.ProgressState.LOADING), l.texWidth > 0 && (this.maxPixelPerUnit = l.texWidth / l.getQuadWidth(), l.isSimpleImage && (this.maxPixelPerUnit *= 10))
        }(n.loadOptions);
        a.loadOptions = n, m.getVisibleBounds(a.bbox);
        var s = new u.Model(a);
        s.initFromCustomIterator(m), s.loader = p, t.api.dispatchEvent({
          type: d.MODEL_ROOT_LOADED_EVENT,
          svf: a,
          model: s
        }), m.callWhenRefined((function () {
          var e = Date.now();
          a.loadTime = e - p.t0, o.logger.log("SVF load: " + a.loadTime)
        })), r(null, s)
      }, l.onDone = r, l.pixelRatio = t.glrenderer().getPixelRatio(), (m = new s.ModelIteratorTexQuad(l, t.getMaterials())).requestRootTile()
    }, this.loadFile = function (e, t, i, u) {
      var d = this;
      this.t0 = Date.now();
      var p = new s.TexQuadConfig,
        m = null,
        g = t.acmSessionId;
      if (t.loadOptions && t.loadOptions.loadFromZip) {
        m = function (e, t, n) {
          for (var i, r = e.split("/")[0] - p.levelOffset, o = 0; o < p.zips.length; o++)
            if (r <= p.zips[o].zipMaxLevel) {
              i = p.zips[o];
              break
            } if (!i) return n("Failed loading texture - tile's level doesn't exists."), !1;
          var a = i.fileTable[e];
          if (!a) return n("Failed loading texture - entry does not exist inside fileTable."), !1;
          var s = {
              extractImage: c
            },
            u = a.relativeOffset,
            h = a.relativeOffset + a.contentSize;
          i.rawData ? s.rawData = i.rawData.slice(u, h) : s.range = {
            min: u,
            max: h
          }, l.TextureLoader.loadTextureWithSecurity(i.urnZip, f.UVMapping, t, n, g, !0, s)
        };
        t.loadOptions.zips.forEach((function (s) {
          var l = s.centralDirOffset,
            c = s.centralDirLength,
            f = s.centralDirEntries;
          ! function (e, t, n, i, r, o) {
            var s = null,
              l = {};
            Object(h.isOffline)() || (t && (s = "acmsession=" + t), l.range = {
              min: n,
              max: i + n
            });
            var c = Object(h.initLoadContext)({
              queryParams: s
            });
            a.ViewingService.getItem(c, e, r, o, l)
          }(s.urnZip, g, l, c, (function (r) {
            Object(h.isOffline)() && (s.rawData = r, r = r.slice(l, l + c));
            var o = function (e, t, i) {
              for (var r, o = 0, a = {}, s = null, l = 0; l < i; ++l) {
                if (!(r = n(e, o))) return null;
                s && (s.contentSize = r.relativeOffset - s.relativeOffset), o += r.length, a[r.filename] = r, s = r
              }
              return s.contentSize = t - s.relativeOffset, a
            }(r, l, f);
            if (!o) return i("Failed parsing central directory of the zip.", null), !1;
            s.fileTable = o, t.loadOptions.zips.every((function (e) {
              return Object.keys(e.fileTable).length > 0
            })) && d.continueLoadFile(e, t, i, u, p, m)
          }), (function (e) {
            o.logger.error("Zip download failed: " + e.statusText, Object(r.errorCodeString)(r.ErrorCodes.NETWORK_FAILURE)), i("Zip download failed: " + e.statusText, null)
          }))
        }))
      } else m = function (e, t, n) {
        l.TextureLoader.loadTextureWithSecurity(e, f.UVMapping, t, n, g, !0)
      }, this.continueLoadFile(e, t, i, u, p, m)
    }, this.dtor = function () {}
  }
  p.prototype.is3d = function () {
    return !1
  }, c.FileLoaderManager.registerFileLoader("Leaflet", ["jpeg", "jpg", "png"], p)
}, function (e, t, n) {
  "use strict";
  n.r(t), n.d(t, "MobileCallbacks", (function () {
    return o
  }));
  var i = n(3),
    r = Object(i.getGlobal)();

  function o() {
    this.ios = r.webkit, this.android = r.JSINTERFACE, this.iosSend = function (e, t) {
      return r.webkit.messageHandlers.callbackHandler.postMessage({
        command: e,
        data: t
      })
    }, this.androidSend = r.JSINTERFACE
  }
  var a = o.prototype;
  a.animationReady = function () {
    this.ios ? this.iosSend("animationReady") : this.android && this.androidSend.animationReady()
  }, a.onSelectionChanged = function (e) {
    this.ios ? this.iosSend("selectionChanged", e) : this.android && this.androidSend.onSelectionChanged(e)
  }, a.onLongTap = function (e, t) {
    this.ios ? this.iosSend("onLongTap", [e, t]) : this.android && this.androidSend.onLongTap(e, t)
  }, a.onSingleTap = function (e, t) {
    this.ios ? this.iosSend("onSingleTap", [e, t]) : this.android && this.androidSend.onSingleTap(e, t)
  }, a.onDoubleTap = function (e, t) {
    this.ios ? this.iosSend("onDoubleTap", [e, t]) : this.android && this.androidSend.onDoubleTap(e, t)
  }, a.setRTCSession = function (e) {
    this.ios ? this.iosSend("setRTCSession", {
      id: e
    }) : this.android && this.androidSend.setRTCSessionID(e)
  }, a.putProperties = function (e, t) {
    this.ios ? this.iosSend("putProperties", {
      name: e,
      value: t
    }) : this.android && this.androidSend.putProperties(e, t)
  }, a.onPropertyRetrievedSuccess = function () {
    this.ios ? this.iosSend("onPropertyRetrievedSuccess") : this.android && this.androidSend.onPropertyRetrievedSuccess()
  }, a.onPropertyRetrievedFailOrEmptyProperties = function () {
    this.ios ? this.iosSend("onPropertyRetrievedFailOrEmptyProperties") : this.android && this.androidSend.onPropertyRetrievedFailOrEmptyProperties()
  }, a.resetAnimationStatus = function () {
    this.ios ? this.iosSend("resetAnimationStatus") : this.android && this.androidSend.resetAnimationStatus()
  }, a.setPauseUI = function () {
    this.ios ? this.iosSend("setPauseUI") : this.android && this.androidSend.setToPaused()
  }, a.getDeviceAvailableMemory = function () {
    return this.ios ? this.iosSend("getDeviceAvailableMemory") : this.android ? this.androidSend.getDeviceAvailableMemory() : void 0
  }, a.onDeviceMemoryInsufficient = function () {
    return this.ios ? this.iosSend("onDeviceMemoryInsufficient") : this.android ? this.androidSend.onDeviceMemoryInsufficient() : void 0
  }, a.updateAnimationTime = function (e) {
    this.ios ? this.iosSend("updateAnimationTime", e) : this.android && this.androidSend.updateAnimationTime(e)
  }, a.setLoadingProgress = function (e, t) {
    this.ios ? this.iosSend("setLoadingProgress", {
      state: e,
      progress: t
    }) : this.android && this.androidSend.setLoadingProgress(e, t)
  }, a.objectTreeCreated = function () {
    this.ios ? this.iosSend("objectTreeCreated") : this.android && this.androidSend.objectTreeCreated()
  }, a.geometryLoaded = function () {
    this.ios ? this.iosSend("geometryLoaded") : this.android && this.androidSend.geometryLoaded()
  }, a.putSheets = function (e, t) {
    this.ios ? this.iosSend("putSheets", [e, t]) : this.android && this.androidSend.putSheets(e, t)
  }, a.putAllSheets = function (e) {
    this.ios ? this.iosSend("putAllSheets", e) : this.android && this.androidSend.putAllSheets(e)
  }, a.hideLoadingView = function () {
    this.android && this.androidSend.hideLoadingView()
  }, a.instanceTree = function (e) {
    this.ios ? this.iosSend("instanceTree", e) : this.android && this.androidSend.instanceTree(e)
  }, a.loadSheetFailed = function () {
    this.ios ? this.iosSend("loadSheetFailed") : this.android && this.androidSend.loadSheetFailed()
  }, a.sheetSelected = function (e) {
    this.ios ? this.iosSend("sheetSelected", e) : this.android && this.androidSend.sheetSelected(e)
  }, "undefined" != typeof window && (r.MobileCallbacks = o)
}, function (e, t, n) {
  "use strict";
  n.r(t), n.d(t, "loadWasmWorker", (function () {
    return o
  }));
  var i = n(16).getResourceUrl,
    r = n(3).getGlobal;

  function o(e) {
    var t = {},
      n = i("wasm.worker.js");
    return new Promise((function (t, a) {
      var s, l;
      (s = n, l = Autodesk.Viewing.Private, new Promise((function (e) {
        if (l.ENABLE_INLINE_WORKER) {
          var t = new XMLHttpRequest;
          t.open("GET", s, !0), t.withCredentials = !1, t.onload = function () {
            var n, i = r();
            i.URL = i.URL || i.webkitURL;
            try {
              n = new Blob([t.responseText], {
                type: "application/javascript"
              })
            } catch (e) {
              var o = new BlobBuilder;
              o.append(t.responseText), n = o.getBlob()
            }
            e(URL.createObjectURL(n))
          }, t.send()
        } else e(s)
      }))).then((function (n) {
        var r = new Worker(n),
          s = {},
          l = i(e);
        r.postMessage({
          eventType: "INITIALIZE",
          eventData: l
        }), r.addEventListener("message", (function (e) {
          if ("INITIALIZED" === e.data.eventType) {
            e.data.eventData.forEach((function (e) {
              s[e] = function () {
                var t = arguments;
                return o(e, r, (function (n) {
                  n.postMessage({
                    eventData: {
                      method: e,
                      arguments: Array.from(t)
                    }
                  })
                }))
              }
            }));
            return s.getBuffer = function () {
              return o("getBuffer", r, (function (e) {
                e.postMessage({
                  eventType: "GET_BUFFER"
                })
              }))
            }, void t(s)
          }
        })), r.addEventListener("error", (function (e) {
          a(e)
        }))
      }))
    }));

    function o(e, n, i) {
      return new Promise((function (r, o) {
        var a = function (e, n) {
            var i, r;
            t && t.hasOwnProperty(e) ? (i = t[e][0], r = i.inUse) : (t[e] = [], r = !0);
            r && (i = {
              channel: new MessageChannel,
              inUse: !1
            }, t[e].push(i), n.postMessage({
              eventType: "SET_CHANNEL_PORT",
              eventData: {
                method: e,
                port: i.channel.port2
              }
            }, [i.channel.port2]));
            return i
          }(e, n),
          s = a.channel;
        a.inUse = !0, i(s.port1), s.port1.onmessage = function (n) {
          a.inUse = !1;
          var i = n.data.eventType,
            s = n.data.eventData;
          "ERROR" === i ? o(s) : r(s),
            function (e, t) {
              for (var n = 1; n < t.length; n++) {
                var i = t[n].channel,
                  r = e.channel;
                if (i === r) return t.splice(n, 1), !0
              }
            }(a, t[e])
        }
      }))
    }
  }
}, function (e, t, n) {
  "use strict";

  function i(e, t, n, i, r, o, a) {
    try {
      var s = e[o](a),
        l = s.value
    } catch (e) {
      return void n(e)
    }
    s.done ? t(l) : Promise.resolve(l).then(i, r)
  }

  function r(e, t) {
    try {
      WebAssembly.instantiateStreaming || (WebAssembly.instantiateStreaming = function () {
        var e, t = (e = regeneratorRuntime.mark((function e(t, n) {
          var i;
          return regeneratorRuntime.wrap((function (e) {
            for (;;) switch (e.prev = e.next) {
              case 0:
                return e.next = 2, t;
              case 2:
                return e.next = 4, e.sent.arrayBuffer();
              case 4:
                return i = e.sent, e.next = 7, WebAssembly.instantiate(i, n);
              case 7:
                return e.abrupt("return", e.sent);
              case 8:
              case "end":
                return e.stop()
            }
          }), e)
        })), function () {
          var t = this,
            n = arguments;
          return new Promise((function (r, o) {
            var a = e.apply(t, n);

            function s(e) {
              i(a, r, o, s, l, "next", e)
            }

            function l(e) {
              i(a, r, o, s, l, "throw", e)
            }
            s(void 0)
          }))
        });
        return function (e, n) {
          return t.apply(this, arguments)
        }
      }())
    } catch (e) {
      throw new Error("WebAssembly is not supported for the current browser.")
    }
    if (!e) throw new Error("Expecting a wasm file path.");
    var n = 256,
      r = 256;
    t && t.memory && (n = t.memory.initial, r = t.memory.maximum), this._wasmPath = e, this._memory = new WebAssembly.Memory({
      initial: n,
      maximum: r
    })
  }
  n.r(t), n.d(t, "Wasm", (function () {
    return r
  })), r.prototype.constructor = r, r.prototype.instantiate = function () {
    var e = this,
      t = {
        env: {
          abortStackOverflow: function (e) {
            throw new Error("overflow")
          },
          table: new WebAssembly.Table({
            initial: 0,
            maximum: 0,
            element: "anyfunc"
          }),
          __table_base: 0,
          memory: this._memory,
          __memory_base: 1024,
          STACKTOP: 0,
          STACK_MAX: this.getBuffer().byteLength
        }
      };
    return new Promise((function (n, i) {
      try {
        WebAssembly.instantiateStreaming(fetch(e._wasmPath), t).then((function (t) {
          var i = t.instance.exports;
          e.proxy = i, n(i)
        }))
      } catch (e) {
        i(e)
      }
    }))
  }, r.prototype.getBuffer = function () {
    return this._memory.buffer
  }
}, function (e, t, n) {
  "use strict";
  n.r(t);
  n(736), n(737), n(738), n(739), n(740), n(741), n(742), n(743), n(744), n(745), n(746), n(747), n(748), n(749), n(750), n(751), n(752), n(753), n(754), n(755), n(756), n(757), n(758), n(759), n(760), n(761), n(762), n(763), n(764), n(765), n(766), n(767), n(768), n(769), n(770)
}, function (e, t, n) {}, function (e, t, n) {}, function (e, t, n) {}, function (e, t, n) {}, function (e, t, n) {}, function (e, t, n) {}, function (e, t, n) {}, function (e, t, n) {}, function (e, t, n) {}, function (e, t, n) {}, function (e, t, n) {}, function (e, t, n) {}, function (e, t, n) {}, function (e, t, n) {}, function (e, t, n) {}, function (e, t, n) {}, function (e, t, n) {}, function (e, t, n) {}, function (e, t, n) {}, function (e, t, n) {}, function (e, t, n) {}, function (e, t, n) {}, function (e, t, n) {}, function (e, t, n) {}, function (e, t, n) {}, function (e, t, n) {}, function (e, t, n) {}, function (e, t, n) {}, function (e, t, n) {}, function (e, t, n) {}, function (e, t, n) {}, function (e, t, n) {}, function (e, t, n) {}, function (e, t, n) {}, function (e, t, n) {}, function (e, t, n) {
  "use strict";
  n.r(t), n.d(t, "DataTable", (function () {
    return o
  }));
  n(772);
  var i = n(773),
    r = Autodesk.Viewing.UI;

  function o(e) {
    if (!(e instanceof r.DockingPanel)) throw new Error("Invalid docking panel");
    this.dockingPanel = e;
    var t = this.dockingPanel.getDocument();
    this.datatableDiv = t.createElement("div"), this.datatableDiv.setAttribute("id", "datatable"), this.datatableDiv.setAttribute("class", "datatable"), e.container.appendChild(this.datatableDiv), e.footerInstance && (e.footerInstance.resizeCallback = this._fitHeaderColumns.bind(this)), this.groupedByColumn = !1, this.aggregated = !1
  }
  o.prototype._createColumns = function (e) {
    var t = this.dockingPanel.getDocument(),
      n = t.createElement("div");
    n.setAttribute("id", "columnArea"), n.setAttribute("class", "clusterize-headers");
    var i = '<table id="headersArea"><thead><tr id ="columnRow"></tr></thead></table>';
    n.innerHTML = i, this.datatableDiv.appendChild(n);
    var r = n.querySelector("tr");
    e.forEach((function (e) {
      var n = t.createElement("th");
      n.appendChild(t.createTextNode(e)), r.appendChild(n)
    })), i = this.datatableDiv.querySelector("table"), this._makeTableSortable(i)
  }, o.prototype._createRows = function () {
    var e = this.dockingPanel.getDocument().createElement("div");
    e.innerHTML = '<div id="scrollArea" class="clusterize-scroll"><table id="bodyArea" class="table-striped"><tbody id="contentArea" class="clusterize-content"><tr class="clusterize-no-data"><td>Loading data…</td></tr></tbody></table></div>', this.datatableDiv.appendChild(e)
  }, o.prototype.setData = function (e, t) {
    if (t.length !== e[0].length) throw new Error("Column length should be same as the row length");
    this._createColumns(t), this._createRows();
    var n = this;
    this.rowData = e, this.clusterize = new i({
      rows: this.rowData.map((function (e) {
        return "<tr>" + e.map((function (e) {
          return "<td>" + e + "</td>"
        })).join(" ") + "</tr>"
      })),
      scrollId: "scrollArea",
      contentId: "contentArea",
      callbacks: {
        clusterChanged: function () {
          n._fitHeaderColumns(), n._syncHeaderWidth(), n.groupedByColumn && n._updateClusterGroup()
        }
      }
    }), this.datatableDiv.querySelector(".clusterize-scroll").addEventListener("scroll", (function () {
      var e = this.scrollLeft;
      r(e)
    }));
    var r = function (e) {
      n.datatableDiv.querySelector("#headersArea").style.setProperty("margin-left", -e + "px")
    }
  }, o.prototype.destroyTable = function () {
    this.clusterize.destroy(!0), this.clusterize = null, this.rowData = null, this.groupedByColumn = !1
  }, o.prototype._makeTableSortable = function (e) {
    var t, n = this,
      i = e.tHead;
    if (i && i.rows[0] && (i = i.rows[0].cells), i)
      for (t = i.length; --t >= 0;) ! function (e) {
        var t = 1;
        i[e].addEventListener("click", (function () {
          n._sortTable(e, t = 1 - t)
        }))
      }(t)
  }, o.prototype._sortTable = function (e, t) {
    var n = this.rowData;
    this.sortFunction || this.restoreDefaultSortFunction();
    var i = this.sortFunction && this.sortFunction.bind(this),
      r = (n = n.sort(i(e, t))).map((function (e) {
        return "<tr>" + e.map((function (e) {
          return "<td>" + e + "</td>"
        })).join(" ") + "</tr>"
      }));
    this.clusterize.update(r);
    var o = this.datatableDiv.querySelector("#bodyArea");
    o.classList.contains("table-striped") || o.classList.add("table-striped")
  }, o.prototype.setSortFunction = function (e) {
    this.sortFunction = e
  }, o.prototype.getSortFunction = function () {
    return this.sortFunction
  }, o.prototype.restoreDefaultSortFunction = function () {
    this.sortFunction = function (e, t) {
      return t = -(+t || -1),
        function (n, i) {
          return t * n[e].localeCompare(i[e])
        }
    }
  }, o.prototype.getGroupByColumn = function (e) {
    for (var t = this.rowData, n = {}, i = 0; i < t.length; i++) {
      var r = t[i][e];
      n[r] || (n[r] = []), n[r].push(i)
    }
    return n
  }, o.prototype.groupByColumn = function (e) {
    for (var t = this, n = this.rowData, i = {}, r = 0; r < n.length; r++) {
      var o = (u = n[r])[e];
      if (i[o] || (i[o] = []), i[o].length > 0) u = "<tr class= 'subrow'>" + u.map((function (e) {
        return "<td>" + e + "</td>"
      })).join(" ") + "</tr>";
      else ! function () {
        var e = u.length;
        '<span value="click"></span>', u = "<tr class= 'parentrow'>" + u.map((function (t, n) {
          return e === n + 1 ? "<td>" + t + '<span value="click"></span></td>' : "<td>" + t + "</td>"
        })).join(" ") + "</tr>"
      }();
      i[o].push(u)
    }
    var a = [];
    for (var s in i)
      for (var l = i[s], c = 0; c < l.length; c++) {
        var u = l[c];
        a.push(u)
      }
    this.clusterize.update(a);
    var h = this.datatableDiv.querySelector("#bodyArea");
    h.classList.contains("table-striped") && h.classList.remove("table-striped"), this.datatableDiv.querySelectorAll(".subrow").forEach((function (e) {
      t._slideDown(e), e.style.fontSize = "14px"
    }));
    var d = this._fitHeaderColumns.bind(this),
      f = this._expandContent.bind(this);
    this.datatableDiv.querySelectorAll("span").forEach((function (e) {
      e.addEventListener("click", (function (e) {
        f(this, e), d()
      }))
    })), this._fitHeaderColumns(), this.groupedByColumn || (this.groupedByColumn = !0)
  }, o.prototype._updateClusterGroup = function () {
    var e = this,
      t = this._fitHeaderColumns.bind(this),
      n = this._expandContent.bind(this);
    this.datatableDiv.querySelectorAll("span").forEach((function (e) {
      e.addEventListener("click", (function (e) {
        n(this, e), t()
      }))
    })), this.datatableDiv.querySelectorAll(".subrow").forEach((function (t) {
      e._slideDown(t), t.style.fontSize = "14px"
    }))
  }, o.prototype._expandContent = function (e, t) {
    var n = !1;
    "collapsed" === e.className && (n = !0);
    for (var i = n ? 14 : 0, r = e.closest("tr"), o = this._nextUntil(r, ":not(.subrow)"), a = 0; a < o.length; a++) this._slideToggle(o[a], 500), o[a].style.fontSize = i + "px";
    e.classList.toggle("collapsed")
  }, o.prototype._nextUntil = function (e, t, n) {
    var i = [];
    for (e = e.nextElementSibling; e && !e.matches(t);) !n || e.matches(n) ? (i.push(e), e = e.nextElementSibling) : e = e.nextElementSibling;
    return i
  }, o.prototype._slideToggle = function (e, t) {
    return "none" === this.dockingPanel.getWindow().getComputedStyle(e).display ? this._slideDown(e, t) : this._slideUp(e, t)
  }, o.prototype._slideUp = function (e, t) {
    e.style.transitionProperty = "height, margin, padding", e.style.transitionDuration = t + "ms", e.style.boxSizing = "border-box", e.style.height = e.offsetHeight + "px", e.offsetHeight, e.style.overflow = "hidden", e.style.height = 0, e.style.paddingTop = 0, e.style.paddingBottom = 0, e.style.marginTop = 0, e.style.marginBottom = 0, e.style.display = "none", e.style.removeProperty("height"), e.style.removeProperty("padding-top"), e.style.removeProperty("padding-bottom"), e.style.removeProperty("margin-top"), e.style.removeProperty("margin-bottom"), e.style.removeProperty("overflow"), e.style.removeProperty("transition-duration"), e.style.removeProperty("transition-property")
  }, o.prototype._slideDown = function (e, t) {
    var n = this.dockingPanel.getWindow();
    e.style.removeProperty("display");
    var i = n.getComputedStyle(e).display;
    "none" === i && (i = "block"), e.style.display = i;
    e.style.overflow = "hidden", e.style.height = 0, e.style.paddingTop = 0, e.style.paddingBottom = 0, e.style.marginTop = 0, e.style.marginBottom = 0, e.offsetHeight, e.style.boxSizing = "border-box", e.style.transitionProperty = "height, margin, padding", e.style.transitionDuration = t + "ms", e.style.height = "21pxpx", e.style.removeProperty("padding-top"), e.style.removeProperty("padding-bottom"), e.style.removeProperty("margin-top"), e.style.removeProperty("margin-bottom"), n.setTimeout((function () {
      e.style.removeProperty("height"), e.style.removeProperty("overflow"), e.style.removeProperty("transition-duration"), e.style.removeProperty("transition-property")
    }), t)
  }, o.prototype.getAggregate = function (e, t) {
    var n, i = this.rowData,
      r = null;
    switch (e) {
      case "MIN":
        r = function () {
          for (var e = i[0][t], n = 1; n < i.length; n++) e > i[n][t] && (e = i[n][t]);
          return e || 0
        }();
        break;
      case "MAX":
        r = function () {
          for (var e = i[0][t], n = 1; n < i.length; n++) e < i[n][t] && (e = i[n][t]);
          return e || 0
        }();
        break;
      case "SUM":
        r = o();
        break;
      case "AVG":
        n = o() / i.length, r = (n = parseFloat(n)) || 0;
        break;
      case "COUNT":
        r = i.length
    }
    return r;

    function o() {
      for (var e = 0, n = 0; n < i.length; n++) e += parseFloat(i[n][t]);
      return e || 0
    }
  }, o.prototype.aggregate = function (e, t) {
    var n = this.datatableDiv.querySelector(".clusterize-content").querySelector("tr:not(.clusterize-extra-row):not(.first)");
    if (n) {
      for (var i = [], r = 0; r < n.children.length; r++) i.push(n.children[r].clientWidth);
      var o = this.getAggregate(e, t);
      if (!this.aggregated) {
        var a = this.dockingPanel.getDocument().createElement("div");
        a.setAttribute("id", "aggregate"), a.setAttribute("class", "aggregate-headers");
        a.innerHTML = '<table id="aggregateArea"><tbody></tbody></table>', this.datatableDiv.appendChild(a)
      }
      for (var s = this.datatableDiv.querySelector("#aggregateArea"), l = 0; l < s.rows.length; l++) {
        if (s.rows[l].cells[t].innerText.indexOf(e) > -1) return
      }
      for (var c = 0; c < s.rows.length; c++) {
        var u = s.rows[c].cells[t];
        if (0 === u.innerText.length) return u.appendChild(_document.createTextNode(e + ": ")), void u.appendChild(_document.createTextNode(o))
      }
      for (var h = s.insertRow(s.rows.length), d = 0; d < i.length; d++) {
        var f = _document.createElement("td");
        h.appendChild(f), f.style.setProperty("min-width", i[d] + "px", "important"), d === t && (f.appendChild(_document.createTextNode(e + ": ")), f.appendChild(_document.createTextNode(o)))
      }
      this.aggregated = !0
    }
  }, o.prototype.clearAggregates = function () {
    for (var e = this.datatableDiv.querySelectorAll(".aggregate-headers"), t = 0; t < e.length; t++) e[t].parentNode.removeChild(e[t])
  }, o.prototype._fitHeaderColumns = function () {
    var e = this.datatableDiv.querySelector(".clusterize-content"),
      t = this.datatableDiv.querySelector("#headersArea"),
      n = e.querySelector("tr:not(.clusterize-extra-row):not(.first)");
    if (n) {
      for (var i = [], r = [], o = 0; o < n.children.length; o++) r.push(n.children[o].clientWidth);
      if (r.toString() != i.toString()) {
        for (var a = t.querySelector("tr"), s = 0; s < a.children.length; s++) a.children[s].style.setProperty("clientWidth", r[s] + "px", "important"), a.children[s].style.setProperty("min-width", r[s] + "px", "important");
        if (this.aggregated)
          for (var l = this.datatableDiv.querySelector("#aggregateArea"), c = 0; c < l.rows.length; c++)
            for (var u = l.rows[c], h = 0; h < u.children.length; h++) u.children[h].style.setProperty("clientWidth", r[h] + "px", "important"), u.children[h].style.setProperty("min-width", r[h] + "px", "important");
        i = r
      }
    }
  }, o.prototype._syncHeaderWidth = function () {
    var e = this.datatableDiv.querySelector(".clusterize-content"),
      t = this.datatableDiv.querySelector("#headersArea");
    t.style.setProperty("clientWidth", e.width), t.style.setProperty("min-idth", e.width)
  }
}, function (e, t, n) {}, function (e, t, n) {
  e.exports = function () {
    "use strict";
    var e = function () {
        for (var e = 3, t = document.createElement("b"), n = t.all || []; t.innerHTML = "\x3c!--[if gt IE " + ++e + "]><i><![endif]--\x3e", n[0];);
        return e > 4 ? e : document.documentMode
      }(),
      t = navigator.platform.toLowerCase().indexOf("mac") + 1,
      n = function (e) {
        if (!(this instanceof n)) return new n(e);
        var a = this,
          s = {
            rows_in_block: 50,
            blocks_in_cluster: 4,
            tag: null,
            show_no_data_row: !0,
            no_data_class: "clusterize-no-data",
            no_data_text: "No data",
            keep_parity: !0,
            callbacks: {}
          };
        a.options = {};
        for (var l, c = ["rows_in_block", "blocks_in_cluster", "show_no_data_row", "no_data_class", "no_data_text", "keep_parity", "tag", "callbacks"], u = 0; l = c[u]; u++) a.options[l] = void 0 !== e[l] && null != e[l] ? e[l] : s[l];
        var h, d = ["scroll", "content"];
        for (u = 0; h = d[u]; u++)
          if (a[h + "_elem"] = e[h + "Id"] ? document.getElementById(e[h + "Id"]) : e[h + "Elem"], !a[h + "_elem"]) throw new Error("Error! Could not find " + h + " element");
        a.content_elem.hasAttribute("tabindex") || a.content_elem.setAttribute("tabindex", 0);
        var f = o(e.rows) ? e.rows : a.fetchMarkup(),
          p = {},
          m = a.scroll_elem.scrollTop;
        a.insertToDOM(f, p), a.scroll_elem.scrollTop = m;
        var g = !1,
          v = 0,
          y = !1,
          b = function () {
            t && (y || (a.content_elem.style.pointerEvents = "none"), y = !0, clearTimeout(v), v = setTimeout((function () {
              a.content_elem.style.pointerEvents = "auto", y = !1
            }), 50)), g != (g = a.getClusterNum()) && a.insertToDOM(f, p), a.options.callbacks.scrollingProgress && a.options.callbacks.scrollingProgress(a.getScrollProgress())
          },
          _ = 0,
          x = function () {
            clearTimeout(_), _ = setTimeout(a.refresh, 100)
          };
        i("scroll", a.scroll_elem, b), i("resize", window, x), a.destroy = function (e) {
          r("scroll", a.scroll_elem, b), r("resize", window, x), a.html((e ? a.generateEmptyRow() : f).join(""))
        }, a.refresh = function (e) {
          (a.getRowsHeight(f) || e) && a.update(f)
        }, a.update = function (e) {
          f = o(e) ? e : [];
          var t = a.scroll_elem.scrollTop;
          f.length * a.options.item_height < t && (a.scroll_elem.scrollTop = 0, g = 0), a.insertToDOM(f, p), a.scroll_elem.scrollTop = t
        }, a.clear = function () {
          a.update([])
        }, a.getRowsAmount = function () {
          return f.length
        }, a.getScrollProgress = function () {
          return this.options.scroll_top / (f.length * this.options.item_height) * 100 || 0
        };
        var w = function (e, t) {
          var n = o(t) ? t : [];
          n.length && (f = "append" == e ? f.concat(n) : n.concat(f), a.insertToDOM(f, p))
        };
        a.append = function (e) {
          w("append", e)
        }, a.prepend = function (e) {
          w("prepend", e)
        }
      };

    function i(e, t, n) {
      return t.addEventListener ? t.addEventListener(e, n, !1) : t.attachEvent("on" + e, n)
    }

    function r(e, t, n) {
      return t.removeEventListener ? t.removeEventListener(e, n, !1) : t.detachEvent("on" + e, n)
    }

    function o(e) {
      return "[object Array]" === Object.prototype.toString.call(e)
    }

    function a(e, t) {
      return window.getComputedStyle ? window.getComputedStyle(t)[e] : t.currentStyle[e]
    }
    return n.prototype = {
      constructor: n,
      fetchMarkup: function () {
        for (var e = [], t = this.getChildNodes(this.content_elem); t.length;) e.push(t.shift().outerHTML);
        return e
      },
      exploreEnvironment: function (t, n) {
        var i = this.options;
        i.content_tag = this.content_elem.tagName.toLowerCase(), t.length && (e && e <= 9 && !i.tag && (i.tag = t[0].match(/<([^>\s/]*)/)[1].toLowerCase()), this.content_elem.children.length <= 1 && (n.data = this.html(t[0] + t[0] + t[0])), i.tag || (i.tag = this.content_elem.children[0].tagName.toLowerCase()), this.getRowsHeight(t))
      },
      getRowsHeight: function (e) {
        var t = this.options,
          n = t.item_height;
        if (t.cluster_height = 0, e.length) {
          var i = this.content_elem.children;
          if (i.length) {
            var r = i[Math.floor(i.length / 2)];
            if (t.item_height = r.offsetHeight, "tr" == t.tag && "collapse" != a("borderCollapse", this.content_elem) && (t.item_height += parseInt(a("borderSpacing", this.content_elem), 10) || 0), "tr" != t.tag) {
              var o = parseInt(a("marginTop", r), 10) || 0,
                s = parseInt(a("marginBottom", r), 10) || 0;
              t.item_height += Math.max(o, s)
            }
            return t.block_height = t.item_height * t.rows_in_block, t.rows_in_cluster = t.blocks_in_cluster * t.rows_in_block, t.cluster_height = t.blocks_in_cluster * t.block_height, n != t.item_height
          }
        }
      },
      getClusterNum: function () {
        return this.options.scroll_top = this.scroll_elem.scrollTop, Math.floor(this.options.scroll_top / (this.options.cluster_height - this.options.block_height)) || 0
      },
      generateEmptyRow: function () {
        var e = this.options;
        if (!e.tag || !e.show_no_data_row) return [];
        var t, n = document.createElement(e.tag),
          i = document.createTextNode(e.no_data_text);
        return n.className = e.no_data_class, "tr" == e.tag && ((t = document.createElement("td")).colSpan = 100, t.appendChild(i)), n.appendChild(t || i), [n.outerHTML]
      },
      generate: function (e, t) {
        var n = this.options,
          i = e.length;
        if (i < n.rows_in_block) return {
          top_offset: 0,
          bottom_offset: 0,
          rows_above: 0,
          rows: i ? e : this.generateEmptyRow()
        };
        var r = Math.max((n.rows_in_cluster - n.rows_in_block) * t, 0),
          o = r + n.rows_in_cluster,
          a = Math.max(r * n.item_height, 0),
          s = Math.max((i - o) * n.item_height, 0),
          l = [],
          c = r;
        a < 1 && c++;
        for (var u = r; u < o; u++) e[u] && l.push(e[u]);
        return {
          top_offset: a,
          bottom_offset: s,
          rows_above: c,
          rows: l
        }
      },
      renderExtraTag: function (e, t) {
        var n = document.createElement(this.options.tag);
        return n.className = ["clusterize-extra-row", "clusterize-" + e].join(" "), t && (n.style.height = t + "px"), n.outerHTML
      },
      insertToDOM: function (e, t) {
        this.options.cluster_height || this.exploreEnvironment(e, t);
        var n = this.generate(e, this.getClusterNum()),
          i = n.rows.join(""),
          r = this.checkChanges("data", i, t),
          o = this.checkChanges("top", n.top_offset, t),
          a = this.checkChanges("bottom", n.bottom_offset, t),
          s = this.options.callbacks,
          l = [];
        r || o ? (n.top_offset && (this.options.keep_parity && l.push(this.renderExtraTag("keep-parity")), l.push(this.renderExtraTag("top-space", n.top_offset))), l.push(i), n.bottom_offset && l.push(this.renderExtraTag("bottom-space", n.bottom_offset)), s.clusterWillChange && s.clusterWillChange(), this.html(l.join("")), "ol" == this.options.content_tag && this.content_elem.setAttribute("start", n.rows_above), this.content_elem.style["counter-increment"] = "clusterize-counter " + (n.rows_above - 1), s.clusterChanged && s.clusterChanged()) : a && (this.content_elem.lastChild.style.height = n.bottom_offset + "px")
      },
      html: function (t) {
        var n = this.content_elem;
        if (e && e <= 9 && "tr" == this.options.tag) {
          var i, r = document.createElement("div");
          for (r.innerHTML = "<table><tbody>" + t + "</tbody></table>"; i = n.lastChild;) n.removeChild(i);
          for (var o = this.getChildNodes(r.firstChild.firstChild); o.length;) n.appendChild(o.shift())
        } else n.innerHTML = t
      },
      getChildNodes: function (e) {
        for (var t = e.children, n = [], i = 0, r = t.length; i < r; i++) n.push(t[i]);
        return n
      },
      checkChanges: function (e, t, n) {
        var i = t != n[e];
        return n[e] = t, i
      }
    }, n
  }()
}, function (e, t, n) {
  "use strict";
  n.r(t), n.d(t, "BrowserDelegate", (function () {
    return c
  })), n.d(t, "Browser", (function () {
    return u
  }));
  var i = n(263),
    r = n(9),
    o = n(1),
    a = n(3),
    s = Object(a.getGlobal)(),
    l = s.document;

  function c() {}

  function u(e, t, n) {
    this.myDelegate = e, this.mySelectedIds = [];
    this.myRootContainerId = n + "-browserview", this.idToElement = {}, this.myRootContainer = l.createElement("div"), this.myRootContainer.id = this.myRootContainerId, this.myRootContainer.classList.add("browserview"), l.getElementById(n).appendChild(this.myRootContainer), this.createElements(t, this.myRootContainer)
  }
  c.prototype.constructor = c, c.prototype.getNodeId = function (e) {
    throw "getId is not implemented."
  }, c.prototype.getNodeLabel = function (e) {
    return e.name
  }, c.prototype.getNodeClass = function (e) {
    return ""
  }, c.prototype.hasThumbnail = function (e) {
    return !1
  }, c.prototype.getThumbnailOptions = function (e) {
    return null
  }, c.prototype.getThumbnail = function (e) {
    return null
  }, c.prototype.onNodeClick = function (e, t, n) {}, c.prototype.onNodeHover = function (e, t, n) {}, c.prototype.selectItem = function (e) {}, c.prototype.deselectItem = function (e) {}, c.prototype.hasContent = function (e) {
    return !1
  }, c.prototype.addContent = function (e, t) {}, u.prototype.constructor = u, u.prototype.show = function (e) {
    e ? (this.myRootContainer.classList.remove("browserHidden"), this.myRootContainer.classList.add("browserVisible"), this.myRootContainer.style.display = "block") : (this.myRootContainer.classList.remove("browserVisible"), this.myRootContainer.classList.add("browserHidden"), this.myRootContainer.style.display = "none")
  }, u.prototype.getRootContainer = function () {
    return this.myRootContainer
  }, u.prototype.delegate = function () {
    return this.myDelegate
  }, u.prototype.addToSelection = function (e) {
    var t = this;

    function n(e) {
      return -1 == t.mySelectedIds.indexOf(e) && (t.mySelectedIds.push(e), !0)
    }
    for (var i = 0, r = e.length; i < r; ++i) {
      var o = e[i];
      if (n(o)) {
        var a = t.idToElement[o];
        void 0 === a ? t.myDelegate.selectItem(o) : a.classList.add("selected")
      }
    }
  }, u.prototype.removeFromSelection = function (e) {
    var t = this;

    function n(e) {
      var n = t.mySelectedIds.indexOf(e);
      return -1 != n && (t.mySelectedIds.splice(n, 1), !0)
    }
    for (var i = e.length - 1; i >= 0; --i) {
      var r = e[i];
      if (n(r)) {
        var o = this.idToElement[r];
        void 0 === o ? t.myDelegate.deselectItem(r) : o.classList.remove("selected")
      }
    }
  }, u.prototype.setSelection = function (e) {
    return this.removeFromSelection(this.mySelectedIds), this.addToSelection(e), this.mySelectedIds
  }, u.prototype.clearSelection = function () {
    this.removeFromSelection(this.mySelectedIds)
  }, u.prototype.createElements = function (e, t) {
    if (e)
      for (var n = 0; n < e.length; n++) {
        var i = e[n];
        this.createElement(i, t)
      }
  }, u.prototype.createElement = function (e, t) {
    var n = this,
      a = n.myDelegate.getNodeId(e),
      c = l.createElement("item");
    t.appendChild(c), this.idToElement[a] = c, c.onmouseover = function () {
      n.myDelegate.onNodeHover(n, e)
    }, c.onclick = function (t) {
      n.myRootContainer.querySelector(".flipped").removeClass("flipped"), n.myDelegate.onNodeClick(n, e, t)
    };
    var u = l.createElement("div");
    u.classList.add("card"), c.appendChild(u);
    var h = l.createElement("div");
    h.classList.add("browserElement"), u.appendChild(h);
    var d = n.myDelegate.getNodeLabel(e),
      f = l.createElement("label");
    f.innerHTML = d, h.appendChild(f), f.onclick = function (t) {
      n.myDelegate.onNodeClick(n, e, t)
    };
    var p = n.myDelegate.getThumbnail(e);
    if (p) {
      var m = l.createElement("img");
      m.classList.add("thumb");
      var g = n.myDelegate.getThumbnailOptions(e);
      i.Document.requestThumbnailWithSecurity(g, (function (e, t) {
        e ? o.logger.error("Failed to load thumbnail: " + p, Object(r.errorCodeString)(r.ErrorCodes.NETWORK_FAILURE)) : (m.src = s.URL.createObjectURL(t), m.onload = function () {
          s.URL.revokeObjectURL(m.src)
        })
      })), h.appendChild(m), m.onclick = function (t) {
        n.myDelegate.onNodeClick(n, e, t)
      }
    }
    n.myDelegate.hasContent(e) && n.myDelegate.addContent(e, u), c.classList.add(n.myDelegate.getNodeClass(e))
  }
}, function (e, t, n) {
  "use strict";
  n.r(t), n.d(t, "Filterbox", (function () {
    return o
  }));
  var i = n(37),
    r = n(8);

  function o(e, t) {
    this._id = e, this._listeners = {}, this._options = t || {}, this._filterFunction = this._options.filterFunction || function () {};
    var n = this.getDocument();
    this.container = n.createElement("div"), this.container.id = e, this.addClass("adsk-control"), this.addClass("adsk-filterbox"), this.addClass("empty");
    var i = n.createElement("input");
    i.classList.add("filter-box"), i.classList.add("docking-panel-delimiter-shadow"), i.type = "search", i.placeholder = r.i18n.translate("Enter filter term"), i.setAttribute("data-i18n", "Enter filter term"), i.incremental = "incremental", i.autosave = this.container.id + "filter", this.container.appendChild(i), this.filterbox = i;
    var o = this,
      a = function (e) {
        0 === (e = e.trim()).length ? o.container.classList.add("empty") : o.container.classList.remove("empty"), o._filterFunction && o._filterFunction(e)
      },
      s = n.createElement("div");
    s.className = "filter-box-icon", this.container.insertBefore(s, i.nextSibling);
    var l = n.createElement("div");
    l.className = "filter-box-close", l.addEventListener("click", (function () {
      o.filterbox.value = "", o.addClass("empty")
    })), this.container.appendChild(l), i.addEventListener("keydown", (function (e) {
      var t = o.getWindow();
      13 === (e = e || t.event).keyCode && o.filterbox.blur()
    })), i.addEventListener("input", (function (e) {
      a(this.value)
    })), i.addEventListener("change", (function (e) {
      a(this.value)
    })), i.addEventListener("focus", (function () {
      s.classList.add("focused")
    })), i.addEventListener("blur", (function () {
      s.classList.remove("focused")
    }))
  }
  o.prototype = Object.create(i.Control.prototype), o.prototype.constructor = o
}, function (e, t, n) {
  "use strict";
  n.r(t), n.d(t, "ViewerObjectContextMenu", (function () {
    return o
  }));
  var i = n(205),
    r = n(1);

  function o(e) {
    i.ObjectContextMenu.call(this, e)
  }
  o.prototype = Object.create(i.ObjectContextMenu.prototype), o.prototype.constructor = o, o.prototype.buildMenu = function (e, t) {
    var n = this;
    if (this.viewer.model) {
      var i = this,
        o = [],
        a = this.viewer.navigation,
        s = this.viewer.model.is2d();
      t.hasSelected && (o.push({
        title: "Isolate",
        target: function () {
          var e = i.viewer.getAggregateSelection();
          i.viewer.impl.visibilityManager.aggregateIsolate(e), i.viewer.clearSelection(), r.logger.track({
            name: "isolate_count",
            aggregate: "count"
          })
        }
      }), t.hasVisible && o.push({
        title: "Hide Selected",
        target: function () {
          var e = i.viewer.impl.visibilityManager;
          i.viewer.getAggregateSelection((function (t, n) {
            e.hide(n, t)
          })), i.viewer.clearSelection()
        }
      }), t.hasHidden && o.push({
        title: "Show Selected",
        target: function () {
          var e = i.viewer.getSelection();
          i.viewer.clearSelection(), i.viewer.show(e)
        }
      })), s && o.push({
        title: "Show All Layers",
        target: function () {
          i.viewer.setLayerVisible(null, !0)
        }
      }), o.push({
        title: "Show All Objects",
        target: function () {
          i.viewer.showAll(), r.logger.track({
            name: "showall",
            aggregate: "count"
          })
        }
      });
      var l = i.viewer.getAggregateSelection();
      if (!s && 1 === l.length && a.isActionEnabled("gotoview") && o.push({
          title: "Focus",
          target: function () {
            if ((l = i.viewer.getAggregateSelection()).length > 0) {
              var e = l[0];
              i.viewer.fitToView(e.selection, e.model)
            } else 0 === l.length && i.viewer.fitToView();
            r.logger.track({
              name: "fittoview",
              aggregate: "count"
            })
          }
        }), !s) {
        var c = this.viewer.impl.getCanvasBoundingClientRect(),
          u = e.clientX - c.left,
          h = e.clientY - c.top,
          d = this.viewer.clientToWorld(u, h, !1);
        d && o.push({
          title: "Pivot",
          target: function () {
            n.viewer.navigation.setPivotPoint(d.point)
          }
        })
      }
      return t.hasSelected && o.push({
        title: "Clear Selection",
        target: function () {
          i.viewer.clearSelection(), r.logger.track({
            name: "clearselection",
            aggregate: "count"
          })
        }
      }), o
    }
  }
}, function (e, t, n) {
  "use strict";
  n.r(t), n.d(t, "GuiViewer3D", (function () {
    return T
  }));
  var i = n(90),
    r = n(266),
    o = n(2),
    a = n(3),
    s = n(98),
    l = n(8),
    c = n(11),
    u = n(49),
    h = n(274),
    d = n(97),
    f = n(117),
    p = n(273),
    m = n(1),
    g = n(16),
    v = n(275),
    y = n(170),
    b = n(124),
    _ = n(147),
    x = n(110),
    w = n(75),
    E = n(177),
    A = n(9),
    S = n(67),
    M = (n(43), n(5));

  function T(e, t) {
    t || (t = {}), t.startOnInitialize = !1, i.Viewer3D.call(this, e, t), this.toolbar = null, this.dockingPanels = [], this.onFullScreenModeEvent = this.onFullScreenModeEvent.bind(this), this.onProgressBarUpdate = this.onProgressBarUpdate.bind(this)
  }
  T.prototype = Object.create(i.Viewer3D.prototype), T.prototype.constructor = T, T.prototype.initialize = function (e) {
    var t = i.Viewer3D.prototype.initialize.call(this, e);
    if (t > 0) return f.ErrorHandler.reportError(this.container, t), t;
    var n = this;
    if (this.toolController) {
      var a = new r.HotGestureTool(this);
      this.toolController.registerTool(a), this.toolController.activateTool(a.getName())
    }
    return this.addEventListener(o.FULLSCREEN_MODE_EVENT, this.onFullScreenModeEvent), this.contextMenu || this.setDefaultContextMenu(), this.progressbar = new p.ProgressBar(this.container), this.addEventListener(o.PROGRESS_UPDATE_EVENT, this.onProgressBarUpdate), this.addEventListener(o.VIEWER_RESIZE_EVENT, (function (e) {
      n.resizePanels(), n.updateToolbarButtons(e.width, e.height)
    })), this.addEventListener(o.NAVIGATION_MODE_CHANGED_EVENT, (function (e) {
      n.updateToolbarButtons(n.container.clientWidth, n.container.clientHeight)
    })), this.initEscapeHandlers(), this.localize(), this.addEventListener(o.WEBGL_CONTEXT_LOST_EVENT, function (e) {
      this.impl.stop();
      for (var t = this.container, n = t.childElementCount, i = 0; i < n; ++i) t.children[i].style.display = "none";
      f.ErrorHandler.reportError(this.container, A.ErrorCodes.WEBGL_LOST_CONTEXT)
    }.bind(this)), this.run(), 0
  }, T.prototype.uninitialize = function () {
    this.viewerSettingsPanel && (this.viewerSettingsPanel.uninitialize(), this.viewerSettingsPanel = null), this.renderoptions && (this.renderoptions.uninitialize(), this.renderoptions = null), this.viewerOptionButton && (this.viewerOptionButton = null), this.removeEventListener(o.FULLSCREEN_MODE_EVENT, this.onFullScreenModeEvent), this.removeEventListener(o.PROGRESS_UPDATE_EVENT, this.onProgressBarUpdate), this.progressbar = null, this.modelTools = null, this.navTools = null, this.settingsTools = null, this.debugMenu = null, this.modelStats = null, this.toolbar = null, i.Viewer3D.prototype.uninitialize.call(this)
  }, T.prototype.setUp = function (e) {
    e || (e = {}), e.startOnInitialize = !1, i.Viewer3D.prototype.setUp.call(this, e)
  }, T.prototype.tearDown = function () {
    i.Viewer3D.prototype.tearDown.call(this), this.toolbar && (this.toolbar.container.parentNode.removeChild(this.toolbar.container), this.toolbar = null), this.viewerSettingsPanel && this.setSettingsPanel(null), this.renderoptions && (this.removePanel(this.renderoptions), this.renderoptions.uninitialize(), this.renderoptions = null), this.debugMenu = null, this.removeEventListener(o.GEOMETRY_LOADED_EVENT, this.checkGeometry), this.checkGeometry = null
  }, T.prototype.onPostExtensionLoad = function (e) {
    var t = this.getToolbar();
    t && e.onToolbarCreated && e.onToolbarCreated(t), this.updateToolbarButtons(this.container.clientWidth, this.container.clientHeight)
  }, T.prototype.loadModel = function (e, t, n, r, o) {
    var a = this;
    return i.Viewer3D.prototype.loadModel.call(this, e, t, (function (e) {
      setTimeout((function () {
        t && (t.loadAsHidden || t.headlessViewer) || function (e) {
          a.running ? a.createUI(e) : m.logger.error("createUI expects the viewer to be running.", Object(A.errorCodeString)(A.ErrorCodes.VIEWER_INTERNAL_ERROR))
        }(e), n && n.call(n, e)
      }), 1)
    }), (function (e) {
      f.ErrorHandler.reportError(a.container, e), r && r.apply(r, arguments)
    }), o)
  }, T.prototype.createUI = function (e) {
    var t = this;
    if (this.model === e) {
      var n = this,
        i = this._createToolbar();
      this.checkGeometry = function () {
        setTimeout((function () {
          if (!n.impl.is2d && n.model && !n.model.hasGeometry()) {
            var e = A.ErrorCodes.BAD_DATA_MODEL_IS_EMPTY;
            f.ErrorHandler.reportError(n.container, e, "Model is empty"), n._loadingSpinner.hide()
          }
        }), 1)
      };
      var r = this.config.disabledExtensions || {},
        s = function (e) {
          return -1 === (t.profile && t.profile.extensions.unload ? t.profile.extensions.unload : []).indexOf(e)
        };
      this.initModelTools(e), Object(a.getGlobal)().ENABLE_DEBUG && this.initDebugTools(), "true" === Object(g.getParameterByName)("lmv_viewer_debug") && this.loadExtension("Autodesk.Debug", this.config);
      var l = function (e) {
        n.getExtension(e) && n.unloadExtension(e)
      };
      e.is2d() && (l("Autodesk.BimWalk"), l("Autodesk.Section"), l("Autodesk.Viewing.FusionOrbit")), r.measure || l("Autodesk.Measure"), this.dispatchEvent({
        type: S.TOOLBAR_CREATED_EVENT
      }), i && this.forEachExtension((function (e) {
        e.onToolbarCreated && e.onToolbarCreated(t.toolbar)
      }));
      var c = this.getExtension("Autodesk.DefaultTools.NavTools");
      c ? c.updateUI(e.is3d()) : this.loadExtension("Autodesk.DefaultTools.NavTools", n.config), this.initModality(), this.resize(), e.is2d() ? (this.setDefaultNavigationTool("pan"), this.setClickToSetCOI(!1, !1), setTimeout((function () {
        var e = {
          viewcube: "Autodesk.ViewCubeUi",
          measure: "Autodesk.Measure",
          hyperlink: "Autodesk.Hyperlink",
          layerManager: "Autodesk.LayerManager",
          propertiesPanel: "Autodesk.PropertiesManager"
        };
        for (var t in e) {
          var i = e[t];
          !r[t] && s(i) && n.loadExtension(i, n.config)
        }
      }), 1)) : (-1 === this.getDefaultNavigationToolName().indexOf("orbit") && this.setDefaultNavigationTool("orbit"), setTimeout((function () {
        var e = {
          viewcube: "Autodesk.ViewCubeUi",
          explode: "Autodesk.Explode",
          bimwalk: "Autodesk.BimWalk",
          fusionOrbit: "Autodesk.Viewing.FusionOrbit",
          measure: "Autodesk.Measure",
          section: "Autodesk.Section",
          layerManager: "Autodesk.LayerManager",
          modelBrowser: "Autodesk.ModelStructure",
          propertiesPanel: "Autodesk.PropertiesManager"
        };
        for (var t in e) {
          var i = e[t];
          !r[t] && s(i) && n.loadExtension(i, n.config)
        }!r.scalarisSimulation && s("Autodesk.Viewing.ScalarisSimulation") && n.model && n.model.isScalaris && n.loadExtension("Autodesk.Viewing.ScalarisSimulation", n.config)
      }), 1), e.isLoadDone() ? this.checkGeometry() : this.addEventListener(o.GEOMETRY_LOADED_EVENT, this.checkGeometry, {
        once: !0
      }))
    }
  }, T.prototype.onFullScreenModeEvent = function (e) {
    this.resizePanels(), this.updateFullscreenButton(e.mode)
  }, T.prototype.onProgressBarUpdate = function (e) {
    e.percent >= 0 && this.progressbar.setPercent(e.percent)
  }, T.prototype.addOptionToggle = function (e, t, n, i, r) {
    var o = r ? this.prefs[r] : null;
    n = "boolean" == typeof o ? o : n;
    var s = this.getDocument(),
      c = s.createElement("li");
    c.className = "toolbar-submenu-listitem";
    var u = s.createElement("input");
    u.className = "toolbar-submenu-checkbox", u.type = "checkbox", u.id = t, c.appendChild(u);
    var h = s.createElement("label");
    return h.setAttribute("for", t), h.setAttribute("data-i18n", t), h.textContent = l.i18n.translate(t), c.appendChild(h), e.appendChild(c), u.checked = n, u.addEventListener("touchstart", a.touchStartToClick), h.addEventListener("touchstart", a.touchStartToClick), c.addEventListener("touchstart", a.touchStartToClick), u.addEventListener("click", (function (e) {
      i(u.checked), e.stopPropagation()
    })), h.addEventListener("click", (function (e) {
      e.stopPropagation()
    })), c.addEventListener("click", (function (e) {
      i(!u.checked), e.stopPropagation()
    })), r && this.prefs.addListeners(r, (function (e) {
      u.checked = e
    }), (function (e) {
      u.checked = e, i(e)
    })), u
  }, T.prototype.addOptionList = function (e, t, n, i, r, o) {
    var a = this.prefs[o];
    i = "number" == typeof a ? a : i;
    var s = this.getDocument(),
      c = s.createElement("select");
    c.className = "option-drop-down", c.id = "selectMenu_" + t;
    for (var u = 0; u < n.length; u++) {
      var h = s.createElement("option");
      h.value = u, h.setAttribute("data-i18n", n[u]), h.textContent = l.i18n.translate(n[u]), c.add(h)
    }
    var d = s.createElement("li");
    d.className = "toolbar-submenu-select";
    var f = s.createElement("div");
    return f.className = "toolbar-submenu-selectlabel", f.setAttribute("for", t), f.setAttribute("data-i18n", t), f.textContent = l.i18n.translate(t), d.appendChild(f), d.appendChild(c), e.appendChild(d), c.selectedIndex = i, c.onchange = function (e) {
      var t = e.target.selectedIndex;
      r(t), e.stopPropagation()
    }, c.addEventListener("touchstart", (function (e) {
      e.stopPropagation()
    })), c.addEventListener("click", (function (e) {
      e.stopPropagation()
    })), o && this.prefs.addListeners(o, (function (e) {
      c.selectedIndex = e
    }), (function (e) {
      c.selectedIndex = e, r(e)
    })), c
  }, T.prototype.showViewer3dOptions = function (e) {
    var t = this.getSettingsPanel(!0);
    e && t.isVisible() && t.setVisible(!1), t.setVisible(e)
  }, T.prototype.showRenderingOptions = function (e) {
    e && this._createRenderingOptionsPanel(), this.renderoptions && this.renderoptions.setVisible(e)
  }, T.prototype._createRenderingOptionsPanel = function () {
    var e = this;
    if (!this.renderoptions && !this.model.is2d() && (this.renderoptions = new v.RenderOptionsPanel(this), this.addPanel(this.renderoptions), this.settingsTools && !this.renderOptionsButton)) {
      var t = new c.Button("toolbar-renderOptionsTool");
      t.setToolTip("Rendering options"), t.setIcon("adsk-icon-settings-render"), t.onClick = function (t) {
        var n = e.renderoptions && e.renderoptions.isVisible();
        e.renderoptions.setVisible(!n)
      }, this.settingsTools.addControl(t)
    }
  }, T.prototype.showLayerManager = function (e) {
    m.logger.warn('viewer.showLayerManager() is now handled the extension "Autodesk.LayerManager" and will be removed in version 8.0.0.')
  }, T.prototype.initHotkeys = function () {
    m.logger.warn("viewer.initHotkeys() has been deprecated and will be removed in version 8.0.0.")
  }, T.prototype.setModelStructurePanel = function (e) {
    m.logger.warn('viewer.setModelStructurePanel() is deprecated and will be removed in v8.0.0 - Use extension "Autodesk.ModelStructure".');
    var t = this.getExtension("Autodesk.ModelStructure");
    return !!t && t.setModelStructurePanel(e)
  }, T.prototype.setLayersPanel = function (e) {
    m.logger.warn('viewer.setLayersPanel() is now handled the extension "Autodesk.LayerManager" and will be removed in version 8.0.0.')
  }, T.prototype.setPropertyPanel = function (e) {
    m.logger.warn('viewer.setPropertyPanel() is now handled by extension "Autodesk.PropertiesManager" and will be removed in version 8.0.0.');
    var t = this.getExtension("Autodesk.PropertiesManager");
    return !!t && t.setPanel(e)
  }, T.prototype.getPropertyPanel = function (e) {
    m.logger.warn('viewer.getPropertyPanel() is now handled the extension "Autodesk.PropertiesManager" and will be removed in version 8.0.0.');
    var t = this.getExtension("Autodesk.PropertiesManager");
    return !t && e && (this.loadExtension("Autodesk.PropertiesManager"), t = this.getExtension("Autodesk.PropertiesManager")), t ? t.getPanel() : null
  }, T.prototype.setSettingsPanel = function (e) {
    var t = this;
    return (e instanceof w.SettingsPanel || !e) && (this.viewerSettingsPanel && (this.viewerSettingsPanel.setVisible(!1), this.removePanel(this.viewerSettingsPanel), this.viewerSettingsPanel.uninitialize()), this.viewerSettingsPanel = e, e && (this.addPanel(e), e.addVisibilityListener((function (n) {
      n && t.onPanelVisible(e, t), t.viewerOptionButton.setState(n ? c.Button.State.ACTIVE : c.Button.State.INACTIVE)
    }))), !0)
  }, T.prototype.getSettingsPanel = function (e, t) {
    return !this.viewerSettingsPanel && e && this.createSettingsPanel(t || this.model), this.viewerSettingsPanel
  }, T.prototype.createSettingsPanel = function (e) {
    var t = new E.ViewerSettingsPanel(this, e);
    this.setSettingsPanel(t), t.syncUI();
    var n = new c.Button("toolbar-settingsTool");
    this.viewerOptionButton = n, n.setIcon("adsk-icon-settings"), n.setToolTip("Settings"), this.settingsTools.addControl(n), this.createViewerOptionsMenu(e)
  }, T.prototype.initModelTools = function (e) {
    var t = this;
    if (this.createSettingsPanel(e), Object(a.getGlobal)().ENABLE_DEBUG && this._createRenderingOptionsPanel(), this.canChangeScreenMode() && !this.settingsTools.fullscreenbutton) {
      var n = new c.Button("toolbar-fullscreenTool", {
        collapsible: !1
      });
      n.setToolTip("Full screen"), n.setIcon("adsk-icon-fullscreen"), n.onClick = function (e) {
        t.nextScreenMode()
      }, this.settingsTools.addControl(n), this.settingsTools.fullscreenbutton = n, this.updateFullscreenButton(this.getScreenMode())
    }
  }, T.prototype.setPropertiesOnSelect = function (e) {
    m.logger.warn('viewer.setPropertiesOnSelect() is now handled by viewer.prefs.set("openPropertiesOnSelect", <boolean>) and will be removed in version 8.0.0.'), this.prefs.set(M.Prefs.OPEN_PROPERTIES_ON_SELECT, e)
  }, T.prototype.addDivider = function (e) {
    var t = this.getDocument().createElement("li");
    return t.className = "toolbar-submenu-horizontal-divider", e.appendChild(t), t
  }, T.prototype.createViewerOptionsMenu = function (e) {
    var t = this;
    this.viewerOptionButton.onClick = function () {
      t.getSettingsPanel(!0).isVisible() ? t.showViewer3dOptions(!1) : t.showViewer3dOptions(!0)
    }
  }, T.prototype.initDebugTools = function () {
    if (this.debugMenu) return !1;
    var e = new u.ControlGroup("debugTools");
    this.debugMenu = e;
    var t = new c.Button("toolbar-debugTool");
    return t.setIcon("adsk-icon-bug"), e.addControl(t), this.debugMenu.debugSubMenuButton = t, this.createDebugSubmenu(this.debugMenu.debugSubMenuButton), this.toolbar.addControl(e), !0
  }, T.prototype.removeDebugTools = function () {
    this.debugMenu && (this.debugMenu.removeFromParent(), this.debugMenu = null)
  }, T.prototype.createDebugSubmenu = function (e) {
    var t = this,
      n = this.getDocument().createElement("div");
    n.id = "toolbar-debugToolSubmenu", n.classList.add("toolbar-submenu"), n.classList.add("toolbar-settings-sub-menu"), n.classList.add("adsk-hidden"), this.debugMenu.subMenu = n, this.debugMenu.subMenu.style.minWidth = "180px", this.container.appendChild(n), this.initModelStats(), this.addDivider(n), this.addDivider(n);
    var i = y.Lang.getLanguages(),
      r = i.map((function (e) {
        return e.label
      })),
      o = i.map((function (e) {
        return e.symbol
      }));

    function s() {
      t.localize()
    }
    var l = t.selectedLanguage ? t.selectedLanguage : 0;
    this.addOptionList(n, "Language", r, l, (function (e) {
      var n = o[e];
      t.selectedLanguage = e, Object(b.setLanguage)(n, s)
    }), null).parentNode.style.paddingBottom = "15px", this.addDivider(this.debugMenu.subMenu);
    this.addOptionList(n, "Error", ["UNKNOWN FAILURE", "BAD DATA", "NETWORK ERROR", "NETWORK ACCESS DENIED", "NETWORK FILE NOT FOUND", "NETWORK SERVER ERROR", "NETWORK UNHANDLED RESPONSE CODE", "BROWSER WEBGL NOT SUPPORTED", "BAD DATA NO VIEWABLE CONTENT"], 0, (function (e) {
      var n = e + 1;
      f.ErrorHandler.reportError(t.container, n, "")
    }), null).parentNode.style.paddingBottom = "15px";
    var c = n.getBoundingClientRect();
    this.debugMenu.subMenu.style.width = c.width + "px", this.container.removeChild(n), e.container.appendChild(n);
    var u = c.left + c.width,
      h = this.container.getBoundingClientRect().right;
    if (u > h) {
      var d = -(u - h + 10) + "px";
      this.debugMenu.subMenu.style.left = d
    }
    e.onMouseOver = function (e) {
      n.classList.remove("adsk-hidden")
    }, e.onMouseOut = function (e) {
      n.classList.add("adsk-hidden")
    }, Object(a.isTouchDevice)() && (e.onClick = function (e) {
      n.classList.toggle("adsk-hidden")
    })
  }, T.prototype.initModelStats = function () {
    var e = this;

    function t(t) {
      var n = e.impl,
        i = "";
      e.model && (i += "Geom&nbsp;polys:&nbsp;" + n.modelQueue().getGeometryList().geomPolyCount + "<br>", i += "Instance&nbsp;polys:&nbsp;" + n.modelQueue().getGeometryList().instancePolyCount + "<br>", i += "Fragments:&nbsp;" + n.modelQueue().getFragmentList().getCount() + "<br>", i += "Geoms:&nbsp;" + n.modelQueue().getGeometryList().geoms.length + "<br>", i += "Loading&nbsp;time:&nbsp;" + (n.model.loader.loadTime / 1e3).toFixed(2) + " s<br>"), i += "# " + (t || ""), e.modelStats.innerHTML = i
    }
    this.addOptionToggle(this.debugMenu.subMenu, "Model statistics", !1, (function (n) {
      n && !e.modelStats && (! function () {
        var n = e.getDocument();
        e.modelStats = n.createElement("div"), e.modelStats.className = "statspanel", e.container.appendChild(e.modelStats), e.addEventListener(o.PROGRESS_UPDATE_EVENT, (function (e) {
          e.message && t(e.message)
        })), e.fpsDisplay = n.createElement("div"), e.fpsDisplay.className = "fps", e.container.appendChild(e.fpsDisplay)
      }(), t("")), e.modelStats.style.visibility = n ? "visible" : "hidden", e.fpsDisplay.style.visibility = n ? "visible" : "hidden", e.impl.fpsCallback = n ? function (t) {
        e.fpsDisplay.textContent = "" + (0 | t)
      } : null
    }))
  }, T.prototype.initEscapeHandlers = function () {
    var e = this;
    this.addEventListener(o.ESCAPE_EVENT, (function (t) {
      if (!e.contextMenu || !e.contextMenu.hide())
        if (e.renderoptions && e.renderoptions.isVisible()) e.renderoptions.setVisible(!1);
        else {
          if (e.getActiveNavigationTool() !== e.getDefaultNavigationToolName()) return e.toolController && e.toolController.setIsLocked(!1), e.setActiveNavigationTool(), void _.HudMessage.dismiss();
          if (e.impl.selector.hasSelection()) e.clearSelection();
          else if (e.areAllVisible()) {
            if (!x.AlertBox.dismiss()) {
              for (var n = 0; n < e.dockingPanels.length; ++n) {
                var i = e.dockingPanels[n];
                if ("none" !== i.container.style.display && "" !== i.container.style.display) return void i.setVisible(!1)
              }
              e.escapeScreenMode()
            }
          } else e.showAll()
        }
    }))
  }, T.prototype.getToolbar = function () {
    return this.toolbar
  }, T.prototype._createToolbar = function () {
    return !this.toolbar && (this.toolbar = new h.ToolBar("guiviewer3d-toolbar"), this.toolbar.setGlobalManager(this.globalManager), this.navTools = new d.RadioButtonGroup(S.TOOLBAR.NAVTOOLSID), this.modelTools = new u.ControlGroup(S.TOOLBAR.MODELTOOLSID), this.settingsTools = new u.ControlGroup(S.TOOLBAR.SETTINGSTOOLSID), this.toolbar.addControl(this.navTools), this.toolbar.addControl(this.modelTools), this.toolbar.addControl(this.settingsTools), this.container.appendChild(this.toolbar.container), this.updateToolbarButtons(this.container.clientWidth, this.container.clientHeight), !0)
  }, T.prototype.showModelStructurePanel = function (e) {
    m.logger.warn('viewer.showModelStructurePanel() is deprecated and will be removed in v8.0.0 - Use extension "Autodesk.ModelStructure".'), e ? this.activateExtension("Autodesk.ModelStructure") : this.deactivateExtension("Autodesk.ModelStructure")
  }, T.prototype.onPanelVisible = function (e) {
    this.dockingPanels.splice(this.dockingPanels.indexOf(e), 1), this.dockingPanels.splice(0, 0, e)
  }, T.prototype.updateFullscreenButton = function (e) {
    var t = "adsk-icon-fullscreen";
    switch (e) {
      case s.ScreenMode.kNormal:
        this.isScreenModeSupported(s.ScreenMode.kFullBrowser) || (t = "adsk-icon-fullscreen");
        break;
      case s.ScreenMode.kFullBrowser:
        t = this.isScreenModeSupported(s.ScreenMode.kFullScreen) ? "adsk-icon-fullscreen" : "adsk-icon-fullscreen-exit";
        break;
      case s.ScreenMode.kFullScreen:
        t = "adsk-icon-fullscreen-exit"
    }
    this.settingsTools.fullscreenbutton.setIcon(t)
  }, T.prototype.localize = function () {
    i.Viewer3D.prototype.localize.call(this), this.debugMenu && this.debugMenu.debugSubMenuButton && (this.debugMenu.debugSubMenuButton.container.removeChild(this.debugMenu.subMenu), this.createDebugSubmenu(this.debugMenu.debugSubMenuButton)), f.ErrorHandler.localize()
  }, T.prototype.addPanel = function (e) {
    return -1 === this.dockingPanels.indexOf(e) && (this.dockingPanels.push(e), !0)
  }, T.prototype.removePanel = function (e) {
    var t = this.dockingPanels.indexOf(e);
    return t > -1 && (this.dockingPanels.splice(t, 1), !0)
  }, T.prototype.resizePanels = function (e) {
    e = e || {};
    var t = this.toolbar ? this.toolbar.getDimensions().height : 0,
      n = this.getDimensions(),
      i = n.height;
    e.dimensions && e.dimensions.height ? i = e.dimensions.height : e.dimensions = {
      height: n.height,
      width: n.width
    }, e.dimensions.height = i - t;
    var r = e ? e.dockingPanels : null;
    r || (r = this.dockingPanels);
    var o, a, s = this.container.getBoundingClientRect(),
      l = s.top,
      c = s.bottom,
      u = s.left,
      h = s.right;
    e && e.dimensions ? (o = e.dimensions.width, a = e.dimensions.height, c = e.dimensions.height) : (o = s.width, a = s.height);
    for (var d = 0; d < r.length; ++d) r[d].onViewerResize(l, c, u, h, o, a)
  }, T.prototype.initExplodeSlider = function () {
    m.logger.warn('viewer.initExplodeSlider() has been replaced by extension "Autodesk.Explode". initExplodeSlier() will be removed in version 7.0.0.')
  }, T.prototype.initInspectTools = function () {
    var e = new c.Button("toolbar-inspectTools");
    e.setToolTip("Inspect"), e.setIcon("measure"), e.setVisible(!1), this.modelTools.addControl(e);
    var t = new d.RadioButtonGroup("toolbar-inspectSubMenu");
    t.addClass("toolbar-vertical-group"), t.setVisible(!1), this.modelTools.addControl(t), e.container.insertBefore(t.container, e.container.firstChild), e.onMouseOver = function () {
      t.setVisible(!0)
    }, e.onMouseOut = function () {
      t.setVisible(!1)
    }, Object(a.isTouchDevice)() && (e.onClick = function (e) {
      t.setVisible(!t.isVisible())
    })
  }, T.prototype.initModality = function () {
    function e(e) {
      return e.id.substring(8, e.id.length)
    }

    function t(e) {
      var t = e.ownerDocument.createEvent("Event");
      t.initEvent("click", !0, !0), e.dispatchEvent(t)
    }
    var n = {
        orbitTools: {
          explodeTool: 1
        },
        panTool: {
          explodeTool: 1
        },
        zoomTool: {
          explodeTool: 1
        },
        beelineTool: {},
        sectionTool: {
          measureTool: 0,
          calibrateTool: 0
        },
        explodeTool: {
          measureTool: 0,
          calibrateTool: 0,
          firstPersonTool: 1,
          bimWalkTool: 1
        },
        measureTool: {
          sectionTool: 0
        },
        firstPersonTool: {
          explodeTool: 1
        },
        bimWalkTool: {
          explodeTool: 1,
          sectionTool: 1
        }
      },
      i = {};

    function r(e, t, n) {
      i[e] = n ? t : void 0
    }
    this.toolbar.container.addEventListener("click", (function (o) {
      var a = (o.target.getAttribute("class") || "").split(/\s+/);
      if (-1 === a.indexOf("clickoff")) {
        var s = function e(t) {
          for (var n = 0; n < 2 && t.parentElement;) {
            var i = t.id;
            if (0 === i.indexOf("toolbar-")) {
              if (i.indexOf("arrow") === i.length - 5) return;
              return e(t.parentElement) || t
            }
            t = t.parentElement, n++
          }
        }(o.target);
        if (s) {
          var l = e(s);
          if (n[l] && ("sectionTool" !== l || -1 === a.indexOf("adsk-icon-section-analysis") && !o.target.querySelector(".adsk-icon-section-analysis")) && ("measureTool" !== l || -1 === a.indexOf("adsk-icon-measure-menu") && !o.target.querySelector(".adsk-icon-measure-menu"))) {
            for (var c in i[l] && r(l, s, !1), i) {
              var u = i[c];
              if (u) {
                var h = e(u);
                u.classList.contains("active") ? n[l][h] || t(u) : r(h, u, !1)
              }
            }
            r(l, s, !0)
          }
        }
      }
    }), !0)
  }, T.prototype.updateToolbarButtons = function (e, t) {
    if (this.getToolbar()) {
      var n, i;
      i = e > 310 ? "block" : "none", (n = this.modelTools.getControl("toolbar-explodeTool")) && n.setDisplay(i), i = e > 380 ? "block" : "none", (n = this.modelTools.getControl("toolbar-collaborateTool")) && n.setDisplay(i), i = e > 515 ? "block" : "none";
      var r = this.navTools.getControl("toolbar-cameraSubmenuTool");
      r && (r.setDisplay(i), (n = r.subMenu.getControl("toolbar-homeTool")) && n.setDisplay(this.navigation.isActionEnabled("gotoview") ? "block" : "none"), (n = r.subMenu.getControl("toolbar-fitToViewTool")) && n.setDisplay(this.navigation.isActionEnabled("gotoview") ? "block" : "none"), (n = r.subMenu.getControl("toolbar-focalLengthTool")) && n.setDisplay(this.navigation.isActionEnabled("fov") ? "block" : "none"), (n = r.subMenu.getControl("toolbar-rollTool")) && n.setDisplay(this.navigation.isActionEnabled("roll") ? "block" : "none")), i = e > 700 ? "block" : "none", (n = this.modelTools.getControl("toolbar-measureTool")) && n.setDisplay(i), (n = this.modelTools.getControl("toolbar-sectionTool")) && n.setDisplay(i), i = e > 740 ? "block" : "none", (n = this.navTools.getControl("toolbar-beelineTool")) && n.setDisplay(this.navigation.isActionEnabled("walk") ? i : "none"), (n = this.navTools.getControl("toolbar-firstPersonTool")) && n.setDisplay(this.navigation.isActionEnabled("walk") ? i : "none"), (n = this.navTools.getControl("toolbar-zoomTool")) && n.setDisplay(this.navigation.isActionEnabled("zoom") ? i : "none"), (n = this.navTools.getControl("toolbar-panTool")) && n.setDisplay(this.navigation.isActionEnabled("pan") ? i : "none"), (n = this.navTools.getControl("toolbar-orbitTools")) && n.setDisplay(this.navigation.isActionEnabled("orbit") ? i : "none"), this.customizeToolbarCB && this.customizeToolbarCB(this, e, t)
    }
  }, T.prototype.registerCustomizeToolbarCB = function (e) {
    this.customizeToolbarCB = e, this.updateToolbarButtons(this.container.clientWidth, this.container.clientHeight)
  }, Autodesk.Viewing.Private.GuiViewer3D = T
}, function (e, t, n) {}, function (e, t, n) {}, function (e, t, n) {
  "use strict";
  n.r(t), n.d(t, "MultiViewerFactory", (function () {
    return s
  }));
  var i = n(279),
    r = (n(142), n(106)),
    o = n(73);

  function a(e, t) {
    for (var n = 0; n < t.length; n++) {
      var i = t[n];
      i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(e, i.key, i)
    }
  }
  var s = function () {
    function e() {
      ! function (e, t) {
        if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
      }(this, e);
      var t = Autodesk.Viewing.Private.createRenderer(void 0, {
          alpha: !0
        }),
        n = new r.MaterialManager(t),
        i = new o.OtgResourceCache;
      this.sharedResources = {
        glrenderer: t,
        materialManager: n,
        geomCache: i,
        loadedModels: {}
      }
    }
    var t, n, s;
    return t = e, (n = [{
      key: "createViewer",
      value: function (e, t) {
        var n = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : Autodesk.Viewing.Viewer3D;
        return Object(i.createLeechViewer)(e, t, this.sharedResources, n)
      }
    }]) && a(t.prototype, n), s && a(t, s), e
  }()
}, function (e, t, n) {
  "use strict";
  n.r(t), n.d(t, "CrossViewerInteractionCommon", (function () {
    return r
  }));
  var i = n(2),
    r = {
      onSelectionChanged: {
        eventName: i.AGGREGATE_SELECTION_CHANGED_EVENT,
        cb: function (e, t, n) {
          var i = e.getAggregateSelection();
          if (t.impl.model)
            if (i.length > 0)
              for (var r = 0; r < i.length; r++)
                for (var o = i[r], a = o.model, s = o.selection, l = 0; l < t.impl.modelQueue().getModels().length; l++) {
                  var c = t.impl.modelQueue().getModels()[l];
                  c && c.getDocumentNode() && a.getDocumentNode() && c.getDocumentNode().originModel === a.getDocumentNode().originModel ? (t.impl.is2d ? t.select(s, c) : (t.showAll(), t.select(s, c), t.isolate(s, c)), t.fitToView(s)) : !t.impl.is2d && c.visibilityManager && c.visibilityManager.setAllVisibility(!1)
                } else t.clearSelection(), t.impl.is2d || t.showAll()
        }
      }
    }
}, function (e, t, n) {
  "use strict";
  n.r(t);
  var i = n(65),
    r = n(282);
  r.externalExtensions.forEach((function (e) {
    var t = Object(r.getExtensionEntryKey)(e),
      n = "extensions/".concat(t, "/").concat(t, ".").concat("min.js");
    e.ids.forEach((function (e) {
      i.theExtensionManager.registerExternalExtension(e, n)
    }))
  })), i.theExtensionManager.registerExternalExtension("Autodesk.DiffTool", "extensions/DiffTool/DiffTool.".concat("min.js"))
}, function (e, t, n) {
  "use strict";

  function i(e) {
    var t = Autodesk.Viewing,
      n = t.Private,
      i = t.UI,
      r = t.Extensions;
    for (var o in e.av) t[o] = e.av[o];
    for (var a in e.avp) n[a] = e.avp[a];
    for (var s in e.avu) i[s] = e.avu[s];
    for (var l in e.ave) r[l] = e.ave[l];
    t.getGlobal().THREE = e.THREE, t.getGlobal().LMV = e, n.isRightClick = t.isRightClick, n.isMiddleClick = t.isMiddleClick
  }
  n.r(t), n.d(t, "initializeLegacyNamespaces", (function () {
    return i
  }))
}, function (e, t, n) {
  "use strict";
  n.r(t);
  var i = n(65),
    r = n(35),
    o = n(82),
    a = n(277),
    s = n(11),
    l = n(2),
    c = n(5);

  function u(e, t) {
    r.Extension.call(this, e, t), this.name = "propertiesmanager", this._panel = null, this._onIsolateEvent = this._onIsolateEvent.bind(this), this._onSelectionChangeEvent = this._onSelectionChangeEvent.bind(this), this._onPrefChange = this._onPrefChange.bind(this)
  }
  u.prototype = Object.create(r.Extension.prototype), u.prototype.constructor = u;
  var h = u.prototype;
  h.load = function () {
    return this.viewer.addEventListener(l.ISOLATE_EVENT, this._onIsolateEvent), this.viewer.addEventListener(l.AGGREGATE_SELECTION_CHANGED_EVENT, this._onSelectionChangeEvent), this.viewer.prefs.addListeners(c.Prefs.OPEN_PROPERTIES_ON_SELECT, this._onPrefChange), !0
  }, h.unload = function () {
    this.viewer.removeEventListener(l.ISOLATE_EVENT, this._onIsolateEvent), this.viewer.removeEventListener(l.AGGREGATE_SELECTION_CHANGED_EVENT, this._onSelectionChangeEvent), this.viewer.prefs.removeListeners(c.Prefs.OPEN_PROPERTIES_ON_SELECT, this._onPrefChange), this.deactivate(), this.setPanel(null), this._toolbarButton && (this.viewer.settingsTools.removeControl(this._toolbarButton), this.viewer.settingsTools.propertiesbutton = null, this._toolbarButton = null)
  }, h.onToolbarCreated = function (e) {
    this.setDefaultPanel(), this._addToolbarButton()
  }, h.activate = function () {
    return !!this._panel && (this._panel.setVisible(!0), !0)
  }, h.deactivate = function () {
    return this._panel && this._panel.setVisible(!1), !0
  }, h.isActive = function () {
    return !!this._panel && this._panel.isVisible()
  }, h.setPanel = function (e) {
    var t = this;
    return (e instanceof o.PropertyPanel || !e) && (this._panel && (this._panel.setVisible(!1), this.viewer.removePanel(this._panel), this._panel.uninitialize()), this._panel = e, e && (this.viewer.addPanel(e), e.addVisibilityListener((function (e) {
      e && t.viewer.onPanelVisible(t._panel), t._toolbarButton.setState(e ? s.Button.State.ACTIVE : s.Button.State.INACTIVE)
    }))), !0)
  }, h.setDefaultPanel = function () {
    this.setPanel(new a.ViewerPropertyPanel(this.viewer))
  }, h.getPanel = function () {
    return this._panel
  }, h.getToolbarButton = function () {
    return this._toolbarButton
  }, h._addToolbarButton = function () {
    var e = this;
    if (!this._toolbarButton) {
      var t = this._toolbarButton = new s.Button("toolbar-propertiesTool");
      t.setToolTip("Properties"), t.setIcon("adsk-icon-properties"), t.onClick = function (t) {
        e._panel.setVisible(!e._panel.isVisible())
      }, t.setVisible(!this.viewer.prefs.openPropertiesOnSelect), this.viewer.settingsTools.addControl(t, {
        index: 1
      }), this.viewer.settingsTools.propertiesbutton = t
    }
  }, h._onIsolateEvent = function (e) {
    this._panel && (this.viewer.prefs.openPropertiesOnSelect || e.nodeIdArray[0] === e.model.getRootId()) && this._panel.setVisible(e.nodeIdArray.length > 0 || this.viewer.impl.selector.hasSelection())
  }, h._onSelectionChangeEvent = function (e) {
    if (this.viewer.prefs.openPropertiesOnSelect) {
      for (var t = !1, n = 0; n < e.selections.length; ++n)
        if (e.selections[n].dbIdArray.length > 0) {
          t = !0;
          break
        } t ? this.activate() : this.deactivate()
    }
  }, h._onPrefChange = function (e) {
    this._toolbarButton && this._toolbarButton.setVisible(!e)
  };
  var d = n(177);

  function f(e, t) {
    r.Extension.call(this, e, t), this.viewer = e, this.options = t, this.name = "viewersettings"
  }
  f.prototype = Object.create(r.Extension.prototype), f.prototype.constructor = f;
  var p = f.prototype;
  p.activate = function () {
    this.activeStatus || (this.viewer.showViewer3dOptions(!0), this.viewer.getSettingsPanel(!0).selectTab(d.ViewerSettingTab.Performance), this.activeStatus = !0);
    return !0
  }, p.deactivate = function () {
    return this.activeStatus && (this.viewer.showViewer3dOptions(!1), this.activeStatus = !1), !0
  };
  var m = n(276),
    g = n(3);

  function v(e, t) {
    r.Extension.call(this, e, t), this.viewer = e, this.options = t, this.name = "modelstructure", this._modelstructure = null, this._onLoadModel = this._onLoadModel.bind(this), this._onUnloadModel = this._onUnloadModel.bind(this)
  }
  v.prototype = Object.create(r.Extension.prototype), v.prototype.constructor = v;
  var y = v.prototype;
  y.load = function () {
    return this.viewer.addEventListener(l.MODEL_ADDED_EVENT, this._onLoadModel), this.viewer.addEventListener(l.MODEL_ROOT_LOADED_EVENT, this._onLoadModel), this.viewer.addEventListener(l.MODEL_UNLOADED_EVENT, this._onUnloadModel), this.viewer.addEventListener(l.MODEL_REMOVED_EVENT, this._onUnloadModel), !0
  }, y.unload = function () {
    return this.deactivate(), this.setModelStructurePanel(null), this._structureButton && (this.viewer.settingsTools.removeControl(this._structureButton), this.viewer.settingsTools.structurebutton = null, this._structureButton = null), this.viewer.removeEventListener(l.MODEL_ADDED_EVENT, this._onLoadModel), this.viewer.removeEventListener(l.MODEL_ROOT_LOADED_EVENT, this._onLoadModel), this.viewer.removeEventListener(l.MODEL_UNLOADED_EVENT, this._onUnloadModel), this.viewer.removeEventListener(l.MODEL_REMOVED_EVENT, this._onUnloadModel), !0
  }, y.onToolbarCreated = function (e) {
    var t = this,
      n = new s.Button("toolbar-modelStructureTool");
    n.setToolTip("Model browser"), n.setIcon("adsk-icon-structure"), n.onClick = function (e) {
      !t._modelstructure.isVisible() ? t.activate() : t.deactivate()
    };
    var i = this.viewer.settingsTools;
    i.addControl(n, {
      index: 0
    }), i.structurebutton = n, this._structureButton = n, this.restoreDefaultPanel()
  }, y.activate = function () {
    return !!this._modelstructure && (this._modelstructure.setVisible(!0), !0)
  }, y.deactivate = function () {
    return this._modelstructure && this._modelstructure.setVisible(!1), !0
  }, y.isActive = function () {
    return !!this._modelstructure && this._modelstructure.isVisible()
  }, y.setModelStructurePanel = function (e) {
    var t = this;
    if (e === this._modelstructure) return !1;
    if (this._modelstructure && (this._modelstructure.setVisible(!1), this.viewer.removePanel(this._modelstructure), this._modelstructure.uninitialize()), this._modelstructure = e, this.viewer.modelstructure = e, !e) return !0;
    this.viewer.addPanel(this._modelstructure);
    for (var n = this.viewer.impl.modelQueue().getModels(), i = 0; i < n.length; ++i) this._modelstructure.addModel(n[i]);
    return this._modelstructure.addVisibilityListener((function (e) {
      e && t.viewer.onPanelVisible(t._modelstructure), t._structureButton.setState(e ? s.Button.State.ACTIVE : s.Button.State.INACTIVE)
    })), !0
  }, y.restoreDefaultPanel = function () {
    var e = this.viewer.config,
      t = {
        docStructureConfig: e.docStructureConfig,
        hideSearch: Object(g.isMobileDevice)(),
        excludeRoot: e.modelBrowserExcludeRoot,
        startCollapsed: e.modelBrowserStartCollapsed
      },
      n = e.defaultModelStructureTitle || "Browser",
      i = new m.ViewerModelStructurePanel(this.viewer, n, t);
    this.setModelStructurePanel(i)
  }, y._onLoadModel = function (e) {
    this._modelstructure && this._modelstructure.addModel(e.model)
  }, y._onUnloadModel = function (e) {
    this._modelstructure && this._modelstructure.unloadModel(e.model)
  };
  var b = n(67),
    _ = n(206),
    x = n(267),
    w = n(268),
    E = n(8),
    A = n(97),
    S = n(147);

  function M(e, t) {
    r.Extension.call(this, e, t), this.name = "navtools", this.modes = ["pan", "dolly", "freeorbit", "orbit", "fov", "worldup", "fittoview"], this.onToolChanged = this.onToolChanged.bind(this), this.onNavigationModeChanged = this.onNavigationModeChanged.bind(this)
  }
  M.prototype = Object.create(r.Extension.prototype), M.prototype.constructor = M;
  var T = M.prototype;

  function C(e, t, n) {
    return function () {
      e.isActive(n) ? e.deactivate() : e.activate(n)
    }
  }
  T.load = function () {
    var e = this.viewer,
      t = new x.FovTool(e),
      n = new w.WorldUpTool(e.impl, e);
    return e.toolController.registerTool(t), e.toolController.registerTool(n), this.initFocalLengthOverlay(), e.addEventListener(l.TOOL_CHANGE_EVENT, this.onToolChanged), e.addEventListener(l.NAVIGATION_MODE_CHANGED_EVENT, this.onNavigationModeChanged), !0
  }, T.updateUI = function (e) {
    e !== this.is3d && (this._destroyUI(), this._createUI(e))
  }, T.onToolbarCreated = function (e) {
    var t = this.viewer.model.is3d();
    this._createUI(t)
  }, T._createUI = function (e) {
    var t = this.viewer,
      n = t.getToolbar().getControl(b.TOOLBAR.NAVTOOLSID),
      i = function (e) {
        return t.navigation.isActionEnabled(e) ? "block" : "none"
      };
    if (e) {
      var r = new _.ComboButton("toolbar-orbitTools");
      r.setToolTip("Orbit"), r.setIcon("adsk-icon-orbit-constrained"), r.setDisplay(i("orbit")), this.createOrbitSubmenu(r), n.addControl(r), n.orbittoolsbutton = r, r.setState(s.Button.State.ACTIVE), n.returnToDefault = function () {
        r.setState(s.Button.State.ACTIVE)
      }
    }
    var o = new s.Button("toolbar-panTool");
    o.setToolTip("Pan"), o.setIcon("adsk-icon-pan"), o.onClick = C(this, 0, "pan"), o.setDisplay(i("pan")), n.addControl(o), n.panbutton = o, e || (n.returnToDefault = function () {
      o.setState(s.Button.State.ACTIVE)
    }, n.returnToDefault());
    var a = new s.Button("toolbar-zoomTool");
    a.setToolTip("Zoom"), a.setIcon("adsk-icon-zoom"), a.onClick = C(this, 0, "dolly"), a.setDisplay(i("zoom")), n.addControl(a), n.dollybutton = a;
    var l = new _.ComboButton("toolbar-cameraSubmenuTool");
    l.setToolTip("Camera interactions"), l.setIcon("adsk-icon-camera"), l.saveAsDefault(), this.createCameraSubmenu(l, e), n.addControl(l), n.camerabutton = l, this.is3d = e
  }, T.createOrbitSubmenu = function (e) {
    var t = this.viewer.getToolbar().getControl(b.TOOLBAR.NAVTOOLSID),
      n = new s.Button("toolbar-freeOrbitTool");
    n.setToolTip("Free orbit"), n.setIcon("adsk-icon-orbit-free"), n.onClick = C(this, 0, "freeorbit"), e.addControl(n), t.freeorbitbutton = n;
    var i = new s.Button("toolbar-orbitTool");
    i.setToolTip("Orbit"), i.setIcon("adsk-icon-orbit-constrained"), i.onClick = C(this, 0, "orbit"), e.addControl(i), t.orbitbutton = i, e.onClick = i.onClick
  }, T.createCameraSubmenu = function (e, t) {
    var n = this,
      i = this.viewer,
      r = i.getToolbar().getControl(b.TOOLBAR.NAVTOOLSID),
      o = function (e) {
        return i.navigation.isActionEnabled(e) ? "block" : "none"
      };
    if (Object(g.isTouchDevice)()) {
      var a = new s.Button("toolbar-homeTool");
      a.setToolTip("Home"), a.setIcon("adsk-icon-home"), a.onClick = function () {
        i.navigation.setRequestHomeView(!0);
        var t = i.getDefaultNavigationToolName();
        n.activate(t), e.restoreDefault()
      }, a.setDisplay(o("gotoview")), e.addControl(a), r.homebutton = a
    }
    var l = new s.Button("toolbar-fitToViewTool");
    if (l.setToolTip("Fit to view"), l.setIcon("adsk-icon-fit-to-view"), l.onClick = function (t) {
        i.impl.fitToView(i.impl.selector.getAggregateSelection());
        var n = i.getDefaultNavigationToolName();
        i.setActiveNavigationTool(n), e.restoreDefault()
      }, l.setDisplay(o("gotoview")), e.addControl(l), r.fittoviewbutton = l, t) {
      var c = new s.Button("toolbar-focalLengthTool");
      c.setToolTip("Focal length"), c.setIcon("adsk-icon-fov"), c.onClick = C(this, 0, "fov"), c.setDisplay(o("fov")), e.addControl(c), r.fovbutton = c
    }
    var u = new s.Button("toolbar-rollTool");
    u.setToolTip("Roll"), u.setIcon("adsk-icon-roll"), u.onClick = C(this, 0, "worldup"), u.setDisplay(o("roll")), e.addControl(u), r.rollbutton = u
  }, T.onToolChanged = function (e) {
    if ("fov" === e.toolName && this.showFocalLengthOverlay(e.active), e.active) switch (e.toolName) {
      case "dolly":
        this.handleAltRelease("dollybutton");
        break;
      case "pan":
        this.handleAltRelease("panbutton");
        break;
      case "worldup":
        this.handleAltRelease("rollbutton");
        break;
      case "fov":
        this.handleAltRelease("fovbutton")
    }
  }, T.onNavigationModeChanged = function (e) {
    if (this.viewer.getDefaultNavigationToolName() === e.id) {
      var t = this.viewer.getToolbar();
      if (!t) return;
      var n = t.getControl(b.TOOLBAR.NAVTOOLSID);
      if (!n) return;
      n.returnToDefault && n.returnToDefault()
    }
  }, T.handleAltRelease = function (e) {
    var t = this.viewer.getToolbar();
    if (t) {
      var n = t.getControl(b.TOOLBAR.NAVTOOLSID),
        i = n && n[e];
      i && i.setState(s.Button.State.ACTIVE)
    }
  }, T.initFocalLengthOverlay = function () {
    var e = this.getDocument(),
      t = this.focallength = e.createElement("div");
    t.classList.add("message-panel"), t.classList.add("docking-panel"), t.classList.add("focal-length"), t.classList.add("docking-panel-container-solid-color-b");
    var n = e.createElement("table"),
      i = e.createElement("tbody");
    n.appendChild(i), t.appendChild(n), this.viewer.container.appendChild(t);
    var r = i.insertRow(-1),
      o = r.insertCell(0);
    o.classList.add("name"), o.setAttribute("data-i18n", "Focal Length"), o.textContent = E.i18n.translate("Focal Length"), (o = r.insertCell(1)).classList.add("value"), o.textContent = "", this.fovCell = o, t.style.visibility = "hidden"
  }, T.showFocalLengthOverlay = function (e) {
    var t = this,
      n = this.viewer,
      i = 0;

    function r(e) {
      if (e) {
        S.HudMessage.displayMessage(n.container, {
          msgTitleKey: "Orthographic View Set",
          messageKey: "The view is set to Orthographic",
          messageDefaultValue: "The view is set to Orthographic. Changing the focal length will switch to Perspective."
        })
      } else S.HudMessage.dismiss()
    }

    function o(e) {
      e && a(), t.focallength && (t.focallength.style.visibility = e ? "visible" : "hidden")
    }

    function a() {
      var e = n.getFocalLength();
      i !== e && (i = e, t.fovCell.textContent = e.toString() + " mm")
    }

    function s(e) {
      if (a(), "fov" === n.toolController.getActiveToolName()) {
        var t = n.navigation.getCamera(),
          i = t && !t.isPerspective;
        o(!i), r(i)
      }
    }
    var c = n.navigation.getCamera(),
      u = c && !c.isPerspective;
    o(e && !u), r(e && u), e ? n.addEventListener(l.CAMERA_CHANGE_EVENT, s) : n.removeEventListener(l.CAMERA_CHANGE_EVENT, s)
  }, T.unload = function () {
    return this._destroyUI(), !0
  }, T._destroyUI = function () {
    var e = this.viewer,
      t = e.getToolbar();
    if (!t) return !0;
    var n = t.getControl(b.TOOLBAR.NAVTOOLSID);
    return !n || (this.is3d && (n.orbittoolsbutton.subMenu.removeEventListener(A.RadioButtonGroup.Event.ACTIVE_BUTTON_CHANGED, n.orbittoolsbutton.subMenuActiveButtonChangedHandler(n)), n.removeControl(n.orbittoolsbutton.getId()), n.orbittoolsbutton.onClick = null, n.orbittoolsbutton = null, n.orbitbutton.onClick = null, n.orbitbutton = null, n.freeorbitbutton.onClick = null, n.freeorbitbutton = null, n.fovbutton.onClick = null, n.fovbutton = null), n.removeControl(n.panbutton.getId()), n.panbutton.onClick = null, n.panbutton = null, n.removeControl(n.dollybutton.getId()), n.dollybutton.onClick = null, n.dollybutton = null, n.camerabutton.subMenu.removeEventListener(A.RadioButtonGroup.Event.ACTIVE_BUTTON_CHANGED, n.camerabutton.subMenuActiveButtonChangedHandler(n)), n.removeControl(n.camerabutton.getId()), n.camerabutton.onClick = null, n.camerabutton = null, n.rollbutton.onClick = null, n.rollbutton = null, n.removeControl(n.fittoviewbutton.getId()), n.fittoviewbutton.onClick = null, n.fittoviewbutton = null, this.focallength && (e.container.removeChild(this.focallength), this.focallength = null), e.removeEventListener(l.TOOL_CHANGE_EVENT, this.toolChangedHandler), this.toolChangedHandler = null, e.removeEventListener(l.NAVIGATION_MODE_CHANGED_EVENT, this.navChangedHandler), this.navChangedHandler = null, !0)
  }, T.activate = function (e) {
    if (this.isActive(e)) return !1;
    if ("fittoview" === e) return this.viewer.impl.fitToView(this.viewer.impl.selector.getAggregateSelection()), !0;
    if (-1 != this.modes.indexOf(e)) {
      var t = this.viewer.getDefaultNavigationToolName();
      return -1 === this.modes.indexOf(t) && this.viewer.activateDefaultNavigationTools(this.viewer.model.is2d()), this.viewer.setActiveNavigationTool(e), !0
    }
    return !1
  }, T.deactivate = function () {
    return this.viewer.setActiveNavigationTool(), !0
  }, T.isActive = function (e) {
    return this.viewer.getActiveNavigationTool() === e
  };
  var P = n(16),
    L = n(1),
    D = Autodesk.Viewing.Private;

  function I(e, t) {
    r.Extension.call(this, e, t), this.viewer = e, this.options = t, this.name = "explode", this.deactivate = this.deactivate.bind(this), this._onExplode = this._onExplode.bind(this), this._slider = null, this._explodeButton = null, this._explodeSubmenu = null, this._tooltip = null
  }
  I.prototype = Object.create(r.Extension.prototype), I.prototype.constructor = I;
  var R = I.prototype;

  function O(e) {
    e._slider.parentNode.style.display = "none", e._tooltip.style.display = ""
  }

  function k(e, t) {
    r.Extension.call(this, e, t), this.viewer = e, this.options = t, this.name = "fullscreen"
  }
  R.load = function () {
    return !0
  }, R.unload = function () {
    return this.deactivate(),
      function (e) {
        var t = e.viewer;
        if (!e._slider) return;
        e._explodeButton && e._explodeButton.removeFromParent();
        e._slider = null, e._explodeButton = null, e._explodeSubmenu = null, e._tooltip = null, t.explodeSlider = null, t.explodeSubmenu = null
      }(this), !0
  }, R.onToolbarCreated = function (e) {
    ! function (e, t) {
      Autodesk.Viewing.UI;
      var n = e.viewer,
        i = new s.Button("toolbar-explodeTool");
      i.setIcon("adsk-icon-explode"), i.setToolTip("Explode model"), n.modelTools.addControl(i);
      var r, o = Object(P.stringToDOM)('<div class="docking-panel docking-panel-container-solid-color-b explode-submenu" style="display:none"><input class="explode-slider" type="range" min="0" max="1" step="0.01" value="0"/></div>'),
        a = e.getDocument();
      Object(g.isIOSDevice)() ? (r = a.querySelector("#toolbar-explodeTool").parentNode, o.classList.add("ios")) : Object(g.isAndroidDevice)() ? (r = a.querySelector("#toolbar-explodeTool").parentNode, o.classList.add("android")) : r = i.container;
      r.appendChild(o);
      var l = o.querySelector(".explode-slider");
      l.addEventListener(g.isIE11 ? "change" : "input", (function (e) {
        n.explode(l.value)
      })), g.isIE11 && (l.style["padding-top"] = "0", l.style["padding-bottom"] = "0", l.style["margin-top"] = "10px");
      o.onclick = function (e) {
        e.stopPropagation()
      };
      var c = i.container.querySelector(".adsk-control-tooltip");
      i.onClick = function (t) {
        e.isActive() ? e.deactivate() : (e.activate(), L.logger.track({
          category: "tool_changed",
          name: "explode"
        }))
      }, e._slider = l, e._explodeButton = i, e._explodeSubmenu = o, e._tooltip = c, n.explodeSlider = l, n.explodeSubmenu = o
    }(this)
  }, R.activate = function () {
    if (this.isActive()) return !0;
    if (!this._explodeSubmenu) return !1;
    this._explodeSubmenu.style.display = "", this._explodeButton.setState(s.Button.State.ACTIVE), this._tooltip.style.display = "none";
    var e = this.viewer.impl.getExplodeScale();
    return this._slider.value = e, this.viewer.addEventListener(l.EXPLODE_CHANGE_EVENT, this._onExplode), !0
  }, R.deactivate = function () {
    return !this.isActive() || (!this._explodeSubmenu || (this._explodeButton.setState(s.Button.State.INACTIVE), O(this), this.viewer.explode(0), this.viewer.removeEventListener(l.EXPLODE_CHANGE_EVENT, this._onExplode), !0))
  }, R.isActive = function () {
    return !!this._explodeSubmenu && "none" !== this._explodeSubmenu.style.display
  }, R.getScale = function () {
    return this.viewer.getExplodeScale()
  }, R.setScale = function (e) {
    return this.viewer.explode(e)
  }, R.setStrategy = function (e) {
    e !== this.getStrategy() && this.viewer.prefs.set(D.Prefs3D.EXPLODE_STRATEGY, e)
  }, R.getStrategy = function () {
    return this.viewer.prefs.get(D.Prefs3D.EXPLODE_STRATEGY)
  }, R._onExplode = function (e) {
    this._slider.value = e.scale
  }, R.setUIEnabled = function (e) {
    this._explodeButton && (e ? (this._explodeButton.setState(Autodesk.Viewing.UI.Button.State.INACTIVE), this._wasActive && this.activate()) : (this._wasActive = this.isActive(), O(this), this._explodeButton.setState(Autodesk.Viewing.UI.Button.State.DISABLED)))
  }, k.prototype = Object.create(r.Extension.prototype), k.prototype.constructor = k;
  var N = k.prototype;

  function F(e, t) {
    r.Extension.call(this, e, t), this.viewer = e, this.options = t, this.name = "gohome"
  }
  N.activate = function () {
    return this.activeStatus || (this.viewer.nextScreenMode(), this.activeStatus = !0), !0
  }, N.deactivate = function () {
    return this.activeStatus && (this.viewer.escapeScreenMode(), this.activeStatus = !1), !0
  }, F.prototype = Object.create(r.Extension.prototype), F.prototype.constructor = F;
  var U = F.prototype;
  U.activate = function () {
    return this.viewer.navigation.setRequestHomeView(!0), !0
  }, U.deactivate = function () {
    return !1
  };
  var V = n(107),
    B = Autodesk.Viewing,
    z = ['<div class="orbit-gizmo noselect">', '<div class="outside"></div>', '<div class="ring"></div>', '<div class="layout-hor">', '<div class="edgemark-area"><div class="edgemark"></div></div>', "</div>", '<div class="layout-mid">', '<div class="layout-ver">', '<div class="edgemark-area"><div class="edgemark"></div></div>', "</div>", '<div class="circle">', '<div class="crosshair-area">', '<div class="crosshair-v"></div>', '<div class="crosshair-h"></div>', "</div>", "</div>", '<div class="layout-ver">', '<div class="edgemark-area"><div class="edgemark"></div></div>', "</div>", "</div>", '<div class="layout-hor">', '<div class="edgemark-area"><div class="edgemark"></div></div>', "</div>", "</div>"].join("\n");

  function G() {
    var e, t, n, i, r, o = ["fusion orbit", "fusion orbit constrained"],
      a = 0,
      s = 1,
      l = 2,
      c = .005,
      u = .005,
      h = 1,
      d = {},
      f = Object(g.isTouchDevice)(),
      p = !1,
      m = {
        buttons: [],
        src: void 0,
        x: 0,
        y: 0,
        dx: 0,
        dy: 0,
        firstMove: !0,
        mode: void 0
      },
      v = this;
    this.setViewer = function (e) {
      this.viewer = e, this.navapi = e ? e.navigation : null, e && this.setGlobalManager(e.globalManager)
    };
    var y = function (e) {
        m.buttons[e.touches ? 0 : e.button] = !0, m.src = e.target.className, m.x = 0, m.y = 0, m.dx = 0, m.dy = 0, m.firstMove = !0, m.mode = void 0, "ring" === m.src ? m.mode = l : "edgemark-area" === m.src && ("layout-ver" === e.target.parentNode.className ? m.mode = a : "layout-hor" === e.target.parentNode.className && (m.mode = s)), A(), e.stopPropagation()
      },
      b = function (e) {
        m.buttons[e.touches ? 0 : e.button] = !1, m.src = void 0
      },
      _ = function (e) {
        m.buttons[0] && (x(e), w(), m.firstMove = !1)
      },
      x = function (e) {
        var t = e.touches ? e.touches[0].pageX : e.pageX,
          n = e.touches ? e.touches[0].pageY : e.pageY;
        m.firstMove || (m.dx = t - m.x, m.dy = n - m.y), m.x = t, m.y = n
      },
      w = function () {
        switch (m.mode) {
          case l:
            if (!v.navapi.isActionEnabled("roll")) return;
            break;
          case a:
          case s:
            if (!v.navapi.isActionEnabled("orbit")) return
        }
        var e = r.target.clone().sub(r.position).normalize(),
          t = e.clone().cross(r.up).normalize(),
          n = t.clone().cross(e).normalize();
        if (r.up.copy(n), m.mode === l) {
          var o = new THREE.Vector3(m.x - d.center.x, m.y - d.center.y, 0),
            f = new THREE.Vector3(m.dx, m.dy, 0).add(o);
          o.normalize(), f.normalize();
          var p = o.clone().cross(f),
            g = Math.asin(p.z);
          r.up.applyAxisAngle(e, -g * h)
        } else {
          var y, b;
          m.mode === a ? (b = -m.dx * c, i && (r.up = V.Navigation.snapToAxis(r.up.clone())), y = r.up) : m.mode === s && (b = -m.dy * u, i ? (m.firstMove && (r.up = V.Navigation.snapToAxis(r.up.clone())), y = e.clone().cross(r.up).normalize()) : y = t, r.up.applyAxisAngle(y, b));
          var _ = v.navapi.getPivotPoint(),
            x = r.position.clone().sub(_);
          x.applyAxisAngle(y, b), r.position.addVectors(_, x);
          var w = r.target.clone().sub(_);
          w.applyAxisAngle(y, b), r.target.addVectors(_, w)
        }
        r.dirty = !0
      },
      E = function (e, t) {
        var n = t || e.clone().sub(r.position).normalize();
        return new THREE.Plane(n, -n.x * e.x - n.y * e.y - n.z * e.z)
      },
      A = function () {
        var e = r.target.clone().sub(r.position).normalize(),
          t = E(r.position, e).distanceToPoint(r.pivot);
        r.pivot.copy(e).multiplyScalar(t).add(r.position)
      },
      S = function (e) {
        e.touches || 0 !== e.button || A()
      },
      M = function (e) {
        p && v.viewer.setActiveNavigationTool()
      },
      T = function (e, t) {
        var n, i = v.viewer.impl.hitTest(e, t);
        i && i.intersectPoint ? n = i.intersectPoint : n = v.viewer.impl.viewportToRay(v.viewer.impl.clientToViewport(e, t)).intersectPlane(E(r.target));
        var o = r.position.clone().sub(function () {
          var e = r.target.clone().sub(r.position).normalize(),
            t = v.viewer.impl.rayIntersect(new THREE.Ray(r.position, e));
          return t && t.intersectPoint ? t.intersectPoint : r.target
        }()).add(n);
        v.navapi.setRequestTransition(!0, o, n, r.fov)
      };
    this.register = function () {
      (e = Object(P.stringToDOM)(z)).style.display = "none", this.viewer.canvasWrap.insertBefore(e, this.viewer.canvasWrap.firstChild), (t = e.querySelector(".ring")).addEventListener("mousedown", y), Array.prototype.forEach.call(e.querySelectorAll(".edgemark-area"), (function (e, t) {
        e.addEventListener("mousedown", y), f && e.addEventListener("touchstart", y)
      })), this.addWindowEventListener("mouseup", b), this.addWindowEventListener("mousemove", _), (n = e.querySelector(".outside")).addEventListener("mousedown", M);
      var i = e.querySelector(".circle");
      i.addEventListener("mousedown", S), f && (t.addEventListener("touchstart", y), this.addWindowEventListener("touchend", b), this.addWindowEventListener("touchmove", _), n.addEventListener("touchstart", M), i.addEventListener("touchstart", S)), r = this.viewer.impl.camera
    }, this.deregister = function () {
      this.removeWindowEventListener("mouseup", b), this.removeWindowEventListener("mousemove", _), n.removeEventListener("mousedown", M), f && (this.removeWindowEventListener("touchend", b), this.removeWindowEventListener("touchmove", _), n.removeEventListener("touchstart", M)), this.viewer.canvasWrap.removeChild(e), e = void 0, t = void 0, n = void 0
    }, this.activate = function (t) {
      e.style.display = "", this.handleResize(), i = "fusion orbit constrained" === t;
      var n = this.viewer.toolController.isToolActivated("hyperlink");
      n && this.viewer.toolController.deactivateTool("hyperlink"), i ? (this.viewer.setDefaultNavigationTool("orbit"), this.viewer.prefs.set("fusionOrbitConstrained", !0)) : (this.viewer.setDefaultNavigationTool("freeorbit"), this.viewer.prefs.set("fusionOrbitConstrained", !1)), n && this.viewer.toolController.activateTool("hyperlink"), this.viewer.navigation.setZoomTowardsPivot(!0)
    }, this.deactivate = function (t) {
      e.style.display = "none", this.viewer.navigation.setZoomTowardsPivot(this.viewer.prefs.zoomTowardsPivot)
    }, this.getNames = function () {
      return o
    }, this.getName = function () {
      return o[0]
    }, this.update = function () {
      return !1
    }, this.handleSingleClick = function (e, t) {
      return T(e.canvasX, e.canvasY), !0
    }, this.handleDoubleClick = function (e, t) {
      return !0
    }, this.handleSingleTap = function (e) {
      return T(e.canvasX, e.canvasY), !0
    }, this.handleDoubleTap = function (e) {
      return !1
    }, this.handleKeyDown = function (e, t) {
      return !1
    }, this.handleKeyUp = function (e, t) {
      return !1
    }, this.handleWheelInput = function (e) {
      return !1
    }, this.handleButtonDown = function (e, t) {
      return !1
    }, this.handleButtonUp = function (e, t) {
      return !1
    }, this.handleMouseMove = function (e) {
      var t = this.viewer.impl.getCanvasBoundingClientRect(),
        i = (t.width > t.height ? new THREE.Vector2(((e.canvasX + .5) / t.width * 2 - 1) * t.width / t.height, -(e.canvasY + .5) / t.height * 2 + 1) : new THREE.Vector2((e.canvasX + .5) / t.width * 2 - 1, (-(e.canvasY + .5) / t.height * 2 + 1) * t.height / t.width)).length() > 1.2;
      return p !== i && (n.style.cursor = i ? "" : "url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAMAAADXqc3KAAAAt1BMVEUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD///8AAAAzMzP6+vri4uISEhKKioqtra2dnZ2EhIR9fX10dHRkZGQdHR3t7e3Hx8e5ubm1tbWoqKhWVlZKSko4ODgICAjv7+/o6OjMzMyxsbFOTk4pKSkXFxcEBAT29vbW1tZ6enpISEgLCwvhzeX+AAAAGXRSTlMANRO0nHRJHfnskIxQRKh89syDVwTWZjEJxPFEswAAAOFJREFUKM+1j+lygkAQhIflEAJe0Rw9u4CCeKKoSTTX+z9XoMJWWeX+ssrvZ3f19DQ5zOw/0DUMQPlmQ72bE2adBp8/Rp3CQUi3ILx+bxj4fjDs9T1Bmo6bbPPN8aDU4bjJt4nb+de789kSFyxn826jW3ICLNZZKU8nWWbrBTCRVm04U8TpjquRFf1Go0d7l8aYOrUR7FGEFr1S9LGymwthgX2gE/Kl0cHPOtF2xOWZ5QpIC93RflW4InkDoPRXesd5LJIMQPzV7tCMa7f6BvhJL79AVDmYTNQ1NhnxbI/uwB8H5Bjd4zQPBAAAAABJRU5ErkJggg==), auto", p = i), !1
    }, this.handleGesture = function (e) {
      return A(), !1
    }, this.handleBlur = function (e) {
      return !1
    }, this.handleResize = function () {
      var n = e.getBoundingClientRect(),
        i = this.getWindow();
      d.left = n.left + i.pageXOffset, d.top = n.top + i.pageYOffset, d.width = n.width, d.height = n.height, d.center = {}, d.center.x = d.left + d.width / 2, d.center.y = d.top + d.height / 2;
      var r = .8 * (i.innerWidth > i.innerHeight ? i.innerHeight : i.innerWidth);
      e.style.width = e.style.height = r + "px", e.style.top = e.style.left = "calc(50% - " + r / 2 + "px)", t.style.borderWidth = .1 * r + "px"
    }
  }
  B.GlobalManagerMixin.call(G.prototype);
  n(779);

  function H(e, t) {
    r.Extension.call(this, e, t), this.name = "fusionorbit", this.modes = ["fusionorbit", "fusionfreeorbit"]
  }
  H.prototype = Object.create(r.Extension.prototype), H.prototype.constructor = H;
  var W = H.prototype;
  W.load = function () {
    var e = this.viewer;
    return this.tool = new G, this.tool.setViewer(e), e.toolController.registerTool(this.tool), !0
  }, W.onToolbarCreated = function (e) {
    var t = this,
      n = this.viewer,
      i = e.getControl(b.TOOLBAR.NAVTOOLSID);
    i && i.orbitbutton && (this.classicBehavior = {}, this.classicBehavior.orbitOnClick = i.orbitbutton.onClick, this.classicBehavior.freeorbitOnClick = i.freeorbitbutton.onClick, this.classicBehavior.returnToDefault = i.returnToDefault, i.freeorbitbutton.onClick = function (e) {
      var n = i.freeorbitbutton.getState();
      n === s.Button.State.INACTIVE ? (t.activate("fusionfreeorbit"), i.freeorbitbutton.setState(s.Button.State.ACTIVE)) : n === s.Button.State.ACTIVE && (t.deactivate(), i.freeorbitbutton.setState(s.Button.State.INACTIVE))
    }, i.orbitbutton.onClick = function (e) {
      var n = i.orbitbutton.getState();
      n === s.Button.State.INACTIVE ? (t.activate("fusionorbit"), i.orbitbutton.setState(s.Button.State.ACTIVE)) : n === s.Button.State.ACTIVE && t.deactivate()
    }, i.returnToDefault = function () {
      i.orbittoolsbutton && i.orbittoolsbutton.setState(s.Button.State.ACTIVE)
    }, i.orbittoolsbutton.setState(s.Button.State.INACTIVE), n.prefs.fusionOrbitConstrained ? (i.orbittoolsbutton.onClick = i.orbitbutton.onClick, i.orbittoolsbutton.setIcon(i.orbitbutton.iconClass), n.setDefaultNavigationTool("orbit")) : (i.orbittoolsbutton.onClick = i.freeorbitbutton.onClick, i.orbittoolsbutton.setIcon(i.freeorbitbutton.iconClass), n.setDefaultNavigationTool("freeorbit")), n.setActiveNavigationTool(), i.returnToDefault && i.returnToDefault())
  }, W.unload = function () {
    var e = this.viewer;
    if (this.classicBehavior) {
      var t = e.getToolbar().getControl(b.TOOLBAR.NAVTOOLSID);
      t && (t.orbitbutton && (t.orbitbutton.onClick = this.classicBehavior.orbitOnClick), t.freeorbitbutton && (t.freeorbitbutton.onClick = this.classicBehavior.freeorbitOnClick), t.returnToDefault = this.classicBehavior.returnToDefault, t.orbittoolsbutton && (t.orbitbutton ? t.orbittoolsbutton.onClick = t.orbitbutton.onClick : t.orbittoolsbutton.onClick = null, t.orbittoolsbutton.setIcon("adsk-icon-orbit-constrained"), t.orbittoolsbutton.setState(s.Button.State.ACTIVE))), this.classicBehavior = null
    }
    return e.setActiveNavigationTool("orbit"), e.setDefaultNavigationTool("orbit"), e.toolController.deregisterTool(this.tool), this.tool.setViewer(null), this.tool = null, !0
  }, W.activate = function (e) {
    if (!this.activeStatus || this.mode !== e) {
      switch (e) {
        default:
        case "fusionorbit":
          this.viewer.setActiveNavigationTool("fusion orbit constrained"), this.mode = "fusionorbit";
          break;
        case "fusionfreeorbit":
          this.viewer.setActiveNavigationTool("fusion orbit"), this.mode = "fusionfreeorbit"
      }
      return this.activeStatus = !0, !0
    }
  }, W.deactivate = function () {
    return this.activeStatus && (this.viewer.setActiveNavigationTool(), this.activeStatus = !1), !0
  }, i.theExtensionManager.registerExtension("Autodesk.PropertiesManager", u), i.theExtensionManager.registerExtension("Autodesk.ViewerSettings", f), i.theExtensionManager.registerExtension("Autodesk.ModelStructure", v), i.theExtensionManager.registerExtension("Autodesk.DefaultTools.NavTools", M), i.theExtensionManager.registerExtension("Autodesk.Explode", I), i.theExtensionManager.registerExtension("Autodesk.FullScreen", k), i.theExtensionManager.registerExtension("Autodesk.GoHome", F), i.theExtensionManager.registerExtension("Autodesk.Viewing.FusionOrbit", H)
}, function (e, t, n) {
  "use strict";

  function i() {
    this.animations = []
  }
  n.r(t), i.prototype.init = function (e) {
    if (!0 === e.initialized) return e;
    for (var t = 0; t < e.hierarchy.length; t++) {
      for (var n = 0; n < e.hierarchy[t].keys.length; n++)
        if (e.hierarchy[t].keys[n].time < 0 && (e.hierarchy[t].keys[n].time = 0), void 0 !== e.hierarchy[t].keys[n].rot && !(e.hierarchy[t].keys[n].rot instanceof THREE.Quaternion)) {
          var i = e.hierarchy[t].keys[n].rot;
          Array.isArray(i) || (i = [i._x, i._y, i._z, i._w]), e.hierarchy[t].keys[n].rot = (new THREE.Quaternion).fromArray(i)
        } for (n = 1; n < e.hierarchy[t].keys.length; n++) e.hierarchy[t].keys[n].time === e.hierarchy[t].keys[n - 1].time && (e.hierarchy[t].keys.splice(n, 1), n--);
      for (n = 0; n < e.hierarchy[t].keys.length; n++) e.hierarchy[t].keys[n].index = n
    }
    return e.initialized = !0, e
  }, i.prototype.parse = function (e) {
    var t = [];
    return function e(t, n) {
      if (n.push(t), t.children && !(t instanceof THREE.Camera))
        for (var i = 0; i < t.children.length; i++) e(t.children[i], n)
    }(e, t), t
  }, i.prototype.play = function (e) {
    -1 === this.animations.indexOf(e) && this.animations.push(e)
  }, i.prototype.stop = function (e) {
    var t = this.animations.indexOf(e); - 1 !== t && this.animations.splice(t, 1)
  }, i.prototype.update = function (e) {
    for (var t = 0; t < this.animations.length; t++) this.animations[t].update(e)
  };
  var r, o, a, s = n(265),
    l = n(0),
    c = n(59),
    u = n(39);

  function h(e, t, n) {
    u.Animation.call(this, e, t, n), this.followCam = !0
  }

  function d(e, t, n) {
    var i, r = this;
    u.Animation.call(this, {}, e, n), this.fragPointers = [], this.nodeChildren = [], this.nodeFragments = [];
    var o = this.viewer.model.getData().instanceTree;
    o.enumNodeChildren(t, (function (e) {
      r.nodeChildren.push(e)
    }), !0), o.enumNodeFragments(e.id, (function (e) {
      r.nodeFragments.push(e), (i = r.viewer.getFragmentProxy(r.viewer.model, e)) && (r.fragPointers.push(i), i.setMaterial(r.viewer.matman().cloneMaterial(i.getMaterial(), r.viewer.model)))
    }), !0), this.nodeId = t, this.epsilon = .1
  }

  function f(e, t, n) {
    var i = this;
    null === e && (e = function (e, t, n) {
      var r = this.getDocument(),
        o = i.container = r.createElement("div"),
        a = e.name;
      o.id = a, o.style.cursor = "pointer", o.style.visibility = n;
      var s = r.createElement("div");
      s.id = a + "-txt", s.style.cssText = "display: none;position: absolute;z-index: 1;", o.appendChild(s);
      var c = r.createElement("img"),
        u = e.custom && e.custom.att && 1 === e.custom.att;
      c.src = u ? "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAABv1BMVEUAAAAAAAAAAAAAAAABAwEAAAAAAAAjSRkAAAAFDASJqnZhg1IqTyAjSRkpTx8hRxggRRcAAAAhRRcKFwgAAACau4R9mnFmiFUhSBgbOhMZNhIAAAAECQMgQxcAAAAAAAAAAAAHDwXB2q2jw4yfvoivyJ6fuI6mv5eSr4KAoWu2trZpiV3Nzc0wVSUhRxhNT01vb28AAAAgRBcAAAAAAAAAAAAhRxgeQBYAAAAAAAAAAAAfQRbP5MC0zqCqyJKpyJJBYje3z6WxyKOFpXF9nmkrTiG+wb5xkGVcf0xYfEg1WSpNTU0hRhgfQhYfQhZVVVVAQEAXMREcOhQcHBwSJw0AAAAAAAAWLxAVLQ8AAAAAAAAfQhYIEgYAAACbvn+DsGCGsmSUunaItGXc6dStypelxY2ZvX2Ntm2JtGnS48fB17G40aWNuWucxH6ny4mUvnPF27aPuHCEsGHV5czI3Lq52KGvzJqz1JmqyJOqzY6ew4OYwHiGs2OEsWHb29vL4LvM5bnD3q2+3KWkyoaLtWuKtmfOzs7IyMi21pyawXqPuG/g4ODX68fI4rTG4LCu0ZKszJKlx4qZwHuBnXR2iXENcZskAAAAXnRSTlMAEAIBCAsF6BUn+vPu7erjsZyBEwP99/TRk3JgRUQ1IxwO/v79/Pv6+fn09PPq08q7sqWDe2xrY01AMBj+/v7+/v37+fn59fXz8u/c1cbFxLWonZiIcm1lYVdSQT8de/EoFwAAAgVJREFUOMutklVz21AQRiNFlswYs+M6DTdN0kCDZWZmuAKDZFtgiO2YYm6TlOEHV53ptGs5j93Xc+a7e3d36P/W9prdZ/PZ17aPxphz3mR0x91G07wTG8TDo5R3HLGH3S6fGPdSo8Na/to6W2HZBEqwPCNULlu1BkFdQSyKx4qxOMoyDDJSRB/HnTcqWbSbTmVS6V3E57hvXicOBZd1gmfj6Z1kPrmTjrMMfRizumDA+k3UTcRSyWg0mkzFEgLNlU3rIIJcns0KqJjJq0I+U0SqUJlZJv8JugU3J/QnHEwu6MCMqPN1pq+H3sFxCgOC7RyT48Ev6qLUL/gmeJrJ/p0DzSnyxTtAGLMbv9dohv8zSbomSqUpOxB0AdNXsUbnGEEQmJzKq3JrLgCaJAzms5LI1enfVefEamc/YzYQYFB6/1xBUsQex3E9UZHkUvO6X48PwQjLTKEjVRVFqUqd8v6naQsMUCNcL8xTrVJZluXyl1K7OW1+7sL71x15cvVH43O7UGi3mmc8lkCE0ByMbvXazwueycbHxiXPrUdv3hLDGiF8au/d4sO7Novtnj9k0BO45uRGTp98f2JlK/RqYzN8TK8bGTjZLTXgfvDp6rMNA0ZADAOWHI6VTYwE4WAZjz/s3V5yvIxADosIPlh0BNXHSdA8LFIfDgE8WDg5hmmx9h/40fgXth2SDk3yjP4AAAAASUVORK5CYII=" : "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAABvFBMVEUAAAAAAAADAAAAAAAAAAACAAAAAAAAAAC5PznHVE8BAAAAAADbc27NXVeUDQaZDQaRBwAAAAAAAACHBgDuhoHVa2W9RD2QCAKYCAGPBgB0BQAAAAAAAACMBgAAAAADAAD2jonWb2n2jYjYbWfmeXPNzc3RYFqzODKfFA1RUVGKBgCVBwBvb2+WBwCBBgCFBgCWBwCLBgAAAAAAAACMBgCTBwByBQCTBwBbBACEBgAAAAAAAAAoAgBSBADgeHOoOzXmfnnofnjieHPGvr63t7e0tLTidW/ebmnba2XWZWDAT0qRHBfBSkRNTU2aFxGOBgBYTEsAAACNBgBAQEAAAABbBQAcHBxyBQBKBAAAAABfBAAAAAAAAAAsAgAkAgCJBgDZRT3MOTHQPDTVQjrlUkrjUEjRPjbOOjP/bGTvXFTqV0/fTETNOjL5Zl7eS0PzYFjxXlbiT0fUQTn0e3T7aGDWXFXbSEDTRj/PQTrOPjbb29vgamTxY1zoVE3STETTQjvSPzfOzs7IyMj5g3zzaWLXY13XYVrsXlbbU0zg4OD8lZD4gXq0eHXqd3HscWv2b2jrZmDQZWDdWVLkV1C5y9+5AAAAYHRSTlMAAgUBDggMEeDsIBj+8NHJxpxAEP754tDDtIFsYDkvI/78+/j08/DfycfHxbuvr5mTjYN0bWxkWVZTTDUjEfz8+/n59fT08vHw8PDw5NzV0Mq5uLWrm5iLfX1hV0g/ODZEwKduAAACAklEQVQ4y62SVXPbQBzEa1mWZYaY49ihBhtmKjMzw92JLLBsyxxT2mCZvnCVmU59VpO37Ms97G929nb+p05WXUvTE5GJ6aWuY+yFEdoVdAZd9MjCEYi5J0L3FZutSqVZdIYiPWaj/85j2yszAACGVyq7Lo+RIMZtxRaQOZaTwZZSLbrGLR2+aX54twVykpgVpRzgYbVGz5twYMPTV2ZkKZMupDOSzAiwfNazgQesDO9VASemU6lUWuQAgnyNXsEiiBlbEwE2W9CBQpbVAfRraIZoA5ZosII6EpB6MYrVpLxOQejowKsBL9UGSK+zCnnsF4omB7wkBkQHylDZ+rcDROD3hYcYQE0NHQhQ4f8uCQVG/XF9isJKLtI1TYBQQAgdPlqJzYcWMYBYd58/YJACD6UgpsTVA+51AhvKGgt9zQGN1xN4Dajs/vbtmBXf2mIP3/jGqiW9Q0nlGtn8tXBSnwGPWHYP5PcbLMs2JHFn+6p7WQ/ARTie3/rZm9+pZ+rfP/fawi8dhOFgqLlLX87dHOz/1D9ou/vsrcNiNgBrZzbf338yOXZvbDL2xm4ljCdn6j794cpswr/62p+wWy2m/042oQeMxudedK8mSdzGAy4/9vlm/STRtjGRTz9u3nnge2U3+O2h4o9GfXG7lcLKGWZY8ycduG3sQJCk0Tb+w3S0/Qemc4+eJchuZgAAAABJRU5ErkJggg==", c.id = a + "-img", c.style.cssText = "display: block;position: absolute;z-index: 1;", o.appendChild(c), t.api.container.appendChild(o), o.addEventListener("click", (function () {
        s.style.display = "none" === s.style.display ? "block" : "none"
      }));
      var h = new l.SphereGeometry(.01),
        d = new l.MeshPhongMaterial({
          color: 32512,
          ambient: 32512,
          opacity: .6,
          transparent: !0
        }),
        f = new l.Mesh(h, d);
      return f.visible = !1, void 0 === t.overlayScenes.annotation && t.createOverlayScene("annotation"), t.addOverlay("annotation", f), f
    }.call(this, t, n.viewer, "hidden")), u.Animation.call(this, e, t, n), this.id = t.name, this.text = "", this.state = "hidden", this.epsilon = .1, this.viewer.api.addEventListener(Autodesk.Viewing.CAMERA_CHANGE_EVENT, (function (t) {
      i.updateText(e.position, i.text)
    }))
  }

  function p(e, t, n) {
    this.viewer = n.viewer, null === e && (e = this.createPolyline([])), u.Animation.call(this, e, t, n), this.epsilon = .1
  }
  h.prototype = Object.create(u.Animation.prototype), h.prototype.constructor = h, h.prototype.keyTypes = ["pos", "up", "target", "fov", "perspective"], h.prototype.defaultKey = {
    pos: 0,
    up: 0,
    target: 0,
    fov: 0,
    perspective: 0
  }, h.prototype.setFollowCamera = function (e) {
    this.followCam = e
  }, h.prototype.update = (r = [], o = new l.Vector3, a = new l.Vector3, function (e) {
    if (!1 !== this.isPlaying && (this.currentTime += e * this.timeScale, this.resetIfLooped(), this.followCam && !this.isPlayingOutOfRange())) {
      for (var t = 0, n = this.hierarchy.length; t < n; t++) {
        for (var i = this.hierarchy[t], s = i.animationCache[this.data.name], l = 0; l < this.keyTypes.length; l++) {
          var h = this.keyTypes[l],
            d = s.prevKey[h],
            f = s.nextKey[h];
          if (f.time <= this.currentTime || d.time >= this.currentTime) {
            for (d = this.data.hierarchy[t].keys[0], f = this.getNextKeyWith(h, t, 1); f.time < this.currentTime && f.index > d.index;) d = f, f = this.getNextKeyWith(h, t, f.index + 1);
            s.prevKey[h] = d, s.nextKey[h] = f
          }
          var p = d[h],
            m = f[h];
          if (f.time !== d.time && void 0 !== p && void 0 !== m) {
            var g, v = (this.currentTime - d.time) / (f.time - d.time);
            if (v < 0 && (v = 0), v > 1 && (v = 1), "pos" === h) g = i.position;
            else if ("up" === h) g = i.up;
            else if ("target" === h) g = i.target;
            else {
              if ("fov" === h) {
                i.setFov(p + (m - p) * v);
                continue
              }
              if ("perspective" === h) {
                (v > .5 ? m : p) ? i.toPerspective(): i.toOrthographic();
                continue
              }
            }
            if (this.interpolationType === c.a.LINEAR) a.x = p[0] + (m[0] - p[0]) * v, a.y = p[1] + (m[1] - p[1]) * v, a.z = p[2] + (m[2] - p[2]) * v, g.copy(a);
            else {
              r[0] = this.getPrevKeyWith(h, t, d.index - 1)[h], r[1] = p, r[2] = m, r[3] = this.getNextKeyWith(h, t, f.index + 1)[h], v = .33 * v + .33;
              var y = Object(u.interpolateCatmullRom)(r, v);
              if (a.x = y[0], a.y = y[1], a.z = y[2], g.copy(a), this.interpolationType === c.a.CATMULLROM_FORWARD) {
                var b = Object(u.interpolateCatmullRom)(r, 1.01 * v);
                o.set(b[0], b[1], b[2]), o.sub(g), o.y = 0, o.normalize();
                var _ = Math.atan2(o.x, o.z);
                i.rotation.set(0, _, 0)
              }
            }
          }
        }
        i.matrixAutoUpdate = !0, i.matrixWorldNeedsUpdate = !0
      }
      i.lookAt(i.target), this.animator.updateFlag |= this.animator.UPDATE_CAMERA
    }
  }), d.prototype = Object.create(u.Animation.prototype), d.prototype.constructor = d, d.prototype.keyTypes = ["vis", "opa"], d.prototype.defaultKey = {
    viz: 1,
    opa: 1
  }, d.prototype.getPrevAndNextKeys = function (e, t) {
    for (var n = this.data.hierarchy[e].keys[0], i = this.getNextKeyWith(t, e, 1); i.time < this.currentTime && i.index > n.index;) n = i, i = this.getNextKeyWith(t, e, i.index + 1);
    return {
      prevKey: n,
      nextKey: i
    }
  }, d.prototype.update = function (e) {
    if (!1 !== this.isPlaying && (this.currentTime += e * this.timeScale, this.resetIfLooped(), !this.isPlayingOutOfRange()))
      for (var t = 0, n = this.hierarchy.length; t < n; t++) {
        var i = this.hierarchy[t].animationCache[this.data.name],
          r = i.prevKey.vis,
          o = i.prevKey.vis,
          a = i.prevKey.opa,
          s = i.prevKey.opa;
        if (o.time <= this.currentTime || r.time >= this.currentTime) {
          var l = this.getPrevAndNextKeys(t, "vis");
          r = l.prevKey, o = l.nextKey, i.prevKey.vis = r, i.nextKey.vis = o
        }
        if (s.time <= this.currentTime || a.time >= this.currentTime) {
          var c = this.getPrevAndNextKeys(t, "opa");
          a = c.prevKey, s = c.nextKey, i.prevKey.opa = a, i.nextKey.opa = s
        }
        var u = r.vis,
          h = o.vis;
        if (void 0 !== u && void 0 !== h && r.time !== o.time) {
          var d = Math.abs(this.currentTime - o.time) < this.epsilon ? h : u;
          this.viewer.visibilityManager.setNodeOff(this.nodeId, !d, this.viewer.model, this.nodeChildren, this.nodeFragments)
        }
        if (u = a.opa, h = s.opa, void 0 === u && 1 === r.vis && (u = 1), void 0 !== u && void 0 !== h && a.time !== s.time) {
          var f = (this.currentTime - a.time) / (s.time - a.time);
          f < 0 && (f = 0), f > 1 && (f = 1);
          for (var p = u + (h - u) * f, m = 0; m < this.fragPointers.length; ++m) {
            var g = this.fragPointers[m].getMaterial();
            g.transparent = 1 !== p, g.opacity = p
          }
          p > 0 && this.viewer.visibilityManager.setNodeOff(this.nodeId, !1, this.viewer.model, this.nodeChildren, this.nodeFragments)
        }
      }
  }, f.prototype = Object.create(u.Animation.prototype), f.prototype.constructor = f, f.prototype.keyTypes = ["pos", "text", "vis"], f.prototype.defaultKey = {
    pos: 0,
    text: "",
    vis: 1
  }, f.prototype.stop = function () {
    u.Animation.prototype.stop.call(this), this.container.parentNode.removeChild(this.container), this.viewer.removeOverlay("annotation", this.root), this.root = null
  }, f.prototype.updateText = function (e, t) {
    var n = function (e, t, n) {
        var i = e.clone(),
          r = new l.Matrix4;
        return t.updateMatrixWorld(), t.matrixWorldInverse.getInverse(t.matrixWorld), r.multiplyMatrices(t.projectionMatrix, t.matrixWorldInverse), i.applyProjection(r), {
          x: (i.x + 1) * n.width / 2 + n.offsetLeft - 12,
          y: (1 - i.y) * n.height / 2 + n.offsetTop + 12
        }
      }(e, this.viewer.camera, this.viewer.canvas),
      i = this.getDocument(),
      r = i.getElementById(this.id + "-txt");
    r && (r.innerHTML = t, r.style.left = n.x + "px", r.style.top = n.y + "px", this.text = t), (r = i.getElementById(this.id + "-img")) && (r.style.left = n.x + "px", r.style.top = n.y - 24 + "px")
  }, f.prototype.update = function () {
    var e = [],
      t = new l.Vector3,
      n = new l.Vector3;
    return function (i) {
      if (!1 !== this.isPlaying && (this.currentTime += i * this.timeScale, this.resetIfLooped(), !this.isPlayingOutOfRange())) {
        var r = this.getDocument();
        if (this.isPaused && this.currentTime < this.startKeyTime)(w = r.getElementById(this.id)) && (w.style.visibility = this.state);
        else
          for (var o = 0, a = this.hierarchy.length; o < a; o++) {
            for (var s = this.hierarchy[o], l = s.animationCache[this.data.name], h = 0; h < this.keyTypes.length; h++) {
              var d = this.keyTypes[h],
                f = l.prevKey[d],
                p = l.nextKey[d];
              if (p.time <= this.currentTime || f.time >= this.currentTime) {
                for (f = this.data.hierarchy[o].keys[0], p = this.getNextKeyWith(d, o, 1); p.time < this.currentTime && p.index > f.index;) f = p, p = this.getNextKeyWith(d, o, p.index + 1);
                l.prevKey[d] = f, l.nextKey[d] = p
              }
              var m = f[d],
                g = p[d];
              if (p.time !== f.time && void 0 !== m && void 0 !== g) {
                var v = (this.currentTime - f.time) / (p.time - f.time);
                if (v < 0 && (v = 0), v > 1 && (v = 1), "pos" === d) {
                  if (this.interpolationType === c.a.LINEAR) n.x = m[0] + (g[0] - m[0]) * v, n.y = m[1] + (g[1] - m[1]) * v, n.z = m[2] + (g[2] - m[2]) * v, s.position.copy(n);
                  else if (this.interpolationType === c.a.CATMULLROM || this.interpolationType === c.a.CATMULLROM_FORWARD) {
                    e[0] = this.getPrevKeyWith("pos", o, f.index - 1).pos, e[1] = m, e[2] = g, e[3] = this.getNextKeyWith("pos", o, p.index + 1).pos, v = .33 * v + .33;
                    var y = Object(u.interpolateCatmullRom)(e, v);
                    if (n.x = y[0], n.y = y[1], n.z = y[2], s.position.copy(n), this.interpolationType === c.a.CATMULLROM_FORWARD) {
                      var b = Object(u.interpolateCatmullRom)(e, 1.01 * v);
                      t.set(b[0], b[1], b[2]), t.sub(vector), t.y = 0, t.normalize();
                      var _ = Math.atan2(t.x, t.z);
                      s.rotation.set(0, _, 0)
                    }
                  }
                } else if ("text" === d) {
                  var x = Math.abs(this.currentTime - p.time) < this.epsilon ? g : m;
                  this.updateText(s.position, x)
                } else if ("vis" === d) {
                  var w;
                  if (w = r.getElementById(this.id)) {
                    var E = Math.abs(this.currentTime - p.time) < this.epsilon ? g : m;
                    w.style.visibility = E ? "visible" : "hidden"
                  }
                }
              }
            }
            s.matrixAutoUpdate = !0, s.matrixWorldNeedsUpdate = !0
          }
      }
    }
  }(), p.prototype = Object.create(u.Animation.prototype), p.prototype.constructor = p, p.prototype.keyTypes = ["points", "vis"], p.prototype.defaultKey = {
    points: [],
    vis: 1
  }, p.prototype.stop = function () {
    u.Animation.prototype.stop.call(this), this.viewer.removeOverlay("polyline", this.root), this.root = null
  }, p.prototype.update = function () {
    function e(e) {
      e.root && (e.viewer.removeOverlay("polyline", e.root), e.root = null)
    }
    return function (t) {
      if (!1 !== this.isPlaying && (this.currentTime += t * this.timeScale, this.resetIfLooped(), !this.isPlayingOutOfRange()))
        if (this.isPaused && this.currentTime < this.startKeyTime) e(this);
        else
          for (var n = 0, i = this.hierarchy.length; n < i; n++)
            for (var r = this.hierarchy[n].animationCache[this.data.name], o = 0; o < this.keyTypes.length; o++) {
              var a = this.keyTypes[o],
                s = r.prevKey[a],
                c = r.nextKey[a];
              if (c.time <= this.currentTime || s.time >= this.currentTime) {
                for (s = this.data.hierarchy[n].keys[0], c = this.getNextKeyWith(a, n, 1); c.time < this.currentTime && c.index > s.index;) s = c, c = this.getNextKeyWith(a, n, c.index + 1);
                r.prevKey[a] = s, r.nextKey[a] = c
              }
              var u = s[a],
                h = c[a];
              if (c.time !== s.time && void 0 !== u && void 0 !== h) {
                var d = (this.currentTime - s.time) / (c.time - s.time);
                if (d < 0 && (d = 0), d > 1 && (d = 1), "points" === a) {
                  var f = d < .5 ? u : h;
                  this.viewer.removeOverlay("polyline", this.root), this.root = null;
                  for (var p = [], m = 0; m < f.length; m++) {
                    var g = f[m].slice();
                    if (0 === m) g[0] = u[m][0] + (h[m][0] - u[m][0]) * d, g[1] = u[m][1] + (h[m][1] - u[m][1]) * d, g[2] = u[m][2] + (h[m][2] - u[m][2]) * d;
                    else if (m === f.length - 1) {
                      var v = u.length - 1,
                        y = h.length - 1;
                      g[0] = u[v][0] + (h[y][0] - u[v][0]) * d, g[1] = u[v][1] + (h[y][1] - u[v][1]) * d, g[2] = u[v][2] + (h[y][2] - u[v][2]) * d
                    }
                    var b = new l.Vector3(g[0], g[1], g[2]);
                    p.push(b)
                  }
                  this.root = this.createPolyline(p)
                } else if ("vis" === a) {
                  var _ = Math.abs(this.currentTime - c.time) < this.epsilon ? h : u;
                  this.root.visible = _, _ || e(this)
                }
              }
            }
    }
  }(), p.prototype.createPolyline = function (e) {
    for (var t = new l.Geometry, n = 0; n < e.length; n++) t.vertices.push(e[n]);
    t.computeLineDistances();
    var i = new l.LineDashedMaterial({
        color: 0,
        dashSize: 1,
        gapSize: .5,
        linewidth: 1
      }),
      r = new l.Line(t, i, l.LineStrip);
    return void 0 === this.viewer.overlayScenes.polyline && this.viewer.createOverlayScene("polyline"), this.viewer.addOverlay("polyline", r), r
  };
  var m = n(12);

  function g(e, t) {
    this.animations = [], this.viewer = e, this.setGlobalManager(e.globalManager), this.keys = [], this.isPlaying = !1, this.isPaused = !0, this.updateFlag = 0, this.duration = t, this.currentTime = 0, this.onPlayCallback = null, this.animationHandler = new i, this.areCameraAnimationsPaused = !1, this.UPDATE_SCENE = 1, this.UPDATE_CAMERA = 2, this.followCam = !0, this._speedMod = 1, this._loops = !1
  }
  n.d(t, "KeyFrameAnimator", (function () {
    return g
  })), m.GlobalManagerMixin.call(g.prototype), g.prototype.destroy = function () {
    this.stop(), this.viewer = null, this.keys = null, this.animations = null, this.isPlaying = !1, this.isPaused = !1, this.animationHandler = null
  }, g.prototype.add = function (e) {
    var t = this;
    if (!(!e.hierarchy || e.hierarchy.length < 1 || !e.hierarchy[0].keys || e.hierarchy[0].keys.length < 2)) {
      var n = null,
        i = this;
      if ("camera" === e.type ? (n = new h(i.viewer.camera, e, i), i.animations.push(n)) : "annotation" === e.type ? (n = new f(null, e, i), i.animations.push(n)) : "polyline" === e.type ? (n = new p(null, e, i), i.animations.push(n)) : "mesh" === e.type ? i.viewer.model.getData().instanceTree.enumNodeFragments(e.id, (function (t) {
          var r = i.viewer.getFragmentProxy(i.viewer.model, t);
          r && (n = new s.MeshAnimation(r, e, i), i.animations.push(n))
        }), !0) : "visibility" === e.type && (n = new d(e, e.id, i), i.animations.push(n)), i.animations.forEach((function (e) {
          return e.setGlobalManager(t.globalManager)
        })), n) {
        for (var r = 0, o = e.hierarchy.length; r < o; r++)
          for (var a = e.hierarchy[r].keys, l = 0; l < a.length; l++) void 0 === a[l].xk && i.keys.push(a[l].time);
        ! function (e) {
          e.sort((function (e, t) {
              return e - t
            })),
            function (e, t, n) {
              for (t = e.length; n = --t;)
                for (; n--;) e[t] !== e[n] || e.splice(n, 1)
            }(e)
        }(i.keys)
      }
      this.updateFlag |= this.UPDATE_SCENE
    }
  }, g.prototype.update = function (e) {
    e *= this._speedMod, this.animationHandler.update(e);
    var t = this.updateFlag;
    return this.isPlaying && !this.isPaused && (this.currentTime += e, this.currentTime = Math.min(this.currentTime, this.duration), this.onPlayCallback && this.onPlayCallback(this.duration > 0 ? this.currentTime / this.duration * 100 : 0), this.currentTime >= this.duration && (this._loops ? this.play(0, this.onPlayCallback) : this.pause()), t |= this.UPDATE_SCENE), this.updateFlag = 0, t
  }, g.prototype.play = function (e, t) {
    if (this.onPlayCallback = t, this.currentTime >= this.duration && this.goto(0), this.isPlaying) this.pause();
    else {
      for (var n = 0; n < this.animations.length; n++) {
        this.animations[n].play(e)
      }
      this.isPlaying = !0, this.isPaused = !1
    }
  }, g.prototype.setFollowCamera = function (e) {
    this.followCam = e;
    for (var t = 0; t < this.animations.length; t++) {
      var n = this.animations[t];
      n.setFollowCamera && n.setFollowCamera(e)
    }
  }, g.prototype.isFollowingCamera = function () {
    return this.followCam
  }, g.prototype.setSpeedModifier = function (e) {
    this._speedMod = e
  }, g.prototype.getSpeedModifier = function () {
    return this._speedMod
  }, g.prototype.setLooping = function (e) {
    this._loops = e
  }, g.prototype.isLooping = function () {
    return this._loops
  }, g.prototype.pause = function () {
    for (var e = 0; e < this.animations.length; e++) {
      var t = this.animations[e];
      t.isPaused === this.isPaused && t.pause()
    }
    this.isPaused = !this.isPaused, this.areCameraAnimationsPaused = this.isPaused
  }, g.prototype.pauseCameraAnimations = function () {
    for (var e = 0; e < this.animations.length; e++) {
      var t = this.animations[e];
      t instanceof h && t.pause()
    }
    this.areCameraAnimationsPaused = !this.areCameraAnimationsPaused
  }, g.prototype.stop = function () {
    for (var e = 0; e < this.animations.length; e++) {
      this.animations[e].stop()
    }
    this.isPlaying = !1, this.isPaused = !1
  }, g.prototype.goto = function (e) {
    if (void 0 !== e) {
      for (var t = 0; t < this.animations.length; t++) {
        this.animations[t].goto(e)
      }
      this.isPlaying = !0, this.isPaused = !0, this.currentTime = e, this.updateFlag |= this.UPDATE_SCENE
    }
  }, g.prototype.next = function () {
    var e = function (e, t) {
      for (var n = -1, i = 0; i < t.length; i++)
        if (t[i] > e) {
          n = t[i];
          break
        } return n < 0 ? t[t.length - 1] : n
    }(this.currentTime, this.keys);
    this.goto(e)
  }, g.prototype.prev = function () {
    var e = function (e, t) {
      for (var n = -1, i = t.length - 1; i > -1; i--)
        if (t[i] < e) {
          n = t[i];
          break
        } return n < 0 ? t[0] : n
    }(this.currentTime, this.keys);
    this.goto(e)
  }
}, function (e, t, n) {
  "use strict";
  n.r(t);
  var i = n(26),
    r = n(62),
    o = n(13),
    a = n(1),
    s = n(45),
    l = n(131),
    c = n(10),
    u = n(104),
    h = n(47),
    d = n(6),
    f = n(18);

  function p(e) {
    return (p = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (e) {
      return typeof e
    } : function (e) {
      return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
    })(e)
  }

  function m(e) {
    switch (e) {
      case "meter":
      case "meters":
      case "m":
        return 1;
      case "feet and inches":
      case "foot":
      case "feet":
      case "ft":
        return .3048;
      case "inch":
      case "inches":
      case "in":
        return .0254;
      case "centimeter":
      case "centimeters":
      case "cm":
        return .01;
      case "millimeter":
      case "millimeters":
      case "mm":
        return .001;
      default:
        return 1
    }
  }

  function g(e, t) {
    if (e.metadata) {
      var n = e.metadata["world bounding box"],
        a = new o.LmvVector3(n.minXYZ[0], n.minXYZ[1], n.minXYZ[2]),
        s = new o.LmvVector3(n.maxXYZ[0], n.maxXYZ[1], n.maxXYZ[2]);
      e.bbox = new r.LmvBox3(a, s);
      var l = function (e, t) {
        if (e.placementTransform = t.placementTransform, t.applyScaling) {
          var n = "m";
          e.metadata["distance unit"] && (n = e.metadata["distance unit"].value), e.scalingUnit = n, "object" === p(t.applyScaling) ? (t.applyScaling.from && (n = t.applyScaling.from), t.applyScaling.to && (e.scalingUnit = t.applyScaling.to)) : e.scalingUnit = t.applyScaling;
          var r = m(n) / m(e.scalingUnit);
          if (1 != r) {
            var o = new i.LmvMatrix4(!0),
              a = new i.LmvMatrix4(!0);
            a.elements[0] = r, a.elements[5] = r, a.elements[10] = r, t.placementTransform && o.copy(t.placementTransform), e.placementTransform = t.placementTransform = o.multiply(a)
          }
        }
        var s = e.metadata["custom values"];
        if (s && s.refPointTransform) {
          e.refPointTransform = new i.LmvMatrix4(!0);
          var l = e.refPointTransform.elements,
            c = s.refPointTransform;
          l[0] = c[0], l[1] = c[1], l[2] = c[2], l[4] = c[3], l[5] = c[4], l[6] = c[5], l[8] = c[6], l[9] = c[7], l[10] = c[8], l[12] = c[9], l[13] = c[10], l[14] = c[11]
        } else {
          var u = e.metadata.georeference,
            h = u && u.refPointLMV,
            d = 0;
          if (s && s.hasOwnProperty("angleToTrueNorth") && (d = Math.PI / 180 * s.angleToTrueNorth), h || d) {
            var f = new i.LmvMatrix4(!0),
              g = f.elements;
            g[0] = g[5] = Math.cos(d), g[1] = -Math.sin(d), g[4] = Math.sin(d);
            var v = new i.LmvMatrix4(!0);
            g = v.elements, h && (g[12] = -h[0], g[13] = -h[1], g[14] = -h[2]), e.refPointTransform = f.multiply(v)
          }
        }
        if (t.applyRefPoint && e.refPointTransform) {
          var y = new i.LmvMatrix4(!0);
          t.placementTransform && y.copy(t.placementTransform), y.multiply(e.refPointTransform), e.placementTransform = t.placementTransform = y
        } else !t.applyRefPoint && t.placementTransform && (e.placementTransform = new i.LmvMatrix4(!0).copy(t.placementTransform));
        return e.placementTransform && function (e) {
          for (var t = e.elements, n = 0; n < 4; n++)
            for (var i = 0; i < 4; i++)
              if (n === i) {
                if (1 !== t[4 * n + i]) return !1
              } else if (0 !== t[4 * n + i]) return !1;
          return !0
        }(e.placementTransform) && (e.placementTransform = null), e.placementTransform
      }(e, t);
      l && !e.bbox.empty() && e.bbox.applyMatrix4(l), t.globalOffset ? e.globalOffset = t.globalOffset : e.globalOffset = e.bbox.center(),
        function (e, t) {
          var n = e.globalOffset;
          if (n.x || n.y || n.z) {
            if (t) {
              var r = new i.LmvMatrix4(!0);
              r.copy(t), (t = r).elements[12] -= n.x, t.elements[13] -= n.y, t.elements[14] -= n.z
            } else(t = new i.LmvMatrix4(!0)).makeTranslation(-n.x, -n.y, -n.z);
            e.placementWithOffset = t
          } else e.placementWithOffset = t
        }(e, l), e.bbox.empty() || (e.bbox.min.sub(e.globalOffset), e.bbox.max.sub(e.globalOffset)), e.metadata.hasOwnProperty("double sided geometry") && e.metadata["double sided geometry"].value && (e.doubleSided = !0)
    }
  }

  function v(e, t) {
    e[0] -= t.x, e[1] -= t.y, e[2] -= t.z
  }
  var y = n(207),
    b = n(134);

  function _(e, t) {
    var n, i, r, o, s, l = 0;

    function c(e) {
      var l = new Uint8Array(4);
      if ("string" == typeof e)
        for (var c = 0; c < 4; c++) l[c] = e.charCodeAt(c);
      else
        for (var u = 0; u < 4; u++) l[u] = e[u];
      (n = l[1] << 8 | l[0]) || (n = t || 0), n || a.logger.error("Unknwon byte stride."), n % 4 && a.logger.error("Expected byte size to be multiple of 4, but got " + n), i = l[3] << 8 | l[2], n / 4, r = new Uint8Array(n), o = new Float32Array(r.buffer), s = new Uint32Array(r.buffer)
    }
    this.onData = function (t, i, o) {
      void 0 === i && (i = t.length);
      for (var a = "string" == typeof t;;) {
        if (!l && i >= 4) c(t), l++;
        else if (i < 4) return !1;
        var s = l * n;
        if (i < s + n) return o;
        if (a)
          for (var u = 0; u < n; u++) r[u] = 255 & t.charCodeAt(u + s);
        else
          for (var h = 0; h < n; h++) r[h] = t[h + s];
        if (!e(this, l)) return !1;
        l++
      }
    }, this.onEnd = function (e, t) {
      this.onData(e, t, !0) || (this.rawData = e, this.rawLength = t)
    }, this.flush = function () {
      this.rawData && (this.onData(this.rawData, this.rawLength, !0) && (this.rawData = null))
    }, this.idata = function () {
      return s
    }, this.fdata = function () {
      return o
    }, this.bdata = function () {
      return r
    }, this.version = function () {
      return i
    }, this.byteStride = function () {
      return n
    }
  }

  function x() {
    this.materials = null, this.fragments = null, this.geompacks = [], this.propertydb = {
      attrs: [],
      avs: [],
      ids: [],
      values: [],
      offsets: [],
      dbid: []
    }, this.bbox = null, this.animations = null, this.pendingRequests = 0, this.globalOffset = {
      x: 0,
      y: 0,
      z: 0
    }, this.pendingRequests = 0, this.initialLoadProgress = 0, this.materialIdToHash = [], this.aborted = !1
  }
  x.prototype.getMaterialHash = function (e) {
    var t = this.materialIdToHash[e];
    if (t) return t;
    var n = this.materialHashes.byteStride,
      i = Object(y.getHexStringPacked)(this.materialHashes.hashes, e * n, n);
    return this.materialIdToHash[e] = i, i
  }, x.prototype.getGeometryHash = function (e) {
    var t = this.geomMetadata.byteStride;
    return Object(y.getHexStringPacked)(this.geomMetadata.hashes, e * t, t)
  }, x.prototype.initEmptyLists = function (e) {
    var t = this.fragments = {};
    t.length = this.metadata.stats.num_fragments, t.numLoaded = 0, t.boxes = e.fragmentTransformsDouble ? new Float64Array(6 * t.length) : new Float32Array(6 * t.length), t.transforms = e.fragmentTransformsDouble ? new Float64Array(12 * t.length) : new Float32Array(12 * t.length), t.materials = Object(b.a)(t.length, this.metadata.stats.num_materials), t.geomDataIndexes = Object(b.a)(t.length, this.metadata.stats.num_geoms), t.fragId2dbId = new Int32Array(t.length), t.visibilityFlags = new Uint8Array(t.length), t.mesh2frag = {}, t.topoIndexes = null, this.geomMetadata = {
      hashes: null,
      byteStride: 0,
      version: 0,
      numLoaded: 0,
      hashToIndex: {}
    }, this.materialHashes = {
      hashes: null,
      byteStride: 0,
      version: 0,
      numLoaded: 0
    }, this.materials = {
      name: "LMVTK Simple Materials",
      version: "1.0",
      scene: {
        SceneUnit: 8215,
        YIsUp: 0
      },
      materials: {}
    }
  }, x.prototype.loadAsyncResource = function (e, t, n, i) {
    var r = this;
    this.pendingRequests++, t = Object(f.pathToURL)(t, e.basePath), f.ViewingService.getItem(e, t, (function (e) {
      r.pendingRequests--, i(e)
    }), e.onFailureCallback, {
      responseType: n || "arraybuffer"
    })
  }, x.prototype.loadAsyncProgressive = function (e, t, n, i, r) {
    var o = this;
    t = Object(f.pathToURL)(t, e.basePath), f.ViewingService.getItem(e, t, (function (t, r) {
      n.onEnd(t, r), o.postLoad(e, i, n, t)
    }), r || e.onFailureCallback, {
      responseType: "text",
      onprogress: function (e, t) {
        if (o.aborted) return !0;
        n.onData(e, t, !1)
      }
    })
  }, x.prototype.loadMetadata = function (e, t) {
    var n = this;
    this.loadAsyncResource(e, t, "json", (function (r) {
      n.metadata = r, n.manifest = n.metadata.manifest, n.numGeoms = n.metadata.stats.num_geoms, n.processMetadata(e), n.initEmptyLists(e);
      var o = n.metadata.manifest,
        a = o.shared_assets.pdb;
      for (var s in a) n.propertydb[s] && n.propertydb[s].push({
        path: a[s],
        isShared: !0
      });
      var l = o.assets.pdb;
      for (var s in l) n.propertydb[s] && n.propertydb[s].push({
        path: l[s],
        isShared: !1
      });
      o.assets.animations && n.loadAsyncResource(e, o.assets.animations, "json", (function (e) {
        n.animations = e,
          function (e) {
            if (e.animations) {
              var t = e.animations.animations;
              if (t)
                for (var n = e.globalOffset, r = (new i.LmvMatrix4).makeTranslation(n.x, n.y, n.z), o = (new i.LmvMatrix4).makeTranslation(-n.x, -n.y, -n.z), a = new i.LmvMatrix4, s = new i.LmvMatrix4, l = 0; l < t.length; l++) {
                  var c = t[l];
                  if (c.hierarchy)
                    for (var u = 0; u < c.hierarchy.length; u++) {
                      var h = c.hierarchy[u].keys;
                      if (h)
                        for (var d = 0; d < h.length; d++) {
                          var f = h[d].pos;
                          if (f) {
                            var p = n,
                              m = h[d].rot;
                            m && (a.makeRotationFromQuaternion({
                              x: m[0],
                              y: m[1],
                              z: m[2],
                              w: m[3]
                            }), s.multiplyMatrices(r, a).multiply(o), p = {
                              x: s.elements[12],
                              y: s.elements[13],
                              z: s.elements[14]
                            }), v(f, p)
                          }
                          var g = h[d].target;
                          g && v(g, n);
                          var y = h[d].points;
                          if (y)
                            for (var b = 0; b < y.length; b++) v(y[b], n)
                        }
                    }
                }
            }
          }(n)
      })), o.assets.topology && n.loadAsyncResource(e, t, "json", (function (e) {
        n.topology = e
      })), e.onLoaderEvent("otg_root"), n.postLoad(e, "metadata")
    }))
  }, x.prototype.loadFragmentList = function (e, t) {
    var n = this,
      a = new o.LmvVector3,
      s = new o.LmvVector3,
      l = {
        x: 0,
        y: 0,
        z: 0,
        w: 1
      },
      u = new i.LmvMatrix4(!0),
      h = new r.LmvBox3,
      d = {
        x: 0,
        y: 0,
        z: 0
      };
    var f = new _((function (t, i) {
      if (i -= 1, !n.metadata) return !1;
      var r = t.idata(),
        o = t.fdata(),
        f = n.fragments,
        p = f.geomDataIndexes[i] = r[0],
        m = f.materials[i] = r[1],
        g = f.fragId2dbId[i] = r[2],
        v = r[3];
      if (p > n.geomMetadata.numLoaded || m > n.materialHashes.numLoaded) return !1;
      var y = f.mesh2frag[p];
      void 0 === y ? f.mesh2frag[p] = i : Array.isArray(y) ? y.push(i) : f.mesh2frag[p] = [y, i];
      var b = !(!n.dbIdFilter || n.dbIdFilter[g]) || 1 & v ? c.MeshFlags.MESH_NOTLOADED : 0;
      f.visibilityFlags[i] = b;
      var _ = n.metadata.fragmentTransformsOffset || d;
      a.set(o[4] + _.x, o[5] + _.y, o[6] + _.z), l.x = o[7], l.y = o[8], l.z = o[9], l.w = o[10], s.set(o[11], o[12], o[13]), u.compose(a, l, s), n.placementWithOffset && u.multiplyMatrices(n.placementWithOffset, u);
      var x = u.elements,
        w = f.transforms,
        E = 12 * i;
      return w[E + 0] = x[0], w[E + 1] = x[1], w[E + 2] = x[2], w[E + 3] = x[4], w[E + 4] = x[5], w[E + 5] = x[6], w[E + 6] = x[8], w[E + 7] = x[9], w[E + 8] = x[10], w[E + 9] = x[12], w[E + 10] = x[13], w[E + 11] = x[14], h.min.x = -.5, h.min.y = -.5, h.min.z = -.5, h.max.x = .5, h.max.y = .5, h.max.z = .5, h.applyMatrix4(u), f.boxesLoaded || ((w = f.boxes)[(E = 6 * i) + 0] = h.min.x, w[E + 1] = h.min.y, w[E + 2] = h.min.z, w[E + 3] = h.max.x, w[E + 4] = h.max.y, w[E + 5] = h.max.z), f.numLoaded = i + 1, e.onLoaderEvent("fragment", i), !0
    }), 52);
    return this.loadAsyncProgressive(e, t, f, "all_fragments"), f
  }, x.prototype.handleHashListRequestFailures = function (e) {
    this.metadata && (this.geomHashListFailure && this.metadata.stats.num_geoms > 0 && e.onFailureCallback.apply(e, this.geomHashListFailure), this.matHashListFailure && this.metadata.stats.num_materials > 0 && e.onFailureCallback.apply(e, this.matHashListFailure), this.geomHashListFailure = null, this.matHashListFailure = null)
  }, x.prototype.loadGeometryHashList = function (e, t) {
    var n = this;
    var i = new _((function (e, t) {
      return !!n.metadata && (n.geomMetadata.hashes || (n.geomMetadata.hashes = new Uint8Array(e.byteStride() * (n.numGeoms + 1)), n.geomMetadata.byteStride = e.byteStride(), n.geomMetadata.version = e.version()), n.geomMetadata.hashes.set(e.bdata(), t * e.byteStride()), n.geomMetadata.numLoaded = t, !0)
    }), 20);
    return this.loadAsyncProgressive(e, t, i, "geometry_ptrs", (function () {
      n.geomHashListFailure = arguments, n.handleHashListRequestFailures(e), n.postLoad(e, "geometry_ptrs", i)
    })), i
  }, x.prototype.loadMaterialHashList = function (e, t) {
    var n = this;
    var i = new _((function (e, t) {
      return !!n.metadata && (n.materialHashes.hashes || (n.numMaterials = n.metadata.stats.num_materials, n.materialHashes.hashes = new Uint8Array(e.byteStride() * (n.numMaterials + 1)), n.materialHashes.byteStride = e.byteStride(), n.materialHashes.version = e.version()), n.materialHashes.hashes.set(e.bdata(), t * e.byteStride()), n.materialHashes.numLoaded = t, !0)
    }), 20);
    return this.loadAsyncProgressive(e, t, i, "material_ptrs", (function () {
      n.matHashListFailure = arguments, n.handleHashListRequestFailures(e), n.postLoad(e, "material_ptrs", i)
    })), i
  }, x.prototype.processMetadata = function (e) {
    var t = this.metadata;
    g(this, e);
    var n = this.placementWithOffset;
    if (t.cameras && (this.cameras = t.cameras, n))
      for (var i = 0; i < this.cameras.length; i++) {
        var r = this.cameras[i];
        r.position = new o.LmvVector3(r.position.x, r.position.y, r.position.z), r.position.applyMatrix4(n), r.target = new o.LmvVector3(r.target.x, r.target.y, r.target.z), r.target.applyMatrix4(n), r.up = new o.LmvVector3(r.up.x, r.up.y, r.up.z), r.up.transformDirection(n)
      }
  }, x.prototype.beginLoad = function (e, t) {
    this.loadMetadata(e, t);
    var n = e.objectIds;
    if (n) {
      this.dbIdFilter = {};
      for (var i = 0, r = n.length; i < r; i++) this.dbIdFilter[n[i]] = 1
    }
    this.materialsCtx = this.loadMaterialHashList(e, "materials_ptrs.hl"), this.geometryCtx = this.loadGeometryHashList(e, "geometry_ptrs.hl"), this.fragmentsCtx = this.loadFragmentList(e, "fragments.fl")
  }, x.prototype.makeSharedResourcePath = function (e, t, n) {
    if (10 === n.length && (n = Object(y.unpackHexString)(n)), e) {
      var i = n,
        r = "";
      (s = this.manifest.shared_assets.global_sharding || 0) && (r = "/" + n.slice(0, s), i = n.slice(s));
      var o = this.manifest.shared_assets[t];
      if (0 === o.indexOf("urn:adsk.fluent:") || 0 === o.indexOf("$otg_cdn$")) o = o.slice(o.indexOf("/"));
      else {
        var a = o.split("/");
        o = "/" + (a[a.length - 1] || a[a.length - 2]) + "/"
      }
      return e + r + o + i
    }
    var s;
    i = n, r = "";
    return (s = this.manifest.shared_assets.global_sharding || 2) && (r = "/" + n.slice(0, s) + "/", i = n.slice(s)), Object(f.pathToURL)(this.basePath) + this.manifest.shared_assets[t] + r + i
  }, x.prototype.postLoad = function (e, t, n, i) {
    t && this.initialLoadProgress++, 4 === this.initialLoadProgress ? (this.materialsCtx.flush(), this.geometryCtx.flush(), this.fragmentsCtx.flush(), this.materialsCtx = null, this.geometryCtx = null, this.fragmentsCtx = null, this.fragments.numLoaded < this.metadata.stats.num_fragments && a.logger.warn("Fragments actually loaded fewer than expected."), e.onLoaderEvent("all_fragments")) : "metadata" === t && (this.materialsCtx.flush(), this.geometryCtx.flush(), this.fragmentsCtx.flush())
  }, x.prototype.abort = function () {
    this.aborted = !0
  };
  var w = n(86),
    E = n(105),
    A = n(2),
    S = n(54),
    M = n(3),
    T = n(73),
    C = n(96);

  function P(e, t, n, i, r, o, a) {
    try {
      var s = e[o](a),
        l = s.value
    } catch (e) {
      return void n(e)
    }
    s.done ? t(l) : Promise.resolve(l).then(i, r)
  }
  n.d(t, "OtgLoader", (function () {
    return L
  }));

  function L(e) {
    this.viewer3DImpl = e, this.loading = !1, this.tmpMatrix = new i.LmvMatrix4, this.tmpBox = new r.LmvBox3, this.logger = a.logger, this.loadTime = 0, this.pendingMaterials = {}, this.pendingMaterialsCount = 0, this.pendingMeshes = {}, this.pendingMeshesCount = 0, this.operationsDone = 0
  }

  function D(e) {
    return Math.floor(100 * e.fragsLoaded / e.metadata.stats.num_fragments)
  }
  L.prototype.dtor = function () {
    this.initWorkerScriptToken && (this.initWorkerScriptToken.cancel(), this.initWorkerScriptToken = null, a.logger.debug("SVF loader dtor: on init worker script.")), this.bvhWorker && (this.bvhWorker.clearAllEventListenerWithIntercept(), this.bvhWorker.terminate(), this.bvhWorker = null, a.logger.debug("SVF loader dtor: on svf worker.")), this.svf && (this.svf.loadDone || console.log("stopping load before it was complete"), this.svf.abort(), this.svf.propDbLoader && (this.svf.propDbLoader.dtor(), this.svf.propDbLoader = null)), this.viewer3DImpl.geomCache() && this.model && (this.loading && this.viewer3DImpl.geomCache().cancelRequests(this.svf.geomMetadata.hashToIndex), this.removeMeshReceiveListener()), this.viewer3DImpl = null, this.model = null, this.svf = null, this.logger = null, this.tmpMatrix = null, this.loading = !1, this.loadTime = 0
  }, L.prototype.isValid = function () {
    return null != this.viewer3DImpl
  }, L.prototype.removeMeshReceiveListener = function () {
    this.meshReceiveListener && (this.viewer3DImpl.geomCache().updateMruTimestamps(), this.viewer3DImpl.geomCache().removeEventListener(T.MESH_RECEIVE_EVENT, this.meshReceiveListener), this.viewer3DImpl.geomCache().removeEventListener(T.MESH_FAILED_EVENT, this.meshReceiveListener), this.viewer3DImpl.geomCache().removeEventListener(T.MATERIAL_RECEIVE_EVENT, this.materialReceiveListener), this.viewer3DImpl.geomCache().removeEventListener(T.MATERIAL_FAILED_EVENT, this.materialReceiveListener), this.meshReceiveListener = null)
  }, L.prototype.loadFile = function (e, t, n, i) {
    if (!this.viewer3DImpl) return a.logger.log("SVF loader was already destructed. So no longer usable."), !1;
    if (this.loading) return a.logger.log("Loading of SVF already in progress. Ignoring new request."), !1;
    if (this.loading = !0, t.acmSessionId) this.svfUrn = t.acmSessionId.split(",")[0];
    else {
      console.warn("DEPRECATED: Automatic derivation of URN will be removed in a future release. Please set the acmSessionId parameter when loading OTG data.");
      var r = e.indexOf("urn:adsk.fluent:");
      if (-1 === r && (r = e.indexOf("$otg_cdn$")), -1 !== r) {
        var o = e.split("/"),
          s = o[1],
          l = o[2],
          c = btoa(s + "?version=" + l).replace(/\+/g, "-").replace(/\//g, "_").replace(/=+$/, "");
        this.svfUrn = c
      }
    }
    this.sharedDbPath = t.sharedPropertyDbPath, this.currentLoadPath = e;
    var u = "",
      h = this.currentLoadPath.lastIndexOf("/"); - 1 != h && (u = this.currentLoadPath.substr(0, h + 1)), this.basePath = u, this.acmSessionId = t.acmSessionId, this.options = t, this.queryParams = t.acmSessionId ? "acmsession=" + t.acmSessionId : "";
    var p = {
      basePath: u,
      objectIds: t.ids,
      globalOffset: t.globalOffset,
      fragmentTransformsDouble: t.fragmentTransformsDouble,
      placementTransform: t.placementTransform,
      applyRefPoint: t.applyRefPoint,
      queryParams: this.queryParams,
      bvhOptions: t.bvhOptions || {
        isWeakDevice: Object(M.isMobileDevice)()
      },
      applyScaling: t.applyScaling,
      loadInstanceTree: t.loadInstanceTree
    };
    return this.loadContext = Object(d.initLoadContext)(p), p.raiseError = function (e, t, i) {
      n && n({
        code: e,
        msg: t,
        args: i
      })
    }, p.onFailureCallback = f.ViewingService.defaultFailureCallback.bind(p), this.loadModelRoot(p, n), i && i(), !0
  }, L.prototype.loadModelRoot = function (e, t) {
    this.t0 = (new Date).getTime(), this.firstPixelTimestamp = null;
    var n = this,
      i = !1,
      r = {};
    this.initWorkerScriptToken = Object(h.initWorkerScript)((function () {
      for (var t in i = !0, r) r.hasOwnProperty(t) && r[t].forEach((function (n) {
        e.onLoaderEvent(t, n)
      }));
      r = {}
    }));
    var o = this.svf = new x;
    return o.basePath = e.basePath, e.onLoaderEvent = function (e, s) {
      if (n.svf) {
        if (!i) return r.hasOwnProperty(e) || (r[e] = []), void r[e].push(s);
        if ("otg_root" === e) {
          n.onModelRootLoadDone(o), t && t(null, n.model), n.makeBVHInWorker();
          var l = n.viewer3DImpl.geomCache();
          l || a.logger.error("geomCache is required for loading OTG models."), l.initWorker(n.options.acmSessionId), n.meshReceiveListener = function (e) {
            e.error && e.error.args ? n.onMeshError(e) : n.onMeshReceived(e.geom)
          }, l.addEventListener(T.MESH_RECEIVE_EVENT, n.meshReceiveListener), l.addEventListener(T.MESH_FAILED_EVENT, n.meshReceiveListener), n.materialReceiveListener = function (e) {
            !e.error && e.material && e.material.length ? n.onMaterialLoaded(Object(C.a)(e.material), e.hash) : n.onMaterialLoaded(null, e.hash)
          }, l.addEventListener(T.MATERIAL_RECEIVE_EVENT, n.materialReceiveListener), l.addEventListener(T.MATERIAL_FAILED_EVENT, n.materialReceiveListener), n.svf.loadDone = !1
        } else if ("fragment" === e) n.options.skipMeshLoad || n.tryToActivateFragment(s, "fragment"), n.options.onFragmentListLoadProgress && n.trackFragmentListLoadProgress();
        else if ("all_fragments" === e) n.options.skipPropertyDb || n.loadPropertyDb(), n.viewer3DImpl.api.fireEvent({
          type: A.MODEL_ROOT_LOADED_EVENT,
          svf: o,
          model: n.model
        }), n.options.skipMeshLoad || !n.svf.fragments.length ? n.onGeomLoadDone() : n.onOperationComplete();
        else if ("bvh" === e) {
          var c = s;
          n.model && (n.model.setBVH(c.nodes, c.primitives, n.options.bvhOptions), n.viewer3DImpl && n.viewer3DImpl.modelVisible(n.model.id) && n.viewer3DImpl.invalidate(!1, !0)), n.onOperationComplete()
        }
      } else console.error("load callback called after load was aborted")
    }, o.beginLoad(e, Object(f.pathToURL)(n.currentLoadPath)), !0
  }, L.prototype.makeBVHInWorker = function () {
    var e = this;
    e.bvhWorker = Object(h.createWorkerWithIntercept)();
    e.bvhWorker.addEventListenerWithIntercept((function (t) {
      if (t.data.bvh) {
        console.log("Received BVH from worker");
        var n = t.data.bvh;
        e.model && (e.svf.bvh = n, e.model.setBVH(new l.NodeArray(n.nodes, n.useLeanNodes), n.primitives, e.options.bvhOptions), e.viewer3DImpl && e.viewer3DImpl.modelVisible(e.model.id) && e.viewer3DImpl.invalidate(!1, !0)), e.bvhWorker.clearAllEventListenerWithIntercept(), e.bvhWorker.terminate(), e.bvhWorker = null, e.onOperationComplete()
      }
      if (t.data.boxes && e.model) {
        var i = e.model.myData.fragments;
        ! function (e, t) {
          for (var n = t.data.boxes, i = t.data.boxStride, r = n.length / i, o = 0, a = 0, s = 0; o < r; o++, a += i, s += 6) e[s + 0] = n[a + 0], e[s + 1] = n[a + 1], e[s + 2] = n[a + 2], e[s + 3] = n[a + 3], e[s + 4] = n[a + 4], e[s + 5] = n[a + 5]
        }(i.boxes, t), i.boxesLoaded = !0, e.model.visibleBoundsDirty = !0
      }
    }));
    var t = Object.assign({}, e.loadContext);
    t.operation = "LOAD_OTG_BVH", t.raiseError = null, t.onFailureCallback = null, t.onLoaderEvent = null, t.fragments_extra = Object(f.pathToURL)(e.basePath) + e.svf.manifest.assets.fragments_extra, t.placementTransform = e.svf.placementTransform, t.placementWithOffset = e.svf.placementWithOffset, t.fragmentTransformsOffset = e.svf.metadata.fragmentTransformsOffset, t.globalOffset = e.svf.globalOffset, t.fragments_extra ? e.bvhWorker.doOperation(t) : e.onOperationComplete()
  }, L.prototype.tryToActivateFragment = function (e, t) {
    var n = this.svf,
      i = this.model;
    if (i) {
      if (n.fragments.visibilityFlags[e] & c.MeshFlags.MESH_NOTLOADED) return i.getFragmentList().setFlagFragment(e, c.MeshFlags.MESH_NOTLOADED, !0), void this.trackGeomLoadProgress(n, e, !1);
      var r = !1,
        o = n.fragments.materials[e],
        a = n.getMaterialHash(o),
        s = this.findOrLoadMaterial(i, a, o);
      s || ("fragment" === t && this.pendingMaterials[a].push(e), "material" !== t && (r = !0));
      var l = n.fragments.geomDataIndexes[e];
      if (0 !== l) {
        i.getFragmentList().getOriginalWorldMatrix(e, this.tmpMatrix);
        var u = i.getGeometryList().getGeometry(l);
        if (u || ("fragment" === t && this.loadGeometry(l, e), r = !0), !r) {
          var h = this.viewer3DImpl.setupMesh(i, u, a, this.tmpMatrix);
          h.geomId = l, i.activateFragment(e, h, !!n.placementTransform), this.viewer3DImpl.geomCache().updateGeomImportance(i, e), this.trackGeomLoadProgress(n, e, !1)
        }
      } else(s || "material" === t) && this.trackGeomLoadProgress(n, e, !1)
    }
  }, L.prototype.onModelRootLoadDone = function (e) {
    e.isOTG = !0, e.geomMetadata.hashToIndex = {}, e.failedFrags = {}, e.failedMeshes = {}, e.failedMaterials = {}, e.geomMemory = 0, e.gpuNumMeshes = 0, e.gpuMeshMemory = 0, e.fragsLoaded = 0, e.fragsLoadedNoGeom = 0, e.nextRepaintPolys = 0, e.numRepaints = 0, e.urn = this.svfUrn, e.acmSessionId = this.acmSessionId, e.basePath = this.basePath, e.loadOptions = this.options;
    var t = Date.now();
    this.loadTime += t - this.t0, a.logger.log("SVF load: " + (t - this.t0));
    var n = this.model = new E.Model(e);
    if (n.loader = this, n.initialize(), this.t0 = t, e.bbox = (new r.LmvBox3).copy(e.bbox), e.refPointTransform && (e.refPointTransform = new i.LmvMatrix4(!0).copy(e.refPointTransform)), e.placementTransform && (e.placementTransform = new i.LmvMatrix4(!0).copy(e.placementTransform)), e.cameras)
      for (var s = 0; s < e.cameras.length; s++) {
        var l = e.cameras[s];
        l.position = (new o.LmvVector3).copy(l.position), l.target = (new o.LmvVector3).copy(l.target), l.up = (new o.LmvVector3).copy(l.up)
      }
    a.logger.log("scene bounds: " + JSON.stringify(e.bbox));
    var c = {
      category: "metadata_load_stats",
      urn: e.urn,
      has_topology: !!e.topology,
      has_animations: !!e.animations,
      materials: e.metadata.stats.num_materials,
      is_mobile: Object(M.isMobileDevice)()
    };
    a.logger.track(c), this.viewer3DImpl.signalProgress(5, S.ProgressState.ROOT_LOADED, this.model), e.handleHashListRequestFailures(this.loadContext), e.propDbLoader = new u.PropDbLoader(this.sharedDbPath, this.model, this.viewer3DImpl.api)
  }, L.prototype.trackGeomLoadProgress = function (e, t, n) {
    if (n) {
      if (e.failedFrags[t]) return void console.log("Double fail", t);
      e.failedFrags[t] = 1
    }
    var i = D(e);
    e.fragsLoaded++;
    var r = D(e);
    r > i && this.viewer3DImpl.signalProgress(r, S.ProgressState.LOADING, this.model), this.model.getGeometryList().geomPolyCount > e.nextRepaintPolys && (this.firstPixelTimestamp = this.firstPixelTimestamp || Date.now(), e.numRepaints++, e.nextRepaintPolys += 1e5 * Math.pow(1.5, e.numRepaints), this.viewer3DImpl.modelVisible(this.model.id) && this.viewer3DImpl.invalidate(!1, !0)), e.fragsLoaded === e.metadata.stats.num_fragments && this.onOperationComplete()
  }, L.prototype.trackFragmentListLoadProgress = function () {
    var e = this.svf;

    function t(e) {
      return Math.floor(100 * e.fragsLoadedNoGeom / e.metadata.stats.num_fragments)
    }
    var n = t(e);
    e.fragsLoadedNoGeom++;
    var i = t(e);
    i > n && this.options.onFragmentListLoadProgress(this.model, i)
  }, L.prototype.onOperationComplete = function () {
    this.operationsDone++, 3 === this.operationsDone && this.onGeomLoadDone()
  }, L.prototype.onMaterialLoaded = function () {
    var e, t = (e = regeneratorRuntime.mark((function e(t, n, i) {
      var r, o, a, l;
      return regeneratorRuntime.wrap((function (e) {
        for (;;) switch (e.prev = e.next) {
          case 0:
            if (this.loading) {
              e.next = 2;
              break
            }
            return e.abrupt("return");
          case 2:
            if (r = this.pendingMaterials[n]) {
              e.next = 5;
              break
            }
            return e.abrupt("return");
          case 5:
            if (o = this.viewer3DImpl.matman(), !t) {
              e.next = 21;
              break
            }
            return t.hash = n, e.prev = 8, e.next = 11, o.convertSharedMaterial(this.model, t, n);
          case 11:
            a = e.sent, s.TextureLoader.loadMaterialTextures(this.model, a, this.viewer3DImpl), o.hasTwoSidedMaterials() && this.viewer3DImpl.renderer().toggleTwoSided(!0), e.next = 19;
            break;
          case 16:
            e.prev = 16, e.t0 = e.catch(8), this.svf.failedMaterials[n] = 1;
          case 19:
            e.next = 22;
            break;
          case 21:
            this.svf.failedMaterials[n] = 1;
          case 22:
            for (l = 0; l < r.length; l++) this.tryToActivateFragment(r[l], "material");
            this.pendingMaterialsCount--, delete this.pendingMaterials[n];
          case 25:
          case "end":
            return e.stop()
        }
      }), e, this, [
        [8, 16]
      ])
    })), function () {
      var t = this,
        n = arguments;
      return new Promise((function (i, r) {
        var o = e.apply(t, n);

        function a(e) {
          P(o, i, r, a, s, "next", e)
        }

        function s(e) {
          P(o, i, r, a, s, "throw", e)
        }
        a(void 0)
      }))
    });
    return function (e, n, i) {
      return t.apply(this, arguments)
    }
  }(), L.prototype.findOrLoadMaterial = function (e, t, n) {
    if (this.pendingMaterials[t]) return !1;
    var i = this.svf;
    if (this.viewer3DImpl.matman().findMaterial(e, t)) return !0;
    this.pendingMaterialsCount++, this.pendingMaterials[t] = [];
    var r = !!this.loadContext.otg_cdn,
      o = i.makeSharedResourcePath(this.loadContext.otg_cdn, "materials", t);
    return this.viewer3DImpl.geomCache().requestMaterial(o, r, t, n, this.queryParams), !1
  }, L.prototype.loadGeometry = function (e, t) {
    var n = this.svf,
      i = n.getGeometryHash(e);
    if (this.pendingMeshes[i]) return this.pendingMeshes[i].push(t), !1;
    this.pendingMeshesCount++, this.pendingMeshes[i] = [t];
    var r = !!this.loadContext.otg_cdn;
    n.geomMetadata.hashToIndex[i] = e;
    var o = n.makeSharedResourcePath(this.loadContext.otg_cdn, "geometry", i);
    this.viewer3DImpl.geomCache().requestGeometry(o, r, i, e, this.queryParams)
  }, L.prototype.onMeshError = function (e) {
    var t = e.error.args.hash;
    this.svf.failedMeshes[t] = 1;
    var n = this.pendingMeshes[t];
    if (n) {
      for (var i = 0; i < n.length; i++) this.trackGeomLoadProgress(this.svf, n[i], !0);
      delete this.svf.geomMetadata.hashToIndex[t], delete this.pendingMeshes[t], this.pendingMeshesCount--
    }
  }, L.prototype.onMeshReceived = function (e) {
    var t = this.model;
    if (t) {
      var n = t.getGeometryList(),
        i = this.svf.geomMetadata.hashToIndex[e.hash];
      if (void 0 !== i) {
        var r = n.getGeometry(i),
          o = this.pendingMeshes[e.hash];
        if (!r) {
          n.addGeometry(e, o && o.length || 1, i), this.svf.loadDone && console.error("Geometry received after load was done");
          for (var a = 0; a < o.length; a++) this.tryToActivateFragment(o[a], "geom");
          delete this.svf.geomMetadata.hashToIndex[e.hash], delete this.pendingMeshes[e.hash], this.pendingMeshesCount--
        }
      }
    } else console.warn("Received geometry after loader was done. Possibly leaked event listener?", e.hash)
  }, L.prototype.onGeomLoadDone = function () {
    if (this.svf.loadDone = !0, this.removeMeshReceiveListener(), s.TextureLoader.loadModelTextures(this.model, this.viewer3DImpl), this.options.skipMeshLoad) return this.currentLoadPath = null, void this.viewer3DImpl.onLoadComplete(this.model);
    this.svf.fragments.entityIndexes = null, this.svf.fragments.mesh2frag = null, this.svf.geomMetadata.hashes = null;
    var e = Date.now(),
      t = "Fragments load time: " + (e - this.t0);
    this.loadTime += e - this.t0;
    var n = this.firstPixelTimestamp - this.t0;
    if (t += " (first pixel time: " + n + ")", a.logger.log(t), this.options.useConsolidation) {
      var i = this.viewer3DImpl.glrenderer();
      this.model.consolidate(this.viewer3DImpl.getMaterials(), this.options.consolidationMemoryLimit, i)
    }
    var r = {
      category: "model_load_stats",
      is_f2d: !1,
      has_prism: this.viewer3DImpl.matman().hasPrism,
      load_time: this.loadTime,
      geometry_size: this.model.getGeometryList().geomMemory,
      meshes_count: this.svf.metadata.stats.num_geoms,
      fragments_count: this.svf.metadata.stats.num_fragments,
      urn: this.svfUrn
    };
    n > 0 && (r.first_pixel_time = n), a.logger.track(r, !0), this.currentLoadPath = null, this.viewer3DImpl.onLoadComplete(this.model)
  }, L.prototype.loadPropertyDb = function () {
    this.svf.propDbLoader.load()
  }, L.prototype.is3d = function () {
    return !0
  }, w.FileLoaderManager.registerFileLoader("json", ["json"], L)
}, function (e, t, n) {
  "use strict";

  function i(e, t) {
    for (var n = 0; n < t.length; n++) {
      var i = t[n];
      i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(e, i.key, i)
    }
  }
  n.r(t);
  var r = {
    down: {
      pointer: "pointerdown",
      mouse: "mousedown",
      touch: "touchstart"
    },
    up: {
      pointer: "pointerup",
      mouse: "mouseup",
      touch: "touchend"
    },
    move: {
      pointer: "pointermove",
      mouse: "mousemove",
      touch: "touchmove"
    }
  };

  function o(e) {
    if (Autodesk.Viewing.isIE11) return [r[e].pointer];
    var t = [];
    return Autodesk.Viewing.isMobileDevice() || t.push(r[e].mouse), Autodesk.Viewing.isTouchDevice() && t.push(r[e].touch), t
  }

  function a(e, t, n) {
    var i = arguments.length > 3 && void 0 !== arguments[3] && arguments[3],
      r = (i ? "remove" : "add") + "EventListener",
      a = o(t),
      s = !0,
      l = !1,
      c = void 0;
    try {
      for (var u, h = a[Symbol.iterator](); !(s = (u = h.next()).done); s = !0) {
        var d = u.value;
        e[r](d, n)
      }
    } catch (e) {
      l = !0, c = e
    } finally {
      try {
        s || null == h.return || h.return()
      } finally {
        if (l) throw c
      }
    }
  }
  var s = function () {
    function e(t, n) {
      ! function (e, t) {
        if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
      }(this, e), this.container = t, this.isDragging = !1, this.resizeHandlerElement = null, this.onMoveCB = n, this.panelSizeThreshold = 20, this.margin = 16, this.initResizeHandlerElement()
    }
    var t, n, r;
    return t = e, (n = [{
      key: "onDown",
      value: function (e) {
        this.isDragging = !0, e.preventDefault()
      }
    }, {
      key: "onUp",
      value: function (e) {
        this.isDragging = !1
      }
    }, {
      key: "onMove",
      value: function (e) {
        if (this.isDragging) {
          "touchmove" === e.type && (e.pageX = e.touches[0].pageX, e.pageY = e.touches[0].pageY);
          var t = this.container.getBoundingClientRect(),
            n = this.getTargetWidthPercentage(e, t);
          this.panelSizeThreshold < n && n < 100 - this.panelSizeThreshold && this.onMoveCB(n)
        }
      }
    }, {
      key: "getTargetWidthPercentage",
      value: function (e, t) {}
    }, {
      key: "initResizeHandlerElement",
      value: function () {
        this.resizeHandlerElement = document.createElement("div"), this.handlerSplitLine = document.createElement("div"), this.resizeHandlerElement.appendChild(this.handlerSplitLine), a(this.resizeHandlerElement, "down", this.onDown.bind(this)), this.onUpBinded = this.onUp.bind(this), this.onMoveBinded = this.onMove.bind(this), a(document, "move", this.onMoveBinded), a(document, "up", this.onUpBinded), this.resizeHandlerElement.className = "resize-handler", this.handlerSplitLine.className = "resize-handler-center-mark"
      }
    }, {
      key: "setPosition",
      value: function (e) {}
    }, {
      key: "terminate",
      value: function () {
        this.resizeHandlerElement.parentNode.removeChild(this.resizeHandlerElement), this.resizeHandlerElement = null, a(document, "up", this.onUpBinded, !0), a(document, "move", this.onMoveBinded, !0)
      }
    }]) && i(t.prototype, n), r && i(t, r), e
  }();

  function l(e) {
    return (l = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (e) {
      return typeof e
    } : function (e) {
      return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
    })(e)
  }

  function c(e, t) {
    if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
  }

  function u(e, t) {
    for (var n = 0; n < t.length; n++) {
      var i = t[n];
      i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(e, i.key, i)
    }
  }

  function h(e, t) {
    return !t || "object" !== l(t) && "function" != typeof t ? function (e) {
      if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
      return e
    }(e) : t
  }

  function d(e, t, n) {
    return (d = "undefined" != typeof Reflect && Reflect.get ? Reflect.get : function (e, t, n) {
      var i = function (e, t) {
        for (; !Object.prototype.hasOwnProperty.call(e, t) && null !== (e = f(e)););
        return e
      }(e, t);
      if (i) {
        var r = Object.getOwnPropertyDescriptor(i, t);
        return r.get ? r.get.call(n) : r.value
      }
    })(e, t, n || e)
  }

  function f(e) {
    return (f = Object.setPrototypeOf ? Object.getPrototypeOf : function (e) {
      return e.__proto__ || Object.getPrototypeOf(e)
    })(e)
  }

  function p(e, t) {
    return (p = Object.setPrototypeOf || function (e, t) {
      return e.__proto__ = t, e
    })(e, t)
  }
  var m = function (e) {
    function t() {
      return c(this, t), h(this, f(t).apply(this, arguments))
    }
    var n, i, r;
    return function (e, t) {
      if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function");
      e.prototype = Object.create(t && t.prototype, {
        constructor: {
          value: e,
          writable: !0,
          configurable: !0
        }
      }), t && p(e, t)
    }(t, e), n = t, (i = [{
      key: "initResizeHandlerElement",
      value: function () {
        d(f(t.prototype), "initResizeHandlerElement", this).call(this), this.resizeHandlerElement.classList.add("vertical"), this.handlerSplitLine.classList.add("vertical"), this.resizeHandlerElement.style.width = "".concat(this.margin, "px")
      }
    }, {
      key: "getTargetWidthPercentage",
      value: function (e, t) {
        return (e.pageX - t.left) / t.width * 100
      }
    }, {
      key: "setPosition",
      value: function (e) {
        this.resizeHandlerElement.style.left = "calc(".concat(e, "% - ").concat(this.margin / 2, "px)")
      }
    }]) && u(n.prototype, i), r && u(n, r), t
  }(s);

  function g(e) {
    return (g = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (e) {
      return typeof e
    } : function (e) {
      return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
    })(e)
  }

  function v(e, t) {
    if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
  }

  function y(e, t) {
    for (var n = 0; n < t.length; n++) {
      var i = t[n];
      i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(e, i.key, i)
    }
  }

  function b(e, t) {
    return !t || "object" !== g(t) && "function" != typeof t ? function (e) {
      if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
      return e
    }(e) : t
  }

  function _(e, t, n) {
    return (_ = "undefined" != typeof Reflect && Reflect.get ? Reflect.get : function (e, t, n) {
      var i = function (e, t) {
        for (; !Object.prototype.hasOwnProperty.call(e, t) && null !== (e = x(e)););
        return e
      }(e, t);
      if (i) {
        var r = Object.getOwnPropertyDescriptor(i, t);
        return r.get ? r.get.call(n) : r.value
      }
    })(e, t, n || e)
  }

  function x(e) {
    return (x = Object.setPrototypeOf ? Object.getPrototypeOf : function (e) {
      return e.__proto__ || Object.getPrototypeOf(e)
    })(e)
  }

  function w(e, t) {
    return (w = Object.setPrototypeOf || function (e, t) {
      return e.__proto__ = t, e
    })(e, t)
  }
  var E = function (e) {
    function t() {
      return v(this, t), b(this, x(t).apply(this, arguments))
    }
    var n, i, r;
    return function (e, t) {
      if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function");
      e.prototype = Object.create(t && t.prototype, {
        constructor: {
          value: e,
          writable: !0,
          configurable: !0
        }
      }), t && w(e, t)
    }(t, e), n = t, (i = [{
      key: "initResizeHandlerElement",
      value: function () {
        _(x(t.prototype), "initResizeHandlerElement", this).call(this), this.resizeHandlerElement.classList.add("horizontal"), this.handlerSplitLine.classList.add("horizontal"), this.resizeHandlerElement.style.height = "".concat(this.margin, "px")
      }
    }, {
      key: "getTargetWidthPercentage",
      value: function (e, t) {
        return (e.pageY - t.top) / t.height * 100
      }
    }, {
      key: "setPosition",
      value: function (e) {
        this.resizeHandlerElement.style.top = "calc(".concat(e, "% - ").concat(this.margin / 2, "px)")
      }
    }]) && y(n.prototype, i), r && y(n, r), t
  }(s);
  n(778);

  function A(e, t) {
    for (var n = 0; n < t.length; n++) {
      var i = t[n];
      i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(e, i.key, i)
    }
  }
  n.d(t, "SplitViewLayout", (function () {
    return S
  }));
  var S = function () {
    function e(t) {
      ! function (e, t) {
        if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
      }(this, e), this._splitType = t || e.SplitType.Vertical, this.onResizeHandlerMove = this.onResizeHandlerMove.bind(this)
    }
    var t, n, i;
    return t = e, (n = [{
      key: "createSplitViewLayout",
      value: function (t, n, i) {
        if (this.targetContainer = t, this.splitViewContainer = document.createElement("div"), this.splitViewContainer.classList.add("split-view-container"), this.targetContainer.parentNode.replaceChild(this.splitViewContainer, this.targetContainer), this.firstViewerContainer = this.wrapViewerContainer(n), this._splitType === e.SplitType.Vertical) this._resizeHandler = new m(this.splitViewContainer, this.onResizeHandlerMove);
        else {
          if (this._splitType !== e.SplitType.Horizontal) return void console.error("unknown splitType");
          this._resizeHandler = new E(this.splitViewContainer, this.onResizeHandlerMove)
        }
        this._resizeHandler && this.splitViewContainer.appendChild(this._resizeHandler.resizeHandlerElement), this.secondViewerContainer = this.wrapViewerContainer(i), this.onResizeHandlerMove(50)
      }
    }, {
      key: "wrapViewerContainer",
      value: function (e) {
        var t = document.createElement("div");
        return t.className = "split-view-viewer-container", e && t.appendChild(e), this.splitViewContainer.appendChild(t), t
      }
    }, {
      key: "restoreMainViewer",
      value: function () {
        this._resizeHandler && (this._resizeHandler.terminate(), this._resizeHandler = null), this.splitViewContainer && (this.splitViewContainer.parentNode.replaceChild(this.targetContainer, this.splitViewContainer), this.splitViewContainer = null, this.targetContainer = null, this.firstViewerContainer = null, this.secondViewerContainer = null)
      }
    }, {
      key: "onResizeHandlerMove",
      value: function (t) {
        this._resizeHandler && this._resizeHandler.setPosition(t), this._splitType === e.SplitType.Vertical ? (this.firstViewerContainer.style.width = "".concat(t, "%"), this.secondViewerContainer.style.width = "".concat(100 - t, "%"), this.secondViewerContainer.style.left = "".concat(t, "%")) : this._splitType === e.SplitType.Horizontal && (this.firstViewerContainer.style.height = "".concat(t, "%"), this.secondViewerContainer.style.height = "".concat(100 - t, "%"), this.secondViewerContainer.style.top = "".concat(t, "%"))
      }
    }]) && A(t.prototype, n), i && A(t, i), e
  }();
  S.SplitType = {
    Vertical: "vertical",
    Horizontal: "horizontal"
  }
}, function (e, t, n) {
  "use strict";
  n.r(t);
  var i = n(3),
    r = n(96),
    o = new ArrayBuffer(8),
    a = new Uint8Array(o),
    s = new Uint16Array(o),
    l = new Int32Array(o),
    c = new Uint32Array(o),
    u = new Float32Array(o),
    h = new Float64Array(o);

  function d(e) {
    this.buffer = e, this.offset = 0, this.byteLength = e.length
  }
  d.prototype.seek = function (e) {
    this.offset = e
  }, d.prototype.getBytes = function (e) {
    var t = new Uint8Array(this.buffer.buffer, this.offset, e);
    return this.offset += e, t
  }, d.prototype.getVarints = function () {
    var e, t = 0,
      n = 0;
    do {
      t |= (127 & (e = this.buffer[this.offset++])) << n, n += 7
    } while (128 & e);
    return t
  }, d.prototype.getUint8 = function () {
    return this.buffer[this.offset++]
  }, d.prototype.getUint16 = function () {
    return a[0] = this.buffer[this.offset++], a[1] = this.buffer[this.offset++], s[0]
  }, d.prototype.getInt16 = function () {
    var e = this.getUint16();
    return e > 32767 && (e |= 4294901760), e
  }, d.prototype.getInt32 = function () {
    var e = this.buffer,
      t = a,
      n = this.offset;
    return t[0] = e[n], t[1] = e[n + 1], t[2] = e[n + 2], t[3] = e[n + 3], this.offset += 4, l[0]
  }, d.prototype.getUint32 = function () {
    var e = this.buffer,
      t = a,
      n = this.offset;
    return t[0] = e[n], t[1] = e[n + 1], t[2] = e[n + 2], t[3] = e[n + 3], this.offset += 4, c[0]
  }, d.prototype.getFloat32 = function () {
    var e = this.buffer,
      t = a,
      n = this.offset;
    return t[0] = e[n], t[1] = e[n + 1], t[2] = e[n + 2], t[3] = e[n + 3], this.offset += 4, u[0]
  }, d.prototype.getIndicesArray = function (e, t, n) {
    for (var i = this.buffer, r = new Uint8Array(e, t, 2 * n), o = this.offset, a = 0, s = 2 * n; a < s; a += 2) r[a] = i[o], r[a + 1] = i[o + 1], o += 4;
    this.offset = o
  }, d.prototype.getVector3Array = function (e, t, n, i) {
    var r = this.buffer,
      o = this.offset,
      a = new Uint8Array(e.buffer, e.byteOffset, e.byteLength);
    if (3 === i && 0 === n) {
      var s = 12 * t;
      a.set(r.subarray(o, o + s)), this.offset += s
    } else {
      i *= 4;
      for (var l = 4 * n, c = 0; c < t; c++) {
        for (var u = 0; u < 12; u++) a[l + u] = r[o++];
        l += i
      }
      this.offset = o
    }
  }, d.prototype.getVector2Array = function (e, t, n, i) {
    var r = this.buffer,
      o = new Uint8Array(e.buffer, e.byteOffset, e.byteLength),
      a = this.offset;
    i *= 4;
    for (var s = 4 * n, l = 0; l < t; l++) {
      for (var c = 0; c < 8; c++) o[s + c] = r[a++];
      s += i
    }
    this.offset = a
  }, d.prototype.getVector4 = function (e, t) {
    for (var n = this.buffer, i = a, r = this.offset, o = u, s = 0; s < 4; s++) i[0] = n[r], i[1] = n[r + 1], i[2] = n[r + 2], i[3] = n[r + 3], e[t + s] = o[0], r += 4;
    this.offset = r
  }, d.prototype.getFloat64 = function () {
    for (var e = this.buffer, t = a, n = this.offset, i = 0; i < 8; i++) t[i] = e[n + i];
    return this.offset += 8, h[0]
  }, d.prototype.getString = function (e) {
    var t = Object(r.c)(this.buffer, this.offset, e);
    return this.offset += e, t
  }, d.prototype.reset = function (e) {
    this.buffer = e, this.offset = 0, this.byteLength = e.length
  };
  var f = n(62);
  n.d(t, "serializeLmvBufferGeom", (function () {
    return H
  })), n.d(t, "readLmvBufferGeom", (function () {
    return q
  }));
  var p = 0,
    m = 1,
    g = 2,
    v = 3,
    y = 4,
    b = 5,
    _ = 0,
    x = 1,
    w = 2,
    E = 3,
    A = 4,
    S = 5,
    M = 6,
    T = 7,
    C = 8,
    P = 9,
    L = 10,
    D = 1,
    I = 2,
    R = 3,
    O = {
      position: g,
      normal: v,
      index: p,
      indexlines: m,
      color: b
    },
    k = {};
  k[g] = "position", k[v] = "normal", k[p] = "index", k[m] = "indexlines", k[b] = "color", k[y] = "uv";
  var N = {};

  function F(e) {
    for (var t = [], n = 0; n < e.length; n += 2) t.push([e[n], e[n + 1]]);
    for (n = 0; n < t.length; n++) {
      if ((r = t[n])[0] > r[1]) {
        var i = r[0];
        r[0] = r[1], r[1] = i
      }
    }
    t.sort((function (e, t) {
      return e[0] - t[0]
    }));
    var r = t[0],
      o = 0;
    e[o] = r[0], e[o + 1] = r[1] - r[0], o += 2;
    for (n = 1; n < t.length; n++, o += 2) r = t[n], e[o] = r[0] - t[n - 1][0], e[o + 1] = r[1] - r[0]
  }

  function U(e) {
    if (e.length) {
      e[1] += e[0], e[2] += e[0];
      for (var t = 3; t < e.length; t += 3) e[t] += e[t - 3], e[t + 1] += e[t], e[t + 2] += e[t]
    }
  }

  function V(e) {
    if (e.length) {
      e[1] += e[0];
      for (var t = 2; t < e.length; t += 2) e[t] += e[t - 2], e[t + 1] += e[t]
    }
  }

  function B(e) {
    var t = k[e];
    return t || (console.error("Unknown vertex attribute"), y)
  }

  function z() {}

  function G(e) {
    this.buffer = e, this.readOffset = 0, this.meshFlag = 0, this.numBuffers = 0, this.numAttributes = 0, this.bufferOffsets = [], this.attributes = [], this.buffers = []
  }

  function H(e) {
    var t = new z,
      n = [];
    if (!e.vb) return console.error("Unexpected non-interleaved vertex buffer"), null;
    n = [e.vb.byteLength, e.ib.byteLength], e.iblines && n.push(e.iblines.byteLength);
    var i, r, o = Object.keys(e.attributes),
      a = 0;
    e.isLines && (a |= D), e.isWideLines && (a |= R), e.isPoints && (a |= I), t.beginHeader(a, o.length, n);
    for (var s = 0; s < o.length; s++) {
      var l = e.attributes[o[s]],
        c = (i = o[s], r = void 0, void 0 !== (r = O[i]) ? r : (0 === i.indexOf("uv") || console.warn("Unknown attribute name"), y));
      "index" === o[s] ? t.addAttribute(c, l, 0, 1) : "indexlines" === o[s] ? t.addAttribute(c, l, 0, 2) : t.addAttribute(c, l, e.vbstride, 0)
    }
    t.endHeader();
    var u = Buffer.from(e.vb.buffer, e.vb.byteOffset, e.vb.byteLength);
    return t.addBuffer(u), e.isLines ? F(e.ib) : function (e) {
      for (var t, n, i = [], r = 0; r < e.length; r += 3) i.push([e[r], e[r + 1], e[r + 2]]);
      for (r = 0; r < i.length; r++)
        for (var o = i[r]; o[0] > o[1] || o[0] > o[2];) n = void 0, n = (t = o)[0], t[0] = t[1], t[1] = t[2], t[2] = n;
      i.sort((function (e, t) {
        return e[0] - t[0]
      })), o = i[0];
      var a = 0;
      for (e[a] = o[0], e[a + 1] = o[1] - o[0], e[a + 2] = o[2] - o[0], a += 3, r = 1; r < i.length; r++, a += 3) o = i[r], e[a] = o[0] - i[r - 1][0], e[a + 1] = o[1] - o[0], e[a + 2] = o[2] - o[0]
    }(e.ib), u = Buffer.from(e.ib.buffer, e.ib.byteOffset, e.ib.byteLength), t.addBuffer(u), e.iblines && (F(e.iblines), u = Buffer.from(e.iblines.buffer, e.iblines.byteOffset, e.iblines.byteLength), t.addBuffer(u)), t.end()
  }
  N[_] = 1, N[x] = 2, N[w] = 1, N[E] = 2, N[A] = 1, N[S] = 2, N[M] = 1, N[T] = 2, N[C] = 4, N[P] = 4, N[L] = 4, z.prototype.beginHeader = function (e, t, n) {
    var i = 8,
      r = n.length;
    for (i += 4 * (r - 1), i += 5 * t; i % 4 != 0;) i++;
    for (var o = 0, a = 0; a < n.length; a++) o += n[a];
    this.buffer = Buffer.alloc(i + o), this.writeOffset = 0;
    for (a = 0; a < 4; a++) this.writeOffset = this.buffer.writeUInt8("OTG0".charCodeAt(a), this.writeOffset);
    this.writeOffset = this.buffer.writeUInt16LE(e, this.writeOffset), this.writeOffset = this.buffer.writeUInt8(r, this.writeOffset), this.writeOffset = this.buffer.writeUInt8(t, this.writeOffset);
    var s = n[0];
    for (a = 1; a < n.length; a++) this.writeOffset = this.buffer.writeUInt32LE(s, this.writeOffset), s += n[a]
  }, z.prototype.addAttribute = function (e, t, n, i) {
    this.writeOffset = this.buffer.writeUInt8(e, this.writeOffset), e === p || e === m ? (this.writeOffset = this.buffer.writeUInt8(function (e) {
      var t = E,
        n = e.bytesPerItem || 2;
      return 1 === n ? t = w : 2 === n ? t = E : 4 === n && (t = L), t << 4 | 15 & e.itemSize
    }(t), this.writeOffset), this.writeOffset = this.buffer.writeUInt8(4 * (t.itemOffset || 0), this.writeOffset), this.writeOffset = this.buffer.writeUInt8(4 * (n || 0), this.writeOffset), this.writeOffset = this.buffer.writeUInt8(i, this.writeOffset)) : (this.writeOffset = this.buffer.writeUInt8(function (e) {
      var t = C,
        n = e.bytesPerItem || 4;
      return 1 === n ? t = e.normalize ? M : w : 2 === n && (t = e.normalize ? T : E), t << 4 | 15 & e.itemSize
    }(t), this.writeOffset), this.writeOffset = this.buffer.writeUInt8(4 * (t.itemOffset || 0), this.writeOffset), this.writeOffset = this.buffer.writeUInt8(4 * (n || 0), this.writeOffset), this.writeOffset = this.buffer.writeUInt8(i, this.writeOffset))
  }, z.prototype.endHeader = function () {
    for (; this.writeOffset % 4 != 0;) this.writeOffset = this.buffer.writeUInt8(0, this.writeOffset)
  }, z.prototype.addBuffer = function (e) {
    e.copy(this.buffer, this.writeOffset), this.writeOffset += e.length
  }, z.prototype.end = function () {
    return this.writeOffset !== this.buffer.length && console.error("Incorrect encoding buffer size"), this.buffer
  }, G.prototype.readNodeJS = function () {
    if ("OTG0" !== this.buffer.toString("ascii", 0, 4)) return console.error("Invalid OTG header"), !1;
    if (this.readOffset = 4, this.meshFlag = this.buffer.readUInt16LE(this.readOffset), this.readOffset += 2, this.numBuffers = this.buffer.readUInt8(this.readOffset), this.readOffset++, this.numAttributes = this.buffer.readUInt8(this.readOffset), this.readOffset++, this.numBuffers) {
      this.bufferOffsets.push(0);
      for (var e = 1; e < this.numBuffers; e++) {
        var t = this.buffer.readUInt32LE(this.readOffset);
        this.readOffset += 4, this.bufferOffsets.push(t)
      }
    }
    for (e = 0; e < this.numAttributes; e++) {
      var n = {};
      n.name = this.buffer.readUInt8(this.readOffset), this.readOffset++;
      var i = this.buffer.readUInt8(this.readOffset);
      this.readOffset++, n.itemSize = 15 & i, n.type = i >> 4, n.bytesPerItem = N[n.type], n.normalize = n.type === A || n.type === S || n.type === M || n.type === T, n.itemOffset = this.buffer.readUInt8(this.readOffset) / 4, this.readOffset++, n.itemStride = this.buffer.readUInt8(this.readOffset) / 4, this.readOffset++, n.bufferIndex = this.buffer.readUInt8(this.readOffset), this.readOffset++, this.attributes.push(n)
    }
    for (; this.readOffset % 4 != 0;) this.readOffset++;
    for (e = 0; e < this.bufferOffsets.length; e++) {
      var r, o = this.readOffset + this.bufferOffsets[e];
      r = e < this.bufferOffsets.length - 1 ? this.readOffset + this.bufferOffsets[e + 1] : this.buffer.length, this.buffers.push(this.buffer.slice(o, r))
    }
    return !0
  }, G.prototype.readWeb = function () {
    var e = new d(this.buffer);
    if ("OTG0" !== e.getString(4)) return console.error("Invalid OTG header"), !1;
    if (this.meshFlag = e.getUint16(), this.numBuffers = e.getUint8(), this.numAttributes = e.getUint8(), this.numBuffers) {
      this.bufferOffsets.push(0);
      for (var t = 1; t < this.numBuffers; t++) {
        var n = e.getUint32();
        this.bufferOffsets.push(n)
      }
    }
    for (t = 0; t < this.numAttributes; t++) {
      var i = {};
      i.name = e.getUint8();
      var r = e.getUint8();
      i.itemSize = 15 & r, i.type = r >> 4, i.bytesPerItem = N[i.type], i.normalize = i.type === A || i.type === S || i.type === M || i.type === T, i.itemOffset = e.getUint8() / 4, i.itemStride = e.getUint8() / 4, i.bufferIndex = e.getUint8(), this.attributes.push(i)
    }
    for (; e.offset % 4 != 0;) e.offset++;
    for (t = 0; t < this.bufferOffsets.length; t++) {
      var o, a = e.offset + this.bufferOffsets[t];
      o = t < this.bufferOffsets.length - 1 ? e.offset + this.bufferOffsets[t + 1] : e.byteLength, this.buffers.push(this.buffer.subarray(a, o))
    }
    return !0
  }, G.prototype.read = function () {
    return Object(i.isNodeJS)() && this.buffer instanceof Buffer ? this.readNodeJS() : this.readWeb()
  };
  var W = new f.LmvBox3;
  W.min.x = -.5, W.min.y = -.5, W.min.z = -.5, W.max.x = .5, W.max.y = .5, W.max.z = .5;
  var j = {
    center: {
      x: 0,
      y: 0,
      z: 0
    },
    radius: Math.sqrt(.75)
  };

  function q(e, t) {
    var n = new G(e);
    if (!n.read()) return console.error("Failed to parse OTG geometry"), null;
    for (var i = {
        vblayout: {},
        vb: new Float32Array(n.buffers[0].buffer, n.buffers[0].byteOffset, n.buffers[0].byteLength / 4),
        isLines: (3 & n.meshFlag) === D,
        isWideLines: (3 & n.meshFlag) === R,
        isPoints: (3 & n.meshFlag) === I,
        boundingBox: W,
        boundingSphere: j
      }, r = 0; r < n.attributes.length; r++) {
      var o = n.attributes[r];
      if (o.name === p) {
        var a = n.buffers[1];
        1 === o.bytesPerItem ? i.indices = a : 2 === o.bytesPerItem ? i.indices = new Uint16Array(a.buffer, a.byteOffset, a.byteLength / o.bytesPerItem) : 4 === o.bytesPerItem && (i.indices = new Uint32Array(a.buffer, a.byteOffset, a.byteLength / o.bytesPerItem)), i.isLines ? V(i.indices) : U(i.indices)
      } else if (o.name === m) {
        if (!t) {
          var s = n.buffers[2];
          1 === o.bytesPerItem ? i.iblines = s : 2 === o.bytesPerItem ? i.iblines = new Uint16Array(s.buffer, s.byteOffset, s.byteLength / o.bytesPerItem) : 4 === o.bytesPerItem && (i.iblines = new Uint32Array(s.buffer, s.byteOffset, s.byteLength / o.bytesPerItem)), V(i.iblines)
        }
      } else {
        var l = B(o.name);
        i.vbstride ? i.vbstride !== o.itemStride && console.error("Unexpected vertex buffer stride mismatch.") : i.vbstride = o.itemStride, o.itemOffset >= o.itemStride || (i.vblayout[l] = {
          bytesPerItem: o.bytesPerItem,
          offset: o.itemOffset,
          normalize: o.normalize,
          itemSize: o.itemSize
        })
      }
    }
    return {
      mesh: i,
      packId: 0,
      meshIndex: 0
    }
  }
}]);
//# sourceMappingURL=viewer3D.min.js.map
